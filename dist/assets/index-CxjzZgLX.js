var Kp=Object.defineProperty;var yd=o=>{throw TypeError(o)};var Wp=(o,i,r)=>i in o?Kp(o,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[i]=r;var _t=(o,i,r)=>Wp(o,typeof i!="symbol"?i+"":i,r),wl=(o,i,r)=>i.has(o)||yd("Cannot "+r);var Q=(o,i,r)=>(wl(o,i,"read from private field"),r?r.call(o):i.get(o)),ke=(o,i,r)=>i.has(o)?yd("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,r),Me=(o,i,r,a)=>(wl(o,i,"write to private field"),a?a.call(o,r):i.set(o,r),r),Re=(o,i,r)=>(wl(o,i,"access private method"),r);var Rl=(o,i,r,a)=>({set _(l){Me(o,i,l,r)},get _(){return Q(o,i,a)}});(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var i=o.default;if(typeof i=="function"){var r=function a(){return this instanceof a?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};r.prototype=i.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var l=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:function(){return o[a]}})}),r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var o=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(a,l,c){var p=null;if(c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),"key"in l){c={};for(var S in l)S!=="key"&&(c[S]=l[S])}else c=l;return l=c.ref,{$$typeof:o,type:a,key:p,ref:l!==void 0?l:null,props:c}}return reactJsxRuntime_production.Fragment=i,reactJsxRuntime_production.jsx=r,reactJsxRuntime_production.jsxs=r,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var o=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),p=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),P=Symbol.iterator;function O(G){return G===null||typeof G!="object"?null:(G=P&&G[P]||G["@@iterator"],typeof G=="function"?G:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,f={};function g(G,re,Y){this.props=G,this.context=re,this.refs=f,this.updater=Y||k}g.prototype.isReactComponent={},g.prototype.setState=function(G,re){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,re,"setState")},g.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function T(){}T.prototype=g.prototype;function U(G,re,Y){this.props=G,this.context=re,this.refs=f,this.updater=Y||k}var N=U.prototype=new T;N.constructor=U,E(N,g.prototype),N.isPureReactComponent=!0;var M=Array.isArray,y={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function m(G,re,Y,x,w,q){return Y=q.ref,{$$typeof:o,type:G,key:re,ref:Y!==void 0?Y:null,props:q}}function R(G,re){return m(G.type,re,void 0,void 0,void 0,G.props)}function C(G){return typeof G=="object"&&G!==null&&G.$$typeof===o}function B(G){var re={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Y){return re[Y]})}var V=/\/+/g;function oe(G,re){return typeof G=="object"&&G!==null&&G.key!=null?B(""+G.key):re.toString(36)}function _e(){}function he(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(_e,_e):(G.status="pending",G.then(function(re){G.status==="pending"&&(G.status="fulfilled",G.value=re)},function(re){G.status==="pending"&&(G.status="rejected",G.reason=re)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function ue(G,re,Y,x,w){var q=typeof G;(q==="undefined"||q==="boolean")&&(G=null);var K=!1;if(G===null)K=!0;else switch(q){case"bigint":case"string":case"number":K=!0;break;case"object":switch(G.$$typeof){case o:case i:K=!0;break;case v:return K=G._init,ue(K(G._payload),re,Y,x,w)}}if(K)return w=w(G),K=x===""?"."+oe(G,0):x,M(w)?(Y="",K!=null&&(Y=K.replace(V,"$&/")+"/"),ue(w,re,Y,"",function(b){return b})):w!=null&&(C(w)&&(w=R(w,Y+(w.key==null||G&&G.key===w.key?"":(""+w.key).replace(V,"$&/")+"/")+K)),re.push(w)),1;K=0;var te=x===""?".":x+":";if(M(G))for(var X=0;X<G.length;X++)x=G[X],q=te+oe(x,X),K+=ue(x,re,Y,q,w);else if(X=O(G),typeof X=="function")for(G=X.call(G),X=0;!(x=G.next()).done;)x=x.value,q=te+oe(x,X++),K+=ue(x,re,Y,q,w);else if(q==="object"){if(typeof G.then=="function")return ue(he(G),re,Y,x,w);throw re=String(G),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return K}function W(G,re,Y){if(G==null)return G;var x=[],w=0;return ue(G,x,"","",function(q){return re.call(Y,q,w++)}),x}function ee(G){if(G._status===-1){var re=G._result;re=re(),re.then(function(Y){(G._status===0||G._status===-1)&&(G._status=1,G._result=Y)},function(Y){(G._status===0||G._status===-1)&&(G._status=2,G._result=Y)}),G._status===-1&&(G._status=0,G._result=re)}if(G._status===1)return G._result.default;throw G._result}var ne=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function ae(){}return react_production.Children={map:W,forEach:function(G,re,Y){W(G,function(){re.apply(this,arguments)},Y)},count:function(G){var re=0;return W(G,function(){re++}),re},toArray:function(G){return W(G,function(re){return re})||[]},only:function(G){if(!C(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},react_production.Component=g,react_production.Fragment=r,react_production.Profiler=l,react_production.PureComponent=U,react_production.StrictMode=a,react_production.Suspense=_,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=y,react_production.act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production.cache=function(G){return function(){return G.apply(null,arguments)}},react_production.cloneElement=function(G,re,Y){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var x=E({},G.props),w=G.key,q=void 0;if(re!=null)for(K in re.ref!==void 0&&(q=void 0),re.key!==void 0&&(w=""+re.key),re)!A.call(re,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&re.ref===void 0||(x[K]=re[K]);var K=arguments.length-2;if(K===1)x.children=Y;else if(1<K){for(var te=Array(K),X=0;X<K;X++)te[X]=arguments[X+2];x.children=te}return m(G.type,w,void 0,void 0,q,x)},react_production.createContext=function(G){return G={$$typeof:p,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:c,_context:G},G},react_production.createElement=function(G,re,Y){var x,w={},q=null;if(re!=null)for(x in re.key!==void 0&&(q=""+re.key),re)A.call(re,x)&&x!=="key"&&x!=="__self"&&x!=="__source"&&(w[x]=re[x]);var K=arguments.length-2;if(K===1)w.children=Y;else if(1<K){for(var te=Array(K),X=0;X<K;X++)te[X]=arguments[X+2];w.children=te}if(G&&G.defaultProps)for(x in K=G.defaultProps,K)w[x]===void 0&&(w[x]=K[x]);return m(G,q,void 0,void 0,null,w)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(G){return{$$typeof:S,render:G}},react_production.isValidElement=C,react_production.lazy=function(G){return{$$typeof:v,_payload:{_status:-1,_result:G},_init:ee}},react_production.memo=function(G,re){return{$$typeof:d,type:G,compare:re===void 0?null:re}},react_production.startTransition=function(G){var re=y.T,Y={};y.T=Y;try{var x=G(),w=y.S;w!==null&&w(Y,x),typeof x=="object"&&x!==null&&typeof x.then=="function"&&x.then(ae,ne)}catch(q){ne(q)}finally{y.T=re}},react_production.unstable_useCacheRefresh=function(){return y.H.useCacheRefresh()},react_production.use=function(G){return y.H.use(G)},react_production.useActionState=function(G,re,Y){return y.H.useActionState(G,re,Y)},react_production.useCallback=function(G,re){return y.H.useCallback(G,re)},react_production.useContext=function(G){return y.H.useContext(G)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(G,re){return y.H.useDeferredValue(G,re)},react_production.useEffect=function(G,re){return y.H.useEffect(G,re)},react_production.useId=function(){return y.H.useId()},react_production.useImperativeHandle=function(G,re,Y){return y.H.useImperativeHandle(G,re,Y)},react_production.useInsertionEffect=function(G,re){return y.H.useInsertionEffect(G,re)},react_production.useLayoutEffect=function(G,re){return y.H.useLayoutEffect(G,re)},react_production.useMemo=function(G,re){return y.H.useMemo(G,re)},react_production.useOptimistic=function(G,re){return y.H.useOptimistic(G,re)},react_production.useReducer=function(G,re,Y){return y.H.useReducer(G,re,Y)},react_production.useRef=function(G){return y.H.useRef(G)},react_production.useState=function(G){return y.H.useState(G)},react_production.useSyncExternalStore=function(G,re,Y){return y.H.useSyncExternalStore(G,re,Y)},react_production.useTransition=function(){return y.H.useTransition()},react_production.version="19.0.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(o){function i(W,ee){var ne=W.length;W.push(ee);e:for(;0<ne;){var ae=ne-1>>>1,G=W[ae];if(0<l(G,ee))W[ae]=ee,W[ne]=G,ne=ae;else break e}}function r(W){return W.length===0?null:W[0]}function a(W){if(W.length===0)return null;var ee=W[0],ne=W.pop();if(ne!==ee){W[0]=ne;e:for(var ae=0,G=W.length,re=G>>>1;ae<re;){var Y=2*(ae+1)-1,x=W[Y],w=Y+1,q=W[w];if(0>l(x,ne))w<G&&0>l(q,x)?(W[ae]=q,W[w]=ne,ae=w):(W[ae]=x,W[Y]=ne,ae=Y);else if(w<G&&0>l(q,ne))W[ae]=q,W[w]=ne,ae=w;else break e}}return ee}function l(W,ee){var ne=W.sortIndex-ee.sortIndex;return ne!==0?ne:W.id-ee.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;o.unstable_now=function(){return c.now()}}else{var p=Date,S=p.now();o.unstable_now=function(){return p.now()-S}}var _=[],d=[],v=1,P=null,O=3,k=!1,E=!1,f=!1,g=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function N(W){for(var ee=r(d);ee!==null;){if(ee.callback===null)a(d);else if(ee.startTime<=W)a(d),ee.sortIndex=ee.expirationTime,i(_,ee);else break;ee=r(d)}}function M(W){if(f=!1,N(W),!E)if(r(_)!==null)E=!0,he();else{var ee=r(d);ee!==null&&ue(M,ee.startTime-W)}}var y=!1,A=-1,m=5,R=-1;function C(){return!(o.unstable_now()-R<m)}function B(){if(y){var W=o.unstable_now();R=W;var ee=!0;try{e:{E=!1,f&&(f=!1,T(A),A=-1),k=!0;var ne=O;try{t:{for(N(W),P=r(_);P!==null&&!(P.expirationTime>W&&C());){var ae=P.callback;if(typeof ae=="function"){P.callback=null,O=P.priorityLevel;var G=ae(P.expirationTime<=W);if(W=o.unstable_now(),typeof G=="function"){P.callback=G,N(W),ee=!0;break t}P===r(_)&&a(_),N(W)}else a(_);P=r(_)}if(P!==null)ee=!0;else{var re=r(d);re!==null&&ue(M,re.startTime-W),ee=!1}}break e}finally{P=null,O=ne,k=!1}ee=void 0}}finally{ee?V():y=!1}}}var V;if(typeof U=="function")V=function(){U(B)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,_e=oe.port2;oe.port1.onmessage=B,V=function(){_e.postMessage(null)}}else V=function(){g(B,0)};function he(){y||(y=!0,V())}function ue(W,ee){A=g(function(){W(o.unstable_now())},ee)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(W){W.callback=null},o.unstable_continueExecution=function(){E||k||(E=!0,he())},o.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<W?Math.floor(1e3/W):5},o.unstable_getCurrentPriorityLevel=function(){return O},o.unstable_getFirstCallbackNode=function(){return r(_)},o.unstable_next=function(W){switch(O){case 1:case 2:case 3:var ee=3;break;default:ee=O}var ne=O;O=ee;try{return W()}finally{O=ne}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=O;O=W;try{return ee()}finally{O=ne}},o.unstable_scheduleCallback=function(W,ee,ne){var ae=o.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,W){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,W={id:v++,callback:ee,priorityLevel:W,startTime:ne,expirationTime:G,sortIndex:-1},ne>ae?(W.sortIndex=ne,i(d,W),r(_)===null&&W===r(d)&&(f?(T(A),A=-1):f=!0,ue(M,ne-ae))):(W.sortIndex=G,i(_,W),E||k||(E=!0,he())),W},o.unstable_shouldYield=C,o.unstable_wrapCallback=function(W){var ee=O;return function(){var ne=O;O=ee;try{return W.apply(this,arguments)}finally{O=ne}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var o=requireReact();function i(_){var d="https://react.dev/errors/"+_;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+_+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(i(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(_,d,v){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:P==null?null:""+P,children:_,containerInfo:d,implementation:v}}var p=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(_,d){if(_==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(_,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(i(299));return c(_,d,null,v)},reactDom_production.flushSync=function(_){var d=p.T,v=a.p;try{if(p.T=null,a.p=2,_)return _()}finally{p.T=d,a.p=v,a.d.f()}},reactDom_production.preconnect=function(_,d){typeof _=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,a.d.C(_,d))},reactDom_production.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},reactDom_production.preinit=function(_,d){if(typeof _=="string"&&d&&typeof d.as=="string"){var v=d.as,P=S(v,d.crossOrigin),O=typeof d.integrity=="string"?d.integrity:void 0,k=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;v==="style"?a.d.S(_,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:P,integrity:O,fetchPriority:k}):v==="script"&&a.d.X(_,{crossOrigin:P,integrity:O,fetchPriority:k,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},reactDom_production.preinitModule=function(_,d){if(typeof _=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var v=S(d.as,d.crossOrigin);a.d.M(_,{crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&a.d.M(_)},reactDom_production.preload=function(_,d){if(typeof _=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var v=d.as,P=S(v,d.crossOrigin);a.d.L(_,v,{crossOrigin:P,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},reactDom_production.preloadModule=function(_,d){if(typeof _=="string")if(d){var v=S(d.as,d.crossOrigin);a.d.m(_,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:v,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else a.d.m(_)},reactDom_production.requestFormReset=function(_){a.d.r(_)},reactDom_production.unstable_batchedUpdates=function(_,d){return _(d)},reactDom_production.useFormState=function(_,d,v){return p.H.useFormState(_,d,v)},reactDom_production.useFormStatus=function(){return p.H.useHostTransitionStatus()},reactDom_production.version="19.0.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(i){console.error(i)}}return o(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var o=requireScheduler(),i=requireReact(),r=requireReactDom();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),M=Symbol.for("react.memo_cache_sentinel"),y=Symbol.iterator;function A(e){return e===null||typeof e!="object"?null:(e=y&&e[y]||e["@@iterator"],typeof e=="function"?e:null)}var m=Symbol.for("react.client.reference");function R(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===m?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case S:return"Portal";case v:return"Profiler";case d:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T:return t=e.displayName||null,t!==null?t:R(e.type)||"Memo";case U:t=e._payload,e=e._init;try{return R(e(t))}catch{}}return null}var C=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=Object.assign,V,oe;function _e(e){if(V===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||"",oe=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+e+oe}var he=!1;function ue(e,t){if(!e||he)return"";he=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(Te){var Ee=Te}Reflect.construct(e,[],xe)}else{try{xe.call()}catch(Te){Ee=Te}e.call(xe.prototype)}}else{try{throw Error()}catch(Te){Ee=Te}(xe=e())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(Te){if(Te&&Ee&&typeof Te.stack=="string")return[Te.stack,Ee.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=s.DetermineComponentFrameRoot(),D=h[0],z=h[1];if(D&&z){var se=D.split(`
`),de=z.split(`
`);for(u=s=0;s<se.length&&!se[s].includes("DetermineComponentFrameRoot");)s++;for(;u<de.length&&!de[u].includes("DetermineComponentFrameRoot");)u++;if(s===se.length||u===de.length)for(s=se.length-1,u=de.length-1;1<=s&&0<=u&&se[s]!==de[u];)u--;for(;1<=s&&0<=u;s--,u--)if(se[s]!==de[u]){if(s!==1||u!==1)do if(s--,u--,0>u||se[s]!==de[u]){var Ce=`
`+se[s].replace(" at new "," at ");return e.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",e.displayName)),Ce}while(1<=s&&0<=u);break}}}finally{he=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?_e(n):""}function W(e){switch(e.tag){case 26:case 27:case 5:return _e(e.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function ee(e){try{var t="";do t+=W(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ne(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ae(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G(e){if(ne(e)!==e)throw Error(a(188))}function re(e){var t=e.alternate;if(!t){if(t=ne(e),t===null)throw Error(a(188));return t!==e?null:e}for(var n=e,s=t;;){var u=n.return;if(u===null)break;var h=u.alternate;if(h===null){if(s=u.return,s!==null){n=s;continue}break}if(u.child===h.child){for(h=u.child;h;){if(h===n)return G(u),e;if(h===s)return G(u),t;h=h.sibling}throw Error(a(188))}if(n.return!==s.return)n=u,s=h;else{for(var D=!1,z=u.child;z;){if(z===n){D=!0,n=u,s=h;break}if(z===s){D=!0,s=u,n=h;break}z=z.sibling}if(!D){for(z=h.child;z;){if(z===n){D=!0,n=h,s=u;break}if(z===s){D=!0,s=h,n=u;break}z=z.sibling}if(!D)throw Error(a(189))}}if(n.alternate!==s)throw Error(a(190))}if(n.tag!==3)throw Error(a(188));return n.stateNode.current===n?e:t}function Y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Y(e),t!==null)return t;e=e.sibling}return null}var x=Array.isArray,w=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},K=[],te=-1;function X(e){return{current:e}}function b(e){0>te||(e.current=K[te],K[te]=null,te--)}function L(e,t){te++,K[te]=e.current,e.current=t}var j=X(null),I=X(null),H=X(null),J=X(null);function $(e,t){switch(L(H,t),L(I,e),L(j,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Yh(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=Yh(e),t=Xh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}b(j),L(j,t)}function F(){b(j),b(I),b(H)}function Z(e){e.memoizedState!==null&&L(J,e);var t=j.current,n=Xh(t,e.type);t!==n&&(L(I,e),L(j,n))}function ce(e){I.current===e&&(b(j),b(I)),J.current===e&&(b(J),na._currentValue=q)}var ie=Object.prototype.hasOwnProperty,fe=o.unstable_scheduleCallback,be=o.unstable_cancelCallback,Ae=o.unstable_shouldYield,Oe=o.unstable_requestPaint,ye=o.unstable_now,Ie=o.unstable_getCurrentPriorityLevel,Le=o.unstable_ImmediatePriority,De=o.unstable_UserBlockingPriority,je=o.unstable_NormalPriority,Ze=o.unstable_LowPriority,st=o.unstable_IdlePriority,Ke=o.log,Xe=o.unstable_setDisableYieldValue,Ve=null,ze=null;function hn(e){if(ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Ve,e,void 0,(e.current.flags&128)===128)}catch{}}function Lt(e){if(typeof Ke=="function"&&Xe(e),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(Ve,e)}catch{}}var yt=Math.clz32?Math.clz32:ge,Se=Math.log,pe=Math.LN2;function ge(e){return e>>>=0,e===0?32:31-(Se(e)/pe|0)|0}var Pe=128,qe=4194304;function Je(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function nt(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,u=e.suspendedLanes,h=e.pingedLanes,D=e.warmLanes;e=e.finishedLanes!==0;var z=n&134217727;return z!==0?(n=z&~u,n!==0?s=Je(n):(h&=z,h!==0?s=Je(h):e||(D=z&~D,D!==0&&(s=Je(D))))):(z=n&~u,z!==0?s=Je(z):h!==0?s=Je(h):e||(D=n&~D,D!==0&&(s=Je(D)))),s===0?0:t!==0&&t!==s&&!(t&u)&&(u=s&-s,D=t&-t,u>=D||u===32&&(D&4194176)!==0)?t:s}function Ut(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function jn(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dn(){var e=Pe;return Pe<<=1,!(Pe&4194176)&&(Pe=128),e}function Ot(){var e=qe;return qe<<=1,!(qe&62914560)&&(qe=4194304),e}function fn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oi(e,t,n,s,u,h){var D=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var z=e.entanglements,se=e.expirationTimes,de=e.hiddenUpdates;for(n=D&~n;0<n;){var Ce=31-yt(n),xe=1<<Ce;z[Ce]=0,se[Ce]=-1;var Ee=de[Ce];if(Ee!==null)for(de[Ce]=null,Ce=0;Ce<Ee.length;Ce++){var Te=Ee[Ce];Te!==null&&(Te.lane&=-536870913)}n&=~xe}s!==0&&gt(e,s,0),h!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=h&~(D&~t))}function gt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-yt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194218}function ri(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-yt(n),u=1<<s;u&t|e[s]&t&&(e[s]|=t),n&=~u}}function oi(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ki(){var e=w.p;return e!==0?e:(e=window.event,e===void 0?32:dd(e.type))}function fs(e,t){var n=w.p;try{return w.p=e,t()}finally{w.p=n}}var It=Math.random().toString(36).slice(2),it="__reactFiber$"+It,bt="__reactProps$"+It,pn="__reactContainer$"+It,Er="__reactEvents$"+It,Id="__reactListeners$"+It,Bd="__reactHandles$"+It,$l="__reactResources$"+It,ps="__reactMarker$"+It;function Ar(e){delete e[it],delete e[bt],delete e[Er],delete e[Id],delete e[Bd]}function li(e){var t=e[it];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[it]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Qh(e);e!==null;){if(n=e[it])return n;e=Qh(e)}return t}e=n,n=e.parentNode}return null}function Mi(e){if(e=e[it]||e[pn]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function gs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function Di(e){var t=e[$l];return t||(t=e[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ct(e){e[ps]=!0}var Vl=new Set,Yl={};function ui(e,t){Pi(e,t),Pi(e+"Capture",t)}function Pi(e,t){for(Yl[e]=t,e=0;e<t.length;e++)Vl.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xl={},Kl={};function Hd(e){return ie.call(Kl,e)?!0:ie.call(Xl,e)?!1:qd.test(e)?Kl[e]=!0:(Xl[e]=!0,!1)}function ua(e,t,n){if(Hd(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ca(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function An(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}function Xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wl(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zd(e){var t=Wl(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(D){s=""+D,h.call(this,D)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(D){s=""+D},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ha(e){e._valueTracker||(e._valueTracker=zd(e))}function Ql(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Wl(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gd=/[\n"\\]/g;function Kt(e){return e.replace(Gd,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Sr(e,t,n,s,u,h,D,z){e.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.type=D:e.removeAttribute("type"),t!=null?D==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Xt(t)):e.value!==""+Xt(t)&&(e.value=""+Xt(t)):D!=="submit"&&D!=="reset"||e.removeAttribute("value"),t!=null?Tr(e,D,Xt(t)):n!=null?Tr(e,D,Xt(n)):s!=null&&e.removeAttribute("value"),u==null&&h!=null&&(e.defaultChecked=!!h),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?e.name=""+Xt(z):e.removeAttribute("name")}function Jl(e,t,n,s,u,h,D,z){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||n!=null){if(!(h!=="submit"&&h!=="reset"||t!=null))return;n=n!=null?""+Xt(n):"",t=t!=null?""+Xt(t):n,z||t===e.value||(e.value=t),e.defaultValue=t}s=s??u,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=z?e.checked:!!s,e.defaultChecked=!!s,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(e.name=D)}function Tr(e,t,n){t==="number"&&da(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Li(e,t,n,s){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Xt(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Zl(e,t,n){if(t!=null&&(t=""+Xt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Xt(n):""}function eu(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(a(92));if(x(s)){if(1<s.length)throw Error(a(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=Xt(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Ni(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $d=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||$d.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function nu(e,t,n){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var u in t)s=t[u],t.hasOwnProperty(u)&&n[u]!==s&&tu(e,u,s)}else for(var h in t)t.hasOwnProperty(h)&&tu(e,h,t[h])}function Cr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fa(e){return Yd.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var wr=null;function Rr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fi=null,Ui=null;function iu(e){var t=Mi(e);if(t&&(e=t.stateNode)){var n=e[bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Sr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var u=s[bt]||null;if(!u)throw Error(a(90));Sr(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&Ql(s)}break e;case"textarea":Zl(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Li(e,!!n.multiple,t,!1)}}}var xr=!1;function su(e,t,n){if(xr)return e(t,n);xr=!0;try{var s=e(t);return s}finally{if(xr=!1,(Fi!==null||Ui!==null)&&(Wa(),Fi&&(t=Fi,e=Ui,Ui=Fi=null,iu(t),e)))for(t=0;t<e.length;t++)iu(e[t])}}function ms(e,t){var n=e.stateNode;if(n===null)return null;var s=n[bt]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(a(231,t,typeof n));return n}var Or=!1;if(En)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Or=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Or=!1}var In=null,kr=null,pa=null;function au(){if(pa)return pa;var e,t=kr,n=t.length,s,u="value"in In?In.value:In.textContent,h=u.length;for(e=0;e<n&&t[e]===u[e];e++);var D=n-e;for(s=1;s<=D&&t[n-s]===u[h-s];s++);return pa=u.slice(e,1<s?1-s:void 0)}function ga(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ma(){return!0}function ru(){return!1}function Bt(e){function t(n,s,u,h,D){this._reactName=n,this._targetInst=u,this.type=s,this.nativeEvent=h,this.target=D,this.currentTarget=null;for(var z in e)e.hasOwnProperty(z)&&(n=e[z],this[z]=n?n(h):h[z]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ma:ru,this.isPropagationStopped=ru,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),t}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=Bt(ci),ys=B({},ci,{view:0,detail:0}),Xd=Bt(ys),Mr,Dr,bs,ya=B({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bs&&(bs&&e.type==="mousemove"?(Mr=e.screenX-bs.screenX,Dr=e.screenY-bs.screenY):Dr=Mr=0,bs=e),Mr)},movementY:function(e){return"movementY"in e?e.movementY:Dr}}),ou=Bt(ya),Kd=B({},ya,{dataTransfer:0}),Wd=Bt(Kd),Qd=B({},ys,{relatedTarget:0}),Pr=Bt(Qd),Jd=B({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Zd=Bt(Jd),ef=B({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tf=Bt(ef),nf=B({},ci,{data:0}),lu=Bt(nf),sf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},af={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function of(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rf[e])?!!t[e]:!1}function Lr(){return of}var lf=B({},ys,{key:function(e){if(e.key){var t=sf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?af[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(e){return e.type==="keypress"?ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uf=Bt(lf),cf=B({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uu=Bt(cf),hf=B({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),df=Bt(hf),ff=B({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),pf=Bt(ff),gf=B({},ya,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mf=Bt(gf),_f=B({},ci,{newState:0,oldState:0}),yf=Bt(_f),bf=[9,13,27,32],Nr=En&&"CompositionEvent"in window,vs=null;En&&"documentMode"in document&&(vs=document.documentMode);var vf=En&&"TextEvent"in window&&!vs,cu=En&&(!Nr||vs&&8<vs&&11>=vs),hu=" ",du=!1;function fu(e,t){switch(e){case"keyup":return bf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ji=!1;function Ef(e,t){switch(e){case"compositionend":return pu(t);case"keypress":return t.which!==32?null:(du=!0,hu);case"textInput":return e=t.data,e===hu&&du?null:e;default:return null}}function Af(e,t){if(ji)return e==="compositionend"||!Nr&&fu(e,t)?(e=au(),pa=kr=In=null,ji=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cu&&t.locale!=="ko"?null:t.data;default:return null}}var Sf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sf[e.type]:t==="textarea"}function mu(e,t,n,s){Fi?Ui?Ui.push(s):Ui=[s]:Fi=s,t=tr(t,"onChange"),0<t.length&&(n=new _a("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Es=null,As=null;function Tf(e){Hh(e,0)}function ba(e){var t=gs(e);if(Ql(t))return e}function _u(e,t){if(e==="change")return t}var yu=!1;if(En){var Fr;if(En){var Ur="oninput"in document;if(!Ur){var bu=document.createElement("div");bu.setAttribute("oninput","return;"),Ur=typeof bu.oninput=="function"}Fr=Ur}else Fr=!1;yu=Fr&&(!document.documentMode||9<document.documentMode)}function vu(){Es&&(Es.detachEvent("onpropertychange",Eu),As=Es=null)}function Eu(e){if(e.propertyName==="value"&&ba(As)){var t=[];mu(t,As,e,Rr(e)),su(Tf,t)}}function Cf(e,t,n){e==="focusin"?(vu(),Es=t,As=n,Es.attachEvent("onpropertychange",Eu)):e==="focusout"&&vu()}function wf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ba(As)}function Rf(e,t){if(e==="click")return ba(t)}function xf(e,t){if(e==="input"||e==="change")return ba(t)}function Of(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Of;function Ss(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var u=n[s];if(!ie.call(t,u)||!Ht(e[u],t[u]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Su(e,t){var n=Au(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Au(n)}}function Tu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=da(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=da(e.document)}return t}function jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kf(e,t){var n=Cu(t);t=e.focusedElem;var s=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Tu(t.ownerDocument.documentElement,t)){if(s!==null&&jr(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var u=t.textContent.length,h=Math.min(s.start,u);s=s.end===void 0?h:Math.min(s.end,u),!n.extend&&h>s&&(u=s,s=h,h=u),u=Su(t,h);var D=Su(t,s);u&&D&&(n.rangeCount!==1||n.anchorNode!==u.node||n.anchorOffset!==u.offset||n.focusNode!==D.node||n.focusOffset!==D.offset)&&(e=e.createRange(),e.setStart(u.node,u.offset),n.removeAllRanges(),h>s?(n.addRange(e),n.extend(D.node,D.offset)):(e.setEnd(D.node,D.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Mf=En&&"documentMode"in document&&11>=document.documentMode,Ii=null,Ir=null,Ts=null,Br=!1;function wu(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Br||Ii==null||Ii!==da(s)||(s=Ii,"selectionStart"in s&&jr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ts&&Ss(Ts,s)||(Ts=s,s=tr(Ir,"onSelect"),0<s.length&&(t=new _a("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ii)))}function hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Bi={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},qr={},Ru={};En&&(Ru=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function di(e){if(qr[e])return qr[e];if(!Bi[e])return e;var t=Bi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ru)return qr[e]=t[n];return e}var xu=di("animationend"),Ou=di("animationiteration"),ku=di("animationstart"),Df=di("transitionrun"),Pf=di("transitionstart"),Lf=di("transitioncancel"),Mu=di("transitionend"),Du=new Map,Pu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function on(e,t){Du.set(e,t),ui(t,[e])}var Wt=[],qi=0,Hr=0;function va(){for(var e=qi,t=Hr=qi=0;t<e;){var n=Wt[t];Wt[t++]=null;var s=Wt[t];Wt[t++]=null;var u=Wt[t];Wt[t++]=null;var h=Wt[t];if(Wt[t++]=null,s!==null&&u!==null){var D=s.pending;D===null?u.next=u:(u.next=D.next,D.next=u),s.pending=u}h!==0&&Lu(n,u,h)}}function Ea(e,t,n,s){Wt[qi++]=e,Wt[qi++]=t,Wt[qi++]=n,Wt[qi++]=s,Hr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function zr(e,t,n,s){return Ea(e,t,n,s),Aa(e)}function Bn(e,t){return Ea(e,null,null,t),Aa(e)}function Lu(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var u=!1,h=e.return;h!==null;)h.childLanes|=n,s=h.alternate,s!==null&&(s.childLanes|=n),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(u=!0)),e=h,h=h.return;u&&t!==null&&e.tag===3&&(h=e.stateNode,u=31-yt(n),h=h.hiddenUpdates,e=h[u],e===null?h[u]=[t]:e.push(t),t.lane=n|536870912)}function Aa(e){if(50<Ks)throw Ks=0,Wo=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hi={},Nu=new WeakMap;function Qt(e,t){if(typeof e=="object"&&e!==null){var n=Nu.get(e);return n!==void 0?n:(t={value:e,source:t,stack:ee(t)},Nu.set(e,t),t)}return{value:e,source:t,stack:ee(t)}}var zi=[],Gi=0,Sa=null,Ta=0,Jt=[],Zt=0,fi=null,Sn=1,Tn="";function pi(e,t){zi[Gi++]=Ta,zi[Gi++]=Sa,Sa=e,Ta=t}function Fu(e,t,n){Jt[Zt++]=Sn,Jt[Zt++]=Tn,Jt[Zt++]=fi,fi=e;var s=Sn;e=Tn;var u=32-yt(s)-1;s&=~(1<<u),n+=1;var h=32-yt(t)+u;if(30<h){var D=u-u%5;h=(s&(1<<D)-1).toString(32),s>>=D,u-=D,Sn=1<<32-yt(t)+u|n<<u|s,Tn=h+e}else Sn=1<<h|n<<u|s,Tn=e}function Gr(e){e.return!==null&&(pi(e,1),Fu(e,1,0))}function $r(e){for(;e===Sa;)Sa=zi[--Gi],zi[Gi]=null,Ta=zi[--Gi],zi[Gi]=null;for(;e===fi;)fi=Jt[--Zt],Jt[Zt]=null,Tn=Jt[--Zt],Jt[Zt]=null,Sn=Jt[--Zt],Jt[Zt]=null}var Nt=null,kt=null,et=!1,ln=null,gn=!1,Vr=Error(a(519));function gi(e){var t=Error(a(418,""));throw Rs(Qt(t,e)),Vr}function Uu(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[it]=e,t[bt]=s,n){case"dialog":We("cancel",t),We("close",t);break;case"iframe":case"object":case"embed":We("load",t);break;case"video":case"audio":for(n=0;n<Qs.length;n++)We(Qs[n],t);break;case"source":We("error",t);break;case"img":case"image":case"link":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"input":We("invalid",t),Jl(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ha(t);break;case"select":We("invalid",t);break;case"textarea":We("invalid",t),eu(t,s.value,s.defaultValue,s.children),ha(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||Vh(t.textContent,n)?(s.popover!=null&&(We("beforetoggle",t),We("toggle",t)),s.onScroll!=null&&We("scroll",t),s.onScrollEnd!=null&&We("scrollend",t),s.onClick!=null&&(t.onclick=nr),t=!0):t=!1,t||gi(e)}function ju(e){for(Nt=e.return;Nt;)switch(Nt.tag){case 3:case 27:gn=!0;return;case 5:case 13:gn=!1;return;default:Nt=Nt.return}}function Cs(e){if(e!==Nt)return!1;if(!et)return ju(e),et=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||fl(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&kt&&gi(e),ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){kt=cn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}kt=null}}else kt=Nt?cn(e.stateNode.nextSibling):null;return!0}function ws(){kt=Nt=null,et=!1}function Rs(e){ln===null?ln=[e]:ln.push(e)}var xs=Error(a(460)),Iu=Error(a(474)),Yr={then:function(){}};function Bu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ca(){}function qu(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ca,Ca),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===xs?Error(a(483)):e;default:if(typeof t.status=="string")t.then(Ca,Ca);else{if(e=lt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=s}},function(s){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===xs?Error(a(483)):e}throw Os=t,xs}}var Os=null;function Hu(){if(Os===null)throw Error(a(459));var e=Os;return Os=null,e}var $i=null,ks=0;function wa(e){var t=ks;return ks+=1,$i===null&&($i=[]),qu($i,e,t)}function Ms(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ra(e,t){throw t.$$typeof===c?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function zu(e){var t=e._init;return t(e._payload)}function Gu(e){function t(me,le){if(e){var ve=me.deletions;ve===null?(me.deletions=[le],me.flags|=16):ve.push(le)}}function n(me,le){if(!e)return null;for(;le!==null;)t(me,le),le=le.sibling;return null}function s(me){for(var le=new Map;me!==null;)me.key!==null?le.set(me.key,me):le.set(me.index,me),me=me.sibling;return le}function u(me,le){return me=Jn(me,le),me.index=0,me.sibling=null,me}function h(me,le,ve){return me.index=ve,e?(ve=me.alternate,ve!==null?(ve=ve.index,ve<le?(me.flags|=33554434,le):ve):(me.flags|=33554434,le)):(me.flags|=1048576,le)}function D(me){return e&&me.alternate===null&&(me.flags|=33554434),me}function z(me,le,ve,we){return le===null||le.tag!==6?(le=Ho(ve,me.mode,we),le.return=me,le):(le=u(le,ve),le.return=me,le)}function se(me,le,ve,we){var Ne=ve.type;return Ne===_?Ce(me,le,ve.props.children,we,ve.key):le!==null&&(le.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&zu(Ne)===le.type)?(le=u(le,ve.props),Ms(le,ve),le.return=me,le):(le=$a(ve.type,ve.key,ve.props,null,me.mode,we),Ms(le,ve),le.return=me,le)}function de(me,le,ve,we){return le===null||le.tag!==4||le.stateNode.containerInfo!==ve.containerInfo||le.stateNode.implementation!==ve.implementation?(le=zo(ve,me.mode,we),le.return=me,le):(le=u(le,ve.children||[]),le.return=me,le)}function Ce(me,le,ve,we,Ne){return le===null||le.tag!==7?(le=Ci(ve,me.mode,we,Ne),le.return=me,le):(le=u(le,ve),le.return=me,le)}function xe(me,le,ve){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=Ho(""+le,me.mode,ve),le.return=me,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case p:return ve=$a(le.type,le.key,le.props,null,me.mode,ve),Ms(ve,le),ve.return=me,ve;case S:return le=zo(le,me.mode,ve),le.return=me,le;case U:var we=le._init;return le=we(le._payload),xe(me,le,ve)}if(x(le)||A(le))return le=Ci(le,me.mode,ve,null),le.return=me,le;if(typeof le.then=="function")return xe(me,wa(le),ve);if(le.$$typeof===k)return xe(me,Ha(me,le),ve);Ra(me,le)}return null}function Ee(me,le,ve,we){var Ne=le!==null?le.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Ne!==null?null:z(me,le,""+ve,we);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case p:return ve.key===Ne?se(me,le,ve,we):null;case S:return ve.key===Ne?de(me,le,ve,we):null;case U:return Ne=ve._init,ve=Ne(ve._payload),Ee(me,le,ve,we)}if(x(ve)||A(ve))return Ne!==null?null:Ce(me,le,ve,we,null);if(typeof ve.then=="function")return Ee(me,le,wa(ve),we);if(ve.$$typeof===k)return Ee(me,le,Ha(me,ve),we);Ra(me,ve)}return null}function Te(me,le,ve,we,Ne){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return me=me.get(ve)||null,z(le,me,""+we,Ne);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case p:return me=me.get(we.key===null?ve:we.key)||null,se(le,me,we,Ne);case S:return me=me.get(we.key===null?ve:we.key)||null,de(le,me,we,Ne);case U:var $e=we._init;return we=$e(we._payload),Te(me,le,ve,we,Ne)}if(x(we)||A(we))return me=me.get(ve)||null,Ce(le,me,we,Ne,null);if(typeof we.then=="function")return Te(me,le,ve,wa(we),Ne);if(we.$$typeof===k)return Te(me,le,ve,Ha(le,we),Ne);Ra(le,we)}return null}function Fe(me,le,ve,we){for(var Ne=null,$e=null,Ue=le,Be=le=0,xt=null;Ue!==null&&Be<ve.length;Be++){Ue.index>Be?(xt=Ue,Ue=null):xt=Ue.sibling;var tt=Ee(me,Ue,ve[Be],we);if(tt===null){Ue===null&&(Ue=xt);break}e&&Ue&&tt.alternate===null&&t(me,Ue),le=h(tt,le,Be),$e===null?Ne=tt:$e.sibling=tt,$e=tt,Ue=xt}if(Be===ve.length)return n(me,Ue),et&&pi(me,Be),Ne;if(Ue===null){for(;Be<ve.length;Be++)Ue=xe(me,ve[Be],we),Ue!==null&&(le=h(Ue,le,Be),$e===null?Ne=Ue:$e.sibling=Ue,$e=Ue);return et&&pi(me,Be),Ne}for(Ue=s(Ue);Be<ve.length;Be++)xt=Te(Ue,me,Be,ve[Be],we),xt!==null&&(e&&xt.alternate!==null&&Ue.delete(xt.key===null?Be:xt.key),le=h(xt,le,Be),$e===null?Ne=xt:$e.sibling=xt,$e=xt);return e&&Ue.forEach(function(ai){return t(me,ai)}),et&&pi(me,Be),Ne}function He(me,le,ve,we){if(ve==null)throw Error(a(151));for(var Ne=null,$e=null,Ue=le,Be=le=0,xt=null,tt=ve.next();Ue!==null&&!tt.done;Be++,tt=ve.next()){Ue.index>Be?(xt=Ue,Ue=null):xt=Ue.sibling;var ai=Ee(me,Ue,tt.value,we);if(ai===null){Ue===null&&(Ue=xt);break}e&&Ue&&ai.alternate===null&&t(me,Ue),le=h(ai,le,Be),$e===null?Ne=ai:$e.sibling=ai,$e=ai,Ue=xt}if(tt.done)return n(me,Ue),et&&pi(me,Be),Ne;if(Ue===null){for(;!tt.done;Be++,tt=ve.next())tt=xe(me,tt.value,we),tt!==null&&(le=h(tt,le,Be),$e===null?Ne=tt:$e.sibling=tt,$e=tt);return et&&pi(me,Be),Ne}for(Ue=s(Ue);!tt.done;Be++,tt=ve.next())tt=Te(Ue,me,Be,tt.value,we),tt!==null&&(e&&tt.alternate!==null&&Ue.delete(tt.key===null?Be:tt.key),le=h(tt,le,Be),$e===null?Ne=tt:$e.sibling=tt,$e=tt);return e&&Ue.forEach(function(Xp){return t(me,Xp)}),et&&pi(me,Be),Ne}function pt(me,le,ve,we){if(typeof ve=="object"&&ve!==null&&ve.type===_&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case p:e:{for(var Ne=ve.key;le!==null;){if(le.key===Ne){if(Ne=ve.type,Ne===_){if(le.tag===7){n(me,le.sibling),we=u(le,ve.props.children),we.return=me,me=we;break e}}else if(le.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===U&&zu(Ne)===le.type){n(me,le.sibling),we=u(le,ve.props),Ms(we,ve),we.return=me,me=we;break e}n(me,le);break}else t(me,le);le=le.sibling}ve.type===_?(we=Ci(ve.props.children,me.mode,we,ve.key),we.return=me,me=we):(we=$a(ve.type,ve.key,ve.props,null,me.mode,we),Ms(we,ve),we.return=me,me=we)}return D(me);case S:e:{for(Ne=ve.key;le!==null;){if(le.key===Ne)if(le.tag===4&&le.stateNode.containerInfo===ve.containerInfo&&le.stateNode.implementation===ve.implementation){n(me,le.sibling),we=u(le,ve.children||[]),we.return=me,me=we;break e}else{n(me,le);break}else t(me,le);le=le.sibling}we=zo(ve,me.mode,we),we.return=me,me=we}return D(me);case U:return Ne=ve._init,ve=Ne(ve._payload),pt(me,le,ve,we)}if(x(ve))return Fe(me,le,ve,we);if(A(ve)){if(Ne=A(ve),typeof Ne!="function")throw Error(a(150));return ve=Ne.call(ve),He(me,le,ve,we)}if(typeof ve.then=="function")return pt(me,le,wa(ve),we);if(ve.$$typeof===k)return pt(me,le,Ha(me,ve),we);Ra(me,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,le!==null&&le.tag===6?(n(me,le.sibling),we=u(le,ve),we.return=me,me=we):(n(me,le),we=Ho(ve,me.mode,we),we.return=me,me=we),D(me)):n(me,le)}return function(me,le,ve,we){try{ks=0;var Ne=pt(me,le,ve,we);return $i=null,Ne}catch(Ue){if(Ue===xs)throw Ue;var $e=sn(29,Ue,null,me.mode);return $e.lanes=we,$e.return=me,$e}finally{}}}var mi=Gu(!0),$u=Gu(!1),Vi=X(null),xa=X(0);function Vu(e,t){e=Nn,L(xa,e),L(Vi,t),Nn=e|t.baseLanes}function Xr(){L(xa,Nn),L(Vi,Vi.current)}function Kr(){Nn=xa.current,b(Vi),b(xa)}var en=X(null),mn=null;function qn(e){var t=e.alternate;L(St,St.current&1),L(en,e),mn===null&&(t===null||Vi.current!==null||t.memoizedState!==null)&&(mn=e)}function Yu(e){if(e.tag===22){if(L(St,St.current),L(en,e),mn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(mn=e)}}else Hn()}function Hn(){L(St,St.current),L(en,en.current)}function Cn(e){b(en),mn===e&&(mn=null),b(St)}var St=X(0);function Oa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nf=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Ff=o.unstable_scheduleCallback,Uf=o.unstable_NormalPriority,Tt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wr(){return{controller:new Nf,data:new Map,refCount:0}}function Ds(e){e.refCount--,e.refCount===0&&Ff(Uf,function(){e.controller.abort()})}var Ps=null,Qr=0,Yi=0,Xi=null;function jf(e,t){if(Ps===null){var n=Ps=[];Qr=0,Yi=sl(),Xi={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Qr++,t.then(Xu,Xu),t}function Xu(){if(--Qr===0&&Ps!==null){Xi!==null&&(Xi.status="fulfilled");var e=Ps;Ps=null,Yi=0,Xi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function If(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(u){n.push(u)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var u=0;u<n.length;u++)(0,n[u])(t)},function(u){for(s.status="rejected",s.reason=u,u=0;u<n.length;u++)(0,n[u])(void 0)}),s}var Ku=C.S;C.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&jf(e,t),Ku!==null&&Ku(e,t)};var _i=X(null);function Jr(){var e=_i.current;return e!==null?e:lt.pooledCache}function ka(e,t){t===null?L(_i,_i.current):L(_i,t.pool)}function Wu(){var e=Jr();return e===null?null:{parent:Tt._currentValue,pool:e}}var zn=0,Ge=null,at=null,vt=null,Ma=!1,Ki=!1,yi=!1,Da=0,Ls=0,Wi=null,Bf=0;function mt(){throw Error(a(321))}function Zr(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function eo(e,t,n,s,u,h){return zn=h,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?bi:Gn,yi=!1,h=n(s,u),yi=!1,Ki&&(h=Ju(t,n,s,u)),Qu(e),h}function Qu(e){C.H=_n;var t=at!==null&&at.next!==null;if(zn=0,vt=at=Ge=null,Ma=!1,Ls=0,Wi=null,t)throw Error(a(300));e===null||wt||(e=e.dependencies,e!==null&&qa(e)&&(wt=!0))}function Ju(e,t,n,s){Ge=e;var u=0;do{if(Ki&&(Wi=null),Ls=0,Ki=!1,25<=u)throw Error(a(301));if(u+=1,vt=at=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}C.H=vi,h=t(n,s)}while(Ki);return h}function qf(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?Ns(t):t,e=e.useState()[0],(at!==null?at.memoizedState:null)!==e&&(Ge.flags|=1024),t}function to(){var e=Da!==0;return Da=0,e}function no(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function io(e){if(Ma){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ma=!1}zn=0,vt=at=Ge=null,Ki=!1,Ls=Da=0,Wi=null}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ge.memoizedState=vt=e:vt=vt.next=e,vt}function Et(){if(at===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=vt===null?Ge.memoizedState:vt.next;if(t!==null)vt=t,at=e;else{if(e===null)throw Ge.alternate===null?Error(a(467)):Error(a(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},vt===null?Ge.memoizedState=vt=e:vt=vt.next=e}return vt}var Pa;Pa=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ns(e){var t=Ls;return Ls+=1,Wi===null&&(Wi=[]),e=qu(Wi,e,t),t=Ge,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?bi:Gn),e}function La(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ns(e);if(e.$$typeof===k)return Pt(e)}throw Error(a(438,String(e)))}function so(e){var t=null,n=Ge.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=Ge.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Pa(),Ge.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=M;return t.index++,n}function wn(e,t){return typeof t=="function"?t(e):t}function Na(e){var t=Et();return ao(t,at,e)}function ao(e,t,n){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=n;var u=e.baseQueue,h=s.pending;if(h!==null){if(u!==null){var D=u.next;u.next=h.next,h.next=D}t.baseQueue=u=h,s.pending=null}if(h=e.baseState,u===null)e.memoizedState=h;else{t=u.next;var z=D=null,se=null,de=t,Ce=!1;do{var xe=de.lane&-536870913;if(xe!==de.lane?(Qe&xe)===xe:(zn&xe)===xe){var Ee=de.revertLane;if(Ee===0)se!==null&&(se=se.next={lane:0,revertLane:0,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),xe===Yi&&(Ce=!0);else if((zn&Ee)===Ee){de=de.next,Ee===Yi&&(Ce=!0);continue}else xe={lane:0,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},se===null?(z=se=xe,D=h):se=se.next=xe,Ge.lanes|=Ee,Zn|=Ee;xe=de.action,yi&&n(h,xe),h=de.hasEagerState?de.eagerState:n(h,xe)}else Ee={lane:xe,revertLane:de.revertLane,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},se===null?(z=se=Ee,D=h):se=se.next=Ee,Ge.lanes|=xe,Zn|=xe;de=de.next}while(de!==null&&de!==t);if(se===null?D=h:se.next=z,!Ht(h,e.memoizedState)&&(wt=!0,Ce&&(n=Xi,n!==null)))throw n;e.memoizedState=h,e.baseState=D,e.baseQueue=se,s.lastRenderedState=h}return u===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function ro(e){var t=Et(),n=t.queue;if(n===null)throw Error(a(311));n.lastRenderedReducer=e;var s=n.dispatch,u=n.pending,h=t.memoizedState;if(u!==null){n.pending=null;var D=u=u.next;do h=e(h,D.action),D=D.next;while(D!==u);Ht(h,t.memoizedState)||(wt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,s]}function Zu(e,t,n){var s=Ge,u=Et(),h=et;if(h){if(n===void 0)throw Error(a(407));n=n()}else n=t();var D=!Ht((at||u).memoizedState,n);if(D&&(u.memoizedState=n,wt=!0),u=u.queue,uo(nc.bind(null,s,u,e),[e]),u.getSnapshot!==t||D||vt!==null&&vt.memoizedState.tag&1){if(s.flags|=2048,Qi(9,tc.bind(null,s,u,n,t),{destroy:void 0},null),lt===null)throw Error(a(349));h||zn&60||ec(s,t,n)}return n}function ec(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ge.updateQueue,t===null?(t=Pa(),Ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tc(e,t,n,s){t.value=n,t.getSnapshot=s,ic(t)&&sc(e)}function nc(e,t,n){return n(function(){ic(t)&&sc(e)})}function ic(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function sc(e){var t=Bn(e,2);t!==null&&Ft(t,e,2)}function oo(e){var t=qt();if(typeof e=="function"){var n=e;if(e=n(),yi){Lt(!0);try{n()}finally{Lt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:e},t}function ac(e,t,n,s){return e.baseState=n,ao(e,at,typeof s=="function"?s:wn)}function Hf(e,t,n,s,u){if(ja(e))throw Error(a(485));if(e=t.action,e!==null){var h={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){h.listeners.push(D)}};C.T!==null?n(!0):h.isTransition=!1,s(h),n=t.pending,n===null?(h.next=t.pending=h,rc(t,h)):(h.next=n.next,t.pending=n.next=h)}}function rc(e,t){var n=t.action,s=t.payload,u=e.state;if(t.isTransition){var h=C.T,D={};C.T=D;try{var z=n(u,s),se=C.S;se!==null&&se(D,z),oc(e,t,z)}catch(de){lo(e,t,de)}finally{C.T=h}}else try{h=n(u,s),oc(e,t,h)}catch(de){lo(e,t,de)}}function oc(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){lc(e,t,s)},function(s){return lo(e,t,s)}):lc(e,t,n)}function lc(e,t,n){t.status="fulfilled",t.value=n,uc(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,rc(e,n)))}function lo(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,uc(t),t=t.next;while(t!==s)}e.action=null}function uc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cc(e,t){return t}function hc(e,t){if(et){var n=lt.formState;if(n!==null){e:{var s=Ge;if(et){if(kt){t:{for(var u=kt,h=gn;u.nodeType!==8;){if(!h){u=null;break t}if(u=cn(u.nextSibling),u===null){u=null;break t}}h=u.data,u=h==="F!"||h==="F"?u:null}if(u){kt=cn(u.nextSibling),s=u.data==="F!";break e}}gi(s)}s=!1}s&&(t=n[0])}}return n=qt(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:t},n.queue=s,n=Oc.bind(null,Ge,s),s.dispatch=n,s=oo(!1),h=go.bind(null,Ge,!1,s.queue),s=qt(),u={state:t,dispatch:null,action:e,pending:null},s.queue=u,n=Hf.bind(null,Ge,u,h,n),u.dispatch=n,s.memoizedState=e,[t,n,!1]}function dc(e){var t=Et();return fc(t,at,e)}function fc(e,t,n){t=ao(e,t,cc)[0],e=Na(wn)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?Ns(t):t;var s=Et(),u=s.queue,h=u.dispatch;return n!==s.memoizedState&&(Ge.flags|=2048,Qi(9,zf.bind(null,u,n),{destroy:void 0},null)),[t,h,e]}function zf(e,t){e.action=t}function pc(e){var t=Et(),n=at;if(n!==null)return fc(t,n,e);Et(),t=t.memoizedState,n=Et();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Qi(e,t,n,s){return e={tag:e,create:t,inst:n,deps:s,next:null},t=Ge.updateQueue,t===null&&(t=Pa(),Ge.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function gc(){return Et().memoizedState}function Fa(e,t,n,s){var u=qt();Ge.flags|=e,u.memoizedState=Qi(1|t,n,{destroy:void 0},s===void 0?null:s)}function Ua(e,t,n,s){var u=Et();s=s===void 0?null:s;var h=u.memoizedState.inst;at!==null&&s!==null&&Zr(s,at.memoizedState.deps)?u.memoizedState=Qi(t,n,h,s):(Ge.flags|=e,u.memoizedState=Qi(1|t,n,h,s))}function mc(e,t){Fa(8390656,8,e,t)}function uo(e,t){Ua(2048,8,e,t)}function _c(e,t){return Ua(4,2,e,t)}function yc(e,t){return Ua(4,4,e,t)}function bc(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vc(e,t,n){n=n!=null?n.concat([e]):null,Ua(4,4,bc.bind(null,t,e),n)}function co(){}function Ec(e,t){var n=Et();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&Zr(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ac(e,t){var n=Et();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&Zr(t,s[1]))return s[0];if(s=e(),yi){Lt(!0);try{e()}finally{Lt(!1)}}return n.memoizedState=[s,t],s}function ho(e,t,n){return n===void 0||zn&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Th(),Ge.lanes|=e,Zn|=e,n)}function Sc(e,t,n,s){return Ht(n,t)?n:Vi.current!==null?(e=ho(e,n,s),Ht(e,t)||(wt=!0),e):zn&42?(e=Th(),Ge.lanes|=e,Zn|=e,t):(wt=!0,e.memoizedState=n)}function Tc(e,t,n,s,u){var h=w.p;w.p=h!==0&&8>h?h:8;var D=C.T,z={};C.T=z,go(e,!1,t,n);try{var se=u(),de=C.S;if(de!==null&&de(z,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Ce=If(se,s);Fs(e,t,Ce,Vt(e))}else Fs(e,t,s,Vt(e))}catch(xe){Fs(e,t,{then:function(){},status:"rejected",reason:xe},Vt())}finally{w.p=h,C.T=D}}function Gf(){}function fo(e,t,n,s){if(e.tag!==5)throw Error(a(476));var u=Cc(e).queue;Tc(e,u,t,q,n===null?Gf:function(){return wc(e),n(s)})}function Cc(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:q},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function wc(e){var t=Cc(e).next.queue;Fs(e,t,{},Vt())}function po(){return Pt(na)}function Rc(){return Et().memoizedState}function xc(){return Et().memoizedState}function $f(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Vt();e=Yn(n);var s=Xn(t,e,n);s!==null&&(Ft(s,t,n),Is(s,t,n)),t={cache:Wr()},e.payload=t;return}t=t.return}}function Vf(e,t,n){var s=Vt();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ja(e)?kc(t,n):(n=zr(e,t,n,s),n!==null&&(Ft(n,e,s),Mc(n,t,s)))}function Oc(e,t,n){var s=Vt();Fs(e,t,n,s)}function Fs(e,t,n,s){var u={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ja(e))kc(t,u);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var D=t.lastRenderedState,z=h(D,n);if(u.hasEagerState=!0,u.eagerState=z,Ht(z,D))return Ea(e,t,u,0),lt===null&&va(),!1}catch{}finally{}if(n=zr(e,t,u,s),n!==null)return Ft(n,e,s),Mc(n,t,s),!0}return!1}function go(e,t,n,s){if(s={lane:2,revertLane:sl(),action:s,hasEagerState:!1,eagerState:null,next:null},ja(e)){if(t)throw Error(a(479))}else t=zr(e,n,s,2),t!==null&&Ft(t,e,2)}function ja(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function kc(e,t){Ki=Ma=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mc(e,t,n){if(n&4194176){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ri(e,n)}}var _n={readContext:Pt,use:La,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt};_n.useCacheRefresh=mt,_n.useMemoCache=mt,_n.useHostTransitionStatus=mt,_n.useFormState=mt,_n.useActionState=mt,_n.useOptimistic=mt;var bi={readContext:Pt,use:La,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:mc,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Fa(4194308,4,bc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){Fa(4,2,e,t)},useMemo:function(e,t){var n=qt();t=t===void 0?null:t;var s=e();if(yi){Lt(!0);try{e()}finally{Lt(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=qt();if(n!==void 0){var u=n(t);if(yi){Lt(!0);try{n(t)}finally{Lt(!1)}}}else u=t;return s.memoizedState=s.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},s.queue=e,e=e.dispatch=Vf.bind(null,Ge,e),[s.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:function(e){e=oo(e);var t=e.queue,n=Oc.bind(null,Ge,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:co,useDeferredValue:function(e,t){var n=qt();return ho(n,e,t)},useTransition:function(){var e=oo(!1);return e=Tc.bind(null,Ge,e.queue,!0,!1),qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=Ge,u=qt();if(et){if(n===void 0)throw Error(a(407));n=n()}else{if(n=t(),lt===null)throw Error(a(349));Qe&60||ec(s,t,n)}u.memoizedState=n;var h={value:n,getSnapshot:t};return u.queue=h,mc(nc.bind(null,s,h,e),[e]),s.flags|=2048,Qi(9,tc.bind(null,s,h,n,t),{destroy:void 0},null),n},useId:function(){var e=qt(),t=lt.identifierPrefix;if(et){var n=Tn,s=Sn;n=(s&~(1<<32-yt(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Da++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Bf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return qt().memoizedState=$f.bind(null,Ge)}};bi.useMemoCache=so,bi.useHostTransitionStatus=po,bi.useFormState=hc,bi.useActionState=hc,bi.useOptimistic=function(e){var t=qt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=go.bind(null,Ge,!0,n),n.dispatch=t,[e,t]};var Gn={readContext:Pt,use:La,useCallback:Ec,useContext:Pt,useEffect:uo,useImperativeHandle:vc,useInsertionEffect:_c,useLayoutEffect:yc,useMemo:Ac,useReducer:Na,useRef:gc,useState:function(){return Na(wn)},useDebugValue:co,useDeferredValue:function(e,t){var n=Et();return Sc(n,at.memoizedState,e,t)},useTransition:function(){var e=Na(wn)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Ns(e),t]},useSyncExternalStore:Zu,useId:Rc};Gn.useCacheRefresh=xc,Gn.useMemoCache=so,Gn.useHostTransitionStatus=po,Gn.useFormState=dc,Gn.useActionState=dc,Gn.useOptimistic=function(e,t){var n=Et();return ac(n,at,e,t)};var vi={readContext:Pt,use:La,useCallback:Ec,useContext:Pt,useEffect:uo,useImperativeHandle:vc,useInsertionEffect:_c,useLayoutEffect:yc,useMemo:Ac,useReducer:ro,useRef:gc,useState:function(){return ro(wn)},useDebugValue:co,useDeferredValue:function(e,t){var n=Et();return at===null?ho(n,e,t):Sc(n,at.memoizedState,e,t)},useTransition:function(){var e=ro(wn)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Ns(e),t]},useSyncExternalStore:Zu,useId:Rc};vi.useCacheRefresh=xc,vi.useMemoCache=so,vi.useHostTransitionStatus=po,vi.useFormState=pc,vi.useActionState=pc,vi.useOptimistic=function(e,t){var n=Et();return at!==null?ac(n,at,e,t):(n.baseState=e,[e,n.queue.dispatch])};function mo(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:B({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _o={isMounted:function(e){return(e=e._reactInternals)?ne(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Vt(),u=Yn(s);u.payload=t,n!=null&&(u.callback=n),t=Xn(e,u,s),t!==null&&(Ft(t,e,s),Is(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Vt(),u=Yn(s);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=Xn(e,u,s),t!==null&&(Ft(t,e,s),Is(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Vt(),s=Yn(n);s.tag=2,t!=null&&(s.callback=t),t=Xn(e,s,n),t!==null&&(Ft(t,e,n),Is(t,e,n))}};function Dc(e,t,n,s,u,h,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,D):t.prototype&&t.prototype.isPureReactComponent?!Ss(n,s)||!Ss(u,h):!0}function Pc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&_o.enqueueReplaceState(t,t.state,null)}function Ei(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=B({},n));for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n}var Ia=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Lc(e){Ia(e)}function Nc(e){console.error(e)}function Fc(e){Ia(e)}function Ba(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Uc(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function yo(e,t,n){return n=Yn(n),n.tag=3,n.payload={element:null},n.callback=function(){Ba(e,t)},n}function jc(e){return e=Yn(e),e.tag=3,e}function Ic(e,t,n,s){var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var h=s.value;e.payload=function(){return u(h)},e.callback=function(){Uc(t,n,s)}}var D=n.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(e.callback=function(){Uc(t,n,s),typeof u!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var z=s.stack;this.componentDidCatch(s.value,{componentStack:z!==null?z:""})})}function Yf(e,t,n,s,u){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&js(t,n,u,!0),n=en.current,n!==null){switch(n.tag){case 13:return mn===null?Zo():n.alternate===null&&ft===0&&(ft=3),n.flags&=-257,n.flags|=65536,n.lanes=u,s===Yr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),tl(e,s,u)),!1;case 22:return n.flags|=65536,s===Yr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),tl(e,s,u)),!1}throw Error(a(435,n.tag))}return tl(e,s,u),Zo(),!1}if(et)return t=en.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=u,s!==Vr&&(e=Error(a(422),{cause:s}),Rs(Qt(e,n)))):(s!==Vr&&(t=Error(a(423),{cause:s}),Rs(Qt(t,n))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,s=Qt(s,n),u=yo(e.stateNode,s,u),Po(e,u),ft!==4&&(ft=2)),!1;var h=Error(a(520),{cause:s});if(h=Qt(h,n),Ys===null?Ys=[h]:Ys.push(h),ft!==4&&(ft=2),t===null)return!0;s=Qt(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=u&-u,n.lanes|=e,e=yo(n.stateNode,s,e),Po(n,e),!1;case 1:if(t=n.type,h=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(ei===null||!ei.has(h))))return n.flags|=65536,u&=-u,n.lanes|=u,u=jc(u),Ic(u,e,n,s),Po(n,u),!1}n=n.return}while(n!==null);return!1}var Bc=Error(a(461)),wt=!1;function Mt(e,t,n,s){t.child=e===null?$u(t,null,n,s):mi(t,e.child,n,s)}function qc(e,t,n,s,u){n=n.render;var h=t.ref;if("ref"in s){var D={};for(var z in s)z!=="ref"&&(D[z]=s[z])}else D=s;return Si(t),s=eo(e,t,n,D,h,u),z=to(),e!==null&&!wt?(no(e,t,u),Rn(e,t,u)):(et&&z&&Gr(t),t.flags|=1,Mt(e,t,s,u),t.child)}function Hc(e,t,n,s,u){if(e===null){var h=n.type;return typeof h=="function"&&!qo(h)&&h.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=h,zc(e,t,h,s,u)):(e=$a(n.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Ro(e,u)){var D=h.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(D,s)&&e.ref===t.ref)return Rn(e,t,u)}return t.flags|=1,e=Jn(h,s),e.ref=t.ref,e.return=t,t.child=e}function zc(e,t,n,s,u){if(e!==null){var h=e.memoizedProps;if(Ss(h,s)&&e.ref===t.ref)if(wt=!1,t.pendingProps=s=h,Ro(e,u))e.flags&131072&&(wt=!0);else return t.lanes=e.lanes,Rn(e,t,u)}return bo(e,t,n,s,u)}function Gc(e,t,n){var s=t.pendingProps,u=s.children,h=(t.stateNode._pendingVisibility&2)!==0,D=e!==null?e.memoizedState:null;if(Us(e,t),s.mode==="hidden"||h){if(t.flags&128){if(s=D!==null?D.baseLanes|n:n,e!==null){for(u=t.child=e.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;t.childLanes=h&~s}else t.childLanes=0,t.child=null;return $c(e,t,s,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ka(t,D!==null?D.cachePool:null),D!==null?Vu(t,D):Xr(),Yu(t);else return t.lanes=t.childLanes=536870912,$c(e,t,D!==null?D.baseLanes|n:n,n)}else D!==null?(ka(t,D.cachePool),Vu(t,D),Hn(),t.memoizedState=null):(e!==null&&ka(t,null),Xr(),Hn());return Mt(e,t,u,n),t.child}function $c(e,t,n,s){var u=Jr();return u=u===null?null:{parent:Tt._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&ka(t,null),Xr(),Yu(t),e!==null&&js(e,t,s,!0),null}function Us(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(a(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function bo(e,t,n,s,u){return Si(t),n=eo(e,t,n,s,void 0,u),s=to(),e!==null&&!wt?(no(e,t,u),Rn(e,t,u)):(et&&s&&Gr(t),t.flags|=1,Mt(e,t,n,u),t.child)}function Vc(e,t,n,s,u,h){return Si(t),t.updateQueue=null,n=Ju(t,s,n,u),Qu(e),s=to(),e!==null&&!wt?(no(e,t,h),Rn(e,t,h)):(et&&s&&Gr(t),t.flags|=1,Mt(e,t,n,h),t.child)}function Yc(e,t,n,s,u){if(Si(t),t.stateNode===null){var h=Hi,D=n.contextType;typeof D=="object"&&D!==null&&(h=Pt(D)),h=new n(s,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=_o,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=s,h.state=t.memoizedState,h.refs={},Mo(t),D=n.contextType,h.context=typeof D=="object"&&D!==null?Pt(D):Hi,h.state=t.memoizedState,D=n.getDerivedStateFromProps,typeof D=="function"&&(mo(t,n,D,s),h.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(D=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),D!==h.state&&_o.enqueueReplaceState(h,h.state,null),qs(t,s,h,u),Bs(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){h=t.stateNode;var z=t.memoizedProps,se=Ei(n,z);h.props=se;var de=h.context,Ce=n.contextType;D=Hi,typeof Ce=="object"&&Ce!==null&&(D=Pt(Ce));var xe=n.getDerivedStateFromProps;Ce=typeof xe=="function"||typeof h.getSnapshotBeforeUpdate=="function",z=t.pendingProps!==z,Ce||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(z||de!==D)&&Pc(t,h,s,D),Vn=!1;var Ee=t.memoizedState;h.state=Ee,qs(t,s,h,u),Bs(),de=t.memoizedState,z||Ee!==de||Vn?(typeof xe=="function"&&(mo(t,n,xe,s),de=t.memoizedState),(se=Vn||Dc(t,n,se,s,Ee,de,D))?(Ce||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=de),h.props=s,h.state=de,h.context=D,s=se):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{h=t.stateNode,Do(e,t),D=t.memoizedProps,Ce=Ei(n,D),h.props=Ce,xe=t.pendingProps,Ee=h.context,de=n.contextType,se=Hi,typeof de=="object"&&de!==null&&(se=Pt(de)),z=n.getDerivedStateFromProps,(de=typeof z=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(D!==xe||Ee!==se)&&Pc(t,h,s,se),Vn=!1,Ee=t.memoizedState,h.state=Ee,qs(t,s,h,u),Bs();var Te=t.memoizedState;D!==xe||Ee!==Te||Vn||e!==null&&e.dependencies!==null&&qa(e.dependencies)?(typeof z=="function"&&(mo(t,n,z,s),Te=t.memoizedState),(Ce=Vn||Dc(t,n,Ce,s,Ee,Te,se)||e!==null&&e.dependencies!==null&&qa(e.dependencies))?(de||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,Te,se),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,Te,se)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||D===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=Te),h.props=s,h.state=Te,h.context=se,s=Ce):(typeof h.componentDidUpdate!="function"||D===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&Ee===e.memoizedState||(t.flags|=1024),s=!1)}return h=s,Us(e,t),s=(t.flags&128)!==0,h||s?(h=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&s?(t.child=mi(t,e.child,null,u),t.child=mi(t,null,n,u)):Mt(e,t,n,u),t.memoizedState=h.state,e=t.child):e=Rn(e,t,u),e}function Xc(e,t,n,s){return ws(),t.flags|=256,Mt(e,t,n,s),t.child}var vo={dehydrated:null,treeContext:null,retryLane:0};function Eo(e){return{baseLanes:e,cachePool:Wu()}}function Ao(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=an),e}function Kc(e,t,n){var s=t.pendingProps,u=!1,h=(t.flags&128)!==0,D;if((D=h)||(D=e!==null&&e.memoizedState===null?!1:(St.current&2)!==0),D&&(u=!0,t.flags&=-129),D=(t.flags&32)!==0,t.flags&=-33,e===null){if(et){if(u?qn(t):Hn(),et){var z=kt,se;if(se=z){e:{for(se=z,z=gn;se.nodeType!==8;){if(!z){z=null;break e}if(se=cn(se.nextSibling),se===null){z=null;break e}}z=se}z!==null?(t.memoizedState={dehydrated:z,treeContext:fi!==null?{id:Sn,overflow:Tn}:null,retryLane:536870912},se=sn(18,null,null,0),se.stateNode=z,se.return=t,t.child=se,Nt=t,kt=null,se=!0):se=!1}se||gi(t)}if(z=t.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return z.data==="$!"?t.lanes=16:t.lanes=536870912,null;Cn(t)}return z=s.children,s=s.fallback,u?(Hn(),u=t.mode,z=To({mode:"hidden",children:z},u),s=Ci(s,u,n,null),z.return=t,s.return=t,z.sibling=s,t.child=z,u=t.child,u.memoizedState=Eo(n),u.childLanes=Ao(e,D,n),t.memoizedState=vo,s):(qn(t),So(t,z))}if(se=e.memoizedState,se!==null&&(z=se.dehydrated,z!==null)){if(h)t.flags&256?(qn(t),t.flags&=-257,t=Co(e,t,n)):t.memoizedState!==null?(Hn(),t.child=e.child,t.flags|=128,t=null):(Hn(),u=s.fallback,z=t.mode,s=To({mode:"visible",children:s.children},z),u=Ci(u,z,n,null),u.flags|=2,s.return=t,u.return=t,s.sibling=u,t.child=s,mi(t,e.child,null,n),s=t.child,s.memoizedState=Eo(n),s.childLanes=Ao(e,D,n),t.memoizedState=vo,t=u);else if(qn(t),z.data==="$!"){if(D=z.nextSibling&&z.nextSibling.dataset,D)var de=D.dgst;D=de,s=Error(a(419)),s.stack="",s.digest=D,Rs({value:s,source:null,stack:null}),t=Co(e,t,n)}else if(wt||js(e,t,n,!1),D=(n&e.childLanes)!==0,wt||D){if(D=lt,D!==null){if(s=n&-n,s&42)s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(s=s&(D.suspendedLanes|n)?0:s,s!==0&&s!==se.retryLane)throw se.retryLane=s,Bn(e,s),Ft(D,e,s),Bc}z.data==="$?"||Zo(),t=Co(e,t,n)}else z.data==="$?"?(t.flags|=128,t.child=e.child,t=lp.bind(null,e),z._reactRetry=t,t=null):(e=se.treeContext,kt=cn(z.nextSibling),Nt=t,et=!0,ln=null,gn=!1,e!==null&&(Jt[Zt++]=Sn,Jt[Zt++]=Tn,Jt[Zt++]=fi,Sn=e.id,Tn=e.overflow,fi=t),t=So(t,s.children),t.flags|=4096);return t}return u?(Hn(),u=s.fallback,z=t.mode,se=e.child,de=se.sibling,s=Jn(se,{mode:"hidden",children:s.children}),s.subtreeFlags=se.subtreeFlags&31457280,de!==null?u=Jn(de,u):(u=Ci(u,z,n,null),u.flags|=2),u.return=t,s.return=t,s.sibling=u,t.child=s,s=u,u=t.child,z=e.child.memoizedState,z===null?z=Eo(n):(se=z.cachePool,se!==null?(de=Tt._currentValue,se=se.parent!==de?{parent:de,pool:de}:se):se=Wu(),z={baseLanes:z.baseLanes|n,cachePool:se}),u.memoizedState=z,u.childLanes=Ao(e,D,n),t.memoizedState=vo,s):(qn(t),n=e.child,e=n.sibling,n=Jn(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(D=t.deletions,D===null?(t.deletions=[e],t.flags|=16):D.push(e)),t.child=n,t.memoizedState=null,n)}function So(e,t){return t=To({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function To(e,t){return Eh(e,t,0,null)}function Co(e,t,n){return mi(t,e.child,null,n),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Oo(e.return,t,n)}function wo(e,t,n,s,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=u)}function Qc(e,t,n){var s=t.pendingProps,u=s.revealOrder,h=s.tail;if(Mt(e,t,s.children,n),s=St.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wc(e,n,t);else if(e.tag===19)Wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(L(St,s),u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&Oa(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),wo(t,!1,u,n,h);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Oa(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}wo(t,!0,n,null,h);break;case"together":wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zn|=t.lanes,!(n&t.childLanes))if(e!==null){if(js(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,n=Jn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ro(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&qa(e)))}function Xf(e,t,n){switch(t.tag){case 3:$(t,t.stateNode.containerInfo),$n(t,Tt,e.memoizedState.cache),ws();break;case 27:case 5:Z(t);break;case 4:$(t,t.stateNode.containerInfo);break;case 10:$n(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(qn(t),t.flags|=128,null):n&t.child.childLanes?Kc(e,t,n):(qn(t),e=Rn(e,t,n),e!==null?e.sibling:null);qn(t);break;case 19:var u=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(js(e,t,n,!1),s=(n&t.childLanes)!==0),u){if(s)return Qc(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),L(St,St.current),s)break;return null;case 22:case 23:return t.lanes=0,Gc(e,t,n);case 24:$n(t,Tt,e.memoizedState.cache)}return Rn(e,t,n)}function Jc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)wt=!0;else{if(!Ro(e,n)&&!(t.flags&128))return wt=!1,Xf(e,t,n);wt=!!(e.flags&131072)}else wt=!1,et&&t.flags&1048576&&Fu(t,Ta,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,u=s._init;if(s=u(s._payload),t.type=s,typeof s=="function")qo(s)?(e=Ei(s,e),t.tag=1,t=Yc(null,t,s,e,n)):(t.tag=0,t=bo(null,t,s,e,n));else{if(s!=null){if(u=s.$$typeof,u===E){t.tag=11,t=qc(null,t,s,e,n);break e}else if(u===T){t.tag=14,t=Hc(null,t,s,e,n);break e}}throw t=R(s)||s,Error(a(306,t,""))}}return t;case 0:return bo(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,u=Ei(s,t.pendingProps),Yc(e,t,s,u,n);case 3:e:{if($(t,t.stateNode.containerInfo),e===null)throw Error(a(387));var h=t.pendingProps;u=t.memoizedState,s=u.element,Do(e,t),qs(t,h,null,n);var D=t.memoizedState;if(h=D.cache,$n(t,Tt,h),h!==u.cache&&ko(t,[Tt],n,!0),Bs(),h=D.element,u.isDehydrated)if(u={element:h,isDehydrated:!1,cache:D.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Xc(e,t,h,n);break e}else if(h!==s){s=Qt(Error(a(424)),t),Rs(s),t=Xc(e,t,h,n);break e}else for(kt=cn(t.stateNode.containerInfo.firstChild),Nt=t,et=!0,ln=null,gn=!0,n=$u(t,null,h,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ws(),h===s){t=Rn(e,t,n);break e}Mt(e,t,h,n)}t=t.child}return t;case 26:return Us(e,t),e===null?(n=td(t.type,null,t.pendingProps,null))?t.memoizedState=n:et||(n=t.type,e=t.pendingProps,s=ir(H.current).createElement(n),s[it]=t,s[bt]=e,Dt(s,n,e),Ct(s),t.stateNode=s):t.memoizedState=td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Z(t),e===null&&et&&(s=t.stateNode=Jh(t.type,t.pendingProps,H.current),Nt=t,gn=!0,kt=cn(s.firstChild)),s=t.pendingProps.children,e!==null||et?Mt(e,t,s,n):t.child=mi(t,null,s,n),Us(e,t),t.child;case 5:return e===null&&et&&((u=s=kt)&&(s=Tp(s,t.type,t.pendingProps,gn),s!==null?(t.stateNode=s,Nt=t,kt=cn(s.firstChild),gn=!1,u=!0):u=!1),u||gi(t)),Z(t),u=t.type,h=t.pendingProps,D=e!==null?e.memoizedProps:null,s=h.children,fl(u,h)?s=null:D!==null&&fl(u,D)&&(t.flags|=32),t.memoizedState!==null&&(u=eo(e,t,qf,null,null,n),na._currentValue=u),Us(e,t),Mt(e,t,s,n),t.child;case 6:return e===null&&et&&((e=n=kt)&&(n=Cp(n,t.pendingProps,gn),n!==null?(t.stateNode=n,Nt=t,kt=null,e=!0):e=!1),e||gi(t)),null;case 13:return Kc(e,t,n);case 4:return $(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=mi(t,null,s,n):Mt(e,t,s,n),t.child;case 11:return qc(e,t,t.type,t.pendingProps,n);case 7:return Mt(e,t,t.pendingProps,n),t.child;case 8:return Mt(e,t,t.pendingProps.children,n),t.child;case 12:return Mt(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,$n(t,t.type,s.value),Mt(e,t,s.children,n),t.child;case 9:return u=t.type._context,s=t.pendingProps.children,Si(t),u=Pt(u),s=s(u),t.flags|=1,Mt(e,t,s,n),t.child;case 14:return Hc(e,t,t.type,t.pendingProps,n);case 15:return zc(e,t,t.type,t.pendingProps,n);case 19:return Qc(e,t,n);case 22:return Gc(e,t,n);case 24:return Si(t),s=Pt(Tt),e===null?(u=Jr(),u===null&&(u=lt,h=Wr(),u.pooledCache=h,h.refCount++,h!==null&&(u.pooledCacheLanes|=n),u=h),t.memoizedState={parent:s,cache:u},Mo(t),$n(t,Tt,u)):(e.lanes&n&&(Do(e,t),qs(t,null,null,n),Bs()),u=e.memoizedState,h=t.memoizedState,u.parent!==s?(u={parent:s,cache:s},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),$n(t,Tt,s)):(s=h.cache,$n(t,Tt,s),s!==u.cache&&ko(t,[Tt],n,!0))),Mt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}var xo=X(null),Ai=null,xn=null;function $n(e,t,n){L(xo,t._currentValue),t._currentValue=n}function On(e){e._currentValue=xo.current,b(xo)}function Oo(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ko(e,t,n,s){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var h=u.dependencies;if(h!==null){var D=u.child;h=h.firstContext;e:for(;h!==null;){var z=h;h=u;for(var se=0;se<t.length;se++)if(z.context===t[se]){h.lanes|=n,z=h.alternate,z!==null&&(z.lanes|=n),Oo(h.return,n,e),s||(D=null);break e}h=z.next}}else if(u.tag===18){if(D=u.return,D===null)throw Error(a(341));D.lanes|=n,h=D.alternate,h!==null&&(h.lanes|=n),Oo(D,n,e),D=null}else D=u.child;if(D!==null)D.return=u;else for(D=u;D!==null;){if(D===e){D=null;break}if(u=D.sibling,u!==null){u.return=D.return,D=u;break}D=D.return}u=D}}function js(e,t,n,s){e=null;for(var u=t,h=!1;u!==null;){if(!h){if(u.flags&524288)h=!0;else if(u.flags&262144)break}if(u.tag===10){var D=u.alternate;if(D===null)throw Error(a(387));if(D=D.memoizedProps,D!==null){var z=u.type;Ht(u.pendingProps.value,D.value)||(e!==null?e.push(z):e=[z])}}else if(u===J.current){if(D=u.alternate,D===null)throw Error(a(387));D.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(na):e=[na])}u=u.return}e!==null&&ko(t,e,n,s),t.flags|=262144}function qa(e){for(e=e.firstContext;e!==null;){if(!Ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Si(e){Ai=e,xn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Pt(e){return Zc(Ai,e)}function Ha(e,t){return Ai===null&&Si(e),Zc(e,t)}function Zc(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},xn===null){if(e===null)throw Error(a(308));xn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xn=xn.next=t;return n}var Vn=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Yn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ht&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,t=Aa(e),Lu(e,null,n),t}return Ea(e,s,t,n),Aa(e)}function Is(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,ri(e,n)}}function Po(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var u=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var D={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};h===null?u=h=D:h=h.next=D,n=n.next}while(n!==null);h===null?u=h=t:h=h.next=t}else u=h=t;n={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:h,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Lo=!1;function Bs(){if(Lo){var e=Xi;if(e!==null)throw e}}function qs(e,t,n,s){Lo=!1;var u=e.updateQueue;Vn=!1;var h=u.firstBaseUpdate,D=u.lastBaseUpdate,z=u.shared.pending;if(z!==null){u.shared.pending=null;var se=z,de=se.next;se.next=null,D===null?h=de:D.next=de,D=se;var Ce=e.alternate;Ce!==null&&(Ce=Ce.updateQueue,z=Ce.lastBaseUpdate,z!==D&&(z===null?Ce.firstBaseUpdate=de:z.next=de,Ce.lastBaseUpdate=se))}if(h!==null){var xe=u.baseState;D=0,Ce=de=se=null,z=h;do{var Ee=z.lane&-536870913,Te=Ee!==z.lane;if(Te?(Qe&Ee)===Ee:(s&Ee)===Ee){Ee!==0&&Ee===Yi&&(Lo=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Fe=e,He=z;Ee=t;var pt=n;switch(He.tag){case 1:if(Fe=He.payload,typeof Fe=="function"){xe=Fe.call(pt,xe,Ee);break e}xe=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=He.payload,Ee=typeof Fe=="function"?Fe.call(pt,xe,Ee):Fe,Ee==null)break e;xe=B({},xe,Ee);break e;case 2:Vn=!0}}Ee=z.callback,Ee!==null&&(e.flags|=64,Te&&(e.flags|=8192),Te=u.callbacks,Te===null?u.callbacks=[Ee]:Te.push(Ee))}else Te={lane:Ee,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Ce===null?(de=Ce=Te,se=xe):Ce=Ce.next=Te,D|=Ee;if(z=z.next,z===null){if(z=u.shared.pending,z===null)break;Te=z,z=Te.next,Te.next=null,u.lastBaseUpdate=Te,u.shared.pending=null}}while(!0);Ce===null&&(se=xe),u.baseState=se,u.firstBaseUpdate=de,u.lastBaseUpdate=Ce,h===null&&(u.shared.lanes=0),Zn|=D,e.lanes=D,e.memoizedState=xe}}function eh(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function th(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)eh(n[e],t)}function Hs(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var u=s.next;n=u;do{if((n.tag&e)===e){s=void 0;var h=n.create,D=n.inst;s=h(),D.destroy=s}n=n.next}while(n!==u)}}catch(z){ot(t,t.return,z)}}function Kn(e,t,n){try{var s=t.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var h=u.next;s=h;do{if((s.tag&e)===e){var D=s.inst,z=D.destroy;if(z!==void 0){D.destroy=void 0,u=t;var se=n;try{z()}catch(de){ot(u,se,de)}}}s=s.next}while(s!==h)}}catch(de){ot(t,t.return,de)}}function nh(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{th(t,n)}catch(s){ot(e,e.return,s)}}}function ih(e,t,n){n.props=Ei(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){ot(e,t,s)}}function Ti(e,t){try{var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 26:case 27:case 5:var u=s;break;default:u=s}typeof n=="function"?e.refCleanup=n(u):n.current=u}}catch(h){ot(e,t,h)}}function zt(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(u){ot(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(u){ot(e,t,u)}else n.current=null}function sh(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(u){ot(e,e.return,u)}}function ah(e,t,n){try{var s=e.stateNode;bp(s,e.type,n,t),s[bt]=t}catch(u){ot(e,e.return,u)}}function rh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function No(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fo(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=nr));else if(s!==4&&s!==27&&(e=e.child,e!==null))for(Fo(e,t,n),e=e.sibling;e!==null;)Fo(e,t,n),e=e.sibling}function za(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&s!==27&&(e=e.child,e!==null))for(za(e,t,n),e=e.sibling;e!==null;)za(e,t,n),e=e.sibling}var kn=!1,dt=!1,Uo=!1,oh=typeof WeakSet=="function"?WeakSet:Set,Rt=null,lh=!1;function Kf(e,t){if(e=e.containerInfo,hl=ur,e=Cu(e),jr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var u=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var D=0,z=-1,se=-1,de=0,Ce=0,xe=e,Ee=null;t:for(;;){for(var Te;xe!==n||u!==0&&xe.nodeType!==3||(z=D+u),xe!==h||s!==0&&xe.nodeType!==3||(se=D+s),xe.nodeType===3&&(D+=xe.nodeValue.length),(Te=xe.firstChild)!==null;)Ee=xe,xe=Te;for(;;){if(xe===e)break t;if(Ee===n&&++de===u&&(z=D),Ee===h&&++Ce===s&&(se=D),(Te=xe.nextSibling)!==null)break;xe=Ee,Ee=xe.parentNode}xe=Te}n=z===-1||se===-1?null:{start:z,end:se}}else n=null}n=n||{start:0,end:0}}else n=null;for(dl={focusedElem:e,selectionRange:n},ur=!1,Rt=t;Rt!==null;)if(t=Rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Rt=e;else for(;Rt!==null;){switch(t=Rt,h=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&h!==null){e=void 0,n=t,u=h.memoizedProps,h=h.memoizedState,s=n.stateNode;try{var Fe=Ei(n.type,u,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(Fe,h),s.__reactInternalSnapshotBeforeUpdate=e}catch(He){ot(n,n.return,He)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ml(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ml(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,Rt=e;break}Rt=t.return}return Fe=lh,lh=!1,Fe}function uh(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Dn(e,n),s&4&&Hs(5,n);break;case 1:if(Dn(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(z){ot(n,n.return,z)}else{var u=Ei(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(z){ot(n,n.return,z)}}s&64&&nh(n),s&512&&Ti(n,n.return);break;case 3:if(Dn(e,n),s&64&&(s=n.updateQueue,s!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{th(s,e)}catch(z){ot(n,n.return,z)}}break;case 26:Dn(e,n),s&512&&Ti(n,n.return);break;case 27:case 5:Dn(e,n),t===null&&s&4&&sh(n),s&512&&Ti(n,n.return);break;case 12:Dn(e,n);break;case 13:Dn(e,n),s&4&&dh(e,n);break;case 22:if(u=n.memoizedState!==null||kn,!u){t=t!==null&&t.memoizedState!==null||dt;var h=kn,D=dt;kn=u,(dt=t)&&!D?Wn(e,n,(n.subtreeFlags&8772)!==0):Dn(e,n),kn=h,dt=D}s&512&&(n.memoizedProps.mode==="manual"?Ti(n,n.return):zt(n,n.return));break;default:Dn(e,n)}}function ch(e){var t=e.alternate;t!==null&&(e.alternate=null,ch(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ar(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var At=null,Gt=!1;function Mn(e,t,n){for(n=n.child;n!==null;)hh(e,t,n),n=n.sibling}function hh(e,t,n){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Ve,n)}catch{}switch(n.tag){case 26:dt||zt(n,t),Mn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:dt||zt(n,t);var s=At,u=Gt;for(At=n.stateNode,Mn(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Ar(n),At=s,Gt=u;break;case 5:dt||zt(n,t);case 6:u=At;var h=Gt;if(At=null,Mn(e,t,n),At=u,Gt=h,At!==null)if(Gt)try{e=At,s=n.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)}catch(D){ot(n,t,D)}else try{At.removeChild(n.stateNode)}catch(D){ot(n,t,D)}break;case 18:At!==null&&(Gt?(t=At,n=n.stateNode,t.nodeType===8?gl(t.parentNode,n):t.nodeType===1&&gl(t,n),ra(t)):gl(At,n.stateNode));break;case 4:s=At,u=Gt,At=n.stateNode.containerInfo,Gt=!0,Mn(e,t,n),At=s,Gt=u;break;case 0:case 11:case 14:case 15:dt||Kn(2,n,t),dt||Kn(4,n,t),Mn(e,t,n);break;case 1:dt||(zt(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&ih(n,t,s)),Mn(e,t,n);break;case 21:Mn(e,t,n);break;case 22:dt||zt(n,t),dt=(s=dt)||n.memoizedState!==null,Mn(e,t,n),dt=s;break;default:Mn(e,t,n)}}function dh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ra(e)}catch(n){ot(t,t.return,n)}}function Wf(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new oh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new oh),t;default:throw Error(a(435,e.tag))}}function jo(e,t){var n=Wf(e);t.forEach(function(s){var u=up.bind(null,e,s);n.has(s)||(n.add(s),s.then(u,u))})}function tn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var u=n[s],h=e,D=t,z=D;e:for(;z!==null;){switch(z.tag){case 27:case 5:At=z.stateNode,Gt=!1;break e;case 3:At=z.stateNode.containerInfo,Gt=!0;break e;case 4:At=z.stateNode.containerInfo,Gt=!0;break e}z=z.return}if(At===null)throw Error(a(160));hh(h,D,u),At=null,Gt=!1,h=u.alternate,h!==null&&(h.return=null),u.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)fh(t,e),t=t.sibling}var un=null;function fh(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),s&4&&(Kn(3,e,e.return),Hs(3,e),Kn(5,e,e.return));break;case 1:tn(t,e),nn(e),s&512&&(dt||n===null||zt(n,n.return)),s&64&&kn&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var u=un;if(tn(t,e),nn(e),s&512&&(dt||n===null||zt(n,n.return)),s&4){var h=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,u=u.ownerDocument||u;t:switch(s){case"title":h=u.getElementsByTagName("title")[0],(!h||h[ps]||h[it]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=u.createElement(s),u.head.insertBefore(h,u.querySelector("head > title"))),Dt(h,s,n),h[it]=e,Ct(h),s=h;break e;case"link":var D=sd("link","href",u).get(s+(n.href||""));if(D){for(var z=0;z<D.length;z++)if(h=D[z],h.getAttribute("href")===(n.href==null?null:n.href)&&h.getAttribute("rel")===(n.rel==null?null:n.rel)&&h.getAttribute("title")===(n.title==null?null:n.title)&&h.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){D.splice(z,1);break t}}h=u.createElement(s),Dt(h,s,n),u.head.appendChild(h);break;case"meta":if(D=sd("meta","content",u).get(s+(n.content||""))){for(z=0;z<D.length;z++)if(h=D[z],h.getAttribute("content")===(n.content==null?null:""+n.content)&&h.getAttribute("name")===(n.name==null?null:n.name)&&h.getAttribute("property")===(n.property==null?null:n.property)&&h.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&h.getAttribute("charset")===(n.charSet==null?null:n.charSet)){D.splice(z,1);break t}}h=u.createElement(s),Dt(h,s,n),u.head.appendChild(h);break;default:throw Error(a(468,s))}h[it]=e,Ct(h),s=h}e.stateNode=s}else ad(u,e.type,e.stateNode);else e.stateNode=id(u,s,e.memoizedProps);else h!==s?(h===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):h.count--,s===null?ad(u,e.type,e.stateNode):id(u,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ah(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(s&4&&e.alternate===null){u=e.stateNode,h=e.memoizedProps;try{for(var se=u.firstChild;se;){var de=se.nextSibling,Ce=se.nodeName;se[ps]||Ce==="HEAD"||Ce==="BODY"||Ce==="SCRIPT"||Ce==="STYLE"||Ce==="LINK"&&se.rel.toLowerCase()==="stylesheet"||u.removeChild(se),se=de}for(var xe=e.type,Ee=u.attributes;Ee.length;)u.removeAttributeNode(Ee[0]);Dt(u,xe,h),u[it]=e,u[bt]=h}catch(Fe){ot(e,e.return,Fe)}}case 5:if(tn(t,e),nn(e),s&512&&(dt||n===null||zt(n,n.return)),e.flags&32){u=e.stateNode;try{Ni(u,"")}catch(Fe){ot(e,e.return,Fe)}}s&4&&e.stateNode!=null&&(u=e.memoizedProps,ah(e,u,n!==null?n.memoizedProps:u)),s&1024&&(Uo=!0);break;case 6:if(tn(t,e),nn(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(Fe){ot(e,e.return,Fe)}}break;case 3:if(rr=null,u=un,un=sr(t.containerInfo),tn(t,e),un=u,nn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ra(t.containerInfo)}catch(Fe){ot(e,e.return,Fe)}Uo&&(Uo=!1,ph(e));break;case 4:s=un,un=sr(e.stateNode.containerInfo),tn(t,e),nn(e),un=s;break;case 12:tn(t,e),nn(e);break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Yo=ye()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,jo(e,s)));break;case 22:if(s&512&&(dt||n===null||zt(n,n.return)),se=e.memoizedState!==null,de=n!==null&&n.memoizedState!==null,Ce=kn,xe=dt,kn=Ce||se,dt=xe||de,tn(t,e),dt=xe,kn=Ce,nn(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,s&8192&&(t._visibility=se?t._visibility&-2:t._visibility|1,se&&(t=kn||dt,n===null||de||t||Ji(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){de=n=t;try{if(u=de.stateNode,se)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{D=de.stateNode,z=de.memoizedProps.style;var Te=z!=null&&z.hasOwnProperty("display")?z.display:null;D.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(Fe){ot(de,de.return,Fe)}}}else if(t.tag===6){if(n===null){de=t;try{de.stateNode.nodeValue=se?"":de.memoizedProps}catch(Fe){ot(de,de.return,Fe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,jo(e,n))));break;case 19:tn(t,e),nn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,jo(e,s)));break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(rh(n)){var s=n;break e}n=n.return}throw Error(a(160))}switch(s.tag){case 27:var u=s.stateNode,h=No(e);za(e,h,u);break;case 5:var D=s.stateNode;s.flags&32&&(Ni(D,""),s.flags&=-33);var z=No(e);za(e,z,D);break;case 3:case 4:var se=s.stateNode.containerInfo,de=No(e);Fo(e,de,se);break;default:throw Error(a(161))}}}catch(Ce){ot(e,e.return,Ce)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ph(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;ph(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Dn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)uh(e,t.alternate,t),t=t.sibling}function Ji(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Kn(4,t,t.return),Ji(t);break;case 1:zt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ih(t,t.return,n),Ji(t);break;case 26:case 27:case 5:zt(t,t.return),Ji(t);break;case 22:zt(t,t.return),t.memoizedState===null&&Ji(t);break;default:Ji(t)}e=e.sibling}}function Wn(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,u=e,h=t,D=h.flags;switch(h.tag){case 0:case 11:case 15:Wn(u,h,n),Hs(4,h);break;case 1:if(Wn(u,h,n),s=h,u=s.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(de){ot(s,s.return,de)}if(s=h,u=s.updateQueue,u!==null){var z=s.stateNode;try{var se=u.shared.hiddenCallbacks;if(se!==null)for(u.shared.hiddenCallbacks=null,u=0;u<se.length;u++)eh(se[u],z)}catch(de){ot(s,s.return,de)}}n&&D&64&&nh(h),Ti(h,h.return);break;case 26:case 27:case 5:Wn(u,h,n),n&&s===null&&D&4&&sh(h),Ti(h,h.return);break;case 12:Wn(u,h,n);break;case 13:Wn(u,h,n),n&&D&4&&dh(u,h);break;case 22:h.memoizedState===null&&Wn(u,h,n),Ti(h,h.return);break;default:Wn(u,h,n)}t=t.sibling}}function Io(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ds(n))}function Bo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ds(e))}function Qn(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gh(e,t,n,s),t=t.sibling}function gh(e,t,n,s){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Qn(e,t,n,s),u&2048&&Hs(9,t);break;case 3:Qn(e,t,n,s),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ds(e)));break;case 12:if(u&2048){Qn(e,t,n,s),e=t.stateNode;try{var h=t.memoizedProps,D=h.id,z=h.onPostCommit;typeof z=="function"&&z(D,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(se){ot(t,t.return,se)}}else Qn(e,t,n,s);break;case 23:break;case 22:h=t.stateNode,t.memoizedState!==null?h._visibility&4?Qn(e,t,n,s):zs(e,t):h._visibility&4?Qn(e,t,n,s):(h._visibility|=4,Zi(e,t,n,s,(t.subtreeFlags&10256)!==0)),u&2048&&Io(t.alternate,t);break;case 24:Qn(e,t,n,s),u&2048&&Bo(t.alternate,t);break;default:Qn(e,t,n,s)}}function Zi(e,t,n,s,u){for(u=u&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var h=e,D=t,z=n,se=s,de=D.flags;switch(D.tag){case 0:case 11:case 15:Zi(h,D,z,se,u),Hs(8,D);break;case 23:break;case 22:var Ce=D.stateNode;D.memoizedState!==null?Ce._visibility&4?Zi(h,D,z,se,u):zs(h,D):(Ce._visibility|=4,Zi(h,D,z,se,u)),u&&de&2048&&Io(D.alternate,D);break;case 24:Zi(h,D,z,se,u),u&&de&2048&&Bo(D.alternate,D);break;default:Zi(h,D,z,se,u)}t=t.sibling}}function zs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,u=s.flags;switch(s.tag){case 22:zs(n,s),u&2048&&Io(s.alternate,s);break;case 24:zs(n,s),u&2048&&Bo(s.alternate,s);break;default:zs(n,s)}t=t.sibling}}var Gs=8192;function es(e){if(e.subtreeFlags&Gs)for(e=e.child;e!==null;)mh(e),e=e.sibling}function mh(e){switch(e.tag){case 26:es(e),e.flags&Gs&&e.memoizedState!==null&&jp(un,e.memoizedState,e.memoizedProps);break;case 5:es(e);break;case 3:case 4:var t=un;un=sr(e.stateNode.containerInfo),es(e),un=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Gs,Gs=16777216,es(e),Gs=t):es(e));break;default:es(e)}}function _h(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function $s(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Rt=s,bh(s,e)}_h(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yh(e),e=e.sibling}function yh(e){switch(e.tag){case 0:case 11:case 15:$s(e),e.flags&2048&&Kn(9,e,e.return);break;case 3:$s(e);break;case 12:$s(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,Ga(e)):$s(e);break;default:$s(e)}}function Ga(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Rt=s,bh(s,e)}_h(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Kn(8,t,t.return),Ga(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,Ga(t));break;default:Ga(t)}e=e.sibling}}function bh(e,t){for(;Rt!==null;){var n=Rt;switch(n.tag){case 0:case 11:case 15:Kn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ds(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Rt=s;else e:for(n=e;Rt!==null;){s=Rt;var u=s.sibling,h=s.return;if(ch(s),s===n){Rt=null;break e}if(u!==null){u.return=h,Rt=u;break e}Rt=h}}}function Qf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,n,s){return new Qf(e,t,n,s)}function qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jn(e,t){var n=e.alternate;return n===null?(n=sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function vh(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $a(e,t,n,s,u,h){var D=0;if(s=e,typeof e=="function")qo(e)&&(D=1);else if(typeof e=="string")D=Fp(e,n,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case _:return Ci(n.children,u,h,t);case d:D=8,u|=24;break;case v:return e=sn(12,n,t,u|2),e.elementType=v,e.lanes=h,e;case f:return e=sn(13,n,t,u),e.elementType=f,e.lanes=h,e;case g:return e=sn(19,n,t,u),e.elementType=g,e.lanes=h,e;case N:return Eh(n,u,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case k:D=10;break e;case O:D=9;break e;case E:D=11;break e;case T:D=14;break e;case U:D=16,s=null;break e}D=29,n=Error(a(130,e===null?"null":typeof e,"")),s=null}return t=sn(D,n,t,u),t.elementType=e,t.type=s,t.lanes=h,t}function Ci(e,t,n,s){return e=sn(7,e,s,t),e.lanes=n,e}function Eh(e,t,n,s){e=sn(22,e,s,t),e.elementType=N,e.lanes=n;var u={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var h=u._current;if(h===null)throw Error(a(456));if(!(u._pendingVisibility&2)){var D=Bn(h,2);D!==null&&(u._pendingVisibility|=2,Ft(D,h,2))}},attach:function(){var h=u._current;if(h===null)throw Error(a(456));if(u._pendingVisibility&2){var D=Bn(h,2);D!==null&&(u._pendingVisibility&=-3,Ft(D,h,2))}}};return e.stateNode=u,e}function Ho(e,t,n){return e=sn(6,e,null,t),e.lanes=n,e}function zo(e,t,n){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pn(e){e.flags|=4}function Ah(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!rd(t)){if(t=en.current,t!==null&&((Qe&4194176)===Qe?mn!==null:(Qe&62914560)!==Qe&&!(Qe&536870912)||t!==mn))throw Os=Yr,Iu;e.flags|=8192}}function Va(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ot():536870912,e.lanes|=t,ns|=t)}function Vs(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags&31457280,s|=u.flags&31457280,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Jf(e,t,n){var s=t.pendingProps;switch($r(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return ct(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),On(Tt),F(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Cs(t)?Pn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ln!==null&&(Qo(ln),ln=null))),ct(t),null;case 26:return n=t.memoizedState,e===null?(Pn(t),n!==null?(ct(t),Ah(t,n)):(ct(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Pn(t),ct(t),Ah(t,n)):(ct(t),t.flags&=-16777217):(e.memoizedProps!==s&&Pn(t),ct(t),t.flags&=-16777217),null;case 27:ce(t),n=H.current;var u=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Pn(t);else{if(!s){if(t.stateNode===null)throw Error(a(166));return ct(t),null}e=j.current,Cs(t)?Uu(t):(e=Jh(u,s,n),t.stateNode=e,Pn(t))}return ct(t),null;case 5:if(ce(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Pn(t);else{if(!s){if(t.stateNode===null)throw Error(a(166));return ct(t),null}if(e=j.current,Cs(t))Uu(t);else{switch(u=ir(H.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?u.createElement("select",{is:s.is}):u.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?u.createElement(n,{is:s.is}):u.createElement(n)}}e[it]=t,e[bt]=s;e:for(u=t.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}t.stateNode=e;e:switch(Dt(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Pn(t)}}return ct(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Pn(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(a(166));if(e=H.current,Cs(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,u=Nt,u!==null)switch(u.tag){case 27:case 5:s=u.memoizedProps}e[it]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Vh(e.nodeValue,n)),e||gi(t)}else e=ir(e).createTextNode(s),e[it]=t,t.stateNode=e}return ct(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Cs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(a(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));u[it]=t}else ws(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),u=!1}else ln!==null&&(Qo(ln),ln=null),u=!0;if(!u)return t.flags&256?(Cn(t),t):(Cn(t),null)}if(Cn(t),t.flags&128)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,u=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(u=s.alternate.memoizedState.cachePool.pool);var h=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==u&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Va(t,t.updateQueue),ct(t),null;case 4:return F(),e===null&&ll(t.stateNode.containerInfo),ct(t),null;case 10:return On(t.type),ct(t),null;case 19:if(b(St),u=t.memoizedState,u===null)return ct(t),null;if(s=(t.flags&128)!==0,h=u.rendering,h===null)if(s)Vs(u,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=Oa(e),h!==null){for(t.flags|=128,Vs(u,!1),e=h.updateQueue,t.updateQueue=e,Va(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)vh(n,e),n=n.sibling;return L(St,St.current&1|2),t.child}e=e.sibling}u.tail!==null&&ye()>Ya&&(t.flags|=128,s=!0,Vs(u,!1),t.lanes=4194304)}else{if(!s)if(e=Oa(h),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Va(t,e),Vs(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!et)return ct(t),null}else 2*ye()-u.renderingStartTime>Ya&&n!==536870912&&(t.flags|=128,s=!0,Vs(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(e=u.last,e!==null?e.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ye(),t.sibling=null,e=St.current,L(St,s?e&1|2:e&1),t):(ct(t),null);case 22:case 23:return Cn(t),Kr(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?n&536870912&&!(t.flags&128)&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),n=t.updateQueue,n!==null&&Va(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&b(_i),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),On(Tt),ct(t),null;case 25:return null}throw Error(a(156,t.tag))}function Zf(e,t){switch($r(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return On(Tt),F(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ce(t),null;case 13:if(Cn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return b(St),null;case 4:return F(),null;case 10:return On(t.type),null;case 22:case 23:return Cn(t),Kr(),e!==null&&b(_i),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return On(Tt),null;case 25:return null;default:return null}}function Sh(e,t){switch($r(t),t.tag){case 3:On(Tt),F();break;case 26:case 27:case 5:ce(t);break;case 4:F();break;case 13:Cn(t);break;case 19:b(St);break;case 10:On(t.type);break;case 22:case 23:Cn(t),Kr(),e!==null&&b(_i);break;case 24:On(Tt)}}var ep={getCacheForType:function(e){var t=Pt(Tt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},tp=typeof WeakMap=="function"?WeakMap:Map,ht=0,lt=null,Ye=null,Qe=0,ut=0,$t=null,Ln=!1,ts=!1,Go=!1,Nn=0,ft=0,Zn=0,wi=0,$o=0,an=0,ns=0,Ys=null,yn=null,Vo=!1,Yo=0,Ya=1/0,Xa=null,ei=null,Ka=!1,Ri=null,Xs=0,Xo=0,Ko=null,Ks=0,Wo=null;function Vt(){if(ht&2&&Qe!==0)return Qe&-Qe;if(C.T!==null){var e=Yi;return e!==0?e:sl()}return ki()}function Th(){an===0&&(an=!(Qe&536870912)||et?dn():536870912);var e=en.current;return e!==null&&(e.flags|=32),an}function Ft(e,t,n){(e===lt&&ut===2||e.cancelPendingCommit!==null)&&(is(e,0),Fn(e,Qe,an,!1)),jt(e,n),(!(ht&2)||e!==lt)&&(e===lt&&(!(ht&2)&&(wi|=n),ft===4&&Fn(e,Qe,an,!1)),bn(e))}function Ch(e,t,n){if(ht&6)throw Error(a(327));var s=!n&&(t&60)===0&&(t&e.expiredLanes)===0||Ut(e,t),u=s?sp(e,t):el(e,t,!0),h=s;do{if(u===0){ts&&!s&&Fn(e,t,0,!1);break}else if(u===6)Fn(e,t,0,!Ln);else{if(n=e.current.alternate,h&&!np(n)){u=el(e,t,!1),h=!1;continue}if(u===2){if(h=t,e.errorRecoveryDisabledLanes&h)var D=0;else D=e.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){t=D;e:{var z=e;u=Ys;var se=z.current.memoizedState.isDehydrated;if(se&&(is(z,D).flags|=256),D=el(z,D,!1),D!==2){if(Go&&!se){z.errorRecoveryDisabledLanes|=h,wi|=h,u=4;break e}h=yn,yn=u,h!==null&&Qo(h)}u=D}if(h=!1,u!==2)continue}}if(u===1){is(e,0),Fn(e,t,0,!0);break}e:{switch(s=e,u){case 0:case 1:throw Error(a(345));case 4:if((t&4194176)===t){Fn(s,t,an,!Ln);break e}break;case 2:yn=null;break;case 3:case 5:break;default:throw Error(a(329))}if(s.finishedWork=n,s.finishedLanes=t,(t&62914560)===t&&(h=Yo+300-ye(),10<h)){if(Fn(s,t,an,!Ln),nt(s,0)!==0)break e;s.timeoutHandle=Kh(wh.bind(null,s,n,yn,Xa,Vo,t,an,wi,ns,Ln,2,-0,0),h);break e}wh(s,n,yn,Xa,Vo,t,an,wi,ns,Ln,0,-0,0)}}break}while(!0);bn(e)}function Qo(e){yn===null?yn=e:yn.push.apply(yn,e)}function wh(e,t,n,s,u,h,D,z,se,de,Ce,xe,Ee){var Te=t.subtreeFlags;if((Te&8192||(Te&16785408)===16785408)&&(ta={stylesheets:null,count:0,unsuspend:Up},mh(t),t=Ip(),t!==null)){e.cancelPendingCommit=t(Ph.bind(null,e,n,s,u,D,z,se,1,xe,Ee)),Fn(e,h,D,!de);return}Ph(e,n,s,u,D,z,se,Ce,xe,Ee)}function np(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var u=n[s],h=u.getSnapshot;u=u.value;try{if(!Ht(h(),u))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fn(e,t,n,s){t&=~$o,t&=~wi,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var u=t;0<u;){var h=31-yt(u),D=1<<h;s[h]=-1,u&=~D}n!==0&&gt(e,n,t)}function Wa(){return ht&6?!0:(Ws(0),!1)}function Jo(){if(Ye!==null){if(ut===0)var e=Ye.return;else e=Ye,xn=Ai=null,io(e),$i=null,ks=0,e=Ye;for(;e!==null;)Sh(e.alternate,e),e=e.return;Ye=null}}function is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ep(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Jo(),lt=e,Ye=n=Jn(e.current,null),Qe=t,ut=0,$t=null,Ln=!1,ts=Ut(e,t),Go=!1,ns=an=$o=wi=Zn=ft=0,yn=Ys=null,Vo=!1,t&8&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var u=31-yt(s),h=1<<u;t|=e[u],s&=~h}return Nn=t,va(),n}function Rh(e,t){Ge=null,C.H=_n,t===xs?(t=Hu(),ut=3):t===Iu?(t=Hu(),ut=4):ut=t===Bc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,$t=t,Ye===null&&(ft=1,Ba(e,Qt(t,e.current)))}function xh(){var e=C.H;return C.H=_n,e===null?_n:e}function Oh(){var e=C.A;return C.A=ep,e}function Zo(){ft=4,Ln||(Qe&4194176)!==Qe&&en.current!==null||(ts=!0),!(Zn&134217727)&&!(wi&134217727)||lt===null||Fn(lt,Qe,an,!1)}function el(e,t,n){var s=ht;ht|=2;var u=xh(),h=Oh();(lt!==e||Qe!==t)&&(Xa=null,is(e,t)),t=!1;var D=ft;e:do try{if(ut!==0&&Ye!==null){var z=Ye,se=$t;switch(ut){case 8:Jo(),D=6;break e;case 3:case 2:case 6:en.current===null&&(t=!0);var de=ut;if(ut=0,$t=null,ss(e,z,se,de),n&&ts){D=0;break e}break;default:de=ut,ut=0,$t=null,ss(e,z,se,de)}}ip(),D=ft;break}catch(Ce){Rh(e,Ce)}while(!0);return t&&e.shellSuspendCounter++,xn=Ai=null,ht=s,C.H=u,C.A=h,Ye===null&&(lt=null,Qe=0,va()),D}function ip(){for(;Ye!==null;)kh(Ye)}function sp(e,t){var n=ht;ht|=2;var s=xh(),u=Oh();lt!==e||Qe!==t?(Xa=null,Ya=ye()+500,is(e,t)):ts=Ut(e,t);e:do try{if(ut!==0&&Ye!==null){t=Ye;var h=$t;t:switch(ut){case 1:ut=0,$t=null,ss(e,t,h,1);break;case 2:if(Bu(h)){ut=0,$t=null,Mh(t);break}t=function(){ut===2&&lt===e&&(ut=7),bn(e)},h.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Bu(h)?(ut=0,$t=null,Mh(t)):(ut=0,$t=null,ss(e,t,h,7));break;case 5:var D=null;switch(Ye.tag){case 26:D=Ye.memoizedState;case 5:case 27:var z=Ye;if(!D||rd(D)){ut=0,$t=null;var se=z.sibling;if(se!==null)Ye=se;else{var de=z.return;de!==null?(Ye=de,Qa(de)):Ye=null}break t}}ut=0,$t=null,ss(e,t,h,5);break;case 6:ut=0,$t=null,ss(e,t,h,6);break;case 8:Jo(),ft=6;break e;default:throw Error(a(462))}}ap();break}catch(Ce){Rh(e,Ce)}while(!0);return xn=Ai=null,C.H=s,C.A=u,ht=n,Ye!==null?0:(lt=null,Qe=0,va(),ft)}function ap(){for(;Ye!==null&&!Ae();)kh(Ye)}function kh(e){var t=Jc(e.alternate,e,Nn);e.memoizedProps=e.pendingProps,t===null?Qa(e):Ye=t}function Mh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vc(n,t,t.pendingProps,t.type,void 0,Qe);break;case 11:t=Vc(n,t,t.pendingProps,t.type.render,t.ref,Qe);break;case 5:io(t);default:Sh(n,t),t=Ye=vh(t,Nn),t=Jc(n,t,Nn)}e.memoizedProps=e.pendingProps,t===null?Qa(e):Ye=t}function ss(e,t,n,s){xn=Ai=null,io(t),$i=null,ks=0;var u=t.return;try{if(Yf(e,u,t,n,Qe)){ft=1,Ba(e,Qt(n,e.current)),Ye=null;return}}catch(h){if(u!==null)throw Ye=u,h;ft=1,Ba(e,Qt(n,e.current)),Ye=null;return}t.flags&32768?(et||s===1?e=!0:ts||Qe&536870912?e=!1:(Ln=e=!0,(s===2||s===3||s===6)&&(s=en.current,s!==null&&s.tag===13&&(s.flags|=16384))),Dh(t,e)):Qa(t)}function Qa(e){var t=e;do{if(t.flags&32768){Dh(t,Ln);return}e=t.return;var n=Jf(t.alternate,t,Nn);if(n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);ft===0&&(ft=5)}function Dh(e,t){do{var n=Zf(e.alternate,e);if(n!==null){n.flags&=32767,Ye=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ye=e;return}Ye=e=n}while(e!==null);ft=6,Ye=null}function Ph(e,t,n,s,u,h,D,z,se,de){var Ce=C.T,xe=w.p;try{w.p=2,C.T=null,rp(e,t,n,s,xe,u,h,D,z,se,de)}finally{C.T=Ce,w.p=xe}}function rp(e,t,n,s,u,h,D,z){do as();while(Ri!==null);if(ht&6)throw Error(a(327));var se=e.finishedWork;if(s=e.finishedLanes,se===null)return null;if(e.finishedWork=null,e.finishedLanes=0,se===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var de=se.lanes|se.childLanes;if(de|=Hr,Oi(e,s,de,h,D,z),e===lt&&(Ye=lt=null,Qe=0),!(se.subtreeFlags&10256)&&!(se.flags&10256)||Ka||(Ka=!0,Xo=de,Ko=n,cp(je,function(){return as(),null})),n=(se.flags&15990)!==0,se.subtreeFlags&15990||n?(n=C.T,C.T=null,h=w.p,w.p=2,D=ht,ht|=4,Kf(e,se),fh(se,e),kf(dl,e.containerInfo),ur=!!hl,dl=hl=null,e.current=se,uh(e,se.alternate,se),Oe(),ht=D,w.p=h,C.T=n):e.current=se,Ka?(Ka=!1,Ri=e,Xs=s):Lh(e,de),de=e.pendingLanes,de===0&&(ei=null),hn(se.stateNode),bn(e),t!==null)for(u=e.onRecoverableError,se=0;se<t.length;se++)de=t[se],u(de.value,{componentStack:de.stack});return Xs&3&&as(),de=e.pendingLanes,s&4194218&&de&42?e===Wo?Ks++:(Ks=0,Wo=e):Ks=0,Ws(0),null}function Lh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ds(t)))}function as(){if(Ri!==null){var e=Ri,t=Xo;Xo=0;var n=oi(Xs),s=C.T,u=w.p;try{if(w.p=32>n?32:n,C.T=null,Ri===null)var h=!1;else{n=Ko,Ko=null;var D=Ri,z=Xs;if(Ri=null,Xs=0,ht&6)throw Error(a(331));var se=ht;if(ht|=4,yh(D.current),gh(D,D.current,z,n),ht=se,Ws(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Ve,D)}catch{}h=!0}return h}finally{w.p=u,C.T=s,Lh(e,t)}}return!1}function Nh(e,t,n){t=Qt(n,t),t=yo(e.stateNode,t,2),e=Xn(e,t,2),e!==null&&(jt(e,2),bn(e))}function ot(e,t,n){if(e.tag===3)Nh(e,e,n);else for(;t!==null;){if(t.tag===3){Nh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ei===null||!ei.has(s))){e=Qt(n,e),n=jc(2),s=Xn(t,n,2),s!==null&&(Ic(n,s,t,e),jt(s,2),bn(s));break}}t=t.return}}function tl(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new tp;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(n)||(Go=!0,u.add(n),e=op.bind(null,e,t,n),t.then(e,e))}function op(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,lt===e&&(Qe&n)===n&&(ft===4||ft===3&&(Qe&62914560)===Qe&&300>ye()-Yo?!(ht&2)&&is(e,0):$o|=n,ns===Qe&&(ns=0)),bn(e)}function Fh(e,t){t===0&&(t=Ot()),e=Bn(e,t),e!==null&&(jt(e,t),bn(e))}function lp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fh(e,n)}function up(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(t),Fh(e,n)}function cp(e,t){return fe(e,t)}var Ja=null,rs=null,nl=!1,Za=!1,il=!1,xi=0;function bn(e){e!==rs&&e.next===null&&(rs===null?Ja=rs=e:rs=rs.next=e),Za=!0,nl||(nl=!0,dp(hp))}function Ws(e,t){if(!il&&Za){il=!0;do for(var n=!1,s=Ja;s!==null;){if(e!==0){var u=s.pendingLanes;if(u===0)var h=0;else{var D=s.suspendedLanes,z=s.pingedLanes;h=(1<<31-yt(42|e)+1)-1,h&=u&~(D&~z),h=h&201326677?h&201326677|1:h?h|2:0}h!==0&&(n=!0,Ih(s,h))}else h=Qe,h=nt(s,s===lt?h:0),!(h&3)||Ut(s,h)||(n=!0,Ih(s,h));s=s.next}while(n);il=!1}}function hp(){Za=nl=!1;var e=0;xi!==0&&(vp()&&(e=xi),xi=0);for(var t=ye(),n=null,s=Ja;s!==null;){var u=s.next,h=Uh(s,t);h===0?(s.next=null,n===null?Ja=u:n.next=u,u===null&&(rs=n)):(n=s,(e!==0||h&3)&&(Za=!0)),s=u}Ws(e)}function Uh(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var D=31-yt(h),z=1<<D,se=u[D];se===-1?(!(z&n)||z&s)&&(u[D]=jn(z,t)):se<=t&&(e.expiredLanes|=z),h&=~z}if(t=lt,n=Qe,n=nt(e,e===t?n:0),s=e.callbackNode,n===0||e===t&&ut===2||e.cancelPendingCommit!==null)return s!==null&&s!==null&&be(s),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ut(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&be(s),oi(n)){case 2:case 8:n=De;break;case 32:n=je;break;case 268435456:n=st;break;default:n=je}return s=jh.bind(null,e),n=fe(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&be(s),e.callbackPriority=2,e.callbackNode=null,2}function jh(e,t){var n=e.callbackNode;if(as()&&e.callbackNode!==n)return null;var s=Qe;return s=nt(e,e===lt?s:0),s===0?null:(Ch(e,s,t),Uh(e,ye()),e.callbackNode!=null&&e.callbackNode===n?jh.bind(null,e):null)}function Ih(e,t){if(as())return null;Ch(e,t,!0)}function dp(e){Ap(function(){ht&6?fe(Le,e):e()})}function sl(){return xi===0&&(xi=dn()),xi}function Bh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:fa(""+e)}function qh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function fp(e,t,n,s,u){if(t==="submit"&&n&&n.stateNode===u){var h=Bh((u[bt]||null).action),D=s.submitter;D&&(t=(t=D[bt]||null)?Bh(t.formAction):D.getAttribute("formAction"),t!==null&&(h=t,D=null));var z=new _a("action","action",null,s,u);e.push({event:z,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(xi!==0){var se=D?qh(u,D):new FormData(u);fo(n,{pending:!0,data:se,method:u.method,action:h},null,se)}}else typeof h=="function"&&(z.preventDefault(),se=D?qh(u,D):new FormData(u),fo(n,{pending:!0,data:se,method:u.method,action:h},h,se))},currentTarget:u}]})}}for(var al=0;al<Pu.length;al++){var rl=Pu[al],pp=rl.toLowerCase(),gp=rl[0].toUpperCase()+rl.slice(1);on(pp,"on"+gp)}on(xu,"onAnimationEnd"),on(Ou,"onAnimationIteration"),on(ku,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(Df,"onTransitionRun"),on(Pf,"onTransitionStart"),on(Lf,"onTransitionCancel"),on(Mu,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qs));function Hh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],u=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var D=s.length-1;0<=D;D--){var z=s[D],se=z.instance,de=z.currentTarget;if(z=z.listener,se!==h&&u.isPropagationStopped())break e;h=z,u.currentTarget=de;try{h(u)}catch(Ce){Ia(Ce)}u.currentTarget=null,h=se}else for(D=0;D<s.length;D++){if(z=s[D],se=z.instance,de=z.currentTarget,z=z.listener,se!==h&&u.isPropagationStopped())break e;h=z,u.currentTarget=de;try{h(u)}catch(Ce){Ia(Ce)}u.currentTarget=null,h=se}}}}function We(e,t){var n=t[Er];n===void 0&&(n=t[Er]=new Set);var s=e+"__bubble";n.has(s)||(zh(t,e,2,!1),n.add(s))}function ol(e,t,n){var s=0;t&&(s|=4),zh(n,e,s,t)}var er="_reactListening"+Math.random().toString(36).slice(2);function ll(e){if(!e[er]){e[er]=!0,Vl.forEach(function(n){n!=="selectionchange"&&(mp.has(n)||ol(n,!1,e),ol(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[er]||(t[er]=!0,ol("selectionchange",!1,t))}}function zh(e,t,n,s){switch(dd(t)){case 2:var u=Hp;break;case 8:u=zp;break;default:u=El}n=u.bind(null,t,n,e),u=void 0,!Or||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function ul(e,t,n,s,u){var h=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var D=s.tag;if(D===3||D===4){var z=s.stateNode.containerInfo;if(z===u||z.nodeType===8&&z.parentNode===u)break;if(D===4)for(D=s.return;D!==null;){var se=D.tag;if((se===3||se===4)&&(se=D.stateNode.containerInfo,se===u||se.nodeType===8&&se.parentNode===u))return;D=D.return}for(;z!==null;){if(D=li(z),D===null)return;if(se=D.tag,se===5||se===6||se===26||se===27){s=h=D;continue e}z=z.parentNode}}s=s.return}su(function(){var de=h,Ce=Rr(n),xe=[];e:{var Ee=Du.get(e);if(Ee!==void 0){var Te=_a,Fe=e;switch(e){case"keypress":if(ga(n)===0)break e;case"keydown":case"keyup":Te=uf;break;case"focusin":Fe="focus",Te=Pr;break;case"focusout":Fe="blur",Te=Pr;break;case"beforeblur":case"afterblur":Te=Pr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Wd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=df;break;case xu:case Ou:case ku:Te=Zd;break;case Mu:Te=pf;break;case"scroll":case"scrollend":Te=Xd;break;case"wheel":Te=mf;break;case"copy":case"cut":case"paste":Te=tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=uu;break;case"toggle":case"beforetoggle":Te=yf}var He=(t&4)!==0,pt=!He&&(e==="scroll"||e==="scrollend"),me=He?Ee!==null?Ee+"Capture":null:Ee;He=[];for(var le=de,ve;le!==null;){var we=le;if(ve=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ve===null||me===null||(we=ms(le,me),we!=null&&He.push(Js(le,we,ve))),pt)break;le=le.return}0<He.length&&(Ee=new Te(Ee,Fe,null,n,Ce),xe.push({event:Ee,listeners:He}))}}if(!(t&7)){e:{if(Ee=e==="mouseover"||e==="pointerover",Te=e==="mouseout"||e==="pointerout",Ee&&n!==wr&&(Fe=n.relatedTarget||n.fromElement)&&(li(Fe)||Fe[pn]))break e;if((Te||Ee)&&(Ee=Ce.window===Ce?Ce:(Ee=Ce.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Te?(Fe=n.relatedTarget||n.toElement,Te=de,Fe=Fe?li(Fe):null,Fe!==null&&(pt=ne(Fe),He=Fe.tag,Fe!==pt||He!==5&&He!==27&&He!==6)&&(Fe=null)):(Te=null,Fe=de),Te!==Fe)){if(He=ou,we="onMouseLeave",me="onMouseEnter",le="mouse",(e==="pointerout"||e==="pointerover")&&(He=uu,we="onPointerLeave",me="onPointerEnter",le="pointer"),pt=Te==null?Ee:gs(Te),ve=Fe==null?Ee:gs(Fe),Ee=new He(we,le+"leave",Te,n,Ce),Ee.target=pt,Ee.relatedTarget=ve,we=null,li(Ce)===de&&(He=new He(me,le+"enter",Fe,n,Ce),He.target=ve,He.relatedTarget=pt,we=He),pt=we,Te&&Fe)t:{for(He=Te,me=Fe,le=0,ve=He;ve;ve=os(ve))le++;for(ve=0,we=me;we;we=os(we))ve++;for(;0<le-ve;)He=os(He),le--;for(;0<ve-le;)me=os(me),ve--;for(;le--;){if(He===me||me!==null&&He===me.alternate)break t;He=os(He),me=os(me)}He=null}else He=null;Te!==null&&Gh(xe,Ee,Te,He,!1),Fe!==null&&pt!==null&&Gh(xe,pt,Fe,He,!0)}}e:{if(Ee=de?gs(de):window,Te=Ee.nodeName&&Ee.nodeName.toLowerCase(),Te==="select"||Te==="input"&&Ee.type==="file")var Ne=_u;else if(gu(Ee))if(yu)Ne=xf;else{Ne=wf;var $e=Cf}else Te=Ee.nodeName,!Te||Te.toLowerCase()!=="input"||Ee.type!=="checkbox"&&Ee.type!=="radio"?de&&Cr(de.elementType)&&(Ne=_u):Ne=Rf;if(Ne&&(Ne=Ne(e,de))){mu(xe,Ne,n,Ce);break e}$e&&$e(e,Ee,de),e==="focusout"&&de&&Ee.type==="number"&&de.memoizedProps.value!=null&&Tr(Ee,"number",Ee.value)}switch($e=de?gs(de):window,e){case"focusin":(gu($e)||$e.contentEditable==="true")&&(Ii=$e,Ir=de,Ts=null);break;case"focusout":Ts=Ir=Ii=null;break;case"mousedown":Br=!0;break;case"contextmenu":case"mouseup":case"dragend":Br=!1,wu(xe,n,Ce);break;case"selectionchange":if(Mf)break;case"keydown":case"keyup":wu(xe,n,Ce)}var Ue;if(Nr)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ji?fu(e,n)&&(Be="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Be="onCompositionStart");Be&&(cu&&n.locale!=="ko"&&(ji||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ji&&(Ue=au()):(In=Ce,kr="value"in In?In.value:In.textContent,ji=!0)),$e=tr(de,Be),0<$e.length&&(Be=new lu(Be,e,null,n,Ce),xe.push({event:Be,listeners:$e}),Ue?Be.data=Ue:(Ue=pu(n),Ue!==null&&(Be.data=Ue)))),(Ue=vf?Ef(e,n):Af(e,n))&&(Be=tr(de,"onBeforeInput"),0<Be.length&&($e=new lu("onBeforeInput","beforeinput",null,n,Ce),xe.push({event:$e,listeners:Be}),$e.data=Ue)),fp(xe,e,de,n,Ce)}Hh(xe,t)})}function Js(e,t,n){return{instance:e,listener:t,currentTarget:n}}function tr(e,t){for(var n=t+"Capture",s=[];e!==null;){var u=e,h=u.stateNode;u=u.tag,u!==5&&u!==26&&u!==27||h===null||(u=ms(e,n),u!=null&&s.unshift(Js(e,u,h)),u=ms(e,t),u!=null&&s.push(Js(e,u,h))),e=e.return}return s}function os(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gh(e,t,n,s,u){for(var h=t._reactName,D=[];n!==null&&n!==s;){var z=n,se=z.alternate,de=z.stateNode;if(z=z.tag,se!==null&&se===s)break;z!==5&&z!==26&&z!==27||de===null||(se=de,u?(de=ms(n,h),de!=null&&D.unshift(Js(n,de,se))):u||(de=ms(n,h),de!=null&&D.push(Js(n,de,se)))),n=n.return}D.length!==0&&e.push({event:t,listeners:D})}var _p=/\r\n?/g,yp=/\u0000|\uFFFD/g;function $h(e){return(typeof e=="string"?e:""+e).replace(_p,`
`).replace(yp,"")}function Vh(e,t){return t=$h(t),$h(e)===t}function nr(){}function rt(e,t,n,s,u,h){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Ni(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Ni(e,""+s);break;case"className":ca(e,"class",s);break;case"tabIndex":ca(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ca(e,n,s);break;case"style":nu(e,s,h);break;case"data":if(t!=="object"){ca(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=fa(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(n==="formAction"?(t!=="input"&&rt(e,t,"name",u.name,u,null),rt(e,t,"formEncType",u.formEncType,u,null),rt(e,t,"formMethod",u.formMethod,u,null),rt(e,t,"formTarget",u.formTarget,u,null)):(rt(e,t,"encType",u.encType,u,null),rt(e,t,"method",u.method,u,null),rt(e,t,"target",u.target,u,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=fa(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=nr);break;case"onScroll":s!=null&&We("scroll",e);break;case"onScrollEnd":s!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(n=s.__html,n!=null){if(u.children!=null)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=fa(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":We("beforetoggle",e),We("toggle",e),ua(e,"popover",s);break;case"xlinkActuate":An(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":An(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":An(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":An(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":An(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":An(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":An(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":An(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":An(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ua(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Vd.get(n)||n,ua(e,n,s))}}function cl(e,t,n,s,u,h){switch(n){case"style":nu(e,s,h);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(n=s.__html,n!=null){if(u.children!=null)throw Error(a(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Ni(e,s):(typeof s=="number"||typeof s=="bigint")&&Ni(e,""+s);break;case"onScroll":s!=null&&We("scroll",e);break;case"onScrollEnd":s!=null&&We("scrollend",e);break;case"onClick":s!=null&&(e.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yl.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(u=n.endsWith("Capture"),t=n.slice(2,u?n.length-7:void 0),h=e[bt]||null,h=h!=null?h[n]:null,typeof h=="function"&&e.removeEventListener(t,h,u),typeof s=="function")){typeof h!="function"&&h!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,u);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):ua(e,n,s)}}}function Dt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var s=!1,u=!1,h;for(h in n)if(n.hasOwnProperty(h)){var D=n[h];if(D!=null)switch(h){case"src":s=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:rt(e,t,h,D,n,null)}}u&&rt(e,t,"srcSet",n.srcSet,n,null),s&&rt(e,t,"src",n.src,n,null);return;case"input":We("invalid",e);var z=h=D=u=null,se=null,de=null;for(s in n)if(n.hasOwnProperty(s)){var Ce=n[s];if(Ce!=null)switch(s){case"name":u=Ce;break;case"type":D=Ce;break;case"checked":se=Ce;break;case"defaultChecked":de=Ce;break;case"value":h=Ce;break;case"defaultValue":z=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(a(137,t));break;default:rt(e,t,s,Ce,n,null)}}Jl(e,h,z,se,de,D,u,!1),ha(e);return;case"select":We("invalid",e),s=D=h=null;for(u in n)if(n.hasOwnProperty(u)&&(z=n[u],z!=null))switch(u){case"value":h=z;break;case"defaultValue":D=z;break;case"multiple":s=z;default:rt(e,t,u,z,n,null)}t=h,n=D,e.multiple=!!s,t!=null?Li(e,!!s,t,!1):n!=null&&Li(e,!!s,n,!0);return;case"textarea":We("invalid",e),h=u=s=null;for(D in n)if(n.hasOwnProperty(D)&&(z=n[D],z!=null))switch(D){case"value":s=z;break;case"defaultValue":u=z;break;case"children":h=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(91));break;default:rt(e,t,D,z,n,null)}eu(e,s,u,h),ha(e);return;case"option":for(se in n)if(n.hasOwnProperty(se)&&(s=n[se],s!=null))switch(se){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:rt(e,t,se,s,n,null)}return;case"dialog":We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(s=0;s<Qs.length;s++)We(Qs[s],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in n)if(n.hasOwnProperty(de)&&(s=n[de],s!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:rt(e,t,de,s,n,null)}return;default:if(Cr(t)){for(Ce in n)n.hasOwnProperty(Ce)&&(s=n[Ce],s!==void 0&&cl(e,t,Ce,s,n,void 0));return}}for(z in n)n.hasOwnProperty(z)&&(s=n[z],s!=null&&rt(e,t,z,s,n,null))}function bp(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,h=null,D=null,z=null,se=null,de=null,Ce=null;for(Te in n){var xe=n[Te];if(n.hasOwnProperty(Te)&&xe!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":se=xe;default:s.hasOwnProperty(Te)||rt(e,t,Te,null,s,xe)}}for(var Ee in s){var Te=s[Ee];if(xe=n[Ee],s.hasOwnProperty(Ee)&&(Te!=null||xe!=null))switch(Ee){case"type":h=Te;break;case"name":u=Te;break;case"checked":de=Te;break;case"defaultChecked":Ce=Te;break;case"value":D=Te;break;case"defaultValue":z=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(a(137,t));break;default:Te!==xe&&rt(e,t,Ee,Te,s,xe)}}Sr(e,D,z,se,de,Ce,h,u);return;case"select":Te=D=z=Ee=null;for(h in n)if(se=n[h],n.hasOwnProperty(h)&&se!=null)switch(h){case"value":break;case"multiple":Te=se;default:s.hasOwnProperty(h)||rt(e,t,h,null,s,se)}for(u in s)if(h=s[u],se=n[u],s.hasOwnProperty(u)&&(h!=null||se!=null))switch(u){case"value":Ee=h;break;case"defaultValue":z=h;break;case"multiple":D=h;default:h!==se&&rt(e,t,u,h,s,se)}t=z,n=D,s=Te,Ee!=null?Li(e,!!n,Ee,!1):!!s!=!!n&&(t!=null?Li(e,!!n,t,!0):Li(e,!!n,n?[]:"",!1));return;case"textarea":Te=Ee=null;for(z in n)if(u=n[z],n.hasOwnProperty(z)&&u!=null&&!s.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:rt(e,t,z,null,s,u)}for(D in s)if(u=s[D],h=n[D],s.hasOwnProperty(D)&&(u!=null||h!=null))switch(D){case"value":Ee=u;break;case"defaultValue":Te=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(a(91));break;default:u!==h&&rt(e,t,D,u,s,h)}Zl(e,Ee,Te);return;case"option":for(var Fe in n)if(Ee=n[Fe],n.hasOwnProperty(Fe)&&Ee!=null&&!s.hasOwnProperty(Fe))switch(Fe){case"selected":e.selected=!1;break;default:rt(e,t,Fe,null,s,Ee)}for(se in s)if(Ee=s[se],Te=n[se],s.hasOwnProperty(se)&&Ee!==Te&&(Ee!=null||Te!=null))switch(se){case"selected":e.selected=Ee&&typeof Ee!="function"&&typeof Ee!="symbol";break;default:rt(e,t,se,Ee,s,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in n)Ee=n[He],n.hasOwnProperty(He)&&Ee!=null&&!s.hasOwnProperty(He)&&rt(e,t,He,null,s,Ee);for(de in s)if(Ee=s[de],Te=n[de],s.hasOwnProperty(de)&&Ee!==Te&&(Ee!=null||Te!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,t));break;default:rt(e,t,de,Ee,s,Te)}return;default:if(Cr(t)){for(var pt in n)Ee=n[pt],n.hasOwnProperty(pt)&&Ee!==void 0&&!s.hasOwnProperty(pt)&&cl(e,t,pt,void 0,s,Ee);for(Ce in s)Ee=s[Ce],Te=n[Ce],!s.hasOwnProperty(Ce)||Ee===Te||Ee===void 0&&Te===void 0||cl(e,t,Ce,Ee,s,Te);return}}for(var me in n)Ee=n[me],n.hasOwnProperty(me)&&Ee!=null&&!s.hasOwnProperty(me)&&rt(e,t,me,null,s,Ee);for(xe in s)Ee=s[xe],Te=n[xe],!s.hasOwnProperty(xe)||Ee===Te||Ee==null&&Te==null||rt(e,t,xe,Ee,s,Te)}var hl=null,dl=null;function ir(e){return e.nodeType===9?e:e.ownerDocument}function Yh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pl=null;function vp(){var e=window.event;return e&&e.type==="popstate"?e===pl?!1:(pl=e,!0):(pl=null,!1)}var Kh=typeof setTimeout=="function"?setTimeout:void 0,Ep=typeof clearTimeout=="function"?clearTimeout:void 0,Wh=typeof Promise=="function"?Promise:void 0,Ap=typeof queueMicrotask=="function"?queueMicrotask:typeof Wh<"u"?function(e){return Wh.resolve(null).then(e).catch(Sp)}:Kh;function Sp(e){setTimeout(function(){throw e})}function gl(e,t){var n=t,s=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(s===0){e.removeChild(u),ra(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=u}while(n);ra(t)}function ml(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ml(n),Ar(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Tp(e,t,n,s){for(;e.nodeType===1;){var u=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ps])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==u.rel||e.getAttribute("href")!==(u.href==null?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=cn(e.nextSibling),e===null)break}return null}function Cp(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=cn(e.nextSibling),e===null))return null;return e}function cn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function Qh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Jh(e,t,n){switch(t=ir(n),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}var rn=new Map,Zh=new Set;function sr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var Un=w.d;w.d={f:wp,r:Rp,D:xp,C:Op,L:kp,m:Mp,X:Pp,S:Dp,M:Lp};function wp(){var e=Un.f(),t=Wa();return e||t}function Rp(e){var t=Mi(e);t!==null&&t.tag===5&&t.type==="form"?wc(t):Un.r(e)}var ls=typeof document>"u"?null:document;function ed(e,t,n){var s=ls;if(s&&typeof t=="string"&&t){var u=Kt(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof n=="string"&&(u+='[crossorigin="'+n+'"]'),Zh.has(u)||(Zh.add(u),e={rel:e,crossOrigin:n,href:t},s.querySelector(u)===null&&(t=s.createElement("link"),Dt(t,"link",e),Ct(t),s.head.appendChild(t)))}}function xp(e){Un.D(e),ed("dns-prefetch",e,null)}function Op(e,t){Un.C(e,t),ed("preconnect",e,t)}function kp(e,t,n){Un.L(e,t,n);var s=ls;if(s&&e&&t){var u='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(u+='[imagesrcset="'+Kt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(u+='[imagesizes="'+Kt(n.imageSizes)+'"]')):u+='[href="'+Kt(e)+'"]';var h=u;switch(t){case"style":h=us(e);break;case"script":h=cs(e)}rn.has(h)||(e=B({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),rn.set(h,e),s.querySelector(u)!==null||t==="style"&&s.querySelector(Zs(h))||t==="script"&&s.querySelector(ea(h))||(t=s.createElement("link"),Dt(t,"link",e),Ct(t),s.head.appendChild(t)))}}function Mp(e,t){Un.m(e,t);var n=ls;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+Kt(s)+'"][href="'+Kt(e)+'"]',h=u;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=cs(e)}if(!rn.has(h)&&(e=B({rel:"modulepreload",href:e},t),rn.set(h,e),n.querySelector(u)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ea(h)))return}s=n.createElement("link"),Dt(s,"link",e),Ct(s),n.head.appendChild(s)}}}function Dp(e,t,n){Un.S(e,t,n);var s=ls;if(s&&e){var u=Di(s).hoistableStyles,h=us(e);t=t||"default";var D=u.get(h);if(!D){var z={loading:0,preload:null};if(D=s.querySelector(Zs(h)))z.loading=5;else{e=B({rel:"stylesheet",href:e,"data-precedence":t},n),(n=rn.get(h))&&_l(e,n);var se=D=s.createElement("link");Ct(se),Dt(se,"link",e),se._p=new Promise(function(de,Ce){se.onload=de,se.onerror=Ce}),se.addEventListener("load",function(){z.loading|=1}),se.addEventListener("error",function(){z.loading|=2}),z.loading|=4,ar(D,t,s)}D={type:"stylesheet",instance:D,count:1,state:z},u.set(h,D)}}}function Pp(e,t){Un.X(e,t);var n=ls;if(n&&e){var s=Di(n).hoistableScripts,u=cs(e),h=s.get(u);h||(h=n.querySelector(ea(u)),h||(e=B({src:e,async:!0},t),(t=rn.get(u))&&yl(e,t),h=n.createElement("script"),Ct(h),Dt(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(u,h))}}function Lp(e,t){Un.M(e,t);var n=ls;if(n&&e){var s=Di(n).hoistableScripts,u=cs(e),h=s.get(u);h||(h=n.querySelector(ea(u)),h||(e=B({src:e,async:!0,type:"module"},t),(t=rn.get(u))&&yl(e,t),h=n.createElement("script"),Ct(h),Dt(h,"link",e),n.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(u,h))}}function td(e,t,n,s){var u=(u=H.current)?sr(u):null;if(!u)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=us(n.href),n=Di(u).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=us(n.href);var h=Di(u).hoistableStyles,D=h.get(e);if(D||(u=u.ownerDocument||u,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,D),(h=u.querySelector(Zs(e)))&&!h._p&&(D.instance=h,D.state.loading=5),rn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},rn.set(e,n),h||Np(u,e,n,D.state))),t&&s===null)throw Error(a(528,""));return D}if(t&&s!==null)throw Error(a(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=cs(n),n=Di(u).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function us(e){return'href="'+Kt(e)+'"'}function Zs(e){return'link[rel="stylesheet"]['+e+"]"}function nd(e){return B({},e,{"data-precedence":e.precedence,precedence:null})}function Np(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Dt(t,"link",n),Ct(t),e.head.appendChild(t))}function cs(e){return'[src="'+Kt(e)+'"]'}function ea(e){return"script[async]"+e}function id(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Kt(n.href)+'"]');if(s)return t.instance=s,Ct(s),s;var u=B({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ct(s),Dt(s,"style",u),ar(s,n.precedence,e),t.instance=s;case"stylesheet":u=us(n.href);var h=e.querySelector(Zs(u));if(h)return t.state.loading|=4,t.instance=h,Ct(h),h;s=nd(n),(u=rn.get(u))&&_l(s,u),h=(e.ownerDocument||e).createElement("link"),Ct(h);var D=h;return D._p=new Promise(function(z,se){D.onload=z,D.onerror=se}),Dt(h,"link",s),t.state.loading|=4,ar(h,n.precedence,e),t.instance=h;case"script":return h=cs(n.src),(u=e.querySelector(ea(h)))?(t.instance=u,Ct(u),u):(s=n,(u=rn.get(h))&&(s=B({},n),yl(s,u)),e=e.ownerDocument||e,u=e.createElement("script"),Ct(u),Dt(u,"link",s),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(s=t.instance,t.state.loading|=4,ar(s,n.precedence,e));return t.instance}function ar(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=s.length?s[s.length-1]:null,h=u,D=0;D<s.length;D++){var z=s[D];if(z.dataset.precedence===t)h=z;else if(h!==u)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function _l(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function yl(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var rr=null;function sd(e,t,n){if(rr===null){var s=new Map,u=rr=new Map;u.set(n,s)}else u=rr,s=u.get(n),s||(s=new Map,u.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),u=0;u<n.length;u++){var h=n[u];if(!(h[ps]||h[it]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var D=h.getAttribute(t)||"";D=e+D;var z=s.get(D);z?z.push(h):s.set(D,[h])}}return s}function ad(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Fp(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function rd(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var ta=null;function Up(){}function jp(e,t,n){if(ta===null)throw Error(a(475));var s=ta;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var u=us(n.href),h=e.querySelector(Zs(u));if(h){e=h._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=or.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=h,Ct(h);return}h=e.ownerDocument||e,n=nd(n),(u=rn.get(u))&&_l(n,u),h=h.createElement("link"),Ct(h);var D=h;D._p=new Promise(function(z,se){D.onload=z,D.onerror=se}),Dt(h,"link",n),t.instance=h}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(s.count++,t=or.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ip(){if(ta===null)throw Error(a(475));var e=ta;return e.stylesheets&&e.count===0&&bl(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&bl(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function or(){if(this.count--,this.count===0){if(this.stylesheets)bl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lr=null;function bl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lr=new Map,t.forEach(Bp,e),lr=null,or.call(e))}function Bp(e,t){if(!(t.state.loading&4)){var n=lr.get(e);if(n)var s=n.get(null);else{n=new Map,lr.set(e,n);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<u.length;h++){var D=u[h];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(n.set(D.dataset.precedence,D),s=D)}s&&n.set(null,s)}u=t.instance,D=u.getAttribute("data-precedence"),h=n.get(D)||s,h===s&&n.set(null,u),n.set(D,u),this.count++,s=or.bind(this),u.addEventListener("load",s),u.addEventListener("error",s),h?h.parentNode.insertBefore(u,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var na={$$typeof:k,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function qp(e,t,n,s,u,h,D,z){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fn(0),this.hiddenUpdates=fn(null),this.identifierPrefix=s,this.onUncaughtError=u,this.onCaughtError=h,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function od(e,t,n,s,u,h,D,z,se,de,Ce,xe){return e=new qp(e,t,n,D,z,se,de,xe),t=1,h===!0&&(t|=24),h=sn(3,null,null,t),e.current=h,h.stateNode=e,t=Wr(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:s,isDehydrated:n,cache:t},Mo(h),e}function ld(e){return e?(e=Hi,e):Hi}function ud(e,t,n,s,u,h){u=ld(u),s.context===null?s.context=u:s.pendingContext=u,s=Yn(t),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=Xn(e,s,t),n!==null&&(Ft(n,e,t),Is(n,e,t))}function cd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vl(e,t){cd(e,t),(e=e.alternate)&&cd(e,t)}function hd(e){if(e.tag===13){var t=Bn(e,67108864);t!==null&&Ft(t,e,67108864),vl(e,67108864)}}var ur=!0;function Hp(e,t,n,s){var u=C.T;C.T=null;var h=w.p;try{w.p=2,El(e,t,n,s)}finally{w.p=h,C.T=u}}function zp(e,t,n,s){var u=C.T;C.T=null;var h=w.p;try{w.p=8,El(e,t,n,s)}finally{w.p=h,C.T=u}}function El(e,t,n,s){if(ur){var u=Al(s);if(u===null)ul(e,t,s,cr,n),fd(e,s);else if($p(u,e,t,n,s))s.stopPropagation();else if(fd(e,s),t&4&&-1<Gp.indexOf(e)){for(;u!==null;){var h=Mi(u);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var D=Je(h.pendingLanes);if(D!==0){var z=h;for(z.pendingLanes|=2,z.entangledLanes|=2;D;){var se=1<<31-yt(D);z.entanglements[1]|=se,D&=~se}bn(h),!(ht&6)&&(Ya=ye()+500,Ws(0))}}break;case 13:z=Bn(h,2),z!==null&&Ft(z,h,2),Wa(),vl(h,2)}if(h=Al(s),h===null&&ul(e,t,s,cr,n),h===u)break;u=h}u!==null&&s.stopPropagation()}else ul(e,t,s,null,n)}}function Al(e){return e=Rr(e),Sl(e)}var cr=null;function Sl(e){if(cr=null,e=li(e),e!==null){var t=ne(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=ae(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cr=e,null}function dd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Le:return 2;case De:return 8;case je:case Ze:return 32;case st:return 268435456;default:return 32}default:return 32}}var Tl=!1,ti=null,ni=null,ii=null,ia=new Map,sa=new Map,si=[],Gp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fd(e,t){switch(e){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":ia.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(t.pointerId)}}function aa(e,t,n,s,u,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:h,targetContainers:[u]},t!==null&&(t=Mi(t),t!==null&&hd(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function $p(e,t,n,s,u){switch(t){case"focusin":return ti=aa(ti,e,t,n,s,u),!0;case"dragenter":return ni=aa(ni,e,t,n,s,u),!0;case"mouseover":return ii=aa(ii,e,t,n,s,u),!0;case"pointerover":var h=u.pointerId;return ia.set(h,aa(ia.get(h)||null,e,t,n,s,u)),!0;case"gotpointercapture":return h=u.pointerId,sa.set(h,aa(sa.get(h)||null,e,t,n,s,u)),!0}return!1}function pd(e){var t=li(e.target);if(t!==null){var n=ne(t);if(n!==null){if(t=n.tag,t===13){if(t=ae(n),t!==null){e.blockedOn=t,fs(e.priority,function(){if(n.tag===13){var s=Vt(),u=Bn(n,s);u!==null&&Ft(u,n,s),vl(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Al(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);wr=s,n.target.dispatchEvent(s),wr=null}else return t=Mi(n),t!==null&&hd(t),e.blockedOn=n,!1;t.shift()}return!0}function gd(e,t,n){hr(e)&&n.delete(t)}function Vp(){Tl=!1,ti!==null&&hr(ti)&&(ti=null),ni!==null&&hr(ni)&&(ni=null),ii!==null&&hr(ii)&&(ii=null),ia.forEach(gd),sa.forEach(gd)}function dr(e,t){e.blockedOn===t&&(e.blockedOn=null,Tl||(Tl=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Vp)))}var fr=null;function md(e){fr!==e&&(fr=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){fr===e&&(fr=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],u=e[t+2];if(typeof s!="function"){if(Sl(s||n)===null)continue;break}var h=Mi(n);h!==null&&(e.splice(t,3),t-=3,fo(h,{pending:!0,data:u,method:n.method,action:s},s,u))}}))}function ra(e){function t(se){return dr(se,e)}ti!==null&&dr(ti,e),ni!==null&&dr(ni,e),ii!==null&&dr(ii,e),ia.forEach(t),sa.forEach(t);for(var n=0;n<si.length;n++){var s=si[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<si.length&&(n=si[0],n.blockedOn===null);)pd(n),n.blockedOn===null&&si.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var u=n[s],h=n[s+1],D=u[bt]||null;if(typeof h=="function")D||md(n);else if(D){var z=null;if(h&&h.hasAttribute("formAction")){if(u=h,D=h[bt]||null)z=D.formAction;else if(Sl(u)!==null)continue}else z=D.action;typeof z=="function"?n[s+1]=z:(n.splice(s,3),s-=3),md(n)}}}function Cl(e){this._internalRoot=e}pr.prototype.render=Cl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var n=t.current,s=Vt();ud(n,s,e,t,null,null)},pr.prototype.unmount=Cl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&as(),ud(e.current,2,null,e,null,null),Wa(),t[pn]=null}};function pr(e){this._internalRoot=e}pr.prototype.unstable_scheduleHydration=function(e){if(e){var t=ki();e={blockedOn:null,target:e,priority:t};for(var n=0;n<si.length&&t!==0&&t<si[n].priority;n++);si.splice(n,0,e),n===0&&pd(e)}};var _d=i.version;if(_d!=="19.0.0")throw Error(a(527,_d,"19.0.0"));w.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=re(t),e=e!==null?Y(e):null,e=e===null?null:e.stateNode,e};var Yp={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:C,findFiberByHostInstance:li,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gr.isDisabled&&gr.supportsFiber)try{Ve=gr.inject(Yp),ze=gr}catch{}}return reactDomClient_production.createRoot=function(e,t){if(!l(e))throw Error(a(299));var n=!1,s="",u=Lc,h=Nc,D=Fc,z=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(D=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(z=t.unstable_transitionCallbacks)),t=od(e,1,!1,null,null,n,s,u,h,D,z,null),e[pn]=t.current,ll(e.nodeType===8?e.parentNode:e),new Cl(t)},reactDomClient_production.hydrateRoot=function(e,t,n){if(!l(e))throw Error(a(299));var s=!1,u="",h=Lc,D=Nc,z=Fc,se=null,de=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(D=n.onCaughtError),n.onRecoverableError!==void 0&&(z=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(se=n.unstable_transitionCallbacks),n.formState!==void 0&&(de=n.formState)),t=od(e,1,!0,t,n??null,s,u,h,D,z,se,de),t.context=ld(null),n=t.current,s=Vt(),u=Yn(s),u.callback=null,Xn(n,u,s),t.current.lanes=s,jt(t,s),bn(t),e[pn]=t.current,ll(e),new pr(t)},reactDomClient_production.version="19.0.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(i){console.error(i)}}return o(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.parse=p,dist.serialize=d;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,c=(()=>{const O=function(){};return O.prototype=Object.create(null),O})();function p(O,k){const E=new c,f=O.length;if(f<2)return E;const g=(k==null?void 0:k.decode)||v;let T=0;do{const U=O.indexOf("=",T);if(U===-1)break;const N=O.indexOf(";",T),M=N===-1?f:N;if(U>M){T=O.lastIndexOf(";",U-1)+1;continue}const y=S(O,T,U),A=_(O,U,y),m=O.slice(y,A);if(E[m]===void 0){let R=S(O,U+1,M),C=_(O,M,R);const B=g(O.slice(R,C));E[m]=B}T=M+1}while(T<f);return E}function S(O,k,E){do{const f=O.charCodeAt(k);if(f!==32&&f!==9)return k}while(++k<E);return E}function _(O,k,E){for(;k>E;){const f=O.charCodeAt(--k);if(f!==32&&f!==9)return k+1}return E}function d(O,k,E){const f=(E==null?void 0:E.encode)||encodeURIComponent;if(!o.test(O))throw new TypeError(`argument name is invalid: ${O}`);const g=f(k);if(!i.test(g))throw new TypeError(`argument val is invalid: ${k}`);let T=O+"="+g;if(!E)return T;if(E.maxAge!==void 0){if(!Number.isInteger(E.maxAge))throw new TypeError(`option maxAge is invalid: ${E.maxAge}`);T+="; Max-Age="+E.maxAge}if(E.domain){if(!r.test(E.domain))throw new TypeError(`option domain is invalid: ${E.domain}`);T+="; Domain="+E.domain}if(E.path){if(!a.test(E.path))throw new TypeError(`option path is invalid: ${E.path}`);T+="; Path="+E.path}if(E.expires){if(!P(E.expires)||!Number.isFinite(E.expires.valueOf()))throw new TypeError(`option expires is invalid: ${E.expires}`);T+="; Expires="+E.expires.toUTCString()}if(E.httpOnly&&(T+="; HttpOnly"),E.secure&&(T+="; Secure"),E.partitioned&&(T+="; Partitioned"),E.priority)switch(typeof E.priority=="string"?E.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${E.priority}`)}if(E.sameSite)switch(typeof E.sameSite=="string"?E.sameSite.toLowerCase():E.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${E.sameSite}`)}return T}function v(O){if(O.indexOf("%")===-1)return O;try{return decodeURIComponent(O)}catch{return O}}function P(O){return l.call(O)==="[object Date]"}return dist}requireDist();/**
 * react-router v7.1.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(o={}){function i(a,l){let{pathname:c,search:p,hash:S}=a.location;return createLocation("",{pathname:c,search:p,hash:S},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(a,l){return typeof l=="string"?l:createPath(l)}return getUrlBasedHistory(i,r,null,o)}function invariant(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function warning(o,i){if(!o){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(o,i){return{usr:o.state,key:o.key,idx:i}}function createLocation(o,i,r=null,a){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof i=="string"?parsePath(i):i,state:r,key:i&&i.key||a||createKey()}}function createPath({pathname:o="/",search:i="",hash:r=""}){return i&&i!=="?"&&(o+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(o+=r.charAt(0)==="#"?r:"#"+r),o}function parsePath(o){let i={};if(o){let r=o.indexOf("#");r>=0&&(i.hash=o.substring(r),o=o.substring(0,r));let a=o.indexOf("?");a>=0&&(i.search=o.substring(a),o=o.substring(0,a)),o&&(i.pathname=o)}return i}function getUrlBasedHistory(o,i,r,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,p=l.history,S="POP",_=null,d=v();d==null&&(d=0,p.replaceState({...p.state,idx:d},""));function v(){return(p.state||{idx:null}).idx}function P(){S="POP";let g=v(),T=g==null?null:g-d;d=g,_&&_({action:S,location:f.location,delta:T})}function O(g,T){S="PUSH";let U=createLocation(f.location,g,T);d=v()+1;let N=getHistoryState(U,d),M=f.createHref(U);try{p.pushState(N,"",M)}catch(y){if(y instanceof DOMException&&y.name==="DataCloneError")throw y;l.location.assign(M)}c&&_&&_({action:S,location:f.location,delta:1})}function k(g,T){S="REPLACE";let U=createLocation(f.location,g,T);d=v();let N=getHistoryState(U,d),M=f.createHref(U);p.replaceState(N,"",M),c&&_&&_({action:S,location:f.location,delta:0})}function E(g){let T=l.location.origin!=="null"?l.location.origin:l.location.href,U=typeof g=="string"?g:createPath(g);return U=U.replace(/ $/,"%20"),invariant(T,`No window.location.(origin|href) available to create URL for href: ${U}`),new URL(U,T)}let f={get action(){return S},get location(){return o(l,p)},listen(g){if(_)throw new Error("A history only accepts one active listener");return l.addEventListener(PopStateEventType,P),_=g,()=>{l.removeEventListener(PopStateEventType,P),_=null}},createHref(g){return i(l,g)},createURL:E,encodeLocation(g){let T=E(g);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:O,replace:k,go(g){return p.go(g)}};return f}function matchRoutes(o,i,r="/"){return matchRoutesImpl(o,i,r,!1)}function matchRoutesImpl(o,i,r,a){let l=typeof i=="string"?parsePath(i):i,c=stripBasename(l.pathname||"/",r);if(c==null)return null;let p=flattenRoutes(o);rankRouteBranches(p);let S=null;for(let _=0;S==null&&_<p.length;++_){let d=decodePath(c);S=matchRouteBranch(p[_],d,a)}return S}function flattenRoutes(o,i=[],r=[],a=""){let l=(c,p,S)=>{let _={relativePath:S===void 0?c.path||"":S,caseSensitive:c.caseSensitive===!0,childrenIndex:p,route:c};_.relativePath.startsWith("/")&&(invariant(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length));let d=joinPaths([a,_.relativePath]),v=r.concat(_);c.children&&c.children.length>0&&(invariant(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),flattenRoutes(c.children,i,v,d)),!(c.path==null&&!c.index)&&i.push({path:d,score:computeScore(d,c.index),routesMeta:v})};return o.forEach((c,p)=>{var S;if(c.path===""||!((S=c.path)!=null&&S.includes("?")))l(c,p);else for(let _ of explodeOptionalSegments(c.path))l(c,p,_)}),i}function explodeOptionalSegments(o){let i=o.split("/");if(i.length===0)return[];let[r,...a]=i,l=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let p=explodeOptionalSegments(a.join("/")),S=[];return S.push(...p.map(_=>_===""?c:[c,_].join("/"))),l&&S.push(...p),S.map(_=>o.startsWith("/")&&_===""?"/":_)}function rankRouteBranches(o){o.sort((i,r)=>i.score!==r.score?r.score-i.score:compareIndexes(i.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=o=>o==="*";function computeScore(o,i){let r=o.split("/"),a=r.length;return r.some(isSplat)&&(a+=splatPenalty),i&&(a+=indexRouteValue),r.filter(l=>!isSplat(l)).reduce((l,c)=>l+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(o,i){return o.length===i.length&&o.slice(0,-1).every((a,l)=>a===i[l])?o[o.length-1]-i[i.length-1]:0}function matchRouteBranch(o,i,r=!1){let{routesMeta:a}=o,l={},c="/",p=[];for(let S=0;S<a.length;++S){let _=a[S],d=S===a.length-1,v=c==="/"?i:i.slice(c.length)||"/",P=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:d},v),O=_.route;if(!P&&d&&r&&!a[a.length-1].route.index&&(P=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},v)),!P)return null;Object.assign(l,P.params),p.push({params:l,pathname:joinPaths([c,P.pathname]),pathnameBase:normalizePathname(joinPaths([c,P.pathnameBase])),route:O}),P.pathnameBase!=="/"&&(c=joinPaths([c,P.pathnameBase]))}return p}function matchPath(o,i){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[r,a]=compilePath(o.path,o.caseSensitive,o.end),l=i.match(r);if(!l)return null;let c=l[0],p=c.replace(/(.)\/+$/,"$1"),S=l.slice(1);return{params:a.reduce((d,{paramName:v,isOptional:P},O)=>{if(v==="*"){let E=S[O]||"";p=c.slice(0,c.length-E.length).replace(/(.)\/+$/,"$1")}const k=S[O];return P&&!k?d[v]=void 0:d[v]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:c,pathnameBase:p,pattern:o}}function compilePath(o,i=!1,r=!0){warning(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let a=[],l="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,S,_)=>(a.push({paramName:S,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(a.push({paramName:"*"}),l+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":o!==""&&o!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,i?void 0:"i"),a]}function decodePath(o){try{return o.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return warning(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),o}}function stripBasename(o,i){if(i==="/")return o;if(!o.toLowerCase().startsWith(i.toLowerCase()))return null;let r=i.endsWith("/")?i.length-1:i.length,a=o.charAt(r);return a&&a!=="/"?null:o.slice(r)||"/"}function resolvePath(o,i="/"){let{pathname:r,search:a="",hash:l=""}=typeof o=="string"?parsePath(o):o;return{pathname:r?r.startsWith("/")?r:resolvePathname(r,i):i,search:normalizeSearch(a),hash:normalizeHash(l)}}function resolvePathname(o,i){let r=i.replace(/\/+$/,"").split("/");return o.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function getInvalidPathError(o,i,r,a){return`Cannot include a '${o}' character in a manually specified \`to.${i}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(o){return o.filter((i,r)=>r===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(o){let i=getPathContributingMatches(o);return i.map((r,a)=>a===i.length-1?r.pathname:r.pathnameBase)}function resolveTo(o,i,r,a=!1){let l;typeof o=="string"?l=parsePath(o):(l={...o},invariant(!l.pathname||!l.pathname.includes("?"),getInvalidPathError("?","pathname","search",l)),invariant(!l.pathname||!l.pathname.includes("#"),getInvalidPathError("#","pathname","hash",l)),invariant(!l.search||!l.search.includes("#"),getInvalidPathError("#","search","hash",l)));let c=o===""||l.pathname==="",p=c?"/":l.pathname,S;if(p==null)S=r;else{let P=i.length-1;if(!a&&p.startsWith("..")){let O=p.split("/");for(;O[0]==="..";)O.shift(),P-=1;l.pathname=O.join("/")}S=P>=0?i[P]:"/"}let _=resolvePath(l,S),d=p&&p!=="/"&&p.endsWith("/"),v=(c||p===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(d||v)&&(_.pathname+="/"),_}var joinPaths=o=>o.join("/").replace(/\/\/+/g,"/"),normalizePathname=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,normalizeHash=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function isRouteErrorResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(o,{relative:i}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:a}=reactExports.useContext(NavigationContext),{hash:l,pathname:c,search:p}=useResolvedPath(o,{relative:i}),S=c;return r!=="/"&&(S=c==="/"?r:joinPaths([r,c])),a.createHref({pathname:S,search:p,hash:l})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(o){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(o)}function useNavigate(){let{isDataRoute:o}=reactExports.useContext(RouteContext);return o?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let o=reactExports.useContext(DataRouterContext),{basename:i,navigator:r}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),c=JSON.stringify(getResolveToMatches(a)),p=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{p.current=!0}),reactExports.useCallback((_,d={})=>{if(warning(p.current,navigateEffectWarning),!p.current)return;if(typeof _=="number"){r.go(_);return}let v=resolveTo(_,JSON.parse(c),l,d.relative==="path");o==null&&i!=="/"&&(v.pathname=v.pathname==="/"?i:joinPaths([i,v.pathname])),(d.replace?r.replace:r.push)(v,d.state,d)},[i,r,c,l,o])}reactExports.createContext(null);function useResolvedPath(o,{relative:i}={}){let{matches:r}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),l=JSON.stringify(getResolveToMatches(r));return reactExports.useMemo(()=>resolveTo(o,JSON.parse(l),a,i==="path"),[o,l,a,i])}function useRoutesImpl(o,i,r,a){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:c}=reactExports.useContext(NavigationContext),{matches:p}=reactExports.useContext(RouteContext),S=p[p.length-1],_=S?S.params:{},d=S?S.pathname:"/",v=S?S.pathnameBase:"/",P=S&&S.route;{let U=P&&P.path||"";warningOnce(d,!P||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let O=useLocation(),k;k=O;let E=k.pathname||"/",f=E;if(v!=="/"){let U=v.replace(/^\//,"").split("/");f="/"+E.replace(/^\//,"").split("/").slice(U.length).join("/")}let g=!c&&r&&r.matches&&r.matches.length>0?r.matches:matchRoutes(o,{pathname:f});return warning(P||g!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),warning(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(g&&g.map(U=>Object.assign({},U,{params:Object.assign({},_,U.params),pathname:joinPaths([v,l.encodeLocation?l.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?v:joinPaths([v,l.encodeLocation?l.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),p,r,a)}function DefaultErrorComponent(){let o=useRouteError(),i=isRouteErrorResponse(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),r=o instanceof Error?o.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},p=null;return console.error("Error handled by React Router default ErrorBoundary:",o),p=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:c},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:c},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),r?reactExports.createElement("pre",{style:l},r):null,p)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,i){return i.location!==o.location||i.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:i.error,location:i.location,revalidation:o.revalidation||i.revalidation}}componentDidCatch(o,i){console.error("React Router caught the following error during render",o,i)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:o,match:i,children:r}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports.createElement(RouteContext.Provider,{value:o},r)}function _renderMatches(o,i=[],r=null,a=null){if(o==null){if(!r)return null;if(r.errors)o=r.matches;else if(i.length===0&&!r.initialized&&r.matches.length>0)o=r.matches;else return null}let l=o,c=r==null?void 0:r.errors;if(c!=null){let _=l.findIndex(d=>d.route.id&&(c==null?void 0:c[d.route.id])!==void 0);invariant(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let p=!1,S=-1;if(r)for(let _=0;_<l.length;_++){let d=l[_];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(S=_),d.route.id){let{loaderData:v,errors:P}=r,O=d.route.loader&&!v.hasOwnProperty(d.route.id)&&(!P||P[d.route.id]===void 0);if(d.route.lazy||O){p=!0,S>=0?l=l.slice(0,S+1):l=[l[0]];break}}}return l.reduceRight((_,d,v)=>{let P,O=!1,k=null,E=null;r&&(P=c&&d.route.id?c[d.route.id]:void 0,k=d.route.errorElement||defaultErrorElement,p&&(S<0&&v===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,E=null):S===v&&(O=!0,E=d.route.hydrateFallbackElement||null)));let f=i.concat(l.slice(0,v+1)),g=()=>{let T;return P?T=k:O?T=E:d.route.Component?T=reactExports.createElement(d.route.Component,null):d.route.element?T=d.route.element:T=_,reactExports.createElement(RenderedRoute,{match:d,routeContext:{outlet:_,matches:f,isDataRoute:r!=null},children:T})};return r&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?reactExports.createElement(RenderErrorBoundary,{location:r.location,revalidation:r.revalidation,component:k,error:P,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}function getDataRouterConsoleError(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(o){let i=reactExports.useContext(DataRouterContext);return invariant(i,getDataRouterConsoleError(o)),i}function useDataRouterState(o){let i=reactExports.useContext(DataRouterStateContext);return invariant(i,getDataRouterConsoleError(o)),i}function useRouteContext(o){let i=reactExports.useContext(RouteContext);return invariant(i,getDataRouterConsoleError(o)),i}function useCurrentRouteId(o){let i=useRouteContext(o),r=i.matches[i.matches.length-1];return invariant(r.route.id,`${o} can only be used on routes that contain a unique "id"`),r.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var a;let o=reactExports.useContext(RouteErrorContext),i=useDataRouterState("useRouteError"),r=useCurrentRouteId("useRouteError");return o!==void 0?o:(a=i.errors)==null?void 0:a[r]}function useNavigateStable(){let{router:o}=useDataRouterContext("useNavigate"),i=useCurrentRouteId("useNavigate"),r=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{r.current=!0}),reactExports.useCallback(async(l,c={})=>{warning(r.current,navigateEffectWarning),r.current&&(typeof l=="number"?o.navigate(l):await o.navigate(l,{fromRouteId:i,...c}))},[o,i])}var alreadyWarned={};function warningOnce(o,i,r){!i&&!alreadyWarned[o]&&(alreadyWarned[o]=!0,warning(!1,r))}reactExports.memo(DataRoutes);function DataRoutes({routes:o,future:i,state:r}){return useRoutesImpl(o,void 0,r,i)}function Router({basename:o="/",children:i=null,location:r,navigationType:a="POP",navigator:l,static:c=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=o.replace(/^\/*/,"/"),S=reactExports.useMemo(()=>({basename:p,navigator:l,static:c,future:{}}),[p,l,c]);typeof r=="string"&&(r=parsePath(r));let{pathname:_="/",search:d="",hash:v="",state:P=null,key:O="default"}=r,k=reactExports.useMemo(()=>{let E=stripBasename(_,p);return E==null?null:{location:{pathname:E,search:d,hash:v,state:P,key:O},navigationType:a}},[p,_,d,v,P,O,a]);return warning(k!=null,`<Router basename="${p}"> is not able to match the URL "${_}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:reactExports.createElement(NavigationContext.Provider,{value:S},reactExports.createElement(LocationContext.Provider,{children:i,value:k}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(o){return o!=null&&typeof o.tagName=="string"}function isButtonElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="button"}function isFormElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="form"}function isInputElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="input"}function isModifiedEvent(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function shouldProcessLinkClick(o,i){return o.button===0&&(!i||i==="_self")&&!isModifiedEvent(o)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(o){return o!=null&&!supportedFormEncTypes.has(o)?(warning(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):o}function getFormSubmissionInfo(o,i){let r,a,l,c,p;if(isFormElement(o)){let S=o.getAttribute("action");a=S?stripBasename(S,i):null,r=o.getAttribute("method")||defaultMethod,l=getFormEncType(o.getAttribute("enctype"))||defaultEncType,c=new FormData(o)}else if(isButtonElement(o)||isInputElement(o)&&(o.type==="submit"||o.type==="image")){let S=o.form;if(S==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let _=o.getAttribute("formaction")||S.getAttribute("action");if(a=_?stripBasename(_,i):null,r=o.getAttribute("formmethod")||S.getAttribute("method")||defaultMethod,l=getFormEncType(o.getAttribute("formenctype"))||getFormEncType(S.getAttribute("enctype"))||defaultEncType,c=new FormData(S,o),!isFormDataSubmitterSupported()){let{name:d,type:v,value:P}=o;if(v==="image"){let O=d?`${d}.`:"";c.append(`${O}x`,"0"),c.append(`${O}y`,"0")}else d&&c.append(d,P)}}else{if(isHtmlElement(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=defaultMethod,a=null,l=defaultEncType,p=o}return c&&l==="text/plain"&&(p=c,c=void 0),{action:a,method:r.toLowerCase(),encType:l,formData:c,body:p}}function invariant2(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}async function loadRouteModule(o,i){if(o.id in i)return i[o.id];try{let r=await import(o.module);return i[o.id]=r,r}catch(r){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function getKeyedPrefetchLinks(o,i,r){let a=await Promise.all(o.map(async l=>{let c=i.routes[l.route.id];if(c){let p=await loadRouteModule(c,r);return p.links?p.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function getNewMatchesForLinks(o,i,r,a,l,c){let p=(_,d)=>r[d]?_.route.id!==r[d].route.id:!0,S=(_,d)=>{var v;return r[d].pathname!==_.pathname||((v=r[d].route.path)==null?void 0:v.endsWith("*"))&&r[d].params["*"]!==_.params["*"]};return c==="assets"?i.filter((_,d)=>p(_,d)||S(_,d)):c==="data"?i.filter((_,d)=>{var P;let v=a.routes[_.route.id];if(!v||!v.hasLoader)return!1;if(p(_,d)||S(_,d))return!0;if(_.route.shouldRevalidate){let O=_.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((P=r[0])==null?void 0:P.params)||{},nextUrl:new URL(o,window.origin),nextParams:_.params,defaultShouldRevalidate:!0});if(typeof O=="boolean")return O}return!0}):[]}function getModuleLinkHrefs(o,i){return dedupeHrefs(o.map(r=>{let a=i.routes[r.route.id];if(!a)return[];let l=[a.module];return a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function dedupeHrefs(o){return[...new Set(o)]}function sortKeys(o){let i={},r=Object.keys(o).sort();for(let a of r)i[a]=o[a];return i}function dedupeLinkDescriptors(o,i){let r=new Set;return new Set(i),o.reduce((a,l)=>{let c=JSON.stringify(sortKeys(l));return r.has(c)||(r.add(c),a.push({key:c,link:l})),a},[])}function singleFetchUrl(o){let i=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return i.pathname==="/"?i.pathname="_root.data":i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function useDataRouterContext2(){let o=reactExports.useContext(DataRouterContext);return invariant2(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function useDataRouterStateContext(){let o=reactExports.useContext(DataRouterStateContext);return invariant2(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let o=reactExports.useContext(FrameworkContext);return invariant2(o,"You must render this element inside a <HydratedRouter> element"),o}function usePrefetchBehavior(o,i){let r=reactExports.useContext(FrameworkContext),[a,l]=reactExports.useState(!1),[c,p]=reactExports.useState(!1),{onFocus:S,onBlur:_,onMouseEnter:d,onMouseLeave:v,onTouchStart:P}=i,O=reactExports.useRef(null);reactExports.useEffect(()=>{if(o==="render"&&p(!0),o==="viewport"){let f=T=>{T.forEach(U=>{p(U.isIntersecting)})},g=new IntersectionObserver(f,{threshold:.5});return O.current&&g.observe(O.current),()=>{g.disconnect()}}},[o]),reactExports.useEffect(()=>{if(a){let f=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(f)}}},[a]);let k=()=>{l(!0)},E=()=>{l(!1),p(!1)};return r?o!=="intent"?[c,O,{}]:[c,O,{onFocus:composeEventHandlers(S,k),onBlur:composeEventHandlers(_,E),onMouseEnter:composeEventHandlers(d,k),onMouseLeave:composeEventHandlers(v,E),onTouchStart:composeEventHandlers(P,k)}]:[!1,O,{}]}function composeEventHandlers(o,i){return r=>{o&&o(r),r.defaultPrevented||i(r)}}function PrefetchPageLinks({page:o,...i}){let{router:r}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(r.routes,o,r.basename),[r.routes,o,r.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:o,matches:a,...i}):null}function useKeyedPrefetchLinks(o){let{manifest:i,routeModules:r}=useFrameworkContext(),[a,l]=reactExports.useState([]);return reactExports.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(o,i,r).then(p=>{c||l(p)}),()=>{c=!0}},[o,i,r]),a}function PrefetchPageLinksImpl({page:o,matches:i,...r}){let a=useLocation(),{manifest:l,routeModules:c}=useFrameworkContext(),{loaderData:p,matches:S}=useDataRouterStateContext(),_=reactExports.useMemo(()=>getNewMatchesForLinks(o,i,S,l,a,"data"),[o,i,S,l,a]),d=reactExports.useMemo(()=>getNewMatchesForLinks(o,i,S,l,a,"assets"),[o,i,S,l,a]),v=reactExports.useMemo(()=>{if(o===a.pathname+a.search+a.hash)return[];let k=new Set,E=!1;if(i.forEach(g=>{var U;let T=l.routes[g.route.id];!T||!T.hasLoader||(!_.some(N=>N.route.id===g.route.id)&&g.route.id in p&&((U=c[g.route.id])!=null&&U.shouldRevalidate)||T.hasClientLoader?E=!0:k.add(g.route.id))}),k.size===0)return[];let f=singleFetchUrl(o);return E&&k.size>0&&f.searchParams.set("_routes",i.filter(g=>k.has(g.route.id)).map(g=>g.route.id).join(",")),[f.pathname+f.search]},[p,a,l,_,i,o,c]),P=reactExports.useMemo(()=>getModuleLinkHrefs(d,l),[d,l]),O=useKeyedPrefetchLinks(d);return reactExports.createElement(reactExports.Fragment,null,v.map(k=>reactExports.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...r})),P.map(k=>reactExports.createElement("link",{key:k,rel:"modulepreload",href:k,...r})),O.map(({key:k,link:E})=>reactExports.createElement("link",{key:k,...E})))}function mergeRefs(...o){return i=>{o.forEach(r=>{typeof r=="function"?r(i):r!=null&&(r.current=i)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.1.4")}catch{}function BrowserRouter({basename:o,children:i,window:r}){let a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:r,v5Compat:!0}));let l=a.current,[c,p]=reactExports.useState({action:l.action,location:l.location}),S=reactExports.useCallback(_=>{reactExports.startTransition(()=>p(_))},[p]);return reactExports.useLayoutEffect(()=>l.listen(S),[l,S]),reactExports.createElement(Router,{basename:o,children:i,location:c.location,navigationType:c.action,navigator:l})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:i,discover:r="render",prefetch:a="none",relative:l,reloadDocument:c,replace:p,state:S,target:_,to:d,preventScrollReset:v,viewTransition:P,...O},k){let{basename:E}=reactExports.useContext(NavigationContext),f=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),g,T=!1;if(typeof d=="string"&&f&&(g=d,isBrowser$1))try{let C=new URL(window.location.href),B=d.startsWith("//")?new URL(C.protocol+d):new URL(d),V=stripBasename(B.pathname,E);B.origin===C.origin&&V!=null?d=V+B.search+B.hash:T=!0}catch{warning(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let U=useHref(d,{relative:l}),[N,M,y]=usePrefetchBehavior(a,O),A=useLinkClickHandler(d,{replace:p,state:S,target:_,preventScrollReset:v,relative:l,viewTransition:P});function m(C){i&&i(C),C.defaultPrevented||A(C)}let R=reactExports.createElement("a",{...O,...y,href:g||U,onClick:T||c?i:m,ref:mergeRefs(k,M),target:_,"data-discover":!f&&r==="render"?"true":void 0});return N&&!f?reactExports.createElement(reactExports.Fragment,null,R,reactExports.createElement(PrefetchPageLinks,{page:U})):R});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":i="page",caseSensitive:r=!1,className:a="",end:l=!1,style:c,to:p,viewTransition:S,children:_,...d},v){let P=useResolvedPath(p,{relative:d.relative}),O=useLocation(),k=reactExports.useContext(DataRouterStateContext),{navigator:E,basename:f}=reactExports.useContext(NavigationContext),g=k!=null&&useViewTransitionState(P)&&S===!0,T=E.encodeLocation?E.encodeLocation(P).pathname:P.pathname,U=O.pathname,N=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;r||(U=U.toLowerCase(),N=N?N.toLowerCase():null,T=T.toLowerCase()),N&&f&&(N=stripBasename(N,f)||N);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let y=U===T||!l&&U.startsWith(T)&&U.charAt(M)==="/",A=N!=null&&(N===T||!l&&N.startsWith(T)&&N.charAt(T.length)==="/"),m={isActive:y,isPending:A,isTransitioning:g},R=y?i:void 0,C;typeof a=="function"?C=a(m):C=[a,y?"active":null,A?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let B=typeof c=="function"?c(m):c;return reactExports.createElement(Link,{...d,"aria-current":R,className:C,ref:v,style:B,to:p,viewTransition:S},typeof _=="function"?_(m):_)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:o="render",fetcherKey:i,navigate:r,reloadDocument:a,replace:l,state:c,method:p=defaultMethod,action:S,onSubmit:_,relative:d,preventScrollReset:v,viewTransition:P,...O},k)=>{let E=useSubmit(),f=useFormAction(S,{relative:d}),g=p.toLowerCase()==="get"?"get":"post",T=typeof S=="string"&&ABSOLUTE_URL_REGEX2.test(S),U=N=>{if(_&&_(N),N.defaultPrevented)return;N.preventDefault();let M=N.nativeEvent.submitter,y=(M==null?void 0:M.getAttribute("formmethod"))||p;E(M||N.currentTarget,{fetcherKey:i,method:y,navigate:r,replace:l,state:c,relative:d,preventScrollReset:v,viewTransition:P})};return reactExports.createElement("form",{ref:k,method:g,action:f,onSubmit:a?_:U,...O,"data-discover":!T&&o==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(o){let i=reactExports.useContext(DataRouterContext);return invariant(i,getDataRouterConsoleError2(o)),i}function useLinkClickHandler(o,{target:i,replace:r,state:a,preventScrollReset:l,relative:c,viewTransition:p}={}){let S=useNavigate(),_=useLocation(),d=useResolvedPath(o,{relative:c});return reactExports.useCallback(v=>{if(shouldProcessLinkClick(v,i)){v.preventDefault();let P=r!==void 0?r:createPath(_)===createPath(d);S(o,{replace:P,state:a,preventScrollReset:l,relative:c,viewTransition:p})}},[_,S,d,r,a,i,o,l,c,p])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:o}=useDataRouterContext3("useSubmit"),{basename:i}=reactExports.useContext(NavigationContext),r=useRouteId();return reactExports.useCallback(async(a,l={})=>{let{action:c,method:p,encType:S,formData:_,body:d}=getFormSubmissionInfo(a,i);if(l.navigate===!1){let v=l.fetcherKey||getUniqueFetcherId();await o.fetch(v,r,l.action||c,{preventScrollReset:l.preventScrollReset,formData:_,body:d,formMethod:l.method||p,formEncType:l.encType||S,flushSync:l.flushSync})}else await o.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:_,body:d,formMethod:l.method||p,formEncType:l.encType||S,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[o,i,r])}function useFormAction(o,{relative:i}={}){let{basename:r}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...useResolvedPath(o||".",{relative:i})},p=useLocation();if(o==null){c.search=p.search;let S=new URLSearchParams(c.search),_=S.getAll("index");if(_.some(v=>v==="")){S.delete("index"),_.filter(P=>P).forEach(P=>S.append("index",P));let v=S.toString();c.search=v?`?${v}`:""}}return(!o||o===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(c.pathname=c.pathname==="/"?r:joinPaths([r,c.pathname])),createPath(c)}function useViewTransitionState(o,i={}){let r=reactExports.useContext(ViewTransitionContext);invariant(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),l=useResolvedPath(o,{relative:i.relative});if(!r.isTransitioning)return!1;let c=stripBasename(r.currentLocation.pathname,a)||r.currentLocation.pathname,p=stripBasename(r.nextLocation.pathname,a)||r.nextLocation.pathname;return matchPath(l.pathname,p)!=null||matchPath(l.pathname,c)!=null}new TextEncoder;const scriptRel="modulepreload",assetsURL=function(o){return"/"+o},seen={},__vitePreload=function(i,r,a){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),S=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));l=Promise.allSettled(r.map(_=>{if(_=assetsURL(_),_ in seen)return;seen[_]=!0;const d=_.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${v}`))return;const P=document.createElement("link");if(P.rel=d?"stylesheet":scriptRel,d||(P.as="script"),P.crossOrigin="",P.href=_,S&&P.setAttribute("nonce",S),document.head.appendChild(P),d)return new Promise((O,k)=>{P.addEventListener("load",O),P.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${_}`)))})}))}function c(p){const S=new Event("vite:preloadError",{cancelable:!0});if(S.payload=p,window.dispatchEvent(S),!S.defaultPrevented)throw p}return l.then(p=>{for(const S of p||[])S.status==="rejected"&&c(S.reason);return i().catch(c)})},resolveFetch$3=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...r)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},[]).then(({default:a})=>a(...r)):i=fetch,(...r)=>i(...r)};class FunctionsError extends Error{constructor(i,r="FunctionsError",a){super(i),this.name=r,this.context=a}}class FunctionsFetchError extends FunctionsError{constructor(i){super("Failed to send a request to the Edge Function","FunctionsFetchError",i)}}class FunctionsRelayError extends FunctionsError{constructor(i){super("Relay Error invoking the Edge Function","FunctionsRelayError",i)}}class FunctionsHttpError extends FunctionsError{constructor(i){super("Edge Function returned a non-2xx status code","FunctionsHttpError",i)}}var FunctionRegion;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};class FunctionsClient{constructor(i,{headers:r={},customFetch:a,region:l=FunctionRegion.Any}={}){this.url=i,this.headers=r,this.region=l,this.fetch=resolveFetch$3(a)}setAuth(i){this.headers.Authorization=`Bearer ${i}`}invoke(i,r={}){var a;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:p}=r;let S={},{region:_}=r;_||(_=this.region),_&&_!=="any"&&(S["x-region"]=_);let d;p&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",d=p):typeof p=="string"?(S["Content-Type"]="text/plain",d=p):typeof FormData<"u"&&p instanceof FormData?d=p:(S["Content-Type"]="application/json",d=JSON.stringify(p)));const v=yield this.fetch(`${this.url}/${i}`,{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),l),body:d}).catch(E=>{throw new FunctionsFetchError(E)}),P=v.headers.get("x-relay-error");if(P&&P==="true")throw new FunctionsRelayError(v);if(!v.ok)throw new FunctionsHttpError(v);let O=((a=v.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return O==="application/json"?k=yield v.json():O==="application/octet-stream"?k=yield v.blob():O==="text/event-stream"?k=v:O==="multipart/form-data"?k=yield v.formData():k=yield v.text(),{data:k,error:null}}catch(l){return{data:null,error:l}}})}}var cjs={},PostgrestClient$1={},PostgrestQueryBuilder$1={},PostgrestFilterBuilder$1={},PostgrestTransformBuilder$1={},PostgrestBuilder$1={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$1={},hasRequiredPostgrestError;function requirePostgrestError(){if(hasRequiredPostgrestError)return PostgrestError$1;hasRequiredPostgrestError=1,Object.defineProperty(PostgrestError$1,"__esModule",{value:!0});class o extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return PostgrestError$1.default=o,PostgrestError$1}var hasRequiredPostgrestBuilder;function requirePostgrestBuilder(){if(hasRequiredPostgrestBuilder)return PostgrestBuilder$1;hasRequiredPostgrestBuilder=1;var o=PostgrestBuilder$1.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(PostgrestBuilder$1,"__esModule",{value:!0});const i=o(require$$0),r=o(requirePostgrestError());class a{constructor(c){this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=c.headers,this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=c.shouldThrowOnError,this.signal=c.signal,this.isMaybeSingle=c.isMaybeSingle,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,p){return this.headers=Object.assign({},this.headers),this.headers[c]=p,this}then(c,p){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const S=this.fetch;let _=S(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var v,P,O;let k=null,E=null,f=null,g=d.status,T=d.statusText;if(d.ok){if(this.method!=="HEAD"){const y=await d.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?E=y:E=JSON.parse(y))}const N=(v=this.headers.Prefer)===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),M=(P=d.headers.get("content-range"))===null||P===void 0?void 0:P.split("/");N&&M&&M.length>1&&(f=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(k={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,f=null,g=406,T="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const N=await d.text();try{k=JSON.parse(N),Array.isArray(k)&&d.status===404&&(E=[],k=null,g=200,T="OK")}catch{d.status===404&&N===""?(g=204,T="No Content"):k={message:N}}if(k&&this.isMaybeSingle&&(!((O=k==null?void 0:k.details)===null||O===void 0)&&O.includes("0 rows"))&&(k=null,g=200,T="OK"),k&&this.shouldThrowOnError)throw new r.default(k)}return{error:k,data:E,count:f,status:g,statusText:T}});return this.shouldThrowOnError||(_=_.catch(d=>{var v,P,O;return{error:{message:`${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(P=d==null?void 0:d.stack)!==null&&P!==void 0?P:""}`,hint:"",code:`${(O=d==null?void 0:d.code)!==null&&O!==void 0?O:""}`},data:null,count:null,status:0,statusText:""}})),_.then(c,p)}}return PostgrestBuilder$1.default=a,PostgrestBuilder$1}var hasRequiredPostgrestTransformBuilder;function requirePostgrestTransformBuilder(){if(hasRequiredPostgrestTransformBuilder)return PostgrestTransformBuilder$1;hasRequiredPostgrestTransformBuilder=1;var o=PostgrestTransformBuilder$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestTransformBuilder$1,"__esModule",{value:!0});const i=o(requirePostgrestBuilder());class r extends i.default{select(l){let c=!1;const p=(l??"*").split("").map(S=>/\s/.test(S)&&!c?"":(S==='"'&&(c=!c),S)).join("");return this.url.searchParams.set("select",p),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(l,{ascending:c=!0,nullsFirst:p,foreignTable:S,referencedTable:_=S}={}){const d=_?`${_}.order`:"order",v=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${v?`${v},`:""}${l}.${c?"asc":"desc"}${p===void 0?"":p?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:p=c}={}){const S=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(S,`${l}`),this}range(l,c,{foreignTable:p,referencedTable:S=p}={}){const _=typeof S>"u"?"offset":`${S}.offset`,d=typeof S>"u"?"limit":`${S}.limit`;return this.url.searchParams.set(_,`${l}`),this.url.searchParams.set(d,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:l=!1,verbose:c=!1,settings:p=!1,buffers:S=!1,wal:_=!1,format:d="text"}={}){var v;const P=[l?"analyze":null,c?"verbose":null,p?"settings":null,S?"buffers":null,_?"wal":null].filter(Boolean).join("|"),O=(v=this.headers.Accept)!==null&&v!==void 0?v:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${O}"; options=${P};`,d==="json"?this:this}rollback(){var l;return((l=this.headers.Prefer)!==null&&l!==void 0?l:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return PostgrestTransformBuilder$1.default=r,PostgrestTransformBuilder$1}var hasRequiredPostgrestFilterBuilder;function requirePostgrestFilterBuilder(){if(hasRequiredPostgrestFilterBuilder)return PostgrestFilterBuilder$1;hasRequiredPostgrestFilterBuilder=1;var o=PostgrestFilterBuilder$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestFilterBuilder$1,"__esModule",{value:!0});const i=o(requirePostgrestTransformBuilder());class r extends i.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const p=Array.from(new Set(c)).map(S=>typeof S=="string"&&new RegExp("[,()]").test(S)?`"${S}"`:`${S}`).join(",");return this.url.searchParams.append(l,`in.(${p})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:p,type:S}={}){let _="";S==="plain"?_="pl":S==="phrase"?_="ph":S==="websearch"&&(_="w");const d=p===void 0?"":`(${p})`;return this.url.searchParams.append(l,`${_}fts${d}.${c}`),this}match(l){return Object.entries(l).forEach(([c,p])=>{this.url.searchParams.append(c,`eq.${p}`)}),this}not(l,c,p){return this.url.searchParams.append(l,`not.${c}.${p}`),this}or(l,{foreignTable:c,referencedTable:p=c}={}){const S=p?`${p}.or`:"or";return this.url.searchParams.append(S,`(${l})`),this}filter(l,c,p){return this.url.searchParams.append(l,`${c}.${p}`),this}}return PostgrestFilterBuilder$1.default=r,PostgrestFilterBuilder$1}var hasRequiredPostgrestQueryBuilder;function requirePostgrestQueryBuilder(){if(hasRequiredPostgrestQueryBuilder)return PostgrestQueryBuilder$1;hasRequiredPostgrestQueryBuilder=1;var o=PostgrestQueryBuilder$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestQueryBuilder$1,"__esModule",{value:!0});const i=o(requirePostgrestFilterBuilder());class r{constructor(l,{headers:c={},schema:p,fetch:S}){this.url=l,this.headers=c,this.schema=p,this.fetch=S}select(l,{head:c=!1,count:p}={}){const S=c?"HEAD":"GET";let _=!1;const d=(l??"*").split("").map(v=>/\s/.test(v)&&!_?"":(v==='"'&&(_=!_),v)).join("");return this.url.searchParams.set("select",d),p&&(this.headers.Prefer=`count=${p}`),new i.default({method:S,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(l,{count:c,defaultToNull:p=!0}={}){const S="POST",_=[];if(this.headers.Prefer&&_.push(this.headers.Prefer),c&&_.push(`count=${c}`),p||_.push("missing=default"),this.headers.Prefer=_.join(","),Array.isArray(l)){const d=l.reduce((v,P)=>v.concat(Object.keys(P)),[]);if(d.length>0){const v=[...new Set(d)].map(P=>`"${P}"`);this.url.searchParams.set("columns",v.join(","))}}return new i.default({method:S,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}upsert(l,{onConflict:c,ignoreDuplicates:p=!1,count:S,defaultToNull:_=!0}={}){const d="POST",v=[`resolution=${p?"ignore":"merge"}-duplicates`];if(c!==void 0&&this.url.searchParams.set("on_conflict",c),this.headers.Prefer&&v.push(this.headers.Prefer),S&&v.push(`count=${S}`),_||v.push("missing=default"),this.headers.Prefer=v.join(","),Array.isArray(l)){const P=l.reduce((O,k)=>O.concat(Object.keys(k)),[]);if(P.length>0){const O=[...new Set(P)].map(k=>`"${k}"`);this.url.searchParams.set("columns",O.join(","))}}return new i.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}update(l,{count:c}={}){const p="PATCH",S=[];return this.headers.Prefer&&S.push(this.headers.Prefer),c&&S.push(`count=${c}`),this.headers.Prefer=S.join(","),new i.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}delete({count:l}={}){const c="DELETE",p=[];return l&&p.push(`count=${l}`),this.headers.Prefer&&p.unshift(this.headers.Prefer),this.headers.Prefer=p.join(","),new i.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return PostgrestQueryBuilder$1.default=r,PostgrestQueryBuilder$1}var constants={},version$4={},hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,Object.defineProperty(version$4,"__esModule",{value:!0}),version$4.version=void 0,version$4.version="0.0.0-automated"),version$4}var hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.DEFAULT_HEADERS=void 0;const o=requireVersion();return constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${o.version}`},constants}var hasRequiredPostgrestClient;function requirePostgrestClient(){if(hasRequiredPostgrestClient)return PostgrestClient$1;hasRequiredPostgrestClient=1;var o=PostgrestClient$1.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(PostgrestClient$1,"__esModule",{value:!0});const i=o(requirePostgrestQueryBuilder()),r=o(requirePostgrestFilterBuilder()),a=requireConstants();class l{constructor(p,{headers:S={},schema:_,fetch:d}={}){this.url=p,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),S),this.schemaName=_,this.fetch=d}from(p){const S=new URL(`${this.url}/${p}`);return new i.default(S,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(p){return new l(this.url,{headers:this.headers,schema:p,fetch:this.fetch})}rpc(p,S={},{head:_=!1,get:d=!1,count:v}={}){let P;const O=new URL(`${this.url}/rpc/${p}`);let k;_||d?(P=_?"HEAD":"GET",Object.entries(S).filter(([f,g])=>g!==void 0).map(([f,g])=>[f,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([f,g])=>{O.searchParams.append(f,g)})):(P="POST",k=S);const E=Object.assign({},this.headers);return v&&(E.Prefer=`count=${v}`),new r.default({method:P,url:O,headers:E,schema:this.schemaName,body:k,fetch:this.fetch,allowEmpty:!1})}}return PostgrestClient$1.default=l,PostgrestClient$1}var hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var o=cjs.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(cjs,"__esModule",{value:!0}),cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const i=o(requirePostgrestClient());cjs.PostgrestClient=i.default;const r=o(requirePostgrestQueryBuilder());cjs.PostgrestQueryBuilder=r.default;const a=o(requirePostgrestFilterBuilder());cjs.PostgrestFilterBuilder=a.default;const l=o(requirePostgrestTransformBuilder());cjs.PostgrestTransformBuilder=l.default;const c=o(requirePostgrestBuilder());cjs.PostgrestBuilder=c.default;const p=o(requirePostgrestError());return cjs.PostgrestError=p.default,cjs.default={PostgrestClient:i.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:p.default},cjs}var cjsExports=requireCjs();const index=getDefaultExportFromCjs(cjsExports),{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=index,version$3="2.11.2",DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$3}`},VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(o){o.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(i,r){return i.constructor===ArrayBuffer?r(this._binaryDecode(i)):r(typeof i=="string"?JSON.parse(i):{})}_binaryDecode(i){const r=new DataView(i),a=new TextDecoder;return this._decodeBroadcast(i,r,a)}_decodeBroadcast(i,r,a){const l=r.getUint8(1),c=r.getUint8(2);let p=this.HEADER_LENGTH+2;const S=a.decode(i.slice(p,p+l));p=p+l;const _=a.decode(i.slice(p,p+c));p=p+c;const d=JSON.parse(a.decode(i.slice(p,i.byteLength)));return{ref:null,topic:S,event:_,payload:d}}}class Timer{constructor(i,r){this.callback=i,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=i,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(o,i,r={})=>{var a;const l=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(i).reduce((c,p)=>(c[p]=convertColumn(p,o,i,l),c),{})},convertColumn=(o,i,r,a)=>{const l=i.find(S=>S.name===o),c=l==null?void 0:l.type,p=r[o];return c&&!a.includes(c)?convertCell(c,p):noop$1(p)},convertCell=(o,i)=>{if(o.charAt(0)==="_"){const r=o.slice(1,o.length);return toArray(i,r)}switch(o){case PostgresTypes.bool:return toBoolean(i);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(i);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(i);case PostgresTypes.timestamp:return toTimestampString(i);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(i);default:return noop$1(i)}},noop$1=o=>o,toBoolean=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},toNumber=o=>{if(typeof o=="string"){const i=parseFloat(o);if(!Number.isNaN(i))return i}return o},toJson=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(i){return console.log(`JSON parse error: ${i}`),o}return o},toArray=(o,i)=>{if(typeof o!="string")return o;const r=o.length-1,a=o[r];if(o[0]==="{"&&a==="}"){let c;const p=o.slice(1,r);try{c=JSON.parse("["+p+"]")}catch{c=p?p.split(","):[]}return c.map(S=>convertCell(i,S))}return o},toTimestampString=o=>typeof o=="string"?o.replace(" ","T"):o,httpEndpointURL=o=>{let i=o;return i=i.replace(/^ws/i,"http"),i=i.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),i.replace(/\/+$/,"")};class Push{constructor(i,r,a={},l=DEFAULT_TIMEOUT){this.channel=i,this.event=r,this.payload=a,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(i){this.timeout=i,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(i){this.payload=Object.assign(Object.assign({},this.payload),i)}receive(i,r){var a;return this._hasReceived(i)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:i,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const i=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},i),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(i,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:i,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:i,response:r}){this.recHooks.filter(a=>a.status===i).forEach(a=>a.callback(r))}_hasReceived(i){return this.receivedResp&&this.receivedResp.status===i}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(i,r){this.channel=i,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},l=>{const{onJoin:c,onLeave:p,onSync:S}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,l,c,p),this.pendingDiffs.forEach(_=>{this.state=RealtimePresence.syncDiff(this.state,_,c,p)}),this.pendingDiffs=[],S()}),this.channel._on(a.diff,{},l=>{const{onJoin:c,onLeave:p,onSync:S}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=RealtimePresence.syncDiff(this.state,l,c,p),S())}),this.onJoin((l,c,p)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:p})}),this.onLeave((l,c,p)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:p})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(i,r,a,l){const c=this.cloneDeep(i),p=this.transformState(r),S={},_={};return this.map(c,(d,v)=>{p[d]||(_[d]=v)}),this.map(p,(d,v)=>{const P=c[d];if(P){const O=v.map(g=>g.presence_ref),k=P.map(g=>g.presence_ref),E=v.filter(g=>k.indexOf(g.presence_ref)<0),f=P.filter(g=>O.indexOf(g.presence_ref)<0);E.length>0&&(S[d]=E),f.length>0&&(_[d]=f)}else S[d]=v}),this.syncDiff(c,{joins:S,leaves:_},a,l)}static syncDiff(i,r,a,l){const{joins:c,leaves:p}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),l||(l=()=>{}),this.map(c,(S,_)=>{var d;const v=(d=i[S])!==null&&d!==void 0?d:[];if(i[S]=this.cloneDeep(_),v.length>0){const P=i[S].map(k=>k.presence_ref),O=v.filter(k=>P.indexOf(k.presence_ref)<0);i[S].unshift(...O)}a(S,v,_)}),this.map(p,(S,_)=>{let d=i[S];if(!d)return;const v=_.map(P=>P.presence_ref);d=d.filter(P=>v.indexOf(P.presence_ref)<0),i[S]=d,l(S,d,_),d.length===0&&delete i[S]}),i}static map(i,r){return Object.getOwnPropertyNames(i).map(a=>r(a,i[a]))}static transformState(i){return i=this.cloneDeep(i),Object.getOwnPropertyNames(i).reduce((r,a)=>{const l=i[a];return"metas"in l?r[a]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[a]=l,r},{})}static cloneDeep(i){return JSON.parse(JSON.stringify(i))}onJoin(i){this.caller.onJoin=i}onLeave(i){this.caller.onLeave=i}onSync(i){this.caller.onSync=i}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(i,r={config:{}},a){this.topic=i,this.params=r,this.socket=a,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=i.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(i,r=this.timeout){var a,l;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:c,presence:p,private:S}}=this.params;this._onError(v=>i==null?void 0:i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,v)),this._onClose(()=>i==null?void 0:i(REALTIME_SUBSCRIBE_STATES.CLOSED));const _={},d={broadcast:c,presence:p,postgres_changes:(l=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(v=>v.filter))!==null&&l!==void 0?l:[],private:S};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},_)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var P;if(this.socket.setAuth(),v===void 0){i==null||i(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,k=(P=O==null?void 0:O.length)!==null&&P!==void 0?P:0,E=[];for(let f=0;f<k;f++){const g=O[f],{filter:{event:T,schema:U,table:N,filter:M}}=g,y=v&&v[f];if(y&&y.event===T&&y.schema===U&&y.table===N&&y.filter===M)E.push(Object.assign(Object.assign({},g),{id:y.id}));else{this.unsubscribe(),i==null||i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,i&&i(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",v=>{i==null||i(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{i==null||i(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(i,r={}){return await this.send({type:"presence",event:"track",payload:i},r.timeout||this.timeout)}async untrack(i={}){return await this.send({type:"presence",event:"untrack"},i)}on(i,r,a){return this._on(i,r,a)}async send(i,r={}){var a,l;if(!this._canPush()&&i.type==="broadcast"){const{event:c,payload:p}=i,_={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:p,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((l=d.body)===null||l===void 0?void 0:l.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var p,S,_;const d=this._push(i.type,i,r.timeout||this.timeout);i.type==="broadcast"&&!(!((_=(S=(p=this.params)===null||p===void 0?void 0:p.config)===null||S===void 0?void 0:S.broadcast)===null||_===void 0)&&_.ack)&&c("ok"),d.receive("ok",()=>c("ok")),d.receive("error",()=>c("error")),d.receive("timeout",()=>c("timed out"))})}updateJoinPayload(i){this.joinPush.updatePayload(i)}unsubscribe(i=this.timeout){this.state=CHANNEL_STATES.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(a=>{const l=new Push(this,CHANNEL_EVENTS.leave,{},i);l.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),l.send(),this._canPush()||l.trigger("ok",{})})}async _fetchWithTimeout(i,r,a){const l=new AbortController,c=setTimeout(()=>l.abort(),a),p=await this.socket.fetch(i,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),p}_push(i,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${i}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Push(this,i,r,a);return this._canPush()?l.send():(l.startTimeout(),this.pushBuffer.push(l)),l}_onMessage(i,r,a){return r}_isMember(i){return this.topic===i}_joinRef(){return this.joinPush.ref}_trigger(i,r,a){var l,c;const p=i.toLocaleLowerCase(),{close:S,error:_,leave:d,join:v}=CHANNEL_EVENTS;if(a&&[S,_,d,v].indexOf(p)>=0&&a!==this._joinRef())return;let O=this._onMessage(p,r,a);if(r&&!O)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(p)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(k=>{var E,f,g;return((E=k.filter)===null||E===void 0?void 0:E.event)==="*"||((g=(f=k.filter)===null||f===void 0?void 0:f.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===p}).map(k=>k.callback(O,a)):(c=this.bindings[p])===null||c===void 0||c.filter(k=>{var E,f,g,T,U,N;if(["broadcast","presence","postgres_changes"].includes(p))if("id"in k){const M=k.id,y=(E=k.filter)===null||E===void 0?void 0:E.event;return M&&((f=r.ids)===null||f===void 0?void 0:f.includes(M))&&(y==="*"||(y==null?void 0:y.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const M=(U=(T=k==null?void 0:k.filter)===null||T===void 0?void 0:T.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return M==="*"||M===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===p}).map(k=>{if(typeof O=="object"&&"ids"in O){const E=O.data,{schema:f,table:g,commit_timestamp:T,type:U,errors:N}=E;O=Object.assign(Object.assign({},{schema:f,table:g,commit_timestamp:T,eventType:U,new:{},old:{},errors:N}),this._getPayloadRecords(E))}k.callback(O,a)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(i){return`chan_reply_${i}`}_on(i,r,a){const l=i.toLocaleLowerCase(),c={type:l,filter:r,callback:a};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(i,r){const a=i.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&RealtimeChannel.isEqual(l.filter,r))}),this}static isEqual(i,r){if(Object.keys(i).length!==Object.keys(r).length)return!1;for(const a in i)if(i[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(i){this._on(CHANNEL_EVENTS.close,{},i)}_onError(i){this._on(CHANNEL_EVENTS.error,{},r=>i(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(i=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(i))}_getPayloadRecords(i){const r={new:{},old:{}};return(i.type==="INSERT"||i.type==="UPDATE")&&(r.new=convertChangeData(i.columns,i.record)),(i.type==="UPDATE"||i.type==="DELETE")&&(r.old=convertChangeData(i.columns,i.old_record)),r}}const noop=()=>{},NATIVE_WEBSOCKET_AVAILABLE=typeof WebSocket<"u",WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(i,r){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=c=>{let p;return c?p=c:typeof fetch>"u"?p=(...S)=>__vitePreload(async()=>{const{default:_}=await Promise.resolve().then(()=>browser);return{default:_}},void 0).then(({default:_})=>_(...S)):p=fetch,(...S)=>p(...S)},this.endPoint=`${i}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(i),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const l=(a=r==null?void 0:r.params)===null||a===void 0?void 0:a.apikey;if(l&&(this.accessTokenValue=l,this.apiKey=l),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:c=>[1e3,2e3,5e3,1e4][c-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(c,p)=>p(JSON.stringify(c)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(NATIVE_WEBSOCKET_AVAILABLE){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new WSWebSocketDummy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),__vitePreload(async()=>{const{default:i}=await import("./browser-KCjFelW2.js").then(r=>r.b);return{default:i}},[]).then(({default:i})=>{this.conn=new i(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(i,r){this.conn&&(this.conn.onclose=function(){},i?this.conn.close(i,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(i){const r=await i.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const i=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),i}log(i,r,a){this.logger(i,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(i,r={config:{}}){const a=new RealtimeChannel(`realtime:${i}`,r,this);return this.channels.push(a),a}push(i){const{topic:r,event:a,payload:l,ref:c}=i,p=()=>{this.encode(i,S=>{var _;(_=this.conn)===null||_===void 0||_.send(S)})};this.log("push",`${r} ${a} (${c})`,l),this.isConnected()?p():this.sendBuffer.push(p)}async setAuth(i=null){let r=i||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let a=null;try{a=JSON.parse(atob(r.split(".")[1]))}catch{}if(a&&a.exp&&!(Math.floor(Date.now()/1e3)-a.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${a.exp}`);this.accessTokenValue=r,this.channels.forEach(l=>{r&&l.updateJoinPayload({access_token:r}),l.joinedOnce&&l._isJoined()&&l._push(CHANNEL_EVENTS.access_token,{access_token:r})})}}async sendHeartbeat(){var i;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(i=this.conn)===null||i===void 0||i.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(i=>i()),this.sendBuffer=[])}_makeRef(){let i=this.ref+1;return i===this.ref?this.ref=0:this.ref=i,this.ref.toString()}_leaveOpenTopic(i){let r=this.channels.find(a=>a.topic===i&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${i}"`),r.unsubscribe())}_remove(i){this.channels=this.channels.filter(r=>r._joinRef()!==i._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=i=>this._onConnError(i),this.conn.onmessage=i=>this._onConnMessage(i),this.conn.onclose=i=>this._onConnClose(i))}_onConnMessage(i){this.decode(i.data,r=>{let{topic:a,event:l,payload:c,ref:p}=r;p&&p===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${c.status||""} ${a} ${l} ${p&&"("+p+")"||""}`,c),this.channels.filter(S=>S._isMember(a)).forEach(S=>S._trigger(l,c,p)),this.stateChangeCallbacks.message.forEach(S=>S(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const i=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(i),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(i=>i())}_onConnClose(i){this.log("transport","close",i),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(i))}_onConnError(i){this.log("transport",i.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(i))}_triggerChanError(){this.channels.forEach(i=>i._trigger(CHANNEL_EVENTS.error))}_appendParams(i,r){if(Object.keys(r).length===0)return i;const a=i.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${i}${a}${l}`}_workerObjectUrl(i){let r;if(i)r=i;else{const a=new Blob([WORKER_SCRIPT],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}}class WSWebSocketDummy{constructor(i,r,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=SOCKET_STATES.connecting,this.send=()=>{},this.url=null,this.url=i,this.close=a.close}}class StorageError extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class StorageApiError extends StorageError{constructor(i,r){super(i),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(i,r){super(i),this.name="StorageUnknownError",this.originalError=r}}var __awaiter$6=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};const resolveFetch$2=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...r)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...r)):i=fetch,(...r)=>i(...r)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=o=>{if(Array.isArray(o))return o.map(r=>recursiveToCamel(r));if(typeof o=="function"||o!==Object(o))return o;const i={};return Object.entries(o).forEach(([r,a])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));i[l]=recursiveToCamel(a)}),i};var __awaiter$5=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};const _getErrorMessage$1=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),handleError$1=(o,i,r)=>__awaiter$5(void 0,void 0,void 0,function*(){const a=yield resolveResponse();o instanceof a&&!(r!=null&&r.noResolveJson)?o.json().then(l=>{i(new StorageApiError(_getErrorMessage$1(l),o.status||500))}).catch(l=>{i(new StorageUnknownError(_getErrorMessage$1(l),l))}):i(new StorageUnknownError(_getErrorMessage$1(o),o))}),_getRequestParams$1=(o,i,r,a)=>{const l={method:o,headers:(i==null?void 0:i.headers)||{}};return o==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json"},i==null?void 0:i.headers),a&&(l.body=JSON.stringify(a)),Object.assign(Object.assign({},l),r))};function _handleRequest$1(o,i,r,a,l,c){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((p,S)=>{o(r,_getRequestParams$1(i,a,l,c)).then(_=>{if(!_.ok)throw _;return a!=null&&a.noResolveJson?_:_.json()}).then(_=>p(_)).catch(_=>handleError$1(_,S,a))})})}function get(o,i,r,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"GET",i,r,a)})}function post(o,i,r,a,l){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"POST",i,a,l,r)})}function put(o,i,r,a,l){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"PUT",i,a,l,r)})}function head(o,i,r,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"HEAD",i,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function remove(o,i,r,a,l){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(o,"DELETE",i,a,l,r)})}var __awaiter$4=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(i,r={},a,l){this.url=i,this.headers=r,this.bucketId=a,this.fetch=resolveFetch$2(l)}uploadOrUpdate(i,r,a,l){return __awaiter$4(this,void 0,void 0,function*(){try{let c;const p=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),l);let S=Object.assign(Object.assign({},this.headers),i==="POST"&&{"x-upsert":String(p.upsert)});const _=p.metadata;typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",p.cacheControl),_&&c.append("metadata",this.encodeMetadata(_)),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",p.cacheControl),_&&c.append("metadata",this.encodeMetadata(_))):(c=a,S["cache-control"]=`max-age=${p.cacheControl}`,S["content-type"]=p.contentType,_&&(S["x-metadata"]=this.toBase64(this.encodeMetadata(_)))),l!=null&&l.headers&&(S=Object.assign(Object.assign({},S),l.headers));const d=this._removeEmptyFolders(r),v=this._getFinalPath(d),P=yield this.fetch(`${this.url}/object/${v}`,Object.assign({method:i,body:c,headers:S},p!=null&&p.duplex?{duplex:p.duplex}:{})),O=yield P.json();return P.ok?{data:{path:d,id:O.Id,fullPath:O.Key},error:null}:{data:null,error:O}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}upload(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",i,r,a)})}uploadToSignedUrl(i,r,a,l){return __awaiter$4(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(i),p=this._getFinalPath(c),S=new URL(this.url+`/object/upload/sign/${p}`);S.searchParams.set("token",r);try{let _;const d=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},l),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&a instanceof Blob?(_=new FormData,_.append("cacheControl",d.cacheControl),_.append("",a)):typeof FormData<"u"&&a instanceof FormData?(_=a,_.append("cacheControl",d.cacheControl)):(_=a,v["cache-control"]=`max-age=${d.cacheControl}`,v["content-type"]=d.contentType);const P=yield this.fetch(S.toString(),{method:"PUT",body:_,headers:v}),O=yield P.json();return P.ok?{data:{path:c,fullPath:O.Key},error:null}:{data:null,error:O}}catch(_){if(isStorageError(_))return{data:null,error:_};throw _}})}createSignedUploadUrl(i,r){return __awaiter$4(this,void 0,void 0,function*(){try{let a=this._getFinalPath(i);const l=Object.assign({},this.headers);r!=null&&r.upsert&&(l["x-upsert"]="true");const c=yield post(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:l}),p=new URL(this.url+c.url),S=p.searchParams.get("token");if(!S)throw new StorageError("No token returned by API");return{data:{signedUrl:p.toString(),path:i,token:S},error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}update(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",i,r,a)})}move(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:i,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(isStorageError(l))return{data:null,error:l};throw l}})}copy(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:i,destinationKey:r,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(isStorageError(l))return{data:null,error:l};throw l}})}createSignedUrl(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){try{let l=this._getFinalPath(i),c=yield post(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:r},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const p=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${p}`)},{data:c,error:null}}catch(l){if(isStorageError(l))return{data:null,error:l};throw l}})}createSignedUrls(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){try{const l=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:i},{headers:this.headers}),c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:l.map(p=>Object.assign(Object.assign({},p),{signedUrl:p.signedURL?encodeURI(`${this.url}${p.signedURL}${c}`):null})),error:null}}catch(l){if(isStorageError(l))return{data:null,error:l};throw l}})}download(i,r){return __awaiter$4(this,void 0,void 0,function*(){const l=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),p=c?`?${c}`:"";try{const S=this._getFinalPath(i);return{data:yield(yield get(this.fetch,`${this.url}/${l}/${S}${p}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(S){if(isStorageError(S))return{data:null,error:S};throw S}})}info(i){return __awaiter$4(this,void 0,void 0,function*(){const r=this._getFinalPath(i);try{const a=yield get(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:recursiveToCamel(a),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}exists(i){return __awaiter$4(this,void 0,void 0,function*(){const r=this._getFinalPath(i);try{return yield head(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(isStorageError(a)&&a instanceof StorageUnknownError){const l=a.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:a}}throw a}})}getPublicUrl(i,r){const a=this._getFinalPath(i),l=[],c=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";c!==""&&l.push(c);const S=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",_=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});_!==""&&l.push(_);let d=l.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${S}/public/${a}${d}`)}}}remove(i){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:i},{headers:this.headers}),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}list(i,r,a){return __awaiter$4(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),r),{prefix:i||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(isStorageError(l))return{data:null,error:l};throw l}})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const r=[];return i.width&&r.push(`width=${i.width}`),i.height&&r.push(`height=${i.height}`),i.resize&&r.push(`resize=${i.resize}`),i.format&&r.push(`format=${i.format}`),i.quality&&r.push(`quality=${i.quality}`),r.join("&")}}const version$2="2.7.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};class StorageBucketApi{constructor(i,r={},a){this.url=i,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),r),this.fetch=resolveFetch$2(a)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}getBucket(i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${i}`,{headers:this.headers}),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}createBucket(i,r={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}updateBucket(i,r){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${i}`,{id:i,name:i,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}emptyBucket(i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${i}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}deleteBucket(i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${i}`,{},{headers:this.headers}),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}}class StorageClient extends StorageBucketApi{constructor(i,r={},a){super(i,r,a)}from(i){return new StorageFileApi(this.url,this.headers,i,this.fetch)}}const version$1="2.48.1";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};const resolveFetch$1=o=>{let i;return o?i=o:typeof fetch>"u"?i=nodeFetch:i=fetch,(...r)=>i(...r)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(o,i,r)=>{const a=resolveFetch$1(r),l=resolveHeadersConstructor();return(c,p)=>__awaiter$2(void 0,void 0,void 0,function*(){var S;const _=(S=yield i())!==null&&S!==void 0?S:o;let d=new l(p==null?void 0:p.headers);return d.has("apikey")||d.set("apikey",o),d.has("Authorization")||d.set("Authorization",`Bearer ${_}`),a(c,Object.assign(Object.assign({},p),{headers:d}))})};var __awaiter$1=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};function stripTrailingSlash(o){return o.replace(/\/$/,"")}function applySettingDefaults(o,i){const{db:r,auth:a,realtime:l,global:c}=o,{db:p,auth:S,realtime:_,global:d}=i,v={db:Object.assign(Object.assign({},p),r),auth:Object.assign(Object.assign({},S),a),realtime:Object.assign(Object.assign({},_),l),global:Object.assign(Object.assign({},d),c),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return o.accessToken?v.accessToken=o.accessToken:delete v.accessToken,v}const version="2.67.3",GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},EXPIRY_MARGIN=10,API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function expiresAt(o){return Math.round(Date.now()/1e3)+o}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const i=Math.random()*16|0;return(o=="x"?i:i&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(o){const i={},r=new URL(o);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{i[c]=l})}catch{}return r.searchParams.forEach((a,l)=>{i[l]=a}),i}const resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...r)=>__vitePreload(async()=>{const{default:a}=await Promise.resolve().then(()=>browser);return{default:a}},void 0).then(({default:a})=>a(...r)):i=fetch,(...r)=>i(...r)},looksLikeFetchResponse=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",setItemAsync=async(o,i,r)=>{await o.setItem(i,JSON.stringify(r))},getItemAsync=async(o,i)=>{const r=await o.getItem(i);if(!r)return null;try{return JSON.parse(r)}catch{return r}},removeItemAsync=async(o,i)=>{await o.removeItem(i)};function decodeBase64URL(o){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",a,l,c,p,S,_,d,v=0;for(o=o.replace("-","+").replace("_","/");v<o.length;)p=i.indexOf(o.charAt(v++)),S=i.indexOf(o.charAt(v++)),_=i.indexOf(o.charAt(v++)),d=i.indexOf(o.charAt(v++)),a=p<<2|S>>4,l=(S&15)<<4|_>>2,c=(_&3)<<6|d,r=r+String.fromCharCode(a),_!=64&&l!=0&&(r=r+String.fromCharCode(l)),d!=64&&c!=0&&(r=r+String.fromCharCode(c));return r}class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((i,r)=>{this.resolve=i,this.reject=r})}}Deferred.promiseConstructor=Promise;function decodeJWTPayload(o){const i=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=o.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!i.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const a=r[1];return JSON.parse(decodeBase64URL(a))}async function sleep(o){return await new Promise(i=>{setTimeout(()=>i(null),o)})}function retryable(o,i){return new Promise((a,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const p=await o(c);if(!i(c,null,p)){a(p);return}}catch(p){if(!i(c,p)){l(p);return}}})()})}function dec2hex(o){return("0"+o.toString(16)).substr(-2)}function generatePKCEVerifier(){const i=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*a));return l}return crypto.getRandomValues(i),Array.from(i,dec2hex).join("")}async function sha256(o){const r=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(a);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}function base64urlencode(o){return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function generatePKCEChallenge(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const r=await sha256(o);return base64urlencode(r)}async function getCodeChallengeAndMethod(o,i,r=!1){const a=generatePKCEVerifier();let l=a;r&&(l+="/PASSWORD_RECOVERY"),await setItemAsync(o,`${i}-code-verifier`,l);const c=await generatePKCEChallenge(a);return[c,a===c?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(o){const i=o.headers.get(API_VERSION_HEADER_NAME);if(!i||!i.match(API_VERSION_REGEX))return null;try{return new Date(`${i}T00:00:00.0Z`)}catch{return null}}class AuthError extends Error{constructor(i,r,a){super(i),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function isAuthError(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class AuthApiError extends AuthError{constructor(i,r,a){super(i,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function isAuthApiError(o){return isAuthError(o)&&o.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(i,r){super(i),this.name="AuthUnknownError",this.originalError=r}}class CustomAuthError extends AuthError{constructor(i,r,a,l){super(i,a,l),this.name=r,this.status=a}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(o){return isAuthError(o)&&o.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(i){super(i,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(i,r=null){super(i,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(o){return isAuthError(o)&&o.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(i,r=null){super(i,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(i,r){super(i,"AuthRetryableFetchError",r,void 0)}}function isAuthRetryableFetchError(o){return isAuthError(o)&&o.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(i,r,a){super(i,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}var __rest$1=function(o,i){var r={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(r[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(o);l<a.length;l++)i.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(r[a[l]]=o[a[l]]);return r};const _getErrorMessage=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),NETWORK_ERROR_CODES=[502,503,504];async function handleError(o){var i;if(!looksLikeFetchResponse(o))throw new AuthRetryableFetchError(_getErrorMessage(o),0);if(NETWORK_ERROR_CODES.includes(o.status))throw new AuthRetryableFetchError(_getErrorMessage(o),o.status);let r;try{r=await o.json()}catch(c){throw new AuthUnknownError(_getErrorMessage(c),c)}let a;const l=parseResponseAPIVersion(o);if(l&&l.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(r),o.status,((i=r.weak_password)===null||i===void 0?void 0:i.reasons)||[]);if(a==="session_not_found")throw new AuthSessionMissingError}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,p)=>c&&typeof p=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(r),o.status,r.weak_password.reasons);throw new AuthApiError(_getErrorMessage(r),o.status||500,a)}const _getRequestParams=(o,i,r,a)=>{const l={method:o,headers:(i==null?void 0:i.headers)||{}};return o==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},i==null?void 0:i.headers),l.body=JSON.stringify(a),Object.assign(Object.assign({},l),r))};async function _request(o,i,r,a){var l;const c=Object.assign({},a==null?void 0:a.headers);c[API_VERSION_HEADER_NAME]||(c[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const p=(l=a==null?void 0:a.query)!==null&&l!==void 0?l:{};a!=null&&a.redirectTo&&(p.redirect_to=a.redirectTo);const S=Object.keys(p).length?"?"+new URLSearchParams(p).toString():"",_=await _handleRequest(o,i,r+S,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(_):{data:Object.assign({},_),error:null}}async function _handleRequest(o,i,r,a,l,c){const p=_getRequestParams(i,a,l,c);let S;try{S=await o(r,Object.assign({},p))}catch(_){throw console.error(_),new AuthRetryableFetchError(_getErrorMessage(_),0)}if(S.ok||await handleError(S),a!=null&&a.noResolveJson)return S;try{return await S.json()}catch(_){await handleError(_)}}function _sessionResponse(o){var i;let r=null;hasSession(o)&&(r=Object.assign({},o),o.expires_at||(r.expires_at=expiresAt(o.expires_in)));const a=(i=o.user)!==null&&i!==void 0?i:o;return{data:{session:r,user:a},error:null}}function _sessionResponsePassword(o){const i=_sessionResponse(o);return!i.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(i.data.weak_password=o.weak_password),i}function _userResponse(o){var i;return{data:{user:(i=o.user)!==null&&i!==void 0?i:o},error:null}}function _ssoResponse(o){return{data:o,error:null}}function _generateLinkResponse(o){const{action_link:i,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c}=o,p=__rest$1(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),S={action_link:i,email_otp:r,hashed_token:a,redirect_to:l,verification_type:c},_=Object.assign({},p);return{data:{properties:S,user:_},error:null}}function _noResolveJsonResponse(o){return o}function hasSession(o){return o.access_token&&o.refresh_token&&o.expires_in}var __rest=function(o,i){var r={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(r[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(o);l<a.length;l++)i.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(o,a[l])&&(r[a[l]]=o[a[l]]);return r};class GoTrueAdminApi{constructor({url:i="",headers:r={},fetch:a}){this.url=i,this.headers=r,this.fetch=resolveFetch(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(i,r="global"){try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:i,noResolveJson:!0}),{data:null,error:null}}catch(a){if(isAuthError(a))return{data:null,error:a};throw a}}async inviteUserByEmail(i,r={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:i,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async generateLink(i){try{const{options:r}=i,a=__rest(i,["options"]),l=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(l.new_email=a==null?void 0:a.newEmail,delete l.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:_generateLinkResponse,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(isAuthError(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(i){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:i,headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async listUsers(i){var r,a,l,c,p,S,_;try{const d={nextPage:null,lastPage:0,total:0},v=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=i==null?void 0:i.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(c=(l=i==null?void 0:i.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(v.error)throw v.error;const P=await v.json(),O=(p=v.headers.get("x-total-count"))!==null&&p!==void 0?p:0,k=(_=(S=v.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&_!==void 0?_:[];return k.length>0&&(k.forEach(E=>{const f=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(E.split(";")[1].split("=")[1]);d[`${g}Page`]=f}),d.total=parseInt(O)),{data:Object.assign(Object.assign({},P),d),error:null}}catch(d){if(isAuthError(d))return{data:{users:[]},error:d};throw d}}async getUserById(i){try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${i}`,{headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async updateUserById(i,r){try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${i}`,{body:r,headers:this.headers,xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async deleteUser(i,r=!1){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${i}`,{headers:this.headers,body:{should_soft_delete:r},xform:_userResponse})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}async _listFactors(i){try{const{data:r,error:a}=await _request(this.fetch,"GET",`${this.url}/admin/users/${i.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:a}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _deleteFactor(i){try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${i.userId}/factors/${i.id}`,{headers:this.headers}),error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}}const localStorageAdapter={getItem:o=>supportsLocalStorage()?globalThis.localStorage.getItem(o):null,setItem:(o,i)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(o,i)},removeItem:o=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(o)}};function memoryLocalStorageAdapter(o={}){return{getItem:i=>o[i]||null,setItem:(i,r)=>{o[i]=r},removeItem:i=>{delete o[i]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(i){super(i),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(o,i,r){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,i);const a=new globalThis.AbortController;return i>0&&setTimeout(()=>{a.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},i),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,i===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async l=>{if(l){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,l.name);try{return await r()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,l.name)}}else{if(i===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(internals.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},AUTO_REFRESH_TICK_DURATION=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3;async function lockNoOp(o,i,r){return await r()}class GoTrueClient{constructor(i){var r,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},DEFAULT_OPTIONS),i);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new GoTrueAdminApi({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=resolveFetch(l.fetch),this.lock=l.lock||lockNoOp,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:isBrowser()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?l.storage?this.storage=l.storage:supportsLocalStorage()?this.storage=localStorageAdapter:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}_debug(...i){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...i),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var i;try{const r=parseParametersFromURL(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),isBrowser()&&this.detectSessionInUrl&&a!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),isAuthImplicitGrantRedirectError(c)){const _=(i=c.details)===null||i===void 0?void 0:i.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:p,redirectType:S}=l;return this._debug("#_initialize()","detected session in URL",p,"redirect type",S),await this._saveSession(p),setTimeout(async()=>{S==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",p):await this._notifyAllSubscribers("SIGNED_IN",p)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return isAuthError(r)?{error:r}:{error:new AuthUnknownError("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(i){var r,a,l;try{const c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=i==null?void 0:i.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(l=i==null?void 0:i.options)===null||l===void 0?void 0:l.captchaToken}},xform:_sessionResponse}),{data:p,error:S}=c;if(S||!p)return{data:{user:null,session:null},error:S};const _=p.session,d=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",_)),{data:{user:d,session:_},error:null}}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(i){var r,a,l;try{let c;if("email"in i){const{email:v,password:P,options:O}=i;let k=null,E=null;this.flowType==="pkce"&&([k,E]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:O==null?void 0:O.emailRedirectTo,body:{email:v,password:P,data:(r=O==null?void 0:O.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:O==null?void 0:O.captchaToken},code_challenge:k,code_challenge_method:E},xform:_sessionResponse})}else if("phone"in i){const{phone:v,password:P,options:O}=i;c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:P,data:(a=O==null?void 0:O.data)!==null&&a!==void 0?a:{},channel:(l=O==null?void 0:O.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:O==null?void 0:O.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:p,error:S}=c;if(S||!p)return{data:{user:null,session:null},error:S};const _=p.session,d=p.user;return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",_)),{data:{user:d,session:_},error:null}}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(i){try{let r;if("email"in i){const{email:c,password:p,options:S}=i;r=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:p,gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in i){const{phone:c,password:p,options:S}=i;r=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:p,gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:a,error:l}=r;return l?{data:{user:null,session:null},error:l}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:l})}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(i){var r,a,l,c;return await this._handleProviderSignIn(i.provider,{redirectTo:(r=i.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=i.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=i.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=i.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(i){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(i))}async _exchangeCodeForSession(i){const r=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[a,l]=(r??"").split("/");try{const{data:c,error:p}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:i,code_verifier:a},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),p)throw p;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:p})}catch(c){if(isAuthError(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(i){try{const{options:r,provider:a,token:l,access_token:c,nonce:p}=i,S=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:l,access_token:c,nonce:p,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:_sessionResponse}),{data:_,error:d}=S;return d?{data:{user:null,session:null},error:d}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:_,error:d})}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(i){var r,a,l,c,p;try{if("email"in i){const{email:S,options:_}=i;let d=null,v=null;this.flowType==="pkce"&&([d,v]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:P}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:S,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},create_user:(a=_==null?void 0:_.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:d,code_challenge_method:v},redirectTo:_==null?void 0:_.emailRedirectTo});return{data:{user:null,session:null},error:P}}if("phone"in i){const{phone:S,options:_}=i,{data:d,error:v}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:S,data:(l=_==null?void 0:_.data)!==null&&l!==void 0?l:{},create_user:(c=_==null?void 0:_.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},channel:(p=_==null?void 0:_.channel)!==null&&p!==void 0?p:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:v}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(S){if(isAuthError(S))return{data:{user:null,session:null},error:S};throw S}}async verifyOtp(i){var r,a;try{let l,c;"options"in i&&(l=(r=i.options)===null||r===void 0?void 0:r.redirectTo,c=(a=i.options)===null||a===void 0?void 0:a.captchaToken);const{data:p,error:S}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},i),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:_sessionResponse});if(S)throw S;if(!p)throw new Error("An error occurred on token verification.");const _=p.session,d=p.user;return _!=null&&_.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(i.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),{data:{user:d,session:_},error:null}}catch(l){if(isAuthError(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(i){var r,a,l;try{let c=null,p=null;return this.flowType==="pkce"&&([c,p]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in i?{provider_id:i.providerId}:null),"domain"in i?{domain:i.domain}:null),{redirect_to:(a=(r=i.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((l=i==null?void 0:i.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:i.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:p}),headers:this.headers,xform:_ssoResponse})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;if(a)throw a;if(!r)throw new AuthSessionMissingError;const{error:l}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:l}})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async resend(i){try{const r=`${this.url}/resend`;if("email"in i){const{email:a,type:l,options:c}=i,{error:p}=await _request(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:p}}else if("phone"in i){const{phone:a,type:l,options:c}=i,{data:p,error:S}=await _request(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:S}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(i,r){this._debug("#_acquireLock","begin",i);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,i,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(i){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await i(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let i=null;const r=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?i=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!i)return{data:{session:null},error:null};const a=i.expires_at?i.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",i.expires_at),!a){if(this.storage.isServer){let p=this.suppressGetSessionWarning;i=new Proxy(i,{get:(_,d,v)=>(!p&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),p=!0,this.suppressGetSessionWarning=!0),Reflect.get(_,d,v))})}return{data:{session:i},error:null}}const{session:l,error:c}=await this._callRefreshToken(i.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(i){return i?await this._getUser(i):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(i){try{return i?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:i,xform:_userResponse}):await this._useSession(async r=>{var a,l,c;const{data:p,error:S}=r;if(S)throw S;return!(!((a=p.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=p.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:_userResponse})})}catch(r){if(isAuthError(r))return isAuthSessionMissingError(r)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(i,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(i,r))}async _updateUser(i,r={}){try{return await this._useSession(async a=>{const{data:l,error:c}=a;if(c)throw c;if(!l.session)throw new AuthSessionMissingError;const p=l.session;let S=null,_=null;this.flowType==="pkce"&&i.email!=null&&([S,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:d,error:v}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},i),{code_challenge:S,code_challenge_method:_}),jwt:p.access_token,xform:_userResponse});if(v)throw v;return p.user=d.user,await this._saveSession(p),await this._notifyAllSubscribers("USER_UPDATED",p),{data:{user:p.user},error:null}})}catch(a){if(isAuthError(a))return{data:{user:null},error:a};throw a}}_decodeJWT(i){return decodeJWTPayload(i)}async setSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(i))}async _setSession(i){try{if(!i.access_token||!i.refresh_token)throw new AuthSessionMissingError;const r=Date.now()/1e3;let a=r,l=!0,c=null;const p=decodeJWTPayload(i.access_token);if(p.exp&&(a=p.exp,l=a<=r),l){const{session:S,error:_}=await this._callRefreshToken(i.refresh_token);if(_)return{data:{user:null,session:null},error:_};if(!S)return{data:{user:null,session:null},error:null};c=S}else{const{data:S,error:_}=await this._getUser(i.access_token);if(_)throw _;c={access_token:i.access_token,refresh_token:i.refresh_token,user:S.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(r){if(isAuthError(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(i){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(i))}async _refreshSession(i){try{return await this._useSession(async r=>{var a;if(!i){const{data:p,error:S}=r;if(S)throw S;i=(a=p.session)!==null&&a!==void 0?a:void 0}if(!(i!=null&&i.refresh_token))throw new AuthSessionMissingError;const{session:l,error:c}=await this._callRefreshToken(i.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(isAuthError(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(i,r){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(i.error||i.error_description||i.error_code)throw new AuthImplicitGrantRedirectError(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!i.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:U,error:N}=await this._exchangeCodeForSession(i.code);if(N)throw N;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:l,access_token:c,refresh_token:p,expires_in:S,expires_at:_,token_type:d}=i;if(!c||!S||!p||!d)throw new AuthImplicitGrantRedirectError("No session defined in URL");const v=Math.round(Date.now()/1e3),P=parseInt(S);let O=v+P;_&&(O=parseInt(_));const k=O-v;k*1e3<=AUTO_REFRESH_TICK_DURATION&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${P}s`);const E=O-P;v-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,O,v):v-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,O,v);const{data:f,error:g}=await this._getUser(c);if(g)throw g;const T={provider_token:a,provider_refresh_token:l,access_token:c,expires_in:P,expires_at:O,refresh_token:p,token_type:d,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:i.type},error:null}}catch(a){if(isAuthError(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(i){return!!(i.access_token||i.error_description)}async _isPKCECallback(i){const r=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(i.code&&r)}async signOut(i={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(i))}async _signOut({scope:i}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{error:c};const p=(a=l.session)===null||a===void 0?void 0:a.access_token;if(p){const{error:S}=await this.admin.signOut(p,i);if(S&&!(isAuthApiError(S)&&(S.status===404||S.status===401||S.status===403)))return{error:S}}return i!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(i){const r=uuid(),a={id:r,callback:i,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(i){return await this._useSession(async r=>{var a,l;try{const{data:{session:c},error:p}=r;if(p)throw p;await((a=this.stateChangeEmitters.get(i))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",i,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(i))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",i,"error",c),console.error(c)}})}async resetPasswordForEmail(i,r={}){let a=null,l=null;this.flowType==="pkce"&&([a,l]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:i,code_challenge:a,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async getUserIdentities(){var i;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(i=r.user.identities)!==null&&i!==void 0?i:[]},error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async linkIdentity(i){var r;try{const{data:a,error:l}=await this._useSession(async c=>{var p,S,_,d,v;const{data:P,error:O}=c;if(O)throw O;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,i.provider,{redirectTo:(p=i.options)===null||p===void 0?void 0:p.redirectTo,scopes:(S=i.options)===null||S===void 0?void 0:S.scopes,queryParams:(_=i.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",k,{headers:this.headers,jwt:(v=(d=P.session)===null||d===void 0?void 0:d.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return isBrowser()&&!(!((r=i.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:i.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(isAuthError(a))return{data:{provider:i.provider,url:null},error:a};throw a}}async unlinkIdentity(i){try{return await this._useSession(async r=>{var a,l;const{data:c,error:p}=r;if(p)throw p;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${i.identity_id}`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _refreshAccessToken(i){const r=`#_refreshAccessToken(${i.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await retryable(async l=>(l>0&&await sleep(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:i},headers:this.headers,xform:_sessionResponse})),(l,c)=>{const p=200*Math.pow(2,l);return c&&isAuthRetryableFetchError(c)&&Date.now()+p-a<AUTO_REFRESH_TICK_DURATION})}catch(a){if(this._debug(r,"error",a),isAuthError(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(i){return typeof i=="object"&&i!==null&&"access_token"in i&&"refresh_token"in i&&"expires_at"in i}async _handleProviderSignIn(i,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,i,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",i,"options",r,"url",a),isBrowser()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:i,url:a},error:null}}async _recoverAndRefresh(){var i;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await getItemAsync(this.storage,this.storageKey);if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=Math.round(Date.now()/1e3),c=((i=a.expires_at)!==null&&i!==void 0?i:1/0)<l+EXPIRY_MARGIN;if(this._debug(r,`session has${c?"":" not"} expired with margin of ${EXPIRY_MARGIN}s`),c){if(this.autoRefreshToken&&a.refresh_token){const{error:p}=await this._callRefreshToken(a.refresh_token);p&&(console.error(p),isAuthRetryableFetchError(p)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",p),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(i){var r,a;if(!i)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${i.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Deferred;const{data:c,error:p}=await this._refreshAccessToken(i);if(p)throw p;if(!c.session)throw new AuthSessionMissingError;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const S={session:c.session,error:null};return this.refreshingDeferred.resolve(S),S}catch(c){if(this._debug(l,"error",c),isAuthError(c)){const p={session:null,error:c};return isAuthRetryableFetchError(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(p),p}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(i,r,a=!0){const l=`#_notifyAllSubscribers(${i})`;this._debug(l,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:i,session:r});const c=[],p=Array.from(this.stateChangeEmitters.values()).map(async S=>{try{await S.callback(i,r)}catch(_){c.push(_)}});if(await Promise.all(p),c.length>0){for(let S=0;S<c.length;S+=1)console.error(c[S]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(i){this._debug("#_saveSession()",i),this.suppressGetSessionWarning=!0,await setItemAsync(this.storage,this.storageKey,i)}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const i=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{i&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",i)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const i=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION);this.autoRefreshTicker=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const i=this.autoRefreshTicker;this.autoRefreshTicker=null,i&&clearInterval(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const i=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((a.expires_at*1e3-i)/AUTO_REFRESH_TICK_DURATION);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),l<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(i){if(i.isAcquireTimeout||i instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw i}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(i){console.error("_handleVisibilityChange",i)}}async _onVisibilityChanged(i){const r=`#_onVisibilityChanged(${i})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),i||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(i,r,a){const l=[`provider=${encodeURIComponent(r)}`];if(a!=null&&a.redirectTo&&l.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&l.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,p]=await getCodeChallengeAndMethod(this.storage,this.storageKey),S=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(p)}`});l.push(S.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);l.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&l.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${i}?${l.join("&")}`}async _unenroll(i){try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await _request(this.fetch,"DELETE",`${this.url}/factors/${i.factorId}`,{headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _enroll(i){try{return await this._useSession(async r=>{var a,l;const{data:c,error:p}=r;if(p)return{data:null,error:p};const S=Object.assign({friendly_name:i.friendlyName,factor_type:i.factorType},i.factorType==="phone"?{phone:i.phone}:{issuer:i.issuer}),{data:_,error:d}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:S,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return d?{data:null,error:d}:(i.factorType==="totp"&&(!((l=_==null?void 0:_.totp)===null||l===void 0)&&l.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),{data:_,error:null})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async _verify(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;if(c)return{data:null,error:c};const{data:p,error:S}=await _request(this.fetch,"POST",`${this.url}/factors/${i.factorId}/verify`,{body:{code:i.code,challenge_id:i.challengeId},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token});return S?{data:null,error:S}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),{data:p,error:S})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}})}async _challenge(i){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:l,error:c}=r;return c?{data:null,error:c}:await _request(this.fetch,"POST",`${this.url}/factors/${i.factorId}/challenge`,{body:{channel:i.channel},headers:this.headers,jwt:(a=l==null?void 0:l.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(i){const{data:r,error:a}=await this._challenge({factorId:i.factorId});return a?{data:null,error:a}:await this._verify({factorId:i.factorId,challengeId:r.id,code:i.code})}async _listFactors(){const{data:{user:i},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=(i==null?void 0:i.factors)||[],l=a.filter(p=>p.factor_type==="totp"&&p.status==="verified"),c=a.filter(p=>p.factor_type==="phone"&&p.status==="verified");return{data:{all:a,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async i=>{var r,a;const{data:{session:l},error:c}=i;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const p=this._decodeJWT(l.access_token);let S=null;p.aal&&(S=p.aal);let _=S;((a=(r=l.user.factors)===null||r===void 0?void 0:r.filter(P=>P.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(_="aal2");const v=p.amr||[];return{data:{currentLevel:S,nextLevel:_,currentAuthenticationMethods:v},error:null}}))}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(i){super(i)}}var __awaiter=function(o,i,r,a){function l(c){return c instanceof r?c:new r(function(p){p(c)})}return new(r||(r=Promise))(function(c,p){function S(v){try{d(a.next(v))}catch(P){p(P)}}function _(v){try{d(a.throw(v))}catch(P){p(P)}}function d(v){v.done?c(v.value):l(v.value).then(S,_)}d((a=a.apply(o,i||[])).next())})};class SupabaseClient{constructor(i,r,a){var l,c,p;if(this.supabaseUrl=i,this.supabaseKey=r,!i)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const S=stripTrailingSlash(i);this.realtimeUrl=`${S}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${S}/auth/v1`,this.storageUrl=`${S}/storage/v1`,this.functionsUrl=`${S}/functions/v1`;const _=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:_}),global:DEFAULT_GLOBAL_OPTIONS},v=applySettingDefaults(a??{},d);this.storageKey=(l=v.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=v.global.headers)!==null&&c!==void 0?c:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(P,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((p=v.auth)!==null&&p!==void 0?p:{},this.headers,v.global.fetch),this.fetch=fetchWithAuth(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new PostgrestClient(`${S}/rest/v1`,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),v.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,r={},a={}){return this.rest.rpc(i,r,a)}channel(i,r={config:{}}){return this.realtime.channel(i,r)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var i,r;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:r,detectSessionInUrl:a,storage:l,storageKey:c,flowType:p,lock:S,debug:_},d,v){const P={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},P),d),storageKey:c,autoRefreshToken:i,persistSession:r,detectSessionInUrl:a,storage:l,flowType:p,lock:S,debug:_,fetch:v,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(i){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},i),{params:Object.assign({apikey:this.supabaseKey},i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(i,r,a){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:i==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(o,i,r)=>new SupabaseClient(o,i,r);function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(i,r){module.exports=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.UNSUPPORTED_FEATURES=i.TextRenderingMode=i.StreamType=i.RenderingIntentFlag=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FontType=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.arrayByteLength=Z,i.arraysToBytes=ce,i.assert=x,i.bytesToString=$,i.createPromiseCapability=yt,i.createValidAbsoluteUrl=q,i.escapeString=Ze,i.getModificationDate=Lt,i.getVerbosityLevel=ae,i.info=G,i.isArrayBuffer=ze,i.isArrayEqual=hn,i.isAscii=st,i.objectFromMap=be,i.objectSize=fe,i.setVerbosityLevel=ne,i.shadow=K,i.string32=ie,i.stringToBytes=F,i.stringToPDFString=je,i.stringToUTF16BEString=Ke,i.stringToUTF8String=Xe,i.unreachable=Y,i.utf8StringToString=Ve,i.warn=re,r(2);const a=[1,0,0,1,0,0];i.IDENTITY_MATRIX=a;const l=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=l;const c=1.35;i.LINE_FACTOR=c;const p=.35;i.LINE_DESCENT_FACTOR=p;const S={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=S;const _={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=_;const d="pdfjs_internal_editor_";i.AnnotationEditorPrefix=d;const v={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=v;const P={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=P;const O={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=O;const k={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=k;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=E;const f={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=f;const g={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=g;const T={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=T;const U={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=U;const N={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=N;const M={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=M;const y={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=y;const A={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=A;const m={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=m;const R={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=R;const C={O:"PageOpen",C:"PageClose"};i.PageActionEventType=C;const B={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};i.StreamType=B;const V={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};i.FontType=V;const oe={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=oe;const _e={NONE:0,BINARY:1,STREAM:2};i.CMapCompressionType=_e;const he={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=he;const ue={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};i.UNSUPPORTED_FEATURES=ue;const W={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=W;let ee=oe.WARNINGS;function ne(Se){Number.isInteger(Se)&&(ee=Se)}function ae(){return ee}function G(Se){ee>=oe.INFOS&&console.log(`Info: ${Se}`)}function re(Se){ee>=oe.WARNINGS&&console.log(`Warning: ${Se}`)}function Y(Se){throw new Error(Se)}function x(Se,pe){Se||Y(pe)}function w(Se){if(!Se)return!1;switch(Se.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function q(Se,pe=null,ge=null){if(!Se)return null;try{if(ge&&typeof Se=="string"){if(ge.addDefaultProtocol&&Se.startsWith("www.")){const qe=Se.match(/\./g);qe&&qe.length>=2&&(Se=`http://${Se}`)}if(ge.tryConvertEncoding)try{Se=Xe(Se)}catch{}}const Pe=pe?new URL(Se,pe):new URL(Se);if(w(Pe))return Pe}catch{}return null}function K(Se,pe,ge){return Object.defineProperty(Se,pe,{value:ge,enumerable:!0,configurable:!0,writable:!1}),ge}const te=function(){function pe(ge,Pe){this.constructor===pe&&Y("Cannot initialize BaseException."),this.message=ge,this.name=Pe}return pe.prototype=new Error,pe.constructor=pe,pe}();i.BaseException=te;class X extends te{constructor(pe,ge){super(pe,"PasswordException"),this.code=ge}}i.PasswordException=X;class b extends te{constructor(pe,ge){super(pe,"UnknownErrorException"),this.details=ge}}i.UnknownErrorException=b;class L extends te{constructor(pe){super(pe,"InvalidPDFException")}}i.InvalidPDFException=L;class j extends te{constructor(pe){super(pe,"MissingPDFException")}}i.MissingPDFException=j;class I extends te{constructor(pe,ge){super(pe,"UnexpectedResponseException"),this.status=ge}}i.UnexpectedResponseException=I;class H extends te{constructor(pe){super(pe,"FormatError")}}i.FormatError=H;class J extends te{constructor(pe){super(pe,"AbortException")}}i.AbortException=J;function $(Se){(typeof Se!="object"||Se===null||Se.length===void 0)&&Y("Invalid argument for bytesToString");const pe=Se.length,ge=8192;if(pe<ge)return String.fromCharCode.apply(null,Se);const Pe=[];for(let qe=0;qe<pe;qe+=ge){const Je=Math.min(qe+ge,pe),nt=Se.subarray(qe,Je);Pe.push(String.fromCharCode.apply(null,nt))}return Pe.join("")}function F(Se){typeof Se!="string"&&Y("Invalid argument for stringToBytes");const pe=Se.length,ge=new Uint8Array(pe);for(let Pe=0;Pe<pe;++Pe)ge[Pe]=Se.charCodeAt(Pe)&255;return ge}function Z(Se){if(Se.length!==void 0)return Se.length;if(Se.byteLength!==void 0)return Se.byteLength;Y("Invalid argument for arrayByteLength")}function ce(Se){const pe=Se.length;if(pe===1&&Se[0]instanceof Uint8Array)return Se[0];let ge=0;for(let Je=0;Je<pe;Je++)ge+=Z(Se[Je]);let Pe=0;const qe=new Uint8Array(ge);for(let Je=0;Je<pe;Je++){let nt=Se[Je];nt instanceof Uint8Array||(typeof nt=="string"?nt=F(nt):nt=new Uint8Array(nt));const Ut=nt.byteLength;qe.set(nt,Pe),Pe+=Ut}return qe}function ie(Se){return String.fromCharCode(Se>>24&255,Se>>16&255,Se>>8&255,Se&255)}function fe(Se){return Object.keys(Se).length}function be(Se){const pe=Object.create(null);for(const[ge,Pe]of Se)pe[ge]=Pe;return pe}function Ae(){const Se=new Uint8Array(4);return Se[0]=1,new Uint32Array(Se.buffer,0,1)[0]===1}function Oe(){try{return new Function(""),!0}catch{return!1}}class ye{static get isLittleEndian(){return K(this,"isLittleEndian",Ae())}static get isEvalSupported(){return K(this,"isEvalSupported",Oe())}static get isOffscreenCanvasSupported(){return K(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}i.FeatureTest=ye;const Ie=[...Array(256).keys()].map(Se=>Se.toString(16).padStart(2,"0"));class Le{static makeHexColor(pe,ge,Pe){return`#${Ie[pe]}${Ie[ge]}${Ie[Pe]}`}static scaleMinMax(pe,ge){let Pe;pe[0]?(pe[0]<0&&(Pe=ge[0],ge[0]=ge[1],ge[1]=Pe),ge[0]*=pe[0],ge[1]*=pe[0],pe[3]<0&&(Pe=ge[2],ge[2]=ge[3],ge[3]=Pe),ge[2]*=pe[3],ge[3]*=pe[3]):(Pe=ge[0],ge[0]=ge[2],ge[2]=Pe,Pe=ge[1],ge[1]=ge[3],ge[3]=Pe,pe[1]<0&&(Pe=ge[2],ge[2]=ge[3],ge[3]=Pe),ge[2]*=pe[1],ge[3]*=pe[1],pe[2]<0&&(Pe=ge[0],ge[0]=ge[1],ge[1]=Pe),ge[0]*=pe[2],ge[1]*=pe[2]),ge[0]+=pe[4],ge[1]+=pe[4],ge[2]+=pe[5],ge[3]+=pe[5]}static transform(pe,ge){return[pe[0]*ge[0]+pe[2]*ge[1],pe[1]*ge[0]+pe[3]*ge[1],pe[0]*ge[2]+pe[2]*ge[3],pe[1]*ge[2]+pe[3]*ge[3],pe[0]*ge[4]+pe[2]*ge[5]+pe[4],pe[1]*ge[4]+pe[3]*ge[5]+pe[5]]}static applyTransform(pe,ge){const Pe=pe[0]*ge[0]+pe[1]*ge[2]+ge[4],qe=pe[0]*ge[1]+pe[1]*ge[3]+ge[5];return[Pe,qe]}static applyInverseTransform(pe,ge){const Pe=ge[0]*ge[3]-ge[1]*ge[2],qe=(pe[0]*ge[3]-pe[1]*ge[2]+ge[2]*ge[5]-ge[4]*ge[3])/Pe,Je=(-pe[0]*ge[1]+pe[1]*ge[0]+ge[4]*ge[1]-ge[5]*ge[0])/Pe;return[qe,Je]}static getAxialAlignedBoundingBox(pe,ge){const Pe=Le.applyTransform(pe,ge),qe=Le.applyTransform(pe.slice(2,4),ge),Je=Le.applyTransform([pe[0],pe[3]],ge),nt=Le.applyTransform([pe[2],pe[1]],ge);return[Math.min(Pe[0],qe[0],Je[0],nt[0]),Math.min(Pe[1],qe[1],Je[1],nt[1]),Math.max(Pe[0],qe[0],Je[0],nt[0]),Math.max(Pe[1],qe[1],Je[1],nt[1])]}static inverseTransform(pe){const ge=pe[0]*pe[3]-pe[1]*pe[2];return[pe[3]/ge,-pe[1]/ge,-pe[2]/ge,pe[0]/ge,(pe[2]*pe[5]-pe[4]*pe[3])/ge,(pe[4]*pe[1]-pe[5]*pe[0])/ge]}static apply3dTransform(pe,ge){return[pe[0]*ge[0]+pe[1]*ge[1]+pe[2]*ge[2],pe[3]*ge[0]+pe[4]*ge[1]+pe[5]*ge[2],pe[6]*ge[0]+pe[7]*ge[1]+pe[8]*ge[2]]}static singularValueDecompose2dScale(pe){const ge=[pe[0],pe[2],pe[1],pe[3]],Pe=pe[0]*ge[0]+pe[1]*ge[2],qe=pe[0]*ge[1]+pe[1]*ge[3],Je=pe[2]*ge[0]+pe[3]*ge[2],nt=pe[2]*ge[1]+pe[3]*ge[3],Ut=(Pe+nt)/2,jn=Math.sqrt((Pe+nt)**2-4*(Pe*nt-Je*qe))/2,dn=Ut+jn||1,Ot=Ut-jn||1;return[Math.sqrt(dn),Math.sqrt(Ot)]}static normalizeRect(pe){const ge=pe.slice(0);return pe[0]>pe[2]&&(ge[0]=pe[2],ge[2]=pe[0]),pe[1]>pe[3]&&(ge[1]=pe[3],ge[3]=pe[1]),ge}static intersect(pe,ge){const Pe=Math.max(Math.min(pe[0],pe[2]),Math.min(ge[0],ge[2])),qe=Math.min(Math.max(pe[0],pe[2]),Math.max(ge[0],ge[2]));if(Pe>qe)return null;const Je=Math.max(Math.min(pe[1],pe[3]),Math.min(ge[1],ge[3])),nt=Math.min(Math.max(pe[1],pe[3]),Math.max(ge[1],ge[3]));return Je>nt?null:[Pe,Je,qe,nt]}static bezierBoundingBox(pe,ge,Pe,qe,Je,nt,Ut,jn){const dn=[],Ot=[[],[]];let fn,jt,Oi,gt,ri,oi,ki,fs;for(let pn=0;pn<2;++pn){if(pn===0?(jt=6*pe-12*Pe+6*Je,fn=-3*pe+9*Pe-9*Je+3*Ut,Oi=3*Pe-3*pe):(jt=6*ge-12*qe+6*nt,fn=-3*ge+9*qe-9*nt+3*jn,Oi=3*qe-3*ge),Math.abs(fn)<1e-12){if(Math.abs(jt)<1e-12)continue;gt=-Oi/jt,0<gt&&gt<1&&dn.push(gt);continue}ki=jt*jt-4*Oi*fn,fs=Math.sqrt(ki),!(ki<0)&&(ri=(-jt+fs)/(2*fn),0<ri&&ri<1&&dn.push(ri),oi=(-jt-fs)/(2*fn),0<oi&&oi<1&&dn.push(oi))}let It=dn.length,it;const bt=It;for(;It--;)gt=dn[It],it=1-gt,Ot[0][It]=it*it*it*pe+3*it*it*gt*Pe+3*it*gt*gt*Je+gt*gt*gt*Ut,Ot[1][It]=it*it*it*ge+3*it*it*gt*qe+3*it*gt*gt*nt+gt*gt*gt*jn;return Ot[0][bt]=pe,Ot[1][bt]=ge,Ot[0][bt+1]=Ut,Ot[1][bt+1]=jn,Ot[0].length=Ot[1].length=bt+2,[Math.min(...Ot[0]),Math.min(...Ot[1]),Math.max(...Ot[0]),Math.max(...Ot[1])]}}i.Util=Le;const De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function je(Se){if(Se[0]>=""){let ge;if(Se[0]===""&&Se[1]===""?ge="utf-16be":Se[0]===""&&Se[1]===""?ge="utf-16le":Se[0]===""&&Se[1]===""&&Se[2]===""&&(ge="utf-8"),ge)try{const Pe=new TextDecoder(ge,{fatal:!0}),qe=F(Se);return Pe.decode(qe)}catch(Pe){re(`stringToPDFString: "${Pe}".`)}}const pe=[];for(let ge=0,Pe=Se.length;ge<Pe;ge++){const qe=De[Se.charCodeAt(ge)];pe.push(qe?String.fromCharCode(qe):Se.charAt(ge))}return pe.join("")}function Ze(Se){return Se.replace(/([()\\\n\r])/g,pe=>pe===`
`?"\\n":pe==="\r"?"\\r":`\\${pe}`)}function st(Se){return/^[\x00-\x7F]*$/.test(Se)}function Ke(Se){const pe=[""];for(let ge=0,Pe=Se.length;ge<Pe;ge++){const qe=Se.charCodeAt(ge);pe.push(String.fromCharCode(qe>>8&255),String.fromCharCode(qe&255))}return pe.join("")}function Xe(Se){return decodeURIComponent(escape(Se))}function Ve(Se){return unescape(encodeURIComponent(Se))}function ze(Se){return typeof Se=="object"&&Se!==null&&Se.byteLength!==void 0}function hn(Se,pe){if(Se.length!==pe.length)return!1;for(let ge=0,Pe=Se.length;ge<Pe;ge++)if(Se[ge]!==pe[ge])return!1;return!0}function Lt(Se=new Date){return[Se.getUTCFullYear().toString(),(Se.getUTCMonth()+1).toString().padStart(2,"0"),Se.getUTCDate().toString().padStart(2,"0"),Se.getUTCHours().toString().padStart(2,"0"),Se.getUTCMinutes().toString().padStart(2,"0"),Se.getUTCSeconds().toString().padStart(2,"0")].join("")}function yt(){const Se=Object.create(null);let pe=!1;return Object.defineProperty(Se,"settled",{get(){return pe}}),Se.promise=new Promise(function(ge,Pe){Se.resolve=function(qe){pe=!0,ge(qe)},Se.reject=function(qe){pe=!0,Pe(qe)}}),Se}},(o,i,r)=>{r(3)},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=r},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var o,r,a,l,c,p,S,_,d,xl,P,O;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:E,NodeCMapReaderFactory:f,NodeStandardFontDataFactory:g}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=E,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=f,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=g}let createPDFNetworkStream;function setPDFNetworkStreamFactory(E){createPDFNetworkStream=E}function getDocument(E){const f=new PDFDocumentLoadingTask;let g;if(typeof E=="string"||E instanceof URL)g={url:E};else if((0,_util.isArrayBuffer)(E))g={data:E};else if(E instanceof PDFDataRangeTransport)g={range:E};else{if(typeof E!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!E.url&&!E.data&&!E.range)throw new Error("Invalid parameter object: need either .data, .range or .url");g=E}const T=Object.create(null);let U=null,N=null;for(const y in g){const A=g[y];switch(y){case"url":if(typeof window<"u")try{T[y]=new URL(A,window.location).href;continue}catch(m){(0,_util.warn)(`Cannot create valid URL: "${m}".`)}else if(typeof A=="string"||A instanceof URL){T[y]=A.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":U=A;continue;case"worker":N=A;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)T[y]=new Uint8Array(A);else{if(A instanceof Uint8Array)break;if(typeof A=="string")T[y]=(0,_util.stringToBytes)(A);else if(typeof A=="object"&&A!==null&&!isNaN(A.length))T[y]=new Uint8Array(A);else if((0,_util.isArrayBuffer)(A))T[y]=new Uint8Array(A);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}T[y]=A}if(T.CMapReaderFactory=T.CMapReaderFactory||DefaultCMapReaderFactory,T.StandardFontDataFactory=T.StandardFontDataFactory||DefaultStandardFontDataFactory,T.ignoreErrors=T.stopAtErrors!==!0,T.fontExtraProperties=T.fontExtraProperties===!0,T.pdfBug=T.pdfBug===!0,T.enableXfa=T.enableXfa===!0,(!Number.isInteger(T.rangeChunkSize)||T.rangeChunkSize<1)&&(T.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof T.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(T.docBaseUrl))&&(T.docBaseUrl=null),(!Number.isInteger(T.maxImageSize)||T.maxImageSize<-1)&&(T.maxImageSize=-1),typeof T.cMapUrl!="string"&&(T.cMapUrl=null),typeof T.standardFontDataUrl!="string"&&(T.standardFontDataUrl=null),typeof T.useWorkerFetch!="boolean"&&(T.useWorkerFetch=T.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&T.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof T.isEvalSupported!="boolean"&&(T.isEvalSupported=!0),typeof T.disableFontFace!="boolean"&&(T.disableFontFace=_is_node.isNodeJS),typeof T.useSystemFonts!="boolean"&&(T.useSystemFonts=!_is_node.isNodeJS&&!T.disableFontFace),(typeof T.ownerDocument!="object"||T.ownerDocument===null)&&(T.ownerDocument=globalThis.document),typeof T.disableRange!="boolean"&&(T.disableRange=!1),typeof T.disableStream!="boolean"&&(T.disableStream=!1),typeof T.disableAutoFetch!="boolean"&&(T.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(T.verbosity),!N){const y={verbosity:T.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};N=y.port?PDFWorker.fromPort(y):new PDFWorker(y),f._worker=N}const M=f.docId;return N.promise.then(function(){if(f.destroyed)throw new Error("Loading aborted");const y=_fetchDocument(N,T,U,M),A=new Promise(function(m){let R;U?R=new _transport_stream.PDFDataTransportStream({length:T.length,initialData:T.initialData,progressiveDone:T.progressiveDone,contentDispositionFilename:T.contentDispositionFilename,disableRange:T.disableRange,disableStream:T.disableStream},U):T.data||(R=createPDFNetworkStream({url:T.url,length:T.length,httpHeaders:T.httpHeaders,withCredentials:T.withCredentials,rangeChunkSize:T.rangeChunkSize,disableRange:T.disableRange,disableStream:T.disableStream})),m(R)});return Promise.all([y,A]).then(function([m,R]){if(f.destroyed)throw new Error("Loading aborted");const C=new _message_handler.MessageHandler(M,m,N.port),B=new WorkerTransport(C,f,R,T);f._transport=B,C.send("Ready",null)})}).catch(f._capability.reject),f}async function _fetchDocument(E,f,g,T){if(E.destroyed)throw new Error("Worker was destroyed");g&&(f.length=g.length,f.initialData=g.initialData,f.progressiveDone=g.progressiveDone,f.contentDispositionFilename=g.contentDispositionFilename);const U=await E.messageHandler.sendWithPromise("GetDocRequest",{docId:T,apiVersion:"2.16.105",source:{data:f.data,url:f.url,password:f.password,disableAutoFetch:f.disableAutoFetch,rangeChunkSize:f.rangeChunkSize,length:f.length},maxImageSize:f.maxImageSize,disableFontFace:f.disableFontFace,docBaseUrl:f.docBaseUrl,ignoreErrors:f.ignoreErrors,isEvalSupported:f.isEvalSupported,fontExtraProperties:f.fontExtraProperties,enableXfa:f.enableXfa,useSystemFonts:f.useSystemFonts,cMapUrl:f.useWorkerFetch?f.cMapUrl:null,standardFontDataUrl:f.useWorkerFetch?f.standardFontDataUrl:null});if(f.data&&(f.data=null),E.destroyed)throw new Error("Worker was destroyed");return U}const i=class i{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Rl(i,o)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var f;this.destroyed=!0,await((f=this._transport)==null?void 0:f.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};o=new WeakMap,ke(i,o,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(f,g,T=!1,U=null){this.length=f,this.initialData=g,this.progressiveDone=T,this.contentDispositionFilename=U,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(f){this._rangeListeners.push(f)}addProgressListener(f){this._progressListeners.push(f)}addProgressiveReadListener(f){this._progressiveReadListeners.push(f)}addProgressiveDoneListener(f){this._progressiveDoneListeners.push(f)}onDataRange(f,g){for(const T of this._rangeListeners)T(f,g)}onDataProgress(f,g){this._readyCapability.promise.then(()=>{for(const T of this._progressListeners)T(f,g)})}onDataProgressiveRead(f){this._readyCapability.promise.then(()=>{for(const g of this._progressiveReadListeners)g(f)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const f of this._progressiveDoneListeners)f()})}transportReady(){this._readyCapability.resolve()}requestDataRange(f,g){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(f,g){this._pdfInfo=f,this._transport=g,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(f){return this._transport.getPage(f)}getPageIndex(f){return this._transport.getPageIndex(f)}getDestinations(){return this._transport.getDestinations()}getDestination(f){return this._transport.getDestination(f)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(f=!1){return this._transport.startCleanup(f||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(f,g,T,U,N=!1){this._pageIndex=f,this._pageInfo=g,this._ownerDocument=U,this._transport=T,this._stats=N?new _display_utils.StatTimer:null,this._pdfBug=N,this.commonObjs=T.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:f,rotation:g=this.rotate,offsetX:T=0,offsetY:U=0,dontFlip:N=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:f,rotation:g,offsetX:T,offsetY:U,dontFlip:N})}getAnnotations({intent:f="display"}={}){const g=this._transport.getRenderingIntent(f);let T=this._annotationPromises.get(g.cacheKey);return T||(T=this._transport.getAnnotations(this._pageIndex,g.renderingIntent),this._annotationPromises.set(g.cacheKey,T),T=T.then(U=>{for(const N of U)N.titleObj!==void 0&&Object.defineProperty(N,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),N.titleObj.str}}),N.contentsObj!==void 0&&Object.defineProperty(N,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),N.contentsObj.str}});return U})),T}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var f;return((f=this._transport._htmlForXfa)==null?void 0:f.children[this._pageIndex])||null}render({canvasContext:f,viewport:g,intent:T="display",annotationMode:U=_util.AnnotationMode.ENABLE,transform:N=null,imageLayer:M=null,canvasFactory:y=null,background:A=null,optionalContentConfigPromise:m=null,annotationCanvasMap:R=null,pageColors:C=null,printAnnotationStorage:B=null}){var ne,ae;((ne=arguments[0])==null?void 0:ne.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&U===_util.AnnotationMode.ENABLE&&(U=_util.AnnotationMode.ENABLE_FORMS)),((ae=arguments[0])==null?void 0:ae.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&U===_util.AnnotationMode.ENABLE&&(U=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const V=this._transport.getRenderingIntent(T,U,B);this.pendingCleanup=!1,m||(m=this._transport.getOptionalContentConfig());let oe=this._intentStates.get(V.cacheKey);oe||(oe=Object.create(null),this._intentStates.set(V.cacheKey,oe)),oe.streamReaderCancelTimeout&&(clearTimeout(oe.streamReaderCancelTimeout),oe.streamReaderCancelTimeout=null);const _e=y||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),he=!!(V.renderingIntent&_util.RenderingIntentFlag.PRINT);oe.displayReadyCapability||(oe.displayReadyCapability=(0,_util.createPromiseCapability)(),oe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(V));const ue=G=>{oe.renderTasks.delete(W),(this.cleanupAfterRender||he)&&(this.pendingCleanup=!0),this._tryCleanup(),G?(W.capability.reject(G),this._abortOperatorList({intentState:oe,reason:G instanceof Error?G:new Error(G)})):W.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},W=new InternalRenderTask({callback:ue,params:{canvasContext:f,viewport:g,transform:N,imageLayer:M,background:A},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:oe.operatorList,pageIndex:this._pageIndex,canvasFactory:_e,useRequestAnimationFrame:!he,pdfBug:this._pdfBug,pageColors:C});(oe.renderTasks||(oe.renderTasks=new Set)).add(W);const ee=W.task;return Promise.all([oe.displayReadyCapability.promise,m]).then(([G,re])=>{if(this.pendingCleanup){ue();return}this._stats&&this._stats.time("Rendering"),W.initializeGraphics({transparency:G,optionalContentConfig:re}),W.operatorListChanged()}).catch(ue),ee}getOperatorList({intent:f="display",annotationMode:g=_util.AnnotationMode.ENABLE,printAnnotationStorage:T=null}={}){function U(){M.operatorList.lastChunk&&(M.opListReadCapability.resolve(M.operatorList),M.renderTasks.delete(y))}const N=this._transport.getRenderingIntent(f,g,T,!0);let M=this._intentStates.get(N.cacheKey);M||(M=Object.create(null),this._intentStates.set(N.cacheKey,M));let y;return M.opListReadCapability||(y=Object.create(null),y.operatorListChanged=U,M.opListReadCapability=(0,_util.createPromiseCapability)(),(M.renderTasks||(M.renderTasks=new Set)).add(y),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(N)),M.opListReadCapability.promise}streamTextContent({disableCombineTextItems:f=!1,includeMarkedContent:g=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:f!==!0,includeMarkedContent:g===!0},{highWaterMark:100,size(U){return U.items.length}})}getTextContent(f={}){if(this._transport._htmlForXfa)return this.getXfa().then(T=>_xfa_text.XfaText.textContent(T));const g=this.streamTextContent(f);return new Promise(function(T,U){function N(){M.read().then(function({value:A,done:m}){if(m){T(y);return}Object.assign(y.styles,A.styles),y.items.push(...A.items),N()},U)}const M=g.getReader(),y={items:[],styles:Object.create(null)};N()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const f=[];for(const g of this._intentStates.values())if(this._abortOperatorList({intentState:g,reason:new Error("Page was destroyed."),force:!0}),!g.opListReadCapability)for(const T of g.renderTasks)f.push(T.completed),T.cancel();this.objs.clear();for(const g of this._bitmaps)g.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(f)}cleanup(f=!1){return this.pendingCleanup=!0,this._tryCleanup(f)}_tryCleanup(f=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:g,operatorList:T}of this._intentStates.values())if(g.size>0||!T.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,f&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const g of this._bitmaps)g.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(f,g){const T=this._intentStates.get(g);T&&(this._stats&&this._stats.timeEnd("Page Request"),T.displayReadyCapability&&T.displayReadyCapability.resolve(f))}_renderPageChunk(f,g){for(let T=0,U=f.length;T<U;T++)g.operatorList.fnArray.push(f.fnArray[T]),g.operatorList.argsArray.push(f.argsArray[T]);g.operatorList.lastChunk=f.lastChunk,g.operatorList.separateAnnots=f.separateAnnots;for(const T of g.renderTasks)T.operatorListChanged();f.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:f,cacheKey:g,annotationStorageMap:T}){const N=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:f,cacheKey:g,annotationStorage:T}).getReader(),M=this._intentStates.get(g);M.streamReader=N;const y=()=>{N.read().then(({value:A,done:m})=>{if(m){M.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(A,M),y())},A=>{if(M.streamReader=null,!this._transport.destroyed){if(M.operatorList){M.operatorList.lastChunk=!0;for(const m of M.renderTasks)m.operatorListChanged();this._tryCleanup()}if(M.displayReadyCapability)M.displayReadyCapability.reject(A);else if(M.opListReadCapability)M.opListReadCapability.reject(A);else throw A}})};y()}_abortOperatorList({intentState:f,reason:g,force:T=!1}){if(f.streamReader){if(!T){if(f.renderTasks.size>0)return;if(g instanceof _display_utils.RenderingCancelledException){f.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:f,reason:g,force:!0}),f.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(f.streamReader.cancel(new _util.AbortException(g.message)).catch(()=>{}),f.streamReader=null,!this._transport.destroyed){for(const[U,N]of this._intentStates)if(N===f){this._intentStates.delete(U);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(f,g){const T={data:structuredClone(f,g)};this._deferred.then(()=>{for(const U of this._listeners)U.call(this,T)})}addEventListener(f,g){this._listeners.push(g)}removeEventListener(f,g){const T=this._listeners.indexOf(g);this._listeners.splice(T,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const E=(r=document==null?void 0:document.currentScript)==null?void 0:r.src;E&&(PDFWorkerUtil.fallbackWorkerSrc=E.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(E,f){let g;try{if(g=new URL(E),!g.origin||g.origin==="null")return!1}catch{return!1}const T=new URL(f,g);return g.origin===T.origin},PDFWorkerUtil.createCDNWrapper=function(E){const f=`importScripts("${E}");`;return URL.createObjectURL(new Blob([f]))}}const _PDFWorker=class _PDFWorker{constructor({name:E=null,port:f=null,verbosity:g=(0,_util.getVerbosityLevel)()}={}){if(f&&Q(_PDFWorker,a).has(f))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=E,this.destroyed=!1,this.verbosity=g,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,f){Q(_PDFWorker,a).set(f,this),this._initializeFromPort(f);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(E){this._port=E,this._messageHandler=new _message_handler.MessageHandler("main","worker",E),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:E}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,E)||(E=PDFWorkerUtil.createCDNWrapper(new URL(E,window.location).href));const f=new Worker(E),g=new _message_handler.MessageHandler("main","worker",f),T=()=>{f.removeEventListener("error",U),g.destroy(),f.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},U=()=>{this._webWorker||T()};f.addEventListener("error",U),g.on("test",M=>{if(f.removeEventListener("error",U),this.destroyed){T();return}M?(this._messageHandler=g,this._port=f,this._webWorker=f,this._readyCapability.resolve(),g.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),g.destroy(),f.terminate())}),g.on("ready",M=>{if(f.removeEventListener("error",U),this.destroyed){T();return}try{N()}catch{this._setupFakeWorker()}});const N=()=>{const M=new Uint8Array;g.send("test",M,[M.buffer])};N();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(E=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const f=new LoopbackPort;this._port=f;const g=`fake${PDFWorkerUtil.fakeWorkerId++}`,T=new _message_handler.MessageHandler(g+"_worker",g,f);E.setup(T,f);const U=new _message_handler.MessageHandler(g,g+"_worker",f);this._messageHandler=U,this._readyCapability.resolve(),U.send("configure",{verbosity:this.verbosity})}).catch(E=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${E.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Q(_PDFWorker,a).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(E){if(!(E!=null&&E.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Q(this,a).has(E.port)?Q(this,a).get(E.port):new _PDFWorker(E)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var E;try{return((E=globalThis.pdfjsWorker)==null?void 0:E.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};a=new WeakMap,ke(_PDFWorker,a,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(f,g,T,U){ke(this,l,null);ke(this,c,new Map);ke(this,p,new Map);ke(this,S,null);this.messageHandler=f,this.loadingTask=g,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:g.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:U.ownerDocument,styleElement:U.styleElement}),this._params=U,U.useWorkerFetch||(this.CMapReaderFactory=new U.CMapReaderFactory({baseUrl:U.cMapUrl,isCompressed:U.cMapPacked}),this.StandardFontDataFactory=new U.StandardFontDataFactory({baseUrl:U.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=T,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Q(this,l)}getRenderingIntent(f,g=_util.AnnotationMode.ENABLE,T=null,U=!1){let N=_util.RenderingIntentFlag.DISPLAY,M=null;switch(f){case"any":N=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":N=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${f}`)}switch(g){case _util.AnnotationMode.DISABLE:N+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:N+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:N+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,M=(N&_util.RenderingIntentFlag.PRINT&&T instanceof _annotation_storage.PrintAnnotationStorage?T:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${g}`)}return U&&(N+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:N,cacheKey:`${N}_${_annotation_storage.AnnotationStorage.getHash(M)}`,annotationStorageMap:M}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const f=[];for(const T of Q(this,c).values())f.push(T._destroy());Q(this,c).clear(),Q(this,p).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const g=this.messageHandler.sendWithPromise("Terminate",null);return f.push(g),Promise.all(f).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Me(this,S,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:f,loadingTask:g}=this;f.on("GetReader",(T,U)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=N=>{this._lastProgress={loaded:N.loaded,total:N.total}},U.onPull=()=>{this._fullReader.read().then(function({value:N,done:M}){if(M){U.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(N),"GetReader - expected an ArrayBuffer."),U.enqueue(new Uint8Array(N),1,[N])}).catch(N=>{U.error(N)})},U.onCancel=N=>{this._fullReader.cancel(N),U.ready.catch(M=>{if(!this.destroyed)throw M})}}),f.on("ReaderHeadersReady",T=>{const U=(0,_util.createPromiseCapability)(),N=this._fullReader;return N.headersReady.then(()=>{var M;(!N.isStreamingSupported||!N.isRangeSupported)&&(this._lastProgress&&((M=g.onProgress)==null||M.call(g,this._lastProgress)),N.onProgress=y=>{var A;(A=g.onProgress)==null||A.call(g,{loaded:y.loaded,total:y.total})}),U.resolve({isStreamingSupported:N.isStreamingSupported,isRangeSupported:N.isRangeSupported,contentLength:N.contentLength})},U.reject),U.promise}),f.on("GetRangeReader",(T,U)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const N=this._networkStream.getRangeReader(T.begin,T.end);if(!N){U.close();return}U.onPull=()=>{N.read().then(function({value:M,done:y}){if(y){U.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(M),"GetRangeReader - expected an ArrayBuffer."),U.enqueue(new Uint8Array(M),1,[M])}).catch(M=>{U.error(M)})},U.onCancel=M=>{N.cancel(M),U.ready.catch(y=>{if(!this.destroyed)throw y})}}),f.on("GetDoc",({pdfInfo:T})=>{this._numPages=T.numPages,this._htmlForXfa=T.htmlForXfa,delete T.htmlForXfa,g._capability.resolve(new PDFDocumentProxy(T,this))}),f.on("DocException",function(T){let U;switch(T.name){case"PasswordException":U=new _util.PasswordException(T.message,T.code);break;case"InvalidPDFException":U=new _util.InvalidPDFException(T.message);break;case"MissingPDFException":U=new _util.MissingPDFException(T.message);break;case"UnexpectedResponseException":U=new _util.UnexpectedResponseException(T.message,T.status);break;case"UnknownErrorException":U=new _util.UnknownErrorException(T.message,T.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}g._capability.reject(U)}),f.on("PasswordRequest",T=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),g.onPassword){const U=N=>{N instanceof Error?this._passwordCapability.reject(N):this._passwordCapability.resolve({password:N})};try{g.onPassword(U,T.code)}catch(N){this._passwordCapability.reject(N)}}else this._passwordCapability.reject(new _util.PasswordException(T.message,T.code));return this._passwordCapability.promise}),f.on("DataLoaded",T=>{var U;(U=g.onProgress)==null||U.call(g,{loaded:T.length,total:T.length}),this.downloadInfoCapability.resolve(T)}),f.on("StartRenderPage",T=>{if(this.destroyed)return;Q(this,c).get(T.pageIndex)._startRenderPage(T.transparency,T.cacheKey)}),f.on("commonobj",([T,U,N])=>{var M;if(!this.destroyed&&!this.commonObjs.has(T))switch(U){case"Font":const y=this._params;if("error"in N){const R=N.error;(0,_util.warn)(`Error during font loading: ${R}`),this.commonObjs.resolve(T,R);break}let A=null;y.pdfBug&&((M=globalThis.FontInspector)!=null&&M.enabled)&&(A={registerFont(R,C){globalThis.FontInspector.fontAdded(R,C)}});const m=new _font_loader.FontFaceObject(N,{isEvalSupported:y.isEvalSupported,disableFontFace:y.disableFontFace,ignoreErrors:y.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:A});this.fontLoader.bind(m).catch(R=>f.sendWithPromise("FontFallback",{id:T})).finally(()=>{!y.fontExtraProperties&&m.data&&(m.data=null),this.commonObjs.resolve(T,m)});break;case"FontPath":case"Image":this.commonObjs.resolve(T,N);break;default:throw new Error(`Got unknown common object type ${U}`)}}),f.on("obj",([T,U,N,M])=>{var A;if(this.destroyed)return;const y=Q(this,c).get(U);if(!y.objs.has(T))switch(N){case"Image":y.objs.resolve(T,M);const m=8e6;if(M){let R;if(M.bitmap){const{bitmap:C,width:B,height:V}=M;R=B*V*4,y._bitmaps.add(C)}else R=((A=M.data)==null?void 0:A.length)||0;R>m&&(y.cleanupAfterRender=!0)}break;case"Pattern":y.objs.resolve(T,M);break;default:throw new Error(`Got unknown object type ${N}`)}}),f.on("DocProgress",T=>{var U;this.destroyed||(U=g.onProgress)==null||U.call(g,{loaded:T.loaded,total:T.total})}),f.on("DocStats",T=>{this.destroyed||Me(this,l,Object.freeze({streamTypes:Object.freeze(T.streamTypes),fontTypes:Object.freeze(T.fontTypes)}))}),f.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),f.on("FetchBuiltInCMap",T=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(T):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),f.on("FetchStandardFontData",T=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(T):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:f}){var g,T;this.destroyed||(T=(g=this.loadingTask).onUnsupportedFeature)==null||T.call(g,f)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(f){if(!Number.isInteger(f)||f<=0||f>this._numPages)return Promise.reject(new Error("Invalid page request."));const g=f-1,T=Q(this,p).get(g);if(T)return T;const U=this.messageHandler.sendWithPromise("GetPage",{pageIndex:g}).then(N=>{if(this.destroyed)throw new Error("Transport destroyed");const M=new PDFPageProxy(g,N,this,this._params.ownerDocument,this._params.pdfBug);return Q(this,c).set(g,M),M});return Q(this,p).set(g,U),U}getPageIndex(f){return typeof f!="object"||f===null||!Number.isInteger(f.num)||f.num<0||!Number.isInteger(f.gen)||f.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:f.num,gen:f.gen})}getAnnotations(f,g){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:f,intent:g})}saveDocument(){var f;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((f=this._fullReader)==null?void 0:f.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(f){return typeof f!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:f})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(f){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:f})}getStructTree(f){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:f})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(f=>new _optional_content_config.OptionalContentConfig(f))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Q(this,S)||Me(this,S,this.messageHandler.sendWithPromise("GetMetadata",null).then(f=>{var g,T;return{info:f[0],metadata:f[1]?new _metadata.Metadata(f[1]):null,contentDispositionFilename:((g=this._fullReader)==null?void 0:g.filename)??null,contentLength:((T=this._fullReader)==null?void 0:T.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(f=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const g of Q(this,c).values())if(!g.cleanup())throw new Error(`startCleanup: Page ${g.pageNumber} is currently rendering.`);this.commonObjs.clear(),f||this.fontLoader.clear(),Me(this,S,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const f=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:f.disableAutoFetch,enableXfa:f.enableXfa})}}l=new WeakMap,c=new WeakMap,p=new WeakMap,S=new WeakMap;class PDFObjects{constructor(){ke(this,d);ke(this,_,Object.create(null))}get(f,g=null){if(g){const U=Re(this,d,xl).call(this,f);return U.capability.promise.then(()=>g(U.data)),null}const T=Q(this,_)[f];if(!(T!=null&&T.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${f}.`);return T.data}has(f){const g=Q(this,_)[f];return(g==null?void 0:g.capability.settled)||!1}resolve(f,g=null){const T=Re(this,d,xl).call(this,f);T.data=g,T.capability.resolve()}clear(){Me(this,_,Object.create(null))}}_=new WeakMap,d=new WeakSet,xl=function(f){const g=Q(this,_)[f];return g||(Q(this,_)[f]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(f){ke(this,P,null);Me(this,P,f),this.onContinue=null}get promise(){return Q(this,P).capability.promise}cancel(){Q(this,P).cancel()}get separateAnnots(){const{separateAnnots:f}=Q(this,P).operatorList;if(!f)return!1;const{annotationCanvasMap:g}=Q(this,P);return f.form||f.canvas&&(g==null?void 0:g.size)>0}}P=new WeakMap,exports.RenderTask=RenderTask;const k=class k{constructor({callback:f,params:g,objs:T,commonObjs:U,annotationCanvasMap:N,operatorList:M,pageIndex:y,canvasFactory:A,useRequestAnimationFrame:m=!1,pdfBug:R=!1,pageColors:C=null}){this.callback=f,this.params=g,this.objs=T,this.commonObjs=U,this.annotationCanvasMap=N,this.operatorListIdx=null,this.operatorList=M,this._pageIndex=y,this.canvasFactory=A,this._pdfBug=R,this.pageColors=C,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=g.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:f=!1,optionalContentConfig:g}){var A;if(this.cancelled)return;if(this._canvas){if(Q(k,O).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Q(k,O).add(this._canvas)}this._pdfBug&&((A=globalThis.StepperManager)!=null&&A.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:T,viewport:U,transform:N,imageLayer:M,background:y}=this.params;this.gfx=new _canvas.CanvasGraphics(T,this.commonObjs,this.objs,this.canvasFactory,M,g,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:N,viewport:U,transparency:f,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(f=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Q(k,O).delete(this._canvas),this.callback(f||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Q(k,O).delete(this._canvas),this.callback())))}};O=new WeakMap,ke(k,O,new WeakSet);let InternalRenderTask=k;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(o,i,r)=>{var _,bd,v;Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var a=r(1),l=r(6),c=r(10);class p{constructor(){ke(this,_);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(O,k){const E=this._storage.get(O);return E===void 0?k:Object.assign(k,E)}getRawValue(O){return this._storage.get(O)}remove(O){if(this._storage.delete(O),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const k of this._storage.values())if(k instanceof l.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(O,k){const E=this._storage.get(O);let f=!1;if(E!==void 0)for(const[g,T]of Object.entries(k))E[g]!==T&&(f=!0,E[g]=T);else f=!0,this._storage.set(O,k);f&&Re(this,_,bd).call(this),k instanceof l.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(k.constructor._type)}has(O){return this._storage.has(O)}getAll(){return this._storage.size>0?(0,a.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new S(this)}get serializable(){if(this._storage.size===0)return null;const O=new Map;for(const[k,E]of this._storage){const f=E instanceof l.AnnotationEditor?E.serialize():E;f&&O.set(k,f)}return O}static getHash(O){if(!O)return"";const k=new c.MurmurHash3_64;for(const[E,f]of O)k.update(`${E}:${JSON.stringify(f)}`);return k.hexdigest()}}_=new WeakSet,bd=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=p;class S extends p{constructor(k){super();ke(this,v,null);Me(this,v,structuredClone(k.serializable))}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Q(this,v)}}v=new WeakMap,i.PrintAnnotationStorage=S},(o,i,r)=>{var p,S,_,d,v,P;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var a=r(7),l=r(1);const O=class O{constructor(E){ke(this,p,this.focusin.bind(this));ke(this,S,this.focusout.bind(this));ke(this,_,!1);ke(this,d,!1);ke(this,v,!1);ke(this,P,O._zIndex++);this.constructor===O&&(0,l.unreachable)("Cannot initialize AnnotationEditor."),this.parent=E.parent,this.id=E.id,this.width=this.height=null,this.pageIndex=E.parent.pageIndex,this.name=E.name,this.div=null;const[f,g]=this.parent.viewportBaseDimensions;this.x=E.x/f,this.y=E.y/g,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,l.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Q(this,P)}focusin(E){Q(this,_)?Me(this,_,!1):this.parent.setSelected(this)}focusout(E){if(!this.isAttachedToDOM)return;const f=E.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(E.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(E){const f=this.parent.div.getBoundingClientRect();this.startX=E.clientX-f.x,this.startY=E.clientY-f.y,E.dataTransfer.setData("text/plain",this.id),E.dataTransfer.effectAllowed="move"}setAt(E,f,g,T){const[U,N]=this.parent.viewportBaseDimensions;[g,T]=this.screenToPageTranslation(g,T),this.x=(E+g)/U,this.y=(f+T)/N,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(E,f){const[g,T]=this.parent.viewportBaseDimensions;[E,f]=this.screenToPageTranslation(E,f),this.x+=E/g,this.y+=f/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(E,f){const{rotation:g}=this.parent.viewport;switch(g){case 90:return[f,-E];case 180:return[-E,-f];case 270:return[-f,E];default:return[E,f]}}setDims(E,f){const[g,T]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*E/g}%`,this.div.style.height=`${100*f/T}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Q(this,p)),this.div.addEventListener("focusout",Q(this,S));const[E,f]=this.getInitialTranslation();return this.translate(E,f),(0,a.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(E){const f=a.KeyboardManager.platform.isMac;if(E.button!==0||E.ctrlKey&&f){E.preventDefault();return}E.ctrlKey&&!f||E.shiftKey||E.metaKey&&f?this.parent.toggleSelected(this):this.parent.setSelected(this),Me(this,_,!0)}getRect(E,f){const[g,T]=this.parent.viewportBaseDimensions,[U,N]=this.parent.pageDimensions,M=U*E/g,y=N*f/T,A=this.x*U,m=this.y*N,R=this.width*U,C=this.height*N;switch(this.rotation){case 0:return[A+M,N-m-y-C,A+M+R,N-m-y];case 90:return[A+y,N-m+M,A+y+C,N-m+M+R];case 180:return[A-M-R,N-m+y,A-M,N-m+y+C];case 270:return[A-y-C,N-m-M-R,A-y,N-m-M];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(E,f){const[g,T,U,N]=E,M=U-g,y=N-T;switch(this.rotation){case 0:return[g,f-N,M,y];case 90:return[g,f-T,y,M];case 180:return[U,f-T,M,y];case 270:return[U,f-N,y,M];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Me(this,v,!0)}disableEditMode(){Me(this,v,!1)}isInEditMode(){return Q(this,v)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var E;(E=this.div)==null||E.addEventListener("focusin",Q(this,p))}serialize(){(0,l.unreachable)("An editor must be serializable")}static deserialize(E,f){const g=new this.prototype.constructor({parent:f,id:f.getNextId()});g.rotation=E.rotation;const[T,U]=f.pageDimensions,[N,M,y,A]=g.getRectInCurrentCoords(E.rect,U);return g.x=N/T,g.y=M/U,g.width=y/T,g.height=A/U,g}remove(){this.div.removeEventListener("focusin",Q(this,p)),this.div.removeEventListener("focusout",Q(this,S)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var E;(E=this.div)==null||E.classList.add("selectedEditor")}unselect(){var E;(E=this.div)==null||E.classList.remove("selectedEditor")}updateParams(E,f){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return Q(this,d)}set isEditing(E){Me(this,d,E),E?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};p=new WeakMap,S=new WeakMap,_=new WeakMap,d=new WeakMap,v=new WeakMap,P=new WeakMap,_t(O,"_colorManager",new a.ColorManager),_t(O,"_zIndex",1);let c=O;i.AnnotationEditor=c},(o,i,r)=>{var k,E,f,g,T,U,vd,y,m,R,C,B,V,oe,_e,he,ue,W,ee,ne,ae,G,re,Y,x,w,Ed,Ol,Yt,oa,Ad,Sd,kl,la,mr;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=c,i.opacityToHex=p;var a=r(1),l=r(8);function c($,F,Z){for(const ce of Z)F.addEventListener(ce,$[ce].bind($))}function p($){return Math.round(Math.min(255,Math.max(1,255*$))).toString(16).padStart(2,"0")}class S{constructor(){ke(this,k,0)}getId(){return`${a.AnnotationEditorPrefix}${Rl(this,k)._++}`}}k=new WeakMap;class _{constructor(F=128){ke(this,E,[]);ke(this,f,!1);ke(this,g);ke(this,T,-1);Me(this,g,F)}add({cmd:F,undo:Z,mustExec:ce,type:ie=NaN,overwriteIfSameType:fe=!1,keepUndo:be=!1}){if(ce&&F(),Q(this,f))return;const Ae={cmd:F,undo:Z,type:ie};if(Q(this,T)===-1){Q(this,E).length>0&&(Q(this,E).length=0),Me(this,T,0),Q(this,E).push(Ae);return}if(fe&&Q(this,E)[Q(this,T)].type===ie){be&&(Ae.undo=Q(this,E)[Q(this,T)].undo),Q(this,E)[Q(this,T)]=Ae;return}const Oe=Q(this,T)+1;Oe===Q(this,g)?Q(this,E).splice(0,1):(Me(this,T,Oe),Oe<Q(this,E).length&&Q(this,E).splice(Oe)),Q(this,E).push(Ae)}undo(){Q(this,T)!==-1&&(Me(this,f,!0),Q(this,E)[Q(this,T)].undo(),Me(this,f,!1),Me(this,T,Q(this,T)-1))}redo(){Q(this,T)<Q(this,E).length-1&&(Me(this,T,Q(this,T)+1),Me(this,f,!0),Q(this,E)[Q(this,T)].cmd(),Me(this,f,!1))}hasSomethingToUndo(){return Q(this,T)!==-1}hasSomethingToRedo(){return Q(this,T)<Q(this,E).length-1}destroy(){Me(this,E,null)}}E=new WeakMap,f=new WeakMap,g=new WeakMap,T=new WeakMap,i.CommandManager=_;const M=class M{constructor(F){ke(this,U);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Z=M.platform.isMac;for(const[ce,ie]of F)for(const fe of ce){const be=fe.startsWith("mac+");Z&&be?(this.callbacks.set(fe.slice(4),ie),this.allKeys.add(fe.split("+").at(-1))):!Z&&!be&&(this.callbacks.set(fe,ie),this.allKeys.add(fe.split("+").at(-1)))}}static get platform(){const F=typeof navigator<"u"?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:F.includes("Win"),isMac:F.includes("Mac")})}exec(F,Z){if(!this.allKeys.has(Z.key))return;const ce=this.callbacks.get(Re(this,U,vd).call(this,Z));ce&&(ce.bind(F)(),Z.stopPropagation(),Z.preventDefault())}};U=new WeakSet,vd=function(F){F.altKey&&this.buffer.push("alt"),F.ctrlKey&&this.buffer.push("ctrl"),F.metaKey&&this.buffer.push("meta"),F.shiftKey&&this.buffer.push("shift"),this.buffer.push(F.key);const Z=this.buffer.join("+");return this.buffer.length=0,Z};let d=M;i.KeyboardManager=d;class v{constructor(){ke(this,y,null)}copy(F){F&&(Array.isArray(F)?Me(this,y,F.map(Z=>Z.serialize())):Me(this,y,[F.serialize()]),Me(this,y,Q(this,y).filter(Z=>!!Z)),Q(this,y).length===0&&Me(this,y,null))}paste(){return Q(this,y)}isEmpty(){return Q(this,y)===null}destroy(){Me(this,y,null)}}y=new WeakMap;const A=class A{get _colors(){const F=new Map([["CanvasText",null],["Canvas",null]]);return(0,l.getColorValues)(F),(0,a.shadow)(this,"_colors",F)}convert(F){const Z=(0,l.getRGB)(F);if(!window.matchMedia("(forced-colors: active)").matches)return Z;for(const[ce,ie]of this._colors)if(ie.every((fe,be)=>fe===Z[be]))return A._colorsMapping.get(ce);return Z}getHexCode(F){const Z=this._colors.get(F);return Z?a.Util.makeHexColor(...Z):F}};_t(A,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let P=A;i.ColorManager=P;const J=class J{constructor(F,Z){ke(this,w);ke(this,m,null);ke(this,R,new Map);ke(this,C,new Map);ke(this,B,new v);ke(this,V,new _);ke(this,oe,0);ke(this,_e,null);ke(this,he,null);ke(this,ue,new S);ke(this,W,!1);ke(this,ee,a.AnnotationEditorType.NONE);ke(this,ne,new Set);ke(this,ae,this.keydown.bind(this));ke(this,G,this.onEditingAction.bind(this));ke(this,re,this.onPageChanging.bind(this));ke(this,Y,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ke(this,x,null);Me(this,x,F),Me(this,he,Z),Q(this,he)._on("editingaction",Q(this,G)),Q(this,he)._on("pagechanging",Q(this,re))}destroy(){Re(this,w,Ol).call(this),Q(this,he)._off("editingaction",Q(this,G)),Q(this,he)._off("pagechanging",Q(this,re));for(const F of Q(this,C).values())F.destroy();Q(this,C).clear(),Q(this,R).clear(),Me(this,m,null),Q(this,ne).clear(),Q(this,B).destroy(),Q(this,V).destroy()}onPageChanging({pageNumber:F}){Me(this,oe,F-1)}focusMainContainer(){Q(this,x).focus()}keydown(F){var Z;(Z=this.getActive())!=null&&Z.shouldGetKeyboardEvents()||J._keyboardManager.exec(this,F)}onEditingAction(F){["undo","redo","cut","copy","paste","delete","selectAll"].includes(F.name)&&this[F.name]()}setEditingState(F){F?(Re(this,w,Ed).call(this),Re(this,w,Yt).call(this,{isEditing:Q(this,ee)!==a.AnnotationEditorType.NONE,isEmpty:Re(this,w,la).call(this),hasSomethingToUndo:Q(this,V).hasSomethingToUndo(),hasSomethingToRedo:Q(this,V).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:Q(this,B).isEmpty()})):(Re(this,w,Ol).call(this),Re(this,w,Yt).call(this,{isEditing:!1}))}registerEditorTypes(F){Me(this,_e,F);for(const Z of Q(this,_e))Re(this,w,oa).call(this,Z.defaultPropertiesToUpdate)}getId(){return Q(this,ue).getId()}addLayer(F){Q(this,C).set(F.pageIndex,F),Q(this,W)?F.enable():F.disable()}removeLayer(F){Q(this,C).delete(F.pageIndex)}updateMode(F){if(Me(this,ee,F),F===a.AnnotationEditorType.NONE)this.setEditingState(!1),Re(this,w,Sd).call(this);else{this.setEditingState(!0),Re(this,w,Ad).call(this);for(const Z of Q(this,C).values())Z.updateMode(F)}}updateToolbar(F){F!==Q(this,ee)&&Q(this,he).dispatch("switchannotationeditormode",{source:this,mode:F})}updateParams(F,Z){for(const ce of Q(this,ne))ce.updateParams(F,Z);for(const ce of Q(this,_e))ce.updateDefaultParams(F,Z)}getEditors(F){const Z=[];for(const ce of Q(this,R).values())ce.pageIndex===F&&Z.push(ce);return Z}getEditor(F){return Q(this,R).get(F)}addEditor(F){Q(this,R).set(F.id,F)}removeEditor(F){Q(this,R).delete(F.id),this.unselect(F)}setActiveEditor(F){Q(this,m)!==F&&(Me(this,m,F),F&&Re(this,w,oa).call(this,F.propertiesToUpdate))}toggleSelected(F){if(Q(this,ne).has(F)){Q(this,ne).delete(F),F.unselect(),Re(this,w,Yt).call(this,{hasSelectedEditor:this.hasSelection});return}Q(this,ne).add(F),F.select(),Re(this,w,oa).call(this,F.propertiesToUpdate),Re(this,w,Yt).call(this,{hasSelectedEditor:!0})}setSelected(F){for(const Z of Q(this,ne))Z!==F&&Z.unselect();Q(this,ne).clear(),Q(this,ne).add(F),F.select(),Re(this,w,oa).call(this,F.propertiesToUpdate),Re(this,w,Yt).call(this,{hasSelectedEditor:!0})}isSelected(F){return Q(this,ne).has(F)}unselect(F){F.unselect(),Q(this,ne).delete(F),Re(this,w,Yt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Q(this,ne).size!==0}undo(){Q(this,V).undo(),Re(this,w,Yt).call(this,{hasSomethingToUndo:Q(this,V).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Re(this,w,la).call(this)})}redo(){Q(this,V).redo(),Re(this,w,Yt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Q(this,V).hasSomethingToRedo(),isEmpty:Re(this,w,la).call(this)})}addCommands(F){Q(this,V).add(F),Re(this,w,Yt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Re(this,w,la).call(this)})}delete(){if(Q(this,m)&&Q(this,m).commitOrRemove(),!this.hasSelection)return;const F=[...Q(this,ne)],Z=()=>{for(const ie of F)ie.remove()},ce=()=>{for(const ie of F)Re(this,w,kl).call(this,ie)};this.addCommands({cmd:Z,undo:ce,mustExec:!0})}copy(){if(Q(this,m)&&Q(this,m).commitOrRemove(),this.hasSelection){const F=[];for(const Z of Q(this,ne))Z.isEmpty()||F.push(Z);if(F.length===0)return;Q(this,B).copy(F),Re(this,w,Yt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(Q(this,B).isEmpty())return;this.unselectAll();const F=Q(this,C).get(Q(this,oe)),Z=Q(this,B).paste().map(fe=>F.deserialize(fe)),ce=()=>{for(const fe of Z)Re(this,w,kl).call(this,fe);Re(this,w,mr).call(this,Z)},ie=()=>{for(const fe of Z)fe.remove()};this.addCommands({cmd:ce,undo:ie,mustExec:!0})}selectAll(){for(const F of Q(this,ne))F.commit();Re(this,w,mr).call(this,Q(this,R).values())}unselectAll(){if(Q(this,m)){Q(this,m).commitOrRemove();return}if(Re(this,w,mr).size!==0){for(const F of Q(this,ne))F.unselect();Q(this,ne).clear(),Re(this,w,Yt).call(this,{hasSelectedEditor:!1})}}isActive(F){return Q(this,m)===F}getActive(){return Q(this,m)}getMode(){return Q(this,ee)}};m=new WeakMap,R=new WeakMap,C=new WeakMap,B=new WeakMap,V=new WeakMap,oe=new WeakMap,_e=new WeakMap,he=new WeakMap,ue=new WeakMap,W=new WeakMap,ee=new WeakMap,ne=new WeakMap,ae=new WeakMap,G=new WeakMap,re=new WeakMap,Y=new WeakMap,x=new WeakMap,w=new WeakSet,Ed=function(){Q(this,x).addEventListener("keydown",Q(this,ae))},Ol=function(){Q(this,x).removeEventListener("keydown",Q(this,ae))},Yt=function(F){Object.entries(F).some(([ce,ie])=>Q(this,Y)[ce]!==ie)&&Q(this,he).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Q(this,Y),F)})},oa=function(F){Q(this,he).dispatch("annotationeditorparamschanged",{source:this,details:F})},Ad=function(){if(!Q(this,W)){Me(this,W,!0);for(const F of Q(this,C).values())F.enable()}},Sd=function(){if(this.unselectAll(),Q(this,W)){Me(this,W,!1);for(const F of Q(this,C).values())F.disable()}},kl=function(F){const Z=Q(this,C).get(F.pageIndex);Z?Z.addOrRebuild(F):this.addEditor(F)},la=function(){if(Q(this,R).size===0)return!0;if(Q(this,R).size===1)for(const F of Q(this,R).values())return F.isEmpty();return!1},mr=function(F){Q(this,ne).clear();for(const Z of F)Z.isEmpty()||(Q(this,ne).add(Z),Z.select());Re(this,w,Yt).call(this,{hasSelectedEditor:!0})},_t(J,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],J.prototype.selectAll],[["ctrl+c","mac+meta+c"],J.prototype.copy],[["ctrl+v","mac+meta+v"],J.prototype.paste],[["ctrl+x","mac+meta+x"],J.prototype.cut],[["ctrl+z","mac+meta+z"],J.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],J.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],J.prototype.delete],[["Escape","mac+Escape"],J.prototype.unselectAll]]));let O=J;i.AnnotationEditorUIManager=O},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=A,i.getColorValues=V,i.getCurrentTransform=oe,i.getCurrentTransformInverse=_e,i.getFilenameFromUrl=T,i.getPdfFilenameFromUrl=U,i.getRGB=B,i.getXfaPageViewport=C,i.isDataScheme=f,i.isPdfFile=g,i.isValidFetchUrl=M,i.loadScript=y;var a=r(9),l=r(1);const c="http://www.w3.org/2000/svg",p="pdfjs_internal_id_";i.AnnotationPrefix=p;const he=class he{};_t(he,"CSS",96),_t(he,"PDF",72),_t(he,"PDF_TO_CSS_UNITS",he.CSS/he.PDF);let S=he;i.PixelsPerInch=S;class _ extends a.BaseCanvasFactory{constructor({ownerDocument:W=globalThis.document}={}){super(),this._document=W}_createCanvas(W,ee){const ne=this._document.createElement("canvas");return ne.width=W,ne.height=ee,ne}}i.DOMCanvasFactory=_;async function d(ue,W=!1){if(M(ue,document.baseURI)){const ee=await fetch(ue);if(!ee.ok)throw new Error(ee.statusText);return W?new Uint8Array(await ee.arrayBuffer()):(0,l.stringToBytes)(await ee.text())}return new Promise((ee,ne)=>{const ae=new XMLHttpRequest;ae.open("GET",ue,!0),W&&(ae.responseType="arraybuffer"),ae.onreadystatechange=()=>{if(ae.readyState===XMLHttpRequest.DONE){if(ae.status===200||ae.status===0){let G;if(W&&ae.response?G=new Uint8Array(ae.response):!W&&ae.responseText&&(G=(0,l.stringToBytes)(ae.responseText)),G){ee(G);return}}ne(new Error(ae.statusText))}},ae.send(null)})}class v extends a.BaseCMapReaderFactory{_fetchData(W,ee){return d(W,this.isCompressed).then(ne=>({cMapData:ne,compressionType:ee}))}}i.DOMCMapReaderFactory=v;class P extends a.BaseStandardFontDataFactory{_fetchData(W){return d(W,!0)}}i.DOMStandardFontDataFactory=P;class O extends a.BaseSVGFactory{_createSVG(W){return document.createElementNS(c,W)}}i.DOMSVGFactory=O;class k{constructor({viewBox:W,scale:ee,rotation:ne,offsetX:ae=0,offsetY:G=0,dontFlip:re=!1}){this.viewBox=W,this.scale=ee,this.rotation=ne,this.offsetX=ae,this.offsetY=G;const Y=(W[2]+W[0])/2,x=(W[3]+W[1])/2;let w,q,K,te;switch(ne%=360,ne<0&&(ne+=360),ne){case 180:w=-1,q=0,K=0,te=1;break;case 90:w=0,q=1,K=1,te=0;break;case 270:w=0,q=-1,K=-1,te=0;break;case 0:w=1,q=0,K=0,te=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}re&&(K=-K,te=-te);let X,b,L,j;w===0?(X=Math.abs(x-W[1])*ee+ae,b=Math.abs(Y-W[0])*ee+G,L=Math.abs(W[3]-W[1])*ee,j=Math.abs(W[2]-W[0])*ee):(X=Math.abs(Y-W[0])*ee+ae,b=Math.abs(x-W[1])*ee+G,L=Math.abs(W[2]-W[0])*ee,j=Math.abs(W[3]-W[1])*ee),this.transform=[w*ee,q*ee,K*ee,te*ee,X-w*ee*Y-K*ee*x,b-q*ee*Y-te*ee*x],this.width=L,this.height=j}clone({scale:W=this.scale,rotation:ee=this.rotation,offsetX:ne=this.offsetX,offsetY:ae=this.offsetY,dontFlip:G=!1}={}){return new k({viewBox:this.viewBox.slice(),scale:W,rotation:ee,offsetX:ne,offsetY:ae,dontFlip:G})}convertToViewportPoint(W,ee){return l.Util.applyTransform([W,ee],this.transform)}convertToViewportRectangle(W){const ee=l.Util.applyTransform([W[0],W[1]],this.transform),ne=l.Util.applyTransform([W[2],W[3]],this.transform);return[ee[0],ee[1],ne[0],ne[1]]}convertToPdfPoint(W,ee){return l.Util.applyInverseTransform([W,ee],this.transform)}}i.PageViewport=k;class E extends l.BaseException{constructor(W,ee){super(W,"RenderingCancelledException"),this.type=ee}}i.RenderingCancelledException=E;function f(ue){const W=ue.length;let ee=0;for(;ee<W&&ue[ee].trim()==="";)ee++;return ue.substring(ee,ee+5).toLowerCase()==="data:"}function g(ue){return typeof ue=="string"&&/\.pdf$/i.test(ue)}function T(ue){const W=ue.indexOf("#"),ee=ue.indexOf("?"),ne=Math.min(W>0?W:ue.length,ee>0?ee:ue.length);return ue.substring(ue.lastIndexOf("/",ne)+1,ne)}function U(ue,W="document.pdf"){if(typeof ue!="string")return W;if(f(ue))return(0,l.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),W;const ee=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ne=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ae=ee.exec(ue);let G=ne.exec(ae[1])||ne.exec(ae[2])||ne.exec(ae[3]);if(G&&(G=G[0],G.includes("%")))try{G=ne.exec(decodeURIComponent(G))[0]}catch{}return G||W}class N{constructor(){this.started=Object.create(null),this.times=[]}time(W){W in this.started&&(0,l.warn)(`Timer is already running for ${W}`),this.started[W]=Date.now()}timeEnd(W){W in this.started||(0,l.warn)(`Timer has not been started for ${W}`),this.times.push({name:W,start:this.started[W],end:Date.now()}),delete this.started[W]}toString(){const W=[];let ee=0;for(const ne of this.times){const ae=ne.name;ae.length>ee&&(ee=ae.length)}for(const ne of this.times){const ae=ne.end-ne.start;W.push(`${ne.name.padEnd(ee)} ${ae}ms
`)}return W.join("")}}i.StatTimer=N;function M(ue,W){try{const{protocol:ee}=W?new URL(ue,W):new URL(ue);return ee==="http:"||ee==="https:"}catch{return!1}}function y(ue,W=!1){return new Promise((ee,ne)=>{const ae=document.createElement("script");ae.src=ue,ae.onload=function(G){W&&ae.remove(),ee(G)},ae.onerror=function(){ne(new Error(`Cannot load script at: ${ae.src}`))},(document.head||document.documentElement).append(ae)})}function A(ue){console.log("Deprecated API usage: "+ue)}let m;class R{static toDateObject(W){if(!W||typeof W!="string")return null;m||(m=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const ee=m.exec(W);if(!ee)return null;const ne=parseInt(ee[1],10);let ae=parseInt(ee[2],10);ae=ae>=1&&ae<=12?ae-1:0;let G=parseInt(ee[3],10);G=G>=1&&G<=31?G:1;let re=parseInt(ee[4],10);re=re>=0&&re<=23?re:0;let Y=parseInt(ee[5],10);Y=Y>=0&&Y<=59?Y:0;let x=parseInt(ee[6],10);x=x>=0&&x<=59?x:0;const w=ee[7]||"Z";let q=parseInt(ee[8],10);q=q>=0&&q<=23?q:0;let K=parseInt(ee[9],10)||0;return K=K>=0&&K<=59?K:0,w==="-"?(re+=q,Y+=K):w==="+"&&(re-=q,Y-=K),new Date(Date.UTC(ne,ae,G,re,Y,x))}}i.PDFDateString=R;function C(ue,{scale:W=1,rotation:ee=0}){const{width:ne,height:ae}=ue.attributes.style,G=[0,0,parseInt(ne),parseInt(ae)];return new k({viewBox:G,scale:W,rotation:ee})}function B(ue){if(ue.startsWith("#")){const W=parseInt(ue.slice(1),16);return[(W&16711680)>>16,(W&65280)>>8,W&255]}return ue.startsWith("rgb(")?ue.slice(4,-1).split(",").map(W=>parseInt(W)):ue.startsWith("rgba(")?ue.slice(5,-1).split(",").map(W=>parseInt(W)).slice(0,3):((0,l.warn)(`Not a valid color format: "${ue}"`),[0,0,0])}function V(ue){const W=document.createElement("span");W.style.visibility="hidden",document.body.append(W);for(const ee of ue.keys()){W.style.color=ee;const ne=window.getComputedStyle(W).color;ue.set(ee,B(ne))}W.remove()}function oe(ue){const{a:W,b:ee,c:ne,d:ae,e:G,f:re}=ue.getTransform();return[W,ee,ne,ae,G,re]}function _e(ue){const{a:W,b:ee,c:ne,d:ae,e:G,f:re}=ue.getTransform().invertSelf();return[W,ee,ne,ae,G,re]}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var a=r(1);class l{constructor(){this.constructor===l&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,v){if(d<=0||v<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(d,v);return{canvas:P,context:P.getContext("2d")}}reset(d,v,P){if(!d.canvas)throw new Error("Canvas is not specified");if(v<=0||P<=0)throw new Error("Invalid canvas size");d.canvas.width=v,d.canvas.height=P}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,v){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=l;class c{constructor({baseUrl:d=null,isCompressed:v=!1}){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=v}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const v=this.baseUrl+d+(this.isCompressed?".bcmap":""),P=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(v,P).catch(O=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${v}`)})}_fetchData(d,v){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=c;class p{constructor({baseUrl:d=null}){this.constructor===p&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const v=`${this.baseUrl}${d}`;return this._fetchData(v).catch(P=>{throw new Error(`Unable to load font data at: ${v}`)})}_fetchData(d){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=p;class S{constructor(){this.constructor===S&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,v,P=!1){if(d<=0||v<=0)throw new Error("Invalid SVG dimensions");const O=this._createSVG("svg:svg");return O.setAttribute("version","1.1"),P||(O.setAttribute("width",`${d}px`),O.setAttribute("height",`${v}px`)),O.setAttribute("preserveAspectRatio","none"),O.setAttribute("viewBox",`0 0 ${d} ${v}`),O}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,a.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=S},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var a=r(1);const l=3285377520,c=4294901760,p=65535;class S{constructor(d){this.h1=d?d&4294967295:l,this.h2=d?d&4294967295:l}update(d){let v,P;if(typeof d=="string"){v=new Uint8Array(d.length*2),P=0;for(let m=0,R=d.length;m<R;m++){const C=d.charCodeAt(m);C<=255?v[P++]=C:(v[P++]=C>>>8,v[P++]=C&255)}}else if((0,a.isArrayBuffer)(d))v=d.slice(),P=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const O=P>>2,k=P-O*4,E=new Uint32Array(v.buffer,0,O);let f=0,g=0,T=this.h1,U=this.h2;const N=3432918353,M=461845907,y=N&p,A=M&p;for(let m=0;m<O;m++)m&1?(f=E[m],f=f*N&c|f*y&p,f=f<<15|f>>>17,f=f*M&c|f*A&p,T^=f,T=T<<13|T>>>19,T=T*5+3864292196):(g=E[m],g=g*N&c|g*y&p,g=g<<15|g>>>17,g=g*M&c|g*A&p,U^=g,U=U<<13|U>>>19,U=U*5+3864292196);switch(f=0,k){case 3:f^=v[O*4+2]<<16;case 2:f^=v[O*4+1]<<8;case 1:f^=v[O*4],f=f*N&c|f*y&p,f=f<<15|f>>>17,f=f*M&c|f*A&p,O&1?T^=f:U^=f}this.h1=T,this.h2=U}hexdigest(){let d=this.h1,v=this.h2;d^=v>>>1,d=d*3981806797&c|d*36045&p,v=v*4283543511&c|((v<<16|d>>>16)*2950163797&c)>>>16,d^=v>>>1,d=d*444984403&c|d*60499&p,v=v*3301882366&c|((v<<16|d>>>16)*3120437893&c)>>>16,d^=v>>>1;const P=(d>>>0).toString(16),O=(v>>>0).toString(16);return P.padStart(8,"0")+O.padStart(8,"0")}}i.MurmurHash3_64=S},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var a=r(1);class l{constructor({docId:_,onUnsupportedFeature:d,ownerDocument:v=globalThis.document,styleElement:P=null}){this.constructor===l&&(0,a.unreachable)("Cannot initialize BaseFontLoader."),this.docId=_,this._onUnsupportedFeature=d,this._document=v,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(_){this.nativeFontFaces.push(_),this._document.fonts.add(_)}insertRule(_){let d=this.styleElement;d||(d=this.styleElement=this._document.createElement("style"),d.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(d));const v=d.sheet;v.insertRule(_,v.cssRules.length)}clear(){for(const _ of this.nativeFontFaces)this._document.fonts.delete(_);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(_){if(_.attached||_.missingFile)return;if(_.attached=!0,this.isFontLoadingAPISupported){const v=_.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(P){throw this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,a.warn)(`Failed to load font '${v.family}': '${P}'.`),_.disableFontFace=!0,P}}return}const d=_.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const P=this._queueLoadingCallback(v);this._prepareFontLoadEvent([d],[_],P)})}}_queueLoadingCallback(_){(0,a.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var d;const _=!!((d=this._document)!=null&&d.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",_)}get isSyncFontLoadingSupported(){(0,a.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,a.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(_,d,v){(0,a.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let c;i.FontLoader=c,i.FontLoader=c=class extends l{constructor(_){super(_),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let _=!1;if(typeof navigator>"u")_=!0;else{const d=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(d==null?void 0:d[1])>=14&&(_=!0)}return(0,a.shadow)(this,"isSyncFontLoadingSupported",_)}_queueLoadingCallback(_){function d(){for((0,a.assert)(!P.done,"completeRequest() cannot be called twice."),P.done=!0;v.requests.length>0&&v.requests[0].done;){const O=v.requests.shift();setTimeout(O.callback,0)}}const v=this.loadingContext,P={id:`pdfjs-font-loading-${v.nextRequestId++}`,done:!1,complete:d,callback:_};return v.requests.push(P),P}get _loadTestFont(){const _=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,a.shadow)(this,"_loadTestFont",_())}_prepareFontLoadEvent(_,d,v){function P(_e,he){return _e.charCodeAt(he)<<24|_e.charCodeAt(he+1)<<16|_e.charCodeAt(he+2)<<8|_e.charCodeAt(he+3)&255}function O(_e,he,ue,W){const ee=_e.substring(0,he),ne=_e.substring(he+ue);return ee+W+ne}let k,E;const f=this._document.createElement("canvas");f.width=1,f.height=1;const g=f.getContext("2d");let T=0;function U(_e,he){if(T++,T>30){(0,a.warn)("Load test font never loaded."),he();return}if(g.font="30px "+_e,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0){he();return}setTimeout(U.bind(null,_e,he))}const N=`lt${Date.now()}${this.loadTestFontId++}`;let M=this._loadTestFont;M=O(M,976,N.length,N);const A=16,m=1482184792;let R=P(M,A);for(k=0,E=N.length-3;k<E;k+=4)R=R-m+P(N,k)|0;k<N.length&&(R=R-m+P(N+"XXX",k)|0),M=O(M,A,4,(0,a.string32)(R));const C=`url(data:font/opentype;base64,${btoa(M)});`,B=`@font-face {font-family:"${N}";src:${C}}`;this.insertRule(B);const V=[];for(const _e of d)V.push(_e.loadedName);V.push(N);const oe=this._document.createElement("div");oe.style.visibility="hidden",oe.style.width=oe.style.height="10px",oe.style.position="absolute",oe.style.top=oe.style.left="0px";for(const _e of V){const he=this._document.createElement("span");he.textContent="Hi",he.style.fontFamily=_e,oe.append(he)}this._document.body.append(oe),U(N,()=>{oe.remove(),v.complete()})}};class p{constructor(_,{isEvalSupported:d=!0,disableFontFace:v=!1,ignoreErrors:P=!1,onUnsupportedFeature:O,fontRegistry:k=null}){this.compiledGlyphs=Object.create(null);for(const E in _)this[E]=_[E];this.isEvalSupported=d!==!1,this.disableFontFace=v===!0,this.ignoreErrors=P===!0,this._onUnsupportedFeature=O,this.fontRegistry=k}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let _;if(!this.cssFontInfo)_=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),_=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this.fontRegistry&&this.fontRegistry.registerFont(this),_}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const _=(0,a.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(_)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${d}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,d),v}getPathGenerator(_,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let v;try{v=_.get(this.loadedName+"_path_"+d)}catch(P){if(!this.ignoreErrors)throw P;return this._onUnsupportedFeature({featureId:a.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,a.warn)(`getPathGenerator - ignoring character: "${P}".`),this.compiledGlyphs[d]=function(O,k){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const P=[];for(const O of v){const k=O.args!==void 0?O.args.join(","):"";P.push("c.",O.cmd,"(",k,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",P.join(""))}return this.compiledGlyphs[d]=function(P,O){for(const k of v)k.cmd==="scale"&&(k.args=[O,-O]),P[k.cmd].apply(P,k.args)}}}i.FontFaceObject=p},(o,i,r)=>{var ae,Ml;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var a=r(8),l=r(1),c=r(13),p=r(14),S=r(3);const _=16,d=100,v=4096,P=15,O=10,k=S.isNodeJS&&typeof Path2D>"u"?-1:1e3,E=16;function f(Y,x){if(Y._removeMirroring)throw new Error("Context is already forwarding operations.");Y.__originalSave=Y.save,Y.__originalRestore=Y.restore,Y.__originalRotate=Y.rotate,Y.__originalScale=Y.scale,Y.__originalTranslate=Y.translate,Y.__originalTransform=Y.transform,Y.__originalSetTransform=Y.setTransform,Y.__originalResetTransform=Y.resetTransform,Y.__originalClip=Y.clip,Y.__originalMoveTo=Y.moveTo,Y.__originalLineTo=Y.lineTo,Y.__originalBezierCurveTo=Y.bezierCurveTo,Y.__originalRect=Y.rect,Y.__originalClosePath=Y.closePath,Y.__originalBeginPath=Y.beginPath,Y._removeMirroring=()=>{Y.save=Y.__originalSave,Y.restore=Y.__originalRestore,Y.rotate=Y.__originalRotate,Y.scale=Y.__originalScale,Y.translate=Y.__originalTranslate,Y.transform=Y.__originalTransform,Y.setTransform=Y.__originalSetTransform,Y.resetTransform=Y.__originalResetTransform,Y.clip=Y.__originalClip,Y.moveTo=Y.__originalMoveTo,Y.lineTo=Y.__originalLineTo,Y.bezierCurveTo=Y.__originalBezierCurveTo,Y.rect=Y.__originalRect,Y.closePath=Y.__originalClosePath,Y.beginPath=Y.__originalBeginPath,delete Y._removeMirroring},Y.save=function(){x.save(),this.__originalSave()},Y.restore=function(){x.restore(),this.__originalRestore()},Y.translate=function(q,K){x.translate(q,K),this.__originalTranslate(q,K)},Y.scale=function(q,K){x.scale(q,K),this.__originalScale(q,K)},Y.transform=function(q,K,te,X,b,L){x.transform(q,K,te,X,b,L),this.__originalTransform(q,K,te,X,b,L)},Y.setTransform=function(q,K,te,X,b,L){x.setTransform(q,K,te,X,b,L),this.__originalSetTransform(q,K,te,X,b,L)},Y.resetTransform=function(){x.resetTransform(),this.__originalResetTransform()},Y.rotate=function(q){x.rotate(q),this.__originalRotate(q)},Y.clip=function(q){x.clip(q),this.__originalClip(q)},Y.moveTo=function(w,q){x.moveTo(w,q),this.__originalMoveTo(w,q)},Y.lineTo=function(w,q){x.lineTo(w,q),this.__originalLineTo(w,q)},Y.bezierCurveTo=function(w,q,K,te,X,b){x.bezierCurveTo(w,q,K,te,X,b),this.__originalBezierCurveTo(w,q,K,te,X,b)},Y.rect=function(w,q,K,te){x.rect(w,q,K,te),this.__originalRect(w,q,K,te)},Y.closePath=function(){x.closePath(),this.__originalClosePath()},Y.beginPath=function(){x.beginPath(),this.__originalBeginPath()}}class g{constructor(x){this.canvasFactory=x,this.cache=Object.create(null)}getCanvas(x,w,q){let K;return this.cache[x]!==void 0?(K=this.cache[x],this.canvasFactory.reset(K,w,q)):(K=this.canvasFactory.create(w,q),this.cache[x]=K),K}delete(x){delete this.cache[x]}clear(){for(const x in this.cache){const w=this.cache[x];this.canvasFactory.destroy(w),delete this.cache[x]}}}function T(Y,x,w,q,K,te,X,b,L,j){const[I,H,J,$,F,Z]=(0,a.getCurrentTransform)(Y);if(H===0&&J===0){const fe=X*I+F,be=Math.round(fe),Ae=b*$+Z,Oe=Math.round(Ae),ye=(X+L)*I+F,Ie=Math.abs(Math.round(ye)-be)||1,Le=(b+j)*$+Z,De=Math.abs(Math.round(Le)-Oe)||1;return Y.setTransform(Math.sign(I),0,0,Math.sign($),be,Oe),Y.drawImage(x,w,q,K,te,0,0,Ie,De),Y.setTransform(I,H,J,$,F,Z),[Ie,De]}if(I===0&&$===0){const fe=b*J+F,be=Math.round(fe),Ae=X*H+Z,Oe=Math.round(Ae),ye=(b+j)*J+F,Ie=Math.abs(Math.round(ye)-be)||1,Le=(X+L)*H+Z,De=Math.abs(Math.round(Le)-Oe)||1;return Y.setTransform(0,Math.sign(H),Math.sign(J),0,be,Oe),Y.drawImage(x,w,q,K,te,0,0,De,Ie),Y.setTransform(I,H,J,$,F,Z),[De,Ie]}Y.drawImage(x,w,q,K,te,X,b,L,j);const ce=Math.hypot(I,H),ie=Math.hypot(J,$);return[ce*L,ie*j]}function U(Y){const{width:x,height:w}=Y;if(x>k||w>k)return null;const q=1e3,K=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),te=x+1;let X=new Uint8Array(te*(w+1)),b,L,j;const I=x+7&-8;let H=new Uint8Array(I*w),J=0;for(const ie of Y.data){let fe=128;for(;fe>0;)H[J++]=ie&fe?0:255,fe>>=1}let $=0;for(J=0,H[J]!==0&&(X[0]=1,++$),L=1;L<x;L++)H[J]!==H[J+1]&&(X[L]=H[J]?2:1,++$),J++;for(H[J]!==0&&(X[L]=2,++$),b=1;b<w;b++){J=b*I,j=b*te,H[J-I]!==H[J]&&(X[j]=H[J]?1:8,++$);let ie=(H[J]?4:0)+(H[J-I]?8:0);for(L=1;L<x;L++)ie=(ie>>2)+(H[J+1]?4:0)+(H[J-I+1]?8:0),K[ie]&&(X[j+L]=K[ie],++$),J++;if(H[J-I]!==H[J]&&(X[j+L]=H[J]?2:4,++$),$>q)return null}for(J=I*(w-1),j=b*te,H[J]!==0&&(X[j]=8,++$),L=1;L<x;L++)H[J]!==H[J+1]&&(X[j+L]=H[J]?4:8,++$),J++;if(H[J]!==0&&(X[j+L]=4,++$),$>q)return null;const F=new Int32Array([0,te,-1,0,-te,0,0,0,1]),Z=new Path2D;for(b=0;$&&b<=w;b++){let ie=b*te;const fe=ie+x;for(;ie<fe&&!X[ie];)ie++;if(ie===fe)continue;Z.moveTo(ie%te,b);const be=ie;let Ae=X[ie];do{const Oe=F[Ae];do ie+=Oe;while(!X[ie]);const ye=X[ie];ye!==5&&ye!==10?(Ae=ye,X[ie]=0):(Ae=ye&51*Ae>>4,X[ie]&=Ae>>2|Ae<<2),Z.lineTo(ie%te,ie/te|0),X[ie]||--$}while(be!==ie);--b}return H=null,X=null,function(ie){ie.save(),ie.scale(1/x,-1/w),ie.translate(0,-w),ie.fill(Z),ie.beginPath(),ie.restore()}}class N{constructor(x,w){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=l.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=l.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,x,w])}clone(){const x=Object.create(this);return x.clipBox=this.clipBox.slice(),x}setCurrentPoint(x,w){this.x=x,this.y=w}updatePathMinMax(x,w,q){[w,q]=l.Util.applyTransform([w,q],x),this.minX=Math.min(this.minX,w),this.minY=Math.min(this.minY,q),this.maxX=Math.max(this.maxX,w),this.maxY=Math.max(this.maxY,q)}updateRectMinMax(x,w){const q=l.Util.applyTransform(w,x),K=l.Util.applyTransform(w.slice(2),x);this.minX=Math.min(this.minX,q[0],K[0]),this.minY=Math.min(this.minY,q[1],K[1]),this.maxX=Math.max(this.maxX,q[0],K[0]),this.maxY=Math.max(this.maxY,q[1],K[1])}updateScalingPathMinMax(x,w){l.Util.scaleMinMax(x,w),this.minX=Math.min(this.minX,w[0]),this.maxX=Math.max(this.maxX,w[1]),this.minY=Math.min(this.minY,w[2]),this.maxY=Math.max(this.maxY,w[3])}updateCurvePathMinMax(x,w,q,K,te,X,b,L,j,I){const H=l.Util.bezierBoundingBox(w,q,K,te,X,b,L,j);if(I){I[0]=Math.min(I[0],H[0],H[2]),I[1]=Math.max(I[1],H[0],H[2]),I[2]=Math.min(I[2],H[1],H[3]),I[3]=Math.max(I[3],H[1],H[3]);return}this.updateRectMinMax(x,H)}getPathBoundingBox(x=c.PathType.FILL,w=null){const q=[this.minX,this.minY,this.maxX,this.maxY];if(x===c.PathType.STROKE){w||(0,l.unreachable)("Stroke bounding box must include transform.");const K=l.Util.singularValueDecompose2dScale(w),te=K[0]*this.lineWidth/2,X=K[1]*this.lineWidth/2;q[0]-=te,q[1]-=X,q[2]+=te,q[3]+=X}return q}updateClipFromPath(){const x=l.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(x||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(x){this.clipBox=x,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(x=c.PathType.FILL,w=null){return l.Util.intersect(this.clipBox,this.getPathBoundingBox(x,w))}}function M(Y,x,w=null){if(typeof ImageData<"u"&&x instanceof ImageData){Y.putImageData(x,0,0);return}const q=x.height,K=x.width,te=q%E,X=(q-te)/E,b=te===0?X:X+1,L=Y.createImageData(K,E);let j=0,I;const H=x.data,J=L.data;let $,F,Z,ce,ie,fe,be,Ae;if(w)switch(w.length){case 1:ie=w[0],fe=w[0],be=w[0],Ae=w[0];break;case 4:ie=w[0],fe=w[1],be=w[2],Ae=w[3];break}if(x.kind===l.ImageKind.GRAYSCALE_1BPP){const Oe=H.byteLength,ye=new Uint32Array(J.buffer,0,J.byteLength>>2),Ie=ye.length,Le=K+7>>3;let De=4294967295,je=l.FeatureTest.isLittleEndian?4278190080:255;for(Ae&&Ae[0]===255&&Ae[255]===0&&([De,je]=[je,De]),$=0;$<b;$++){for(Z=$<X?E:te,I=0,F=0;F<Z;F++){const Ze=Oe-j;let st=0;const Ke=Ze>Le?K:Ze*8-7,Xe=Ke&-8;let Ve=0,ze=0;for(;st<Xe;st+=8)ze=H[j++],ye[I++]=ze&128?De:je,ye[I++]=ze&64?De:je,ye[I++]=ze&32?De:je,ye[I++]=ze&16?De:je,ye[I++]=ze&8?De:je,ye[I++]=ze&4?De:je,ye[I++]=ze&2?De:je,ye[I++]=ze&1?De:je;for(;st<Ke;st++)Ve===0&&(ze=H[j++],Ve=128),ye[I++]=ze&Ve?De:je,Ve>>=1}for(;I<Ie;)ye[I++]=0;Y.putImageData(L,0,$*E)}}else if(x.kind===l.ImageKind.RGBA_32BPP){const Oe=!!(ie||fe||be);for(F=0,ce=K*E*4,$=0;$<X;$++){if(J.set(H.subarray(j,j+ce)),j+=ce,Oe)for(let ye=0;ye<ce;ye+=4)ie&&(J[ye+0]=ie[J[ye+0]]),fe&&(J[ye+1]=fe[J[ye+1]]),be&&(J[ye+2]=be[J[ye+2]]);Y.putImageData(L,0,F),F+=E}if($<b){if(ce=K*te*4,J.set(H.subarray(j,j+ce)),Oe)for(let ye=0;ye<ce;ye+=4)ie&&(J[ye+0]=ie[J[ye+0]]),fe&&(J[ye+1]=fe[J[ye+1]]),be&&(J[ye+2]=be[J[ye+2]]);Y.putImageData(L,0,F)}}else if(x.kind===l.ImageKind.RGB_24BPP){const Oe=!!(ie||fe||be);for(Z=E,ce=K*Z,$=0;$<b;$++){for($>=X&&(Z=te,ce=K*Z),I=0,F=ce;F--;)J[I++]=H[j++],J[I++]=H[j++],J[I++]=H[j++],J[I++]=255;if(Oe)for(let ye=0;ye<I;ye+=4)ie&&(J[ye+0]=ie[J[ye+0]]),fe&&(J[ye+1]=fe[J[ye+1]]),be&&(J[ye+2]=be[J[ye+2]]);Y.putImageData(L,0,$*E)}}else throw new Error(`bad image kind: ${x.kind}`)}function y(Y,x){if(x.bitmap){Y.drawImage(x.bitmap,0,0);return}const w=x.height,q=x.width,K=w%E,te=(w-K)/E,X=K===0?te:te+1,b=Y.createImageData(q,E);let L=0;const j=x.data,I=b.data;for(let H=0;H<X;H++){const J=H<te?E:K;({srcPos:L}=(0,p.applyMaskImageData)({src:j,srcPos:L,dest:I,width:q,height:J})),Y.putImageData(b,0,H*E)}}function A(Y,x){const w=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let q=0,K=w.length;q<K;q++){const te=w[q];Y[te]!==void 0&&(x[te]=Y[te])}Y.setLineDash!==void 0&&(x.setLineDash(Y.getLineDash()),x.lineDashOffset=Y.lineDashOffset)}function m(Y,x){Y.strokeStyle=Y.fillStyle=x||"#000000",Y.fillRule="nonzero",Y.globalAlpha=1,Y.lineWidth=1,Y.lineCap="butt",Y.lineJoin="miter",Y.miterLimit=10,Y.globalCompositeOperation="source-over",Y.font="10px sans-serif",Y.setLineDash!==void 0&&(Y.setLineDash([]),Y.lineDashOffset=0)}function R(Y,x,w,q){const K=Y.length;for(let te=3;te<K;te+=4){const X=Y[te];if(X===0)Y[te-3]=x,Y[te-2]=w,Y[te-1]=q;else if(X<255){const b=255-X;Y[te-3]=Y[te-3]*X+x*b>>8,Y[te-2]=Y[te-2]*X+w*b>>8,Y[te-1]=Y[te-1]*X+q*b>>8}}}function C(Y,x,w){const q=Y.length,K=1/255;for(let te=3;te<q;te+=4){const X=w?w[Y[te]]:Y[te];x[te]=x[te]*X*K|0}}function B(Y,x,w){const q=Y.length;for(let K=3;K<q;K+=4){const te=Y[K-3]*77+Y[K-2]*152+Y[K-1]*28;x[K]=w?x[K]*w[te>>8]>>8:x[K]*te>>16}}function V(Y,x,w,q,K,te,X,b,L,j,I){const H=!!te,J=H?te[0]:0,$=H?te[1]:0,F=H?te[2]:0;let Z;K==="Luminosity"?Z=B:Z=C;const ie=Math.min(q,Math.ceil(1048576/w));for(let fe=0;fe<q;fe+=ie){const be=Math.min(ie,q-fe),Ae=Y.getImageData(b-j,fe+(L-I),w,be),Oe=x.getImageData(b,fe+L,w,be);H&&R(Ae.data,J,$,F),Z(Ae.data,Oe.data,X),x.putImageData(Oe,b,fe+L)}}function oe(Y,x,w,q){const K=q[0],te=q[1],X=q[2]-K,b=q[3]-te;X===0||b===0||(V(x.context,w,X,b,x.subtype,x.backdrop,x.transferMap,K,te,x.offsetX,x.offsetY),Y.save(),Y.globalAlpha=1,Y.globalCompositeOperation="source-over",Y.setTransform(1,0,0,1,0,0),Y.drawImage(w.canvas,0,0),Y.restore())}function _e(Y,x){const w=l.Util.singularValueDecompose2dScale(Y);w[0]=Math.fround(w[0]),w[1]=Math.fround(w[1]);const q=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return x!==void 0?x:w[0]<=q||w[1]<=q}const he=["butt","round","square"],ue=["miter","round","bevel"],W={},ee={},re=class re{constructor(x,w,q,K,te,X,b,L){ke(this,ae);this.ctx=x,this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=w,this.objs=q,this.canvasFactory=K,this.imageLayer=te,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=X,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=b,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(L==null?void 0:L.background)||null,this.foregroundColor=(L==null?void 0:L.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(x,w=null){return typeof x=="string"?x.startsWith("g_")?this.commonObjs.get(x):this.objs.get(x):w}beginDrawing({transform:x,viewport:w,transparency:q=!1,background:K=null}){const te=this.ctx.canvas.width,X=this.ctx.canvas.height,b=K||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const L=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const j=this.backgroundColor=this.ctx.fillStyle;let I=!0,H=b;if(this.ctx.fillStyle=b,H=this.ctx.fillStyle,I=typeof H=="string"&&/^#[0-9A-Fa-f]{6}$/.test(H),L==="#000000"&&j==="#ffffff"||L===j||!I)this.foregroundColor=this.backgroundColor=null;else{const[J,$,F]=(0,a.getRGB)(H),Z=ie=>(ie/=255,ie<=.03928?ie/12.92:((ie+.055)/1.055)**2.4),ce=Math.round(.2126*Z(J)+.7152*Z($)+.0722*Z(F));this.selectColor=(ie,fe,be)=>{const Ae=.2126*Z(ie)+.7152*Z(fe)+.0722*Z(be);return Math.round(Ae)===ce?j:L}}}if(this.ctx.fillStyle=this.backgroundColor||b,this.ctx.fillRect(0,0,te,X),this.ctx.restore(),q){const L=this.cachedCanvases.getCanvas("transparent",te,X);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),m(this.ctx,this.foregroundColor),x&&(this.ctx.transform(...x),this.outputScaleX=x[0],this.outputScaleY=x[0]),this.ctx.transform(...w.transform),this.viewportScale=w.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx),this.imageLayer&&((0,a.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(x,w,q,K){const te=x.argsArray,X=x.fnArray;let b=w||0;const L=te.length;if(L===b)return b;const j=L-b>O&&typeof q=="function",I=j?Date.now()+P:0;let H=0;const J=this.commonObjs,$=this.objs;let F;for(;;){if(K!==void 0&&b===K.nextBreakPoint)return K.breakIt(b,q),b;if(F=X[b],F!==l.OPS.dependency)this[F].apply(this,te[b]);else for(const Z of te[b]){const ce=Z.startsWith("g_")?J:$;if(!ce.has(Z))return ce.get(Z,q),b}if(b++,b===L)return b;if(j&&++H>O){if(Date.now()>I)return q(),b;H=0}}}endDrawing(){Re(this,ae,Ml).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const x of this._cachedBitmapsMap.values()){for(const w of x.values())typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement&&(w.width=w.height=0);x.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(x,w){const q=x.width,K=x.height;let te=Math.max(Math.hypot(w[0],w[1]),1),X=Math.max(Math.hypot(w[2],w[3]),1),b=q,L=K,j="prescale1",I,H;for(;te>2&&b>1||X>2&&L>1;){let J=b,$=L;te>2&&b>1&&(J=Math.ceil(b/2),te/=b/J),X>2&&L>1&&($=Math.ceil(L/2),X/=L/$),I=this.cachedCanvases.getCanvas(j,J,$),H=I.context,H.clearRect(0,0,J,$),H.drawImage(x,0,0,b,L,0,0,J,$),x=I.canvas,b=J,L=$,j=j==="prescale1"?"prescale2":"prescale1"}return{img:x,paintWidth:b,paintHeight:L}}_createMaskCanvas(x){const w=this.ctx,{width:q,height:K}=x,te=this.current.fillColor,X=this.current.patternFill,b=(0,a.getCurrentTransform)(w);let L,j,I,H;if((x.bitmap||x.data)&&x.count>1){const Ie=x.bitmap||x.data.buffer,Le=b.slice(0,4);j=JSON.stringify(X?Le:[Le,te]),L=this._cachedBitmapsMap.get(Ie),L||(L=new Map,this._cachedBitmapsMap.set(Ie,L));const De=L.get(j);if(De&&!X){const je=Math.round(Math.min(b[0],b[2])+b[4]),Ze=Math.round(Math.min(b[1],b[3])+b[5]);return{canvas:De,offsetX:je,offsetY:Ze}}I=De}I||(H=this.cachedCanvases.getCanvas("maskCanvas",q,K),y(H.context,x));let J=l.Util.transform(b,[1/q,0,0,-1/K,0,0]);J=l.Util.transform(J,[1,0,0,1,0,-K]);const $=l.Util.applyTransform([0,0],J),F=l.Util.applyTransform([q,K],J),Z=l.Util.normalizeRect([$[0],$[1],F[0],F[1]]),ce=Math.round(Z[2]-Z[0])||1,ie=Math.round(Z[3]-Z[1])||1,fe=this.cachedCanvases.getCanvas("fillCanvas",ce,ie),be=fe.context,Ae=Math.min($[0],F[0]),Oe=Math.min($[1],F[1]);be.translate(-Ae,-Oe),be.transform(...J),I||(I=this._scaleImage(H.canvas,(0,a.getCurrentTransformInverse)(be)),I=I.img,L&&X&&L.set(j,I)),be.imageSmoothingEnabled=_e((0,a.getCurrentTransform)(be),x.interpolate),T(be,I,0,0,I.width,I.height,0,0,q,K),be.globalCompositeOperation="source-in";const ye=l.Util.transform((0,a.getCurrentTransformInverse)(be),[1,0,0,1,-Ae,-Oe]);return be.fillStyle=X?te.getPattern(w,this,ye,c.PathType.FILL):te,be.fillRect(0,0,q,K),L&&!X&&(this.cachedCanvases.delete("fillCanvas"),L.set(j,fe.canvas)),{canvas:fe.canvas,offsetX:Math.round(Ae),offsetY:Math.round(Oe)}}setLineWidth(x){x!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=x,this.ctx.lineWidth=x}setLineCap(x){this.ctx.lineCap=he[x]}setLineJoin(x){this.ctx.lineJoin=ue[x]}setMiterLimit(x){this.ctx.miterLimit=x}setDash(x,w){const q=this.ctx;q.setLineDash!==void 0&&(q.setLineDash(x),q.lineDashOffset=w)}setRenderingIntent(x){}setFlatness(x){}setGState(x){for(let w=0,q=x.length;w<q;w++){const K=x[w],te=K[0],X=K[1];switch(te){case"LW":this.setLineWidth(X);break;case"LC":this.setLineCap(X);break;case"LJ":this.setLineJoin(X);break;case"ML":this.setMiterLimit(X);break;case"D":this.setDash(X[0],X[1]);break;case"RI":this.setRenderingIntent(X);break;case"FL":this.setFlatness(X);break;case"Font":this.setFont(X[0],X[1]);break;case"CA":this.current.strokeAlpha=K[1];break;case"ca":this.current.fillAlpha=K[1],this.ctx.globalAlpha=K[1];break;case"BM":this.ctx.globalCompositeOperation=X;break;case"SMask":this.current.activeSMask=X?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=X}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const x=this.inSMaskMode;this.current.activeSMask&&!x?this.beginSMaskMode():!this.current.activeSMask&&x&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const x=this.ctx.canvas.width,w=this.ctx.canvas.height,q="smaskGroupAt"+this.groupLevel,K=this.cachedCanvases.getCanvas(q,x,w);this.suspendedCtx=this.ctx,this.ctx=K.context;const te=this.ctx;te.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),A(this.suspendedCtx,te),f(te,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),A(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(x){if(!this.current.activeSMask)return;x?(x[0]=Math.floor(x[0]),x[1]=Math.floor(x[1]),x[2]=Math.ceil(x[2]),x[3]=Math.ceil(x[3])):x=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const w=this.current.activeSMask,q=this.suspendedCtx;oe(q,w,this.ctx,x),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(A(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const x=this.current;this.stateStack.push(x),this.current=x.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),A(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(x,w,q,K,te,X){this.ctx.transform(x,w,q,K,te,X),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(x,w,q){const K=this.ctx,te=this.current;let X=te.x,b=te.y,L,j;const I=(0,a.getCurrentTransform)(K),H=I[0]===0&&I[3]===0||I[1]===0&&I[2]===0,J=H?q.slice(0):null;for(let $=0,F=0,Z=x.length;$<Z;$++)switch(x[$]|0){case l.OPS.rectangle:X=w[F++],b=w[F++];const ce=w[F++],ie=w[F++],fe=X+ce,be=b+ie;K.moveTo(X,b),ce===0||ie===0?K.lineTo(fe,be):(K.lineTo(fe,b),K.lineTo(fe,be),K.lineTo(X,be)),H||te.updateRectMinMax(I,[X,b,fe,be]),K.closePath();break;case l.OPS.moveTo:X=w[F++],b=w[F++],K.moveTo(X,b),H||te.updatePathMinMax(I,X,b);break;case l.OPS.lineTo:X=w[F++],b=w[F++],K.lineTo(X,b),H||te.updatePathMinMax(I,X,b);break;case l.OPS.curveTo:L=X,j=b,X=w[F+4],b=w[F+5],K.bezierCurveTo(w[F],w[F+1],w[F+2],w[F+3],X,b),te.updateCurvePathMinMax(I,L,j,w[F],w[F+1],w[F+2],w[F+3],X,b,J),F+=6;break;case l.OPS.curveTo2:L=X,j=b,K.bezierCurveTo(X,b,w[F],w[F+1],w[F+2],w[F+3]),te.updateCurvePathMinMax(I,L,j,X,b,w[F],w[F+1],w[F+2],w[F+3],J),X=w[F+2],b=w[F+3],F+=4;break;case l.OPS.curveTo3:L=X,j=b,X=w[F+2],b=w[F+3],K.bezierCurveTo(w[F],w[F+1],X,b,X,b),te.updateCurvePathMinMax(I,L,j,w[F],w[F+1],X,b,X,b,J),F+=4;break;case l.OPS.closePath:K.closePath();break}H&&te.updateScalingPathMinMax(I,J),te.setCurrentPoint(X,b)}closePath(){this.ctx.closePath()}stroke(x){x=typeof x<"u"?x:!0;const w=this.ctx,q=this.current.strokeColor;w.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof q=="object"&&(q!=null&&q.getPattern)?(w.save(),w.strokeStyle=q.getPattern(w,this,(0,a.getCurrentTransformInverse)(w),c.PathType.STROKE),this.rescaleAndStroke(!1),w.restore()):this.rescaleAndStroke(!0)),x&&this.consumePath(this.current.getClippedPathBoundingBox()),w.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(x){x=typeof x<"u"?x:!0;const w=this.ctx,q=this.current.fillColor,K=this.current.patternFill;let te=!1;K&&(w.save(),w.fillStyle=q.getPattern(w,this,(0,a.getCurrentTransformInverse)(w),c.PathType.FILL),te=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(w.fill("evenodd"),this.pendingEOFill=!1):w.fill()),te&&w.restore(),x&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=W}eoClip(){this.pendingClip=ee}beginText(){this.current.textMatrix=l.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const x=this.pendingTextPaths,w=this.ctx;if(x===void 0){w.beginPath();return}w.save(),w.beginPath();for(const q of x)w.setTransform(...q.transform),w.translate(q.x,q.y),q.addToPath(w,q.fontSize);w.restore(),w.clip(),w.beginPath(),delete this.pendingTextPaths}setCharSpacing(x){this.current.charSpacing=x}setWordSpacing(x){this.current.wordSpacing=x}setHScale(x){this.current.textHScale=x/100}setLeading(x){this.current.leading=-x}setFont(x,w){const q=this.commonObjs.get(x),K=this.current;if(!q)throw new Error(`Can't find font for ${x}`);if(K.fontMatrix=q.fontMatrix||l.FONT_IDENTITY_MATRIX,(K.fontMatrix[0]===0||K.fontMatrix[3]===0)&&(0,l.warn)("Invalid font matrix for font "+x),w<0?(w=-w,K.fontDirection=-1):K.fontDirection=1,this.current.font=q,this.current.fontSize=w,q.isType3Font)return;const te=q.loadedName||"sans-serif";let X="normal";q.black?X="900":q.bold&&(X="bold");const b=q.italic?"italic":"normal",L=`"${te}", ${q.fallbackName}`;let j=w;w<_?j=_:w>d&&(j=d),this.current.fontSizeScale=w/j,this.ctx.font=`${b} ${X} ${j}px ${L}`}setTextRenderingMode(x){this.current.textRenderingMode=x}setTextRise(x){this.current.textRise=x}moveText(x,w){this.current.x=this.current.lineX+=x,this.current.y=this.current.lineY+=w}setLeadingMoveText(x,w){this.setLeading(-w),this.moveText(x,w)}setTextMatrix(x,w,q,K,te,X){this.current.textMatrix=[x,w,q,K,te,X],this.current.textMatrixScale=Math.hypot(x,w),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(x,w,q,K){const te=this.ctx,X=this.current,b=X.font,L=X.textRenderingMode,j=X.fontSize/X.fontSizeScale,I=L&l.TextRenderingMode.FILL_STROKE_MASK,H=!!(L&l.TextRenderingMode.ADD_TO_PATH_FLAG),J=X.patternFill&&!b.missingFile;let $;(b.disableFontFace||H||J)&&($=b.getPathGenerator(this.commonObjs,x)),b.disableFontFace||J?(te.save(),te.translate(w,q),te.beginPath(),$(te,j),K&&te.setTransform(...K),(I===l.TextRenderingMode.FILL||I===l.TextRenderingMode.FILL_STROKE)&&te.fill(),(I===l.TextRenderingMode.STROKE||I===l.TextRenderingMode.FILL_STROKE)&&te.stroke(),te.restore()):((I===l.TextRenderingMode.FILL||I===l.TextRenderingMode.FILL_STROKE)&&te.fillText(x,w,q),(I===l.TextRenderingMode.STROKE||I===l.TextRenderingMode.FILL_STROKE)&&te.strokeText(x,w,q)),H&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(te),x:w,y:q,fontSize:j,addToPath:$})}get isFontSubpixelAAEnabled(){const{context:x}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);x.scale(1.5,1),x.fillText("I",0,10);const w=x.getImageData(0,0,10,10).data;let q=!1;for(let K=3;K<w.length;K+=4)if(w[K]>0&&w[K]<255){q=!0;break}return(0,l.shadow)(this,"isFontSubpixelAAEnabled",q)}showText(x){const w=this.current,q=w.font;if(q.isType3Font)return this.showType3Text(x);const K=w.fontSize;if(K===0)return;const te=this.ctx,X=w.fontSizeScale,b=w.charSpacing,L=w.wordSpacing,j=w.fontDirection,I=w.textHScale*j,H=x.length,J=q.vertical,$=J?1:-1,F=q.defaultVMetrics,Z=K*w.fontMatrix[0],ce=w.textRenderingMode===l.TextRenderingMode.FILL&&!q.disableFontFace&&!w.patternFill;te.save(),te.transform(...w.textMatrix),te.translate(w.x,w.y+w.textRise),j>0?te.scale(I,-1):te.scale(I,1);let ie;if(w.patternFill){te.save();const ye=w.fillColor.getPattern(te,this,(0,a.getCurrentTransformInverse)(te),c.PathType.FILL);ie=(0,a.getCurrentTransform)(te),te.restore(),te.fillStyle=ye}let fe=w.lineWidth;const be=w.textMatrixScale;if(be===0||fe===0){const ye=w.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;(ye===l.TextRenderingMode.STROKE||ye===l.TextRenderingMode.FILL_STROKE)&&(fe=this.getSinglePixelWidth())}else fe/=be;X!==1&&(te.scale(X,X),fe/=X),te.lineWidth=fe;let Ae=0,Oe;for(Oe=0;Oe<H;++Oe){const ye=x[Oe];if(typeof ye=="number"){Ae+=$*ye*K/1e3;continue}let Ie=!1;const Le=(ye.isSpace?L:0)+b,De=ye.fontChar,je=ye.accent;let Ze,st,Ke=ye.width;if(J){const Ve=ye.vmetric||F,ze=-(ye.vmetric?Ve[1]:Ke*.5)*Z,hn=Ve[2]*Z;Ke=Ve?-Ve[0]:Ke,Ze=ze/X,st=(Ae+hn)/X}else Ze=Ae/X,st=0;if(q.remeasure&&Ke>0){const Ve=te.measureText(De).width*1e3/K*X;if(Ke<Ve&&this.isFontSubpixelAAEnabled){const ze=Ke/Ve;Ie=!0,te.save(),te.scale(ze,1),Ze/=ze}else Ke!==Ve&&(Ze+=(Ke-Ve)/2e3*K/X)}if(this.contentVisible&&(ye.isInFont||q.missingFile)){if(ce&&!je)te.fillText(De,Ze,st);else if(this.paintChar(De,Ze,st,ie),je){const Ve=Ze+K*je.offset.x/X,ze=st-K*je.offset.y/X;this.paintChar(je.fontChar,Ve,ze,ie)}}let Xe;J?Xe=Ke*Z-Le*j:Xe=Ke*Z+Le*j,Ae+=Xe,Ie&&te.restore()}J?w.y-=Ae:w.x+=Ae*I,te.restore(),this.compose()}showType3Text(x){const w=this.ctx,q=this.current,K=q.font,te=q.fontSize,X=q.fontDirection,b=K.vertical?1:-1,L=q.charSpacing,j=q.wordSpacing,I=q.textHScale*X,H=q.fontMatrix||l.FONT_IDENTITY_MATRIX,J=x.length,$=q.textRenderingMode===l.TextRenderingMode.INVISIBLE;let F,Z,ce,ie;if(!($||te===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,w.save(),w.transform(...q.textMatrix),w.translate(q.x,q.y),w.scale(I,X),F=0;F<J;++F){if(Z=x[F],typeof Z=="number"){ie=b*Z*te/1e3,this.ctx.translate(ie,0),q.x+=ie*I;continue}const fe=(Z.isSpace?j:0)+L,be=K.charProcOperatorList[Z.operatorListId];if(!be){(0,l.warn)(`Type3 character "${Z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Z,this.save(),w.scale(te,te),w.transform(...H),this.executeOperatorList(be),this.restore()),ce=l.Util.applyTransform([Z.width,0],H)[0]*te+fe,w.translate(ce,0),q.x+=ce*I}w.restore(),this.processingType3=null}}setCharWidth(x,w){}setCharWidthAndBounds(x,w,q,K,te,X){this.ctx.rect(q,K,te-q,X-K),this.ctx.clip(),this.endPath()}getColorN_Pattern(x){let w;if(x[0]==="TilingPattern"){const q=x[1],K=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),te={createCanvasGraphics:X=>new re(X,this.commonObjs,this.objs,this.canvasFactory)};w=new c.TilingPattern(x,q,this.ctx,te,K)}else w=this._getPattern(x[1],x[2]);return w}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(x,w,q){var te;const K=((te=this.selectColor)==null?void 0:te.call(this,x,w,q))||l.Util.makeHexColor(x,w,q);this.ctx.strokeStyle=K,this.current.strokeColor=K}setFillRGBColor(x,w,q){var te;const K=((te=this.selectColor)==null?void 0:te.call(this,x,w,q))||l.Util.makeHexColor(x,w,q);this.ctx.fillStyle=K,this.current.fillColor=K,this.current.patternFill=!1}_getPattern(x,w=null){let q;return this.cachedPatterns.has(x)?q=this.cachedPatterns.get(x):(q=(0,c.getShadingPattern)(this.objs.get(x)),this.cachedPatterns.set(x,q)),w&&(q.matrix=w),q}shadingFill(x){if(!this.contentVisible)return;const w=this.ctx;this.save();const q=this._getPattern(x);w.fillStyle=q.getPattern(w,this,(0,a.getCurrentTransformInverse)(w),c.PathType.SHADING);const K=(0,a.getCurrentTransformInverse)(w);if(K){const te=w.canvas,X=te.width,b=te.height,L=l.Util.applyTransform([0,0],K),j=l.Util.applyTransform([0,b],K),I=l.Util.applyTransform([X,0],K),H=l.Util.applyTransform([X,b],K),J=Math.min(L[0],j[0],I[0],H[0]),$=Math.min(L[1],j[1],I[1],H[1]),F=Math.max(L[0],j[0],I[0],H[0]),Z=Math.max(L[1],j[1],I[1],H[1]);this.ctx.fillRect(J,$,F-J,Z-$)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,l.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,l.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(x,w){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(x)&&x.length===6&&this.transform(...x),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),w)){const q=w[2]-w[0],K=w[3]-w[1];this.ctx.rect(w[0],w[1],q,K),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),w),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(x){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const w=this.ctx;x.isolated||(0,l.info)("TODO: Support non-isolated groups."),x.knockout&&(0,l.warn)("Knockout groups not supported.");const q=(0,a.getCurrentTransform)(w);if(x.matrix&&w.transform(...x.matrix),!x.bbox)throw new Error("Bounding box is required.");let K=l.Util.getAxialAlignedBoundingBox(x.bbox,(0,a.getCurrentTransform)(w));const te=[0,0,w.canvas.width,w.canvas.height];K=l.Util.intersect(K,te)||[0,0,0,0];const X=Math.floor(K[0]),b=Math.floor(K[1]);let L=Math.max(Math.ceil(K[2])-X,1),j=Math.max(Math.ceil(K[3])-b,1),I=1,H=1;L>v&&(I=L/v,L=v),j>v&&(H=j/v,j=v),this.current.startNewPathAndClipBox([0,0,L,j]);let J="groupAt"+this.groupLevel;x.smask&&(J+="_smask_"+this.smaskCounter++%2);const $=this.cachedCanvases.getCanvas(J,L,j),F=$.context;F.scale(1/I,1/H),F.translate(-X,-b),F.transform(...q),x.smask?this.smaskStack.push({canvas:$.canvas,context:F,offsetX:X,offsetY:b,scaleX:I,scaleY:H,subtype:x.smask.subtype,backdrop:x.smask.backdrop,transferMap:x.smask.transferMap||null,startTransformInverse:null}):(w.setTransform(1,0,0,1,0,0),w.translate(X,b),w.scale(I,H),w.save()),A(w,F),this.ctx=F,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(w),this.groupLevel++}endGroup(x){if(!this.contentVisible)return;this.groupLevel--;const w=this.ctx,q=this.groupStack.pop();if(this.ctx=q,this.ctx.imageSmoothingEnabled=!1,x.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const K=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...K);const te=l.Util.getAxialAlignedBoundingBox([0,0,w.canvas.width,w.canvas.height],K);this.ctx.drawImage(w.canvas,0,0),this.ctx.restore(),this.compose(te)}}beginAnnotation(x,w,q,K,te){if(Re(this,ae,Ml).call(this),m(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(w)&&w.length===4){const X=w[2]-w[0],b=w[3]-w[1];if(te&&this.annotationCanvasMap){q=q.slice(),q[4]-=w[0],q[5]-=w[1],w=w.slice(),w[0]=w[1]=0,w[2]=X,w[3]=b;const[L,j]=l.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:I}=this,H=Math.ceil(X*this.outputScaleX*I),J=Math.ceil(b*this.outputScaleY*I);this.annotationCanvas=this.canvasFactory.create(H,J);const{canvas:$,context:F}=this.annotationCanvas;this.annotationCanvasMap.set(x,$),this.annotationCanvas.savedCtx=this.ctx,this.ctx=F,this.ctx.setTransform(L,0,0,-j,0,b*j),m(this.ctx,this.foregroundColor)}else m(this.ctx,this.foregroundColor),this.ctx.rect(w[0],w[1],X,b),this.ctx.clip(),this.endPath()}this.current=new N(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...q),this.transform(...K)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(x){if(!this.contentVisible)return;const w=x.count;x=this.getObject(x.data,x),x.count=w;const q=this.ctx,K=this.processingType3;if(K&&(K.compiled===void 0&&(K.compiled=U(x)),K.compiled)){K.compiled(q);return}const te=this._createMaskCanvas(x),X=te.canvas;q.save(),q.setTransform(1,0,0,1,0,0),q.drawImage(X,te.offsetX,te.offsetY),q.restore(),this.compose()}paintImageMaskXObjectRepeat(x,w,q=0,K=0,te,X){if(!this.contentVisible)return;x=this.getObject(x.data,x);const b=this.ctx;b.save();const L=(0,a.getCurrentTransform)(b);b.transform(w,q,K,te,0,0);const j=this._createMaskCanvas(x);b.setTransform(1,0,0,1,0,0);for(let I=0,H=X.length;I<H;I+=2){const J=l.Util.transform(L,[w,q,K,te,X[I],X[I+1]]),[$,F]=l.Util.applyTransform([0,0],J);b.drawImage(j.canvas,$,F)}b.restore(),this.compose()}paintImageMaskXObjectGroup(x){if(!this.contentVisible)return;const w=this.ctx,q=this.current.fillColor,K=this.current.patternFill;for(const te of x){const{data:X,width:b,height:L,transform:j}=te,I=this.cachedCanvases.getCanvas("maskCanvas",b,L),H=I.context;H.save();const J=this.getObject(X,te);y(H,J),H.globalCompositeOperation="source-in",H.fillStyle=K?q.getPattern(H,this,(0,a.getCurrentTransformInverse)(w),c.PathType.FILL):q,H.fillRect(0,0,b,L),H.restore(),w.save(),w.transform(...j),w.scale(1,-1),T(w,I.canvas,0,0,b,L,0,-1,1,1),w.restore()}this.compose()}paintImageXObject(x){if(!this.contentVisible)return;const w=this.getObject(x);if(!w){(0,l.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(w)}paintImageXObjectRepeat(x,w,q,K){if(!this.contentVisible)return;const te=this.getObject(x);if(!te){(0,l.warn)("Dependent image isn't ready yet");return}const X=te.width,b=te.height,L=[];for(let j=0,I=K.length;j<I;j+=2)L.push({transform:[w,0,0,q,K[j],K[j+1]],x:0,y:0,w:X,h:b});this.paintInlineImageXObjectGroup(te,L)}paintInlineImageXObject(x){if(!this.contentVisible)return;const w=x.width,q=x.height,K=this.ctx;this.save(),K.scale(1/w,-1/q);let te;if(typeof HTMLElement=="function"&&x instanceof HTMLElement||!x.data)te=x;else{const j=this.cachedCanvases.getCanvas("inlineImage",w,q),I=j.context;M(I,x,this.current.transferMaps),te=j.canvas}const X=this._scaleImage(te,(0,a.getCurrentTransformInverse)(K));K.imageSmoothingEnabled=_e((0,a.getCurrentTransform)(K),x.interpolate);const[b,L]=T(K,X.img,0,0,X.paintWidth,X.paintHeight,0,-q,w,q);if(this.imageLayer){const[j,I]=l.Util.applyTransform([0,-q],(0,a.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:x,left:j,top:I,width:b,height:L})}this.compose(),this.restore()}paintInlineImageXObjectGroup(x,w){if(!this.contentVisible)return;const q=this.ctx,K=x.width,te=x.height,X=this.cachedCanvases.getCanvas("inlineImage",K,te),b=X.context;M(b,x,this.current.transferMaps);for(const L of w){if(q.save(),q.transform(...L.transform),q.scale(1,-1),T(q,X.canvas,L.x,L.y,L.w,L.h,0,-1,1,1),this.imageLayer){const[j,I]=l.Util.applyTransform([L.x,L.y],(0,a.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:x,left:j,top:I,width:K,height:te})}q.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(x){}markPointProps(x,w){}beginMarkedContent(x){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(x,w){x==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(w)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(x){const w=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(x);const q=this.ctx;this.pendingClip&&(w||(this.pendingClip===ee?q.clip("evenodd"):q.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),q.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const x=(0,a.getCurrentTransform)(this.ctx);if(x[1]===0&&x[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(x[0]),Math.abs(x[3]));else{const w=Math.abs(x[0]*x[3]-x[2]*x[1]),q=Math.hypot(x[0],x[2]),K=Math.hypot(x[1],x[3]);this._cachedGetSinglePixelWidth=Math.max(q,K)/w}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:x}=this.current,w=(0,a.getCurrentTransform)(this.ctx);let q,K;if(w[1]===0&&w[2]===0){const te=Math.abs(w[0]),X=Math.abs(w[3]);if(x===0)q=1/te,K=1/X;else{const b=te*x,L=X*x;q=b<1?1/b:1,K=L<1?1/L:1}}else{const te=Math.abs(w[0]*w[3]-w[2]*w[1]),X=Math.hypot(w[0],w[1]),b=Math.hypot(w[2],w[3]);if(x===0)q=b/te,K=X/te;else{const L=x*te;q=b>L?b/L:1,K=X>L?X/L:1}}this._cachedScaleForStroking=[q,K]}return this._cachedScaleForStroking}rescaleAndStroke(x){const{ctx:w}=this,{lineWidth:q}=this.current,[K,te]=this.getScaleForStroking();if(w.lineWidth=q||1,K===1&&te===1){w.stroke();return}let X,b,L;x&&(X=(0,a.getCurrentTransform)(w),b=w.getLineDash().slice(),L=w.lineDashOffset),w.scale(K,te);const j=Math.max(K,te);w.setLineDash(w.getLineDash().map(I=>I/j)),w.lineDashOffset/=j,w.stroke(),x&&(w.setTransform(...X),w.setLineDash(b),w.lineDashOffset=L)}isContentVisible(){for(let x=this.markedContentStack.length-1;x>=0;x--)if(!this.markedContentStack[x].visible)return!1;return!0}};ae=new WeakSet,Ml=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let ne=re;i.CanvasGraphics=ne;for(const Y in l.OPS)ne.prototype[Y]!==void 0&&(ne.prototype[l.OPS[Y]]=ne.prototype[Y])},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=E;var a=r(1),l=r(8),c=r(3);const p={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=p;function S(T,U){if(!U||c.isNodeJS)return;const N=U[2]-U[0],M=U[3]-U[1],y=new Path2D;y.rect(U[0],U[1],N,M),T.clip(y)}class _{constructor(){this.constructor===_&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class d extends _{constructor(U){super(),this._type=U[1],this._bbox=U[2],this._colorStops=U[3],this._p0=U[4],this._p1=U[5],this._r0=U[6],this._r1=U[7],this.matrix=null}_createGradient(U){let N;this._type==="axial"?N=U.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(N=U.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const M of this._colorStops)N.addColorStop(M[0],M[1]);return N}getPattern(U,N,M,y){let A;if(y===p.STROKE||y===p.FILL){const m=N.current.getClippedPathBoundingBox(y,(0,l.getCurrentTransform)(U))||[0,0,0,0],R=Math.ceil(m[2]-m[0])||1,C=Math.ceil(m[3]-m[1])||1,B=N.cachedCanvases.getCanvas("pattern",R,C,!0),V=B.context;V.clearRect(0,0,V.canvas.width,V.canvas.height),V.beginPath(),V.rect(0,0,V.canvas.width,V.canvas.height),V.translate(-m[0],-m[1]),M=a.Util.transform(M,[1,0,0,1,m[0],m[1]]),V.transform(...N.baseTransform),this.matrix&&V.transform(...this.matrix),S(V,this._bbox),V.fillStyle=this._createGradient(V),V.fill(),A=U.createPattern(B.canvas,"no-repeat");const oe=new DOMMatrix(M);try{A.setTransform(oe)}catch(_e){(0,a.warn)(`RadialAxialShadingPattern.getPattern: "${_e==null?void 0:_e.message}".`)}}else S(U,this._bbox),A=this._createGradient(U);return A}}function v(T,U,N,M,y,A,m,R){const C=U.coords,B=U.colors,V=T.data,oe=T.width*4;let _e;C[N+1]>C[M+1]&&(_e=N,N=M,M=_e,_e=A,A=m,m=_e),C[M+1]>C[y+1]&&(_e=M,M=y,y=_e,_e=m,m=R,R=_e),C[N+1]>C[M+1]&&(_e=N,N=M,M=_e,_e=A,A=m,m=_e);const he=(C[N]+U.offsetX)*U.scaleX,ue=(C[N+1]+U.offsetY)*U.scaleY,W=(C[M]+U.offsetX)*U.scaleX,ee=(C[M+1]+U.offsetY)*U.scaleY,ne=(C[y]+U.offsetX)*U.scaleX,ae=(C[y+1]+U.offsetY)*U.scaleY;if(ue>=ae)return;const G=B[A],re=B[A+1],Y=B[A+2],x=B[m],w=B[m+1],q=B[m+2],K=B[R],te=B[R+1],X=B[R+2],b=Math.round(ue),L=Math.round(ae);let j,I,H,J,$,F,Z,ce;for(let ie=b;ie<=L;ie++){if(ie<ee){let ye;ie<ue?ye=0:ye=(ue-ie)/(ue-ee),j=he-(he-W)*ye,I=G-(G-x)*ye,H=re-(re-w)*ye,J=Y-(Y-q)*ye}else{let ye;ie>ae?ye=1:ee===ae?ye=0:ye=(ee-ie)/(ee-ae),j=W-(W-ne)*ye,I=x-(x-K)*ye,H=w-(w-te)*ye,J=q-(q-X)*ye}let fe;ie<ue?fe=0:ie>ae?fe=1:fe=(ue-ie)/(ue-ae),$=he-(he-ne)*fe,F=G-(G-K)*fe,Z=re-(re-te)*fe,ce=Y-(Y-X)*fe;const be=Math.round(Math.min(j,$)),Ae=Math.round(Math.max(j,$));let Oe=oe*ie+be*4;for(let ye=be;ye<=Ae;ye++)fe=(j-ye)/(j-$),fe<0?fe=0:fe>1&&(fe=1),V[Oe++]=I-(I-F)*fe|0,V[Oe++]=H-(H-Z)*fe|0,V[Oe++]=J-(J-ce)*fe|0,V[Oe++]=255}}function P(T,U,N){const M=U.coords,y=U.colors;let A,m;switch(U.type){case"lattice":const R=U.verticesPerRow,C=Math.floor(M.length/R)-1,B=R-1;for(A=0;A<C;A++){let V=A*R;for(let oe=0;oe<B;oe++,V++)v(T,N,M[V],M[V+1],M[V+R],y[V],y[V+1],y[V+R]),v(T,N,M[V+R+1],M[V+1],M[V+R],y[V+R+1],y[V+1],y[V+R])}break;case"triangles":for(A=0,m=M.length;A<m;A+=3)v(T,N,M[A],M[A+1],M[A+2],y[A],y[A+1],y[A+2]);break;default:throw new Error("illegal figure")}}class O extends _{constructor(U){super(),this._coords=U[2],this._colors=U[3],this._figures=U[4],this._bounds=U[5],this._bbox=U[7],this._background=U[8],this.matrix=null}_createMeshCanvas(U,N,M){const R=Math.floor(this._bounds[0]),C=Math.floor(this._bounds[1]),B=Math.ceil(this._bounds[2])-R,V=Math.ceil(this._bounds[3])-C,oe=Math.min(Math.ceil(Math.abs(B*U[0]*1.1)),3e3),_e=Math.min(Math.ceil(Math.abs(V*U[1]*1.1)),3e3),he=B/oe,ue=V/_e,W={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-C,scaleX:1/he,scaleY:1/ue},ee=oe+2*2,ne=_e+2*2,ae=M.getCanvas("mesh",ee,ne,!1),G=ae.context,re=G.createImageData(oe,_e);if(N){const x=re.data;for(let w=0,q=x.length;w<q;w+=4)x[w]=N[0],x[w+1]=N[1],x[w+2]=N[2],x[w+3]=255}for(const x of this._figures)P(re,x,W);return G.putImageData(re,2,2),{canvas:ae.canvas,offsetX:R-2*he,offsetY:C-2*ue,scaleX:he,scaleY:ue}}getPattern(U,N,M,y){S(U,this._bbox);let A;if(y===p.SHADING)A=a.Util.singularValueDecompose2dScale((0,l.getCurrentTransform)(U));else if(A=a.Util.singularValueDecompose2dScale(N.baseTransform),this.matrix){const R=a.Util.singularValueDecompose2dScale(this.matrix);A=[A[0]*R[0],A[1]*R[1]]}const m=this._createMeshCanvas(A,y===p.SHADING?null:this._background,N.cachedCanvases);return y!==p.SHADING&&(U.setTransform(...N.baseTransform),this.matrix&&U.transform(...this.matrix)),U.translate(m.offsetX,m.offsetY),U.scale(m.scaleX,m.scaleY),U.createPattern(m.canvas,"no-repeat")}}class k extends _{getPattern(){return"hotpink"}}function E(T){switch(T[0]){case"RadialAxial":return new d(T);case"Mesh":return new O(T);case"Dummy":return new k}throw new Error(`Unknown IR type: ${T[0]}`)}const f={COLORED:1,UNCOLORED:2};class g{static get MAX_PATTERN_SIZE(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(U,N,M,y,A){this.operatorList=U[2],this.matrix=U[3]||[1,0,0,1,0,0],this.bbox=U[4],this.xstep=U[5],this.ystep=U[6],this.paintType=U[7],this.tilingType=U[8],this.color=N,this.ctx=M,this.canvasGraphicsFactory=y,this.baseTransform=A}createPatternCanvas(U){const N=this.operatorList,M=this.bbox,y=this.xstep,A=this.ystep,m=this.paintType,R=this.tilingType,C=this.color,B=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+R);const V=M[0],oe=M[1],_e=M[2],he=M[3],ue=a.Util.singularValueDecompose2dScale(this.matrix),W=a.Util.singularValueDecompose2dScale(this.baseTransform),ee=[ue[0]*W[0],ue[1]*W[1]],ne=this.getSizeAndScale(y,this.ctx.canvas.width,ee[0]),ae=this.getSizeAndScale(A,this.ctx.canvas.height,ee[1]),G=U.cachedCanvases.getCanvas("pattern",ne.size,ae.size,!0),re=G.context,Y=B.createCanvasGraphics(re);Y.groupLevel=U.groupLevel,this.setFillAndStrokeStyleToContext(Y,m,C);let x=V,w=oe,q=_e,K=he;return V<0&&(x=0,q+=Math.abs(V)),oe<0&&(w=0,K+=Math.abs(oe)),re.translate(-(ne.scale*x),-(ae.scale*w)),Y.transform(ne.scale,0,0,ae.scale,0,0),re.save(),this.clipBbox(Y,x,w,q,K),Y.baseTransform=(0,l.getCurrentTransform)(Y.ctx),Y.executeOperatorList(N),Y.endDrawing(),{canvas:G.canvas,scaleX:ne.scale,scaleY:ae.scale,offsetX:x,offsetY:w}}getSizeAndScale(U,N,M){U=Math.abs(U);const y=Math.max(g.MAX_PATTERN_SIZE,N);let A=Math.ceil(U*M);return A>=y?A=y:M=A/U,{scale:M,size:A}}clipBbox(U,N,M,y,A){const m=y-N,R=A-M;U.ctx.rect(N,M,m,R),U.current.updateRectMinMax((0,l.getCurrentTransform)(U.ctx),[N,M,y,A]),U.clip(),U.endPath()}setFillAndStrokeStyleToContext(U,N,M){const y=U.ctx,A=U.current;switch(N){case f.COLORED:const m=this.ctx;y.fillStyle=m.fillStyle,y.strokeStyle=m.strokeStyle,A.fillColor=m.fillStyle,A.strokeColor=m.strokeStyle;break;case f.UNCOLORED:const R=a.Util.makeHexColor(M[0],M[1],M[2]);y.fillStyle=R,y.strokeStyle=R,A.fillColor=R,A.strokeColor=R;break;default:throw new a.FormatError(`Unsupported paint type: ${N}`)}}getPattern(U,N,M,y){let A=M;y!==p.SHADING&&(A=a.Util.transform(A,N.baseTransform),this.matrix&&(A=a.Util.transform(A,this.matrix)));const m=this.createPatternCanvas(N);let R=new DOMMatrix(A);R=R.translate(m.offsetX,m.offsetY),R=R.scale(1/m.scaleX,1/m.scaleY);const C=U.createPattern(m.canvas,"repeat");try{C.setTransform(R)}catch(B){(0,a.warn)(`TilingPattern.getPattern: "${B==null?void 0:B.message}".`)}return C}}i.TilingPattern=g},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyMaskImageData=l;var a=r(1);function l({src:c,srcPos:p=0,dest:S,destPos:_=0,width:d,height:v,inverseDecode:P=!1}){const O=a.FeatureTest.isLittleEndian?4278190080:255,[k,E]=P?[0,O]:[O,0],f=d>>3,g=d&7,T=c.length;S=new Uint32Array(S.buffer);for(let U=0;U<v;U++){for(const M=p+f;p<M;p++){const y=p<T?c[p]:255;S[_++]=y&128?E:k,S[_++]=y&64?E:k,S[_++]=y&32?E:k,S[_++]=y&16?E:k,S[_++]=y&8?E:k,S[_++]=y&4?E:k,S[_++]=y&2?E:k,S[_++]=y&1?E:k}if(g===0)continue;const N=p<T?c[p++]:255;for(let M=0;M<g;M++)S[_++]=N&1<<7-M?E:k}return{srcPos:p,destPos:_}}},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const r=Object.create(null);i.GlobalWorkerOptions=r,r.workerPort=r.workerPort===void 0?null:r.workerPort,r.workerSrc=r.workerSrc===void 0?"":r.workerSrc},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var a=r(1);const l={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function p(_){switch(_ instanceof Error||typeof _=="object"&&_!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),_.name){case"AbortException":return new a.AbortException(_.message);case"MissingPDFException":return new a.MissingPDFException(_.message);case"PasswordException":return new a.PasswordException(_.message,_.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(_.message,_.status);case"UnknownErrorException":return new a.UnknownErrorException(_.message,_.details);default:return new a.UnknownErrorException(_.message,_.toString())}}class S{constructor(d,v,P){this.sourceName=d,this.targetName=v,this.comObj=P,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=O=>{const k=O.data;if(k.targetName!==this.sourceName)return;if(k.stream){this._processStreamMessage(k);return}if(k.callback){const f=k.callbackId,g=this.callbackCapabilities[f];if(!g)throw new Error(`Cannot resolve callback ${f}`);if(delete this.callbackCapabilities[f],k.callback===l.DATA)g.resolve(k.data);else if(k.callback===l.ERROR)g.reject(p(k.reason));else throw new Error("Unexpected callback case");return}const E=this.actionHandler[k.action];if(!E)throw new Error(`Unknown action from worker: ${k.action}`);if(k.callbackId){const f=this.sourceName,g=k.sourceName;new Promise(function(T){T(E(k.data))}).then(function(T){P.postMessage({sourceName:f,targetName:g,callback:l.DATA,callbackId:k.callbackId,data:T})},function(T){P.postMessage({sourceName:f,targetName:g,callback:l.ERROR,callbackId:k.callbackId,reason:p(T)})});return}if(k.streamId){this._createStreamSink(k);return}E(k.data)},P.addEventListener("message",this._onComObjOnMessage)}on(d,v){const P=this.actionHandler;if(P[d])throw new Error(`There is already an actionName called "${d}"`);P[d]=v}send(d,v,P){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:v},P)}sendWithPromise(d,v,P){const O=this.callbackId++,k=(0,a.createPromiseCapability)();this.callbackCapabilities[O]=k;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:O,data:v},P)}catch(E){k.reject(E)}return k.promise}sendWithStream(d,v,P,O){const k=this.streamId++,E=this.sourceName,f=this.targetName,g=this.comObj;return new ReadableStream({start:T=>{const U=(0,a.createPromiseCapability)();return this.streamControllers[k]={controller:T,startCall:U,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:E,targetName:f,action:d,streamId:k,data:v,desiredSize:T.desiredSize},O),U.promise},pull:T=>{const U=(0,a.createPromiseCapability)();return this.streamControllers[k].pullCall=U,g.postMessage({sourceName:E,targetName:f,stream:c.PULL,streamId:k,desiredSize:T.desiredSize}),U.promise},cancel:T=>{(0,a.assert)(T instanceof Error,"cancel must have a valid reason");const U=(0,a.createPromiseCapability)();return this.streamControllers[k].cancelCall=U,this.streamControllers[k].isClosed=!0,g.postMessage({sourceName:E,targetName:f,stream:c.CANCEL,streamId:k,reason:p(T)}),U.promise}},P)}_createStreamSink(d){const v=d.streamId,P=this.sourceName,O=d.sourceName,k=this.comObj,E=this,f=this.actionHandler[d.action],g={enqueue(T,U=1,N){if(this.isCancelled)return;const M=this.desiredSize;this.desiredSize-=U,M>0&&this.desiredSize<=0&&(this.sinkCapability=(0,a.createPromiseCapability)(),this.ready=this.sinkCapability.promise),k.postMessage({sourceName:P,targetName:O,stream:c.ENQUEUE,streamId:v,chunk:T},N)},close(){this.isCancelled||(this.isCancelled=!0,k.postMessage({sourceName:P,targetName:O,stream:c.CLOSE,streamId:v}),delete E.streamSinks[v])},error(T){(0,a.assert)(T instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,k.postMessage({sourceName:P,targetName:O,stream:c.ERROR,streamId:v,reason:p(T)}))},sinkCapability:(0,a.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[v]=g,new Promise(function(T){T(f(d.data,g))}).then(function(){k.postMessage({sourceName:P,targetName:O,stream:c.START_COMPLETE,streamId:v,success:!0})},function(T){k.postMessage({sourceName:P,targetName:O,stream:c.START_COMPLETE,streamId:v,reason:p(T)})})}_processStreamMessage(d){const v=d.streamId,P=this.sourceName,O=d.sourceName,k=this.comObj,E=this.streamControllers[v],f=this.streamSinks[v];switch(d.stream){case c.START_COMPLETE:d.success?E.startCall.resolve():E.startCall.reject(p(d.reason));break;case c.PULL_COMPLETE:d.success?E.pullCall.resolve():E.pullCall.reject(p(d.reason));break;case c.PULL:if(!f){k.postMessage({sourceName:P,targetName:O,stream:c.PULL_COMPLETE,streamId:v,success:!0});break}f.desiredSize<=0&&d.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=d.desiredSize,new Promise(function(g){g(f.onPull&&f.onPull())}).then(function(){k.postMessage({sourceName:P,targetName:O,stream:c.PULL_COMPLETE,streamId:v,success:!0})},function(g){k.postMessage({sourceName:P,targetName:O,stream:c.PULL_COMPLETE,streamId:v,reason:p(g)})});break;case c.ENQUEUE:if((0,a.assert)(E,"enqueue should have stream controller"),E.isClosed)break;E.controller.enqueue(d.chunk);break;case c.CLOSE:if((0,a.assert)(E,"close should have stream controller"),E.isClosed)break;E.isClosed=!0,E.controller.close(),this._deleteStreamController(E,v);break;case c.ERROR:(0,a.assert)(E,"error should have stream controller"),E.controller.error(p(d.reason)),this._deleteStreamController(E,v);break;case c.CANCEL_COMPLETE:d.success?E.cancelCall.resolve():E.cancelCall.reject(p(d.reason)),this._deleteStreamController(E,v);break;case c.CANCEL:if(!f)break;new Promise(function(g){g(f.onCancel&&f.onCancel(p(d.reason)))}).then(function(){k.postMessage({sourceName:P,targetName:O,stream:c.CANCEL_COMPLETE,streamId:v,success:!0})},function(g){k.postMessage({sourceName:P,targetName:O,stream:c.CANCEL_COMPLETE,streamId:v,reason:p(g)})}),f.sinkCapability.reject(p(d.reason)),f.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(d,v){await Promise.allSettled([d.startCall&&d.startCall.promise,d.pullCall&&d.pullCall.promise,d.cancelCall&&d.cancelCall.promise]),delete this.streamControllers[v]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i.MessageHandler=S},(o,i,r)=>{var c,p;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var a=r(1);class l{constructor({parsedData:_,rawData:d}){ke(this,c);ke(this,p);Me(this,c,_),Me(this,p,d)}getRaw(){return Q(this,p)}get(_){return Q(this,c).get(_)??null}getAll(){return(0,a.objectFromMap)(Q(this,c))}has(_){return Q(this,c).has(_)}}c=new WeakMap,p=new WeakMap,i.Metadata=l},(o,i,r)=>{var S,_,d,v,P,O,Dl;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var a=r(1);const l=Symbol("INTERNAL");class c{constructor(f,g){ke(this,S,!0);this.name=f,this.intent=g}get visible(){return Q(this,S)}_setVisible(f,g){f!==l&&(0,a.unreachable)("Internal method `_setVisible` called."),Me(this,S,g)}}S=new WeakMap;class p{constructor(f){ke(this,O);ke(this,_,!0);ke(this,d,new Map);ke(this,v,null);ke(this,P,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,Me(this,P,f.order);for(const g of f.groups)Q(this,d).set(g.id,new c(g.name,g.intent));if(f.baseState==="OFF")for(const g of Q(this,d).values())g._setVisible(l,!1);for(const g of f.on)Q(this,d).get(g)._setVisible(l,!0);for(const g of f.off)Q(this,d).get(g)._setVisible(l,!1);Me(this,v,new Map);for(const[g,T]of Q(this,d))Q(this,v).set(g,T.visible)}}isVisible(f){if(Q(this,d).size===0)return!0;if(!f)return(0,a.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return Q(this,d).has(f.id)?Q(this,d).get(f.id).visible:((0,a.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return Re(this,O,Dl).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const g of f.ids){if(!Q(this,d).has(g))return(0,a.warn)(`Optional content group not found: ${g}`),!0;if(Q(this,d).get(g).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const g of f.ids){if(!Q(this,d).has(g))return(0,a.warn)(`Optional content group not found: ${g}`),!0;if(!Q(this,d).get(g).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const g of f.ids){if(!Q(this,d).has(g))return(0,a.warn)(`Optional content group not found: ${g}`),!0;if(!Q(this,d).get(g).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const g of f.ids){if(!Q(this,d).has(g))return(0,a.warn)(`Optional content group not found: ${g}`),!0;if(Q(this,d).get(g).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,a.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,g=!0){if(!Q(this,d).has(f)){(0,a.warn)(`Optional content group not found: ${f}`);return}Q(this,d).get(f)._setVisible(l,!!g),Me(this,_,null)}get hasInitialVisibility(){if(Q(this,_)!==null)return Q(this,_);for(const[f,g]of Q(this,d)){const T=Q(this,v).get(f);if(g.visible!==T)return Me(this,_,!1)}return Me(this,_,!0)}getOrder(){return Q(this,d).size?Q(this,P)?Q(this,P).slice():[...Q(this,d).keys()]:null}getGroups(){return Q(this,d).size>0?(0,a.objectFromMap)(Q(this,d)):null}getGroup(f){return Q(this,d).get(f)||null}}_=new WeakMap,d=new WeakMap,v=new WeakMap,P=new WeakMap,O=new WeakSet,Dl=function(f){const g=f.length;if(g<2)return!0;const T=f[0];for(let U=1;U<g;U++){const N=f[U];let M;if(Array.isArray(N))M=Re(this,O,Dl).call(this,N);else if(Q(this,d).has(N))M=Q(this,d).get(N).visible;else return(0,a.warn)(`Optional content group not found: ${N}`),!0;switch(T){case"And":if(!M)return!1;break;case"Or":if(M)return!0;break;case"Not":return!M;default:return!0}}return T==="And"},i.OptionalContentConfig=p},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var a=r(1),l=r(8);class c{constructor(d,v){(0,a.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d.progressiveDone||!1,this._contentDispositionFilename=d.contentDispositionFilename||null;const P=d.initialData;if((P==null?void 0:P.length)>0){const O=new Uint8Array(P).buffer;this._queuedChunks.push(O)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((O,k)=>{this._onReceiveData({begin:O,chunk:k})}),this._pdfDataRangeTransport.addProgressListener((O,k)=>{this._onProgress({loaded:O,total:k})}),this._pdfDataRangeTransport.addProgressiveReadListener(O=>{this._onReceiveData({chunk:O})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){const v=new Uint8Array(d.chunk).buffer;if(d.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{const P=this._rangeReaders.some(function(O){return O._begin!==d.begin?!1:(O._enqueue(v),!0)});(0,a.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d;return((d=this._fullRequestReader)==null?void 0:d._loaded)??0}_onProgress(d){if(d.total===void 0){const v=this._rangeReaders[0];v!=null&&v.onProgress&&v.onProgress({loaded:d.loaded})}else{const v=this._fullRequestReader;v!=null&&v.onProgress&&v.onProgress({loaded:d.loaded,total:d.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const v=this._rangeReaders.indexOf(d);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new p(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,v){if(v<=this._progressiveDataLength)return null;const P=new S(this,d,v);return this._pdfDataRangeTransport.requestDataRange(d,v),this._rangeReaders.push(P),P}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const v of this._rangeReaders.slice(0))v.cancel(d);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=c;class p{constructor(d,v,P=!1,O=null){this._stream=d,this._done=P||!1,this._filename=(0,l.isPdfFile)(O)?O:null,this._queuedChunks=v||[],this._loaded=0;for(const k of this._queuedChunks)this._loaded+=k.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=(0,a.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class S{constructor(d,v,P){this._stream=d,this._begin=v,this._end=P,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,a.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class r{static textContent(l){const c=[],p={items:c,styles:Object.create(null)};function S(_){var P;if(!_)return;let d=null;const v=_.name;if(v==="#text")d=_.value;else if(r.shouldBuildText(v))(P=_==null?void 0:_.attributes)!=null&&P.textContent?d=_.attributes.textContent:_.value&&(d=_.value);else return;if(d!==null&&c.push({str:d}),!!_.children)for(const O of _.children)S(O)}return S(l),p}static shouldBuildText(l){return!(l==="textarea"||l==="input"||l==="option"||l==="select")}}i.XfaText=r},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var a=r(9);const l=function(_){return new Promise((d,v)=>{require$$5.readFile(_,(O,k)=>{if(O||!k){v(new Error(O));return}d(new Uint8Array(k))})})};class c extends a.BaseCanvasFactory{_createCanvas(d,v){return require$$5.createCanvas(d,v)}}i.NodeCanvasFactory=c;class p extends a.BaseCMapReaderFactory{_fetchData(d,v){return l(d).then(P=>({cMapData:P,compressionType:v}))}}i.NodeCMapReaderFactory=p;class S extends a.BaseStandardFontDataFactory{_fetchData(d){return l(d)}}i.NodeStandardFontDataFactory=S},(o,i,r)=>{var _,d,v,P,O,k,E,f,g,Pl,Td,Ll,Cd;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var a=r(7),l=r(1),c=r(23),p=r(24);const y=class y{constructor(m){ke(this,g);ke(this,_);ke(this,d,!1);ke(this,v,this.pointerup.bind(this));ke(this,P,this.pointerdown.bind(this));ke(this,O,new Map);ke(this,k,!1);ke(this,E,!1);ke(this,f);y._initialized||(y._initialized=!0,c.FreeTextEditor.initialize(m.l10n),p.InkEditor.initialize(m.l10n),m.uiManager.registerEditorTypes([c.FreeTextEditor,p.InkEditor])),Me(this,f,m.uiManager),this.annotationStorage=m.annotationStorage,this.pageIndex=m.pageIndex,this.div=m.div,Me(this,_,m.accessibilityManager),Q(this,f).addLayer(this)}updateToolbar(m){Q(this,f).updateToolbar(m)}updateMode(m=Q(this,f).getMode()){Re(this,g,Cd).call(this),m===l.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Q(this,f).unselectAll()}addInkEditorIfNeeded(m){if(!m&&Q(this,f).getMode()!==l.AnnotationEditorType.INK)return;if(!m){for(const C of Q(this,O).values())if(C.isEmpty()){C.setInBackground();return}}Re(this,g,Ll).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(m){Q(this,f).setEditingState(m)}addCommands(m){Q(this,f).addCommands(m)}enable(){this.div.style.pointerEvents="auto";for(const m of Q(this,O).values())m.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const m of Q(this,O).values())m.disableEditing()}setActiveEditor(m){Q(this,f).getActive()!==m&&Q(this,f).setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",Q(this,P)),this.div.addEventListener("pointerup",Q(this,v))}disableClick(){this.div.removeEventListener("pointerdown",Q(this,P)),this.div.removeEventListener("pointerup",Q(this,v))}attach(m){Q(this,O).set(m.id,m)}detach(m){var R;Q(this,O).delete(m.id),(R=Q(this,_))==null||R.removePointerInTextLayer(m.contentDiv)}remove(m){Q(this,f).removeEditor(m),this.detach(m),this.annotationStorage.remove(m.id),m.div.style.display="none",setTimeout(()=>{m.div.style.display="",m.div.remove(),m.isAttachedToDOM=!1,document.activeElement===document.body&&Q(this,f).focusMainContainer()},0),Q(this,E)||this.addInkEditorIfNeeded(!1)}add(m){if(Re(this,g,Pl).call(this,m),Q(this,f).addEditor(m),this.attach(m),!m.isAttachedToDOM){const R=m.render();this.div.append(R),m.isAttachedToDOM=!0}this.moveEditorInDOM(m),m.onceAdded(),this.addToAnnotationStorage(m)}moveEditorInDOM(m){var R;(R=Q(this,_))==null||R.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addToAnnotationStorage(m){!m.isEmpty()&&!this.annotationStorage.has(m.id)&&this.annotationStorage.setValue(m.id,m)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addANewEditor(m){const R=()=>{this.addOrRebuild(m)},C=()=>{m.remove()};this.addCommands({cmd:R,undo:C,mustExec:!0})}addUndoableEditor(m){const R=()=>{this.addOrRebuild(m)},C=()=>{m.remove()};this.addCommands({cmd:R,undo:C,mustExec:!1})}getNextId(){return Q(this,f).getId()}deserialize(m){switch(m.annotationType){case l.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(m,this);case l.AnnotationEditorType.INK:return p.InkEditor.deserialize(m,this)}return null}setSelected(m){Q(this,f).setSelected(m)}toggleSelected(m){Q(this,f).toggleSelected(m)}isSelected(m){return Q(this,f).isSelected(m)}unselect(m){Q(this,f).unselect(m)}pointerup(m){const R=a.KeyboardManager.platform.isMac;if(!(m.button!==0||m.ctrlKey&&R)&&m.target===this.div&&Q(this,k)){if(Me(this,k,!1),!Q(this,d)){Me(this,d,!0);return}Re(this,g,Ll).call(this,m)}}pointerdown(m){const R=a.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&R||m.target!==this.div)return;Me(this,k,!0);const C=Q(this,f).getActive();Me(this,d,!C||C.isEmpty())}drop(m){const R=m.dataTransfer.getData("text/plain"),C=Q(this,f).getEditor(R);if(!C)return;m.preventDefault(),m.dataTransfer.dropEffect="move",Re(this,g,Pl).call(this,C);const B=this.div.getBoundingClientRect(),V=m.clientX-B.x,oe=m.clientY-B.y;C.translate(V-C.startX,oe-C.startY),this.moveEditorInDOM(C),C.div.focus()}dragover(m){m.preventDefault()}destroy(){var m,R;((m=Q(this,f).getActive())==null?void 0:m.parent)===this&&Q(this,f).setActiveEditor(null);for(const C of Q(this,O).values())(R=Q(this,_))==null||R.removePointerInTextLayer(C.contentDiv),C.isAttachedToDOM=!1,C.div.remove(),C.parent=null;this.div=null,Q(this,O).clear(),Q(this,f).removeLayer(this)}render(m){this.viewport=m.viewport,(0,a.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const R of Q(this,f).getEditors(this.pageIndex))this.add(R);this.updateMode()}update(m){this.viewport=m.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[m,R,C,B]=this.viewport.viewBox,V=C-m,oe=B-R;return[V,oe]}get viewportBaseDimensions(){const{width:m,height:R,rotation:C}=this.viewport;return C%180===0?[m,R]:[R,m]}setDimensions(){const{width:m,height:R,rotation:C}=this.viewport,B=C%180!==0,V=Math.floor(m)+"px",oe=Math.floor(R)+"px";this.div.style.width=B?oe:V,this.div.style.height=B?V:oe,this.div.setAttribute("data-main-rotation",C)}};_=new WeakMap,d=new WeakMap,v=new WeakMap,P=new WeakMap,O=new WeakMap,k=new WeakMap,E=new WeakMap,f=new WeakMap,g=new WeakSet,Pl=function(m){var R;m.parent!==this&&(this.attach(m),m.pageIndex=this.pageIndex,(R=m.parent)==null||R.detach(m),m.parent=this,m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))},Td=function(m){switch(Q(this,f).getMode()){case l.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(m);case l.AnnotationEditorType.INK:return new p.InkEditor(m)}return null},Ll=function(m){const R=this.getNextId(),C=Re(this,g,Td).call(this,{parent:this,id:R,x:m.offsetX,y:m.offsetY});return C&&this.add(C),C},Cd=function(){Me(this,E,!0);for(const m of Q(this,O).values())m.isEmpty()&&m.remove();Me(this,E,!1)},_t(y,"_initialized",!1);let S=y;i.AnnotationEditorLayer=S},(o,i,r)=>{var S,_,d,v,P,O,k,E,wd,Rd,xd,Nl;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var a=r(1),l=r(7),c=r(6);const N=class N extends c.AnnotationEditor{constructor(A){super({...A,name:"freeTextEditor"});ke(this,E);ke(this,S,this.editorDivBlur.bind(this));ke(this,_,this.editorDivFocus.bind(this));ke(this,d,this.editorDivKeydown.bind(this));ke(this,v);ke(this,P,"");ke(this,O,!1);ke(this,k);Me(this,v,A.color||N._defaultColor||c.AnnotationEditor._defaultLineColor),Me(this,k,A.fontSize||N._defaultFontSize)}static initialize(A){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(R=>[R,A.get(R)]));const m=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(m.getPropertyValue("--freetext-padding"))}static updateDefaultParams(A,m){switch(A){case a.AnnotationEditorParamsType.FREETEXT_SIZE:N._defaultFontSize=m;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:N._defaultColor=m;break}}updateParams(A,m){switch(A){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Re(this,E,wd).call(this,m);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Re(this,E,Rd).call(this,m);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,N._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,N._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,Q(this,k)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,Q(this,v)]]}getInitialTranslation(){return[-N._internalPadding*this.parent.scaleFactor,-(N._internalPadding+Q(this,k))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",Q(this,d)),this.editorDiv.addEventListener("focus",Q(this,_)),this.editorDiv.addEventListener("blur",Q(this,S)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",Q(this,d)),this.editorDiv.removeEventListener("focus",Q(this,_)),this.editorDiv.removeEventListener("blur",Q(this,S)),this.div.focus(),this.isEditing=!1)}focusin(A){super.focusin(A),A.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),Q(this,O)||(Me(this,O,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Me(this,P,Re(this,E,xd).call(this).trimEnd()),Re(this,E,Nl).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(A){this.enableEditMode(),this.editorDiv.focus()}keydown(A){A.target===this.div&&A.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(A){N._keyboardManager.exec(this,A)}editorDivFocus(A){this.isEditing=!0}editorDivBlur(A){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let A,m;this.width&&(A=this.x,m=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),N._l10nPromise.get("editor_free_text_aria_label").then(C=>{var B;return(B=this.editorDiv)==null?void 0:B.setAttribute("aria-label",C)}),N._l10nPromise.get("free_text_default_content").then(C=>{var B;return(B=this.editorDiv)==null?void 0:B.setAttribute("default-content",C)}),this.editorDiv.contentEditable=!0;const{style:R}=this.editorDiv;if(R.fontSize=`calc(${Q(this,k)}px * var(--scale-factor))`,R.color=Q(this,v),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,l.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[C,B]=this.parent.viewportBaseDimensions;this.setAt(A*C,m*B,this.width*C,this.height*B);for(const V of Q(this,P).split(`
`)){const oe=document.createElement("div");oe.append(V?document.createTextNode(V):document.createElement("br")),this.editorDiv.append(oe)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(A,m){const R=super.deserialize(A,m);return Me(R,k,A.fontSize),Me(R,v,a.Util.makeHexColor(...A.color)),Me(R,P,A.value),R}serialize(){if(this.isEmpty())return null;const A=N._internalPadding*this.parent.scaleFactor,m=this.getRect(A,A),R=c.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:a.AnnotationEditorType.FREETEXT,color:R,fontSize:Q(this,k),value:Q(this,P),pageIndex:this.parent.pageIndex,rect:m,rotation:this.rotation}}};S=new WeakMap,_=new WeakMap,d=new WeakMap,v=new WeakMap,P=new WeakMap,O=new WeakMap,k=new WeakMap,E=new WeakSet,wd=function(A){const m=C=>{this.editorDiv.style.fontSize=`calc(${C}px * var(--scale-factor))`,this.translate(0,-(C-Q(this,k))*this.parent.scaleFactor),Me(this,k,C),Re(this,E,Nl).call(this)},R=Q(this,k);this.parent.addCommands({cmd:()=>{m(A)},undo:()=>{m(R)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Rd=function(A){const m=Q(this,v);this.parent.addCommands({cmd:()=>{Me(this,v,A),this.editorDiv.style.color=A},undo:()=>{Me(this,v,m),this.editorDiv.style.color=m},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},xd=function(){const A=this.editorDiv.getElementsByTagName("div");if(A.length===0)return this.editorDiv.innerText;const m=[];for(let R=0,C=A.length;R<C;R++){const V=A[R].firstChild;(V==null?void 0:V.nodeName)==="#text"?m.push(V.data):m.push("")}return m.join(`
`)},Nl=function(){const[A,m]=this.parent.viewportBaseDimensions,R=this.div.getBoundingClientRect();this.width=R.width/A,this.height=R.height/m},_t(N,"_freeTextDefaultContent",""),_t(N,"_l10nPromise"),_t(N,"_internalPadding",0),_t(N,"_defaultColor",null),_t(N,"_defaultFontSize",10),_t(N,"_keyboardManager",new l.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],N.prototype.commitOrRemove]])),_t(N,"_type","freetext");let p=N;i.FreeTextEditor=p},(o,i,r)=>{var d,v,P,O,k,E,f,g,T,U,N,M,y,A,m,Od,kd,Md,Dd,Fl,Pd,Ld,Nd,vn,Ul,_r,yr,hs,jl,br,x,Il,Fd,Ud,jd,Bl,vr,ds,ql;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return c.fitCurve}});var a=r(1),l=r(6),c=r(25),p=r(7);const S=16,I=class I extends l.AnnotationEditor{constructor($){super({...$,name:"inkEditor"});ke(this,m);ke(this,d,0);ke(this,v,0);ke(this,P,0);ke(this,O,this.canvasPointermove.bind(this));ke(this,k,this.canvasPointerleave.bind(this));ke(this,E,this.canvasPointerup.bind(this));ke(this,f,this.canvasPointerdown.bind(this));ke(this,g,!1);ke(this,T,!1);ke(this,U,null);ke(this,N,null);ke(this,M,0);ke(this,y,0);ke(this,A,null);this.color=$.color||null,this.thickness=$.thickness||null,this.opacity=$.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize($){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(F=>[F,$.get(F)]))}static updateDefaultParams($,F){switch($){case a.AnnotationEditorParamsType.INK_THICKNESS:I._defaultThickness=F;break;case a.AnnotationEditorParamsType.INK_COLOR:I._defaultColor=F;break;case a.AnnotationEditorParamsType.INK_OPACITY:I._defaultOpacity=F/100;break}}updateParams($,F){switch($){case a.AnnotationEditorParamsType.INK_THICKNESS:Re(this,m,Od).call(this,F);break;case a.AnnotationEditorParamsType.INK_COLOR:Re(this,m,kd).call(this,F);break;case a.AnnotationEditorParamsType.INK_OPACITY:Re(this,m,Md).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,I._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,I._defaultColor||l.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(I._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||I._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||I._defaultColor||l.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??I._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Re(this,m,_r).call(this),Re(this,m,yr).call(this)),this.isAttachedToDOM||(this.parent.add(this),Re(this,m,hs).call(this)),Re(this,m,ds).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Q(this,N).disconnect(),Me(this,N,null),super.remove())}enableEditMode(){Q(this,g)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",Q(this,f)),this.canvas.addEventListener("pointerup",Q(this,E)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Q(this,f)),this.canvas.removeEventListener("pointerup",Q(this,E)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Q(this,g)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Me(this,g,!0),this.div.classList.add("disabled"),Re(this,m,ds).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin($){super.focusin($),this.enableEditMode()}canvasPointerdown($){$.button!==0||!this.isInEditMode()||Q(this,g)||(this.setInForeground(),$.type!=="mouse"&&this.div.focus(),$.stopPropagation(),this.canvas.addEventListener("pointerleave",Q(this,k)),this.canvas.addEventListener("pointermove",Q(this,O)),Re(this,m,Pd).call(this,$.offsetX,$.offsetY))}canvasPointermove($){$.stopPropagation(),Re(this,m,Ld).call(this,$.offsetX,$.offsetY)}canvasPointerup($){$.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&($.stopPropagation(),Re(this,m,Ul).call(this,$),this.setInBackground())}canvasPointerleave($){Re(this,m,Ul).call(this,$),this.setInBackground()}render(){if(this.div)return this.div;let $,F;this.width&&($=this.x,F=this.y),super.render(),I._l10nPromise.get("editor_ink_aria_label").then(be=>{var Ae;return(Ae=this.div)==null?void 0:Ae.setAttribute("aria-label",be)});const[Z,ce,ie,fe]=Re(this,m,Dd).call(this);if(this.setAt(Z,ce,0,0),this.setDims(ie,fe),Re(this,m,_r).call(this),this.width){const[be,Ae]=this.parent.viewportBaseDimensions;this.setAt($*be,F*Ae,this.width*be,this.height*Ae),Me(this,T,!0),Re(this,m,hs).call(this),this.setDims(this.width*be,this.height*Ae),Re(this,m,vn).call(this),Re(this,m,ql).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Re(this,m,yr).call(this),this.div}setDimensions($,F){const Z=Math.round($),ce=Math.round(F);if(Q(this,M)===Z&&Q(this,y)===ce)return;Me(this,M,Z),Me(this,y,ce),this.canvas.style.visibility="hidden",Q(this,d)&&Math.abs(Q(this,d)-$/F)>.01&&(F=Math.ceil($/Q(this,d)),this.setDims($,F));const[ie,fe]=this.parent.viewportBaseDimensions;this.width=$/ie,this.height=F/fe,Q(this,g)&&Re(this,m,jl).call(this,$,F),Re(this,m,hs).call(this),Re(this,m,vn).call(this),this.canvas.style.visibility="visible"}static deserialize($,F){var Ie,Le;const Z=super.deserialize($,F);Z.thickness=$.thickness,Z.color=a.Util.makeHexColor(...$.color),Z.opacity=$.opacity;const[ce,ie]=F.pageDimensions,fe=Z.width*ce,be=Z.height*ie,Ae=F.scaleFactor,Oe=$.thickness/2;Me(Z,d,fe/be),Me(Z,g,!0),Me(Z,M,Math.round(fe)),Me(Z,y,Math.round(be));for(const{bezier:De}of $.paths){const je=[];Z.paths.push(je);let Ze=Ae*(De[0]-Oe),st=Ae*(be-De[1]-Oe);for(let Xe=2,Ve=De.length;Xe<Ve;Xe+=6){const ze=Ae*(De[Xe]-Oe),hn=Ae*(be-De[Xe+1]-Oe),Lt=Ae*(De[Xe+2]-Oe),yt=Ae*(be-De[Xe+3]-Oe),Se=Ae*(De[Xe+4]-Oe),pe=Ae*(be-De[Xe+5]-Oe);je.push([[Ze,st],[ze,hn],[Lt,yt],[Se,pe]]),Ze=Se,st=pe}const Ke=Re(this,x,Il).call(this,je);Z.bezierPath2D.push(Ke)}const ye=Re(Ie=Z,m,Bl).call(Ie);return Me(Z,P,Math.max(S,ye[2]-ye[0])),Me(Z,v,Math.max(S,ye[3]-ye[1])),Re(Le=Z,m,jl).call(Le,fe,be),Z}serialize(){if(this.isEmpty())return null;const $=this.getRect(0,0),F=this.rotation%180===0?$[3]-$[1]:$[2]-$[0],Z=l.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:Z,thickness:this.thickness,opacity:this.opacity,paths:Re(this,m,Fd).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,F),pageIndex:this.parent.pageIndex,rect:$,rotation:this.rotation}}};d=new WeakMap,v=new WeakMap,P=new WeakMap,O=new WeakMap,k=new WeakMap,E=new WeakMap,f=new WeakMap,g=new WeakMap,T=new WeakMap,U=new WeakMap,N=new WeakMap,M=new WeakMap,y=new WeakMap,A=new WeakMap,m=new WeakSet,Od=function($){const F=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=$,Re(this,m,ds).call(this)},undo:()=>{this.thickness=F,Re(this,m,ds).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},kd=function($){const F=this.color;this.parent.addCommands({cmd:()=>{this.color=$,Re(this,m,vn).call(this)},undo:()=>{this.color=F,Re(this,m,vn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Md=function($){$/=100;const F=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=$,Re(this,m,vn).call(this)},undo:()=>{this.opacity=F,Re(this,m,vn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Dd=function(){const{width:$,height:F,rotation:Z}=this.parent.viewport;switch(Z){case 90:return[0,$,$,F];case 180:return[$,F,$,F];case 270:return[F,0,$,F];default:return[0,0,$,F]}},Fl=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,p.opacityToHex)(this.opacity)}`},Pd=function($,F){this.isEditing=!0,Q(this,T)||(Me(this,T,!0),Re(this,m,hs).call(this),this.thickness||(this.thickness=I._defaultThickness),this.color||(this.color=I._defaultColor||l.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=I._defaultOpacity)),this.currentPath.push([$,F]),Me(this,U,null),Re(this,m,Fl).call(this),this.ctx.beginPath(),this.ctx.moveTo($,F),Me(this,A,()=>{Q(this,A)&&(Q(this,U)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Re(this,m,vn).call(this),this.ctx.lineTo(...Q(this,U)),Me(this,U,null),this.ctx.stroke()),window.requestAnimationFrame(Q(this,A)))}),window.requestAnimationFrame(Q(this,A))},Ld=function($,F){const[Z,ce]=this.currentPath.at(-1);$===Z&&F===ce||(this.currentPath.push([$,F]),Me(this,U,[$,F]))},Nd=function($,F){var Oe;this.ctx.closePath(),Me(this,A,null),$=Math.min(Math.max($,0),this.canvas.width),F=Math.min(Math.max(F,0),this.canvas.height);const[Z,ce]=this.currentPath.at(-1);($!==Z||F!==ce)&&this.currentPath.push([$,F]);let ie;if(this.currentPath.length!==1)ie=(0,c.fitCurve)(this.currentPath,30,null);else{const ye=[$,F];ie=[[ye,ye.slice(),ye.slice(),ye]]}const fe=Re(Oe=I,x,Il).call(Oe,ie);this.currentPath.length=0;const be=()=>{this.paths.push(ie),this.bezierPath2D.push(fe),this.rebuild()},Ae=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Re(this,m,_r).call(this),Re(this,m,yr).call(this)),Re(this,m,ds).call(this))};this.parent.addCommands({cmd:be,undo:Ae,mustExec:!0})},vn=function(){if(this.isEmpty()){Re(this,m,br).call(this);return}Re(this,m,Fl).call(this);const{canvas:$,ctx:F}=this;F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,$.width,$.height),Re(this,m,br).call(this);for(const Z of this.bezierPath2D)F.stroke(Z)},Ul=function($){Re(this,m,Nd).call(this,$.offsetX,$.offsetY),this.canvas.removeEventListener("pointerleave",Q(this,k)),this.canvas.removeEventListener("pointermove",Q(this,O)),this.parent.addToAnnotationStorage(this)},_r=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",I._l10nPromise.get("editor_ink_canvas_aria_label").then($=>{var F;return(F=this.canvas)==null?void 0:F.setAttribute("aria-label",$)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},yr=function(){Me(this,N,new ResizeObserver($=>{const F=$[0].contentRect;F.width&&F.height&&this.setDimensions(F.width,F.height)})),Q(this,N).observe(this.div)},hs=function(){if(!Q(this,T))return;const[$,F]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*$),this.canvas.height=Math.ceil(this.height*F),Re(this,m,br).call(this)},jl=function($,F){const Z=Re(this,m,vr).call(this),ce=($-Z)/Q(this,P),ie=(F-Z)/Q(this,v);this.scaleFactor=Math.min(ce,ie)},br=function(){const $=Re(this,m,vr).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$,this.translationY*this.scaleFactor+$)},x=new WeakSet,Il=function($){const F=new Path2D;for(let Z=0,ce=$.length;Z<ce;Z++){const[ie,fe,be,Ae]=$[Z];Z===0&&F.moveTo(...ie),F.bezierCurveTo(fe[0],fe[1],be[0],be[1],Ae[0],Ae[1])}return F},Fd=function($,F,Z,ce){const fe=[],be=this.thickness/2;let Ae,Oe;for(const ye of this.paths){Ae=[],Oe=[];for(let Ie=0,Le=ye.length;Ie<Le;Ie++){const[De,je,Ze,st]=ye[Ie],Ke=$*(De[0]+F)+be,Xe=ce-$*(De[1]+Z)-be,Ve=$*(je[0]+F)+be,ze=ce-$*(je[1]+Z)-be,hn=$*(Ze[0]+F)+be,Lt=ce-$*(Ze[1]+Z)-be,yt=$*(st[0]+F)+be,Se=ce-$*(st[1]+Z)-be;Ie===0&&(Ae.push(Ke,Xe),Oe.push(Ke,Xe)),Ae.push(Ve,ze,hn,Lt,yt,Se),Re(this,m,Ud).call(this,Ke,Xe,Ve,ze,hn,Lt,yt,Se,4,Oe)}fe.push({bezier:Ae,points:Oe})}return fe},Ud=function($,F,Z,ce,ie,fe,be,Ae,Oe,ye){if(Re(this,m,jd).call(this,$,F,Z,ce,ie,fe,be,Ae)){ye.push(be,Ae);return}for(let Ie=1;Ie<Oe-1;Ie++){const Le=Ie/Oe,De=1-Le;let je=Le*$+De*Z,Ze=Le*F+De*ce,st=Le*Z+De*ie,Ke=Le*ce+De*fe;const Xe=Le*ie+De*be,Ve=Le*fe+De*Ae;je=Le*je+De*st,Ze=Le*Ze+De*Ke,st=Le*st+De*Xe,Ke=Le*Ke+De*Ve,je=Le*je+De*st,Ze=Le*Ze+De*Ke,ye.push(je,Ze)}ye.push(be,Ae)},jd=function($,F,Z,ce,ie,fe,be,Ae){const ye=(3*Z-2*$-be)**2,Ie=(3*ce-2*F-Ae)**2,Le=(3*ie-$-2*be)**2,De=(3*fe-F-2*Ae)**2;return Math.max(ye,Le)+Math.max(Ie,De)<=10},Bl=function(){let $=1/0,F=-1/0,Z=1/0,ce=-1/0;for(const ie of this.paths)for(const[fe,be,Ae,Oe]of ie){const ye=a.Util.bezierBoundingBox(...fe,...be,...Ae,...Oe);$=Math.min($,ye[0]),Z=Math.min(Z,ye[1]),F=Math.max(F,ye[2]),ce=Math.max(ce,ye[3])}return[$,Z,F,ce]},vr=function(){return Q(this,g)?Math.ceil(this.thickness*this.parent.scaleFactor):0},ds=function($=!1){if(this.isEmpty())return;if(!Q(this,g)){Re(this,m,vn).call(this);return}const F=Re(this,m,Bl).call(this),Z=Re(this,m,vr).call(this);Me(this,P,Math.max(S,F[2]-F[0])),Me(this,v,Math.max(S,F[3]-F[1]));const ce=Math.ceil(Z+Q(this,P)*this.scaleFactor),ie=Math.ceil(Z+Q(this,v)*this.scaleFactor),[fe,be]=this.parent.viewportBaseDimensions;this.width=ce/fe,this.height=ie/be,Me(this,d,ce/ie),Re(this,m,ql).call(this);const Ae=this.translationX,Oe=this.translationY;this.translationX=-F[0],this.translationY=-F[1],Re(this,m,hs).call(this),Re(this,m,vn).call(this),Me(this,M,ce),Me(this,y,ie),this.setDims(ce,ie);const ye=$?Z/this.scaleFactor/2:0;this.translate(Ae-this.translationX-ye,Oe-this.translationY-ye)},ql=function(){const{style:$}=this.div;Q(this,d)>=1?($.minHeight=`${S}px`,$.minWidth=`${Math.round(Q(this,d)*S)}px`):($.minWidth=`${S}px`,$.minHeight=`${Math.round(S/Q(this,d))}px`)},ke(I,x),_t(I,"_defaultColor",null),_t(I,"_defaultOpacity",1),_t(I,"_defaultThickness",1),_t(I,"_l10nPromise"),_t(I,"_type","ink");let _=I;i.InkEditor=_},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const a=r(26);i.fitCurve=a},o=>{function i(E,f,g){if(!Array.isArray(E))throw new TypeError("First argument should be an array");if(E.forEach(M=>{if(!Array.isArray(M)||M.some(y=>typeof y!="number")||M.length!==E[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),E=E.filter((M,y)=>y===0||!M.every((A,m)=>A===E[y-1][m])),E.length<2)return[];const T=E.length,U=P(E[1],E[0]),N=P(E[T-2],E[T-1]);return r(E,U,N,f,g)}function r(E,f,g,T,U){var M,y,A,m,R,C,B,V,oe,_e,he,ue,W;if(E.length===2)return ue=O.vectorLen(O.subtract(E[0],E[1]))/3,M=[E[0],O.addArrays(E[0],O.mulItems(f,ue)),O.addArrays(E[1],O.mulItems(g,ue)),E[1]],[M];if(y=S(E),[M,m,C]=a(E,y,y,f,g,U),m===0||m<T)return[M];if(m<T*T)for(A=y,R=m,B=C,W=0;W<20;W++){if(A=c(M,E,A),[M,m,C]=a(E,y,A,f,g,U),m<T)return[M];if(C===B){let ee=m/R;if(ee>.9999&&ee<1.0001)break}R=m,B=C}return he=[],V=O.subtract(E[C-1],E[C+1]),V.every(ee=>ee===0)&&(V=O.subtract(E[C-1],E[C]),[V[0],V[1]]=[-V[1],V[0]]),oe=O.normalize(V),_e=O.mulItems(oe,-1),he=he.concat(r(E.slice(0,C+1),f,oe,T,U)),he=he.concat(r(E.slice(C),_e,g,T,U)),he}function a(E,f,g,T,U,N){var M,y,A;return M=l(E,g,T,U),[y,A]=_(E,M,f),N&&N({bez:M,points:E,params:f,maxErr:y,maxPoint:A}),[M,y,A]}function l(E,f,g,T){var U,N,M,y,A,m,R,C,B,V,oe,_e,he,ue,W,ee,ne,ae=E[0],G=E[E.length-1];for(U=[ae,null,null,G],N=O.zeros_Xx2x2(f.length),he=0,ue=f.length;he<ue;he++)ee=f[he],ne=1-ee,M=N[he],M[0]=O.mulItems(g,3*ee*(ne*ne)),M[1]=O.mulItems(T,3*ne*(ee*ee));for(y=[[0,0],[0,0]],A=[0,0],he=0,ue=E.length;he<ue;he++)ee=f[he],M=N[he],y[0][0]+=O.dot(M[0],M[0]),y[0][1]+=O.dot(M[0],M[1]),y[1][0]+=O.dot(M[0],M[1]),y[1][1]+=O.dot(M[1],M[1]),W=O.subtract(E[he],k.q([ae,ae,G,G],ee)),A[0]+=O.dot(M[0],W),A[1]+=O.dot(M[1],W);return m=y[0][0]*y[1][1]-y[1][0]*y[0][1],R=y[0][0]*A[1]-y[1][0]*A[0],C=A[0]*y[1][1]-A[1]*y[0][1],B=m===0?0:C/m,V=m===0?0:R/m,_e=O.vectorLen(O.subtract(ae,G)),oe=1e-6*_e,B<oe||V<oe?(U[1]=O.addArrays(ae,O.mulItems(g,_e/3)),U[2]=O.addArrays(G,O.mulItems(T,_e/3))):(U[1]=O.addArrays(ae,O.mulItems(g,B)),U[2]=O.addArrays(G,O.mulItems(T,V))),U}function c(E,f,g){return g.map((T,U)=>p(E,f[U],T))}function p(E,f,g){var T=O.subtract(k.q(E,g),f),U=k.qprime(E,g),N=O.mulMatrix(T,U),M=O.sum(O.squareItems(U))+2*O.mulMatrix(T,k.qprimeprime(E,g));return M===0?g:g-N/M}function S(E){var f=[],g,T,U;return E.forEach((N,M)=>{g=M?T+O.vectorLen(O.subtract(N,U)):0,f.push(g),T=g,U=N}),f=f.map(N=>N/T),f}function _(E,f,g){var T,U,N,M,y,A,m,R;U=0,N=Math.floor(E.length/2);const C=d(f,10);for(y=0,A=E.length;y<A;y++)m=E[y],R=v(f,g[y],C,10),M=O.subtract(k.q(f,R),m),T=M[0]*M[0]+M[1]*M[1],T>U&&(U=T,N=y);return[U,N]}var d=function(E,f){for(var g,T=[0],U=E[0],N=0,M=1;M<=f;M++)g=k.q(E,M/f),N+=O.vectorLen(O.subtract(g,U)),T.push(N),U=g;return T=T.map(y=>y/N),T};function v(E,f,g,T){if(f<0)return 0;if(f>1)return 1;for(var U,N,M,y,A,m=1;m<=T;m++)if(f<=g[m]){y=(m-1)/T,M=m/T,N=g[m-1],U=g[m],A=(f-N)/(U-N)*(M-y)+y;break}return A}function P(E,f){return O.normalize(O.subtract(E,f))}class O{static zeros_Xx2x2(f){for(var g=[];f--;)g.push([0,0]);return g}static mulItems(f,g){return f.map(T=>T*g)}static mulMatrix(f,g){return f.reduce((T,U,N)=>T+U*g[N],0)}static subtract(f,g){return f.map((T,U)=>T-g[U])}static addArrays(f,g){return f.map((T,U)=>T+g[U])}static addItems(f,g){return f.map(T=>T+g)}static sum(f){return f.reduce((g,T)=>g+T)}static dot(f,g){return O.mulMatrix(f,g)}static vectorLen(f){return Math.hypot(...f)}static divItems(f,g){return f.map(T=>T/g)}static squareItems(f){return f.map(g=>g*g)}static normalize(f){return this.divItems(f,this.vectorLen(f))}}class k{static q(f,g){var T=1-g,U=O.mulItems(f[0],T*T*T),N=O.mulItems(f[1],3*T*T*g),M=O.mulItems(f[2],3*T*g*g),y=O.mulItems(f[3],g*g*g);return O.addArrays(O.addArrays(U,N),O.addArrays(M,y))}static qprime(f,g){var T=1-g,U=O.mulItems(O.subtract(f[1],f[0]),3*T*T),N=O.mulItems(O.subtract(f[2],f[1]),6*T*g),M=O.mulItems(O.subtract(f[3],f[2]),3*g*g);return O.addArrays(O.addArrays(U,N),M)}static qprimeprime(f,g){return O.addArrays(O.mulItems(O.addArrays(O.subtract(f[2],O.mulItems(f[1],2)),f[0]),6*(1-g)),O.mulItems(O.addArrays(O.subtract(f[3],O.mulItems(f[2],2)),f[1]),6*g))}}o.exports=i,o.exports.fitCubic=r,o.exports.createTangent=P},(o,i,r)=>{var x,Hl,zl,Gl;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var a=r(1),l=r(8),c=r(5),p=r(28),S=r(29);const _=1e3,d=9,v=new WeakSet;function P(X){return{width:X[2]-X[0],height:X[3]-X[1]}}class O{static create(b){switch(b.data.annotationType){case a.AnnotationType.LINK:return new E(b);case a.AnnotationType.TEXT:return new f(b);case a.AnnotationType.WIDGET:switch(b.data.fieldType){case"Tx":return new T(b);case"Btn":return b.data.radioButton?new N(b):b.data.checkBox?new U(b):new M(b);case"Ch":return new y(b)}return new g(b);case a.AnnotationType.POPUP:return new A(b);case a.AnnotationType.FREETEXT:return new R(b);case a.AnnotationType.LINE:return new C(b);case a.AnnotationType.SQUARE:return new B(b);case a.AnnotationType.CIRCLE:return new V(b);case a.AnnotationType.POLYLINE:return new oe(b);case a.AnnotationType.CARET:return new he(b);case a.AnnotationType.INK:return new ue(b);case a.AnnotationType.POLYGON:return new _e(b);case a.AnnotationType.HIGHLIGHT:return new W(b);case a.AnnotationType.UNDERLINE:return new ee(b);case a.AnnotationType.SQUIGGLY:return new ne(b);case a.AnnotationType.STRIKEOUT:return new ae(b);case a.AnnotationType.STAMP:return new G(b);case a.AnnotationType.FILEATTACHMENT:return new re(b);default:return new k(b)}}}class k{constructor(b,{isRenderable:L=!1,ignoreBorder:j=!1,createQuadrilaterals:I=!1}={}){this.isRenderable=L,this.data=b.data,this.layer=b.layer,this.page=b.page,this.viewport=b.viewport,this.linkService=b.linkService,this.downloadManager=b.downloadManager,this.imageResourcesPath=b.imageResourcesPath,this.renderForms=b.renderForms,this.svgFactory=b.svgFactory,this.annotationStorage=b.annotationStorage,this.enableScripting=b.enableScripting,this.hasJSActions=b.hasJSActions,this._fieldObjects=b.fieldObjects,this._mouseState=b.mouseState,L&&(this.container=this._createContainer(j)),I&&(this.quadrilaterals=this._createQuadrilaterals(j))}_createContainer(b=!1){const L=this.data,j=this.page,I=this.viewport,H=document.createElement("section"),{width:J,height:$}=P(L.rect),[F,Z,ce,ie]=I.viewBox,fe=ce-F,be=ie-Z;H.setAttribute("data-annotation-id",L.id);const Ae=a.Util.normalizeRect([L.rect[0],j.view[3]-L.rect[1]+j.view[1],L.rect[2],j.view[3]-L.rect[3]+j.view[1]]);if(!b&&L.borderStyle.width>0){H.style.borderWidth=`${L.borderStyle.width}px`;const ye=L.borderStyle.horizontalCornerRadius,Ie=L.borderStyle.verticalCornerRadius;if(ye>0||Ie>0){const De=`calc(${ye}px * var(--scale-factor)) / calc(${Ie}px * var(--scale-factor))`;H.style.borderRadius=De}else if(this instanceof N){const De=`calc(${J}px * var(--scale-factor)) / calc(${$}px * var(--scale-factor))`;H.style.borderRadius=De}switch(L.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:H.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:H.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:H.style.borderBottomStyle="solid";break}const Le=L.borderColor||null;Le?H.style.borderColor=a.Util.makeHexColor(Le[0]|0,Le[1]|0,Le[2]|0):H.style.borderWidth=0}H.style.left=`${100*(Ae[0]-F)/fe}%`,H.style.top=`${100*(Ae[1]-Z)/be}%`;const{rotation:Oe}=L;return L.hasOwnCanvas||Oe===0?(H.style.width=`${100*J/fe}%`,H.style.height=`${100*$/be}%`):this.setRotation(Oe,H),H}setRotation(b,L=this.container){const[j,I,H,J]=this.viewport.viewBox,$=H-j,F=J-I,{width:Z,height:ce}=P(this.data.rect);let ie,fe;b%180===0?(ie=100*Z/$,fe=100*ce/F):(ie=100*ce/$,fe=100*Z/F),L.style.width=`${ie}%`,L.style.height=`${fe}%`,L.setAttribute("data-main-rotation",(360-b)%360)}get _commonActions(){const b=(L,j,I)=>{const H=I.detail[L];I.target.style[j]=p.ColorConverters[`${H[0]}_HTML`](H.slice(1))};return(0,a.shadow)(this,"_commonActions",{display:L=>{const j=L.detail.display%2===1;this.container.style.visibility=j?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:j,print:L.detail.display===0||L.detail.display===3})},print:L=>{this.annotationStorage.setValue(this.data.id,{print:L.detail.print})},hidden:L=>{this.container.style.visibility=L.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:L.detail.hidden})},focus:L=>{setTimeout(()=>L.target.focus({preventScroll:!1}),0)},userName:L=>{L.target.title=L.detail.userName},readonly:L=>{L.detail.readonly?L.target.setAttribute("readonly",""):L.target.removeAttribute("readonly")},required:L=>{this._setRequired(L.target,L.detail.required)},bgColor:L=>{b("bgColor","backgroundColor",L)},fillColor:L=>{b("fillColor","backgroundColor",L)},fgColor:L=>{b("fgColor","color",L)},textColor:L=>{b("textColor","color",L)},borderColor:L=>{b("borderColor","borderColor",L)},strokeColor:L=>{b("strokeColor","borderColor",L)},rotation:L=>{const j=L.detail.rotation;this.setRotation(j),this.annotationStorage.setValue(this.data.id,{rotation:j})}})}_dispatchEventFromSandbox(b,L){const j=this._commonActions;for(const I of Object.keys(L.detail)){const H=b[I]||j[I];H&&H(L)}}_setDefaultPropertiesFromJS(b){if(!this.enableScripting)return;const L=this.annotationStorage.getRawValue(this.data.id);if(!L)return;const j=this._commonActions;for(const[I,H]of Object.entries(L)){const J=j[I];if(J){const $={detail:{[I]:H},target:b};J($),delete L[I]}}}_createQuadrilaterals(b=!1){if(!this.data.quadPoints)return null;const L=[],j=this.data.rect;for(const I of this.data.quadPoints)this.data.rect=[I[2].x,I[2].y,I[1].x,I[1].y],L.push(this._createContainer(b));return this.data.rect=j,L}_createPopup(b,L){let j=this.container;this.quadrilaterals&&(b=b||this.quadrilaterals,j=this.quadrilaterals[0]),b||(b=document.createElement("div"),b.className="popupTriggerArea",j.append(b));const H=new m({container:j,trigger:b,color:L.color,titleObj:L.titleObj,modificationDate:L.modificationDate,contentsObj:L.contentsObj,richText:L.richText,hideWrapper:!0}).render();H.style.left="100%",j.append(H)}_renderQuadrilaterals(b){for(const L of this.quadrilaterals)L.className=b;return this.quadrilaterals}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(b,L=null){const j=[];if(this._fieldObjects){const I=this._fieldObjects[b];if(I)for(const{page:H,id:J,exportValues:$}of I){if(H===-1||J===L)continue;const F=typeof $=="string"?$:null,Z=document.querySelector(`[data-element-id="${J}"]`);if(Z&&!v.has(Z)){(0,a.warn)(`_getElementsByName - element not allowed: ${J}`);continue}j.push({id:J,exportValue:F,domElement:Z})}return j}for(const I of document.getElementsByName(b)){const{id:H,exportValue:J}=I;H!==L&&v.has(I)&&j.push({id:H,exportValue:J,domElement:I})}return j}static get platform(){const b=typeof navigator<"u"?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:b.includes("Win"),isMac:b.includes("Mac")})}}class E extends k{constructor(b,L=null){super(b,{isRenderable:!0,ignoreBorder:!!(L!=null&&L.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=b.data.isTooltipOnly}render(){const{data:b,linkService:L}=this,j=document.createElement("a");j.setAttribute("data-element-id",b.id);let I=!1;return b.url?(L.addLinkAttributes(j,b.url,b.newWindow),I=!0):b.action?(this._bindNamedAction(j,b.action),I=!0):b.dest?(this._bindLink(j,b.dest),I=!0):(b.actions&&(b.actions.Action||b.actions["Mouse Up"]||b.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,b),I=!0),b.resetForm?(this._bindResetFormAction(j,b.resetForm),I=!0):this.isTooltipOnly&&!I&&(this._bindLink(j,""),I=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((H,J)=>{const $=J===0?j:j.cloneNode();return H.append($),H}):(this.container.className="linkAnnotation",I&&this.container.append(j),this.container)}_bindLink(b,L){b.href=this.linkService.getDestinationHash(L),b.onclick=()=>(L&&this.linkService.goToDestination(L),!1),(L||L==="")&&(b.className="internalLink")}_bindNamedAction(b,L){b.href=this.linkService.getAnchorUrl(""),b.onclick=()=>(this.linkService.executeNamedAction(L),!1),b.className="internalLink"}_bindJSAction(b,L){b.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const I of Object.keys(L.actions)){const H=j.get(I);H&&(b[H]=()=>{var J;return(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L.id,name:I}}),!1})}b.onclick||(b.onclick=()=>!1),b.className="internalLink"}_bindResetFormAction(b,L){const j=b.onclick;if(j||(b.href=this.linkService.getAnchorUrl("")),b.className="internalLink",!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(b.onclick=()=>!1);return}b.onclick=()=>{var ce;j&&j();const{fields:I,refs:H,include:J}=L,$=[];if(I.length!==0||H.length!==0){const ie=new Set(H);for(const fe of I){const be=this._fieldObjects[fe]||[];for(const{id:Ae}of be)ie.add(Ae)}for(const fe of Object.values(this._fieldObjects))for(const be of fe)ie.has(be.id)===J&&$.push(be)}else for(const ie of Object.values(this._fieldObjects))$.push(...ie);const F=this.annotationStorage,Z=[];for(const ie of $){const{id:fe}=ie;switch(Z.push(fe),ie.type){case"text":{const Ae=ie.defaultValue||"";F.setValue(fe,{value:Ae});break}case"checkbox":case"radiobutton":{const Ae=ie.defaultValue===ie.exportValues;F.setValue(fe,{value:Ae});break}case"combobox":case"listbox":{const Ae=ie.defaultValue||"";F.setValue(fe,{value:Ae});break}default:continue}const be=document.querySelector(`[data-element-id="${fe}"]`);if(be){if(!v.has(be)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${fe}`);continue}}else continue;be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Z,name:"ResetForm"}})),!1}}}class f extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L})}render(){this.container.className="textAnnotation";const b=document.createElement("img");return b.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",b.alt="[{{type}} Annotation]",b.dataset.l10nId="text_annotation_type",b.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(b,this.data),this.container.append(b),this.container}}class g extends k{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(b){const{isWin:L,isMac:j}=k.platform;return L&&b.ctrlKey||j&&b.metaKey}_setEventListener(b,L,j,I){L.includes("mouse")?b.addEventListener(L,H=>{var J;(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:I(H),shift:H.shiftKey,modifier:this._getKeyModifier(H)}})}):b.addEventListener(L,H=>{var J;(J=this.linkService.eventBus)==null||J.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:I(H)}})})}_setEventListeners(b,L,j){var I;for(const[H,J]of L)(J==="Action"||(I=this.data.actions)!=null&&I[J])&&this._setEventListener(b,H,J,j)}_setBackgroundColor(b){const L=this.data.backgroundColor||null;b.style.backgroundColor=L===null?"transparent":a.Util.makeHexColor(L[0],L[1],L[2])}_setTextStyle(b){const L=["left","center","right"],{fontColor:j}=this.data.defaultAppearanceData,I=this.data.defaultAppearanceData.fontSize||d,H=b.style;let J;if(this.data.multiLine){const $=Math.abs(this.data.rect[3]-this.data.rect[1]),F=Math.round($/(a.LINE_FACTOR*I))||1,Z=$/F;J=Math.min(I,Math.round(Z/a.LINE_FACTOR))}else{const $=Math.abs(this.data.rect[3]-this.data.rect[1]);J=Math.min(I,Math.round($/a.LINE_FACTOR))}H.fontSize=`calc(${J}px * var(--scale-factor))`,H.color=a.Util.makeHexColor(j[0],j[1],j[2]),this.data.textAlignment!==null&&(H.textAlign=L[this.data.textAlignment])}_setRequired(b,L){L?b.setAttribute("required",!0):b.removeAttribute("required"),b.setAttribute("aria-required",L)}}class T extends g{constructor(b){const L=b.renderForms||!b.data.hasAppearance&&!!b.data.fieldValue;super(b,{isRenderable:L})}setPropertyOnSiblings(b,L,j,I){const H=this.annotationStorage;for(const J of this._getElementsByName(b.name,b.id))J.domElement&&(J.domElement[L]=j),H.setValue(J.id,{[I]:j})}render(){var I;const b=this.annotationStorage,L=this.data.id;this.container.className="textWidgetAnnotation";let j=null;if(this.renderForms){const H=b.getValue(L,{value:this.data.fieldValue});let J=H.formattedValue||H.value||"";const $=b.getValue(L,{charLimit:this.data.maxLen}).charLimit;$&&J.length>$&&(J=J.slice(0,$));const F={userValue:J,formattedValue:null,valueOnFocus:""};this.data.multiLine?(j=document.createElement("textarea"),j.textContent=J,this.data.doNotScroll&&(j.style.overflowY="hidden")):(j=document.createElement("input"),j.type="text",j.setAttribute("value",J),this.data.doNotScroll&&(j.style.overflowX="hidden")),v.add(j),j.setAttribute("data-element-id",L),j.disabled=this.data.readOnly,j.name=this.data.fieldName,j.tabIndex=_,this._setRequired(j,this.data.required),$&&(j.maxLength=$),j.addEventListener("input",ce=>{b.setValue(L,{value:ce.target.value}),this.setPropertyOnSiblings(j,"value",ce.target.value,"value")}),j.addEventListener("resetform",ce=>{const ie=this.data.defaultFieldValue??"";j.value=F.userValue=ie,F.formattedValue=null});let Z=ce=>{const{formattedValue:ie}=F;ie!=null&&(ce.target.value=ie),ce.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){j.addEventListener("focus",ie=>{F.userValue&&(ie.target.value=F.userValue),F.valueOnFocus=ie.target.value}),j.addEventListener("updatefromsandbox",ie=>{const fe={value(be){F.userValue=be.detail.value??"",b.setValue(L,{value:F.userValue.toString()}),be.target.value=F.userValue},formattedValue(be){const{formattedValue:Ae}=be.detail;F.formattedValue=Ae,Ae!=null&&be.target!==document.activeElement&&(be.target.value=Ae),b.setValue(L,{formattedValue:Ae})},selRange(be){be.target.setSelectionRange(...be.detail.selRange)},charLimit:be=>{var Ie;const{charLimit:Ae}=be.detail,{target:Oe}=be;if(Ae===0){Oe.removeAttribute("maxLength");return}Oe.setAttribute("maxLength",Ae);let ye=F.userValue;!ye||ye.length<=Ae||(ye=ye.slice(0,Ae),Oe.value=F.userValue=ye,b.setValue(L,{value:ye}),(Ie=this.linkService.eventBus)==null||Ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:ye,willCommit:!0,commitKey:1,selStart:Oe.selectionStart,selEnd:Oe.selectionEnd}}))}};this._dispatchEventFromSandbox(fe,ie)}),j.addEventListener("keydown",ie=>{var Ae;let fe=-1;if(ie.key==="Escape"?fe=0:ie.key==="Enter"?fe=2:ie.key==="Tab"&&(fe=3),fe===-1)return;const{value:be}=ie.target;F.valueOnFocus!==be&&(F.userValue=be,(Ae=this.linkService.eventBus)==null||Ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:be,willCommit:!0,commitKey:fe,selStart:ie.target.selectionStart,selEnd:ie.target.selectionEnd}}))});const ce=Z;Z=null,j.addEventListener("blur",ie=>{var be;const{value:fe}=ie.target;F.userValue=fe,this._mouseState.isDown&&F.valueOnFocus!==fe&&((be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:fe,willCommit:!0,commitKey:1,selStart:ie.target.selectionStart,selEnd:ie.target.selectionEnd}})),ce(ie)}),(I=this.data.actions)!=null&&I.Keystroke&&j.addEventListener("beforeinput",ie=>{var De;const{data:fe,target:be}=ie,{value:Ae,selectionStart:Oe,selectionEnd:ye}=be;let Ie=Oe,Le=ye;switch(ie.inputType){case"deleteWordBackward":{const je=Ae.substring(0,Oe).match(/\w*[^\w]*$/);je&&(Ie-=je[0].length);break}case"deleteWordForward":{const je=Ae.substring(Oe).match(/^[^\w]*\w*/);je&&(Le+=je[0].length);break}case"deleteContentBackward":Oe===ye&&(Ie-=1);break;case"deleteContentForward":Oe===ye&&(Le+=1);break}ie.preventDefault(),(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ae,change:fe||"",willCommit:!1,selStart:Ie,selEnd:Le}})}),this._setEventListeners(j,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ie=>ie.target.value)}if(Z&&j.addEventListener("blur",Z),this.data.comb){const ie=(this.data.rect[2]-this.data.rect[0])/$;j.classList.add("comb"),j.style.letterSpacing=`calc(${ie}px * var(--scale-factor) - 1ch)`}}else j=document.createElement("div"),j.textContent=this.data.fieldValue,j.style.verticalAlign="middle",j.style.display="table-cell";return this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class U extends g{constructor(b){super(b,{isRenderable:b.renderForms})}render(){const b=this.annotationStorage,L=this.data,j=L.id;let I=b.getValue(j,{value:L.exportValue===L.fieldValue}).value;typeof I=="string"&&(I=I!=="Off",b.setValue(j,{value:I})),this.container.className="buttonWidgetAnnotation checkBox";const H=document.createElement("input");return v.add(H),H.setAttribute("data-element-id",j),H.disabled=L.readOnly,this._setRequired(H,this.data.required),H.type="checkbox",H.name=L.fieldName,I&&H.setAttribute("checked",!0),H.setAttribute("exportValue",L.exportValue),H.tabIndex=_,H.addEventListener("change",J=>{const{name:$,checked:F}=J.target;for(const Z of this._getElementsByName($,j)){const ce=F&&Z.exportValue===L.exportValue;Z.domElement&&(Z.domElement.checked=ce),b.setValue(Z.id,{value:ce})}b.setValue(j,{value:F})}),H.addEventListener("resetform",J=>{const $=L.defaultFieldValue||"Off";J.target.checked=$===L.exportValue}),this.enableScripting&&this.hasJSActions&&(H.addEventListener("updatefromsandbox",J=>{const $={value(F){F.target.checked=F.detail.value!=="Off",b.setValue(j,{value:F.target.checked})}};this._dispatchEventFromSandbox($,J)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class N extends g{constructor(b){super(b,{isRenderable:b.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const b=this.annotationStorage,L=this.data,j=L.id;let I=b.getValue(j,{value:L.fieldValue===L.buttonValue}).value;typeof I=="string"&&(I=I!==L.buttonValue,b.setValue(j,{value:I}));const H=document.createElement("input");if(v.add(H),H.setAttribute("data-element-id",j),H.disabled=L.readOnly,this._setRequired(H,this.data.required),H.type="radio",H.name=L.fieldName,I&&H.setAttribute("checked",!0),H.tabIndex=_,H.addEventListener("change",J=>{const{name:$,checked:F}=J.target;for(const Z of this._getElementsByName($,j))b.setValue(Z.id,{value:!1});b.setValue(j,{value:F})}),H.addEventListener("resetform",J=>{const $=L.defaultFieldValue;J.target.checked=$!=null&&$===L.buttonValue}),this.enableScripting&&this.hasJSActions){const J=L.buttonValue;H.addEventListener("updatefromsandbox",$=>{const F={value:Z=>{const ce=J===Z.detail.value;for(const ie of this._getElementsByName(Z.target.name)){const fe=ce&&ie.id===j;ie.domElement&&(ie.domElement.checked=fe),b.setValue(ie.id,{value:fe})}}};this._dispatchEventFromSandbox(F,$)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)}return this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class M extends E{constructor(b){super(b,{ignoreBorder:b.data.hasAppearance})}render(){const b=super.render();b.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(b.title=this.data.alternativeText);const L=b.lastChild;return this.enableScripting&&this.hasJSActions&&L&&(this._setDefaultPropertiesFromJS(L),L.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({},j)})),b}}class y extends g{constructor(b){super(b,{isRenderable:b.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const b=this.annotationStorage,L=this.data.id,j=b.getValue(L,{value:this.data.fieldValue}),I=document.createElement("select");v.add(I),I.setAttribute("data-element-id",L),I.disabled=this.data.readOnly,this._setRequired(I,this.data.required),I.name=this.data.fieldName,I.tabIndex=_;let H=this.data.combo&&this.data.options.length>0;this.data.combo||(I.size=this.data.options.length,this.data.multiSelect&&(I.multiple=!0)),I.addEventListener("resetform",Z=>{const ce=this.data.defaultFieldValue;for(const ie of I.options)ie.selected=ie.value===ce});for(const Z of this.data.options){const ce=document.createElement("option");ce.textContent=Z.displayValue,ce.value=Z.exportValue,j.value.includes(Z.exportValue)&&(ce.setAttribute("selected",!0),H=!1),I.append(ce)}let J=null;if(H){const Z=document.createElement("option");Z.value=" ",Z.setAttribute("hidden",!0),Z.setAttribute("selected",!0),I.prepend(Z),J=()=>{Z.remove(),I.removeEventListener("input",J),J=null},I.addEventListener("input",J)}const $=(Z,ce)=>{const ie=ce?"value":"textContent",fe=Z.target.options;return Z.target.multiple?Array.prototype.filter.call(fe,be=>be.selected).map(be=>be[ie]):fe.selectedIndex===-1?null:fe[fe.selectedIndex][ie]},F=Z=>{const ce=Z.target.options;return Array.prototype.map.call(ce,ie=>({displayValue:ie.textContent,exportValue:ie.value}))};return this.enableScripting&&this.hasJSActions?(I.addEventListener("updatefromsandbox",Z=>{const ce={value(ie){J==null||J();const fe=ie.detail.value,be=new Set(Array.isArray(fe)?fe:[fe]);for(const Ae of I.options)Ae.selected=be.has(Ae.value);b.setValue(L,{value:$(ie,!0)})},multipleSelection(ie){I.multiple=!0},remove(ie){const fe=I.options,be=ie.detail.remove;fe[be].selected=!1,I.remove(be),fe.length>0&&Array.prototype.findIndex.call(fe,Oe=>Oe.selected)===-1&&(fe[0].selected=!0),b.setValue(L,{value:$(ie,!0),items:F(ie)})},clear(ie){for(;I.length!==0;)I.remove(0);b.setValue(L,{value:null,items:[]})},insert(ie){const{index:fe,displayValue:be,exportValue:Ae}=ie.detail.insert,Oe=I.children[fe],ye=document.createElement("option");ye.textContent=be,ye.value=Ae,Oe?Oe.before(ye):I.append(ye),b.setValue(L,{value:$(ie,!0),items:F(ie)})},items(ie){const{items:fe}=ie.detail;for(;I.length!==0;)I.remove(0);for(const be of fe){const{displayValue:Ae,exportValue:Oe}=be,ye=document.createElement("option");ye.textContent=Ae,ye.value=Oe,I.append(ye)}I.options.length>0&&(I.options[0].selected=!0),b.setValue(L,{value:$(ie,!0),items:F(ie)})},indices(ie){const fe=new Set(ie.detail.indices);for(const be of ie.target.options)be.selected=fe.has(be.index);b.setValue(L,{value:$(ie,!0)})},editable(ie){ie.target.disabled=!ie.detail.editable}};this._dispatchEventFromSandbox(ce,Z)}),I.addEventListener("input",Z=>{var fe;const ce=$(Z,!0),ie=$(Z,!1);b.setValue(L,{value:ce}),(fe=this.linkService.eventBus)==null||fe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:ie,changeEx:ce,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(I,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Z=>Z.target.checked)):I.addEventListener("input",function(Z){b.setValue(L,{value:$(Z,!0)})}),this.data.combo&&this._setTextStyle(I),this._setBackgroundColor(I),this._setDefaultPropertiesFromJS(I),this.container.append(I),this.container}}class A extends k{constructor(b){var j,I,H;const L=!!((j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L})}render(){const b=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",b.includes(this.data.parentType))return this.container;const L=`[data-annotation-id="${this.data.parentId}"]`,j=this.layer.querySelectorAll(L);if(j.length===0)return this.container;const I=new m({container:this.container,trigger:Array.from(j),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),H=this.page,J=a.Util.normalizeRect([this.data.parentRect[0],H.view[3]-this.data.parentRect[1]+H.view[1],this.data.parentRect[2],H.view[3]-this.data.parentRect[3]+H.view[1]]),$=J[0]+this.data.parentRect[2]-this.data.parentRect[0],F=J[1],[Z,ce,ie,fe]=this.viewport.viewBox,be=ie-Z,Ae=fe-ce;return this.container.style.left=`${100*($-Z)/be}%`,this.container.style.top=`${100*(F-ce)/Ae}%`,this.container.append(I.render()),this.container}}class m{constructor(b){this.container=b.container,this.trigger=b.trigger,this.color=b.color,this.titleObj=b.titleObj,this.modificationDate=b.modificationDate,this.contentsObj=b.contentsObj,this.richText=b.richText,this.hideWrapper=b.hideWrapper||!1,this.pinned=!1}render(){var $,F;const L=document.createElement("div");L.className="popupWrapper",this.hideElement=this.hideWrapper?L:this.container,this.hideElement.hidden=!0;const j=document.createElement("div");j.className="popup";const I=this.color;if(I){const Z=.7*(255-I[0])+I[0],ce=.7*(255-I[1])+I[1],ie=.7*(255-I[2])+I[2];j.style.backgroundColor=a.Util.makeHexColor(Z|0,ce|0,ie|0)}const H=document.createElement("h1");H.dir=this.titleObj.dir,H.textContent=this.titleObj.str,j.append(H);const J=l.PDFDateString.toDateObject(this.modificationDate);if(J){const Z=document.createElement("span");Z.className="popupDate",Z.textContent="{{date}}, {{time}}",Z.dataset.l10nId="annotation_date_string",Z.dataset.l10nArgs=JSON.stringify({date:J.toLocaleDateString(),time:J.toLocaleTimeString()}),j.append(Z)}if(($=this.richText)!=null&&$.str&&(!((F=this.contentsObj)!=null&&F.str)||this.contentsObj.str===this.richText.str))S.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:j}),j.lastChild.className="richText popupContent";else{const Z=this._formatContents(this.contentsObj);j.append(Z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Z of this.trigger)Z.addEventListener("click",this._toggle.bind(this)),Z.addEventListener("mouseover",this._show.bind(this,!1)),Z.addEventListener("mouseout",this._hide.bind(this,!1));return j.addEventListener("click",this._hide.bind(this,!0)),L.append(j),L}_formatContents({str:b,dir:L}){const j=document.createElement("p");j.className="popupContent",j.dir=L;const I=b.split(/(?:\r\n?|\n)/);for(let H=0,J=I.length;H<J;++H){const $=I[H];j.append(document.createTextNode($)),H<J-1&&j.append(document.createElement("br"))}return j}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(b=!1){b&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(b=!0){b&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class R extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0}),this.textContent=b.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const b=document.createElement("div");b.className="annotationTextContent",b.setAttribute("role","comment");for(const L of this.textContent){const j=document.createElement("span");j.textContent=L,b.append(j)}this.container.append(b)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class C extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const b=this.data,{width:L,height:j}=P(b.rect),I=this.svgFactory.create(L,j,!0),H=this.svgFactory.createElement("svg:line");return H.setAttribute("x1",b.rect[2]-b.lineCoordinates[0]),H.setAttribute("y1",b.rect[3]-b.lineCoordinates[1]),H.setAttribute("x2",b.rect[2]-b.lineCoordinates[2]),H.setAttribute("y2",b.rect[3]-b.lineCoordinates[3]),H.setAttribute("stroke-width",b.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),I.append(H),this.container.append(I),this._createPopup(H,b),this.container}}class B extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const b=this.data,{width:L,height:j}=P(b.rect),I=this.svgFactory.create(L,j,!0),H=b.borderStyle.width,J=this.svgFactory.createElement("svg:rect");return J.setAttribute("x",H/2),J.setAttribute("y",H/2),J.setAttribute("width",L-H),J.setAttribute("height",j-H),J.setAttribute("stroke-width",H||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),I.append(J),this.container.append(I),this._createPopup(J,b),this.container}}class V extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const b=this.data,{width:L,height:j}=P(b.rect),I=this.svgFactory.create(L,j,!0),H=b.borderStyle.width,J=this.svgFactory.createElement("svg:ellipse");return J.setAttribute("cx",L/2),J.setAttribute("cy",j/2),J.setAttribute("rx",L/2-H/2),J.setAttribute("ry",j/2-H/2),J.setAttribute("stroke-width",H||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),I.append(J),this.container.append(I),this._createPopup(J,b),this.container}}class oe extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const b=this.data,{width:L,height:j}=P(b.rect),I=this.svgFactory.create(L,j,!0);let H=[];for(const $ of b.vertices){const F=$.x-b.rect[0],Z=b.rect[3]-$.y;H.push(F+","+Z)}H=H.join(" ");const J=this.svgFactory.createElement(this.svgElementName);return J.setAttribute("points",H),J.setAttribute("stroke-width",b.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),I.append(J),this.container.append(I),this._createPopup(J,b),this.container}}class _e extends oe{constructor(b){super(b),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class he extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ue extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const b=this.data,{width:L,height:j}=P(b.rect),I=this.svgFactory.create(L,j,!0);for(const H of b.inkLists){let J=[];for(const F of H){const Z=F.x-b.rect[0],ce=b.rect[3]-F.y;J.push(`${Z},${ce}`)}J=J.join(" ");const $=this.svgFactory.createElement(this.svgElementName);$.setAttribute("points",J),$.setAttribute("stroke-width",b.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),this._createPopup($,b),I.append($)}return this.container.append(I),this.container}}class W extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class ee extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class ne extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ae extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class G extends k{constructor(b){var j,I,H;const L=!!(b.data.hasPopup||(j=b.data.titleObj)!=null&&j.str||(I=b.data.contentsObj)!=null&&I.str||(H=b.data.richText)!=null&&H.str);super(b,{isRenderable:L,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class re extends k{constructor(b){var I;super(b,{isRenderable:!0});const{filename:L,content:j}=this.data.file;this.filename=(0,l.getFilenameFromUrl)(L),this.content=j,(I=this.linkService.eventBus)==null||I.dispatch("fileattachmentannotation",{source:this,filename:L,content:j})}render(){var L,j;this.container.className="fileAttachmentAnnotation";const b=document.createElement("div");return b.className="popupTriggerArea",b.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((L=this.data.titleObj)!=null&&L.str||(j=this.data.contentsObj)!=null&&j.str||this.data.richText)&&this._createPopup(b,this.data),this.container.append(b),this.container}_download(){var b;(b=this.downloadManager)==null||b.openOrDownloadData(this.container,this.content,this.filename)}}const te=class te{static render(b){var $,F;const{annotations:L,div:j,viewport:I,accessibilityManager:H}=b;Re(this,x,zl).call(this,j,I);let J=0;for(const Z of L){if(Z.annotationType!==a.AnnotationType.POPUP){const{width:ie,height:fe}=P(Z.rect);if(ie<=0||fe<=0)continue}const ce=O.create({data:Z,layer:j,page:b.page,viewport:I,linkService:b.linkService,downloadManager:b.downloadManager,imageResourcesPath:b.imageResourcesPath||"",renderForms:b.renderForms!==!1,svgFactory:new l.DOMSVGFactory,annotationStorage:b.annotationStorage||new c.AnnotationStorage,enableScripting:b.enableScripting,hasJSActions:b.hasJSActions,fieldObjects:b.fieldObjects,mouseState:b.mouseState||{isDown:!1}});if(ce.isRenderable){const ie=ce.render();if(Z.hidden&&(ie.style.visibility="hidden"),Array.isArray(ie))for(const fe of ie)fe.style.zIndex=J++,Re($=te,x,Hl).call($,fe,Z.id,j,H);else ie.style.zIndex=J++,ce instanceof A?j.prepend(ie):Re(F=te,x,Hl).call(F,ie,Z.id,j,H)}}Re(this,x,Gl).call(this,j,b.annotationCanvasMap)}static update(b){const{annotationCanvasMap:L,div:j,viewport:I}=b;Re(this,x,zl).call(this,j,I),Re(this,x,Gl).call(this,j,L),j.hidden=!1}};x=new WeakSet,Hl=function(b,L,j,I){const H=b.firstChild||b;H.id=`${l.AnnotationPrefix}${L}`,j.append(b),I==null||I.moveElementInDOM(j,b,H,!1)},zl=function(b,{width:L,height:j,rotation:I}){const{style:H}=b,J=I%180!==0,$=Math.floor(L)+"px",F=Math.floor(j)+"px";H.width=J?F:$,H.height=J?$:F,b.setAttribute("data-main-rotation",I)},Gl=function(b,L){if(L){for(const[j,I]of L){const H=b.querySelector(`[data-annotation-id="${j}"]`);if(!H)continue;const{firstChild:J}=H;J?J.nodeName==="CANVAS"?J.replaceWith(I):J.before(I):H.append(I)}L.clear()}},ke(te,x);let Y=te;i.AnnotationLayer=Y},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function r(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}class a{static CMYK_G([c,p,S,_]){return["G",1-Math.min(1,.3*c+.59*S+.11*p+_)]}static G_CMYK([c]){return["CMYK",0,0,0,1-c]}static G_RGB([c]){return["RGB",c,c,c]}static G_HTML([c]){const p=r(c);return`#${p}${p}${p}`}static RGB_G([c,p,S]){return["G",.3*c+.59*p+.11*S]}static RGB_HTML([c,p,S]){const _=r(c),d=r(p),v=r(S);return`#${_}${d}${v}`}static T_HTML(){return"#00000000"}static CMYK_RGB([c,p,S,_]){return["RGB",1-Math.min(1,c+_),1-Math.min(1,S+_),1-Math.min(1,p+_)]}static CMYK_HTML(c){const p=this.CMYK_RGB(c).slice(1);return this.RGB_HTML(p)}static RGB_CMYK([c,p,S]){const _=1-c,d=1-p,v=1-S,P=Math.min(_,d,v);return["CMYK",_,d,v,P]}}i.ColorConverters=a},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var a=r(20);class l{static setupStorage(p,S,_,d,v){const P=d.getValue(S,{value:null});switch(_.name){case"textarea":if(P.value!==null&&(p.textContent=P.value),v==="print")break;p.addEventListener("input",O=>{d.setValue(S,{value:O.target.value})});break;case"input":if(_.attributes.type==="radio"||_.attributes.type==="checkbox"){if(P.value===_.attributes.xfaOn?p.setAttribute("checked",!0):P.value===_.attributes.xfaOff&&p.removeAttribute("checked"),v==="print")break;p.addEventListener("change",O=>{d.setValue(S,{value:O.target.checked?O.target.getAttribute("xfaOn"):O.target.getAttribute("xfaOff")})})}else{if(P.value!==null&&p.setAttribute("value",P.value),v==="print")break;p.addEventListener("input",O=>{d.setValue(S,{value:O.target.value})})}break;case"select":if(P.value!==null)for(const O of _.children)O.attributes.value===P.value&&(O.attributes.selected=!0);p.addEventListener("input",O=>{const k=O.target.options,E=k.selectedIndex===-1?"":k[k.selectedIndex].value;d.setValue(S,{value:E})});break}}static setAttributes({html:p,element:S,storage:_=null,intent:d,linkService:v}){const{attributes:P}=S,O=p instanceof HTMLAnchorElement;P.type==="radio"&&(P.name=`${P.name}-${d}`);for(const[k,E]of Object.entries(P))if(E!=null)switch(k){case"class":E.length&&p.setAttribute(k,E.join(" "));break;case"dataId":break;case"id":p.setAttribute("data-element-id",E);break;case"style":Object.assign(p.style,E);break;case"textContent":p.textContent=E;break;default:(!O||k!=="href"&&k!=="newWindow")&&p.setAttribute(k,E)}O&&v.addLinkAttributes(p,P.href,P.newWindow),_&&P.dataId&&this.setupStorage(p,P.dataId,S,_)}static render(p){var f;const S=p.annotationStorage,_=p.linkService,d=p.xfaHtml,v=p.intent||"display",P=document.createElement(d.name);d.attributes&&this.setAttributes({html:P,element:d,intent:v,linkService:_});const O=[[d,-1,P]],k=p.div;if(k.append(P),p.viewport){const g=`matrix(${p.viewport.transform.join(",")})`;k.style.transform=g}v!=="richText"&&k.setAttribute("class","xfaLayer xfaFont");const E=[];for(;O.length>0;){const[g,T,U]=O.at(-1);if(T+1===g.children.length){O.pop();continue}const N=g.children[++O.at(-1)[1]];if(N===null)continue;const{name:M}=N;if(M==="#text"){const A=document.createTextNode(N.value);E.push(A),U.append(A);continue}let y;if((f=N==null?void 0:N.attributes)!=null&&f.xmlns?y=document.createElementNS(N.attributes.xmlns,M):y=document.createElement(M),U.append(y),N.attributes&&this.setAttributes({html:y,element:N,storage:S,intent:v,linkService:_}),N.children&&N.children.length>0)O.push([N,-1,y]);else if(N.value){const A=document.createTextNode(N.value);a.XfaText.shouldBuildText(M)&&E.push(A),y.append(A)}}for(const g of k.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:E}}static update(p){const S=`matrix(${p.viewport.transform.join(",")})`;p.div.style.transform=S,p.div.hidden=!1}}i.XfaLayer=l},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=U;var a=r(1),l=r(8);const c=1e5,p=30,S=.8,_=new Map,d=/^\s+$/g;function v(N,M){const y=_.get(N);if(y)return y;M.save(),M.font=`${p}px ${N}`;const A=M.measureText("");let m=A.fontBoundingBoxAscent,R=Math.abs(A.fontBoundingBoxDescent);if(m){M.restore();const B=m/(m+R);return _.set(N,B),B}M.strokeStyle="red",M.clearRect(0,0,p,p),M.strokeText("g",0,0);let C=M.getImageData(0,0,p,p).data;R=0;for(let B=C.length-1-3;B>=0;B-=4)if(C[B]>0){R=Math.ceil(B/4/p);break}M.clearRect(0,0,p,p),M.strokeText("A",0,p),C=M.getImageData(0,0,p,p).data,m=0;for(let B=0,V=C.length;B<V;B+=4)if(C[B]>0){m=p-Math.floor(B/4/p);break}if(M.restore(),m){const B=m/(m+R);return _.set(N,B),B}return _.set(N,S),S}function P(N,M,y,A){const m=document.createElement("span"),R=N._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:M.str!=="",hasEOL:M.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:M.str!=="",hasEOL:M.hasEOL,fontSize:0};N._textDivs.push(m);const C=a.Util.transform(N._viewport.transform,M.transform);let B=Math.atan2(C[1],C[0]);const V=y[M.fontName];V.vertical&&(B+=Math.PI/2);const oe=Math.hypot(C[2],C[3]),_e=oe*v(V.fontFamily,A);let he,ue;B===0?(he=C[4],ue=C[5]-_e):(he=C[4]+_e*Math.sin(B),ue=C[5]-_e*Math.cos(B)),m.style.left=`${he}px`,m.style.top=`${ue}px`,m.style.fontSize=`${oe}px`,m.style.fontFamily=V.fontFamily,R.fontSize=oe,m.setAttribute("role","presentation"),m.textContent=M.str,m.dir=M.dir,N._fontInspectorEnabled&&(m.dataset.fontName=M.fontName),B!==0&&(R.angle=B*(180/Math.PI));let W=!1;if(M.str.length>1||N._enhanceTextSelection&&d.test(M.str))W=!0;else if(M.str!==" "&&M.transform[0]!==M.transform[3]){const ee=Math.abs(M.transform[0]),ne=Math.abs(M.transform[3]);ee!==ne&&Math.max(ee,ne)/Math.min(ee,ne)>1.5&&(W=!0)}if(W&&(V.vertical?R.canvasWidth=M.height*N._viewport.scale:R.canvasWidth=M.width*N._viewport.scale),N._textDivProperties.set(m,R),N._textContentStream&&N._layoutText(m),N._enhanceTextSelection&&R.hasText){let ee=1,ne=0;B!==0&&(ee=Math.cos(B),ne=Math.sin(B));const ae=(V.vertical?M.height:M.width)*N._viewport.scale,G=oe;let re,Y;B!==0?(re=[ee,ne,-ne,ee,he,ue],Y=a.Util.getAxialAlignedBoundingBox([0,0,ae,G],re)):Y=[he,ue,he+ae,ue+G],N._bounds.push({left:Y[0],top:Y[1],right:Y[2],bottom:Y[3],div:m,size:[ae,G],m:re})}}function O(N){if(N._canceled)return;const M=N._textDivs,y=N._capability,A=M.length;if(A>c){N._renderingDone=!0,y.resolve();return}if(!N._textContentStream)for(let m=0;m<A;m++)N._layoutText(M[m]);N._renderingDone=!0,y.resolve()}function k(N,M,y){let A=0;for(let m=0;m<y;m++){const R=N[M++];R>0&&(A=A?Math.min(R,A):R)}return A}function E(N){const M=N._bounds,y=N._viewport,A=f(y.width,y.height,M);for(let m=0;m<A.length;m++){const R=M[m].div,C=N._textDivProperties.get(R);if(C.angle===0){C.paddingLeft=M[m].left-A[m].left,C.paddingTop=M[m].top-A[m].top,C.paddingRight=A[m].right-M[m].right,C.paddingBottom=A[m].bottom-M[m].bottom,N._textDivProperties.set(R,C);continue}const B=A[m],V=M[m],oe=V.m,_e=oe[0],he=oe[1],ue=[[0,0],[0,V.size[1]],[V.size[0],0],V.size],W=new Float64Array(64);for(let ne=0,ae=ue.length;ne<ae;ne++){const G=a.Util.applyTransform(ue[ne],oe);W[ne+0]=_e&&(B.left-G[0])/_e,W[ne+4]=he&&(B.top-G[1])/he,W[ne+8]=_e&&(B.right-G[0])/_e,W[ne+12]=he&&(B.bottom-G[1])/he,W[ne+16]=he&&(B.left-G[0])/-he,W[ne+20]=_e&&(B.top-G[1])/_e,W[ne+24]=he&&(B.right-G[0])/-he,W[ne+28]=_e&&(B.bottom-G[1])/_e,W[ne+32]=_e&&(B.left-G[0])/-_e,W[ne+36]=he&&(B.top-G[1])/-he,W[ne+40]=_e&&(B.right-G[0])/-_e,W[ne+44]=he&&(B.bottom-G[1])/-he,W[ne+48]=he&&(B.left-G[0])/he,W[ne+52]=_e&&(B.top-G[1])/-_e,W[ne+56]=he&&(B.right-G[0])/he,W[ne+60]=_e&&(B.bottom-G[1])/-_e}const ee=1+Math.min(Math.abs(_e),Math.abs(he));C.paddingLeft=k(W,32,16)/ee,C.paddingTop=k(W,48,16)/ee,C.paddingRight=k(W,0,16)/ee,C.paddingBottom=k(W,16,16)/ee,N._textDivProperties.set(R,C)}}function f(N,M,y){const A=y.map(function(R,C){return{x1:R.left,y1:R.top,x2:R.right,y2:R.bottom,index:C,x1New:void 0,x2New:void 0}});g(N,A);const m=new Array(y.length);for(const R of A){const C=R.index;m[C]={left:R.x1New,top:0,right:R.x2New,bottom:0}}y.map(function(R,C){const B=m[C],V=A[C];V.x1=R.top,V.y1=N-B.right,V.x2=R.bottom,V.y2=N-B.left,V.index=C,V.x1New=void 0,V.x2New=void 0}),g(M,A);for(const R of A){const C=R.index;m[C].top=R.x1New,m[C].bottom=R.x2New}return m}function g(N,M){M.sort(function(m,R){return m.x1-R.x1||m.index-R.index});const A=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const m of M){let R=0;for(;R<A.length&&A[R].end<=m.y1;)R++;let C=A.length-1;for(;C>=0&&A[C].start>=m.y2;)C--;let B,V,oe,_e,he=-1/0;for(oe=R;oe<=C;oe++){B=A[oe],V=B.boundary;let ee;V.x2>m.x1?ee=V.index>m.index?V.x1New:m.x1:V.x2New===void 0?ee=(V.x2+m.x1)/2:ee=V.x2New,ee>he&&(he=ee)}for(m.x1New=he,oe=R;oe<=C;oe++)B=A[oe],V=B.boundary,V.x2New===void 0?V.x2>m.x1?V.index>m.index&&(V.x2New=V.x2):V.x2New=he:V.x2New>he&&(V.x2New=Math.max(he,V.x2));const ue=[];let W=null;for(oe=R;oe<=C;oe++){B=A[oe],V=B.boundary;const ee=V.x2>m.x2?V:m;W===ee?ue.at(-1).end=B.end:(ue.push({start:B.start,end:B.end,boundary:ee}),W=ee)}for(A[R].start<m.y1&&(ue[0].start=m.y1,ue.unshift({start:A[R].start,end:m.y1,boundary:A[R].boundary})),m.y2<A[C].end&&(ue.at(-1).end=m.y2,ue.push({start:m.y2,end:A[C].end,boundary:A[C].boundary})),oe=R;oe<=C;oe++){if(B=A[oe],V=B.boundary,V.x2New!==void 0)continue;let ee=!1;for(_e=R-1;!ee&&_e>=0&&A[_e].start>=V.y1;_e--)ee=A[_e].boundary===V;for(_e=C+1;!ee&&_e<A.length&&A[_e].end<=V.y2;_e++)ee=A[_e].boundary===V;for(_e=0;!ee&&_e<ue.length;_e++)ee=ue[_e].boundary===V;ee||(V.x2New=he)}Array.prototype.splice.apply(A,[R,C-R+1,...ue])}for(const m of A){const R=m.boundary;R.x2New===void 0&&(R.x2New=Math.max(N,R.x2))}}class T{constructor({textContent:M,textContentStream:y,container:A,viewport:m,textDivs:R,textContentItemsStr:C,enhanceTextSelection:B}){var V;B&&(0,l.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=M,this._textContentStream=y,this._container=A,this._document=A.ownerDocument,this._viewport=m,this._textDivs=R||[],this._textContentItemsStr=C||[],this._enhanceTextSelection=!!B,this._fontInspectorEnabled=!!((V=globalThis.FontInspector)!=null&&V.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,a.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(M,y){for(let A=0,m=M.length;A<m;A++){if(M[A].str===void 0){if(M[A].type==="beginMarkedContentProps"||M[A].type==="beginMarkedContent"){const R=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),M[A].id!==null&&this._container.setAttribute("id",`${M[A].id}`),R.append(this._container)}else M[A].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(M[A].str),P(this,M[A],y,this._layoutTextCtx)}}_layoutText(M){const y=this._textDivProperties.get(M);let A="";if(y.canvasWidth!==0&&y.hasText){const{fontFamily:m}=M.style,{fontSize:R}=y;(R!==this._layoutTextLastFontSize||m!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${R*this._devicePixelRatio}px ${m}`,this._layoutTextLastFontSize=R,this._layoutTextLastFontFamily=m);const{width:C}=this._layoutTextCtx.measureText(M.textContent);if(C>0){const B=this._devicePixelRatio*y.canvasWidth/C;this._enhanceTextSelection&&(y.scale=B),A=`scaleX(${B})`}}if(y.angle!==0&&(A=`rotate(${y.angle}deg) ${A}`),A.length>0&&(this._enhanceTextSelection&&(y.originalTransform=A),M.style.transform=A),y.hasText&&this._container.append(M),y.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(M=0){const y=(0,a.createPromiseCapability)();let A=Object.create(null);const m=this._document.createElement("canvas");if(m.height=m.width=p,this._layoutTextCtx=m.getContext("2d",{alpha:!1}),this._textContent){const R=this._textContent.items,C=this._textContent.styles;this._processItems(R,C),y.resolve()}else if(this._textContentStream){const R=()=>{this._reader.read().then(({value:C,done:B})=>{if(B){y.resolve();return}Object.assign(A,C.styles),this._processItems(C.items,A),R()},y.reject)};this._reader=this._textContentStream.getReader(),R()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');y.promise.then(()=>{A=null,M?this._renderTimer=setTimeout(()=>{O(this),this._renderTimer=null},M):O(this)},this._capability.reject)}expandTextDivs(M=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(E(this),this._bounds=null);const y=[],A=[];for(let m=0,R=this._textDivs.length;m<R;m++){const C=this._textDivs[m],B=this._textDivProperties.get(C);B.hasText&&(M?(y.length=0,A.length=0,B.originalTransform&&y.push(B.originalTransform),B.paddingTop>0?(A.push(`${B.paddingTop}px`),y.push(`translateY(${-B.paddingTop}px)`)):A.push(0),B.paddingRight>0?A.push(`${B.paddingRight/B.scale}px`):A.push(0),B.paddingBottom>0?A.push(`${B.paddingBottom}px`):A.push(0),B.paddingLeft>0?(A.push(`${B.paddingLeft/B.scale}px`),y.push(`translateX(${-B.paddingLeft/B.scale}px)`)):A.push(0),C.style.padding=A.join(" "),y.length&&(C.style.transform=y.join(" "))):(C.style.padding=null,C.style.transform=B.originalTransform))}}}i.TextLayerRenderTask=T;function U(N){const M=new T({textContent:N.textContent,textContentStream:N.textContentStream,container:N.container,viewport:N.viewport,textDivs:N.textDivs,textContentItemsStr:N.textContentItemsStr,enhanceTextSelection:N.enhanceTextSelection});return M._render(N.timeout),M}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var a=r(8),l=r(1),c=r(3);let p=class{constructor(){(0,l.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=p;{let f=function(y){let A=[];const m=[];for(const R of y){if(R.fn==="save"){A.push({fnId:92,fn:"group",items:[]}),m.push(A),A=A.at(-1).items;continue}R.fn==="restore"?A=m.pop():A.push(R)}return A},g=function(y){if(Number.isInteger(y))return y.toString();const A=y.toFixed(10);let m=A.length-1;if(A[m]!=="0")return A;do m--;while(A[m]==="0");return A.substring(0,A[m]==="."?m:m+1)},T=function(y){if(y[4]===0&&y[5]===0){if(y[1]===0&&y[2]===0)return y[0]===1&&y[3]===1?"":`scale(${g(y[0])} ${g(y[3])})`;if(y[0]===y[3]&&y[1]===-y[2]){const A=Math.acos(y[0])*180/Math.PI;return`rotate(${g(A)})`}}else if(y[0]===1&&y[1]===0&&y[2]===0&&y[3]===1)return`translate(${g(y[4])} ${g(y[5])})`;return`matrix(${g(y[0])} ${g(y[1])} ${g(y[2])} ${g(y[3])} ${g(y[4])} ${g(y[5])})`};const S={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},_="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",v=["butt","round","square"],P=["miter","round","bevel"],O=function(y,A="",m=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([y],{type:A}));const R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C=`data:${A};base64,`;for(let B=0,V=y.length;B<V;B+=3){const oe=y[B]&255,_e=y[B+1]&255,he=y[B+2]&255,ue=oe>>2,W=(oe&3)<<4|_e>>4,ee=B+1<V?(_e&15)<<2|he>>6:64,ne=B+2<V?he&63:64;C+=R[ue]+R[W]+R[ee]+R[ne]}return C},k=function(){const y=new Uint8Array([137,80,78,71,13,10,26,10]),A=12,m=new Int32Array(256);for(let he=0;he<256;he++){let ue=he;for(let W=0;W<8;W++)ue&1?ue=3988292384^ue>>1&2147483647:ue=ue>>1&2147483647;m[he]=ue}function R(he,ue,W){let ee=-1;for(let ne=ue;ne<W;ne++){const ae=(ee^he[ne])&255,G=m[ae];ee=ee>>>8^G}return ee^-1}function C(he,ue,W,ee){let ne=ee;const ae=ue.length;W[ne]=ae>>24&255,W[ne+1]=ae>>16&255,W[ne+2]=ae>>8&255,W[ne+3]=ae&255,ne+=4,W[ne]=he.charCodeAt(0)&255,W[ne+1]=he.charCodeAt(1)&255,W[ne+2]=he.charCodeAt(2)&255,W[ne+3]=he.charCodeAt(3)&255,ne+=4,W.set(ue,ne),ne+=ue.length;const G=R(W,ee+4,ne);W[ne]=G>>24&255,W[ne+1]=G>>16&255,W[ne+2]=G>>8&255,W[ne+3]=G&255}function B(he,ue,W){let ee=1,ne=0;for(let ae=ue;ae<W;++ae)ee=(ee+(he[ae]&255))%65521,ne=(ne+ee)%65521;return ne<<16|ee}function V(he){if(!c.isNodeJS)return oe(he);try{let ue;parseInt(process.versions.node)>=8?ue=he:ue=Buffer.from(he);const W=require$$5.deflateSync(ue,{level:9});return W instanceof Uint8Array?W:new Uint8Array(W)}catch(ue){(0,l.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ue)}return oe(he)}function oe(he){let ue=he.length;const W=65535,ee=Math.ceil(ue/W),ne=new Uint8Array(2+ue+ee*5+4);let ae=0;ne[ae++]=120,ne[ae++]=156;let G=0;for(;ue>W;)ne[ae++]=0,ne[ae++]=255,ne[ae++]=255,ne[ae++]=0,ne[ae++]=0,ne.set(he.subarray(G,G+W),ae),ae+=W,G+=W,ue-=W;ne[ae++]=1,ne[ae++]=ue&255,ne[ae++]=ue>>8&255,ne[ae++]=~ue&65535&255,ne[ae++]=(~ue&65535)>>8&255,ne.set(he.subarray(G),ae),ae+=he.length-G;const re=B(he,0,he.length);return ne[ae++]=re>>24&255,ne[ae++]=re>>16&255,ne[ae++]=re>>8&255,ne[ae++]=re&255,ne}function _e(he,ue,W,ee){const ne=he.width,ae=he.height;let G,re,Y;const x=he.data;switch(ue){case l.ImageKind.GRAYSCALE_1BPP:re=0,G=1,Y=ne+7>>3;break;case l.ImageKind.RGB_24BPP:re=2,G=8,Y=ne*3;break;case l.ImageKind.RGBA_32BPP:re=6,G=8,Y=ne*4;break;default:throw new Error("invalid format")}const w=new Uint8Array((1+Y)*ae);let q=0,K=0;for(let I=0;I<ae;++I)w[q++]=0,w.set(x.subarray(K,K+Y),q),K+=Y,q+=Y;if(ue===l.ImageKind.GRAYSCALE_1BPP&&ee){q=0;for(let I=0;I<ae;I++){q++;for(let H=0;H<Y;H++)w[q++]^=255}}const te=new Uint8Array([ne>>24&255,ne>>16&255,ne>>8&255,ne&255,ae>>24&255,ae>>16&255,ae>>8&255,ae&255,G,re,0,0,0]),X=V(w),b=y.length+A*3+te.length+X.length,L=new Uint8Array(b);let j=0;return L.set(y,j),j+=y.length,C("IHDR",te,L,j),j+=A+te.length,C("IDATA",X,L,j),j+=A+X.length,C("IEND",new Uint8Array(0),L,j),O(L,"image/png",W)}return function(ue,W,ee){const ne=ue.kind===void 0?l.ImageKind.GRAYSCALE_1BPP:ue.kind;return _e(ue,ne,W,ee)}}();class E{constructor(){this.fontSizeScale=1,this.fontWeight=S.fontWeight,this.fontSize=0,this.textMatrix=l.IDENTITY_MATRIX,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=l.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=S.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(A,m){this.x=A,this.y=m}}let U=0,N=0,M=0;i.SVGGraphics=p=class{constructor(y,A,m=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new E,this.transformMatrix=l.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=y,this.objs=A,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m,this._operatorIdMapping=[];for(const R in l.OPS)this._operatorIdMapping[l.OPS[R]]=R}save(){this.transformStack.push(this.transformMatrix);const y=this.current;this.extraStack.push(y),this.current=y.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(y){this.save(),this.executeOpTree(y),this.restore()}loadDependencies(y){const A=y.fnArray,m=y.argsArray;for(let R=0,C=A.length;R<C;R++)if(A[R]===l.OPS.dependency)for(const B of m[R]){const V=B.startsWith("g_")?this.commonObjs:this.objs,oe=new Promise(_e=>{V.get(B,_e)});this.current.dependencies.push(oe)}return Promise.all(this.current.dependencies)}transform(y,A,m,R,C,B){const V=[y,A,m,R,C,B];this.transformMatrix=l.Util.transform(this.transformMatrix,V),this.tgrp=null}getSVG(y,A){this.viewport=A;const m=this._initialize(A);return this.loadDependencies(y).then(()=>(this.transformMatrix=l.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(y)),m))}convertOpList(y){const A=this._operatorIdMapping,m=y.argsArray,R=y.fnArray,C=[];for(let B=0,V=R.length;B<V;B++){const oe=R[B];C.push({fnId:oe,fn:A[oe],args:m[B]})}return f(C)}executeOpTree(y){for(const A of y){const m=A.fn,R=A.fnId,C=A.args;switch(R|0){case l.OPS.beginText:this.beginText();break;case l.OPS.dependency:break;case l.OPS.setLeading:this.setLeading(C);break;case l.OPS.setLeadingMoveText:this.setLeadingMoveText(C[0],C[1]);break;case l.OPS.setFont:this.setFont(C);break;case l.OPS.showText:this.showText(C[0]);break;case l.OPS.showSpacedText:this.showText(C[0]);break;case l.OPS.endText:this.endText();break;case l.OPS.moveText:this.moveText(C[0],C[1]);break;case l.OPS.setCharSpacing:this.setCharSpacing(C[0]);break;case l.OPS.setWordSpacing:this.setWordSpacing(C[0]);break;case l.OPS.setHScale:this.setHScale(C[0]);break;case l.OPS.setTextMatrix:this.setTextMatrix(C[0],C[1],C[2],C[3],C[4],C[5]);break;case l.OPS.setTextRise:this.setTextRise(C[0]);break;case l.OPS.setTextRenderingMode:this.setTextRenderingMode(C[0]);break;case l.OPS.setLineWidth:this.setLineWidth(C[0]);break;case l.OPS.setLineJoin:this.setLineJoin(C[0]);break;case l.OPS.setLineCap:this.setLineCap(C[0]);break;case l.OPS.setMiterLimit:this.setMiterLimit(C[0]);break;case l.OPS.setFillRGBColor:this.setFillRGBColor(C[0],C[1],C[2]);break;case l.OPS.setStrokeRGBColor:this.setStrokeRGBColor(C[0],C[1],C[2]);break;case l.OPS.setStrokeColorN:this.setStrokeColorN(C);break;case l.OPS.setFillColorN:this.setFillColorN(C);break;case l.OPS.shadingFill:this.shadingFill(C[0]);break;case l.OPS.setDash:this.setDash(C[0],C[1]);break;case l.OPS.setRenderingIntent:this.setRenderingIntent(C[0]);break;case l.OPS.setFlatness:this.setFlatness(C[0]);break;case l.OPS.setGState:this.setGState(C[0]);break;case l.OPS.fill:this.fill();break;case l.OPS.eoFill:this.eoFill();break;case l.OPS.stroke:this.stroke();break;case l.OPS.fillStroke:this.fillStroke();break;case l.OPS.eoFillStroke:this.eoFillStroke();break;case l.OPS.clip:this.clip("nonzero");break;case l.OPS.eoClip:this.clip("evenodd");break;case l.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case l.OPS.paintImageXObject:this.paintImageXObject(C[0]);break;case l.OPS.paintInlineImageXObject:this.paintInlineImageXObject(C[0]);break;case l.OPS.paintImageMaskXObject:this.paintImageMaskXObject(C[0]);break;case l.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(C[0],C[1]);break;case l.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case l.OPS.closePath:this.closePath();break;case l.OPS.closeStroke:this.closeStroke();break;case l.OPS.closeFillStroke:this.closeFillStroke();break;case l.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case l.OPS.nextLine:this.nextLine();break;case l.OPS.transform:this.transform(C[0],C[1],C[2],C[3],C[4],C[5]);break;case l.OPS.constructPath:this.constructPath(C[0],C[1]);break;case l.OPS.endPath:this.endPath();break;case 92:this.group(A.items);break;default:(0,l.warn)(`Unimplemented operator ${m}`);break}}}setWordSpacing(y){this.current.wordSpacing=y}setCharSpacing(y){this.current.charSpacing=y}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(y,A,m,R,C,B){const V=this.current;V.textMatrix=V.lineMatrix=[y,A,m,R,C,B],V.textMatrixScale=Math.hypot(y,A),V.x=V.lineX=0,V.y=V.lineY=0,V.xcoords=[],V.ycoords=[],V.tspan=this.svgFactory.createElement("svg:tspan"),V.tspan.setAttributeNS(null,"font-family",V.fontFamily),V.tspan.setAttributeNS(null,"font-size",`${g(V.fontSize)}px`),V.tspan.setAttributeNS(null,"y",g(-V.y)),V.txtElement=this.svgFactory.createElement("svg:text"),V.txtElement.append(V.tspan)}beginText(){const y=this.current;y.x=y.lineX=0,y.y=y.lineY=0,y.textMatrix=l.IDENTITY_MATRIX,y.lineMatrix=l.IDENTITY_MATRIX,y.textMatrixScale=1,y.tspan=this.svgFactory.createElement("svg:tspan"),y.txtElement=this.svgFactory.createElement("svg:text"),y.txtgrp=this.svgFactory.createElement("svg:g"),y.xcoords=[],y.ycoords=[]}moveText(y,A){const m=this.current;m.x=m.lineX+=y,m.y=m.lineY+=A,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${g(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",g(-m.y))}showText(y){const A=this.current,m=A.font,R=A.fontSize;if(R===0)return;const C=A.fontSizeScale,B=A.charSpacing,V=A.wordSpacing,oe=A.fontDirection,_e=A.textHScale*oe,he=m.vertical,ue=he?1:-1,W=m.defaultVMetrics,ee=R*A.fontMatrix[0];let ne=0;for(const re of y){if(re===null){ne+=oe*V;continue}else if(typeof re=="number"){ne+=ue*re*R/1e3;continue}const Y=(re.isSpace?V:0)+B,x=re.fontChar;let w,q,K=re.width;if(he){let X;const b=re.vmetric||W;X=re.vmetric?b[1]:K*.5,X=-X*ee;const L=b[2]*ee;K=b?-b[0]:K,w=X/C,q=(ne+L)/C}else w=ne/C,q=0;(re.isInFont||m.missingFile)&&(A.xcoords.push(A.x+w),he&&A.ycoords.push(-A.y+q),A.tspan.textContent+=x);let te;he?te=K*ee-Y*oe:te=K*ee+Y*oe,ne+=te}A.tspan.setAttributeNS(null,"x",A.xcoords.map(g).join(" ")),he?A.tspan.setAttributeNS(null,"y",A.ycoords.map(g).join(" ")):A.tspan.setAttributeNS(null,"y",g(-A.y)),he?A.y-=ne:A.x+=ne*_e,A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${g(A.fontSize)}px`),A.fontStyle!==S.fontStyle&&A.tspan.setAttributeNS(null,"font-style",A.fontStyle),A.fontWeight!==S.fontWeight&&A.tspan.setAttributeNS(null,"font-weight",A.fontWeight);const ae=A.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;if(ae===l.TextRenderingMode.FILL||ae===l.TextRenderingMode.FILL_STROKE?(A.fillColor!==S.fillColor&&A.tspan.setAttributeNS(null,"fill",A.fillColor),A.fillAlpha<1&&A.tspan.setAttributeNS(null,"fill-opacity",A.fillAlpha)):A.textRenderingMode===l.TextRenderingMode.ADD_TO_PATH?A.tspan.setAttributeNS(null,"fill","transparent"):A.tspan.setAttributeNS(null,"fill","none"),ae===l.TextRenderingMode.STROKE||ae===l.TextRenderingMode.FILL_STROKE){const re=1/(A.textMatrixScale||1);this._setStrokeAttributes(A.tspan,re)}let G=A.textMatrix;A.textRise!==0&&(G=G.slice(),G[5]+=A.textRise),A.txtElement.setAttributeNS(null,"transform",`${T(G)} scale(${g(_e)}, -1)`),A.txtElement.setAttributeNS(_,"xml:space","preserve"),A.txtElement.append(A.tspan),A.txtgrp.append(A.txtElement),this._ensureTransformGroup().append(A.txtElement)}setLeadingMoveText(y,A){this.setLeading(-A),this.moveText(y,A)}addFontStyle(y){if(!y.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const A=O(y.data,y.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${y.loadedName}"; src: url(${A}); }
`}setFont(y){const A=this.current,m=this.commonObjs.get(y[0]);let R=y[1];A.font=m,this.embedFonts&&!m.missingFile&&!this.embeddedFonts[m.loadedName]&&(this.addFontStyle(m),this.embeddedFonts[m.loadedName]=m),A.fontMatrix=m.fontMatrix||l.FONT_IDENTITY_MATRIX;let C="normal";m.black?C="900":m.bold&&(C="bold");const B=m.italic?"italic":"normal";R<0?(R=-R,A.fontDirection=-1):A.fontDirection=1,A.fontSize=R,A.fontFamily=m.loadedName,A.fontWeight=C,A.fontStyle=B,A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"y",g(-A.y)),A.xcoords=[],A.ycoords=[]}endText(){var A;const y=this.current;y.textRenderingMode&l.TextRenderingMode.ADD_TO_PATH_FLAG&&((A=y.txtElement)!=null&&A.hasChildNodes())&&(y.element=y.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(y){y>0&&(this.current.lineWidth=y)}setLineCap(y){this.current.lineCap=v[y]}setLineJoin(y){this.current.lineJoin=P[y]}setMiterLimit(y){this.current.miterLimit=y}setStrokeAlpha(y){this.current.strokeAlpha=y}setStrokeRGBColor(y,A,m){this.current.strokeColor=l.Util.makeHexColor(y,A,m)}setFillAlpha(y){this.current.fillAlpha=y}setFillRGBColor(y,A,m){this.current.fillColor=l.Util.makeHexColor(y,A,m),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(y){this.current.strokeColor=this._makeColorN_Pattern(y)}setFillColorN(y){this.current.fillColor=this._makeColorN_Pattern(y)}shadingFill(y){const A=this.viewport.width,m=this.viewport.height,R=l.Util.inverseTransform(this.transformMatrix),C=l.Util.applyTransform([0,0],R),B=l.Util.applyTransform([0,m],R),V=l.Util.applyTransform([A,0],R),oe=l.Util.applyTransform([A,m],R),_e=Math.min(C[0],B[0],V[0],oe[0]),he=Math.min(C[1],B[1],V[1],oe[1]),ue=Math.max(C[0],B[0],V[0],oe[0]),W=Math.max(C[1],B[1],V[1],oe[1]),ee=this.svgFactory.createElement("svg:rect");ee.setAttributeNS(null,"x",_e),ee.setAttributeNS(null,"y",he),ee.setAttributeNS(null,"width",ue-_e),ee.setAttributeNS(null,"height",W-he),ee.setAttributeNS(null,"fill",this._makeShadingPattern(y)),this.current.fillAlpha<1&&ee.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ee)}_makeColorN_Pattern(y){return y[0]==="TilingPattern"?this._makeTilingPattern(y):this._makeShadingPattern(y)}_makeTilingPattern(y){const A=y[1],m=y[2],R=y[3]||l.IDENTITY_MATRIX,[C,B,V,oe]=y[4],_e=y[5],he=y[6],ue=y[7],W=`shading${M++}`,[ee,ne,ae,G]=l.Util.normalizeRect([...l.Util.applyTransform([C,B],R),...l.Util.applyTransform([V,oe],R)]),[re,Y]=l.Util.singularValueDecompose2dScale(R),x=_e*re,w=he*Y,q=this.svgFactory.createElement("svg:pattern");q.setAttributeNS(null,"id",W),q.setAttributeNS(null,"patternUnits","userSpaceOnUse"),q.setAttributeNS(null,"width",x),q.setAttributeNS(null,"height",w),q.setAttributeNS(null,"x",`${ee}`),q.setAttributeNS(null,"y",`${ne}`);const K=this.svg,te=this.transformMatrix,X=this.current.fillColor,b=this.current.strokeColor,L=this.svgFactory.create(ae-ee,G-ne);if(this.svg=L,this.transformMatrix=R,ue===2){const j=l.Util.makeHexColor(...A);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(m)),this.svg=K,this.transformMatrix=te,this.current.fillColor=X,this.current.strokeColor=b,q.append(L.childNodes[0]),this.defs.append(q),`url(#${W})`}_makeShadingPattern(y){switch(typeof y=="string"&&(y=this.objs.get(y)),y[0]){case"RadialAxial":const A=`shading${M++}`,m=y[3];let R;switch(y[1]){case"axial":const C=y[4],B=y[5];R=this.svgFactory.createElement("svg:linearGradient"),R.setAttributeNS(null,"id",A),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"x1",C[0]),R.setAttributeNS(null,"y1",C[1]),R.setAttributeNS(null,"x2",B[0]),R.setAttributeNS(null,"y2",B[1]);break;case"radial":const V=y[4],oe=y[5],_e=y[6],he=y[7];R=this.svgFactory.createElement("svg:radialGradient"),R.setAttributeNS(null,"id",A),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"cx",oe[0]),R.setAttributeNS(null,"cy",oe[1]),R.setAttributeNS(null,"r",he),R.setAttributeNS(null,"fx",V[0]),R.setAttributeNS(null,"fy",V[1]),R.setAttributeNS(null,"fr",_e);break;default:throw new Error(`Unknown RadialAxial type: ${y[1]}`)}for(const C of m){const B=this.svgFactory.createElement("svg:stop");B.setAttributeNS(null,"offset",C[0]),B.setAttributeNS(null,"stop-color",C[1]),R.append(B)}return this.defs.append(R),`url(#${A})`;case"Mesh":return(0,l.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${y[0]}`)}}setDash(y,A){this.current.dashArray=y,this.current.dashPhase=A}constructPath(y,A){const m=this.current;let R=m.x,C=m.y,B=[],V=0;for(const oe of y)switch(oe|0){case l.OPS.rectangle:R=A[V++],C=A[V++];const _e=A[V++],he=A[V++],ue=R+_e,W=C+he;B.push("M",g(R),g(C),"L",g(ue),g(C),"L",g(ue),g(W),"L",g(R),g(W),"Z");break;case l.OPS.moveTo:R=A[V++],C=A[V++],B.push("M",g(R),g(C));break;case l.OPS.lineTo:R=A[V++],C=A[V++],B.push("L",g(R),g(C));break;case l.OPS.curveTo:R=A[V+4],C=A[V+5],B.push("C",g(A[V]),g(A[V+1]),g(A[V+2]),g(A[V+3]),g(R),g(C)),V+=6;break;case l.OPS.curveTo2:B.push("C",g(R),g(C),g(A[V]),g(A[V+1]),g(A[V+2]),g(A[V+3])),R=A[V+2],C=A[V+3],V+=4;break;case l.OPS.curveTo3:R=A[V+2],C=A[V+3],B.push("C",g(A[V]),g(A[V+1]),g(R),g(C),g(R),g(C)),V+=4;break;case l.OPS.closePath:B.push("Z");break}B=B.join(" "),m.path&&y.length>0&&y[0]!==l.OPS.rectangle&&y[0]!==l.OPS.moveTo?B=m.path.getAttributeNS(null,"d")+B:(m.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(m.path)),m.path.setAttributeNS(null,"d",B),m.path.setAttributeNS(null,"fill","none"),m.element=m.path,m.setCurrentPoint(R,C)}endPath(){const y=this.current;if(y.path=null,!this.pendingClip)return;if(!y.element){this.pendingClip=null;return}const A=`clippath${U++}`,m=this.svgFactory.createElement("svg:clipPath");m.setAttributeNS(null,"id",A),m.setAttributeNS(null,"transform",T(this.transformMatrix));const R=y.element.cloneNode(!0);if(this.pendingClip==="evenodd"?R.setAttributeNS(null,"clip-rule","evenodd"):R.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,m.append(R),this.defs.append(m),y.activeClipUrl){y.clipGroup=null;for(const C of this.extraStack)C.clipGroup=null;m.setAttributeNS(null,"clip-path",y.activeClipUrl)}y.activeClipUrl=`url(#${A})`,this.tgrp=null}clip(y){this.pendingClip=y}closePath(){const y=this.current;if(y.path){const A=`${y.path.getAttributeNS(null,"d")}Z`;y.path.setAttributeNS(null,"d",A)}}setLeading(y){this.current.leading=-y}setTextRise(y){this.current.textRise=y}setTextRenderingMode(y){this.current.textRenderingMode=y}setHScale(y){this.current.textHScale=y/100}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(const[A,m]of y)switch(A){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m);break;case"CA":this.setStrokeAlpha(m);break;case"ca":this.setFillAlpha(m);break;default:(0,l.warn)(`Unimplemented graphic state operator ${A}`);break}}fill(){const y=this.current;y.element&&(y.element.setAttributeNS(null,"fill",y.fillColor),y.element.setAttributeNS(null,"fill-opacity",y.fillAlpha),this.endPath())}stroke(){const y=this.current;y.element&&(this._setStrokeAttributes(y.element),y.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(y,A=1){const m=this.current;let R=m.dashArray;A!==1&&R.length>0&&(R=R.map(function(C){return A*C})),y.setAttributeNS(null,"stroke",m.strokeColor),y.setAttributeNS(null,"stroke-opacity",m.strokeAlpha),y.setAttributeNS(null,"stroke-miterlimit",g(m.miterLimit)),y.setAttributeNS(null,"stroke-linecap",m.lineCap),y.setAttributeNS(null,"stroke-linejoin",m.lineJoin),y.setAttributeNS(null,"stroke-width",g(A*m.lineWidth)+"px"),y.setAttributeNS(null,"stroke-dasharray",R.map(g).join(" ")),y.setAttributeNS(null,"stroke-dashoffset",g(A*m.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x","0"),y.setAttributeNS(null,"y","0"),y.setAttributeNS(null,"width","1px"),y.setAttributeNS(null,"height","1px"),y.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(y)}paintImageXObject(y){const A=y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y);if(!A){(0,l.warn)(`Dependent image with object ID ${y} is not ready yet`);return}this.paintInlineImageXObject(A)}paintInlineImageXObject(y,A){const m=y.width,R=y.height,C=k(y,this.forceDataSchema,!!A),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",g(m)),B.setAttributeNS(null,"height",g(R)),this.current.element=B,this.clip("nonzero");const V=this.svgFactory.createElement("svg:image");V.setAttributeNS(d,"xlink:href",C),V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y",g(-R)),V.setAttributeNS(null,"width",g(m)+"px"),V.setAttributeNS(null,"height",g(R)+"px"),V.setAttributeNS(null,"transform",`scale(${g(1/m)} ${g(-1/R)})`),A?A.append(V):this._ensureTransformGroup().append(V)}paintImageMaskXObject(y){const A=this.current,m=y.width,R=y.height,C=A.fillColor;A.maskId=`mask${N++}`;const B=this.svgFactory.createElement("svg:mask");B.setAttributeNS(null,"id",A.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",g(m)),V.setAttributeNS(null,"height",g(R)),V.setAttributeNS(null,"fill",C),V.setAttributeNS(null,"mask",`url(#${A.maskId})`),this.defs.append(B),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(y,B)}paintFormXObjectBegin(y,A){if(Array.isArray(y)&&y.length===6&&this.transform(y[0],y[1],y[2],y[3],y[4],y[5]),A){const m=A[2]-A[0],R=A[3]-A[1],C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x",A[0]),C.setAttributeNS(null,"y",A[1]),C.setAttributeNS(null,"width",g(m)),C.setAttributeNS(null,"height",g(R)),this.current.element=C,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(y){const A=this.svgFactory.create(y.width,y.height),m=this.svgFactory.createElement("svg:defs");A.append(m),this.defs=m;const R=this.svgFactory.createElement("svg:g");return R.setAttributeNS(null,"transform",T(y.transform)),A.append(R),this.svg=R,A}_ensureClipGroup(){if(!this.current.clipGroup){const y=this.svgFactory.createElement("svg:g");y.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(y),this.current.clipGroup=y}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var a=r(1),l=r(33);const c=require$$5,p=require$$5,S=require$$5,_=require$$5,d=/^file:\/\/\/[a-zA-Z]:\//;function v(N){const M=_.parse(N);return M.protocol==="file:"||M.host?M:/^[a-z]:[/\\]/i.test(N)?_.parse(`file:///${N}`):(M.host||(M.protocol="file:"),M)}class P{constructor(M){this.source=M,this.url=v(M.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var M;return((M=this._fullRequestReader)==null?void 0:M._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new f(this),this._fullRequestReader}getRangeReader(M,y){if(y<=this._progressiveDataLength)return null;const A=this.isFsUrl?new U(this,M,y):new g(this,M,y);return this._rangeRequestReaders.push(A),A}cancelAllRequests(M){this._fullRequestReader&&this._fullRequestReader.cancel(M);for(const y of this._rangeRequestReaders.slice(0))y.cancel(M)}}i.PDFNodeStream=P;class O{constructor(M){this._url=M.url,this._done=!1,this._storedError=null,this.onProgress=null;const y=M.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)(),this._headersCapability=(0,a.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const M=this._readableStream.read();return M===null?(this._readCapability=(0,a.createPromiseCapability)(),this.read()):(this._loaded+=M.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){if(!this._readableStream){this._error(M);return}this._readableStream.destroy(M)}_error(M){this._storedError=M,this._readCapability.resolve()}_setReadableStream(M){this._readableStream=M,M.on("readable",()=>{this._readCapability.resolve()}),M.on("end",()=>{M.destroy(),this._done=!0,this._readCapability.resolve()}),M.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class k{constructor(M){this._url=M.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,a.createPromiseCapability)();const y=M.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const M=this._readableStream.read();return M===null?(this._readCapability=(0,a.createPromiseCapability)(),this.read()):(this._loaded+=M.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){if(!this._readableStream){this._error(M);return}this._readableStream.destroy(M)}_error(M){this._storedError=M,this._readCapability.resolve()}_setReadableStream(M){this._readableStream=M,M.on("readable",()=>{this._readCapability.resolve()}),M.on("end",()=>{M.destroy(),this._done=!0,this._readCapability.resolve()}),M.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function E(N,M){return{protocol:N.protocol,auth:N.auth,host:N.hostname,port:N.port,path:N.path,method:"GET",headers:M}}class f extends O{constructor(M){super(M);const y=A=>{if(A.statusCode===404){const B=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=B,this._headersCapability.reject(B);return}this._headersCapability.resolve(),this._setReadableStream(A);const m=B=>this._readableStream.headers[B.toLowerCase()],{allowRangeRequests:R,suggestedLength:C}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:M.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=C||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(m)};this._request=null,this._url.protocol==="http:"?this._request=p.request(E(this._url,M.httpHeaders),y):this._request=S.request(E(this._url,M.httpHeaders),y),this._request.on("error",A=>{this._storedError=A,this._headersCapability.reject(A)}),this._request.end()}}class g extends k{constructor(M,y,A){super(M),this._httpHeaders={};for(const R in M.httpHeaders){const C=M.httpHeaders[R];typeof C>"u"||(this._httpHeaders[R]=C)}this._httpHeaders.Range=`bytes=${y}-${A-1}`;const m=R=>{if(R.statusCode===404){const C=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C;return}this._setReadableStream(R)};this._request=null,this._url.protocol==="http:"?this._request=p.request(E(this._url,this._httpHeaders),m):this._request=S.request(E(this._url,this._httpHeaders),m),this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class T extends O{constructor(M){super(M);let y=decodeURIComponent(this._url.path);d.test(this._url.href)&&(y=y.replace(/^\//,"")),c.lstat(y,(A,m)=>{if(A){A.code==="ENOENT"&&(A=new a.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=A,this._headersCapability.reject(A);return}this._contentLength=m.size,this._setReadableStream(c.createReadStream(y)),this._headersCapability.resolve()})}}class U extends k{constructor(M,y,A){super(M);let m=decodeURIComponent(this._url.path);d.test(this._url.href)&&(m=m.replace(/^\//,"")),this._setReadableStream(c.createReadStream(m,{start:y,end:A-1}))}}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=_,i.extractFilenameFromHeader=S,i.validateRangeRequestCapabilities=p,i.validateResponseStatus=d;var a=r(1),l=r(34),c=r(8);function p({getResponseHeader:v,isHttp:P,rangeChunkSize:O,disableRange:k}){const E={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(v("Content-Length"),10);return!Number.isInteger(f)||(E.suggestedLength=f,f<=2*O)||k||!P||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function S(v){const P=v("Content-Disposition");if(P){let O=(0,l.getFilenameFromContentDispositionHeader)(P);if(O.includes("%"))try{O=decodeURIComponent(O)}catch{}if((0,c.isPdfFile)(O))return O}return null}function _(v,P){return v===404||v===0&&P.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+P+'".'):new a.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${P}".`,v)}function d(v){return v===200||v===206}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=l;var a=r(1);function l(c){let p=!0,S=_("filename\\*","i").exec(c);if(S){S=S[1];let f=O(S);return f=unescape(f),f=k(f),f=E(f),v(f)}if(S=P(c),S){const f=E(S);return v(f)}if(S=_("filename","i").exec(c),S){S=S[1];let f=O(S);return f=E(f),v(f)}function _(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function d(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const T=new TextDecoder(f,{fatal:!0}),U=(0,a.stringToBytes)(g);g=T.decode(U),p=!1}catch{}}return g}function v(f){return p&&/[\x80-\xff]/.test(f)&&(f=d("utf-8",f),p&&(f=d("iso-8859-1",f))),f}function P(f){const g=[];let T;const U=_("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=U.exec(f))!==null;){let[,M,y,A]=T;if(M=parseInt(M,10),M in g){if(M===0)break;continue}g[M]=[y,A]}const N=[];for(let M=0;M<g.length&&M in g;++M){let[y,A]=g[M];A=O(A),y&&(A=unescape(A),M===0&&(A=k(A))),N.push(A)}return N.join("")}function O(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let T=0;T<g.length;++T){const U=g[T].indexOf('"');U!==-1&&(g[T]=g[T].slice(0,U),g.length=T+1),g[T]=g[T].replace(/\\(.)/g,"$1")}f=g.join('"')}return f}function k(f){const g=f.indexOf("'");if(g===-1)return f;const T=f.slice(0,g),N=f.slice(g+1).replace(/^[^']*'/,"");return d(T,N)}function E(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,T,U,N){if(U==="q"||U==="Q")return N=N.replace(/_/g," "),N=N.replace(/=([0-9a-fA-F]{2})/g,function(M,y){return String.fromCharCode(parseInt(y,16))}),d(T,N);try{N=atob(N)}catch{}return d(T,N)})}return""}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var a=r(1),l=r(33);const c=200,p=206;function S(O){const k=O.response;return typeof k!="string"?k:(0,a.stringToBytes)(k).buffer}class _{constructor(k,E={}){this.url=k,this.isHttp=/^https?:/i.test(k),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.getXhr=E.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(k,E,f){const g={begin:k,end:E};for(const T in f)g[T]=f[T];return this.request(g)}requestFull(k){return this.request(k)}request(k){const E=this.getXhr(),f=this.currXhrId++,g=this.pendingRequests[f]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const U=this.httpHeaders[T];typeof U>"u"||E.setRequestHeader(T,U)}return this.isHttp&&"begin"in k&&"end"in k?(E.setRequestHeader("Range",`bytes=${k.begin}-${k.end-1}`),g.expectedStatus=p):g.expectedStatus=c,E.responseType="arraybuffer",k.onError&&(E.onerror=function(T){k.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,f),E.onprogress=this.onProgress.bind(this,f),g.onHeadersReceived=k.onHeadersReceived,g.onDone=k.onDone,g.onError=k.onError,g.onProgress=k.onProgress,E.send(null),f}onProgress(k,E){var g;const f=this.pendingRequests[k];f&&((g=f.onProgress)==null||g.call(f,E))}onStateChange(k,E){var M,y,A;const f=this.pendingRequests[k];if(!f)return;const g=f.xhr;if(g.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),g.readyState!==4||!(k in this.pendingRequests))return;if(delete this.pendingRequests[k],g.status===0&&this.isHttp){(M=f.onError)==null||M.call(f,g.status);return}const T=g.status||c;if(!(T===c&&f.expectedStatus===p)&&T!==f.expectedStatus){(y=f.onError)==null||y.call(f,g.status);return}const N=S(g);if(T===p){const m=g.getResponseHeader("Content-Range"),R=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);f.onDone({begin:parseInt(R[1],10),chunk:N})}else N?f.onDone({begin:0,chunk:N}):(A=f.onError)==null||A.call(f,g.status)}getRequestXhr(k){return this.pendingRequests[k].xhr}isPendingRequest(k){return k in this.pendingRequests}abortRequest(k){const E=this.pendingRequests[k].xhr;delete this.pendingRequests[k],E.abort()}}class d{constructor(k){this._source=k,this._manager=new _(k.url,{httpHeaders:k.httpHeaders,withCredentials:k.withCredentials}),this._rangeChunkSize=k.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(k){const E=this._rangeRequestReaders.indexOf(k);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(k,E){const f=new P(this._manager,k,E);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(k){var E;(E=this._fullRequestReader)==null||E.cancel(k);for(const f of this._rangeRequestReaders.slice(0))f.cancel(k)}}i.PDFNetworkStream=d;class v{constructor(k,E){this._manager=k;const f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=k.requestFull(f),this._headersReceivedCapability=(0,a.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const k=this._fullRequestId,E=this._manager.getRequestXhr(k),f=U=>E.getResponseHeader(U),{allowRangeRequests:g,suggestedLength:T}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});g&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(k),this._headersReceivedCapability.resolve()}_onDone(k){if(k&&(this._requests.length>0?this._requests.shift().resolve({value:k.chunk,done:!1}):this._cachedChunks.push(k.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(k){this._storedError=(0,l.createResponseStatusError)(k,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(k){var E;(E=this.onProgress)==null||E.call(this,{loaded:k.loaded,total:k.lengthComputable?k.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=(0,a.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0,this._headersReceivedCapability.reject(k);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class P{constructor(k,E,f){this._manager=k;const g={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._requestId=k.requestRange(E,f,g),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var k;(k=this.onClosed)==null||k.call(this,this)}_onDone(k){const E=k.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(k){this._storedError=(0,l.createResponseStatusError)(k,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(k){var E;this.isStreamingSupported||(E=this.onProgress)==null||E.call(this,{loaded:k.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const k=(0,a.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(o,i,r)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var a=r(1),l=r(33);function c(v,P,O){return{method:"GET",headers:v,signal:O.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function p(v){const P=new Headers;for(const O in v){const k=v[O];typeof k>"u"||P.append(O,k)}return P}class S{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _(this),this._fullRequestReader}getRangeReader(P,O){if(O<=this._progressiveDataLength)return null;const k=new d(this,P,O);return this._rangeRequestReaders.push(k),k}cancelAllRequests(P){this._fullRequestReader&&this._fullRequestReader.cancel(P);for(const O of this._rangeRequestReaders.slice(0))O.cancel(P)}}i.PDFFetchStream=S;class _{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const O=P.source;this._withCredentials=O.withCredentials||!1,this._contentLength=O.length,this._headersCapability=(0,a.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._headers=p(this._stream.httpHeaders);const k=O.url;fetch(k,c(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,l.validateResponseStatus)(E.status))throw(0,l.createResponseStatusError)(E.status,k);this._reader=E.body.getReader(),this._headersCapability.resolve();const f=U=>E.headers.get(U),{allowRangeRequests:g,suggestedLength:T}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=T||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:P,done:O}=await this._reader.read();return O?{value:P,done:O}:(this._loaded+=P.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){this._reader&&this._reader.cancel(P),this._abortController.abort()}}class d{constructor(P,O,k){this._stream=P,this._reader=null,this._loaded=0;const E=P.source;this._withCredentials=E.withCredentials||!1,this._readCapability=(0,a.createPromiseCapability)(),this._isStreamingSupported=!E.disableStream,this._abortController=new AbortController,this._headers=p(this._stream.httpHeaders),this._headers.append("Range",`bytes=${O}-${k-1}`);const f=E.url;fetch(f,c(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,l.validateResponseStatus)(g.status))throw(0,l.createResponseStatusError)(g.status,f);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:P,done:O}=await this._reader.read();return O?{value:P,done:O}:(this._loaded+=P.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(P).buffer,done:!1})}cancel(P){this._reader&&this._reader.cancel(P),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(o){var i=__webpack_module_cache__[o];if(i!==void 0)return i.exports;var r=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var o=__webpack_exports__;Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"AnnotationEditorLayer",{enumerable:!0,get:function(){return l.AnnotationEditorLayer}}),Object.defineProperty(o,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(o,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(o,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return c.AnnotationEditorUIManager}}),Object.defineProperty(o,"AnnotationLayer",{enumerable:!0,get:function(){return p.AnnotationLayer}}),Object.defineProperty(o,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(o,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(o,"GlobalWorkerOptions",{enumerable:!0,get:function(){return S.GlobalWorkerOptions}}),Object.defineProperty(o,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(o,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(o,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(o,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(o,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(o,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(o,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(o,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(o,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(o,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(o,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(o,"SVGGraphics",{enumerable:!0,get:function(){return v.SVGGraphics}}),Object.defineProperty(o,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(o,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(o,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(o,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(o,"XfaLayer",{enumerable:!0,get:function(){return P.XfaLayer}}),Object.defineProperty(o,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(o,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(o,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(o,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(o,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(o,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(o,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(o,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(o,"renderTextLayer",{enumerable:!0,get:function(){return d.renderTextLayer}}),Object.defineProperty(o,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return r.version}});var i=__w_pdfjs_require__(1),r=__w_pdfjs_require__(4),a=__w_pdfjs_require__(8),l=__w_pdfjs_require__(22),c=__w_pdfjs_require__(7),p=__w_pdfjs_require__(27),S=__w_pdfjs_require__(15),_=__w_pdfjs_require__(3),d=__w_pdfjs_require__(30),v=__w_pdfjs_require__(31),P=__w_pdfjs_require__(29);if(_.isNodeJS){const{PDFNodeStream:O}=__w_pdfjs_require__(32);(0,r.setPDFNetworkStreamFactory)(k=>new O(k))}else{const{PDFNetworkStream:O}=__w_pdfjs_require__(35),{PDFFetchStream:k}=__w_pdfjs_require__(36);(0,r.setPDFNetworkStreamFactory)(E=>(0,a.isValidFetchUrl)(E.url)?new k(E):new O(E))}})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf(),papaparse_min$1={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var papaparse_min=papaparse_min$1.exports,hasRequiredPapaparse_min;function requirePapaparse_min(){return hasRequiredPapaparse_min||(hasRequiredPapaparse_min=1,function(o,i){((r,a)=>{o.exports=a()})(papaparse_min,function r(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},l,c=!a.document&&!!a.postMessage,p=a.IS_PAPA_WORKER||!1,S={},_=0,d={};function v(R){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(C){var B=y(C);B.chunkSize=parseInt(B.chunkSize),C.step||C.chunk||(B.chunkSize=null),this._handle=new f(B),(this._handle.streamer=this)._config=B}).call(this,R),this.parseChunk=function(C,B){var V=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<V){let _e=this._config.newline;_e||(oe=this._config.quoteChar||'"',_e=this._handle.guessLineEndings(C,oe)),C=[...C.split(_e).slice(V)].join(_e)}this.isFirstChunk&&m(this._config.beforeFirstChunk)&&(oe=this._config.beforeFirstChunk(C))!==void 0&&(C=oe),this.isFirstChunk=!1,this._halted=!1;var V=this._partialLine+C,oe=(this._partialLine="",this._handle.parse(V,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=oe.meta.cursor,V=(this._finished||(this._partialLine=V.substring(C-this._baseIndex),this._baseIndex=C),oe&&oe.data&&(this._rowCount+=oe.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),p)a.postMessage({results:oe,workerId:d.WORKER_ID,finished:V});else if(m(this._config.chunk)&&!B){if(this._config.chunk(oe,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=oe=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(oe.data),this._completeResults.errors=this._completeResults.errors.concat(oe.errors),this._completeResults.meta=oe.meta),this._completed||!V||!m(this._config.complete)||oe&&oe.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),V||oe&&oe.meta.paused||this._nextChunk(),oe}this._halted=!0},this._sendError=function(C){m(this._config.error)?this._config.error(C):p&&this._config.error&&a.postMessage({workerId:d.WORKER_ID,error:C,finished:!1})}}function P(R){var C;(R=R||{}).chunkSize||(R.chunkSize=d.RemoteChunkSize),v.call(this,R),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(B){this._input=B,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),c||(C.onload=A(this._chunkLoaded,this),C.onerror=A(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var B,V=this._config.downloadRequestHeaders;for(B in V)C.setRequestHeader(B,V[B])}var oe;this._config.chunkSize&&(oe=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+oe));try{C.send(this._config.downloadRequestBody)}catch(_e){this._chunkError(_e.message)}c&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(B=>(B=B.getResponseHeader("Content-Range"))!==null?parseInt(B.substring(B.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(B){B=C.statusText||B,this._sendError(new Error(B))}}function O(R){(R=R||{}).chunkSize||(R.chunkSize=d.LocalChunkSize),v.call(this,R);var C,B,V=typeof FileReader<"u";this.stream=function(oe){this._input=oe,B=oe.slice||oe.webkitSlice||oe.mozSlice,V?((C=new FileReader).onload=A(this._chunkLoaded,this),C.onerror=A(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var oe=this._input,_e=(this._config.chunkSize&&(_e=Math.min(this._start+this._config.chunkSize,this._input.size),oe=B.call(oe,this._start,_e)),C.readAsText(oe,this._config.encoding));V||this._chunkLoaded({target:{result:_e}})},this._chunkLoaded=function(oe){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(oe.target.result)},this._chunkError=function(){this._sendError(C.error)}}function k(R){var C;v.call(this,R=R||{}),this.stream=function(B){return C=B,this._nextChunk()},this._nextChunk=function(){var B,V;if(!this._finished)return B=this._config.chunkSize,C=B?(V=C.substring(0,B),C.substring(B)):(V=C,""),this._finished=!C,this.parseChunk(V)}}function E(R){v.call(this,R=R||{});var C=[],B=!0,V=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(oe){this._input=oe,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){V&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):B=!0},this._streamData=A(function(oe){try{C.push(typeof oe=="string"?oe:oe.toString(this._config.encoding)),B&&(B=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(_e){this._streamError(_e)}},this),this._streamError=A(function(oe){this._streamCleanUp(),this._sendError(oe)},this),this._streamEnd=A(function(){this._streamCleanUp(),V=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(R){var C,B,V,oe,_e=Math.pow(2,53),he=-_e,ue=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,W=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ee=this,ne=0,ae=0,G=!1,re=!1,Y=[],x={data:[],errors:[],meta:{}};function w(X){return R.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function q(){if(x&&V&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),V=!1),R.skipEmptyLines&&(x.data=x.data.filter(function(j){return!w(j)})),K()){let j=function(I,H){m(R.transformHeader)&&(I=R.transformHeader(I,H)),Y.push(I)};if(x)if(Array.isArray(x.data[0])){for(var X=0;K()&&X<x.data.length;X++)x.data[X].forEach(j);x.data.splice(0,1)}else x.data.forEach(j)}function b(j,I){for(var H=R.header?{}:[],J=0;J<j.length;J++){var $=J,F=j[J],F=((Z,ce)=>(ie=>(R.dynamicTypingFunction&&R.dynamicTyping[ie]===void 0&&(R.dynamicTyping[ie]=R.dynamicTypingFunction(ie)),(R.dynamicTyping[ie]||R.dynamicTyping)===!0))(Z)?ce==="true"||ce==="TRUE"||ce!=="false"&&ce!=="FALSE"&&((ie=>{if(ue.test(ie)&&(ie=parseFloat(ie),he<ie&&ie<_e))return 1})(ce)?parseFloat(ce):W.test(ce)?new Date(ce):ce===""?null:ce):ce)($=R.header?J>=Y.length?"__parsed_extra":Y[J]:$,F=R.transform?R.transform(F,$):F);$==="__parsed_extra"?(H[$]=H[$]||[],H[$].push(F)):H[$]=F}return R.header&&(J>Y.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+Y.length+" fields but parsed "+J,ae+I):J<Y.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+Y.length+" fields but parsed "+J,ae+I)),H}var L;x&&(R.header||R.dynamicTyping||R.transform)&&(L=1,!x.data.length||Array.isArray(x.data[0])?(x.data=x.data.map(b),L=x.data.length):x.data=b(x.data,0),R.header&&x.meta&&(x.meta.fields=Y),ae+=L)}function K(){return R.header&&Y.length===0}function te(X,b,L,j){X={type:X,code:b,message:L},j!==void 0&&(X.row=j),x.errors.push(X)}m(R.step)&&(oe=R.step,R.step=function(X){x=X,K()?q():(q(),x.data.length!==0&&(ne+=X.data.length,R.preview&&ne>R.preview?B.abort():(x.data=x.data[0],oe(x,ee))))}),this.parse=function(X,b,L){var j=R.quoteChar||'"',j=(R.newline||(R.newline=this.guessLineEndings(X,j)),V=!1,R.delimiter?m(R.delimiter)&&(R.delimiter=R.delimiter(X),x.meta.delimiter=R.delimiter):((j=((I,H,J,$,F)=>{var Z,ce,ie,fe;F=F||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var be=0;be<F.length;be++){for(var Ae,Oe=F[be],ye=0,Ie=0,Le=0,De=(ie=void 0,new T({comments:$,delimiter:Oe,newline:H,preview:10}).parse(I)),je=0;je<De.data.length;je++)J&&w(De.data[je])?Le++:(Ae=De.data[je].length,Ie+=Ae,ie===void 0?ie=Ae:0<Ae&&(ye+=Math.abs(Ae-ie),ie=Ae));0<De.data.length&&(Ie/=De.data.length-Le),(ce===void 0||ye<=ce)&&(fe===void 0||fe<Ie)&&1.99<Ie&&(ce=ye,Z=Oe,fe=Ie)}return{successful:!!(R.delimiter=Z),bestDelimiter:Z}})(X,R.newline,R.skipEmptyLines,R.comments,R.delimitersToGuess)).successful?R.delimiter=j.bestDelimiter:(V=!0,R.delimiter=d.DefaultDelimiter),x.meta.delimiter=R.delimiter),y(R));return R.preview&&R.header&&j.preview++,C=X,B=new T(j),x=B.parse(C,b,L),q(),G?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,B.abort(),C=m(R.chunk)?"":C.substring(B.getCharIndex())},this.resume=function(){ee.streamer._halted?(G=!1,ee.streamer.parseChunk(C,!0)):setTimeout(ee.resume,3)},this.aborted=function(){return re},this.abort=function(){re=!0,B.abort(),x.meta.aborted=!0,m(R.complete)&&R.complete(x),C=""},this.guessLineEndings=function(I,j){I=I.substring(0,1048576);var j=new RegExp(g(j)+"([^]*?)"+g(j),"gm"),L=(I=I.replace(j,"")).split("\r"),j=I.split(`
`),I=1<j.length&&j[0].length<L[0].length;if(L.length===1||I)return`
`;for(var H=0,J=0;J<L.length;J++)L[J][0]===`
`&&H++;return H>=L.length/2?`\r
`:"\r"}}function g(R){return R.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(R){var C=(R=R||{}).delimiter,B=R.newline,V=R.comments,oe=R.step,_e=R.preview,he=R.fastMode,ue=null,W=!1,ee=R.quoteChar==null?'"':R.quoteChar,ne=ee;if(R.escapeChar!==void 0&&(ne=R.escapeChar),(typeof C!="string"||-1<d.BAD_DELIMITERS.indexOf(C))&&(C=","),V===C)throw new Error("Comment character same as delimiter");V===!0?V="#":(typeof V!="string"||-1<d.BAD_DELIMITERS.indexOf(V))&&(V=!1),B!==`
`&&B!=="\r"&&B!==`\r
`&&(B=`
`);var ae=0,G=!1;this.parse=function(re,Y,x){if(typeof re!="string")throw new Error("Input must be a string");var w=re.length,q=C.length,K=B.length,te=V.length,X=m(oe),b=[],L=[],j=[],I=ae=0;if(!re)return ye();if(he||he!==!1&&re.indexOf(ee)===-1){for(var H=re.split(B),J=0;J<H.length;J++){if(j=H[J],ae+=j.length,J!==H.length-1)ae+=B.length;else if(x)return ye();if(!V||j.substring(0,te)!==V){if(X){if(b=[],fe(j.split(C)),Ie(),G)return ye()}else fe(j.split(C));if(_e&&_e<=J)return b=b.slice(0,_e),ye(!0)}}return ye()}for(var $=re.indexOf(C,ae),F=re.indexOf(B,ae),Z=new RegExp(g(ne)+g(ee),"g"),ce=re.indexOf(ee,ae);;)if(re[ae]===ee)for(ce=ae,ae++;;){if((ce=re.indexOf(ee,ce+1))===-1)return x||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:ae}),Ae();if(ce===w-1)return Ae(re.substring(ae,ce).replace(Z,ee));if(ee===ne&&re[ce+1]===ne)ce++;else if(ee===ne||ce===0||re[ce-1]!==ne){$!==-1&&$<ce+1&&($=re.indexOf(C,ce+1));var ie=be((F=F!==-1&&F<ce+1?re.indexOf(B,ce+1):F)===-1?$:Math.min($,F));if(re.substr(ce+1+ie,q)===C){j.push(re.substring(ae,ce).replace(Z,ee)),re[ae=ce+1+ie+q]!==ee&&(ce=re.indexOf(ee,ae)),$=re.indexOf(C,ae),F=re.indexOf(B,ae);break}if(ie=be(F),re.substring(ce+1+ie,ce+1+ie+K)===B){if(j.push(re.substring(ae,ce).replace(Z,ee)),Oe(ce+1+ie+K),$=re.indexOf(C,ae),ce=re.indexOf(ee,ae),X&&(Ie(),G))return ye();if(_e&&b.length>=_e)return ye(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:b.length,index:ae}),ce++}}else if(V&&j.length===0&&re.substring(ae,ae+te)===V){if(F===-1)return ye();ae=F+K,F=re.indexOf(B,ae),$=re.indexOf(C,ae)}else if($!==-1&&($<F||F===-1))j.push(re.substring(ae,$)),ae=$+q,$=re.indexOf(C,ae);else{if(F===-1)break;if(j.push(re.substring(ae,F)),Oe(F+K),X&&(Ie(),G))return ye();if(_e&&b.length>=_e)return ye(!0)}return Ae();function fe(Le){b.push(Le),I=ae}function be(Le){var De=0;return De=Le!==-1&&(Le=re.substring(ce+1,Le))&&Le.trim()===""?Le.length:De}function Ae(Le){return x||(Le===void 0&&(Le=re.substring(ae)),j.push(Le),ae=w,fe(j),X&&Ie()),ye()}function Oe(Le){ae=Le,fe(j),j=[],F=re.indexOf(B,ae)}function ye(Le){if(R.header&&!Y&&b.length&&!W){var De=b[0],je={},Ze=new Set(De);let st=!1;for(let Ke=0;Ke<De.length;Ke++){let Xe=De[Ke];if(je[Xe=m(R.transformHeader)?R.transformHeader(Xe,Ke):Xe]){let Ve,ze=je[Xe];for(;Ve=Xe+"_"+ze,ze++,Ze.has(Ve););Ze.add(Ve),De[Ke]=Ve,je[Xe]++,st=!0,(ue=ue===null?{}:ue)[Ve]=Xe}else je[Xe]=1,De[Ke]=Xe;Ze.add(Xe)}st&&console.warn("Duplicate headers found and renamed."),W=!0}return{data:b,errors:L,meta:{delimiter:C,linebreak:B,aborted:G,truncated:!!Le,cursor:I+(Y||0),renamedHeaders:ue}}}function Ie(){oe(ye()),b=[],L=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return ae}}function U(R){var C=R.data,B=S[C.workerId],V=!1;if(C.error)B.userError(C.error,C.file);else if(C.results&&C.results.data){var oe={abort:function(){V=!0,N(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:M,resume:M};if(m(B.userStep)){for(var _e=0;_e<C.results.data.length&&(B.userStep({data:C.results.data[_e],errors:C.results.errors,meta:C.results.meta},oe),!V);_e++);delete C.results}else m(B.userChunk)&&(B.userChunk(C.results,oe,C.file),delete C.results)}C.finished&&!V&&N(C.workerId,C.results)}function N(R,C){var B=S[R];m(B.userComplete)&&B.userComplete(C),B.terminate(),delete S[R]}function M(){throw new Error("Not implemented.")}function y(R){if(typeof R!="object"||R===null)return R;var C,B=Array.isArray(R)?[]:{};for(C in R)B[C]=y(R[C]);return B}function A(R,C){return function(){R.apply(C,arguments)}}function m(R){return typeof R=="function"}return d.parse=function(R,C){var B=(C=C||{}).dynamicTyping||!1;if(m(B)&&(C.dynamicTypingFunction=B,B={}),C.dynamicTyping=B,C.transform=!!m(C.transform)&&C.transform,!C.worker||!d.WORKERS_SUPPORTED)return B=null,d.NODE_STREAM_INPUT,typeof R=="string"?(R=(V=>V.charCodeAt(0)!==65279?V:V.slice(1))(R),B=new(C.download?P:k)(C)):R.readable===!0&&m(R.read)&&m(R.on)?B=new E(C):(a.File&&R instanceof File||R instanceof Object)&&(B=new O(C)),B.stream(R);(B=(()=>{var V;return!!d.WORKERS_SUPPORTED&&(V=(()=>{var oe=a.URL||a.webkitURL||null,_e=r.toString();return d.BLOB_URL||(d.BLOB_URL=oe.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_e,")();"],{type:"text/javascript"})))})(),(V=new a.Worker(V)).onmessage=U,V.id=_++,S[V.id]=V)})()).userStep=C.step,B.userChunk=C.chunk,B.userComplete=C.complete,B.userError=C.error,C.step=m(C.step),C.chunk=m(C.chunk),C.complete=m(C.complete),C.error=m(C.error),delete C.worker,B.postMessage({input:R,config:C,workerId:B.id})},d.unparse=function(R,C){var B=!1,V=!0,oe=",",_e=`\r
`,he='"',ue=he+he,W=!1,ee=null,ne=!1,ae=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||d.BAD_DELIMITERS.filter(function(Y){return C.delimiter.indexOf(Y)!==-1}).length||(oe=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(B=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(W=C.skipEmptyLines),typeof C.newline=="string"&&(_e=C.newline),typeof C.quoteChar=="string"&&(he=C.quoteChar),typeof C.header=="boolean"&&(V=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");ee=C.columns}C.escapeChar!==void 0&&(ue=C.escapeChar+he),C.escapeFormulae instanceof RegExp?ne=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(ne=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(he),"g"));if(typeof R=="string"&&(R=JSON.parse(R)),Array.isArray(R)){if(!R.length||Array.isArray(R[0]))return G(null,R,W);if(typeof R[0]=="object")return G(ee||Object.keys(R[0]),R,W)}else if(typeof R=="object")return typeof R.data=="string"&&(R.data=JSON.parse(R.data)),Array.isArray(R.data)&&(R.fields||(R.fields=R.meta&&R.meta.fields||ee),R.fields||(R.fields=Array.isArray(R.data[0])?R.fields:typeof R.data[0]=="object"?Object.keys(R.data[0]):[]),Array.isArray(R.data[0])||typeof R.data[0]=="object"||(R.data=[R.data])),G(R.fields||[],R.data||[],W);throw new Error("Unable to serialize unrecognized input");function G(Y,x,w){var q="",K=(typeof Y=="string"&&(Y=JSON.parse(Y)),typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(Y)&&0<Y.length),te=!Array.isArray(x[0]);if(K&&V){for(var X=0;X<Y.length;X++)0<X&&(q+=oe),q+=re(Y[X],X);0<x.length&&(q+=_e)}for(var b=0;b<x.length;b++){var L=(K?Y:x[b]).length,j=!1,I=K?Object.keys(x[b]).length===0:x[b].length===0;if(w&&!K&&(j=w==="greedy"?x[b].join("").trim()==="":x[b].length===1&&x[b][0].length===0),w==="greedy"&&K){for(var H=[],J=0;J<L;J++){var $=te?Y[J]:J;H.push(x[b][$])}j=H.join("").trim()===""}if(!j){for(var F=0;F<L;F++){0<F&&!I&&(q+=oe);var Z=K&&te?Y[F]:F;q+=re(x[b][Z],F)}b<x.length-1&&(!w||0<L&&!I)&&(q+=_e)}}return q}function re(Y,x){var w,q;return Y==null?"":Y.constructor===Date?JSON.stringify(Y).slice(1,25):(q=!1,ne&&typeof Y=="string"&&ne.test(Y)&&(Y="'"+Y,q=!0),w=Y.toString().replace(ae,ue),(q=q||B===!0||typeof B=="function"&&B(Y,x)||Array.isArray(B)&&B[x]||((K,te)=>{for(var X=0;X<te.length;X++)if(-1<K.indexOf(te[X]))return!0;return!1})(w,d.BAD_DELIMITERS)||-1<w.indexOf(oe)||w.charAt(0)===" "||w.charAt(w.length-1)===" ")?he+w+he:w)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!c&&!!a.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=T,d.ParserHandle=f,d.NetworkStreamer=P,d.FileStreamer=O,d.StringStreamer=k,d.ReadableStreamStreamer=E,a.jQuery&&((l=a.jQuery).fn.parse=function(R){var C=R.config||{},B=[];return this.each(function(_e){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var he=0;he<this.files.length;he++)B.push({file:this.files[he],inputElem:this,instanceConfig:l.extend({},C)})}),V(),this;function V(){if(B.length===0)m(R.complete)&&R.complete();else{var _e,he,ue,W,ee=B[0];if(m(R.before)){var ne=R.before(ee.file,ee.inputElem);if(typeof ne=="object"){if(ne.action==="abort")return _e="AbortError",he=ee.file,ue=ee.inputElem,W=ne.reason,void(m(R.error)&&R.error({name:_e},he,ue,W));if(ne.action==="skip")return void oe();typeof ne.config=="object"&&(ee.instanceConfig=l.extend(ee.instanceConfig,ne.config))}else if(ne==="skip")return void oe()}var ae=ee.instanceConfig.complete;ee.instanceConfig.complete=function(G){m(ae)&&ae(G,ee.file,ee.inputElem),oe()},d.parse(ee.file,ee.instanceConfig)}}function oe(){B.splice(0,1),V()}}),p&&(a.onmessage=function(R){R=R.data,d.WORKER_ID===void 0&&R&&(d.WORKER_ID=R.workerId),typeof R.input=="string"?a.postMessage({workerId:d.WORKER_ID,results:d.parse(R.input,R.config),finished:!0}):(a.File&&R.input instanceof File||R.input instanceof Object)&&(R=d.parse(R.input,R.config))&&a.postMessage({workerId:d.WORKER_ID,results:R,finished:!0})}),(P.prototype=Object.create(v.prototype)).constructor=P,(O.prototype=Object.create(v.prototype)).constructor=O,(k.prototype=Object.create(k.prototype)).constructor=k,(E.prototype=Object.create(v.prototype)).constructor=E,d})}(papaparse_min$1)),papaparse_min$1.exports}requirePapaparse_min();var SchemaType;(function(o){o.STRING="string",o.NUMBER="number",o.INTEGER="integer",o.BOOLEAN="boolean",o.ARRAY="array",o.OBJECT="object"})(SchemaType||(SchemaType={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ExecutableCodeLanguage;(function(o){o.LANGUAGE_UNSPECIFIED="language_unspecified",o.PYTHON="python"})(ExecutableCodeLanguage||(ExecutableCodeLanguage={}));var Outcome;(function(o){o.OUTCOME_UNSPECIFIED="outcome_unspecified",o.OUTCOME_OK="outcome_ok",o.OUTCOME_FAILED="outcome_failed",o.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Outcome||(Outcome={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const POSSIBLE_ROLES=["user","model","function","system"];var HarmCategory;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmProbability;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var BlockReason;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER"})(BlockReason||(BlockReason={}));var FinishReason;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER"})(FinishReason||(FinishReason={}));var TaskType;(function(o){o.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",o.RETRIEVAL_QUERY="RETRIEVAL_QUERY",o.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",o.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",o.CLASSIFICATION="CLASSIFICATION",o.CLUSTERING="CLUSTERING"})(TaskType||(TaskType={}));var FunctionCallingMode;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(FunctionCallingMode||(FunctionCallingMode={}));var DynamicRetrievalMode;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalMode||(DynamicRetrievalMode={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAIError extends Error{constructor(i){super(`[GoogleGenerativeAI Error]: ${i}`)}}class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(i,r){super(i),this.response=r}}class GoogleGenerativeAIFetchError extends GoogleGenerativeAIError{constructor(i,r,a,l){super(i),this.status=r,this.statusText=a,this.errorDetails=l}}class GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_BASE_URL="https://generativelanguage.googleapis.com",DEFAULT_API_VERSION="v1beta",PACKAGE_VERSION="0.21.0",PACKAGE_LOG_HEADER="genai-js";var Task;(function(o){o.GENERATE_CONTENT="generateContent",o.STREAM_GENERATE_CONTENT="streamGenerateContent",o.COUNT_TOKENS="countTokens",o.EMBED_CONTENT="embedContent",o.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Task||(Task={}));class RequestUrl{constructor(i,r,a,l,c){this.model=i,this.task=r,this.apiKey=a,this.stream=l,this.requestOptions=c}toString(){var i,r;const a=((i=this.requestOptions)===null||i===void 0?void 0:i.apiVersion)||DEFAULT_API_VERSION;let c=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||DEFAULT_BASE_URL}/${a}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function getClientHeaders(o){const i=[];return o!=null&&o.apiClient&&i.push(o.apiClient),i.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`),i.join(" ")}async function getHeaders(o){var i;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",getClientHeaders(o.requestOptions)),r.append("x-goog-api-key",o.apiKey);let a=(i=o.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(a){if(!(a instanceof Headers))try{a=new Headers(a)}catch(l){throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(a)} to Headers: ${l.message}`)}for(const[l,c]of a.entries()){if(l==="x-goog-api-key")throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${l}`);if(l==="x-goog-api-client")throw new GoogleGenerativeAIRequestInputError(`Header name ${l} can only be set using the apiClient field`);r.append(l,c)}}return r}async function constructModelRequest(o,i,r,a,l,c){const p=new RequestUrl(o,i,r,a,c);return{url:p.toString(),fetchOptions:Object.assign(Object.assign({},buildFetchOptions(c)),{method:"POST",headers:await getHeaders(p),body:l})}}async function makeModelRequest(o,i,r,a,l,c={},p=fetch){const{url:S,fetchOptions:_}=await constructModelRequest(o,i,r,a,l,c);return makeRequest(S,_,p)}async function makeRequest(o,i,r=fetch){let a;try{a=await r(o,i)}catch(l){handleResponseError(l,o)}return a.ok||await handleResponseNotOk(a,o),a}function handleResponseError(o,i){let r=o;throw o instanceof GoogleGenerativeAIFetchError||o instanceof GoogleGenerativeAIRequestInputError||(r=new GoogleGenerativeAIError(`Error fetching from ${i.toString()}: ${o.message}`),r.stack=o.stack),r}async function handleResponseNotOk(o,i){let r="",a;try{const l=await o.json();r=l.error.message,l.error.details&&(r+=` ${JSON.stringify(l.error.details)}`,a=l.error.details)}catch{}throw new GoogleGenerativeAIFetchError(`Error fetching from ${i.toString()}: [${o.status} ${o.statusText}] ${r}`,o.status,o.statusText,a)}function buildFetchOptions(o){const i={};if((o==null?void 0:o.signal)!==void 0||(o==null?void 0:o.timeout)>=0){const r=new AbortController;(o==null?void 0:o.timeout)>=0&&setTimeout(()=>r.abort(),o.timeout),o!=null&&o.signal&&o.signal.addEventListener("abort",()=>{r.abort()}),i.signal=r.signal}return i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function addHelpers(o){return o.text=()=>{if(o.candidates&&o.candidates.length>0){if(o.candidates.length>1&&console.warn(`This response had ${o.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(o.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(o)}`,o);return getText(o)}else if(o.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(o)}`,o);return""},o.functionCall=()=>{if(o.candidates&&o.candidates.length>0){if(o.candidates.length>1&&console.warn(`This response had ${o.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(o.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(o)}`,o);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),getFunctionCalls(o)[0]}else if(o.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(o)}`,o)},o.functionCalls=()=>{if(o.candidates&&o.candidates.length>0){if(o.candidates.length>1&&console.warn(`This response had ${o.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(o.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(o)}`,o);return getFunctionCalls(o)}else if(o.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(o)}`,o)},o}function getText(o){var i,r,a,l;const c=[];if(!((r=(i=o.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0)&&r.parts)for(const p of(l=(a=o.candidates)===null||a===void 0?void 0:a[0].content)===null||l===void 0?void 0:l.parts)p.text&&c.push(p.text),p.executableCode&&c.push("\n```"+p.executableCode.language+`
`+p.executableCode.code+"\n```\n"),p.codeExecutionResult&&c.push("\n```\n"+p.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function getFunctionCalls(o){var i,r,a,l;const c=[];if(!((r=(i=o.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0)&&r.parts)for(const p of(l=(a=o.candidates)===null||a===void 0?void 0:a[0].content)===null||l===void 0?void 0:l.parts)p.functionCall&&c.push(p.functionCall);if(c.length>0)return c}const badFinishReasons=[FinishReason.RECITATION,FinishReason.SAFETY,FinishReason.LANGUAGE];function hadBadFinishReason(o){return!!o.finishReason&&badFinishReasons.includes(o.finishReason)}function formatBlockErrorMessage(o){var i,r,a;let l="";if((!o.candidates||o.candidates.length===0)&&o.promptFeedback)l+="Response was blocked",!((i=o.promptFeedback)===null||i===void 0)&&i.blockReason&&(l+=` due to ${o.promptFeedback.blockReason}`),!((r=o.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(l+=`: ${o.promptFeedback.blockReasonMessage}`);else if(!((a=o.candidates)===null||a===void 0)&&a[0]){const c=o.candidates[0];hadBadFinishReason(c)&&(l+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(l+=`: ${c.finishMessage}`))}return l}function __await(o){return this instanceof __await?(this.v=o,this):new __await(o)}function __asyncGenerator(o,i,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=r.apply(o,i||[]),l,c=[];return l={},p("next"),p("throw"),p("return"),l[Symbol.asyncIterator]=function(){return this},l;function p(O){a[O]&&(l[O]=function(k){return new Promise(function(E,f){c.push([O,k,E,f])>1||S(O,k)})})}function S(O,k){try{_(a[O](k))}catch(E){P(c[0][3],E)}}function _(O){O.value instanceof __await?Promise.resolve(O.value.v).then(d,v):P(c[0][2],O)}function d(O){S("next",O)}function v(O){S("throw",O)}function P(O,k){O(k),c.shift(),c.length&&S(c[0][0],c[0][1])}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const responseLineRE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function processStream(o){const i=o.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=getResponseStream(i),[a,l]=r.tee();return{stream:generateResponseSequence(a),response:getResponsePromise(l)}}async function getResponsePromise(o){const i=[],r=o.getReader();for(;;){const{done:a,value:l}=await r.read();if(a)return addHelpers(aggregateResponses(i));i.push(l)}}function generateResponseSequence(o){return __asyncGenerator(this,arguments,function*(){const r=o.getReader();for(;;){const{value:a,done:l}=yield __await(r.read());if(l)break;yield yield __await(addHelpers(a))}})}function getResponseStream(o){const i=o.getReader();return new ReadableStream({start(a){let l="";return c();function c(){return i.read().then(({value:p,done:S})=>{if(S){if(l.trim()){a.error(new GoogleGenerativeAIError("Failed to parse stream"));return}a.close();return}l+=p;let _=l.match(responseLineRE),d;for(;_;){try{d=JSON.parse(_[1])}catch{a.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${_[1]}"`));return}a.enqueue(d),l=l.substring(_[0].length),_=l.match(responseLineRE)}return c()})}}})}function aggregateResponses(o){const i=o[o.length-1],r={promptFeedback:i==null?void 0:i.promptFeedback};for(const a of o){if(a.candidates)for(const l of a.candidates){const c=l.index;if(r.candidates||(r.candidates=[]),r.candidates[c]||(r.candidates[c]={index:l.index}),r.candidates[c].citationMetadata=l.citationMetadata,r.candidates[c].groundingMetadata=l.groundingMetadata,r.candidates[c].finishReason=l.finishReason,r.candidates[c].finishMessage=l.finishMessage,r.candidates[c].safetyRatings=l.safetyRatings,l.content&&l.content.parts){r.candidates[c].content||(r.candidates[c].content={role:l.content.role||"user",parts:[]});const p={};for(const S of l.content.parts)S.text&&(p.text=S.text),S.functionCall&&(p.functionCall=S.functionCall),S.executableCode&&(p.executableCode=S.executableCode),S.codeExecutionResult&&(p.codeExecutionResult=S.codeExecutionResult),Object.keys(p).length===0&&(p.text=""),r.candidates[c].content.parts.push(p)}}a.usageMetadata&&(r.usageMetadata=a.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateContentStream(o,i,r,a){const l=await makeModelRequest(i,Task.STREAM_GENERATE_CONTENT,o,!0,JSON.stringify(r),a);return processStream(l)}async function generateContent(o,i,r,a){const c=await(await makeModelRequest(i,Task.GENERATE_CONTENT,o,!1,JSON.stringify(r),a)).json();return{response:addHelpers(c)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function formatSystemInstruction(o){if(o!=null){if(typeof o=="string")return{role:"system",parts:[{text:o}]};if(o.text)return{role:"system",parts:[o]};if(o.parts)return o.role?o:{role:"system",parts:o.parts}}}function formatNewContent(o){let i=[];if(typeof o=="string")i=[{text:o}];else for(const r of o)typeof r=="string"?i.push({text:r}):i.push(r);return assignRoleToPartsAndValidateSendMessageRequest(i)}function assignRoleToPartsAndValidateSendMessageRequest(o){const i={role:"user",parts:[]},r={role:"function",parts:[]};let a=!1,l=!1;for(const c of o)"functionResponse"in c?(r.parts.push(c),l=!0):(i.parts.push(c),a=!0);if(a&&l)throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!a&&!l)throw new GoogleGenerativeAIError("No content is provided for sending chat message.");return a?i:r}function formatCountTokensInput(o,i){var r;let a={model:i==null?void 0:i.model,generationConfig:i==null?void 0:i.generationConfig,safetySettings:i==null?void 0:i.safetySettings,tools:i==null?void 0:i.tools,toolConfig:i==null?void 0:i.toolConfig,systemInstruction:i==null?void 0:i.systemInstruction,cachedContent:(r=i==null?void 0:i.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const l=o.generateContentRequest!=null;if(o.contents){if(l)throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");a.contents=o.contents}else if(l)a=Object.assign(Object.assign({},a),o.generateContentRequest);else{const c=formatNewContent(o);a.contents=[c]}return{generateContentRequest:a}}function formatGenerateContentInput(o){let i;return o.contents?i=o:i={contents:[formatNewContent(o)]},o.systemInstruction&&(i.systemInstruction=formatSystemInstruction(o.systemInstruction)),i}function formatEmbedContentInput(o){return typeof o=="string"||Array.isArray(o)?{content:formatNewContent(o)}:o}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_PART_FIELDS=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],VALID_PARTS_PER_ROLE={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function validateChatHistory(o){let i=!1;for(const r of o){const{role:a,parts:l}=r;if(!i&&a!=="user")throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${a}`);if(!POSSIBLE_ROLES.includes(a))throw new GoogleGenerativeAIError(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);if(!Array.isArray(l))throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");if(l.length===0)throw new GoogleGenerativeAIError("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const S of l)for(const _ of VALID_PART_FIELDS)_ in S&&(c[_]+=1);const p=VALID_PARTS_PER_ROLE[a];for(const S of VALID_PART_FIELDS)if(!p.includes(S)&&c[S]>0)throw new GoogleGenerativeAIError(`Content with role '${a}' can't contain '${S}' part`);i=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SILENT_ERROR="SILENT_ERROR";class ChatSession{constructor(i,r,a,l={}){this.model=r,this.params=a,this._requestOptions=l,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=i,a!=null&&a.history&&(validateChatHistory(a.history),this._history=a.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(i,r={}){var a,l,c,p,S,_;await this._sendPromise;const d=formatNewContent(i),v={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(S=this.params)===null||S===void 0?void 0:S.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,d]},P=Object.assign(Object.assign({},this._requestOptions),r);let O;return this._sendPromise=this._sendPromise.then(()=>generateContent(this._apiKey,this.model,v,P)).then(k=>{var E;if(k.response.candidates&&k.response.candidates.length>0){this._history.push(d);const f=Object.assign({parts:[],role:"model"},(E=k.response.candidates)===null||E===void 0?void 0:E[0].content);this._history.push(f)}else{const f=formatBlockErrorMessage(k.response);f&&console.warn(`sendMessage() was unsuccessful. ${f}. Inspect response object for details.`)}O=k}),await this._sendPromise,O}async sendMessageStream(i,r={}){var a,l,c,p,S,_;await this._sendPromise;const d=formatNewContent(i),v={safetySettings:(a=this.params)===null||a===void 0?void 0:a.safetySettings,generationConfig:(l=this.params)===null||l===void 0?void 0:l.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(p=this.params)===null||p===void 0?void 0:p.toolConfig,systemInstruction:(S=this.params)===null||S===void 0?void 0:S.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,d]},P=Object.assign(Object.assign({},this._requestOptions),r),O=generateContentStream(this._apiKey,this.model,v,P);return this._sendPromise=this._sendPromise.then(()=>O).catch(k=>{throw new Error(SILENT_ERROR)}).then(k=>k.response).then(k=>{if(k.candidates&&k.candidates.length>0){this._history.push(d);const E=Object.assign({},k.candidates[0].content);E.role||(E.role="model"),this._history.push(E)}else{const E=formatBlockErrorMessage(k);E&&console.warn(`sendMessageStream() was unsuccessful. ${E}. Inspect response object for details.`)}}).catch(k=>{k.message!==SILENT_ERROR&&console.error(k)}),O}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function countTokens(o,i,r,a){return(await makeModelRequest(i,Task.COUNT_TOKENS,o,!1,JSON.stringify(r),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function embedContent(o,i,r,a){return(await makeModelRequest(i,Task.EMBED_CONTENT,o,!1,JSON.stringify(r),a)).json()}async function batchEmbedContents(o,i,r,a){const l=r.requests.map(p=>Object.assign(Object.assign({},p),{model:i}));return(await makeModelRequest(i,Task.BATCH_EMBED_CONTENTS,o,!1,JSON.stringify({requests:l}),a)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GenerativeModel{constructor(i,r,a={}){this.apiKey=i,this._requestOptions=a,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=formatSystemInstruction(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(i,r={}){var a;const l=formatGenerateContentInput(i),c=Object.assign(Object.assign({},this._requestOptions),r);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},l),c)}async generateContentStream(i,r={}){var a;const l=formatGenerateContentInput(i),c=Object.assign(Object.assign({},this._requestOptions),r);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(a=this.cachedContent)===null||a===void 0?void 0:a.name},l),c)}startChat(i){var r;return new ChatSession(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),this._requestOptions)}async countTokens(i,r={}){const a=formatCountTokensInput(i,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),l=Object.assign(Object.assign({},this._requestOptions),r);return countTokens(this.apiKey,this.model,a,l)}async embedContent(i,r={}){const a=formatEmbedContentInput(i),l=Object.assign(Object.assign({},this._requestOptions),r);return embedContent(this.apiKey,this.model,a,l)}async batchEmbedContents(i,r={}){const a=Object.assign(Object.assign({},this._requestOptions),r);return batchEmbedContents(this.apiKey,this.model,i,a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAI{constructor(i){this.apiKey=i}getGenerativeModel(i,r){if(!i.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,i,r)}getGenerativeModelFromCachedContent(i,r,a){if(!i.name)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");if(!i.model)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");const l=["model","systemInstruction"];for(const p of l)if(r!=null&&r[p]&&i[p]&&(r==null?void 0:r[p])!==i[p]){if(p==="model"){const S=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,_=i.model.startsWith("models/")?i.model.replace("models/",""):i.model;if(S===_)continue}throw new GoogleGenerativeAIRequestInputError(`Different value for "${p}" specified in modelParams (${r[p]}) and cachedContent (${i[p]})`)}const c=Object.assign(Object.assign({},r),{model:i.model,tools:i.tools,toolConfig:i.toolConfig,systemInstruction:i.systemInstruction,cachedContent:i});return new GenerativeModel(this.apiKey,c,a)}}pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";const supabaseUrl$1="https://ydxelzxjsuemylifgwte.supabase.co",supabaseAnonKey$1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkeGVsenhqc3VlbXlsaWZnd3RlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY2MDY4MzAsImV4cCI6MjA1MjE4MjgzMH0.Nnbgsp8NvJaD_DyXpsNwnvrdZUwZz4ylWzv7_fglxPo";createClient(supabaseUrl$1,supabaseAnonKey$1);const CommentListener=()=>{const[o,i]=reactExports.useState(()=>JSON.parse(localStorage.getItem("messages"))||[]),[r,a]=reactExports.useState("John"),[l,c]=reactExports.useState(""),[p,S]=reactExports.useState("none");reactExports.useState(null);const _="/files/Mathematical database development_.pdf",d=reactExports.useRef(null),[v,P]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{const T=_.split(";"),U=T.map(y=>fetch(y).then(A=>{if(y.endsWith(".txt"))return A.text();if(y.endsWith(".pdf"))return A.arrayBuffer()}).catch(A=>console.error("Error fetching file:",A))),N=await Promise.all(U),M=await Promise.all(N.map((y,A)=>{const m=T[A];if(m.endsWith(".txt"))return y;if(m.endsWith(".pdf"))return O(y)}));P(M)}catch(T){console.error("Error in fetchFiles function:",T)}})()},[]);const O=async g=>{const T=await pdfExports.getDocument({data:g}).promise;let U="";for(let N=1;N<=T.numPages;N++){const A=(await(await T.getPage(N)).getTextContent()).items.map(m=>m.str).join(" ");U+=A+`
`}return U};reactExports.useEffect(()=>{localStorage.setItem("messages",JSON.stringify(o))},[o]),reactExports.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[o]);const k=g=>{a(g)},E=async g=>{if(g.preventDefault(),l.trim()==="")return;const T="AIzaSyDx2nwruTIGV2NWCuoF0TWtrZwY1badw5Q",N=new GoogleGenerativeAI(T).getGenerativeModel({model:"gemini-1.5-flash"}),M="Explain how AI works";try{const A=(await N.generateContent(M)).response.text();console.log(A);const m=new Date().toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),R={sender:r,text:A,lines:A.split(`
`),tm:m};i(C=>[...C,R])}catch(y){console.error("Error generating content:",y)}},f=()=>{localStorage.clear(),i([])};return jsxRuntimeExports.jsxs("div",{className:"app-container",children:[jsxRuntimeExports.jsxs("div",{className:"person-selector",children:[jsxRuntimeExports.jsx("button",{className:`button person-selector-button ${r==="John"?"active-person":""}`,onClick:()=>k("John"),children:"John"}),jsxRuntimeExports.jsx("button",{className:`button person-selector-button ${r==="Jane"?"active-person":""}`,onClick:()=>k("Jane"),children:"Jane"})]}),jsxRuntimeExports.jsxs("div",{className:"chat-container",children:[jsxRuntimeExports.jsxs("div",{className:"chat-header typing-indicator",style:{display:p},children:[jsxRuntimeExports.jsxs("h2",{className:"chat-header",children:[r," chatting"]}),jsxRuntimeExports.jsx("span",{className:"dot"}),jsxRuntimeExports.jsx("span",{className:"dot"}),jsxRuntimeExports.jsx("span",{className:"dot"})]}),jsxRuntimeExports.jsx("div",{ref:d,className:"chat-messages",children:o.map((g,T)=>jsxRuntimeExports.jsxs("div",{className:`message ${g.sender==="John"?"blue-bg":"gray-bg"}`,children:[jsxRuntimeExports.jsx("div",{className:"message-sender",children:g.sender}),jsxRuntimeExports.jsx("div",{className:"message-text",children:g.lines&&g.lines.length>0?g.lines.map((U,N)=>jsxRuntimeExports.jsxs("span",{children:[U,jsxRuntimeExports.jsx("br",{})]},N)):g.text}),jsxRuntimeExports.jsx("div",{className:"message-timestamp",children:g.timestamp})]},T))}),jsxRuntimeExports.jsxs("form",{className:"chat-input-form",onSubmit:E,children:[jsxRuntimeExports.jsx("textarea",{id:"message",name:"message",rows:"5",cols:"50",className:"chat-input",value:l,placeholder:`Type here, ${r}...`,onChange:g=>c(g.target.value)}),jsxRuntimeExports.jsx("button",{type:"submit",className:"button send-button",children:"Send"})]}),jsxRuntimeExports.jsx("button",{className:"button send-button",onClick:f,children:"Clear Chat"})]})]})},supabaseUrl="https://ydxelzxjsuemylifgwte.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkeGVsenhqc3VlbXlsaWZnd3RlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY2MDY4MzAsImV4cCI6MjA1MjE4MjgzMH0.Nnbgsp8NvJaD_DyXpsNwnvrdZUwZz4ylWzv7_fglxPo";createClient(supabaseUrl,supabaseAnonKey);const App=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx(CommentListener,{})})}),root=ReactDOM.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/",children:jsxRuntimeExports.jsx(App,{})})}));export{getDefaultExportFromCjs as g};
