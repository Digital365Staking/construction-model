var tm=Object.defineProperty;var xf=t=>{throw TypeError(t)};var nm=(t,e,n)=>e in t?tm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Et=(t,e,n)=>nm(t,typeof e!="symbol"?e+"":e,n),Dl=(t,e,n)=>e.has(t)||xf("Cannot "+n);var ee=(t,e,n)=>(Dl(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?xf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Me=(t,e,n,r)=>(Dl(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ke=(t,e,n)=>(Dl(t,e,"access private method"),n);var Nl=(t,e,n,r)=>({set _(a){Me(t,e,a,n)},get _(){return ee(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:u,ref:a!==void 0?a:null,props:o}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function E(q){return q===null||typeof q!="object"?null:(q=b&&q[b]||q["@@iterator"],typeof q=="function"?q:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function v(q,fe,Z){this.props=q,this.context=fe,this.refs=g,this.updater=Z||w}v.prototype.isReactComponent={},v.prototype.setState=function(q,fe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,fe,"setState")},v.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function T(){}T.prototype=v.prototype;function R(q,fe,Z){this.props=q,this.context=fe,this.refs=g,this.updater=Z||w}var k=R.prototype=new T;k.constructor=R,y(k,v.prototype),k.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function A(q,fe,Z,N,D,V){return Z=V.ref,{$$typeof:t,type:q,key:fe,ref:Z!==void 0?Z:null,props:V}}function I(q,fe){return A(q.type,fe,void 0,void 0,void 0,q.props)}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function j(q){var fe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Z){return fe[Z]})}var B=/\/+/g;function ie(q,fe){return typeof q=="object"&&q!==null&&q.key!=null?j(""+q.key):fe.toString(36)}function oe(){}function le(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(oe,oe):(q.status="pending",q.then(function(fe){q.status==="pending"&&(q.status="fulfilled",q.value=fe)},function(fe){q.status==="pending"&&(q.status="rejected",q.reason=fe)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function de(q,fe,Z,N,D){var V=typeof q;(V==="undefined"||V==="boolean")&&(q=null);var W=!1;if(q===null)W=!0;else switch(V){case"bigint":case"string":case"number":W=!0;break;case"object":switch(q.$$typeof){case t:case e:W=!0;break;case m:return W=q._init,de(W(q._payload),fe,Z,N,D)}}if(W)return D=D(q),W=N===""?"."+ie(q,0):N,x(D)?(Z="",W!=null&&(Z=W.replace(B,"$&/")+"/"),de(D,fe,Z,"",function(C){return C})):D!=null&&(P(D)&&(D=I(D,Z+(D.key==null||q&&q.key===D.key?"":(""+D.key).replace(B,"$&/")+"/")+W)),fe.push(D)),1;W=0;var te=N===""?".":N+":";if(x(q))for(var X=0;X<q.length;X++)N=q[X],V=te+ie(N,X),W+=de(N,fe,Z,V,D);else if(X=E(q),typeof X=="function")for(q=X.call(q),X=0;!(N=q.next()).done;)N=N.value,V=te+ie(N,X++),W+=de(N,fe,Z,V,D);else if(V==="object"){if(typeof q.then=="function")return de(le(q),fe,Z,N,D);throw fe=String(q),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return W}function K(q,fe,Z){if(q==null)return q;var N=[],D=0;return de(q,N,"","",function(V){return fe.call(Z,V,D++)}),N}function J(q){if(q._status===-1){var fe=q._result;fe=fe(),fe.then(function(Z){(q._status===0||q._status===-1)&&(q._status=1,q._result=Z)},function(Z){(q._status===0||q._status===-1)&&(q._status=2,q._result=Z)}),q._status===-1&&(q._status=0,q._result=fe)}if(q._status===1)return q._result.default;throw q._result}var se=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function ue(){}return react_production.Children={map:K,forEach:function(q,fe,Z){K(q,function(){fe.apply(this,arguments)},Z)},count:function(q){var fe=0;return K(q,function(){fe++}),fe},toArray:function(q){return K(q,function(fe){return fe})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},react_production.Component=v,react_production.Fragment=n,react_production.Profiler=a,react_production.PureComponent=R,react_production.StrictMode=r,react_production.Suspense=d,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,react_production.act=function(){throw Error("act(...) is not supported in production builds of React.")},react_production.cache=function(q){return function(){return q.apply(null,arguments)}},react_production.cloneElement=function(q,fe,Z){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var N=y({},q.props),D=q.key,V=void 0;if(fe!=null)for(W in fe.ref!==void 0&&(V=void 0),fe.key!==void 0&&(D=""+fe.key),fe)!O.call(fe,W)||W==="key"||W==="__self"||W==="__source"||W==="ref"&&fe.ref===void 0||(N[W]=fe[W]);var W=arguments.length-2;if(W===1)N.children=Z;else if(1<W){for(var te=Array(W),X=0;X<W;X++)te[X]=arguments[X+2];N.children=te}return A(q.type,D,void 0,void 0,V,N)},react_production.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},react_production.createElement=function(q,fe,Z){var N,D={},V=null;if(fe!=null)for(N in fe.key!==void 0&&(V=""+fe.key),fe)O.call(fe,N)&&N!=="key"&&N!=="__self"&&N!=="__source"&&(D[N]=fe[N]);var W=arguments.length-2;if(W===1)D.children=Z;else if(1<W){for(var te=Array(W),X=0;X<W;X++)te[X]=arguments[X+2];D.children=te}if(q&&q.defaultProps)for(N in W=q.defaultProps,W)D[N]===void 0&&(D[N]=W[N]);return A(q,V,void 0,void 0,null,D)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(q){return{$$typeof:h,render:q}},react_production.isValidElement=P,react_production.lazy=function(q){return{$$typeof:m,_payload:{_status:-1,_result:q},_init:J}},react_production.memo=function(q,fe){return{$$typeof:f,type:q,compare:fe===void 0?null:fe}},react_production.startTransition=function(q){var fe=S.T,Z={};S.T=Z;try{var N=q(),D=S.S;D!==null&&D(Z,N),typeof N=="object"&&N!==null&&typeof N.then=="function"&&N.then(ue,se)}catch(V){se(V)}finally{S.T=fe}},react_production.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},react_production.use=function(q){return S.H.use(q)},react_production.useActionState=function(q,fe,Z){return S.H.useActionState(q,fe,Z)},react_production.useCallback=function(q,fe){return S.H.useCallback(q,fe)},react_production.useContext=function(q){return S.H.useContext(q)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(q,fe){return S.H.useDeferredValue(q,fe)},react_production.useEffect=function(q,fe){return S.H.useEffect(q,fe)},react_production.useId=function(){return S.H.useId()},react_production.useImperativeHandle=function(q,fe,Z){return S.H.useImperativeHandle(q,fe,Z)},react_production.useInsertionEffect=function(q,fe){return S.H.useInsertionEffect(q,fe)},react_production.useLayoutEffect=function(q,fe){return S.H.useLayoutEffect(q,fe)},react_production.useMemo=function(q,fe){return S.H.useMemo(q,fe)},react_production.useOptimistic=function(q,fe){return S.H.useOptimistic(q,fe)},react_production.useReducer=function(q,fe,Z){return S.H.useReducer(q,fe,Z)},react_production.useRef=function(q){return S.H.useRef(q)},react_production.useState=function(q){return S.H.useState(q)},react_production.useSyncExternalStore=function(q,fe,Z){return S.H.useSyncExternalStore(q,fe,Z)},react_production.useTransition=function(){return S.H.useTransition()},react_production.version="19.0.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client$1={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(t){function e(K,J){var se=K.length;K.push(J);e:for(;0<se;){var ue=se-1>>>1,q=K[ue];if(0<a(q,J))K[ue]=J,K[se]=q,se=ue;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var J=K[0],se=K.pop();if(se!==J){K[0]=se;e:for(var ue=0,q=K.length,fe=q>>>1;ue<fe;){var Z=2*(ue+1)-1,N=K[Z],D=Z+1,V=K[D];if(0>a(N,se))D<q&&0>a(V,N)?(K[ue]=V,K[D]=se,ue=D):(K[ue]=N,K[Z]=se,ue=Z);else if(D<q&&0>a(V,se))K[ue]=V,K[D]=se,ue=D;else break e}}return J}function a(K,J){var se=K.sortIndex-J.sortIndex;return se!==0?se:K.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var d=[],f=[],m=1,b=null,E=3,w=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(K){for(var J=n(f);J!==null;){if(J.callback===null)r(f);else if(J.startTime<=K)r(f),J.sortIndex=J.expirationTime,e(d,J);else break;J=n(f)}}function x(K){if(g=!1,k(K),!y)if(n(d)!==null)y=!0,le();else{var J=n(f);J!==null&&de(x,J.startTime-K)}}var S=!1,O=-1,A=5,I=-1;function P(){return!(t.unstable_now()-I<A)}function j(){if(S){var K=t.unstable_now();I=K;var J=!0;try{e:{y=!1,g&&(g=!1,T(O),O=-1),w=!0;var se=E;try{t:{for(k(K),b=n(d);b!==null&&!(b.expirationTime>K&&P());){var ue=b.callback;if(typeof ue=="function"){b.callback=null,E=b.priorityLevel;var q=ue(b.expirationTime<=K);if(K=t.unstable_now(),typeof q=="function"){b.callback=q,k(K),J=!0;break t}b===n(d)&&r(d),k(K)}else r(d);b=n(d)}if(b!==null)J=!0;else{var fe=n(f);fe!==null&&de(x,fe.startTime-K),J=!1}}break e}finally{b=null,E=se,w=!1}J=void 0}}finally{J?B():S=!1}}}var B;if(typeof R=="function")B=function(){R(j)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,oe=ie.port2;ie.port1.onmessage=j,B=function(){oe.postMessage(null)}}else B=function(){v(j,0)};function le(){S||(S=!0,B())}function de(K,J){O=v(function(){K(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){y||w||(y=!0,le())},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(K){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var se=E;E=J;try{return K()}finally{E=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,J){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=E;E=K;try{return J()}finally{E=se}},t.unstable_scheduleCallback=function(K,J,se){var ue=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ue+se:ue):se=ue,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=se+q,K={id:m++,callback:J,priorityLevel:K,startTime:se,expirationTime:q,sortIndex:-1},se>ue?(K.sortIndex=se,e(f,K),n(d)===null&&K===n(f)&&(g?(T(O),O=-1):g=!0,de(x,se-ue))):(K.sortIndex=q,e(d,K),y||w||(y=!0,le())),K},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(K){var J=E;return function(){var se=E;E=J;try{return K.apply(this,arguments)}finally{E=se}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:f,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,m)},reactDom_production.flushSync=function(d){var f=u.T,m=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=f,r.p=m,r.d.f()}},reactDom_production.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},reactDom_production.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},reactDom_production.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,b=h(m,f.crossOrigin),E=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:w}):m==="script"&&r.d.X(d,{crossOrigin:b,integrity:E,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},reactDom_production.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=h(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},reactDom_production.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,b=h(m,f.crossOrigin);r.d.L(d,m,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},reactDom_production.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=h(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},reactDom_production.requestFormReset=function(d){r.d.r(d)},reactDom_production.unstable_batchedUpdates=function(d,f){return d(f)},reactDom_production.useFormState=function(d,f,m){return u.H.useFormState(d,f,m)},reactDom_production.useFormStatus=function(){return u.H.useHostTransitionStatus()},reactDom_production.version="19.0.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),n=requireReactDom();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}var o=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),w=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),x=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function O(s){return s===null||typeof s!="object"?null:(s=S&&s[S]||s["@@iterator"],typeof s=="function"?s:null)}var A=Symbol.for("react.client.reference");function I(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===A?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case d:return"Fragment";case h:return"Portal";case m:return"Profiler";case f:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case w:return(s.displayName||"Context")+".Provider";case E:return(s._context.displayName||"Context")+".Consumer";case y:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return i=s.displayName||null,i!==null?i:I(s.type)||"Memo";case R:i=s._payload,s=s._init;try{return I(s(i))}catch{}}return null}var P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=Object.assign,B,ie;function oe(s){if(B===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);B=i&&i[1]||"",ie=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+s+ie}var le=!1;function de(s,i){if(!s||le)return"";le=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(Ce){var Ae=Ce}Reflect.construct(s,[],Pe)}else{try{Pe.call()}catch(Ce){Ae=Ce}s.call(Pe.prototype)}}else{try{throw Error()}catch(Ce){Ae=Ce}(Pe=s())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(Ce){if(Ce&&Ae&&typeof Ce.stack=="string")return[Ce.stack,Ae.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),M=_[0],Y=_[1];if(M&&Y){var ce=M.split(`
`),ge=Y.split(`
`);for(p=c=0;c<ce.length&&!ce[c].includes("DetermineComponentFrameRoot");)c++;for(;p<ge.length&&!ge[p].includes("DetermineComponentFrameRoot");)p++;if(c===ce.length||p===ge.length)for(c=ce.length-1,p=ge.length-1;1<=c&&0<=p&&ce[c]!==ge[p];)p--;for(;1<=c&&0<=p;c--,p--)if(ce[c]!==ge[p]){if(c!==1||p!==1)do if(c--,p--,0>p||ce[c]!==ge[p]){var Re=`
`+ce[c].replace(" at new "," at ");return s.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",s.displayName)),Re}while(1<=c&&0<=p);break}}}finally{le=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?oe(l):""}function K(s){switch(s.tag){case 26:case 27:case 5:return oe(s.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return s=de(s.type,!1),s;case 11:return s=de(s.type.render,!1),s;case 1:return s=de(s.type,!0),s;default:return""}}function J(s){try{var i="";do i+=K(s),s=s.return;while(s);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function se(s){var i=s,l=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,i.flags&4098&&(l=i.return),s=i.return;while(s)}return i.tag===3?l:null}function ue(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function q(s){if(se(s)!==s)throw Error(r(188))}function fe(s){var i=s.alternate;if(!i){if(i=se(s),i===null)throw Error(r(188));return i!==s?null:s}for(var l=s,c=i;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return q(p),s;if(_===c)return q(p),i;_=_.sibling}throw Error(r(188))}if(l.return!==c.return)l=p,c=_;else{for(var M=!1,Y=p.child;Y;){if(Y===l){M=!0,l=p,c=_;break}if(Y===c){M=!0,c=p,l=_;break}Y=Y.sibling}if(!M){for(Y=_.child;Y;){if(Y===l){M=!0,l=_,c=p;break}if(Y===c){M=!0,c=_,l=p;break}Y=Y.sibling}if(!M)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?s:i}function Z(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=Z(s),i!==null)return i;s=s.sibling}return null}var N=Array.isArray,D=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},W=[],te=-1;function X(s){return{current:s}}function C(s){0>te||(s.current=W[te],W[te]=null,te--)}function L(s,i){te++,W[te]=s.current,s.current=i}var U=X(null),$=X(null),H=X(null),Q=X(null);function G(s,i){switch(L(H,i),L($,s),L(U,null),s=i.nodeType,s){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?ef(i):0;break;default:if(s=s===8?i.parentNode:i,i=s.tagName,s=s.namespaceURI)s=ef(s),i=tf(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}C(U),L(U,i)}function F(){C(U),C($),C(H)}function ne(s){s.memoizedState!==null&&L(Q,s);var i=U.current,l=tf(i,s.type);i!==l&&(L($,s),L(U,l))}function he(s){$.current===s&&(C(U),C($)),Q.current===s&&(C(Q),ci._currentValue=V)}var ae=Object.prototype.hasOwnProperty,pe=t.unstable_scheduleCallback,Ee=t.unstable_cancelCallback,we=t.unstable_shouldYield,Ie=t.unstable_requestPaint,ve=t.unstable_now,Ve=t.unstable_getCurrentPriorityLevel,Fe=t.unstable_ImmediatePriority,De=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,ut=t.unstable_LowPriority,yt=t.unstable_IdlePriority,ct=t.log,it=t.unstable_setDisableYieldValue,nt=null,We=null;function Jt(s){if(We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(nt,s,void 0,(s.current.flags&128)===128)}catch{}}function Zt(s){if(typeof ct=="function"&&it(s),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(nt,s)}catch{}}var Ct=Math.clz32?Math.clz32:_e,xe=Math.log,ye=Math.LN2;function _e(s){return s>>>=0,s===0?32:31-(xe(s)/ye|0)|0}var Ue=128,Ye=4194304;function ot(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Xe(s,i){var l=s.pendingLanes;if(l===0)return 0;var c=0,p=s.suspendedLanes,_=s.pingedLanes,M=s.warmLanes;s=s.finishedLanes!==0;var Y=l&134217727;return Y!==0?(l=Y&~p,l!==0?c=ot(l):(_&=Y,_!==0?c=ot(_):s||(M=Y&~M,M!==0&&(c=ot(M))))):(Y=l&~p,Y!==0?c=ot(Y):_!==0?c=ot(_):s||(M=l&~M,M!==0&&(c=ot(M)))),c===0?0:i!==0&&i!==c&&!(i&p)&&(p=c&-c,M=i&-i,p>=M||p===32&&(M&4194176)!==0)?i:c}function zt(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Rn(s,i){switch(s){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Te(){var s=Ue;return Ue<<=1,!(Ue&4194176)&&(Ue=128),s}function je(){var s=Ye;return Ye<<=1,!(Ye&62914560)&&(Ye=4194304),s}function Le(s){for(var i=[],l=0;31>l;l++)i.push(s);return i}function ze(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function qe(s,i,l,c,p,_){var M=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var Y=s.entanglements,ce=s.expirationTimes,ge=s.hiddenUpdates;for(l=M&~l;0<l;){var Re=31-Ct(l),Pe=1<<Re;Y[Re]=0,ce[Re]=-1;var Ae=ge[Re];if(Ae!==null)for(ge[Re]=null,Re=0;Re<Ae.length;Re++){var Ce=Ae[Re];Ce!==null&&(Ce.lane&=-536870913)}l&=~Pe}c!==0&&tt(s,c,0),_!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=_&~(M&~i))}function tt(s,i,l){s.pendingLanes|=i,s.suspendedLanes&=~i;var c=31-Ct(i);s.entangledLanes|=i,s.entanglements[c]=s.entanglements[c]|1073741824|l&4194218}function _t(s,i){var l=s.entangledLanes|=i;for(s=s.entanglements;l;){var c=31-Ct(l),p=1<<c;p&i|s[c]&i&&(s[c]|=i),l&=~p}}function Qe(s){return s&=-s,2<s?8<s?s&134217727?32:268435456:8:2}function rt(){var s=D.p;return s!==0?s:(s=window.event,s===void 0?32:bf(s.type))}function xt(s,i){var l=D.p;try{return D.p=s,i()}finally{D.p=l}}var Tt=Math.random().toString(36).slice(2),et="__reactFiber$"+Tt,ht="__reactProps$"+Tt,$t="__reactContainer$"+Tt,Ze="__reactEvents$"+Tt,br="__reactListeners$"+Tt,Tn="__reactHandles$"+Tt,pt="__reactResources$"+Tt,Dt="__reactMarker$"+Tt;function Qt(s){delete s[et],delete s[ht],delete s[Ze],delete s[br],delete s[Tn]}function Nt(s){var i=s[et];if(i)return i;for(var l=s.parentNode;l;){if(i=l[$t]||l[et]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(s=sf(s);s!==null;){if(l=s[et])return l;s=sf(s)}return i}s=l,l=s.parentNode}return null}function zr(s){if(s=s[et]||s[$t]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function Ts(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function $r(s){var i=s[pt];return i||(i=s[pt]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function qt(s){s[Dt]=!0}var Ql=new Set,eu={};function Er(s,i){qr(s,i),qr(s+"Capture",i)}function qr(s,i){for(eu[s]=i,s=0;s<i.length;s++)Ql.add(i[s])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tu={},nu={};function Yf(s){return ae.call(nu,s)?!0:ae.call(tu,s)?!1:Kf.test(s)?nu[s]=!0:(tu[s]=!0,!1)}function yi(s,i,l){if(Yf(i))if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+l)}}function _i(s,i,l){if(l===null)s.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+l)}}function Ln(s,i,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(i,l,""+c)}}function dn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ru(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Xf(s){var i=ru(s)?"checked":"value",l=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),c=""+s[i];if(!s.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,_=l.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return p.call(this)},set:function(M){c=""+M,_.call(this,M)}}),Object.defineProperty(s,i,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function vi(s){s._valueTracker||(s._valueTracker=Xf(s))}function su(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var l=i.getValue(),c="";return s&&(c=ru(s)?s.checked?"true":"false":s.value),s=c,s!==l?(i.setValue(s),!0):!1}function bi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Wf=/[\n"\\]/g;function fn(s){return s.replace(Wf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ka(s,i,l,c,p,_,M,Y){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),i!=null?M==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+dn(i)):s.value!==""+dn(i)&&(s.value=""+dn(i)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),i!=null?Pa(s,M,dn(i)):l!=null?Pa(s,M,dn(l)):c!=null&&s.removeAttribute("value"),p==null&&_!=null&&(s.defaultChecked=!!_),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?s.name=""+dn(Y):s.removeAttribute("name")}function iu(s,i,l,c,p,_,M,Y){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),i!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||i!=null))return;l=l!=null?""+dn(l):"",i=i!=null?""+dn(i):l,Y||i===s.value||(s.value=i),s.defaultValue=i}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=Y?s.checked:!!c,s.defaultChecked=!!c,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M)}function Pa(s,i,l){i==="number"&&bi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Vr(s,i,l,c){if(s=s.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<s.length;l++)p=i.hasOwnProperty("$"+s[l].value),s[l].selected!==p&&(s[l].selected=p),p&&c&&(s[l].defaultSelected=!0)}else{for(l=""+dn(l),i=null,p=0;p<s.length;p++){if(s[p].value===l){s[p].selected=!0,c&&(s[p].defaultSelected=!0);return}i!==null||s[p].disabled||(i=s[p])}i!==null&&(i.selected=!0)}}function au(s,i,l){if(i!=null&&(i=""+dn(i),i!==s.value&&(s.value=i),l==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=l!=null?""+dn(l):""}function ou(s,i,l,c){if(i==null){if(c!=null){if(l!=null)throw Error(r(92));if(N(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),i=l}l=dn(i),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c)}function Hr(s,i){if(i){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=i;return}}s.textContent=i}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(s,i,l){var c=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":c?s.setProperty(i,l):typeof l!="number"||l===0||Jf.has(i)?i==="float"?s.cssFloat=l:s[i]=(""+l).trim():s[i]=l+"px"}function uu(s,i,l){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var p in i)c=i[p],i.hasOwnProperty(p)&&l[p]!==c&&lu(s,p,c)}else for(var _ in i)i.hasOwnProperty(_)&&lu(s,_,i[_])}function Ia(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(s){return eh.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Da=null;function Na(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Gr=null,Zr=null;function cu(s){var i=zr(s);if(i&&(s=i.stateNode)){var l=s[ht]||null;e:switch(s=i.stateNode,i.type){case"input":if(ka(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var c=l[i];if(c!==s&&c.form===s.form){var p=c[ht]||null;if(!p)throw Error(r(90));ka(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<l.length;i++)c=l[i],c.form===s.form&&su(c)}break e;case"textarea":au(s,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Vr(s,!!l.multiple,i,!1)}}}var Ma=!1;function du(s,i,l){if(Ma)return s(i,l);Ma=!0;try{var c=s(i);return c}finally{if(Ma=!1,(Gr!==null||Zr!==null)&&(sa(),Gr&&(i=Gr,s=Zr,Zr=Gr=null,cu(i),s)))for(i=0;i<s.length;i++)cu(s[i])}}function As(s,i){var l=s.stateNode;if(l===null)return null;var c=l[ht]||null;if(c===null)return null;l=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(r(231,i,typeof l));return l}var La=!1;if(Mn)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){La=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{La=!1}var Qn=null,ja=null,Si=null;function fu(){if(Si)return Si;var s,i=ja,l=i.length,c,p="value"in Qn?Qn.value:Qn.textContent,_=p.length;for(s=0;s<l&&i[s]===p[s];s++);var M=l-s;for(c=1;c<=M&&i[l-c]===p[_-c];c++);return Si=p.slice(s,1<c?1-c:void 0)}function Ti(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Ai(){return!0}function hu(){return!1}function nn(s){function i(l,c,p,_,M){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=_,this.target=M,this.currentTarget=null;for(var Y in s)s.hasOwnProperty(Y)&&(l=s[Y],this[Y]=l?l(_):_[Y]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ai:hu,this.isPropagationStopped=hu,this}return j(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),i}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=nn(Sr),xs=j({},Sr,{view:0,detail:0}),th=nn(xs),Fa,Ua,Cs,xi=j({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:za,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Cs&&(Cs&&s.type==="mousemove"?(Fa=s.screenX-Cs.screenX,Ua=s.screenY-Cs.screenY):Ua=Fa=0,Cs=s),Fa)},movementY:function(s){return"movementY"in s?s.movementY:Ua}}),pu=nn(xi),nh=j({},xi,{dataTransfer:0}),rh=nn(nh),sh=j({},xs,{relatedTarget:0}),Ba=nn(sh),ih=j({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=nn(ih),oh=j({},Sr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),lh=nn(oh),uh=j({},Sr,{data:0}),mu=nn(uh),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hh(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=fh[s])?!!i[s]:!1}function za(){return hh}var ph=j({},xs,{key:function(s){if(s.key){var i=ch[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Ti(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:za,charCode:function(s){return s.type==="keypress"?Ti(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ti(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mh=nn(ph),gh=j({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gu=nn(gh),yh=j({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:za}),_h=nn(yh),vh=j({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bh=nn(vh),Eh=j({},xi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Sh=nn(Eh),Th=j({},Sr,{newState:0,oldState:0}),Ah=nn(Th),wh=[9,13,27,32],$a=Mn&&"CompositionEvent"in window,Rs=null;Mn&&"documentMode"in document&&(Rs=document.documentMode);var xh=Mn&&"TextEvent"in window&&!Rs,yu=Mn&&(!$a||Rs&&8<Rs&&11>=Rs),_u=" ",vu=!1;function bu(s,i){switch(s){case"keyup":return wh.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Kr=!1;function Ch(s,i){switch(s){case"compositionend":return Eu(i);case"keypress":return i.which!==32?null:(vu=!0,_u);case"textInput":return s=i.data,s===_u&&vu?null:s;default:return null}}function Rh(s,i){if(Kr)return s==="compositionend"||!$a&&bu(s,i)?(s=fu(),Si=ja=Qn=null,Kr=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yu&&i.locale!=="ko"?null:i.data;default:return null}}var Oh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Oh[s.type]:i==="textarea"}function Tu(s,i,l,c){Gr?Zr?Zr.push(c):Zr=[c]:Gr=c,i=ua(i,"onChange"),0<i.length&&(l=new wi("onChange","change",null,l,c),s.push({event:l,listeners:i}))}var Os=null,ks=null;function kh(s){Yd(s,0)}function Ci(s){var i=Ts(s);if(su(i))return s}function Au(s,i){if(s==="change")return i}var wu=!1;if(Mn){var qa;if(Mn){var Va="oninput"in document;if(!Va){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),Va=typeof xu.oninput=="function"}qa=Va}else qa=!1;wu=qa&&(!document.documentMode||9<document.documentMode)}function Cu(){Os&&(Os.detachEvent("onpropertychange",Ru),ks=Os=null)}function Ru(s){if(s.propertyName==="value"&&Ci(ks)){var i=[];Tu(i,ks,s,Na(s)),du(kh,i)}}function Ph(s,i,l){s==="focusin"?(Cu(),Os=i,ks=l,Os.attachEvent("onpropertychange",Ru)):s==="focusout"&&Cu()}function Ih(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ci(ks)}function Dh(s,i){if(s==="click")return Ci(i)}function Nh(s,i){if(s==="input"||s==="change")return Ci(i)}function Mh(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var sn=typeof Object.is=="function"?Object.is:Mh;function Ps(s,i){if(sn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var l=Object.keys(s),c=Object.keys(i);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!ae.call(i,p)||!sn(s[p],i[p]))return!1}return!0}function Ou(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ku(s,i){var l=Ou(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=i&&c>=i)return{node:l,offset:i-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ou(l)}}function Pu(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Pu(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Iu(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=bi(s.document);i instanceof s.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)s=i.contentWindow;else break;i=bi(s.document)}return i}function Ha(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}function Lh(s,i){var l=Iu(i);i=s.focusedElem;var c=s.selectionRange;if(l!==i&&i&&i.ownerDocument&&Pu(i.ownerDocument.documentElement,i)){if(c!==null&&Ha(i)){if(s=c.start,l=c.end,l===void 0&&(l=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(l,i.value.length);else if(l=(s=i.ownerDocument||document)&&s.defaultView||window,l.getSelection){l=l.getSelection();var p=i.textContent.length,_=Math.min(c.start,p);c=c.end===void 0?_:Math.min(c.end,p),!l.extend&&_>c&&(p=c,c=_,_=p),p=ku(i,_);var M=ku(i,c);p&&M&&(l.rangeCount!==1||l.anchorNode!==p.node||l.anchorOffset!==p.offset||l.focusNode!==M.node||l.focusOffset!==M.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),l.removeAllRanges(),_>c?(l.addRange(s),l.extend(M.node,M.offset)):(s.setEnd(M.node,M.offset),l.addRange(s)))}}for(s=[],l=i;l=l.parentNode;)l.nodeType===1&&s.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)l=s[i],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var jh=Mn&&"documentMode"in document&&11>=document.documentMode,Yr=null,Ga=null,Is=null,Za=!1;function Du(s,i,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Za||Yr==null||Yr!==bi(c)||(c=Yr,"selectionStart"in c&&Ha(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Is&&Ps(Is,c)||(Is=c,c=ua(Ga,"onSelect"),0<c.length&&(i=new wi("onSelect","select",null,i,l),s.push({event:i,listeners:c}),i.target=Yr)))}function Tr(s,i){var l={};return l[s.toLowerCase()]=i.toLowerCase(),l["Webkit"+s]="webkit"+i,l["Moz"+s]="moz"+i,l}var Xr={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},Ka={},Nu={};Mn&&(Nu=document.createElement("div").style,"AnimationEvent"in window||(delete Xr.animationend.animation,delete Xr.animationiteration.animation,delete Xr.animationstart.animation),"TransitionEvent"in window||delete Xr.transitionend.transition);function Ar(s){if(Ka[s])return Ka[s];if(!Xr[s])return s;var i=Xr[s],l;for(l in i)if(i.hasOwnProperty(l)&&l in Nu)return Ka[s]=i[l];return s}var Mu=Ar("animationend"),Lu=Ar("animationiteration"),ju=Ar("animationstart"),Fh=Ar("transitionrun"),Uh=Ar("transitionstart"),Bh=Ar("transitioncancel"),Fu=Ar("transitionend"),Uu=new Map,Bu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function An(s,i){Uu.set(s,i),Er(i,[s])}var hn=[],Wr=0,Ya=0;function Ri(){for(var s=Wr,i=Ya=Wr=0;i<s;){var l=hn[i];hn[i++]=null;var c=hn[i];hn[i++]=null;var p=hn[i];hn[i++]=null;var _=hn[i];if(hn[i++]=null,c!==null&&p!==null){var M=c.pending;M===null?p.next=p:(p.next=M.next,M.next=p),c.pending=p}_!==0&&zu(l,p,_)}}function Oi(s,i,l,c){hn[Wr++]=s,hn[Wr++]=i,hn[Wr++]=l,hn[Wr++]=c,Ya|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Xa(s,i,l,c){return Oi(s,i,l,c),ki(s)}function er(s,i){return Oi(s,null,null,i),ki(s)}function zu(s,i,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var p=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(p=!0)),s=_,_=_.return;p&&i!==null&&s.tag===3&&(_=s.stateNode,p=31-Ct(l),_=_.hiddenUpdates,s=_[p],s===null?_[p]=[i]:s.push(i),i.lane=l|536870912)}function ki(s){if(50<ri)throw ri=0,rl=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Jr={},$u=new WeakMap;function pn(s,i){if(typeof s=="object"&&s!==null){var l=$u.get(s);return l!==void 0?l:(i={value:s,source:i,stack:J(i)},$u.set(s,i),i)}return{value:s,source:i,stack:J(i)}}var Qr=[],es=0,Pi=null,Ii=0,mn=[],gn=0,wr=null,jn=1,Fn="";function xr(s,i){Qr[es++]=Ii,Qr[es++]=Pi,Pi=s,Ii=i}function qu(s,i,l){mn[gn++]=jn,mn[gn++]=Fn,mn[gn++]=wr,wr=s;var c=jn;s=Fn;var p=32-Ct(c)-1;c&=~(1<<p),l+=1;var _=32-Ct(i)+p;if(30<_){var M=p-p%5;_=(c&(1<<M)-1).toString(32),c>>=M,p-=M,jn=1<<32-Ct(i)+p|l<<p|c,Fn=_+s}else jn=1<<_|l<<p|c,Fn=s}function Wa(s){s.return!==null&&(xr(s,1),qu(s,1,0))}function Ja(s){for(;s===Pi;)Pi=Qr[--es],Qr[es]=null,Ii=Qr[--es],Qr[es]=null;for(;s===wr;)wr=mn[--gn],mn[gn]=null,Fn=mn[--gn],mn[gn]=null,jn=mn[--gn],mn[gn]=null}var en=null,Kt=null,mt=!1,wn=null,On=!1,Qa=Error(r(519));function Cr(s){var i=Error(r(418,""));throw Ms(pn(i,s)),Qa}function Vu(s){var i=s.stateNode,l=s.type,c=s.memoizedProps;switch(i[et]=s,i[ht]=c,l){case"dialog":dt("cancel",i),dt("close",i);break;case"iframe":case"object":case"embed":dt("load",i);break;case"video":case"audio":for(l=0;l<ii.length;l++)dt(ii[l],i);break;case"source":dt("error",i);break;case"img":case"image":case"link":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"input":dt("invalid",i),iu(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),vi(i);break;case"select":dt("invalid",i);break;case"textarea":dt("invalid",i),ou(i,c.value,c.defaultValue,c.children),vi(i)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||c.suppressHydrationWarning===!0||Qd(i.textContent,l)?(c.popover!=null&&(dt("beforetoggle",i),dt("toggle",i)),c.onScroll!=null&&dt("scroll",i),c.onScrollEnd!=null&&dt("scrollend",i),c.onClick!=null&&(i.onclick=ca),i=!0):i=!1,i||Cr(s)}function Hu(s){for(en=s.return;en;)switch(en.tag){case 3:case 27:On=!0;return;case 5:case 13:On=!1;return;default:en=en.return}}function Ds(s){if(s!==en)return!1;if(!mt)return Hu(s),mt=!0,!1;var i=!1,l;if((l=s.tag!==3&&s.tag!==27)&&((l=s.tag===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||bl(s.type,s.memoizedProps)),l=!l),l&&(i=!0),i&&Kt&&Cr(s),Hu(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(l=s.data,l==="/$"){if(i===0){Kt=Cn(s.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;s=s.nextSibling}Kt=null}}else Kt=en?Cn(s.stateNode.nextSibling):null;return!0}function Ns(){Kt=en=null,mt=!1}function Ms(s){wn===null?wn=[s]:wn.push(s)}var Ls=Error(r(460)),Gu=Error(r(474)),eo={then:function(){}};function Zu(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Di(){}function Ku(s,i,l){switch(l=s[l],l===void 0?s.push(i):l!==i&&(i.then(Di,Di),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,s===Ls?Error(r(483)):s;default:if(typeof i.status=="string")i.then(Di,Di);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(c){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=c}},function(c){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,s===Ls?Error(r(483)):s}throw js=i,Ls}}var js=null;function Yu(){if(js===null)throw Error(r(459));var s=js;return js=null,s}var ts=null,Fs=0;function Ni(s){var i=Fs;return Fs+=1,ts===null&&(ts=[]),Ku(ts,s,i)}function Us(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Mi(s,i){throw i.$$typeof===o?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function Xu(s){var i=s._init;return i(s._payload)}function Wu(s){function i(be,me){if(s){var Se=be.deletions;Se===null?(be.deletions=[me],be.flags|=16):Se.push(me)}}function l(be,me){if(!s)return null;for(;me!==null;)i(be,me),me=me.sibling;return null}function c(be){for(var me=new Map;be!==null;)be.key!==null?me.set(be.key,be):me.set(be.index,be),be=be.sibling;return me}function p(be,me){return be=fr(be,me),be.index=0,be.sibling=null,be}function _(be,me,Se){return be.index=Se,s?(Se=be.alternate,Se!==null?(Se=Se.index,Se<me?(be.flags|=33554434,me):Se):(be.flags|=33554434,me)):(be.flags|=1048576,me)}function M(be){return s&&be.alternate===null&&(be.flags|=33554434),be}function Y(be,me,Se,Oe){return me===null||me.tag!==6?(me=Yo(Se,be.mode,Oe),me.return=be,me):(me=p(me,Se),me.return=be,me)}function ce(be,me,Se,Oe){var $e=Se.type;return $e===d?Re(be,me,Se.props.children,Oe,Se.key):me!==null&&(me.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&Xu($e)===me.type)?(me=p(me,Se.props),Us(me,Se),me.return=be,me):(me=Qi(Se.type,Se.key,Se.props,null,be.mode,Oe),Us(me,Se),me.return=be,me)}function ge(be,me,Se,Oe){return me===null||me.tag!==4||me.stateNode.containerInfo!==Se.containerInfo||me.stateNode.implementation!==Se.implementation?(me=Xo(Se,be.mode,Oe),me.return=be,me):(me=p(me,Se.children||[]),me.return=be,me)}function Re(be,me,Se,Oe,$e){return me===null||me.tag!==7?(me=jr(Se,be.mode,Oe,$e),me.return=be,me):(me=p(me,Se),me.return=be,me)}function Pe(be,me,Se){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return me=Yo(""+me,be.mode,Se),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case u:return Se=Qi(me.type,me.key,me.props,null,be.mode,Se),Us(Se,me),Se.return=be,Se;case h:return me=Xo(me,be.mode,Se),me.return=be,me;case R:var Oe=me._init;return me=Oe(me._payload),Pe(be,me,Se)}if(N(me)||O(me))return me=jr(me,be.mode,Se,null),me.return=be,me;if(typeof me.then=="function")return Pe(be,Ni(me),Se);if(me.$$typeof===w)return Pe(be,Xi(be,me),Se);Mi(be,me)}return null}function Ae(be,me,Se,Oe){var $e=me!==null?me.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return $e!==null?null:Y(be,me,""+Se,Oe);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case u:return Se.key===$e?ce(be,me,Se,Oe):null;case h:return Se.key===$e?ge(be,me,Se,Oe):null;case R:return $e=Se._init,Se=$e(Se._payload),Ae(be,me,Se,Oe)}if(N(Se)||O(Se))return $e!==null?null:Re(be,me,Se,Oe,null);if(typeof Se.then=="function")return Ae(be,me,Ni(Se),Oe);if(Se.$$typeof===w)return Ae(be,me,Xi(be,Se),Oe);Mi(be,Se)}return null}function Ce(be,me,Se,Oe,$e){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return be=be.get(Se)||null,Y(me,be,""+Oe,$e);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case u:return be=be.get(Oe.key===null?Se:Oe.key)||null,ce(me,be,Oe,$e);case h:return be=be.get(Oe.key===null?Se:Oe.key)||null,ge(me,be,Oe,$e);case R:var at=Oe._init;return Oe=at(Oe._payload),Ce(be,me,Se,Oe,$e)}if(N(Oe)||O(Oe))return be=be.get(Se)||null,Re(me,be,Oe,$e,null);if(typeof Oe.then=="function")return Ce(be,me,Se,Ni(Oe),$e);if(Oe.$$typeof===w)return Ce(be,me,Se,Xi(me,Oe),$e);Mi(me,Oe)}return null}function He(be,me,Se,Oe){for(var $e=null,at=null,Ge=me,Ke=me=0,Gt=null;Ge!==null&&Ke<Se.length;Ke++){Ge.index>Ke?(Gt=Ge,Ge=null):Gt=Ge.sibling;var gt=Ae(be,Ge,Se[Ke],Oe);if(gt===null){Ge===null&&(Ge=Gt);break}s&&Ge&&gt.alternate===null&&i(be,Ge),me=_(gt,me,Ke),at===null?$e=gt:at.sibling=gt,at=gt,Ge=Gt}if(Ke===Se.length)return l(be,Ge),mt&&xr(be,Ke),$e;if(Ge===null){for(;Ke<Se.length;Ke++)Ge=Pe(be,Se[Ke],Oe),Ge!==null&&(me=_(Ge,me,Ke),at===null?$e=Ge:at.sibling=Ge,at=Ge);return mt&&xr(be,Ke),$e}for(Ge=c(Ge);Ke<Se.length;Ke++)Gt=Ce(Ge,be,Ke,Se[Ke],Oe),Gt!==null&&(s&&Gt.alternate!==null&&Ge.delete(Gt.key===null?Ke:Gt.key),me=_(Gt,me,Ke),at===null?$e=Gt:at.sibling=Gt,at=Gt);return s&&Ge.forEach(function(vr){return i(be,vr)}),mt&&xr(be,Ke),$e}function Je(be,me,Se,Oe){if(Se==null)throw Error(r(151));for(var $e=null,at=null,Ge=me,Ke=me=0,Gt=null,gt=Se.next();Ge!==null&&!gt.done;Ke++,gt=Se.next()){Ge.index>Ke?(Gt=Ge,Ge=null):Gt=Ge.sibling;var vr=Ae(be,Ge,gt.value,Oe);if(vr===null){Ge===null&&(Ge=Gt);break}s&&Ge&&vr.alternate===null&&i(be,Ge),me=_(vr,me,Ke),at===null?$e=vr:at.sibling=vr,at=vr,Ge=Gt}if(gt.done)return l(be,Ge),mt&&xr(be,Ke),$e;if(Ge===null){for(;!gt.done;Ke++,gt=Se.next())gt=Pe(be,gt.value,Oe),gt!==null&&(me=_(gt,me,Ke),at===null?$e=gt:at.sibling=gt,at=gt);return mt&&xr(be,Ke),$e}for(Ge=c(Ge);!gt.done;Ke++,gt=Se.next())gt=Ce(Ge,be,Ke,gt.value,Oe),gt!==null&&(s&&gt.alternate!==null&&Ge.delete(gt.key===null?Ke:gt.key),me=_(gt,me,Ke),at===null?$e=gt:at.sibling=gt,at=gt);return s&&Ge.forEach(function(em){return i(be,em)}),mt&&xr(be,Ke),$e}function It(be,me,Se,Oe){if(typeof Se=="object"&&Se!==null&&Se.type===d&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case u:e:{for(var $e=Se.key;me!==null;){if(me.key===$e){if($e=Se.type,$e===d){if(me.tag===7){l(be,me.sibling),Oe=p(me,Se.props.children),Oe.return=be,be=Oe;break e}}else if(me.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===R&&Xu($e)===me.type){l(be,me.sibling),Oe=p(me,Se.props),Us(Oe,Se),Oe.return=be,be=Oe;break e}l(be,me);break}else i(be,me);me=me.sibling}Se.type===d?(Oe=jr(Se.props.children,be.mode,Oe,Se.key),Oe.return=be,be=Oe):(Oe=Qi(Se.type,Se.key,Se.props,null,be.mode,Oe),Us(Oe,Se),Oe.return=be,be=Oe)}return M(be);case h:e:{for($e=Se.key;me!==null;){if(me.key===$e)if(me.tag===4&&me.stateNode.containerInfo===Se.containerInfo&&me.stateNode.implementation===Se.implementation){l(be,me.sibling),Oe=p(me,Se.children||[]),Oe.return=be,be=Oe;break e}else{l(be,me);break}else i(be,me);me=me.sibling}Oe=Xo(Se,be.mode,Oe),Oe.return=be,be=Oe}return M(be);case R:return $e=Se._init,Se=$e(Se._payload),It(be,me,Se,Oe)}if(N(Se))return He(be,me,Se,Oe);if(O(Se)){if($e=O(Se),typeof $e!="function")throw Error(r(150));return Se=$e.call(Se),Je(be,me,Se,Oe)}if(typeof Se.then=="function")return It(be,me,Ni(Se),Oe);if(Se.$$typeof===w)return It(be,me,Xi(be,Se),Oe);Mi(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,me!==null&&me.tag===6?(l(be,me.sibling),Oe=p(me,Se),Oe.return=be,be=Oe):(l(be,me),Oe=Yo(Se,be.mode,Oe),Oe.return=be,be=Oe),M(be)):l(be,me)}return function(be,me,Se,Oe){try{Fs=0;var $e=It(be,me,Se,Oe);return ts=null,$e}catch(Ge){if(Ge===Ls)throw Ge;var at=bn(29,Ge,null,be.mode);return at.lanes=Oe,at.return=be,at}finally{}}}var Rr=Wu(!0),Ju=Wu(!1),ns=X(null),Li=X(0);function Qu(s,i){s=Yn,L(Li,s),L(ns,i),Yn=s|i.baseLanes}function to(){L(Li,Yn),L(ns,ns.current)}function no(){Yn=Li.current,C(ns),C(Li)}var yn=X(null),kn=null;function tr(s){var i=s.alternate;L(Ut,Ut.current&1),L(yn,s),kn===null&&(i===null||ns.current!==null||i.memoizedState!==null)&&(kn=s)}function ec(s){if(s.tag===22){if(L(Ut,Ut.current),L(yn,s),kn===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(kn=s)}}else nr()}function nr(){L(Ut,Ut.current),L(yn,yn.current)}function Un(s){C(yn),kn===s&&(kn=null),C(Ut)}var Ut=X(0);function ji(s){for(var i=s;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var zh=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){i.aborted=!0,s.forEach(function(l){return l()})}},$h=t.unstable_scheduleCallback,qh=t.unstable_NormalPriority,Bt={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ro(){return{controller:new zh,data:new Map,refCount:0}}function Bs(s){s.refCount--,s.refCount===0&&$h(qh,function(){s.controller.abort()})}var zs=null,so=0,rs=0,ss=null;function Vh(s,i){if(zs===null){var l=zs=[];so=0,rs=dl(),ss={status:"pending",value:void 0,then:function(c){l.push(c)}}}return so++,i.then(tc,tc),i}function tc(){if(--so===0&&zs!==null){ss!==null&&(ss.status="fulfilled");var s=zs;zs=null,rs=0,ss=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function Hh(s,i){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return s.then(function(){c.status="fulfilled",c.value=i;for(var p=0;p<l.length;p++)(0,l[p])(i)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var nc=P.S;P.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vh(s,i),nc!==null&&nc(s,i)};var Or=X(null);function io(){var s=Or.current;return s!==null?s:At.pooledCache}function Fi(s,i){i===null?L(Or,Or.current):L(Or,i.pool)}function rc(){var s=io();return s===null?null:{parent:Bt._currentValue,pool:s}}var rr=0,st=null,vt=null,Lt=null,Ui=!1,is=!1,kr=!1,Bi=0,$s=0,as=null,Gh=0;function Mt(){throw Error(r(321))}function ao(s,i){if(i===null)return!1;for(var l=0;l<i.length&&l<s.length;l++)if(!sn(s[l],i[l]))return!1;return!0}function oo(s,i,l,c,p,_){return rr=_,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=s===null||s.memoizedState===null?Pr:sr,kr=!1,_=l(c,p),kr=!1,is&&(_=ic(i,l,c,p)),sc(s),_}function sc(s){P.H=Pn;var i=vt!==null&&vt.next!==null;if(rr=0,Lt=vt=st=null,Ui=!1,$s=0,as=null,i)throw Error(r(300));s===null||Vt||(s=s.dependencies,s!==null&&Yi(s)&&(Vt=!0))}function ic(s,i,l,c){st=s;var p=0;do{if(is&&(as=null),$s=0,is=!1,25<=p)throw Error(r(301));if(p+=1,Lt=vt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}P.H=Ir,_=i(l,c)}while(is);return _}function Zh(){var s=P.H,i=s.useState()[0];return i=typeof i.then=="function"?qs(i):i,s=s.useState()[0],(vt!==null?vt.memoizedState:null)!==s&&(st.flags|=1024),i}function lo(){var s=Bi!==0;return Bi=0,s}function uo(s,i,l){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~l}function co(s){if(Ui){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Ui=!1}rr=0,Lt=vt=st=null,is=!1,$s=Bi=0,as=null}function rn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?st.memoizedState=Lt=s:Lt=Lt.next=s,Lt}function jt(){if(vt===null){var s=st.alternate;s=s!==null?s.memoizedState:null}else s=vt.next;var i=Lt===null?st.memoizedState:Lt.next;if(i!==null)Lt=i,vt=s;else{if(s===null)throw st.alternate===null?Error(r(467)):Error(r(310));vt=s,s={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Lt===null?st.memoizedState=Lt=s:Lt=Lt.next=s}return Lt}var zi;zi=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function qs(s){var i=$s;return $s+=1,as===null&&(as=[]),s=Ku(as,s,i),i=st,(Lt===null?i.memoizedState:Lt.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?Pr:sr),s}function $i(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return qs(s);if(s.$$typeof===w)return Wt(s)}throw Error(r(438,String(s)))}function fo(s){var i=null,l=st.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var c=st.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=zi(),st.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(s),c=0;c<s;c++)l[c]=x;return i.index++,l}function Bn(s,i){return typeof i=="function"?i(s):i}function qi(s){var i=jt();return ho(i,vt,s)}function ho(s,i,l){var c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var p=s.baseQueue,_=c.pending;if(_!==null){if(p!==null){var M=p.next;p.next=_.next,_.next=M}i.baseQueue=p=_,c.pending=null}if(_=s.baseState,p===null)s.memoizedState=_;else{i=p.next;var Y=M=null,ce=null,ge=i,Re=!1;do{var Pe=ge.lane&-536870913;if(Pe!==ge.lane?(ft&Pe)===Pe:(rr&Pe)===Pe){var Ae=ge.revertLane;if(Ae===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Pe===rs&&(Re=!0);else if((rr&Ae)===Ae){ge=ge.next,Ae===rs&&(Re=!0);continue}else Pe={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ce===null?(Y=ce=Pe,M=_):ce=ce.next=Pe,st.lanes|=Ae,hr|=Ae;Pe=ge.action,kr&&l(_,Pe),_=ge.hasEagerState?ge.eagerState:l(_,Pe)}else Ae={lane:Pe,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ce===null?(Y=ce=Ae,M=_):ce=ce.next=Ae,st.lanes|=Pe,hr|=Pe;ge=ge.next}while(ge!==null&&ge!==i);if(ce===null?M=_:ce.next=Y,!sn(_,s.memoizedState)&&(Vt=!0,Re&&(l=ss,l!==null)))throw l;s.memoizedState=_,s.baseState=M,s.baseQueue=ce,c.lastRenderedState=_}return p===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function po(s){var i=jt(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var c=l.dispatch,p=l.pending,_=i.memoizedState;if(p!==null){l.pending=null;var M=p=p.next;do _=s(_,M.action),M=M.next;while(M!==p);sn(_,i.memoizedState)||(Vt=!0),i.memoizedState=_,i.baseQueue===null&&(i.baseState=_),l.lastRenderedState=_}return[_,c]}function ac(s,i,l){var c=st,p=jt(),_=mt;if(_){if(l===void 0)throw Error(r(407));l=l()}else l=i();var M=!sn((vt||p).memoizedState,l);if(M&&(p.memoizedState=l,Vt=!0),p=p.queue,yo(uc.bind(null,c,p,s),[s]),p.getSnapshot!==i||M||Lt!==null&&Lt.memoizedState.tag&1){if(c.flags|=2048,os(9,lc.bind(null,c,p,l,i),{destroy:void 0},null),At===null)throw Error(r(349));_||rr&60||oc(c,i,l)}return l}function oc(s,i,l){s.flags|=16384,s={getSnapshot:i,value:l},i=st.updateQueue,i===null?(i=zi(),st.updateQueue=i,i.stores=[s]):(l=i.stores,l===null?i.stores=[s]:l.push(s))}function lc(s,i,l,c){i.value=l,i.getSnapshot=c,cc(i)&&dc(s)}function uc(s,i,l){return l(function(){cc(i)&&dc(s)})}function cc(s){var i=s.getSnapshot;s=s.value;try{var l=i();return!sn(s,l)}catch{return!0}}function dc(s){var i=er(s,2);i!==null&&tn(i,s,2)}function mo(s){var i=rn();if(typeof s=="function"){var l=s;if(s=l(),kr){Zt(!0);try{l()}finally{Zt(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:s},i}function fc(s,i,l,c){return s.baseState=l,ho(s,vt,typeof c=="function"?c:Bn)}function Kh(s,i,l,c,p){if(Gi(s))throw Error(r(485));if(s=i.action,s!==null){var _={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){_.listeners.push(M)}};P.T!==null?l(!0):_.isTransition=!1,c(_),l=i.pending,l===null?(_.next=i.pending=_,hc(i,_)):(_.next=l.next,i.pending=l.next=_)}}function hc(s,i){var l=i.action,c=i.payload,p=s.state;if(i.isTransition){var _=P.T,M={};P.T=M;try{var Y=l(p,c),ce=P.S;ce!==null&&ce(M,Y),pc(s,i,Y)}catch(ge){go(s,i,ge)}finally{P.T=_}}else try{_=l(p,c),pc(s,i,_)}catch(ge){go(s,i,ge)}}function pc(s,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){mc(s,i,c)},function(c){return go(s,i,c)}):mc(s,i,l)}function mc(s,i,l){i.status="fulfilled",i.value=l,gc(i),s.state=l,i=s.pending,i!==null&&(l=i.next,l===i?s.pending=null:(l=l.next,i.next=l,hc(s,l)))}function go(s,i,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=l,gc(i),i=i.next;while(i!==c)}s.action=null}function gc(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function yc(s,i){return i}function _c(s,i){if(mt){var l=At.formState;if(l!==null){e:{var c=st;if(mt){if(Kt){t:{for(var p=Kt,_=On;p.nodeType!==8;){if(!_){p=null;break t}if(p=Cn(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){Kt=Cn(p.nextSibling),c=p.data==="F!";break e}}Cr(c)}c=!1}c&&(i=l[0])}}return l=rn(),l.memoizedState=l.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:i},l.queue=c,l=Lc.bind(null,st,c),c.dispatch=l,c=mo(!1),_=So.bind(null,st,!1,c.queue),c=rn(),p={state:i,dispatch:null,action:s,pending:null},c.queue=p,l=Kh.bind(null,st,p,_,l),p.dispatch=l,c.memoizedState=s,[i,l,!1]}function vc(s){var i=jt();return bc(i,vt,s)}function bc(s,i,l){i=ho(s,i,yc)[0],s=qi(Bn)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?qs(i):i;var c=jt(),p=c.queue,_=p.dispatch;return l!==c.memoizedState&&(st.flags|=2048,os(9,Yh.bind(null,p,l),{destroy:void 0},null)),[i,_,s]}function Yh(s,i){s.action=i}function Ec(s){var i=jt(),l=vt;if(l!==null)return bc(i,l,s);jt(),i=i.memoizedState,l=jt();var c=l.queue.dispatch;return l.memoizedState=s,[i,c,!1]}function os(s,i,l,c){return s={tag:s,create:i,inst:l,deps:c,next:null},i=st.updateQueue,i===null&&(i=zi(),st.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,i.lastEffect=s),s}function Sc(){return jt().memoizedState}function Vi(s,i,l,c){var p=rn();st.flags|=s,p.memoizedState=os(1|i,l,{destroy:void 0},c===void 0?null:c)}function Hi(s,i,l,c){var p=jt();c=c===void 0?null:c;var _=p.memoizedState.inst;vt!==null&&c!==null&&ao(c,vt.memoizedState.deps)?p.memoizedState=os(i,l,_,c):(st.flags|=s,p.memoizedState=os(1|i,l,_,c))}function Tc(s,i){Vi(8390656,8,s,i)}function yo(s,i){Hi(2048,8,s,i)}function Ac(s,i){return Hi(4,2,s,i)}function wc(s,i){return Hi(4,4,s,i)}function xc(s,i){if(typeof i=="function"){s=s();var l=i(s);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Cc(s,i,l){l=l!=null?l.concat([s]):null,Hi(4,4,xc.bind(null,i,s),l)}function _o(){}function Rc(s,i){var l=jt();i=i===void 0?null:i;var c=l.memoizedState;return i!==null&&ao(i,c[1])?c[0]:(l.memoizedState=[s,i],s)}function Oc(s,i){var l=jt();i=i===void 0?null:i;var c=l.memoizedState;if(i!==null&&ao(i,c[1]))return c[0];if(c=s(),kr){Zt(!0);try{s()}finally{Zt(!1)}}return l.memoizedState=[c,i],c}function vo(s,i,l){return l===void 0||rr&1073741824?s.memoizedState=i:(s.memoizedState=l,s=Pd(),st.lanes|=s,hr|=s,l)}function kc(s,i,l,c){return sn(l,i)?l:ns.current!==null?(s=vo(s,l,c),sn(s,i)||(Vt=!0),s):rr&42?(s=Pd(),st.lanes|=s,hr|=s,i):(Vt=!0,s.memoizedState=l)}function Pc(s,i,l,c,p){var _=D.p;D.p=_!==0&&8>_?_:8;var M=P.T,Y={};P.T=Y,So(s,!1,i,l);try{var ce=p(),ge=P.S;if(ge!==null&&ge(Y,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Re=Hh(ce,c);Vs(s,i,Re,un(s))}else Vs(s,i,c,un(s))}catch(Pe){Vs(s,i,{then:function(){},status:"rejected",reason:Pe},un())}finally{D.p=_,P.T=M}}function Xh(){}function bo(s,i,l,c){if(s.tag!==5)throw Error(r(476));var p=Ic(s).queue;Pc(s,p,i,V,l===null?Xh:function(){return Dc(s),l(c)})}function Ic(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:V},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:l},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Dc(s){var i=Ic(s).next.queue;Vs(s,i,{},un())}function Eo(){return Wt(ci)}function Nc(){return jt().memoizedState}function Mc(){return jt().memoizedState}function Wh(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var l=un();s=or(l);var c=lr(i,s,l);c!==null&&(tn(c,i,l),Zs(c,i,l)),i={cache:ro()},s.payload=i;return}i=i.return}}function Jh(s,i,l){var c=un();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Gi(s)?jc(i,l):(l=Xa(s,i,l,c),l!==null&&(tn(l,s,c),Fc(l,i,c)))}function Lc(s,i,l){var c=un();Vs(s,i,l,c)}function Vs(s,i,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Gi(s))jc(i,p);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=i.lastRenderedReducer,_!==null))try{var M=i.lastRenderedState,Y=_(M,l);if(p.hasEagerState=!0,p.eagerState=Y,sn(Y,M))return Oi(s,i,p,0),At===null&&Ri(),!1}catch{}finally{}if(l=Xa(s,i,p,c),l!==null)return tn(l,s,c),Fc(l,i,c),!0}return!1}function So(s,i,l,c){if(c={lane:2,revertLane:dl(),action:c,hasEagerState:!1,eagerState:null,next:null},Gi(s)){if(i)throw Error(r(479))}else i=Xa(s,l,c,2),i!==null&&tn(i,s,2)}function Gi(s){var i=s.alternate;return s===st||i!==null&&i===st}function jc(s,i){is=Ui=!0;var l=s.pending;l===null?i.next=i:(i.next=l.next,l.next=i),s.pending=i}function Fc(s,i,l){if(l&4194176){var c=i.lanes;c&=s.pendingLanes,l|=c,i.lanes=l,_t(s,l)}}var Pn={readContext:Wt,use:$i,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt};Pn.useCacheRefresh=Mt,Pn.useMemoCache=Mt,Pn.useHostTransitionStatus=Mt,Pn.useFormState=Mt,Pn.useActionState=Mt,Pn.useOptimistic=Mt;var Pr={readContext:Wt,use:$i,useCallback:function(s,i){return rn().memoizedState=[s,i===void 0?null:i],s},useContext:Wt,useEffect:Tc,useImperativeHandle:function(s,i,l){l=l!=null?l.concat([s]):null,Vi(4194308,4,xc.bind(null,i,s),l)},useLayoutEffect:function(s,i){return Vi(4194308,4,s,i)},useInsertionEffect:function(s,i){Vi(4,2,s,i)},useMemo:function(s,i){var l=rn();i=i===void 0?null:i;var c=s();if(kr){Zt(!0);try{s()}finally{Zt(!1)}}return l.memoizedState=[c,i],c},useReducer:function(s,i,l){var c=rn();if(l!==void 0){var p=l(i);if(kr){Zt(!0);try{l(i)}finally{Zt(!1)}}}else p=i;return c.memoizedState=c.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},c.queue=s,s=s.dispatch=Jh.bind(null,st,s),[c.memoizedState,s]},useRef:function(s){var i=rn();return s={current:s},i.memoizedState=s},useState:function(s){s=mo(s);var i=s.queue,l=Lc.bind(null,st,i);return i.dispatch=l,[s.memoizedState,l]},useDebugValue:_o,useDeferredValue:function(s,i){var l=rn();return vo(l,s,i)},useTransition:function(){var s=mo(!1);return s=Pc.bind(null,st,s.queue,!0,!1),rn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,l){var c=st,p=rn();if(mt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),At===null)throw Error(r(349));ft&60||oc(c,i,l)}p.memoizedState=l;var _={value:l,getSnapshot:i};return p.queue=_,Tc(uc.bind(null,c,_,s),[s]),c.flags|=2048,os(9,lc.bind(null,c,_,l,i),{destroy:void 0},null),l},useId:function(){var s=rn(),i=At.identifierPrefix;if(mt){var l=Fn,c=jn;l=(c&~(1<<32-Ct(c)-1)).toString(32)+l,i=":"+i+"R"+l,l=Bi++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Gh++,i=":"+i+"r"+l.toString(32)+":";return s.memoizedState=i},useCacheRefresh:function(){return rn().memoizedState=Wh.bind(null,st)}};Pr.useMemoCache=fo,Pr.useHostTransitionStatus=Eo,Pr.useFormState=_c,Pr.useActionState=_c,Pr.useOptimistic=function(s){var i=rn();i.memoizedState=i.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=So.bind(null,st,!0,l),l.dispatch=i,[s,i]};var sr={readContext:Wt,use:$i,useCallback:Rc,useContext:Wt,useEffect:yo,useImperativeHandle:Cc,useInsertionEffect:Ac,useLayoutEffect:wc,useMemo:Oc,useReducer:qi,useRef:Sc,useState:function(){return qi(Bn)},useDebugValue:_o,useDeferredValue:function(s,i){var l=jt();return kc(l,vt.memoizedState,s,i)},useTransition:function(){var s=qi(Bn)[0],i=jt().memoizedState;return[typeof s=="boolean"?s:qs(s),i]},useSyncExternalStore:ac,useId:Nc};sr.useCacheRefresh=Mc,sr.useMemoCache=fo,sr.useHostTransitionStatus=Eo,sr.useFormState=vc,sr.useActionState=vc,sr.useOptimistic=function(s,i){var l=jt();return fc(l,vt,s,i)};var Ir={readContext:Wt,use:$i,useCallback:Rc,useContext:Wt,useEffect:yo,useImperativeHandle:Cc,useInsertionEffect:Ac,useLayoutEffect:wc,useMemo:Oc,useReducer:po,useRef:Sc,useState:function(){return po(Bn)},useDebugValue:_o,useDeferredValue:function(s,i){var l=jt();return vt===null?vo(l,s,i):kc(l,vt.memoizedState,s,i)},useTransition:function(){var s=po(Bn)[0],i=jt().memoizedState;return[typeof s=="boolean"?s:qs(s),i]},useSyncExternalStore:ac,useId:Nc};Ir.useCacheRefresh=Mc,Ir.useMemoCache=fo,Ir.useHostTransitionStatus=Eo,Ir.useFormState=Ec,Ir.useActionState=Ec,Ir.useOptimistic=function(s,i){var l=jt();return vt!==null?fc(l,vt,s,i):(l.baseState=s,[s,l.queue.dispatch])};function To(s,i,l,c){i=s.memoizedState,l=l(c,i),l=l==null?i:j({},i,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Ao={isMounted:function(s){return(s=s._reactInternals)?se(s)===s:!1},enqueueSetState:function(s,i,l){s=s._reactInternals;var c=un(),p=or(c);p.payload=i,l!=null&&(p.callback=l),i=lr(s,p,c),i!==null&&(tn(i,s,c),Zs(i,s,c))},enqueueReplaceState:function(s,i,l){s=s._reactInternals;var c=un(),p=or(c);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=lr(s,p,c),i!==null&&(tn(i,s,c),Zs(i,s,c))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var l=un(),c=or(l);c.tag=2,i!=null&&(c.callback=i),i=lr(s,c,l),i!==null&&(tn(i,s,l),Zs(i,s,l))}};function Uc(s,i,l,c,p,_,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,M):i.prototype&&i.prototype.isPureReactComponent?!Ps(l,c)||!Ps(p,_):!0}function Bc(s,i,l,c){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,c),i.state!==s&&Ao.enqueueReplaceState(i,i.state,null)}function Dr(s,i){var l=i;if("ref"in i){l={};for(var c in i)c!=="ref"&&(l[c]=i[c])}if(s=s.defaultProps){l===i&&(l=j({},l));for(var p in s)l[p]===void 0&&(l[p]=s[p])}return l}var Zi=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function zc(s){Zi(s)}function $c(s){console.error(s)}function qc(s){Zi(s)}function Ki(s,i){try{var l=s.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Vc(s,i,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function wo(s,i,l){return l=or(l),l.tag=3,l.payload={element:null},l.callback=function(){Ki(s,i)},l}function Hc(s){return s=or(s),s.tag=3,s}function Gc(s,i,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=c.value;s.payload=function(){return p(_)},s.callback=function(){Vc(i,l,c)}}var M=l.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){Vc(i,l,c),typeof p!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var Y=c.stack;this.componentDidCatch(c.value,{componentStack:Y!==null?Y:""})})}function Qh(s,i,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=l.alternate,i!==null&&Gs(i,l,p,!0),l=yn.current,l!==null){switch(l.tag){case 13:return kn===null?al():l.alternate===null&&Pt===0&&(Pt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===eo?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([c]):i.add(c),ll(s,c,p)),!1;case 22:return l.flags|=65536,c===eo?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([c]):l.add(c)),ll(s,c,p)),!1}throw Error(r(435,l.tag))}return ll(s,c,p),al(),!1}if(mt)return i=yn.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=p,c!==Qa&&(s=Error(r(422),{cause:c}),Ms(pn(s,l)))):(c!==Qa&&(i=Error(r(423),{cause:c}),Ms(pn(i,l))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,c=pn(c,l),p=wo(s.stateNode,c,p),Bo(s,p),Pt!==4&&(Pt=2)),!1;var _=Error(r(520),{cause:c});if(_=pn(_,l),ti===null?ti=[_]:ti.push(_),Pt!==4&&(Pt=2),i===null)return!0;c=pn(c,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,s=p&-p,l.lanes|=s,s=wo(l.stateNode,c,s),Bo(l,s),!1;case 1:if(i=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(pr===null||!pr.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Hc(p),Gc(p,s,l,c),Bo(l,p),!1}l=l.return}while(l!==null);return!1}var Zc=Error(r(461)),Vt=!1;function Yt(s,i,l,c){i.child=s===null?Ju(i,null,l,c):Rr(i,s.child,l,c)}function Kc(s,i,l,c,p){l=l.render;var _=i.ref;if("ref"in c){var M={};for(var Y in c)Y!=="ref"&&(M[Y]=c[Y])}else M=c;return Mr(i),c=oo(s,i,l,M,_,p),Y=lo(),s!==null&&!Vt?(uo(s,i,p),zn(s,i,p)):(mt&&Y&&Wa(i),i.flags|=1,Yt(s,i,c,p),i.child)}function Yc(s,i,l,c,p){if(s===null){var _=l.type;return typeof _=="function"&&!Ko(_)&&_.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=_,Xc(s,i,_,c,p)):(s=Qi(l.type,null,c,i,i.mode,p),s.ref=i.ref,s.return=i,i.child=s)}if(_=s.child,!No(s,p)){var M=_.memoizedProps;if(l=l.compare,l=l!==null?l:Ps,l(M,c)&&s.ref===i.ref)return zn(s,i,p)}return i.flags|=1,s=fr(_,c),s.ref=i.ref,s.return=i,i.child=s}function Xc(s,i,l,c,p){if(s!==null){var _=s.memoizedProps;if(Ps(_,c)&&s.ref===i.ref)if(Vt=!1,i.pendingProps=c=_,No(s,p))s.flags&131072&&(Vt=!0);else return i.lanes=s.lanes,zn(s,i,p)}return xo(s,i,l,c,p)}function Wc(s,i,l){var c=i.pendingProps,p=c.children,_=(i.stateNode._pendingVisibility&2)!==0,M=s!==null?s.memoizedState:null;if(Hs(s,i),c.mode==="hidden"||_){if(i.flags&128){if(c=M!==null?M.baseLanes|l:l,s!==null){for(p=i.child=s.child,_=0;p!==null;)_=_|p.lanes|p.childLanes,p=p.sibling;i.childLanes=_&~c}else i.childLanes=0,i.child=null;return Jc(s,i,c,l)}if(l&536870912)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Fi(i,M!==null?M.cachePool:null),M!==null?Qu(i,M):to(),ec(i);else return i.lanes=i.childLanes=536870912,Jc(s,i,M!==null?M.baseLanes|l:l,l)}else M!==null?(Fi(i,M.cachePool),Qu(i,M),nr(),i.memoizedState=null):(s!==null&&Fi(i,null),to(),nr());return Yt(s,i,p,l),i.child}function Jc(s,i,l,c){var p=io();return p=p===null?null:{parent:Bt._currentValue,pool:p},i.memoizedState={baseLanes:l,cachePool:p},s!==null&&Fi(i,null),to(),ec(i),s!==null&&Gs(s,i,c,!0),null}function Hs(s,i){var l=i.ref;if(l===null)s!==null&&s.ref!==null&&(i.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(s===null||s.ref!==l)&&(i.flags|=2097664)}}function xo(s,i,l,c,p){return Mr(i),l=oo(s,i,l,c,void 0,p),c=lo(),s!==null&&!Vt?(uo(s,i,p),zn(s,i,p)):(mt&&c&&Wa(i),i.flags|=1,Yt(s,i,l,p),i.child)}function Qc(s,i,l,c,p,_){return Mr(i),i.updateQueue=null,l=ic(i,c,l,p),sc(s),c=lo(),s!==null&&!Vt?(uo(s,i,_),zn(s,i,_)):(mt&&c&&Wa(i),i.flags|=1,Yt(s,i,l,_),i.child)}function ed(s,i,l,c,p){if(Mr(i),i.stateNode===null){var _=Jr,M=l.contextType;typeof M=="object"&&M!==null&&(_=Wt(M)),_=new l(c,_),i.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ao,i.stateNode=_,_._reactInternals=i,_=i.stateNode,_.props=c,_.state=i.memoizedState,_.refs={},Fo(i),M=l.contextType,_.context=typeof M=="object"&&M!==null?Wt(M):Jr,_.state=i.memoizedState,M=l.getDerivedStateFromProps,typeof M=="function"&&(To(i,l,M,c),_.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(M=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),M!==_.state&&Ao.enqueueReplaceState(_,_.state,null),Ys(i,c,_,p),Ks(),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(s===null){_=i.stateNode;var Y=i.memoizedProps,ce=Dr(l,Y);_.props=ce;var ge=_.context,Re=l.contextType;M=Jr,typeof Re=="object"&&Re!==null&&(M=Wt(Re));var Pe=l.getDerivedStateFromProps;Re=typeof Pe=="function"||typeof _.getSnapshotBeforeUpdate=="function",Y=i.pendingProps!==Y,Re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Y||ge!==M)&&Bc(i,_,c,M),ar=!1;var Ae=i.memoizedState;_.state=Ae,Ys(i,c,_,p),Ks(),ge=i.memoizedState,Y||Ae!==ge||ar?(typeof Pe=="function"&&(To(i,l,Pe,c),ge=i.memoizedState),(ce=ar||Uc(i,l,ce,c,Ae,ge,M))?(Re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=ge),_.props=c,_.state=ge,_.context=M,c=ce):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{_=i.stateNode,Uo(s,i),M=i.memoizedProps,Re=Dr(l,M),_.props=Re,Pe=i.pendingProps,Ae=_.context,ge=l.contextType,ce=Jr,typeof ge=="object"&&ge!==null&&(ce=Wt(ge)),Y=l.getDerivedStateFromProps,(ge=typeof Y=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(M!==Pe||Ae!==ce)&&Bc(i,_,c,ce),ar=!1,Ae=i.memoizedState,_.state=Ae,Ys(i,c,_,p),Ks();var Ce=i.memoizedState;M!==Pe||Ae!==Ce||ar||s!==null&&s.dependencies!==null&&Yi(s.dependencies)?(typeof Y=="function"&&(To(i,l,Y,c),Ce=i.memoizedState),(Re=ar||Uc(i,l,Re,c,Ae,Ce,ce)||s!==null&&s.dependencies!==null&&Yi(s.dependencies))?(ge||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,Ce,ce),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,Ce,ce)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||M===s.memoizedProps&&Ae===s.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Ae===s.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Ce),_.props=c,_.state=Ce,_.context=ce,c=Re):(typeof _.componentDidUpdate!="function"||M===s.memoizedProps&&Ae===s.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&Ae===s.memoizedState||(i.flags|=1024),c=!1)}return _=c,Hs(s,i),c=(i.flags&128)!==0,_||c?(_=i.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),i.flags|=1,s!==null&&c?(i.child=Rr(i,s.child,null,p),i.child=Rr(i,null,l,p)):Yt(s,i,l,p),i.memoizedState=_.state,s=i.child):s=zn(s,i,p),s}function td(s,i,l,c){return Ns(),i.flags|=256,Yt(s,i,l,c),i.child}var Co={dehydrated:null,treeContext:null,retryLane:0};function Ro(s){return{baseLanes:s,cachePool:rc()}}function Oo(s,i,l){return s=s!==null?s.childLanes&~l:0,i&&(s|=En),s}function nd(s,i,l){var c=i.pendingProps,p=!1,_=(i.flags&128)!==0,M;if((M=_)||(M=s!==null&&s.memoizedState===null?!1:(Ut.current&2)!==0),M&&(p=!0,i.flags&=-129),M=(i.flags&32)!==0,i.flags&=-33,s===null){if(mt){if(p?tr(i):nr(),mt){var Y=Kt,ce;if(ce=Y){e:{for(ce=Y,Y=On;ce.nodeType!==8;){if(!Y){Y=null;break e}if(ce=Cn(ce.nextSibling),ce===null){Y=null;break e}}Y=ce}Y!==null?(i.memoizedState={dehydrated:Y,treeContext:wr!==null?{id:jn,overflow:Fn}:null,retryLane:536870912},ce=bn(18,null,null,0),ce.stateNode=Y,ce.return=i,i.child=ce,en=i,Kt=null,ce=!0):ce=!1}ce||Cr(i)}if(Y=i.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return Y.data==="$!"?i.lanes=16:i.lanes=536870912,null;Un(i)}return Y=c.children,c=c.fallback,p?(nr(),p=i.mode,Y=Po({mode:"hidden",children:Y},p),c=jr(c,p,l,null),Y.return=i,c.return=i,Y.sibling=c,i.child=Y,p=i.child,p.memoizedState=Ro(l),p.childLanes=Oo(s,M,l),i.memoizedState=Co,c):(tr(i),ko(i,Y))}if(ce=s.memoizedState,ce!==null&&(Y=ce.dehydrated,Y!==null)){if(_)i.flags&256?(tr(i),i.flags&=-257,i=Io(s,i,l)):i.memoizedState!==null?(nr(),i.child=s.child,i.flags|=128,i=null):(nr(),p=c.fallback,Y=i.mode,c=Po({mode:"visible",children:c.children},Y),p=jr(p,Y,l,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,Rr(i,s.child,null,l),c=i.child,c.memoizedState=Ro(l),c.childLanes=Oo(s,M,l),i.memoizedState=Co,i=p);else if(tr(i),Y.data==="$!"){if(M=Y.nextSibling&&Y.nextSibling.dataset,M)var ge=M.dgst;M=ge,c=Error(r(419)),c.stack="",c.digest=M,Ms({value:c,source:null,stack:null}),i=Io(s,i,l)}else if(Vt||Gs(s,i,l,!1),M=(l&s.childLanes)!==0,Vt||M){if(M=At,M!==null){if(c=l&-l,c&42)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=c&(M.suspendedLanes|l)?0:c,c!==0&&c!==ce.retryLane)throw ce.retryLane=c,er(s,c),tn(M,s,c),Zc}Y.data==="$?"||al(),i=Io(s,i,l)}else Y.data==="$?"?(i.flags|=128,i.child=s.child,i=pp.bind(null,s),Y._reactRetry=i,i=null):(s=ce.treeContext,Kt=Cn(Y.nextSibling),en=i,mt=!0,wn=null,On=!1,s!==null&&(mn[gn++]=jn,mn[gn++]=Fn,mn[gn++]=wr,jn=s.id,Fn=s.overflow,wr=i),i=ko(i,c.children),i.flags|=4096);return i}return p?(nr(),p=c.fallback,Y=i.mode,ce=s.child,ge=ce.sibling,c=fr(ce,{mode:"hidden",children:c.children}),c.subtreeFlags=ce.subtreeFlags&31457280,ge!==null?p=fr(ge,p):(p=jr(p,Y,l,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,Y=s.child.memoizedState,Y===null?Y=Ro(l):(ce=Y.cachePool,ce!==null?(ge=Bt._currentValue,ce=ce.parent!==ge?{parent:ge,pool:ge}:ce):ce=rc(),Y={baseLanes:Y.baseLanes|l,cachePool:ce}),p.memoizedState=Y,p.childLanes=Oo(s,M,l),i.memoizedState=Co,c):(tr(i),l=s.child,s=l.sibling,l=fr(l,{mode:"visible",children:c.children}),l.return=i,l.sibling=null,s!==null&&(M=i.deletions,M===null?(i.deletions=[s],i.flags|=16):M.push(s)),i.child=l,i.memoizedState=null,l)}function ko(s,i){return i=Po({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Po(s,i){return Rd(s,i,0,null)}function Io(s,i,l){return Rr(i,s.child,null,l),s=ko(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function rd(s,i,l){s.lanes|=i;var c=s.alternate;c!==null&&(c.lanes|=i),Lo(s.return,i,l)}function Do(s,i,l,c,p){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=p)}function sd(s,i,l){var c=i.pendingProps,p=c.revealOrder,_=c.tail;if(Yt(s,i,c.children,l),c=Ut.current,c&2)c=c&1|2,i.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&rd(s,l,i);else if(s.tag===19)rd(s,l,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(L(Ut,c),p){case"forwards":for(l=i.child,p=null;l!==null;)s=l.alternate,s!==null&&ji(s)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),Do(i,!1,p,l,_);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(s=p.alternate,s!==null&&ji(s)===null){i.child=p;break}s=p.sibling,p.sibling=l,l=p,p=s}Do(i,!0,l,null,_);break;case"together":Do(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zn(s,i,l){if(s!==null&&(i.dependencies=s.dependencies),hr|=i.lanes,!(l&i.childLanes))if(s!==null){if(Gs(s,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,l=fr(s,s.pendingProps),i.child=l,l.return=i;s.sibling!==null;)s=s.sibling,l=l.sibling=fr(s,s.pendingProps),l.return=i;l.sibling=null}return i.child}function No(s,i){return s.lanes&i?!0:(s=s.dependencies,!!(s!==null&&Yi(s)))}function ep(s,i,l){switch(i.tag){case 3:G(i,i.stateNode.containerInfo),ir(i,Bt,s.memoizedState.cache),Ns();break;case 27:case 5:ne(i);break;case 4:G(i,i.stateNode.containerInfo);break;case 10:ir(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(tr(i),i.flags|=128,null):l&i.child.childLanes?nd(s,i,l):(tr(i),s=zn(s,i,l),s!==null?s.sibling:null);tr(i);break;case 19:var p=(s.flags&128)!==0;if(c=(l&i.childLanes)!==0,c||(Gs(s,i,l,!1),c=(l&i.childLanes)!==0),p){if(c)return sd(s,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),L(Ut,Ut.current),c)break;return null;case 22:case 23:return i.lanes=0,Wc(s,i,l);case 24:ir(i,Bt,s.memoizedState.cache)}return zn(s,i,l)}function id(s,i,l){if(s!==null)if(s.memoizedProps!==i.pendingProps)Vt=!0;else{if(!No(s,l)&&!(i.flags&128))return Vt=!1,ep(s,i,l);Vt=!!(s.flags&131072)}else Vt=!1,mt&&i.flags&1048576&&qu(i,Ii,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var c=i.elementType,p=c._init;if(c=p(c._payload),i.type=c,typeof c=="function")Ko(c)?(s=Dr(c,s),i.tag=1,i=ed(null,i,c,s,l)):(i.tag=0,i=xo(null,i,c,s,l));else{if(c!=null){if(p=c.$$typeof,p===y){i.tag=11,i=Kc(null,i,c,s,l);break e}else if(p===T){i.tag=14,i=Yc(null,i,c,s,l);break e}}throw i=I(c)||c,Error(r(306,i,""))}}return i;case 0:return xo(s,i,i.type,i.pendingProps,l);case 1:return c=i.type,p=Dr(c,i.pendingProps),ed(s,i,c,p,l);case 3:e:{if(G(i,i.stateNode.containerInfo),s===null)throw Error(r(387));var _=i.pendingProps;p=i.memoizedState,c=p.element,Uo(s,i),Ys(i,_,null,l);var M=i.memoizedState;if(_=M.cache,ir(i,Bt,_),_!==p.cache&&jo(i,[Bt],l,!0),Ks(),_=M.element,p.isDehydrated)if(p={element:_,isDehydrated:!1,cache:M.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=td(s,i,_,l);break e}else if(_!==c){c=pn(Error(r(424)),i),Ms(c),i=td(s,i,_,l);break e}else for(Kt=Cn(i.stateNode.containerInfo.firstChild),en=i,mt=!0,wn=null,On=!0,l=Ju(i,null,_,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ns(),_===c){i=zn(s,i,l);break e}Yt(s,i,_,l)}i=i.child}return i;case 26:return Hs(s,i),s===null?(l=uf(i.type,null,i.pendingProps,null))?i.memoizedState=l:mt||(l=i.type,s=i.pendingProps,c=da(H.current).createElement(l),c[et]=i,c[ht]=s,Xt(c,l,s),qt(c),i.stateNode=c):i.memoizedState=uf(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return ne(i),s===null&&mt&&(c=i.stateNode=af(i.type,i.pendingProps,H.current),en=i,On=!0,Kt=Cn(c.firstChild)),c=i.pendingProps.children,s!==null||mt?Yt(s,i,c,l):i.child=Rr(i,null,c,l),Hs(s,i),i.child;case 5:return s===null&&mt&&((p=c=Kt)&&(c=kp(c,i.type,i.pendingProps,On),c!==null?(i.stateNode=c,en=i,Kt=Cn(c.firstChild),On=!1,p=!0):p=!1),p||Cr(i)),ne(i),p=i.type,_=i.pendingProps,M=s!==null?s.memoizedProps:null,c=_.children,bl(p,_)?c=null:M!==null&&bl(p,M)&&(i.flags|=32),i.memoizedState!==null&&(p=oo(s,i,Zh,null,null,l),ci._currentValue=p),Hs(s,i),Yt(s,i,c,l),i.child;case 6:return s===null&&mt&&((s=l=Kt)&&(l=Pp(l,i.pendingProps,On),l!==null?(i.stateNode=l,en=i,Kt=null,s=!0):s=!1),s||Cr(i)),null;case 13:return nd(s,i,l);case 4:return G(i,i.stateNode.containerInfo),c=i.pendingProps,s===null?i.child=Rr(i,null,c,l):Yt(s,i,c,l),i.child;case 11:return Kc(s,i,i.type,i.pendingProps,l);case 7:return Yt(s,i,i.pendingProps,l),i.child;case 8:return Yt(s,i,i.pendingProps.children,l),i.child;case 12:return Yt(s,i,i.pendingProps.children,l),i.child;case 10:return c=i.pendingProps,ir(i,i.type,c.value),Yt(s,i,c.children,l),i.child;case 9:return p=i.type._context,c=i.pendingProps.children,Mr(i),p=Wt(p),c=c(p),i.flags|=1,Yt(s,i,c,l),i.child;case 14:return Yc(s,i,i.type,i.pendingProps,l);case 15:return Xc(s,i,i.type,i.pendingProps,l);case 19:return sd(s,i,l);case 22:return Wc(s,i,l);case 24:return Mr(i),c=Wt(Bt),s===null?(p=io(),p===null&&(p=At,_=ro(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),i.memoizedState={parent:c,cache:p},Fo(i),ir(i,Bt,p)):(s.lanes&l&&(Uo(s,i),Ys(i,null,null,l),Ks()),p=s.memoizedState,_=i.memoizedState,p.parent!==c?(p={parent:c,cache:c},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),ir(i,Bt,c)):(c=_.cache,ir(i,Bt,c),c!==p.cache&&jo(i,[Bt],l,!0))),Yt(s,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var Mo=X(null),Nr=null,$n=null;function ir(s,i,l){L(Mo,i._currentValue),i._currentValue=l}function qn(s){s._currentValue=Mo.current,C(Mo)}function Lo(s,i,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),s===l)break;s=s.return}}function jo(s,i,l,c){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var _=p.dependencies;if(_!==null){var M=p.child;_=_.firstContext;e:for(;_!==null;){var Y=_;_=p;for(var ce=0;ce<i.length;ce++)if(Y.context===i[ce]){_.lanes|=l,Y=_.alternate,Y!==null&&(Y.lanes|=l),Lo(_.return,l,s),c||(M=null);break e}_=Y.next}}else if(p.tag===18){if(M=p.return,M===null)throw Error(r(341));M.lanes|=l,_=M.alternate,_!==null&&(_.lanes|=l),Lo(M,l,s),M=null}else M=p.child;if(M!==null)M.return=p;else for(M=p;M!==null;){if(M===s){M=null;break}if(p=M.sibling,p!==null){p.return=M.return,M=p;break}M=M.return}p=M}}function Gs(s,i,l,c){s=null;for(var p=i,_=!1;p!==null;){if(!_){if(p.flags&524288)_=!0;else if(p.flags&262144)break}if(p.tag===10){var M=p.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var Y=p.type;sn(p.pendingProps.value,M.value)||(s!==null?s.push(Y):s=[Y])}}else if(p===Q.current){if(M=p.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(ci):s=[ci])}p=p.return}s!==null&&jo(i,s,l,c),i.flags|=262144}function Yi(s){for(s=s.firstContext;s!==null;){if(!sn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Mr(s){Nr=s,$n=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Wt(s){return ad(Nr,s)}function Xi(s,i){return Nr===null&&Mr(s),ad(s,i)}function ad(s,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},$n===null){if(s===null)throw Error(r(308));$n=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else $n=$n.next=i;return l}var ar=!1;function Fo(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uo(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function or(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function lr(s,i,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,Ot&2){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,i=ki(s),zu(s,null,l),i}return Oi(s,c,i,l),ki(s)}function Zs(s,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194176)!==0)){var c=i.lanes;c&=s.pendingLanes,l|=c,i.lanes=l,_t(s,l)}}function Bo(s,i){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var M={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=M:_=_.next=M,l=l.next}while(l!==null);_===null?p=_=i:_=_.next=i}else p=_=i;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=i:s.next=i,l.lastBaseUpdate=i}var zo=!1;function Ks(){if(zo){var s=ss;if(s!==null)throw s}}function Ys(s,i,l,c){zo=!1;var p=s.updateQueue;ar=!1;var _=p.firstBaseUpdate,M=p.lastBaseUpdate,Y=p.shared.pending;if(Y!==null){p.shared.pending=null;var ce=Y,ge=ce.next;ce.next=null,M===null?_=ge:M.next=ge,M=ce;var Re=s.alternate;Re!==null&&(Re=Re.updateQueue,Y=Re.lastBaseUpdate,Y!==M&&(Y===null?Re.firstBaseUpdate=ge:Y.next=ge,Re.lastBaseUpdate=ce))}if(_!==null){var Pe=p.baseState;M=0,Re=ge=ce=null,Y=_;do{var Ae=Y.lane&-536870913,Ce=Ae!==Y.lane;if(Ce?(ft&Ae)===Ae:(c&Ae)===Ae){Ae!==0&&Ae===rs&&(zo=!0),Re!==null&&(Re=Re.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var He=s,Je=Y;Ae=i;var It=l;switch(Je.tag){case 1:if(He=Je.payload,typeof He=="function"){Pe=He.call(It,Pe,Ae);break e}Pe=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Je.payload,Ae=typeof He=="function"?He.call(It,Pe,Ae):He,Ae==null)break e;Pe=j({},Pe,Ae);break e;case 2:ar=!0}}Ae=Y.callback,Ae!==null&&(s.flags|=64,Ce&&(s.flags|=8192),Ce=p.callbacks,Ce===null?p.callbacks=[Ae]:Ce.push(Ae))}else Ce={lane:Ae,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Re===null?(ge=Re=Ce,ce=Pe):Re=Re.next=Ce,M|=Ae;if(Y=Y.next,Y===null){if(Y=p.shared.pending,Y===null)break;Ce=Y,Y=Ce.next,Ce.next=null,p.lastBaseUpdate=Ce,p.shared.pending=null}}while(!0);Re===null&&(ce=Pe),p.baseState=ce,p.firstBaseUpdate=ge,p.lastBaseUpdate=Re,_===null&&(p.shared.lanes=0),hr|=M,s.lanes=M,s.memoizedState=Pe}}function od(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function ld(s,i){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)od(l[s],i)}function Xs(s,i){try{var l=i.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&s)===s){c=void 0;var _=l.create,M=l.inst;c=_(),M.destroy=c}l=l.next}while(l!==p)}}catch(Y){St(i,i.return,Y)}}function ur(s,i,l){try{var c=i.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var _=p.next;c=_;do{if((c.tag&s)===s){var M=c.inst,Y=M.destroy;if(Y!==void 0){M.destroy=void 0,p=i;var ce=l;try{Y()}catch(ge){St(p,ce,ge)}}}c=c.next}while(c!==_)}}catch(ge){St(i,i.return,ge)}}function ud(s){var i=s.updateQueue;if(i!==null){var l=s.stateNode;try{ld(i,l)}catch(c){St(s,s.return,c)}}}function cd(s,i,l){l.props=Dr(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){St(s,i,c)}}function Lr(s,i){try{var l=s.ref;if(l!==null){var c=s.stateNode;switch(s.tag){case 26:case 27:case 5:var p=c;break;default:p=c}typeof l=="function"?s.refCleanup=l(p):l.current=p}}catch(_){St(s,i,_)}}function an(s,i){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){St(s,i,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){St(s,i,p)}else l.current=null}function dd(s){var i=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){St(s,s.return,p)}}function fd(s,i,l){try{var c=s.stateNode;wp(c,s.type,l,i),c[ht]=i}catch(p){St(s,s.return,p)}}function hd(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27||s.tag===4}function $o(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||hd(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==27&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qo(s,i,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(s,i):l.insertBefore(s,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(s,l)):(i=l,i.appendChild(s)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ca));else if(c!==4&&c!==27&&(s=s.child,s!==null))for(qo(s,i,l),s=s.sibling;s!==null;)qo(s,i,l),s=s.sibling}function Wi(s,i,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,i?l.insertBefore(s,i):l.appendChild(s);else if(c!==4&&c!==27&&(s=s.child,s!==null))for(Wi(s,i,l),s=s.sibling;s!==null;)Wi(s,i,l),s=s.sibling}var Vn=!1,kt=!1,Vo=!1,pd=typeof WeakSet=="function"?WeakSet:Set,Ht=null,md=!1;function tp(s,i){if(s=s.containerInfo,_l=ya,s=Iu(s),Ha(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var M=0,Y=-1,ce=-1,ge=0,Re=0,Pe=s,Ae=null;t:for(;;){for(var Ce;Pe!==l||p!==0&&Pe.nodeType!==3||(Y=M+p),Pe!==_||c!==0&&Pe.nodeType!==3||(ce=M+c),Pe.nodeType===3&&(M+=Pe.nodeValue.length),(Ce=Pe.firstChild)!==null;)Ae=Pe,Pe=Ce;for(;;){if(Pe===s)break t;if(Ae===l&&++ge===p&&(Y=M),Ae===_&&++Re===c&&(ce=M),(Ce=Pe.nextSibling)!==null)break;Pe=Ae,Ae=Pe.parentNode}Pe=Ce}l=Y===-1||ce===-1?null:{start:Y,end:ce}}else l=null}l=l||{start:0,end:0}}else l=null;for(vl={focusedElem:s,selectionRange:l},ya=!1,Ht=i;Ht!==null;)if(i=Ht,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Ht=s;else for(;Ht!==null;){switch(i=Ht,_=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(s&1024&&_!==null){s=void 0,l=i,p=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var He=Dr(l.type,p,l.elementType===l.type);s=c.getSnapshotBeforeUpdate(He,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Je){St(l,l.return,Je)}}break;case 3:if(s&1024){if(s=i.stateNode.containerInfo,l=s.nodeType,l===9)Tl(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tl(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(s&1024)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Ht=s;break}Ht=i.return}return He=md,md=!1,He}function gd(s,i,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Gn(s,l),c&4&&Xs(5,l);break;case 1:if(Gn(s,l),c&4)if(s=l.stateNode,i===null)try{s.componentDidMount()}catch(Y){St(l,l.return,Y)}else{var p=Dr(l.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(p,i,s.__reactInternalSnapshotBeforeUpdate)}catch(Y){St(l,l.return,Y)}}c&64&&ud(l),c&512&&Lr(l,l.return);break;case 3:if(Gn(s,l),c&64&&(c=l.updateQueue,c!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{ld(c,s)}catch(Y){St(l,l.return,Y)}}break;case 26:Gn(s,l),c&512&&Lr(l,l.return);break;case 27:case 5:Gn(s,l),i===null&&c&4&&dd(l),c&512&&Lr(l,l.return);break;case 12:Gn(s,l);break;case 13:Gn(s,l),c&4&&vd(s,l);break;case 22:if(p=l.memoizedState!==null||Vn,!p){i=i!==null&&i.memoizedState!==null||kt;var _=Vn,M=kt;Vn=p,(kt=i)&&!M?cr(s,l,(l.subtreeFlags&8772)!==0):Gn(s,l),Vn=_,kt=M}c&512&&(l.memoizedProps.mode==="manual"?Lr(l,l.return):an(l,l.return));break;default:Gn(s,l)}}function yd(s){var i=s.alternate;i!==null&&(s.alternate=null,yd(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Qt(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ft=null,on=!1;function Hn(s,i,l){for(l=l.child;l!==null;)_d(s,i,l),l=l.sibling}function _d(s,i,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(nt,l)}catch{}switch(l.tag){case 26:kt||an(l,i),Hn(s,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||an(l,i);var c=Ft,p=on;for(Ft=l.stateNode,Hn(s,i,l),l=l.stateNode,i=l.attributes;i.length;)l.removeAttributeNode(i[0]);Qt(l),Ft=c,on=p;break;case 5:kt||an(l,i);case 6:p=Ft;var _=on;if(Ft=null,Hn(s,i,l),Ft=p,on=_,Ft!==null)if(on)try{s=Ft,c=l.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)}catch(M){St(l,i,M)}else try{Ft.removeChild(l.stateNode)}catch(M){St(l,i,M)}break;case 18:Ft!==null&&(on?(i=Ft,l=l.stateNode,i.nodeType===8?Sl(i.parentNode,l):i.nodeType===1&&Sl(i,l),pi(i)):Sl(Ft,l.stateNode));break;case 4:c=Ft,p=on,Ft=l.stateNode.containerInfo,on=!0,Hn(s,i,l),Ft=c,on=p;break;case 0:case 11:case 14:case 15:kt||ur(2,l,i),kt||ur(4,l,i),Hn(s,i,l);break;case 1:kt||(an(l,i),c=l.stateNode,typeof c.componentWillUnmount=="function"&&cd(l,i,c)),Hn(s,i,l);break;case 21:Hn(s,i,l);break;case 22:kt||an(l,i),kt=(c=kt)||l.memoizedState!==null,Hn(s,i,l),kt=c;break;default:Hn(s,i,l)}}function vd(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{pi(s)}catch(l){St(i,i.return,l)}}function np(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new pd),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new pd),i;default:throw Error(r(435,s.tag))}}function Ho(s,i){var l=np(s);i.forEach(function(c){var p=mp.bind(null,s,c);l.has(c)||(l.add(c),c.then(p,p))})}function _n(s,i){var l=i.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],_=s,M=i,Y=M;e:for(;Y!==null;){switch(Y.tag){case 27:case 5:Ft=Y.stateNode,on=!1;break e;case 3:Ft=Y.stateNode.containerInfo,on=!0;break e;case 4:Ft=Y.stateNode.containerInfo,on=!0;break e}Y=Y.return}if(Ft===null)throw Error(r(160));_d(_,M,p),Ft=null,on=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)bd(i,s),i=i.sibling}var xn=null;function bd(s,i){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:_n(i,s),vn(s),c&4&&(ur(3,s,s.return),Xs(3,s),ur(5,s,s.return));break;case 1:_n(i,s),vn(s),c&512&&(kt||l===null||an(l,l.return)),c&64&&Vn&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=xn;if(_n(i,s),vn(s),c&512&&(kt||l===null||an(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":_=p.getElementsByTagName("title")[0],(!_||_[Dt]||_[et]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(c),p.head.insertBefore(_,p.querySelector("head > title"))),Xt(_,c,l),_[et]=s,qt(_),c=_;break e;case"link":var M=ff("link","href",p).get(c+(l.href||""));if(M){for(var Y=0;Y<M.length;Y++)if(_=M[Y],_.getAttribute("href")===(l.href==null?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){M.splice(Y,1);break t}}_=p.createElement(c),Xt(_,c,l),p.head.appendChild(_);break;case"meta":if(M=ff("meta","content",p).get(c+(l.content||""))){for(Y=0;Y<M.length;Y++)if(_=M[Y],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){M.splice(Y,1);break t}}_=p.createElement(c),Xt(_,c,l),p.head.appendChild(_);break;default:throw Error(r(468,c))}_[et]=s,qt(_),c=_}s.stateNode=c}else hf(p,s.type,s.stateNode);else s.stateNode=df(p,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?hf(p,s.type,s.stateNode):df(p,c,s.memoizedProps)):c===null&&s.stateNode!==null&&fd(s,s.memoizedProps,l.memoizedProps)}break;case 27:if(c&4&&s.alternate===null){p=s.stateNode,_=s.memoizedProps;try{for(var ce=p.firstChild;ce;){var ge=ce.nextSibling,Re=ce.nodeName;ce[Dt]||Re==="HEAD"||Re==="BODY"||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&ce.rel.toLowerCase()==="stylesheet"||p.removeChild(ce),ce=ge}for(var Pe=s.type,Ae=p.attributes;Ae.length;)p.removeAttributeNode(Ae[0]);Xt(p,Pe,_),p[et]=s,p[ht]=_}catch(He){St(s,s.return,He)}}case 5:if(_n(i,s),vn(s),c&512&&(kt||l===null||an(l,l.return)),s.flags&32){p=s.stateNode;try{Hr(p,"")}catch(He){St(s,s.return,He)}}c&4&&s.stateNode!=null&&(p=s.memoizedProps,fd(s,p,l!==null?l.memoizedProps:p)),c&1024&&(Vo=!0);break;case 6:if(_n(i,s),vn(s),c&4){if(s.stateNode===null)throw Error(r(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(He){St(s,s.return,He)}}break;case 3:if(pa=null,p=xn,xn=fa(i.containerInfo),_n(i,s),xn=p,vn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{pi(i.containerInfo)}catch(He){St(s,s.return,He)}Vo&&(Vo=!1,Ed(s));break;case 4:c=xn,xn=fa(s.stateNode.containerInfo),_n(i,s),vn(s),xn=c;break;case 12:_n(i,s),vn(s);break;case 13:_n(i,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(el=ve()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ho(s,c)));break;case 22:if(c&512&&(kt||l===null||an(l,l.return)),ce=s.memoizedState!==null,ge=l!==null&&l.memoizedState!==null,Re=Vn,Pe=kt,Vn=Re||ce,kt=Pe||ge,_n(i,s),kt=Pe,Vn=Re,vn(s),i=s.stateNode,i._current=s,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,c&8192&&(i._visibility=ce?i._visibility&-2:i._visibility|1,ce&&(i=Vn||kt,l===null||ge||i||ls(s)),s.memoizedProps===null||s.memoizedProps.mode!=="manual"))e:for(l=null,i=s;;){if(i.tag===5||i.tag===26||i.tag===27){if(l===null){ge=l=i;try{if(p=ge.stateNode,ce)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{M=ge.stateNode,Y=ge.memoizedProps.style;var Ce=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;M.style.display=Ce==null||typeof Ce=="boolean"?"":(""+Ce).trim()}}catch(He){St(ge,ge.return,He)}}}else if(i.tag===6){if(l===null){ge=i;try{ge.stateNode.nodeValue=ce?"":ge.memoizedProps}catch(He){St(ge,ge.return,He)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ho(s,l))));break;case 19:_n(i,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Ho(s,c)));break;case 21:break;default:_n(i,s),vn(s)}}function vn(s){var i=s.flags;if(i&2){try{if(s.tag!==27){e:{for(var l=s.return;l!==null;){if(hd(l)){var c=l;break e}l=l.return}throw Error(r(160))}switch(c.tag){case 27:var p=c.stateNode,_=$o(s);Wi(s,_,p);break;case 5:var M=c.stateNode;c.flags&32&&(Hr(M,""),c.flags&=-33);var Y=$o(s);Wi(s,Y,M);break;case 3:case 4:var ce=c.stateNode.containerInfo,ge=$o(s);qo(s,ge,ce);break;default:throw Error(r(161))}}}catch(Re){St(s,s.return,Re)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Ed(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Ed(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Gn(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)gd(s,i.alternate,i),i=i.sibling}function ls(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ur(4,i,i.return),ls(i);break;case 1:an(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&cd(i,i.return,l),ls(i);break;case 26:case 27:case 5:an(i,i.return),ls(i);break;case 22:an(i,i.return),i.memoizedState===null&&ls(i);break;default:ls(i)}s=s.sibling}}function cr(s,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,p=s,_=i,M=_.flags;switch(_.tag){case 0:case 11:case 15:cr(p,_,l),Xs(4,_);break;case 1:if(cr(p,_,l),c=_,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ge){St(c,c.return,ge)}if(c=_,p=c.updateQueue,p!==null){var Y=c.stateNode;try{var ce=p.shared.hiddenCallbacks;if(ce!==null)for(p.shared.hiddenCallbacks=null,p=0;p<ce.length;p++)od(ce[p],Y)}catch(ge){St(c,c.return,ge)}}l&&M&64&&ud(_),Lr(_,_.return);break;case 26:case 27:case 5:cr(p,_,l),l&&c===null&&M&4&&dd(_),Lr(_,_.return);break;case 12:cr(p,_,l);break;case 13:cr(p,_,l),l&&M&4&&vd(p,_);break;case 22:_.memoizedState===null&&cr(p,_,l),Lr(_,_.return);break;default:cr(p,_,l)}i=i.sibling}}function Go(s,i){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Bs(l))}function Zo(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Bs(s))}function dr(s,i,l,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sd(s,i,l,c),i=i.sibling}function Sd(s,i,l,c){var p=i.flags;switch(i.tag){case 0:case 11:case 15:dr(s,i,l,c),p&2048&&Xs(9,i);break;case 3:dr(s,i,l,c),p&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Bs(s)));break;case 12:if(p&2048){dr(s,i,l,c),s=i.stateNode;try{var _=i.memoizedProps,M=_.id,Y=_.onPostCommit;typeof Y=="function"&&Y(M,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ce){St(i,i.return,ce)}}else dr(s,i,l,c);break;case 23:break;case 22:_=i.stateNode,i.memoizedState!==null?_._visibility&4?dr(s,i,l,c):Ws(s,i):_._visibility&4?dr(s,i,l,c):(_._visibility|=4,us(s,i,l,c,(i.subtreeFlags&10256)!==0)),p&2048&&Go(i.alternate,i);break;case 24:dr(s,i,l,c),p&2048&&Zo(i.alternate,i);break;default:dr(s,i,l,c)}}function us(s,i,l,c,p){for(p=p&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var _=s,M=i,Y=l,ce=c,ge=M.flags;switch(M.tag){case 0:case 11:case 15:us(_,M,Y,ce,p),Xs(8,M);break;case 23:break;case 22:var Re=M.stateNode;M.memoizedState!==null?Re._visibility&4?us(_,M,Y,ce,p):Ws(_,M):(Re._visibility|=4,us(_,M,Y,ce,p)),p&&ge&2048&&Go(M.alternate,M);break;case 24:us(_,M,Y,ce,p),p&&ge&2048&&Zo(M.alternate,M);break;default:us(_,M,Y,ce,p)}i=i.sibling}}function Ws(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=s,c=i,p=c.flags;switch(c.tag){case 22:Ws(l,c),p&2048&&Go(c.alternate,c);break;case 24:Ws(l,c),p&2048&&Zo(c.alternate,c);break;default:Ws(l,c)}i=i.sibling}}var Js=8192;function cs(s){if(s.subtreeFlags&Js)for(s=s.child;s!==null;)Td(s),s=s.sibling}function Td(s){switch(s.tag){case 26:cs(s),s.flags&Js&&s.memoizedState!==null&&Vp(xn,s.memoizedState,s.memoizedProps);break;case 5:cs(s);break;case 3:case 4:var i=xn;xn=fa(s.stateNode.containerInfo),cs(s),xn=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=Js,Js=16777216,cs(s),Js=i):cs(s));break;default:cs(s)}}function Ad(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Qs(s){var i=s.deletions;if(s.flags&16){if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];Ht=c,xd(c,s)}Ad(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)wd(s),s=s.sibling}function wd(s){switch(s.tag){case 0:case 11:case 15:Qs(s),s.flags&2048&&ur(9,s,s.return);break;case 3:Qs(s);break;case 12:Qs(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&4&&(s.return===null||s.return.tag!==13)?(i._visibility&=-5,Ji(s)):Qs(s);break;default:Qs(s)}}function Ji(s){var i=s.deletions;if(s.flags&16){if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];Ht=c,xd(c,s)}Ad(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ur(8,i,i.return),Ji(i);break;case 22:l=i.stateNode,l._visibility&4&&(l._visibility&=-5,Ji(i));break;default:Ji(i)}s=s.sibling}}function xd(s,i){for(;Ht!==null;){var l=Ht;switch(l.tag){case 0:case 11:case 15:ur(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Bs(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Ht=c;else e:for(l=s;Ht!==null;){c=Ht;var p=c.sibling,_=c.return;if(yd(c),c===l){Ht=null;break e}if(p!==null){p.return=_,Ht=p;break e}Ht=_}}}function rp(s,i,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(s,i,l,c){return new rp(s,i,l,c)}function Ko(s){return s=s.prototype,!(!s||!s.isReactComponent)}function fr(s,i){var l=s.alternate;return l===null?(l=bn(s.tag,i,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=i,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&31457280,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,i=s.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function Cd(s,i){s.flags&=31457282;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,i=l.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Qi(s,i,l,c,p,_){var M=0;if(c=s,typeof s=="function")Ko(s)&&(M=1);else if(typeof s=="string")M=$p(s,l,U.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case d:return jr(l.children,p,_,i);case f:M=8,p|=24;break;case m:return s=bn(12,l,i,p|2),s.elementType=m,s.lanes=_,s;case g:return s=bn(13,l,i,p),s.elementType=g,s.lanes=_,s;case v:return s=bn(19,l,i,p),s.elementType=v,s.lanes=_,s;case k:return Rd(l,p,_,i);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case b:case w:M=10;break e;case E:M=9;break e;case y:M=11;break e;case T:M=14;break e;case R:M=16,c=null;break e}M=29,l=Error(r(130,s===null?"null":typeof s,"")),c=null}return i=bn(M,l,i,p),i.elementType=s,i.type=c,i.lanes=_,i}function jr(s,i,l,c){return s=bn(7,s,c,i),s.lanes=l,s}function Rd(s,i,l,c){s=bn(22,s,c,i),s.elementType=k,s.lanes=l;var p={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var _=p._current;if(_===null)throw Error(r(456));if(!(p._pendingVisibility&2)){var M=er(_,2);M!==null&&(p._pendingVisibility|=2,tn(M,_,2))}},attach:function(){var _=p._current;if(_===null)throw Error(r(456));if(p._pendingVisibility&2){var M=er(_,2);M!==null&&(p._pendingVisibility&=-3,tn(M,_,2))}}};return s.stateNode=p,s}function Yo(s,i,l){return s=bn(6,s,null,i),s.lanes=l,s}function Xo(s,i,l){return i=bn(4,s.children!==null?s.children:[],s.key,i),i.lanes=l,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}function Zn(s){s.flags|=4}function Od(s,i){if(i.type!=="stylesheet"||i.state.loading&4)s.flags&=-16777217;else if(s.flags|=16777216,!pf(i)){if(i=yn.current,i!==null&&((ft&4194176)===ft?kn!==null:(ft&62914560)!==ft&&!(ft&536870912)||i!==kn))throw js=eo,Gu;s.flags|=8192}}function ea(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?je():536870912,s.lanes|=i,fs|=i)}function ei(s,i){if(!mt)switch(s.tailMode){case"hidden":i=s.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Rt(s){var i=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(i)for(var p=s.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&31457280,c|=p.flags&31457280,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=c,s.childLanes=l,i}function sp(s,i,l){var c=i.pendingProps;switch(Ja(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(i),null;case 1:return Rt(i),null;case 3:return l=i.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),qn(Bt),F(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Ds(i)?Zn(i):s===null||s.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,wn!==null&&(sl(wn),wn=null))),Rt(i),null;case 26:return l=i.memoizedState,s===null?(Zn(i),l!==null?(Rt(i),Od(i,l)):(Rt(i),i.flags&=-16777217)):l?l!==s.memoizedState?(Zn(i),Rt(i),Od(i,l)):(Rt(i),i.flags&=-16777217):(s.memoizedProps!==c&&Zn(i),Rt(i),i.flags&=-16777217),null;case 27:he(i),l=H.current;var p=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==c&&Zn(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Rt(i),null}s=U.current,Ds(i)?Vu(i):(s=af(p,c,l),i.stateNode=s,Zn(i))}return Rt(i),null;case 5:if(he(i),l=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==c&&Zn(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return Rt(i),null}if(s=U.current,Ds(i))Vu(i);else{switch(p=da(H.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}s[et]=i,s[ht]=c;e:for(p=i.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===i)break e;for(;p.sibling===null;){if(p.return===null||p.return===i)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i.stateNode=s;e:switch(Xt(s,l,c),l){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Zn(i)}}return Rt(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==c&&Zn(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(s=H.current,Ds(i)){if(s=i.stateNode,l=i.memoizedProps,c=null,p=en,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}s[et]=i,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Qd(s.nodeValue,l)),s||Cr(i)}else s=da(s).createTextNode(c),s[et]=i,i.stateNode=s}return Rt(i),null;case 13:if(c=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Ds(i),c!==null&&c.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[et]=i}else Ns(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Rt(i),p=!1}else wn!==null&&(sl(wn),wn=null),p=!0;if(!p)return i.flags&256?(Un(i),i):(Un(i),null)}if(Un(i),i.flags&128)return i.lanes=l,i;if(l=c!==null,s=s!==null&&s.memoizedState!==null,l){c=i.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==p&&(c.flags|=2048)}return l!==s&&l&&(i.child.flags|=8192),ea(i,i.updateQueue),Rt(i),null;case 4:return F(),s===null&&ml(i.stateNode.containerInfo),Rt(i),null;case 10:return qn(i.type),Rt(i),null;case 19:if(C(Ut),p=i.memoizedState,p===null)return Rt(i),null;if(c=(i.flags&128)!==0,_=p.rendering,_===null)if(c)ei(p,!1);else{if(Pt!==0||s!==null&&s.flags&128)for(s=i.child;s!==null;){if(_=ji(s),_!==null){for(i.flags|=128,ei(p,!1),s=_.updateQueue,i.updateQueue=s,ea(i,s),i.subtreeFlags=0,s=l,l=i.child;l!==null;)Cd(l,s),l=l.sibling;return L(Ut,Ut.current&1|2),i.child}s=s.sibling}p.tail!==null&&ve()>ta&&(i.flags|=128,c=!0,ei(p,!1),i.lanes=4194304)}else{if(!c)if(s=ji(_),s!==null){if(i.flags|=128,c=!0,s=s.updateQueue,i.updateQueue=s,ea(i,s),ei(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!mt)return Rt(i),null}else 2*ve()-p.renderingStartTime>ta&&l!==536870912&&(i.flags|=128,c=!0,ei(p,!1),i.lanes=4194304);p.isBackwards?(_.sibling=i.child,i.child=_):(s=p.last,s!==null?s.sibling=_:i.child=_,p.last=_)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=ve(),i.sibling=null,s=Ut.current,L(Ut,c?s&1|2:s&1),i):(Rt(i),null);case 22:case 23:return Un(i),no(),c=i.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?l&536870912&&!(i.flags&128)&&(Rt(i),i.subtreeFlags&6&&(i.flags|=8192)):Rt(i),l=i.updateQueue,l!==null&&ea(i,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==l&&(i.flags|=2048),s!==null&&C(Or),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),qn(Bt),Rt(i),null;case 25:return null}throw Error(r(156,i.tag))}function ip(s,i){switch(Ja(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return qn(Bt),F(),s=i.flags,s&65536&&!(s&128)?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return he(i),null;case 13:if(Un(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Ns()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return C(Ut),null;case 4:return F(),null;case 10:return qn(i.type),null;case 22:case 23:return Un(i),no(),s!==null&&C(Or),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return qn(Bt),null;case 25:return null;default:return null}}function kd(s,i){switch(Ja(i),i.tag){case 3:qn(Bt),F();break;case 26:case 27:case 5:he(i);break;case 4:F();break;case 13:Un(i);break;case 19:C(Ut);break;case 10:qn(i.type);break;case 22:case 23:Un(i),no(),s!==null&&C(Or);break;case 24:qn(Bt)}}var ap={getCacheForType:function(s){var i=Wt(Bt),l=i.data.get(s);return l===void 0&&(l=s(),i.data.set(s,l)),l}},op=typeof WeakMap=="function"?WeakMap:Map,Ot=0,At=null,lt=null,ft=0,wt=0,ln=null,Kn=!1,ds=!1,Wo=!1,Yn=0,Pt=0,hr=0,Fr=0,Jo=0,En=0,fs=0,ti=null,In=null,Qo=!1,el=0,ta=1/0,na=null,pr=null,ra=!1,Ur=null,ni=0,tl=0,nl=null,ri=0,rl=null;function un(){if(Ot&2&&ft!==0)return ft&-ft;if(P.T!==null){var s=rs;return s!==0?s:dl()}return rt()}function Pd(){En===0&&(En=!(ft&536870912)||mt?Te():536870912);var s=yn.current;return s!==null&&(s.flags|=32),En}function tn(s,i,l){(s===At&&wt===2||s.cancelPendingCommit!==null)&&(hs(s,0),Xn(s,ft,En,!1)),ze(s,l),(!(Ot&2)||s!==At)&&(s===At&&(!(Ot&2)&&(Fr|=l),Pt===4&&Xn(s,ft,En,!1)),Dn(s))}function Id(s,i,l){if(Ot&6)throw Error(r(327));var c=!l&&(i&60)===0&&(i&s.expiredLanes)===0||zt(s,i),p=c?cp(s,i):ol(s,i,!0),_=c;do{if(p===0){ds&&!c&&Xn(s,i,0,!1);break}else if(p===6)Xn(s,i,0,!Kn);else{if(l=s.current.alternate,_&&!lp(l)){p=ol(s,i,!1),_=!1;continue}if(p===2){if(_=i,s.errorRecoveryDisabledLanes&_)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){i=M;e:{var Y=s;p=ti;var ce=Y.current.memoizedState.isDehydrated;if(ce&&(hs(Y,M).flags|=256),M=ol(Y,M,!1),M!==2){if(Wo&&!ce){Y.errorRecoveryDisabledLanes|=_,Fr|=_,p=4;break e}_=In,In=p,_!==null&&sl(_)}p=M}if(_=!1,p!==2)continue}}if(p===1){hs(s,0),Xn(s,i,0,!0);break}e:{switch(c=s,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){Xn(c,i,En,!Kn);break e}break;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=l,c.finishedLanes=i,(i&62914560)===i&&(_=el+300-ve(),10<_)){if(Xn(c,i,En,!Kn),Xe(c,0)!==0)break e;c.timeoutHandle=nf(Dd.bind(null,c,l,In,na,Qo,i,En,Fr,fs,Kn,2,-0,0),_);break e}Dd(c,l,In,na,Qo,i,En,Fr,fs,Kn,0,-0,0)}}break}while(!0);Dn(s)}function sl(s){In===null?In=s:In.push.apply(In,s)}function Dd(s,i,l,c,p,_,M,Y,ce,ge,Re,Pe,Ae){var Ce=i.subtreeFlags;if((Ce&8192||(Ce&16785408)===16785408)&&(ui={stylesheets:null,count:0,unsuspend:qp},Td(i),i=Hp(),i!==null)){s.cancelPendingCommit=i(Bd.bind(null,s,l,c,p,M,Y,ce,1,Pe,Ae)),Xn(s,_,M,!ge);return}Bd(s,l,c,p,M,Y,ce,Re,Pe,Ae)}function lp(s){for(var i=s;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],_=p.getSnapshot;p=p.value;try{if(!sn(_(),p))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Xn(s,i,l,c){i&=~Jo,i&=~Fr,s.suspendedLanes|=i,s.pingedLanes&=~i,c&&(s.warmLanes|=i),c=s.expirationTimes;for(var p=i;0<p;){var _=31-Ct(p),M=1<<_;c[_]=-1,p&=~M}l!==0&&tt(s,l,i)}function sa(){return Ot&6?!0:(si(0),!1)}function il(){if(lt!==null){if(wt===0)var s=lt.return;else s=lt,$n=Nr=null,co(s),ts=null,Fs=0,s=lt;for(;s!==null;)kd(s.alternate,s),s=s.return;lt=null}}function hs(s,i){s.finishedWork=null,s.finishedLanes=0;var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,Cp(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),il(),At=s,lt=l=fr(s.current,null),ft=i,wt=0,ln=null,Kn=!1,ds=zt(s,i),Wo=!1,fs=En=Jo=Fr=hr=Pt=0,In=ti=null,Qo=!1,i&8&&(i|=i&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=i;0<c;){var p=31-Ct(c),_=1<<p;i|=s[p],c&=~_}return Yn=i,Ri(),l}function Nd(s,i){st=null,P.H=Pn,i===Ls?(i=Yu(),wt=3):i===Gu?(i=Yu(),wt=4):wt=i===Zc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ln=i,lt===null&&(Pt=1,Ki(s,pn(i,s.current)))}function Md(){var s=P.H;return P.H=Pn,s===null?Pn:s}function Ld(){var s=P.A;return P.A=ap,s}function al(){Pt=4,Kn||(ft&4194176)!==ft&&yn.current!==null||(ds=!0),!(hr&134217727)&&!(Fr&134217727)||At===null||Xn(At,ft,En,!1)}function ol(s,i,l){var c=Ot;Ot|=2;var p=Md(),_=Ld();(At!==s||ft!==i)&&(na=null,hs(s,i)),i=!1;var M=Pt;e:do try{if(wt!==0&&lt!==null){var Y=lt,ce=ln;switch(wt){case 8:il(),M=6;break e;case 3:case 2:case 6:yn.current===null&&(i=!0);var ge=wt;if(wt=0,ln=null,ps(s,Y,ce,ge),l&&ds){M=0;break e}break;default:ge=wt,wt=0,ln=null,ps(s,Y,ce,ge)}}up(),M=Pt;break}catch(Re){Nd(s,Re)}while(!0);return i&&s.shellSuspendCounter++,$n=Nr=null,Ot=c,P.H=p,P.A=_,lt===null&&(At=null,ft=0,Ri()),M}function up(){for(;lt!==null;)jd(lt)}function cp(s,i){var l=Ot;Ot|=2;var c=Md(),p=Ld();At!==s||ft!==i?(na=null,ta=ve()+500,hs(s,i)):ds=zt(s,i);e:do try{if(wt!==0&&lt!==null){i=lt;var _=ln;t:switch(wt){case 1:wt=0,ln=null,ps(s,i,_,1);break;case 2:if(Zu(_)){wt=0,ln=null,Fd(i);break}i=function(){wt===2&&At===s&&(wt=7),Dn(s)},_.then(i,i);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Zu(_)?(wt=0,ln=null,Fd(i)):(wt=0,ln=null,ps(s,i,_,7));break;case 5:var M=null;switch(lt.tag){case 26:M=lt.memoizedState;case 5:case 27:var Y=lt;if(!M||pf(M)){wt=0,ln=null;var ce=Y.sibling;if(ce!==null)lt=ce;else{var ge=Y.return;ge!==null?(lt=ge,ia(ge)):lt=null}break t}}wt=0,ln=null,ps(s,i,_,5);break;case 6:wt=0,ln=null,ps(s,i,_,6);break;case 8:il(),Pt=6;break e;default:throw Error(r(462))}}dp();break}catch(Re){Nd(s,Re)}while(!0);return $n=Nr=null,P.H=c,P.A=p,Ot=l,lt!==null?0:(At=null,ft=0,Ri(),Pt)}function dp(){for(;lt!==null&&!we();)jd(lt)}function jd(s){var i=id(s.alternate,s,Yn);s.memoizedProps=s.pendingProps,i===null?ia(s):lt=i}function Fd(s){var i=s,l=i.alternate;switch(i.tag){case 15:case 0:i=Qc(l,i,i.pendingProps,i.type,void 0,ft);break;case 11:i=Qc(l,i,i.pendingProps,i.type.render,i.ref,ft);break;case 5:co(i);default:kd(l,i),i=lt=Cd(i,Yn),i=id(l,i,Yn)}s.memoizedProps=s.pendingProps,i===null?ia(s):lt=i}function ps(s,i,l,c){$n=Nr=null,co(i),ts=null,Fs=0;var p=i.return;try{if(Qh(s,p,i,l,ft)){Pt=1,Ki(s,pn(l,s.current)),lt=null;return}}catch(_){if(p!==null)throw lt=p,_;Pt=1,Ki(s,pn(l,s.current)),lt=null;return}i.flags&32768?(mt||c===1?s=!0:ds||ft&536870912?s=!1:(Kn=s=!0,(c===2||c===3||c===6)&&(c=yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ud(i,s)):ia(i)}function ia(s){var i=s;do{if(i.flags&32768){Ud(i,Kn);return}s=i.return;var l=sp(i.alternate,i,Yn);if(l!==null){lt=l;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=s}while(i!==null);Pt===0&&(Pt=5)}function Ud(s,i){do{var l=ip(s.alternate,s);if(l!==null){l.flags&=32767,lt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(s=s.sibling,s!==null)){lt=s;return}lt=s=l}while(s!==null);Pt=6,lt=null}function Bd(s,i,l,c,p,_,M,Y,ce,ge){var Re=P.T,Pe=D.p;try{D.p=2,P.T=null,fp(s,i,l,c,Pe,p,_,M,Y,ce,ge)}finally{P.T=Re,D.p=Pe}}function fp(s,i,l,c,p,_,M,Y){do ms();while(Ur!==null);if(Ot&6)throw Error(r(327));var ce=s.finishedWork;if(c=s.finishedLanes,ce===null)return null;if(s.finishedWork=null,s.finishedLanes=0,ce===s.current)throw Error(r(177));s.callbackNode=null,s.callbackPriority=0,s.cancelPendingCommit=null;var ge=ce.lanes|ce.childLanes;if(ge|=Ya,qe(s,c,ge,_,M,Y),s===At&&(lt=At=null,ft=0),!(ce.subtreeFlags&10256)&&!(ce.flags&10256)||ra||(ra=!0,tl=ge,nl=l,gp(Be,function(){return ms(),null})),l=(ce.flags&15990)!==0,ce.subtreeFlags&15990||l?(l=P.T,P.T=null,_=D.p,D.p=2,M=Ot,Ot|=4,tp(s,ce),bd(ce,s),Lh(vl,s.containerInfo),ya=!!_l,vl=_l=null,s.current=ce,gd(s,ce.alternate,ce),Ie(),Ot=M,D.p=_,P.T=l):s.current=ce,ra?(ra=!1,Ur=s,ni=c):zd(s,ge),ge=s.pendingLanes,ge===0&&(pr=null),Jt(ce.stateNode),Dn(s),i!==null)for(p=s.onRecoverableError,ce=0;ce<i.length;ce++)ge=i[ce],p(ge.value,{componentStack:ge.stack});return ni&3&&ms(),ge=s.pendingLanes,c&4194218&&ge&42?s===rl?ri++:(ri=0,rl=s):ri=0,si(0),null}function zd(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Bs(i)))}function ms(){if(Ur!==null){var s=Ur,i=tl;tl=0;var l=Qe(ni),c=P.T,p=D.p;try{if(D.p=32>l?32:l,P.T=null,Ur===null)var _=!1;else{l=nl,nl=null;var M=Ur,Y=ni;if(Ur=null,ni=0,Ot&6)throw Error(r(331));var ce=Ot;if(Ot|=4,wd(M.current),Sd(M,M.current,Y,l),Ot=ce,si(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(nt,M)}catch{}_=!0}return _}finally{D.p=p,P.T=c,zd(s,i)}}return!1}function $d(s,i,l){i=pn(l,i),i=wo(s.stateNode,i,2),s=lr(s,i,2),s!==null&&(ze(s,2),Dn(s))}function St(s,i,l){if(s.tag===3)$d(s,s,l);else for(;i!==null;){if(i.tag===3){$d(i,s,l);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(pr===null||!pr.has(c))){s=pn(l,s),l=Hc(2),c=lr(i,l,2),c!==null&&(Gc(l,c,i,s),ze(c,2),Dn(c));break}}i=i.return}}function ll(s,i,l){var c=s.pingCache;if(c===null){c=s.pingCache=new op;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(l)||(Wo=!0,p.add(l),s=hp.bind(null,s,i,l),i.then(s,s))}function hp(s,i,l){var c=s.pingCache;c!==null&&c.delete(i),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,At===s&&(ft&l)===l&&(Pt===4||Pt===3&&(ft&62914560)===ft&&300>ve()-el?!(Ot&2)&&hs(s,0):Jo|=l,fs===ft&&(fs=0)),Dn(s)}function qd(s,i){i===0&&(i=je()),s=er(s,i),s!==null&&(ze(s,i),Dn(s))}function pp(s){var i=s.memoizedState,l=0;i!==null&&(l=i.retryLane),qd(s,l)}function mp(s,i){var l=0;switch(s.tag){case 13:var c=s.stateNode,p=s.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),qd(s,l)}function gp(s,i){return pe(s,i)}var aa=null,gs=null,ul=!1,oa=!1,cl=!1,Br=0;function Dn(s){s!==gs&&s.next===null&&(gs===null?aa=gs=s:gs=gs.next=s),oa=!0,ul||(ul=!0,_p(yp))}function si(s,i){if(!cl&&oa){cl=!0;do for(var l=!1,c=aa;c!==null;){if(s!==0){var p=c.pendingLanes;if(p===0)var _=0;else{var M=c.suspendedLanes,Y=c.pingedLanes;_=(1<<31-Ct(42|s)+1)-1,_&=p&~(M&~Y),_=_&201326677?_&201326677|1:_?_|2:0}_!==0&&(l=!0,Gd(c,_))}else _=ft,_=Xe(c,c===At?_:0),!(_&3)||zt(c,_)||(l=!0,Gd(c,_));c=c.next}while(l);cl=!1}}function yp(){oa=ul=!1;var s=0;Br!==0&&(xp()&&(s=Br),Br=0);for(var i=ve(),l=null,c=aa;c!==null;){var p=c.next,_=Vd(c,i);_===0?(c.next=null,l===null?aa=p:l.next=p,p===null&&(gs=l)):(l=c,(s!==0||_&3)&&(oa=!0)),c=p}si(s)}function Vd(s,i){for(var l=s.suspendedLanes,c=s.pingedLanes,p=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var M=31-Ct(_),Y=1<<M,ce=p[M];ce===-1?(!(Y&l)||Y&c)&&(p[M]=Rn(Y,i)):ce<=i&&(s.expiredLanes|=Y),_&=~Y}if(i=At,l=ft,l=Xe(s,s===i?l:0),c=s.callbackNode,l===0||s===i&&wt===2||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Ee(c),s.callbackNode=null,s.callbackPriority=0;if(!(l&3)||zt(s,l)){if(i=l&-l,i===s.callbackPriority)return i;switch(c!==null&&Ee(c),Qe(l)){case 2:case 8:l=De;break;case 32:l=Be;break;case 268435456:l=yt;break;default:l=Be}return c=Hd.bind(null,s),l=pe(l,c),s.callbackPriority=i,s.callbackNode=l,i}return c!==null&&c!==null&&Ee(c),s.callbackPriority=2,s.callbackNode=null,2}function Hd(s,i){var l=s.callbackNode;if(ms()&&s.callbackNode!==l)return null;var c=ft;return c=Xe(s,s===At?c:0),c===0?null:(Id(s,c,i),Vd(s,ve()),s.callbackNode!=null&&s.callbackNode===l?Hd.bind(null,s):null)}function Gd(s,i){if(ms())return null;Id(s,i,!0)}function _p(s){Rp(function(){Ot&6?pe(Fe,s):s()})}function dl(){return Br===0&&(Br=Te()),Br}function Zd(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ei(""+s)}function Kd(s,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,s.id&&l.setAttribute("form",s.id),i.parentNode.insertBefore(l,i),s=new FormData(s),l.parentNode.removeChild(l),s}function vp(s,i,l,c,p){if(i==="submit"&&l&&l.stateNode===p){var _=Zd((p[ht]||null).action),M=c.submitter;M&&(i=(i=M[ht]||null)?Zd(i.formAction):M.getAttribute("formAction"),i!==null&&(_=i,M=null));var Y=new wi("action","action",null,c,p);s.push({event:Y,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Br!==0){var ce=M?Kd(p,M):new FormData(p);bo(l,{pending:!0,data:ce,method:p.method,action:_},null,ce)}}else typeof _=="function"&&(Y.preventDefault(),ce=M?Kd(p,M):new FormData(p),bo(l,{pending:!0,data:ce,method:p.method,action:_},_,ce))},currentTarget:p}]})}}for(var fl=0;fl<Bu.length;fl++){var hl=Bu[fl],bp=hl.toLowerCase(),Ep=hl[0].toUpperCase()+hl.slice(1);An(bp,"on"+Ep)}An(Mu,"onAnimationEnd"),An(Lu,"onAnimationIteration"),An(ju,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(Fh,"onTransitionRun"),An(Uh,"onTransitionStart"),An(Bh,"onTransitionCancel"),An(Fu,"onTransitionEnd"),qr("onMouseEnter",["mouseout","mouseover"]),qr("onMouseLeave",["mouseout","mouseover"]),qr("onPointerEnter",["pointerout","pointerover"]),qr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ii));function Yd(s,i){i=(i&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],p=c.event;c=c.listeners;e:{var _=void 0;if(i)for(var M=c.length-1;0<=M;M--){var Y=c[M],ce=Y.instance,ge=Y.currentTarget;if(Y=Y.listener,ce!==_&&p.isPropagationStopped())break e;_=Y,p.currentTarget=ge;try{_(p)}catch(Re){Zi(Re)}p.currentTarget=null,_=ce}else for(M=0;M<c.length;M++){if(Y=c[M],ce=Y.instance,ge=Y.currentTarget,Y=Y.listener,ce!==_&&p.isPropagationStopped())break e;_=Y,p.currentTarget=ge;try{_(p)}catch(Re){Zi(Re)}p.currentTarget=null,_=ce}}}}function dt(s,i){var l=i[Ze];l===void 0&&(l=i[Ze]=new Set);var c=s+"__bubble";l.has(c)||(Xd(i,s,2,!1),l.add(c))}function pl(s,i,l){var c=0;i&&(c|=4),Xd(l,s,c,i)}var la="_reactListening"+Math.random().toString(36).slice(2);function ml(s){if(!s[la]){s[la]=!0,Ql.forEach(function(l){l!=="selectionchange"&&(Sp.has(l)||pl(l,!1,s),pl(l,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[la]||(i[la]=!0,pl("selectionchange",!1,i))}}function Xd(s,i,l,c){switch(bf(i)){case 2:var p=Kp;break;case 8:p=Yp;break;default:p=Rl}l=p.bind(null,i,l,s),p=void 0,!La||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?s.addEventListener(i,l,{capture:!0,passive:p}):s.addEventListener(i,l,!0):p!==void 0?s.addEventListener(i,l,{passive:p}):s.addEventListener(i,l,!1)}function gl(s,i,l,c,p){var _=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var M=c.tag;if(M===3||M===4){var Y=c.stateNode.containerInfo;if(Y===p||Y.nodeType===8&&Y.parentNode===p)break;if(M===4)for(M=c.return;M!==null;){var ce=M.tag;if((ce===3||ce===4)&&(ce=M.stateNode.containerInfo,ce===p||ce.nodeType===8&&ce.parentNode===p))return;M=M.return}for(;Y!==null;){if(M=Nt(Y),M===null)return;if(ce=M.tag,ce===5||ce===6||ce===26||ce===27){c=_=M;continue e}Y=Y.parentNode}}c=c.return}du(function(){var ge=_,Re=Na(l),Pe=[];e:{var Ae=Uu.get(s);if(Ae!==void 0){var Ce=wi,He=s;switch(s){case"keypress":if(Ti(l)===0)break e;case"keydown":case"keyup":Ce=mh;break;case"focusin":He="focus",Ce=Ba;break;case"focusout":He="blur",Ce=Ba;break;case"beforeblur":case"afterblur":Ce=Ba;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=_h;break;case Mu:case Lu:case ju:Ce=ah;break;case Fu:Ce=bh;break;case"scroll":case"scrollend":Ce=th;break;case"wheel":Ce=Sh;break;case"copy":case"cut":case"paste":Ce=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=gu;break;case"toggle":case"beforetoggle":Ce=Ah}var Je=(i&4)!==0,It=!Je&&(s==="scroll"||s==="scrollend"),be=Je?Ae!==null?Ae+"Capture":null:Ae;Je=[];for(var me=ge,Se;me!==null;){var Oe=me;if(Se=Oe.stateNode,Oe=Oe.tag,Oe!==5&&Oe!==26&&Oe!==27||Se===null||be===null||(Oe=As(me,be),Oe!=null&&Je.push(ai(me,Oe,Se))),It)break;me=me.return}0<Je.length&&(Ae=new Ce(Ae,He,null,l,Re),Pe.push({event:Ae,listeners:Je}))}}if(!(i&7)){e:{if(Ae=s==="mouseover"||s==="pointerover",Ce=s==="mouseout"||s==="pointerout",Ae&&l!==Da&&(He=l.relatedTarget||l.fromElement)&&(Nt(He)||He[$t]))break e;if((Ce||Ae)&&(Ae=Re.window===Re?Re:(Ae=Re.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Ce?(He=l.relatedTarget||l.toElement,Ce=ge,He=He?Nt(He):null,He!==null&&(It=se(He),Je=He.tag,He!==It||Je!==5&&Je!==27&&Je!==6)&&(He=null)):(Ce=null,He=ge),Ce!==He)){if(Je=pu,Oe="onMouseLeave",be="onMouseEnter",me="mouse",(s==="pointerout"||s==="pointerover")&&(Je=gu,Oe="onPointerLeave",be="onPointerEnter",me="pointer"),It=Ce==null?Ae:Ts(Ce),Se=He==null?Ae:Ts(He),Ae=new Je(Oe,me+"leave",Ce,l,Re),Ae.target=It,Ae.relatedTarget=Se,Oe=null,Nt(Re)===ge&&(Je=new Je(be,me+"enter",He,l,Re),Je.target=Se,Je.relatedTarget=It,Oe=Je),It=Oe,Ce&&He)t:{for(Je=Ce,be=He,me=0,Se=Je;Se;Se=ys(Se))me++;for(Se=0,Oe=be;Oe;Oe=ys(Oe))Se++;for(;0<me-Se;)Je=ys(Je),me--;for(;0<Se-me;)be=ys(be),Se--;for(;me--;){if(Je===be||be!==null&&Je===be.alternate)break t;Je=ys(Je),be=ys(be)}Je=null}else Je=null;Ce!==null&&Wd(Pe,Ae,Ce,Je,!1),He!==null&&It!==null&&Wd(Pe,It,He,Je,!0)}}e:{if(Ae=ge?Ts(ge):window,Ce=Ae.nodeName&&Ae.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&Ae.type==="file")var $e=Au;else if(Su(Ae))if(wu)$e=Nh;else{$e=Ih;var at=Ph}else Ce=Ae.nodeName,!Ce||Ce.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?ge&&Ia(ge.elementType)&&($e=Au):$e=Dh;if($e&&($e=$e(s,ge))){Tu(Pe,$e,l,Re);break e}at&&at(s,Ae,ge),s==="focusout"&&ge&&Ae.type==="number"&&ge.memoizedProps.value!=null&&Pa(Ae,"number",Ae.value)}switch(at=ge?Ts(ge):window,s){case"focusin":(Su(at)||at.contentEditable==="true")&&(Yr=at,Ga=ge,Is=null);break;case"focusout":Is=Ga=Yr=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,Du(Pe,l,Re);break;case"selectionchange":if(jh)break;case"keydown":case"keyup":Du(Pe,l,Re)}var Ge;if($a)e:{switch(s){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Kr?bu(s,l)&&(Ke="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ke="onCompositionStart");Ke&&(yu&&l.locale!=="ko"&&(Kr||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Kr&&(Ge=fu()):(Qn=Re,ja="value"in Qn?Qn.value:Qn.textContent,Kr=!0)),at=ua(ge,Ke),0<at.length&&(Ke=new mu(Ke,s,null,l,Re),Pe.push({event:Ke,listeners:at}),Ge?Ke.data=Ge:(Ge=Eu(l),Ge!==null&&(Ke.data=Ge)))),(Ge=xh?Ch(s,l):Rh(s,l))&&(Ke=ua(ge,"onBeforeInput"),0<Ke.length&&(at=new mu("onBeforeInput","beforeinput",null,l,Re),Pe.push({event:at,listeners:Ke}),at.data=Ge)),vp(Pe,s,ge,l,Re)}Yd(Pe,i)})}function ai(s,i,l){return{instance:s,listener:i,currentTarget:l}}function ua(s,i){for(var l=i+"Capture",c=[];s!==null;){var p=s,_=p.stateNode;p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=As(s,l),p!=null&&c.unshift(ai(s,p,_)),p=As(s,i),p!=null&&c.push(ai(s,p,_))),s=s.return}return c}function ys(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Wd(s,i,l,c,p){for(var _=i._reactName,M=[];l!==null&&l!==c;){var Y=l,ce=Y.alternate,ge=Y.stateNode;if(Y=Y.tag,ce!==null&&ce===c)break;Y!==5&&Y!==26&&Y!==27||ge===null||(ce=ge,p?(ge=As(l,_),ge!=null&&M.unshift(ai(l,ge,ce))):p||(ge=As(l,_),ge!=null&&M.push(ai(l,ge,ce)))),l=l.return}M.length!==0&&s.push({event:i,listeners:M})}var Tp=/\r\n?/g,Ap=/\u0000|\uFFFD/g;function Jd(s){return(typeof s=="string"?s:""+s).replace(Tp,`
`).replace(Ap,"")}function Qd(s,i){return i=Jd(i),Jd(s)===i}function ca(){}function bt(s,i,l,c,p,_){switch(l){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Hr(s,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Hr(s,""+c);break;case"className":_i(s,"class",c);break;case"tabIndex":_i(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(s,l,c);break;case"style":uu(s,c,_);break;case"data":if(i!=="object"){_i(s,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(i!=="input"&&bt(s,i,"name",p.name,p,null),bt(s,i,"formEncType",p.formEncType,p,null),bt(s,i,"formMethod",p.formMethod,p,null),bt(s,i,"formTarget",p.formTarget,p,null)):(bt(s,i,"encType",p.encType,p,null),bt(s,i,"method",p.method,p,null),bt(s,i,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=Ei(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ca);break;case"onScroll":c!=null&&dt("scroll",s);break;case"onScrollEnd":c!=null&&dt("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=Ei(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":dt("beforetoggle",s),dt("toggle",s),yi(s,"popover",c);break;case"xlinkActuate":Ln(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ln(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ln(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ln(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ln(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ln(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ln(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ln(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ln(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":yi(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Qf.get(l)||l,yi(s,l,c))}}function yl(s,i,l,c,p,_){switch(l){case"style":uu(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=l}}break;case"children":typeof c=="string"?Hr(s,c):(typeof c=="number"||typeof c=="bigint")&&Hr(s,""+c);break;case"onScroll":c!=null&&dt("scroll",s);break;case"onScrollEnd":c!=null&&dt("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eu.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),i=l.slice(2,p?l.length-7:void 0),_=s[ht]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(i,_,p),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(i,c,p);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):yi(s,l,c)}}}function Xt(s,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",s),dt("load",s);var c=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var M=l[_];if(M!=null)switch(_){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:bt(s,i,_,M,l,null)}}p&&bt(s,i,"srcSet",l.srcSet,l,null),c&&bt(s,i,"src",l.src,l,null);return;case"input":dt("invalid",s);var Y=_=M=p=null,ce=null,ge=null;for(c in l)if(l.hasOwnProperty(c)){var Re=l[c];if(Re!=null)switch(c){case"name":p=Re;break;case"type":M=Re;break;case"checked":ce=Re;break;case"defaultChecked":ge=Re;break;case"value":_=Re;break;case"defaultValue":Y=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,i));break;default:bt(s,i,c,Re,l,null)}}iu(s,_,Y,ce,ge,M,p,!1),vi(s);return;case"select":dt("invalid",s),c=M=_=null;for(p in l)if(l.hasOwnProperty(p)&&(Y=l[p],Y!=null))switch(p){case"value":_=Y;break;case"defaultValue":M=Y;break;case"multiple":c=Y;default:bt(s,i,p,Y,l,null)}i=_,l=M,s.multiple=!!c,i!=null?Vr(s,!!c,i,!1):l!=null&&Vr(s,!!c,l,!0);return;case"textarea":dt("invalid",s),_=p=c=null;for(M in l)if(l.hasOwnProperty(M)&&(Y=l[M],Y!=null))switch(M){case"value":c=Y;break;case"defaultValue":p=Y;break;case"children":_=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:bt(s,i,M,Y,l,null)}ou(s,c,p,_),vi(s);return;case"option":for(ce in l)if(l.hasOwnProperty(ce)&&(c=l[ce],c!=null))switch(ce){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:bt(s,i,ce,c,l,null)}return;case"dialog":dt("cancel",s),dt("close",s);break;case"iframe":case"object":dt("load",s);break;case"video":case"audio":for(c=0;c<ii.length;c++)dt(ii[c],s);break;case"image":dt("error",s),dt("load",s);break;case"details":dt("toggle",s);break;case"embed":case"source":case"link":dt("error",s),dt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in l)if(l.hasOwnProperty(ge)&&(c=l[ge],c!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:bt(s,i,ge,c,l,null)}return;default:if(Ia(i)){for(Re in l)l.hasOwnProperty(Re)&&(c=l[Re],c!==void 0&&yl(s,i,Re,c,l,void 0));return}}for(Y in l)l.hasOwnProperty(Y)&&(c=l[Y],c!=null&&bt(s,i,Y,c,l,null))}function wp(s,i,l,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,M=null,Y=null,ce=null,ge=null,Re=null;for(Ce in l){var Pe=l[Ce];if(l.hasOwnProperty(Ce)&&Pe!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":ce=Pe;default:c.hasOwnProperty(Ce)||bt(s,i,Ce,null,c,Pe)}}for(var Ae in c){var Ce=c[Ae];if(Pe=l[Ae],c.hasOwnProperty(Ae)&&(Ce!=null||Pe!=null))switch(Ae){case"type":_=Ce;break;case"name":p=Ce;break;case"checked":ge=Ce;break;case"defaultChecked":Re=Ce;break;case"value":M=Ce;break;case"defaultValue":Y=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(137,i));break;default:Ce!==Pe&&bt(s,i,Ae,Ce,c,Pe)}}ka(s,M,Y,ce,ge,Re,_,p);return;case"select":Ce=M=Y=Ae=null;for(_ in l)if(ce=l[_],l.hasOwnProperty(_)&&ce!=null)switch(_){case"value":break;case"multiple":Ce=ce;default:c.hasOwnProperty(_)||bt(s,i,_,null,c,ce)}for(p in c)if(_=c[p],ce=l[p],c.hasOwnProperty(p)&&(_!=null||ce!=null))switch(p){case"value":Ae=_;break;case"defaultValue":Y=_;break;case"multiple":M=_;default:_!==ce&&bt(s,i,p,_,c,ce)}i=Y,l=M,c=Ce,Ae!=null?Vr(s,!!l,Ae,!1):!!c!=!!l&&(i!=null?Vr(s,!!l,i,!0):Vr(s,!!l,l?[]:"",!1));return;case"textarea":Ce=Ae=null;for(Y in l)if(p=l[Y],l.hasOwnProperty(Y)&&p!=null&&!c.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:bt(s,i,Y,null,c,p)}for(M in c)if(p=c[M],_=l[M],c.hasOwnProperty(M)&&(p!=null||_!=null))switch(M){case"value":Ae=p;break;case"defaultValue":Ce=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==_&&bt(s,i,M,p,c,_)}au(s,Ae,Ce);return;case"option":for(var He in l)if(Ae=l[He],l.hasOwnProperty(He)&&Ae!=null&&!c.hasOwnProperty(He))switch(He){case"selected":s.selected=!1;break;default:bt(s,i,He,null,c,Ae)}for(ce in c)if(Ae=c[ce],Ce=l[ce],c.hasOwnProperty(ce)&&Ae!==Ce&&(Ae!=null||Ce!=null))switch(ce){case"selected":s.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:bt(s,i,ce,Ae,c,Ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in l)Ae=l[Je],l.hasOwnProperty(Je)&&Ae!=null&&!c.hasOwnProperty(Je)&&bt(s,i,Je,null,c,Ae);for(ge in c)if(Ae=c[ge],Ce=l[ge],c.hasOwnProperty(ge)&&Ae!==Ce&&(Ae!=null||Ce!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,i));break;default:bt(s,i,ge,Ae,c,Ce)}return;default:if(Ia(i)){for(var It in l)Ae=l[It],l.hasOwnProperty(It)&&Ae!==void 0&&!c.hasOwnProperty(It)&&yl(s,i,It,void 0,c,Ae);for(Re in c)Ae=c[Re],Ce=l[Re],!c.hasOwnProperty(Re)||Ae===Ce||Ae===void 0&&Ce===void 0||yl(s,i,Re,Ae,c,Ce);return}}for(var be in l)Ae=l[be],l.hasOwnProperty(be)&&Ae!=null&&!c.hasOwnProperty(be)&&bt(s,i,be,null,c,Ae);for(Pe in c)Ae=c[Pe],Ce=l[Pe],!c.hasOwnProperty(Pe)||Ae===Ce||Ae==null&&Ce==null||bt(s,i,Pe,Ae,c,Ce)}var _l=null,vl=null;function da(s){return s.nodeType===9?s:s.ownerDocument}function ef(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tf(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function bl(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var El=null;function xp(){var s=window.event;return s&&s.type==="popstate"?s===El?!1:(El=s,!0):(El=null,!1)}var nf=typeof setTimeout=="function"?setTimeout:void 0,Cp=typeof clearTimeout=="function"?clearTimeout:void 0,rf=typeof Promise=="function"?Promise:void 0,Rp=typeof queueMicrotask=="function"?queueMicrotask:typeof rf<"u"?function(s){return rf.resolve(null).then(s).catch(Op)}:nf;function Op(s){setTimeout(function(){throw s})}function Sl(s,i){var l=i,c=0;do{var p=l.nextSibling;if(s.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(c===0){s.removeChild(p),pi(i);return}c--}else l!=="$"&&l!=="$?"&&l!=="$!"||c++;l=p}while(l);pi(i)}function Tl(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Tl(l),Qt(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function kp(s,i,l,c){for(;s.nodeType===1;){var p=l;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Dt])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==p.rel||s.getAttribute("href")!==(p.href==null?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Cn(s.nextSibling),s===null)break}return null}function Pp(s,i,l){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Cn(s.nextSibling),s===null))return null;return s}function Cn(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}function sf(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return s;i--}else l==="/$"&&i++}s=s.previousSibling}return null}function af(s,i,l){switch(i=da(l),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}var Sn=new Map,of=new Set;function fa(s){return typeof s.getRootNode=="function"?s.getRootNode():s.ownerDocument}var Wn=D.d;D.d={f:Ip,r:Dp,D:Np,C:Mp,L:Lp,m:jp,X:Up,S:Fp,M:Bp};function Ip(){var s=Wn.f(),i=sa();return s||i}function Dp(s){var i=zr(s);i!==null&&i.tag===5&&i.type==="form"?Dc(i):Wn.r(s)}var _s=typeof document>"u"?null:document;function lf(s,i,l){var c=_s;if(c&&typeof i=="string"&&i){var p=fn(i);p='link[rel="'+s+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),of.has(p)||(of.add(p),s={rel:s,crossOrigin:l,href:i},c.querySelector(p)===null&&(i=c.createElement("link"),Xt(i,"link",s),qt(i),c.head.appendChild(i)))}}function Np(s){Wn.D(s),lf("dns-prefetch",s,null)}function Mp(s,i){Wn.C(s,i),lf("preconnect",s,i)}function Lp(s,i,l){Wn.L(s,i,l);var c=_s;if(c&&s&&i){var p='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+fn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+fn(l.imageSizes)+'"]')):p+='[href="'+fn(s)+'"]';var _=p;switch(i){case"style":_=vs(s);break;case"script":_=bs(s)}Sn.has(_)||(s=j({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:s,as:i},l),Sn.set(_,s),c.querySelector(p)!==null||i==="style"&&c.querySelector(oi(_))||i==="script"&&c.querySelector(li(_))||(i=c.createElement("link"),Xt(i,"link",s),qt(i),c.head.appendChild(i)))}}function jp(s,i){Wn.m(s,i);var l=_s;if(l&&s){var c=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+fn(c)+'"][href="'+fn(s)+'"]',_=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=bs(s)}if(!Sn.has(_)&&(s=j({rel:"modulepreload",href:s},i),Sn.set(_,s),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(li(_)))return}c=l.createElement("link"),Xt(c,"link",s),qt(c),l.head.appendChild(c)}}}function Fp(s,i,l){Wn.S(s,i,l);var c=_s;if(c&&s){var p=$r(c).hoistableStyles,_=vs(s);i=i||"default";var M=p.get(_);if(!M){var Y={loading:0,preload:null};if(M=c.querySelector(oi(_)))Y.loading=5;else{s=j({rel:"stylesheet",href:s,"data-precedence":i},l),(l=Sn.get(_))&&Al(s,l);var ce=M=c.createElement("link");qt(ce),Xt(ce,"link",s),ce._p=new Promise(function(ge,Re){ce.onload=ge,ce.onerror=Re}),ce.addEventListener("load",function(){Y.loading|=1}),ce.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,ha(M,i,c)}M={type:"stylesheet",instance:M,count:1,state:Y},p.set(_,M)}}}function Up(s,i){Wn.X(s,i);var l=_s;if(l&&s){var c=$r(l).hoistableScripts,p=bs(s),_=c.get(p);_||(_=l.querySelector(li(p)),_||(s=j({src:s,async:!0},i),(i=Sn.get(p))&&wl(s,i),_=l.createElement("script"),qt(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(p,_))}}function Bp(s,i){Wn.M(s,i);var l=_s;if(l&&s){var c=$r(l).hoistableScripts,p=bs(s),_=c.get(p);_||(_=l.querySelector(li(p)),_||(s=j({src:s,async:!0,type:"module"},i),(i=Sn.get(p))&&wl(s,i),_=l.createElement("script"),qt(_),Xt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(p,_))}}function uf(s,i,l,c){var p=(p=H.current)?fa(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=vs(l.href),l=$r(p).hoistableStyles,c=l.get(i),c||(c={type:"style",instance:null,count:0,state:null},l.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=vs(l.href);var _=$r(p).hoistableStyles,M=_.get(s);if(M||(p=p.ownerDocument||p,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,M),(_=p.querySelector(oi(s)))&&!_._p&&(M.instance=_,M.state.loading=5),Sn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Sn.set(s,l),_||zp(p,s,l,M.state))),i&&c===null)throw Error(r(528,""));return M}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=bs(l),l=$r(p).hoistableScripts,c=l.get(i),c||(c={type:"script",instance:null,count:0,state:null},l.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function vs(s){return'href="'+fn(s)+'"'}function oi(s){return'link[rel="stylesheet"]['+s+"]"}function cf(s){return j({},s,{"data-precedence":s.precedence,precedence:null})}function zp(s,i,l,c){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=s.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Xt(i,"link",l),qt(i),s.head.appendChild(i))}function bs(s){return'[src="'+fn(s)+'"]'}function li(s){return"script[async]"+s}function df(s,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var c=s.querySelector('style[data-href~="'+fn(l.href)+'"]');if(c)return i.instance=c,qt(c),c;var p=j({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),qt(c),Xt(c,"style",p),ha(c,l.precedence,s),i.instance=c;case"stylesheet":p=vs(l.href);var _=s.querySelector(oi(p));if(_)return i.state.loading|=4,i.instance=_,qt(_),_;c=cf(l),(p=Sn.get(p))&&Al(c,p),_=(s.ownerDocument||s).createElement("link"),qt(_);var M=_;return M._p=new Promise(function(Y,ce){M.onload=Y,M.onerror=ce}),Xt(_,"link",c),i.state.loading|=4,ha(_,l.precedence,s),i.instance=_;case"script":return _=bs(l.src),(p=s.querySelector(li(_)))?(i.instance=p,qt(p),p):(c=l,(p=Sn.get(_))&&(c=j({},l),wl(c,p)),s=s.ownerDocument||s,p=s.createElement("script"),qt(p),Xt(p,"link",c),s.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(c=i.instance,i.state.loading|=4,ha(c,l.precedence,s));return i.instance}function ha(s,i,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,_=p,M=0;M<c.length;M++){var Y=c[M];if(Y.dataset.precedence===i)_=Y;else if(_!==p)break}_?_.parentNode.insertBefore(s,_.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(s,i.firstChild))}function Al(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function wl(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var pa=null;function ff(s,i,l){if(pa===null){var c=new Map,p=pa=new Map;p.set(l,c)}else p=pa,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),p=0;p<l.length;p++){var _=l[p];if(!(_[Dt]||_[et]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var M=_.getAttribute(i)||"";M=s+M;var Y=c.get(M);Y?Y.push(_):c.set(M,[_])}}return c}function hf(s,i,l){s=s.ownerDocument||s,s.head.insertBefore(l,i==="title"?s.querySelector("head > title"):null)}function $p(s,i,l){if(l===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function pf(s){return!(s.type==="stylesheet"&&!(s.state.loading&3))}var ui=null;function qp(){}function Vp(s,i,l){if(ui===null)throw Error(r(475));var c=ui;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var p=vs(l.href),_=s.querySelector(oi(p));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=ma.bind(c),s.then(c,c)),i.state.loading|=4,i.instance=_,qt(_);return}_=s.ownerDocument||s,l=cf(l),(p=Sn.get(p))&&Al(l,p),_=_.createElement("link"),qt(_);var M=_;M._p=new Promise(function(Y,ce){M.onload=Y,M.onerror=ce}),Xt(_,"link",l),i.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,s),(s=i.state.preload)&&!(i.state.loading&3)&&(c.count++,i=ma.bind(c),s.addEventListener("load",i),s.addEventListener("error",i))}}function Hp(){if(ui===null)throw Error(r(475));var s=ui;return s.stylesheets&&s.count===0&&xl(s,s.stylesheets),0<s.count?function(i){var l=setTimeout(function(){if(s.stylesheets&&xl(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(l)}}:null}function ma(){if(this.count--,this.count===0){if(this.stylesheets)xl(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ga=null;function xl(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ga=new Map,i.forEach(Gp,s),ga=null,ma.call(s))}function Gp(s,i){if(!(i.state.loading&4)){var l=ga.get(s);if(l)var c=l.get(null);else{l=new Map,ga.set(s,l);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var M=p[_];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(l.set(M.dataset.precedence,M),c=M)}c&&l.set(null,c)}p=i.instance,M=p.getAttribute("data-precedence"),_=l.get(M)||c,_===c&&l.set(null,p),l.set(M,p),this.count++,c=ma.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),_?_.parentNode.insertBefore(p,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),i.state.loading|=4}}var ci={$$typeof:w,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Zp(s,i,l,c,p,_,M,Y){this.tag=1,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function mf(s,i,l,c,p,_,M,Y,ce,ge,Re,Pe){return s=new Zp(s,i,l,M,Y,ce,ge,Pe),i=1,_===!0&&(i|=24),_=bn(3,null,null,i),s.current=_,_.stateNode=s,i=ro(),i.refCount++,s.pooledCache=i,i.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:i},Fo(_),s}function gf(s){return s?(s=Jr,s):Jr}function yf(s,i,l,c,p,_){p=gf(p),c.context===null?c.context=p:c.pendingContext=p,c=or(i),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=lr(s,c,i),l!==null&&(tn(l,s,i),Zs(l,s,i))}function _f(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<i?l:i}}function Cl(s,i){_f(s,i),(s=s.alternate)&&_f(s,i)}function vf(s){if(s.tag===13){var i=er(s,67108864);i!==null&&tn(i,s,67108864),Cl(s,67108864)}}var ya=!0;function Kp(s,i,l,c){var p=P.T;P.T=null;var _=D.p;try{D.p=2,Rl(s,i,l,c)}finally{D.p=_,P.T=p}}function Yp(s,i,l,c){var p=P.T;P.T=null;var _=D.p;try{D.p=8,Rl(s,i,l,c)}finally{D.p=_,P.T=p}}function Rl(s,i,l,c){if(ya){var p=Ol(c);if(p===null)gl(s,i,c,va,l),Ef(s,c);else if(Wp(p,s,i,l,c))c.stopPropagation();else if(Ef(s,c),i&4&&-1<Xp.indexOf(s)){for(;p!==null;){var _=zr(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var M=ot(_.pendingLanes);if(M!==0){var Y=_;for(Y.pendingLanes|=2,Y.entangledLanes|=2;M;){var ce=1<<31-Ct(M);Y.entanglements[1]|=ce,M&=~ce}Dn(_),!(Ot&6)&&(ta=ve()+500,si(0))}}break;case 13:Y=er(_,2),Y!==null&&tn(Y,_,2),sa(),Cl(_,2)}if(_=Ol(c),_===null&&gl(s,i,c,va,l),_===p)break;p=_}p!==null&&c.stopPropagation()}else gl(s,i,c,null,l)}}function Ol(s){return s=Na(s),kl(s)}var va=null;function kl(s){if(va=null,s=Nt(s),s!==null){var i=se(s);if(i===null)s=null;else{var l=i.tag;if(l===13){if(s=ue(i),s!==null)return s;s=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return va=s,null}function bf(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case Fe:return 2;case De:return 8;case Be:case ut:return 32;case yt:return 268435456;default:return 32}default:return 32}}var Pl=!1,mr=null,gr=null,yr=null,di=new Map,fi=new Map,_r=[],Xp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ef(s,i){switch(s){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":di.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(i.pointerId)}}function hi(s,i,l,c,p,_){return s===null||s.nativeEvent!==_?(s={blockedOn:i,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[p]},i!==null&&(i=zr(i),i!==null&&vf(i)),s):(s.eventSystemFlags|=c,i=s.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),s)}function Wp(s,i,l,c,p){switch(i){case"focusin":return mr=hi(mr,s,i,l,c,p),!0;case"dragenter":return gr=hi(gr,s,i,l,c,p),!0;case"mouseover":return yr=hi(yr,s,i,l,c,p),!0;case"pointerover":var _=p.pointerId;return di.set(_,hi(di.get(_)||null,s,i,l,c,p)),!0;case"gotpointercapture":return _=p.pointerId,fi.set(_,hi(fi.get(_)||null,s,i,l,c,p)),!0}return!1}function Sf(s){var i=Nt(s.target);if(i!==null){var l=se(i);if(l!==null){if(i=l.tag,i===13){if(i=ue(l),i!==null){s.blockedOn=i,xt(s.priority,function(){if(l.tag===13){var c=un(),p=er(l,c);p!==null&&tn(p,l,c),Cl(l,c)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ba(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var l=Ol(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);Da=c,l.target.dispatchEvent(c),Da=null}else return i=zr(l),i!==null&&vf(i),s.blockedOn=l,!1;i.shift()}return!0}function Tf(s,i,l){ba(s)&&l.delete(i)}function Jp(){Pl=!1,mr!==null&&ba(mr)&&(mr=null),gr!==null&&ba(gr)&&(gr=null),yr!==null&&ba(yr)&&(yr=null),di.forEach(Tf),fi.forEach(Tf)}function Ea(s,i){s.blockedOn===i&&(s.blockedOn=null,Pl||(Pl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jp)))}var Sa=null;function Af(s){Sa!==s&&(Sa=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sa===s&&(Sa=null);for(var i=0;i<s.length;i+=3){var l=s[i],c=s[i+1],p=s[i+2];if(typeof c!="function"){if(kl(c||l)===null)continue;break}var _=zr(l);_!==null&&(s.splice(i,3),i-=3,bo(_,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function pi(s){function i(ce){return Ea(ce,s)}mr!==null&&Ea(mr,s),gr!==null&&Ea(gr,s),yr!==null&&Ea(yr,s),di.forEach(i),fi.forEach(i);for(var l=0;l<_r.length;l++){var c=_r[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<_r.length&&(l=_r[0],l.blockedOn===null);)Sf(l),l.blockedOn===null&&_r.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],_=l[c+1],M=p[ht]||null;if(typeof _=="function")M||Af(l);else if(M){var Y=null;if(_&&_.hasAttribute("formAction")){if(p=_,M=_[ht]||null)Y=M.formAction;else if(kl(p)!==null)continue}else Y=M.action;typeof Y=="function"?l[c+1]=Y:(l.splice(c,3),c-=3),Af(l)}}}function Il(s){this._internalRoot=s}Ta.prototype.render=Il.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var l=i.current,c=un();yf(l,c,s,i,null,null)},Ta.prototype.unmount=Il.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;s.tag===0&&ms(),yf(s.current,2,null,s,null,null),sa(),i[$t]=null}};function Ta(s){this._internalRoot=s}Ta.prototype.unstable_scheduleHydration=function(s){if(s){var i=rt();s={blockedOn:null,target:s,priority:i};for(var l=0;l<_r.length&&i!==0&&i<_r[l].priority;l++);_r.splice(l,0,s),l===0&&Sf(s)}};var wf=e.version;if(wf!=="19.0.0")throw Error(r(527,wf,"19.0.0"));D.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=fe(i),s=s!==null?Z(s):null,s=s===null?null:s.stateNode,s};var Qp={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:Nt,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aa.isDisabled&&Aa.supportsFiber)try{nt=Aa.inject(Qp),We=Aa}catch{}}return reactDomClient_production.createRoot=function(s,i){if(!a(s))throw Error(r(299));var l=!1,c="",p=zc,_=$c,M=qc,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(M=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(Y=i.unstable_transitionCallbacks)),i=mf(s,1,!1,null,null,l,c,p,_,M,Y,null),s[$t]=i.current,ml(s.nodeType===8?s.parentNode:s),new Il(i)},reactDomClient_production.hydrateRoot=function(s,i,l){if(!a(s))throw Error(r(299));var c=!1,p="",_=zc,M=$c,Y=qc,ce=null,ge=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(M=l.onCaughtError),l.onRecoverableError!==void 0&&(Y=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(ce=l.unstable_transitionCallbacks),l.formState!==void 0&&(ge=l.formState)),i=mf(s,1,!0,i,l??null,c,p,_,M,Y,ce,ge),i.context=gf(null),l=i.current,c=un(),p=or(c),p.callback=null,lr(l,p,c),i.current.lanes=c,ze(i,c),Dn(i),s[$t]=i.current,ml(s),new Ta(i)},reactDomClient_production.version="19.0.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client$1.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client$1.exports=requireReactDomClient_production(),client$1.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.parse=u,dist.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,w){const y=new o,g=E.length;if(g<2)return y;const v=(w==null?void 0:w.decode)||m;let T=0;do{const R=E.indexOf("=",T);if(R===-1)break;const k=E.indexOf(";",T),x=k===-1?g:k;if(R>x){T=E.lastIndexOf(";",R-1)+1;continue}const S=h(E,T,R),O=d(E,R,S),A=E.slice(S,O);if(y[A]===void 0){let I=h(E,R+1,x),P=d(E,x,I);const j=v(E.slice(I,P));y[A]=j}T=x+1}while(T<g);return y}function h(E,w,y){do{const g=E.charCodeAt(w);if(g!==32&&g!==9)return w}while(++w<y);return y}function d(E,w,y){for(;w>y;){const g=E.charCodeAt(--w);if(g!==32&&g!==9)return w+1}return y}function f(E,w,y){const g=(y==null?void 0:y.encode)||encodeURIComponent;if(!t.test(E))throw new TypeError(`argument name is invalid: ${E}`);const v=g(w);if(!e.test(v))throw new TypeError(`argument val is invalid: ${w}`);let T=E+"="+v;if(!y)return T;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);T+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);T+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);T+="; Path="+y.path}if(y.expires){if(!b(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);T+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(T+="; HttpOnly"),y.secure&&(T+="; Secure"),y.partitioned&&(T+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":T+="; Priority=Low";break;case"medium":T+="; Priority=Medium";break;case"high":T+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return T}function m(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function b(E){return a.call(E)==="[object Date]"}return dist}requireDist();/**
 * react-router v7.1.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(t={}){function e(r,a){let{pathname:o,search:u,hash:h}=r.location;return createLocation("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(e,n,null,t)}function invariant$1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:n,key:e&&e.key||r||createKey()}}function createPath({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function parsePath(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,n,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,h="POP",d=null,f=m();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function m(){return(u.state||{idx:null}).idx}function b(){h="POP";let v=m(),T=v==null?null:v-f;f=v,d&&d({action:h,location:g.location,delta:T})}function E(v,T){h="PUSH";let R=createLocation(g.location,v,T);f=m()+1;let k=getHistoryState(R,f),x=g.createHref(R);try{u.pushState(k,"",x)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(x)}o&&d&&d({action:h,location:g.location,delta:1})}function w(v,T){h="REPLACE";let R=createLocation(g.location,v,T);f=m();let k=getHistoryState(R,f),x=g.createHref(R);u.replaceState(k,"",x),o&&d&&d({action:h,location:g.location,delta:0})}function y(v){let T=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof v=="string"?v:createPath(v);return R=R.replace(/ $/,"%20"),invariant$1(T,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,T)}let g={get action(){return h},get location(){return t(a,u)},listen(v){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,b),d=v,()=>{a.removeEventListener(PopStateEventType,b),d=null}},createHref(v){return e(a,v)},createURL:y,encodeLocation(v){let T=y(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:E,replace:w,go(v){return u.go(v)}};return g}function matchRoutes(t,e,n="/"){return matchRoutesImpl(t,e,n,!1)}function matchRoutesImpl(t,e,n,r){let a=typeof e=="string"?parsePath(e):e,o=stripBasename(a.pathname||"/",n);if(o==null)return null;let u=flattenRoutes(t);rankRouteBranches(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let f=decodePath(o);h=matchRouteBranch(u[d],f,r)}return h}function flattenRoutes(t,e=[],n=[],r=""){let a=(o,u,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};d.relativePath.startsWith("/")&&(invariant$1(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=joinPaths([r,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(invariant$1(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),flattenRoutes(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:computeScore(f,o.index),routesMeta:m})};return t.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let d of explodeOptionalSegments(o.path))a(o,u,d)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=explodeOptionalSegments(r.join("/")),h=[];return h.push(...u.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...u),h.map(d=>t.startsWith("/")&&d===""?"/":d)}function rankRouteBranches(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let n=t.split("/"),r=n.length;return n.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),n.filter(a=>!isSplat(a)).reduce((a,o)=>a+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,n=!1){let{routesMeta:r}=t,a={},o="/",u=[];for(let h=0;h<r.length;++h){let d=r[h],f=h===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",b=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),E=d.route;if(!b&&f&&n&&!r[r.length-1].route.index&&(b=matchPath({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!b)return null;Object.assign(a,b.params),u.push({params:a,pathname:joinPaths([o,b.pathname]),pathnameBase:normalizePathname(joinPaths([o,b.pathnameBase])),route:E}),b.pathnameBase!=="/"&&(o=joinPaths([o,b.pathnameBase]))}return u}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=compilePath(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:r.reduce((f,{paramName:m,isOptional:b},E)=>{if(m==="*"){let y=h[E]||"";u=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const w=h[E];return b&&!w?f[m]=void 0:f[m]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:u,pattern:t}}function compilePath(t,e=!1,n=!0){warning(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(r.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function resolvePath(t,e="/"){let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?parsePath(t):t;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,e):e,search:normalizeSearch(r),hash:normalizeHash(a)}}function resolvePathname(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function resolveTo(t,e,n,r=!1){let a;typeof t=="string"?a=parsePath(t):(a={...t},invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let o=t===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=n;else{let b=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),b-=1;a.pathname=E.join("/")}h=b>=0?e[b]:"/"}let d=resolvePath(a,h),f=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(t,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=reactExports.useContext(NavigationContext),{hash:a,pathname:o,search:u}=useResolvedPath(t,{relative:e}),h=o;return n!=="/"&&(h=o==="/"?n:joinPaths([n,o])),r.createHref({pathname:h,search:u,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:n}=reactExports.useContext(NavigationContext),{matches:r}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(r)),u=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{u.current=!0}),reactExports.useCallback((d,f={})=>{if(warning(u.current,navigateEffectWarning),!u.current)return;if(typeof d=="number"){n.go(d);return}let m=resolveTo(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:joinPaths([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,o,a,t])}reactExports.createContext(null);function useResolvedPath(t,{relative:e}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),a=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function useRoutesImpl(t,e,n,r){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=reactExports.useContext(NavigationContext),{matches:u}=reactExports.useContext(RouteContext),h=u[u.length-1],d=h?h.params:{},f=h?h.pathname:"/",m=h?h.pathnameBase:"/",b=h&&h.route;{let R=b&&b.path||"";warningOnce(f,!b||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let E=useLocation(),w;w=E;let y=w.pathname||"/",g=y;if(m!=="/"){let R=m.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(R.length).join("/")}let v=!o&&n&&n.matches&&n.matches.length>0?n.matches:matchRoutes(t,{pathname:g});return warning(b||v!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),warning(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(v&&v.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:joinPaths([m,a.encodeLocation?a.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?m:joinPaths([m,a.encodeLocation?a.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),u,n,r)}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",t),u=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),n?reactExports.createElement("pre",{style:a},n):null,u)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:t,match:e,children:n}){let r=reactExports.useContext(DataRouterContext);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},n)}function _renderMatches(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=n==null?void 0:n.errors;if(o!=null){let d=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);invariant$1(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,h=-1;if(n)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=d),f.route.id){let{loaderData:m,errors:b}=n,E=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!b||b[f.route.id]===void 0);if(f.route.lazy||E){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let b,E=!1,w=null,y=null;n&&(b=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||defaultErrorElement,u&&(h<0&&m===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,y=null):h===m&&(E=!0,y=f.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,m+1)),v=()=>{let T;return b?T=w:E?T=y:f.route.Component?T=reactExports.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=d,reactExports.createElement(RenderedRoute,{match:f,routeContext:{outlet:d,matches:g,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),n=e.matches[e.matches.length-1];return invariant$1(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var r;let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{n.current=!0}),reactExports.useCallback(async(a,o={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,n){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:n}){return useRoutesImpl(t,void 0,n,e)}function Router({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:a,static:o=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),h=reactExports.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof n=="string"&&(n=parsePath(n));let{pathname:d="/",search:f="",hash:m="",state:b=null,key:E="default"}=n,w=reactExports.useMemo(()=>{let y=stripBasename(d,u);return y==null?null:{location:{pathname:y,search:f,hash:m,state:b,key:E},navigationType:r}},[u,d,f,m,b,E,r]);return warning(w!=null,`<Router basename="${u}"> is not able to match the URL "${d}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:reactExports.createElement(NavigationContext.Provider,{value:h},reactExports.createElement(LocationContext.Provider,{children:e,value:w}))}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return t!=null&&typeof t.tagName=="string"}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let n,r,a,o,u;if(isFormElement(t)){let h=t.getAttribute("action");r=h?stripBasename(h,e):null,n=t.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("enctype"))||defaultEncType,o=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||h.getAttribute("action");if(r=d?stripBasename(d,e):null,n=t.getAttribute("formmethod")||h.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(h.getAttribute("enctype"))||defaultEncType,o=new FormData(h,t),!isFormDataSubmitterSupported()){let{name:f,type:m,value:b}=t;if(m==="image"){let E=f?`${f}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else f&&o.append(f,b)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,r=null,a=defaultEncType,u=t}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:o,body:u}}function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,n){let r=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await loadRouteModule(o,n);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(r.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,n,r,a,o){let u=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,h=(d,f)=>{var m;return n[f].pathname!==d.pathname||((m=n[f].route.path)==null?void 0:m.endsWith("*"))&&n[f].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,f)=>u(d,f)||h(d,f)):o==="data"?e.filter((d,f)=>{var b;let m=r.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(u(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let E=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=n[0])==null?void 0:b.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function getModuleLinkHrefs(t,e){return dedupeHrefs(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let a=[r.module];return r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function dedupeLinkDescriptors(t,e){let n=new Set;return new Set(e),t.reduce((r,a)=>{let o=JSON.stringify(sortKeys(a));return n.has(o)||(n.add(o),r.push({key:o,link:a})),r},[])}function singleFetchUrl(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let n=reactExports.useContext(FrameworkContext),[r,a]=reactExports.useState(!1),[o,u]=reactExports.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:b}=e,E=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&u(!0),t==="viewport"){let g=T=>{T.forEach(R=>{u(R.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return E.current&&v.observe(E.current),()=>{v.disconnect()}}},[t]),reactExports.useEffect(()=>{if(r){let g=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(g)}}},[r]);let w=()=>{a(!0)},y=()=>{a(!1),u(!1)};return n?t!=="intent"?[o,E,{}]:[o,E,{onFocus:composeEventHandlers(h,w),onBlur:composeEventHandlers(d,y),onMouseEnter:composeEventHandlers(f,w),onMouseLeave:composeEventHandlers(m,y),onTouchStart:composeEventHandlers(b,w)}]:[!1,E,{}]}function composeEventHandlers(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PrefetchPageLinks({page:t,...e}){let{router:n}=useDataRouterContext2(),r=reactExports.useMemo(()=>matchRoutes(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:r,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:n}=useFrameworkContext(),[r,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(t,e,n).then(u=>{o||a(u)}),()=>{o=!0}},[t,e,n]),r}function PrefetchPageLinksImpl({page:t,matches:e,...n}){let r=useLocation(),{manifest:a,routeModules:o}=useFrameworkContext(),{loaderData:u,matches:h}=useDataRouterStateContext(),d=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,h,a,r,"data"),[t,e,h,a,r]),f=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,h,a,r,"assets"),[t,e,h,a,r]),m=reactExports.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,y=!1;if(e.forEach(v=>{var R;let T=a.routes[v.route.id];!T||!T.hasLoader||(!d.some(k=>k.route.id===v.route.id)&&v.route.id in u&&((R=o[v.route.id])!=null&&R.shouldRevalidate)||T.hasClientLoader?y=!0:w.add(v.route.id))}),w.size===0)return[];let g=singleFetchUrl(t);return y&&w.size>0&&g.searchParams.set("_routes",e.filter(v=>w.has(v.route.id)).map(v=>v.route.id).join(",")),[g.pathname+g.search]},[u,r,a,d,e,t,o]),b=reactExports.useMemo(()=>getModuleLinkHrefs(f,a),[f,a]),E=useKeyedPrefetchLinks(f);return reactExports.createElement(reactExports.Fragment,null,m.map(w=>reactExports.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),b.map(w=>reactExports.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),E.map(({key:w,link:y})=>reactExports.createElement("link",{key:w,...y})))}function mergeRefs(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.1.4")}catch{}function BrowserRouter({basename:t,children:e,window:n}){let r=reactExports.useRef();r.current==null&&(r.current=createBrowserHistory({window:n,v5Compat:!0}));let a=r.current,[o,u]=reactExports.useState({action:a.action,location:a.location}),h=reactExports.useCallback(d=>{reactExports.startTransition(()=>u(d))},[u]);return reactExports.useLayoutEffect(()=>a.listen(h),[a,h]),reactExports.createElement(Router,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:h,target:d,to:f,preventScrollReset:m,viewTransition:b,...E},w){let{basename:y}=reactExports.useContext(NavigationContext),g=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),v,T=!1;if(typeof f=="string"&&g&&(v=f,isBrowser$1))try{let P=new URL(window.location.href),j=f.startsWith("//")?new URL(P.protocol+f):new URL(f),B=stripBasename(j.pathname,y);j.origin===P.origin&&B!=null?f=B+j.search+j.hash:T=!0}catch{warning(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=useHref(f,{relative:a}),[k,x,S]=usePrefetchBehavior(r,E),O=useLinkClickHandler(f,{replace:u,state:h,target:d,preventScrollReset:m,relative:a,viewTransition:b});function A(P){e&&e(P),P.defaultPrevented||O(P)}let I=reactExports.createElement("a",{...E,...S,href:v||R,onClick:T||o?e:A,ref:mergeRefs(w,x),target:d,"data-discover":!g&&n==="render"?"true":void 0});return k&&!g?reactExports.createElement(reactExports.Fragment,null,I,reactExports.createElement(PrefetchPageLinks,{page:R})):I});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:h,children:d,...f},m){let b=useResolvedPath(u,{relative:f.relative}),E=useLocation(),w=reactExports.useContext(DataRouterStateContext),{navigator:y,basename:g}=reactExports.useContext(NavigationContext),v=w!=null&&useViewTransitionState(b)&&h===!0,T=y.encodeLocation?y.encodeLocation(b).pathname:b.pathname,R=E.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(R=R.toLowerCase(),k=k?k.toLowerCase():null,T=T.toLowerCase()),k&&g&&(k=stripBasename(k,g)||k);const x=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let S=R===T||!a&&R.startsWith(T)&&R.charAt(x)==="/",O=k!=null&&(k===T||!a&&k.startsWith(T)&&k.charAt(T.length)==="/"),A={isActive:S,isPending:O,isTransitioning:v},I=S?e:void 0,P;typeof r=="function"?P=r(A):P=[r,S?"active":null,O?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(A):o;return reactExports.createElement(Link,{...f,"aria-current":I,className:P,ref:m,style:j,to:u,viewTransition:h},typeof d=="function"?d(A):d)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:a,state:o,method:u=defaultMethod,action:h,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:b,...E},w)=>{let y=useSubmit(),g=useFormAction(h,{relative:f}),v=u.toLowerCase()==="get"?"get":"post",T=typeof h=="string"&&ABSOLUTE_URL_REGEX2.test(h),R=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let x=k.nativeEvent.submitter,S=(x==null?void 0:x.getAttribute("formmethod"))||u;y(x||k.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:a,state:o,relative:f,preventScrollReset:m,viewTransition:b})};return reactExports.createElement("form",{ref:w,method:v,action:g,onSubmit:r?d:R,...E,"data-discover":!T&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:n,state:r,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=useNavigate(),d=useLocation(),f=useResolvedPath(t,{relative:o});return reactExports.useCallback(m=>{if(shouldProcessLinkClick(m,e)){m.preventDefault();let b=n!==void 0?n:createPath(d)===createPath(f);h(t,{replace:b,state:r,preventScrollReset:a,relative:o,viewTransition:u})}},[d,h,f,n,r,e,t,a,o,u])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(r,a={})=>{let{action:o,method:u,encType:h,formData:d,body:f}=getFormSubmissionInfo(r,e);if(a.navigate===!1){let m=a.fetcherKey||getUniqueFetcherId();await t.fetch(m,n,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,n])}function useFormAction(t,{relative:e}={}){let{basename:n}=reactExports.useContext(NavigationContext),r=reactExports.useContext(RouteContext);invariant$1(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...useResolvedPath(t||".",{relative:e})},u=useLocation();if(t==null){o.search=u.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(m=>m==="")){h.delete("index"),d.filter(b=>b).forEach(b=>h.append("index",b));let m=h.toString();o.search=m?`?${m}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:joinPaths([n,o.pathname])),createPath(o)}function useViewTransitionState(t,e={}){let n=reactExports.useContext(ViewTransitionContext);invariant$1(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=stripBasename(n.currentLocation.pathname,r)||n.currentLocation.pathname,u=stripBasename(n.nextLocation.pathname,r)||n.nextLocation.pathname;return matchPath(a.pathname,u)!=null||matchPath(a.pathname,o)!=null}new TextEncoder;const scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function(e,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(n.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":scriptRel,f||(b.as="script"),b.crossOrigin="",b.href=d,h&&b.setAttribute("nonce",h),document.head.appendChild(b),f)return new Promise((E,w)=>{b.addEventListener("load",E),b.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return a.then(u=>{for(const h of u||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},resolveFetch$3=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>__vitePreload(async()=>{const{default:r}=await Promise.resolve().then(()=>browser$1);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class FunctionsError extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};class FunctionsClient{constructor(e,{headers:n={},customFetch:r,region:a=FunctionRegion.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=resolveFetch$3(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:u}=n;let h={},{region:d}=n;d||(d=this.region),d&&d!=="any"&&(h["x-region"]=d);let f;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",f=u):typeof u=="string"?(h["Content-Type"]="text/plain",f=u):typeof FormData<"u"&&u instanceof FormData?f=u:(h["Content-Type"]="application/json",f=JSON.stringify(u)));const m=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:f}).catch(y=>{throw new FunctionsFetchError(y)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new FunctionsRelayError(m);if(!m.ok)throw new FunctionsHttpError(m);let E=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),w;return E==="application/json"?w=yield m.json():E==="application/octet-stream"?w=yield m.blob():E==="text/event-stream"?w=m:E==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null}}catch(a){return{data:null,error:a}}})}}var cjs={},PostgrestClient$1={},PostgrestQueryBuilder$1={},PostgrestFilterBuilder$1={},PostgrestTransformBuilder$1={},PostgrestBuilder$1={},getGlobal$1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal$1();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser$1=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser$1);var PostgrestError$1={},hasRequiredPostgrestError;function requirePostgrestError(){if(hasRequiredPostgrestError)return PostgrestError$1;hasRequiredPostgrestError=1,Object.defineProperty(PostgrestError$1,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return PostgrestError$1.default=t,PostgrestError$1}var hasRequiredPostgrestBuilder;function requirePostgrestBuilder(){if(hasRequiredPostgrestBuilder)return PostgrestBuilder$1;hasRequiredPostgrestBuilder=1;var t=PostgrestBuilder$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PostgrestBuilder$1,"__esModule",{value:!0});const e=t(require$$0),n=t(requirePostgrestError());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,u){return this.headers=Object.assign({},this.headers),this.headers[o]=u,this}then(o,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const h=this.fetch;let d=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var m,b,E;let w=null,y=null,g=null,v=f.status,T=f.statusText;if(f.ok){if(this.method!=="HEAD"){const S=await f.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=S:y=JSON.parse(S))}const k=(m=this.headers.Prefer)===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),x=(b=f.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");k&&x&&x.length>1&&(g=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(w={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,g=null,v=406,T="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await f.text();try{w=JSON.parse(k),Array.isArray(w)&&f.status===404&&(y=[],w=null,v=200,T="OK")}catch{f.status===404&&k===""?(v=204,T="No Content"):w={message:k}}if(w&&this.isMaybeSingle&&(!((E=w==null?void 0:w.details)===null||E===void 0)&&E.includes("0 rows"))&&(w=null,v=200,T="OK"),w&&this.shouldThrowOnError)throw new n.default(w)}return{error:w,data:y,count:g,status:v,statusText:T}});return this.shouldThrowOnError||(d=d.catch(f=>{var m,b,E;return{error:{message:`${(m=f==null?void 0:f.name)!==null&&m!==void 0?m:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(b=f==null?void 0:f.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(E=f==null?void 0:f.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,u)}}return PostgrestBuilder$1.default=r,PostgrestBuilder$1}var hasRequiredPostgrestTransformBuilder;function requirePostgrestTransformBuilder(){if(hasRequiredPostgrestTransformBuilder)return PostgrestTransformBuilder$1;hasRequiredPostgrestTransformBuilder=1;var t=PostgrestTransformBuilder$1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(PostgrestTransformBuilder$1,"__esModule",{value:!0});const e=t(requirePostgrestBuilder());class n extends e.default{select(a){let o=!1;const u=(a??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",u),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:u,foreignTable:h,referencedTable:d=h}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${a}.${o?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:u=o}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,o,{foreignTable:u,referencedTable:h=u}={}){const d=typeof h>"u"?"offset":`${h}.offset`,f=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(f,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:u=!1,buffers:h=!1,wal:d=!1,format:f="text"}={}){var m;const b=[a?"analyze":null,o?"verbose":null,u?"settings":null,h?"buffers":null,d?"wal":null].filter(Boolean).join("|"),E=(m=this.headers.Accept)!==null&&m!==void 0?m:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${E}"; options=${b};`,f==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return PostgrestTransformBuilder$1.default=n,PostgrestTransformBuilder$1}var hasRequiredPostgrestFilterBuilder;function requirePostgrestFilterBuilder(){if(hasRequiredPostgrestFilterBuilder)return PostgrestFilterBuilder$1;hasRequiredPostgrestFilterBuilder=1;var t=PostgrestFilterBuilder$1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(PostgrestFilterBuilder$1,"__esModule",{value:!0});const e=t(requirePostgrestTransformBuilder());class n extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const u=Array.from(new Set(o)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${u})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:u,type:h}={}){let d="";h==="plain"?d="pl":h==="phrase"?d="ph":h==="websearch"&&(d="w");const f=u===void 0?"":`(${u})`;return this.url.searchParams.append(a,`${d}fts${f}.${o}`),this}match(a){return Object.entries(a).forEach(([o,u])=>{this.url.searchParams.append(o,`eq.${u}`)}),this}not(a,o,u){return this.url.searchParams.append(a,`not.${o}.${u}`),this}or(a,{foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,o,u){return this.url.searchParams.append(a,`${o}.${u}`),this}}return PostgrestFilterBuilder$1.default=n,PostgrestFilterBuilder$1}var hasRequiredPostgrestQueryBuilder;function requirePostgrestQueryBuilder(){if(hasRequiredPostgrestQueryBuilder)return PostgrestQueryBuilder$1;hasRequiredPostgrestQueryBuilder=1;var t=PostgrestQueryBuilder$1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(PostgrestQueryBuilder$1,"__esModule",{value:!0});const e=t(requirePostgrestFilterBuilder());class n{constructor(a,{headers:o={},schema:u,fetch:h}){this.url=a,this.headers=o,this.schema=u,this.fetch=h}select(a,{head:o=!1,count:u}={}){const h=o?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",f),u&&(this.headers.Prefer=`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:u=!0}={}){const h="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),u||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(a)){const f=a.reduce((m,b)=>m.concat(Object.keys(b)),[]);if(f.length>0){const m=[...new Set(f)].map(b=>`"${b}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:u=!1,count:h,defaultToNull:d=!0}={}){const f="POST",m=[`resolution=${u?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&m.push(this.headers.Prefer),h&&m.push(`count=${h}`),d||m.push("missing=default"),this.headers.Prefer=m.join(","),Array.isArray(a)){const b=a.reduce((E,w)=>E.concat(Object.keys(w)),[]);if(b.length>0){const E=[...new Set(b)].map(w=>`"${w}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const u="PATCH",h=[];return this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),this.headers.Prefer=h.join(","),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",u=[];return a&&u.push(`count=${a}`),this.headers.Prefer&&u.unshift(this.headers.Prefer),this.headers.Prefer=u.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return PostgrestQueryBuilder$1.default=n,PostgrestQueryBuilder$1}var constants={},version$5={},hasRequiredVersion;function requireVersion(){return hasRequiredVersion||(hasRequiredVersion=1,Object.defineProperty(version$5,"__esModule",{value:!0}),version$5.version=void 0,version$5.version="0.0.0-automated"),version$5}var hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.DEFAULT_HEADERS=void 0;const t=requireVersion();return constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},constants}var hasRequiredPostgrestClient;function requirePostgrestClient(){if(hasRequiredPostgrestClient)return PostgrestClient$1;hasRequiredPostgrestClient=1;var t=PostgrestClient$1.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(PostgrestClient$1,"__esModule",{value:!0});const e=t(requirePostgrestQueryBuilder()),n=t(requirePostgrestFilterBuilder()),r=requireConstants();class a{constructor(u,{headers:h={},schema:d,fetch:f}={}){this.url=u,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),h),this.schemaName=d,this.fetch=f}from(u){const h=new URL(`${this.url}/${u}`);return new e.default(h,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new a(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:d=!1,get:f=!1,count:m}={}){let b;const E=new URL(`${this.url}/rpc/${u}`);let w;d||f?(b=d?"HEAD":"GET",Object.entries(h).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{E.searchParams.append(g,v)})):(b="POST",w=h);const y=Object.assign({},this.headers);return m&&(y.Prefer=`count=${m}`),new n.default({method:b,url:E,headers:y,schema:this.schemaName,body:w,fetch:this.fetch,allowEmpty:!1})}}return PostgrestClient$1.default=a,PostgrestClient$1}var hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var t=cjs.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(cjs,"__esModule",{value:!0}),cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const e=t(requirePostgrestClient());cjs.PostgrestClient=e.default;const n=t(requirePostgrestQueryBuilder());cjs.PostgrestQueryBuilder=n.default;const r=t(requirePostgrestFilterBuilder());cjs.PostgrestFilterBuilder=r.default;const a=t(requirePostgrestTransformBuilder());cjs.PostgrestTransformBuilder=a.default;const o=t(requirePostgrestBuilder());cjs.PostgrestBuilder=o.default;const u=t(requirePostgrestError());return cjs.PostgrestError=u.default,cjs.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:u.default},cjs}var cjsExports=requireCjs();const index=getDefaultExportFromCjs(cjsExports),{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=index,version$4="2.11.2",DEFAULT_HEADERS$3={"X-Client-Info":`realtime-js/${version$4}`},VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3;var SOCKET_STATES;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(t){t.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const a=n.getUint8(1),o=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+a));u=u+a;const d=r.decode(e.slice(u,u+o));u=u+o;const f=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:d,payload:f}}}class Timer{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(t,e,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,u)=>(o[u]=convertColumn(u,t,e,a),o),{})},convertColumn=(t,e,n,r)=>{const a=e.find(h=>h.name===t),o=a==null?void 0:a.type,u=n[t];return o&&!r.includes(o)?convertCell(o,u):noop$2(u)},convertCell=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return toArray$1(e,n)}switch(t){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$2(e);default:return noop$2(e)}},noop$2=t=>t,toBoolean=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},toNumber=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},toJson=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},toArray$1=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const u=t.slice(1,n);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(h=>convertCell(e,h))}return t},toTimestampString=t=>typeof t=="string"?t.replace(" ","T"):t,httpEndpointURL=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Push{constructor(e,n,r={},a=DEFAULT_TIMEOUT){this.channel=e,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,a,o,u),this.pendingDiffs.forEach(d=>{this.state=RealtimePresence.syncDiff(this.state,d,o,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=RealtimePresence.syncDiff(this.state,a,o,u),h())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,a){const o=this.cloneDeep(e),u=this.transformState(n),h={},d={};return this.map(o,(f,m)=>{u[f]||(d[f]=m)}),this.map(u,(f,m)=>{const b=o[f];if(b){const E=m.map(v=>v.presence_ref),w=b.map(v=>v.presence_ref),y=m.filter(v=>w.indexOf(v.presence_ref)<0),g=b.filter(v=>E.indexOf(v.presence_ref)<0);y.length>0&&(h[f]=y),g.length>0&&(d[f]=g)}else h[f]=m}),this.syncDiff(o,{joins:h,leaves:d},r,a)}static syncDiff(e,n,r,a){const{joins:o,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(h,d)=>{var f;const m=(f=e[h])!==null&&f!==void 0?f:[];if(e[h]=this.cloneDeep(d),m.length>0){const b=e[h].map(w=>w.presence_ref),E=m.filter(w=>b.indexOf(w.presence_ref)<0);e[h].unshift(...E)}r(h,m,d)}),this.map(u,(h,d)=>{let f=e[h];if(!f)return;const m=d.map(b=>b.presence_ref);f=f.filter(b=>m.indexOf(b.presence_ref)<0),e[h]=f,a(h,f,d),f.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const a=e[r];return"metas"in a?n[r]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:u,private:h}}=this.params;this._onError(m=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CLOSED));const d={},f={broadcast:o,presence:u,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&a!==void 0?a:[],private:h};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket.setAuth(),m===void 0){e==null||e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,w=(b=E==null?void 0:E.length)!==null&&b!==void 0?b:0,y=[];for(let g=0;g<w;g++){const v=E[g],{filter:{event:T,schema:R,table:k,filter:x}}=v,S=m&&m[g];if(S&&S.event===T&&S.schema===R&&S.table===k&&S.filter===x)y.push(Object.assign(Object.assign({},v),{id:S.id}));else{this.unsubscribe(),e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",m=>{e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:u}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,h,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new Push(this,CHANNEL_EVENTS.leave,{},e);a.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Push(this,e,n,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var a,o;const u=e.toLocaleLowerCase(),{close:h,error:d,leave:f,join:m}=CHANNEL_EVENTS;if(r&&[h,d,f,m].indexOf(u)>=0&&r!==this._joinRef())return;let E=this._onMessage(u,n,r);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(w=>{var y,g,v;return((y=w.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(g=w.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===u}).map(w=>w.callback(E,r)):(o=this.bindings[u])===null||o===void 0||o.filter(w=>{var y,g,v,T,R,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in w){const x=w.id,S=(y=w.filter)===null||y===void 0?void 0:y.event;return x&&((g=n.ids)===null||g===void 0?void 0:g.includes(x))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const x=(R=(T=w==null?void 0:w.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return x==="*"||x===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===u}).map(w=>{if(typeof E=="object"&&"ids"in E){const y=E.data,{schema:g,table:v,commit_timestamp:T,type:R,errors:k}=y;E=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:T,eventType:R,new:{},old:{},errors:k}),this._getPayloadRecords(y))}w.callback(E,r)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&RealtimeChannel.isEqual(a.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=convertChangeData(e.columns,e.old_record)),n}}const noop$1=()=>{},NATIVE_WEBSOCKET_AVAILABLE=typeof WebSocket<"u",WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=DEFAULT_HEADERS$3,this.params={},this.timeout=DEFAULT_TIMEOUT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=noop$1,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...h)=>__vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>browser$1);return{default:d}},void 0).then(({default:d})=>d(...h)):u=fetch,(...h)=>u(...h)},this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,u)=>u(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Timer(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(NATIVE_WEBSOCKET_AVAILABLE){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new WSWebSocketDummy(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),__vitePreload(async()=>{const{default:e}=await import("./browser-2Yl5KFJd.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}channel(e,n={config:{}}){const r=new RealtimeChannel(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:a,ref:o}=e,u=()=>{this.encode(e,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${n} ${r} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(a=>{n&&a.updateJoinPayload({access_token:n}),a.joinedOnce&&a._isJoined()&&a._push(CHANNEL_EVENTS.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:a,payload:o,ref:u}=n;u&&u===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${a} ${u&&"("+u+")"||""}`,o),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(a,o,u)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${r}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([WORKER_SCRIPT],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class WSWebSocketDummy{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=SOCKET_STATES.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class StorageError extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class StorageApiError extends StorageError{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class StorageUnknownError extends StorageError{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var __awaiter$6=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};const resolveFetch$2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>__vitePreload(async()=>{const{default:r}=await Promise.resolve().then(()=>browser$1);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser$1),void 0)).Response:Response}),recursiveToCamel=t=>{if(Array.isArray(t))return t.map(n=>recursiveToCamel(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=recursiveToCamel(r)}),e};var __awaiter$5=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};const _getErrorMessage$1=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),handleError$1=(t,e,n)=>__awaiter$5(void 0,void 0,void 0,function*(){const r=yield resolveResponse();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(a=>{e(new StorageApiError(_getErrorMessage$1(a),t.status||500))}).catch(a=>{e(new StorageUnknownError(_getErrorMessage$1(a),a))}):e(new StorageUnknownError(_getErrorMessage$1(t),t))}),_getRequestParams$1=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),n))};function _handleRequest$1(t,e,n,r,a,o){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,_getRequestParams$1(e,r,a,o)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>u(d)).catch(d=>handleError$1(d,h,r))})})}function get(t,e,n,r){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"GET",e,n,r)})}function post(t,e,n,r,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"POST",e,r,a,n)})}function put(t,e,n,r,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"PUT",e,r,a,n)})}function head(t,e,n,r){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function remove(t,e,n,r,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(t,"DELETE",e,r,a,n)})}var __awaiter$4=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,n={},r,a){this.url=e,this.headers=n,this.bucketId=r,this.fetch=resolveFetch$2(a)}uploadOrUpdate(e,n,r,a){return __awaiter$4(this,void 0,void 0,function*(){try{let o;const u=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const d=u.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,d&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const f=this._removeEmptyFolders(n),m=this._getFinalPath(f),b=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:e,body:o,headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{})),E=yield b.json();return b.ok?{data:{path:f,id:E.Id,fullPath:E.Key},error:null}:{data:null,error:E}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}upload(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,a){return __awaiter$4(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),u=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},a),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const b=yield this.fetch(h.toString(),{method:"PUT",body:d,headers:m}),E=yield b.json();return b.ok?{data:{path:o,fullPath:E.Key},error:null}:{data:null,error:E}}catch(d){if(isStorageError(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return __awaiter$4(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const o=yield post(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),u=new URL(this.url+o.url),h=u.searchParams.get("token");if(!h)throw new StorageError("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}update(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}copy(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield post(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){try{const a=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}download(e,n){return __awaiter$4(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=o?`?${o}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield get(this.fetch,`${this.url}/${a}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}info(e){return __awaiter$4(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield get(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:recursiveToCamel(r),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}exists(e){return __awaiter$4(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield head(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(isStorageError(r)&&r instanceof StorageUnknownError){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),a=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${f}`)}}}remove(e){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}list(e,n,r){return __awaiter$4(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),n),{prefix:e||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const version$3="2.7.1",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$3}`};var __awaiter$3=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};class StorageBucketApi{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),n),this.fetch=resolveFetch$2(r)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(isStorageError(e))return{data:null,error:e};throw e}})}getBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(isStorageError(r))return{data:null,error:r};throw r}})}emptyBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}deleteBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(isStorageError(n))return{data:null,error:n};throw n}})}}class StorageClient extends StorageBucketApi{constructor(e,n={},r){super(e,n,r)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}}const version$2="2.48.1";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$2}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};const resolveFetch$1=t=>{let e;return t?e=t:typeof fetch>"u"?e=nodeFetch:e=fetch,(...n)=>e(...n)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(t,e,n)=>{const r=resolveFetch$1(n),a=resolveHeadersConstructor();return(o,u)=>__awaiter$2(void 0,void 0,void 0,function*(){var h;const d=(h=yield e())!==null&&h!==void 0?h:t;let f=new a(u==null?void 0:u.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,Object.assign(Object.assign({},u),{headers:f}))})};var __awaiter$1=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};function stripTrailingSlash(t){return t.replace(/\/$/,"")}function applySettingDefaults(t,e){const{db:n,auth:r,realtime:a,global:o}=t,{db:u,auth:h,realtime:d,global:f}=e,m={db:Object.assign(Object.assign({},u),n),auth:Object.assign(Object.assign({},h),r),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign({},f),o),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const version$1="2.67.3",GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version$1}`},EXPIRY_MARGIN=10,API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function expiresAt(t){return Math.round(Date.now()/1e3)+t}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((r,a)=>{e[a]=r}),e}const resolveFetch=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>__vitePreload(async()=>{const{default:r}=await Promise.resolve().then(()=>browser$1);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},looksLikeFetchResponse=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",setItemAsync=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},getItemAsync=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},removeItemAsync=async(t,e)=>{await t.removeItem(e)};function decodeBase64URL(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,a,o,u,h,d,f,m=0;for(t=t.replace("-","+").replace("_","/");m<t.length;)u=e.indexOf(t.charAt(m++)),h=e.indexOf(t.charAt(m++)),d=e.indexOf(t.charAt(m++)),f=e.indexOf(t.charAt(m++)),r=u<<2|h>>4,a=(h&15)<<4|d>>2,o=(d&3)<<6|f,n=n+String.fromCharCode(r),d!=64&&a!=0&&(n=n+String.fromCharCode(a)),f!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Deferred.promiseConstructor=Promise;function decodeJWTPayload(t){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=t.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(decodeBase64URL(r))}async function sleep(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function retryable(t,e){return new Promise((r,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await t(o);if(!e(o,null,u)){r(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function dec2hex(t){return("0"+t.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}function base64urlencode(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function generatePKCEChallenge(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sha256(t);return base64urlencode(n)}async function getCodeChallengeAndMethod(t,e,n=!1){const r=generatePKCEVerifier();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await setItemAsync(t,`${e}-code-verifier`,a);const o=await generatePKCEChallenge(r);return[o,r===o?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(t){const e=t.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class AuthError extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function isAuthError(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class AuthApiError extends AuthError{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function isAuthApiError(t){return isAuthError(t)&&t.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class CustomAuthError extends AuthError{constructor(e,n,r,a){super(e,r,a),this.name=n,this.status=r}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(t){return isAuthError(t)&&t.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(t){return isAuthError(t)&&t.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function isAuthRetryableFetchError(t){return isAuthError(t)&&t.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var __rest$1=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};const _getErrorMessage=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NETWORK_ERROR_CODES=[502,503,504];async function handleError(t){var e;if(!looksLikeFetchResponse(t))throw new AuthRetryableFetchError(_getErrorMessage(t),0);if(NETWORK_ERROR_CODES.includes(t.status))throw new AuthRetryableFetchError(_getErrorMessage(t),t.status);let n;try{n=await t.json()}catch(o){throw new AuthUnknownError(_getErrorMessage(o),o)}let r;const a=parseResponseAPIVersion(t);if(a&&a.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new AuthSessionMissingError}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(n),t.status,n.weak_password.reasons);throw new AuthApiError(_getErrorMessage(n),t.status||500,r)}const _getRequestParams=(t,e,n,r)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function _request(t,e,n,r){var a;const o=Object.assign({},r==null?void 0:r.headers);o[API_VERSION_HEADER_NAME]||(o[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const u=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",d=await _handleRequest(t,e,n+h,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function _handleRequest(t,e,n,r,a,o){const u=_getRequestParams(e,r,a,o);let h;try{h=await t(n,Object.assign({},u))}catch(d){throw console.error(d),new AuthRetryableFetchError(_getErrorMessage(d),0)}if(h.ok||await handleError(h),r!=null&&r.noResolveJson)return h;try{return await h.json()}catch(d){await handleError(d)}}function _sessionResponse(t){var e;let n=null;hasSession(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=expiresAt(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function _sessionResponsePassword(t){const e=_sessionResponse(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _userResponse(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _ssoResponse(t){return{data:t,error:null}}function _generateLinkResponse(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=t,u=__rest$1(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},d=Object.assign({},u);return{data:{properties:h,user:d},error:null}}function _noResolveJsonResponse(t){return t}function hasSession(t){return t.access_token&&t.refresh_token&&t.expires_in}var __rest=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n};class GoTrueAdminApi{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=resolveFetch(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(isAuthError(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=__rest(e,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:_generateLinkResponse,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(isAuthError(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,a,o,u,h,d;try{const f={nextPage:null,lastPage:0,total:0},m=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:_noResolveJsonResponse});if(m.error)throw m.error;const b=await m.json(),E=(u=m.headers.get("x-total-count"))!==null&&u!==void 0?u:0,w=(d=(h=m.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);f[`${v}Page`]=g}),f.total=parseInt(E)),{data:Object.assign(Object.assign({},b),f),error:null}}catch(f){if(isAuthError(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_userResponse})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}}const localStorageAdapter={getItem:t=>supportsLocalStorage()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{supportsLocalStorage()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{supportsLocalStorage()&&globalThis.localStorage.removeItem(t)}};function memoryLocalStorageAdapter(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(t,e,n){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(internals.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},AUTO_REFRESH_TICK_DURATION=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3;async function lockNoOp(t,e,n){return await n()}class GoTrueClient{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new GoTrueAdminApi({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=resolveFetch(a.fetch),this.lock=a.lock||lockNoOp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:isBrowser()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:supportsLocalStorage()?this.storage=localStorageAdapter:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version$1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=parseParametersFromURL(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),isBrowser()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),isAuthImplicitGrantRedirectError(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return isAuthError(n)?{error:n}:{error:new AuthUnknownError("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,a;try{const o=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:_sessionResponse}),{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const d=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,a;try{let o;if("email"in e){const{email:m,password:b,options:E}=e;let w=null,y=null;this.flowType==="pkce"&&([w,y]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),o=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:m,password:b,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:w,code_challenge_method:y},xform:_sessionResponse})}else if("phone"in e){const{phone:m,password:b,options:E}=e;o=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:b,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},channel:(a=E==null?void 0:E.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:u,error:h}=o;if(h||!u)return{data:{user:null,session:null},error:h};const d=u.session,f=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(isAuthError(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:u,options:h}=e;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:o,password:u,options:h}=e;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:o,error:u}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(isAuthError(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:a,access_token:o,nonce:u}=e,h=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_sessionResponse}),{data:d,error:f}=h;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,a,o,u;try{if("email"in e){const{email:h,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:b}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:h,options:d}=e,{data:f,error:m}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(u=d==null?void 0:d.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(h){if(isAuthError(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:_sessionResponse});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const d=u.session,f=u.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(isAuthError(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var n,r,a;try{let o=null,u=null;return this.flowType==="pkce"&&([o,u]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:u}),headers:this.headers,xform:_ssoResponse})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new AuthSessionMissingError;const{error:a}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(isAuthError(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:o}=e,{error:u}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:a,options:o}=e,{data:u,error:h}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,m)=>(!u&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,m))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async n=>{var r,a,o;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:_userResponse})})}catch(n){if(isAuthError(n))return isAuthSessionMissingError(n)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new AuthSessionMissingError;const u=a.session;let h=null,d=null;this.flowType==="pkce"&&e.email!=null&&([h,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:f,error:m}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:d}),jwt:u.access_token,xform:_userResponse});if(m)throw m;return u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(isAuthError(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return decodeJWTPayload(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const n=Date.now()/1e3;let r=n,a=!0,o=null;const u=decodeJWTPayload(e.access_token);if(u.exp&&(r=u.exp,a=r<=n),a){const{session:h,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(isAuthError(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new AuthSessionMissingError;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(isAuthError(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:R,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:h,expires_at:d,token_type:f}=e;if(!o||!h||!u||!f)throw new AuthImplicitGrantRedirectError("No session defined in URL");const m=Math.round(Date.now()/1e3),b=parseInt(h);let E=m+b;d&&(E=parseInt(d));const w=E-m;w*1e3<=AUTO_REFRESH_TICK_DURATION&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${b}s`);const y=E-b;m-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,E,m):m-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,E,m);const{data:g,error:v}=await this._getUser(o);if(v)throw v;const T={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:b,expires_at:E,refresh_token:u,token_type:f,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(isAuthError(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{error:o};const u=(r=a.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(isAuthApiError(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=uuid(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,a;try{const{data:{session:o},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:a}=await this._useSession(async o=>{var u,h,d,f,m;const{data:b,error:E}=o;if(E)throw E;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",w,{headers:this.headers,jwt:(m=(f=b.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return isBrowser()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(isAuthError(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,a;const{data:o,error:u}=n;if(u)throw u;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await retryable(async a=>(a>0&&await sleep(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(a,o)=>{const u=200*Math.pow(2,a);return o&&isAuthRetryableFetchError(o)&&Date.now()+u-r<AUTO_REFRESH_TICK_DURATION})}catch(r){if(this._debug(n,"error",r),isAuthError(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),isBrowser()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await getItemAsync(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<a+EXPIRY_MARGIN;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${EXPIRY_MARGIN}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:u}=await this._callRefreshToken(r.refresh_token);u&&(console.error(u),isAuthRetryableFetchError(u)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Deferred;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new AuthSessionMissingError;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={session:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(a,"error",o),isAuthError(o)){const u={session:null,error:o};return isAuthRetryableFetchError(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(u),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await setItemAsync(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),a<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,u]=await getCodeChallengeAndMethod(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(h.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);a.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,a;const{data:o,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:u,error:h}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],a=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),o=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=this._decodeJWT(a.access_token);let h=null;u.aal&&(h=u.aal);let d=h;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=u.amr||[];return{data:{currentLevel:h,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(e){super(e)}}var __awaiter=function(t,e,n,r){function a(o){return o instanceof n?o:new n(function(u){u(o)})}return new(n||(n=Promise))(function(o,u){function h(m){try{f(r.next(m))}catch(b){u(b)}}function d(m){try{f(r.throw(m))}catch(b){u(b)}}function f(m){m.done?o(m.value):a(m.value).then(h,d)}f((r=r.apply(t,e||[])).next())})};class SupabaseClient{constructor(e,n,r){var a,o,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=stripTrailingSlash(e);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:d}),global:DEFAULT_GLOBAL_OPTIONS},m=applySettingDefaults(r??{},f);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(b,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=m.auth)!==null&&u!==void 0?u:{},this.headers,m.global.fetch),this.fetch=fetchWithAuth(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new PostgrestClient(`${h}/rest/v1`,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new StorageClient(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:o,flowType:u,lock:h,debug:d},f,m){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},b),f),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:a,flowType:u,lock:h,debug:d,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(t,e,n)=>new SupabaseClient(t,e,n);function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(e,n){module.exports=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=ne,e.arraysToBytes=he,e.assert=N,e.bytesToString=G,e.createPromiseCapability=Ct,e.createValidAbsoluteUrl=V,e.escapeString=ut,e.getModificationDate=Zt,e.getVerbosityLevel=ue,e.info=q,e.isArrayBuffer=We,e.isArrayEqual=Jt,e.isAscii=yt,e.objectFromMap=Ee,e.objectSize=pe,e.setVerbosityLevel=se,e.shadow=W,e.string32=ae,e.stringToBytes=F,e.stringToPDFString=Be,e.stringToUTF16BEString=ct,e.stringToUTF8String=it,e.unreachable=Z,e.utf8StringToString=nt,e.warn=fe,n(2);const r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const o=1.35;e.LINE_FACTOR=o;const u=.35;e.LINE_DESCENT_FACTOR=u;const h={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=h;const d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=d;const f="pdfjs_internal_editor_";e.AnnotationEditorPrefix=f;const m={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=m;const b={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=b;const E={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=E;const w={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=w;const y={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=y;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=g;const v={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=v;const T={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=T;const R={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=R;const k={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=k;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=x;const S={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=S;const O={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=O;const A={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=A;const I={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=I;const P={O:"PageOpen",C:"PageClose"};e.PageActionEventType=P;const j={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=j;const B={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=B;const ie={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=ie;const oe={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=oe;const le={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=le;const de={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=de;const K={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=K;let J=ie.WARNINGS;function se(xe){Number.isInteger(xe)&&(J=xe)}function ue(){return J}function q(xe){J>=ie.INFOS&&console.log(`Info: ${xe}`)}function fe(xe){J>=ie.WARNINGS&&console.log(`Warning: ${xe}`)}function Z(xe){throw new Error(xe)}function N(xe,ye){xe||Z(ye)}function D(xe){if(!xe)return!1;switch(xe.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function V(xe,ye=null,_e=null){if(!xe)return null;try{if(_e&&typeof xe=="string"){if(_e.addDefaultProtocol&&xe.startsWith("www.")){const Ye=xe.match(/\./g);Ye&&Ye.length>=2&&(xe=`http://${xe}`)}if(_e.tryConvertEncoding)try{xe=it(xe)}catch{}}const Ue=ye?new URL(xe,ye):new URL(xe);if(D(Ue))return Ue}catch{}return null}function W(xe,ye,_e){return Object.defineProperty(xe,ye,{value:_e,enumerable:!0,configurable:!0,writable:!1}),_e}const te=function(){function ye(_e,Ue){this.constructor===ye&&Z("Cannot initialize BaseException."),this.message=_e,this.name=Ue}return ye.prototype=new Error,ye.constructor=ye,ye}();e.BaseException=te;class X extends te{constructor(ye,_e){super(ye,"PasswordException"),this.code=_e}}e.PasswordException=X;class C extends te{constructor(ye,_e){super(ye,"UnknownErrorException"),this.details=_e}}e.UnknownErrorException=C;class L extends te{constructor(ye){super(ye,"InvalidPDFException")}}e.InvalidPDFException=L;class U extends te{constructor(ye){super(ye,"MissingPDFException")}}e.MissingPDFException=U;class $ extends te{constructor(ye,_e){super(ye,"UnexpectedResponseException"),this.status=_e}}e.UnexpectedResponseException=$;class H extends te{constructor(ye){super(ye,"FormatError")}}e.FormatError=H;class Q extends te{constructor(ye){super(ye,"AbortException")}}e.AbortException=Q;function G(xe){(typeof xe!="object"||xe===null||xe.length===void 0)&&Z("Invalid argument for bytesToString");const ye=xe.length,_e=8192;if(ye<_e)return String.fromCharCode.apply(null,xe);const Ue=[];for(let Ye=0;Ye<ye;Ye+=_e){const ot=Math.min(Ye+_e,ye),Xe=xe.subarray(Ye,ot);Ue.push(String.fromCharCode.apply(null,Xe))}return Ue.join("")}function F(xe){typeof xe!="string"&&Z("Invalid argument for stringToBytes");const ye=xe.length,_e=new Uint8Array(ye);for(let Ue=0;Ue<ye;++Ue)_e[Ue]=xe.charCodeAt(Ue)&255;return _e}function ne(xe){if(xe.length!==void 0)return xe.length;if(xe.byteLength!==void 0)return xe.byteLength;Z("Invalid argument for arrayByteLength")}function he(xe){const ye=xe.length;if(ye===1&&xe[0]instanceof Uint8Array)return xe[0];let _e=0;for(let ot=0;ot<ye;ot++)_e+=ne(xe[ot]);let Ue=0;const Ye=new Uint8Array(_e);for(let ot=0;ot<ye;ot++){let Xe=xe[ot];Xe instanceof Uint8Array||(typeof Xe=="string"?Xe=F(Xe):Xe=new Uint8Array(Xe));const zt=Xe.byteLength;Ye.set(Xe,Ue),Ue+=zt}return Ye}function ae(xe){return String.fromCharCode(xe>>24&255,xe>>16&255,xe>>8&255,xe&255)}function pe(xe){return Object.keys(xe).length}function Ee(xe){const ye=Object.create(null);for(const[_e,Ue]of xe)ye[_e]=Ue;return ye}function we(){const xe=new Uint8Array(4);return xe[0]=1,new Uint32Array(xe.buffer,0,1)[0]===1}function Ie(){try{return new Function(""),!0}catch{return!1}}class ve{static get isLittleEndian(){return W(this,"isLittleEndian",we())}static get isEvalSupported(){return W(this,"isEvalSupported",Ie())}static get isOffscreenCanvasSupported(){return W(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=ve;const Ve=[...Array(256).keys()].map(xe=>xe.toString(16).padStart(2,"0"));class Fe{static makeHexColor(ye,_e,Ue){return`#${Ve[ye]}${Ve[_e]}${Ve[Ue]}`}static scaleMinMax(ye,_e){let Ue;ye[0]?(ye[0]<0&&(Ue=_e[0],_e[0]=_e[1],_e[1]=Ue),_e[0]*=ye[0],_e[1]*=ye[0],ye[3]<0&&(Ue=_e[2],_e[2]=_e[3],_e[3]=Ue),_e[2]*=ye[3],_e[3]*=ye[3]):(Ue=_e[0],_e[0]=_e[2],_e[2]=Ue,Ue=_e[1],_e[1]=_e[3],_e[3]=Ue,ye[1]<0&&(Ue=_e[2],_e[2]=_e[3],_e[3]=Ue),_e[2]*=ye[1],_e[3]*=ye[1],ye[2]<0&&(Ue=_e[0],_e[0]=_e[1],_e[1]=Ue),_e[0]*=ye[2],_e[1]*=ye[2]),_e[0]+=ye[4],_e[1]+=ye[4],_e[2]+=ye[5],_e[3]+=ye[5]}static transform(ye,_e){return[ye[0]*_e[0]+ye[2]*_e[1],ye[1]*_e[0]+ye[3]*_e[1],ye[0]*_e[2]+ye[2]*_e[3],ye[1]*_e[2]+ye[3]*_e[3],ye[0]*_e[4]+ye[2]*_e[5]+ye[4],ye[1]*_e[4]+ye[3]*_e[5]+ye[5]]}static applyTransform(ye,_e){const Ue=ye[0]*_e[0]+ye[1]*_e[2]+_e[4],Ye=ye[0]*_e[1]+ye[1]*_e[3]+_e[5];return[Ue,Ye]}static applyInverseTransform(ye,_e){const Ue=_e[0]*_e[3]-_e[1]*_e[2],Ye=(ye[0]*_e[3]-ye[1]*_e[2]+_e[2]*_e[5]-_e[4]*_e[3])/Ue,ot=(-ye[0]*_e[1]+ye[1]*_e[0]+_e[4]*_e[1]-_e[5]*_e[0])/Ue;return[Ye,ot]}static getAxialAlignedBoundingBox(ye,_e){const Ue=Fe.applyTransform(ye,_e),Ye=Fe.applyTransform(ye.slice(2,4),_e),ot=Fe.applyTransform([ye[0],ye[3]],_e),Xe=Fe.applyTransform([ye[2],ye[1]],_e);return[Math.min(Ue[0],Ye[0],ot[0],Xe[0]),Math.min(Ue[1],Ye[1],ot[1],Xe[1]),Math.max(Ue[0],Ye[0],ot[0],Xe[0]),Math.max(Ue[1],Ye[1],ot[1],Xe[1])]}static inverseTransform(ye){const _e=ye[0]*ye[3]-ye[1]*ye[2];return[ye[3]/_e,-ye[1]/_e,-ye[2]/_e,ye[0]/_e,(ye[2]*ye[5]-ye[4]*ye[3])/_e,(ye[4]*ye[1]-ye[5]*ye[0])/_e]}static apply3dTransform(ye,_e){return[ye[0]*_e[0]+ye[1]*_e[1]+ye[2]*_e[2],ye[3]*_e[0]+ye[4]*_e[1]+ye[5]*_e[2],ye[6]*_e[0]+ye[7]*_e[1]+ye[8]*_e[2]]}static singularValueDecompose2dScale(ye){const _e=[ye[0],ye[2],ye[1],ye[3]],Ue=ye[0]*_e[0]+ye[1]*_e[2],Ye=ye[0]*_e[1]+ye[1]*_e[3],ot=ye[2]*_e[0]+ye[3]*_e[2],Xe=ye[2]*_e[1]+ye[3]*_e[3],zt=(Ue+Xe)/2,Rn=Math.sqrt((Ue+Xe)**2-4*(Ue*Xe-ot*Ye))/2,Te=zt+Rn||1,je=zt-Rn||1;return[Math.sqrt(Te),Math.sqrt(je)]}static normalizeRect(ye){const _e=ye.slice(0);return ye[0]>ye[2]&&(_e[0]=ye[2],_e[2]=ye[0]),ye[1]>ye[3]&&(_e[1]=ye[3],_e[3]=ye[1]),_e}static intersect(ye,_e){const Ue=Math.max(Math.min(ye[0],ye[2]),Math.min(_e[0],_e[2])),Ye=Math.min(Math.max(ye[0],ye[2]),Math.max(_e[0],_e[2]));if(Ue>Ye)return null;const ot=Math.max(Math.min(ye[1],ye[3]),Math.min(_e[1],_e[3])),Xe=Math.min(Math.max(ye[1],ye[3]),Math.max(_e[1],_e[3]));return ot>Xe?null:[Ue,ot,Ye,Xe]}static bezierBoundingBox(ye,_e,Ue,Ye,ot,Xe,zt,Rn){const Te=[],je=[[],[]];let Le,ze,qe,tt,_t,Qe,rt,xt;for(let $t=0;$t<2;++$t){if($t===0?(ze=6*ye-12*Ue+6*ot,Le=-3*ye+9*Ue-9*ot+3*zt,qe=3*Ue-3*ye):(ze=6*_e-12*Ye+6*Xe,Le=-3*_e+9*Ye-9*Xe+3*Rn,qe=3*Ye-3*_e),Math.abs(Le)<1e-12){if(Math.abs(ze)<1e-12)continue;tt=-qe/ze,0<tt&&tt<1&&Te.push(tt);continue}rt=ze*ze-4*qe*Le,xt=Math.sqrt(rt),!(rt<0)&&(_t=(-ze+xt)/(2*Le),0<_t&&_t<1&&Te.push(_t),Qe=(-ze-xt)/(2*Le),0<Qe&&Qe<1&&Te.push(Qe))}let Tt=Te.length,et;const ht=Tt;for(;Tt--;)tt=Te[Tt],et=1-tt,je[0][Tt]=et*et*et*ye+3*et*et*tt*Ue+3*et*tt*tt*ot+tt*tt*tt*zt,je[1][Tt]=et*et*et*_e+3*et*et*tt*Ye+3*et*tt*tt*Xe+tt*tt*tt*Rn;return je[0][ht]=ye,je[1][ht]=_e,je[0][ht+1]=zt,je[1][ht+1]=Rn,je[0].length=je[1].length=ht+2,[Math.min(...je[0]),Math.min(...je[1]),Math.max(...je[0]),Math.max(...je[1])]}}e.Util=Fe;const De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Be(xe){if(xe[0]>=""){let _e;if(xe[0]===""&&xe[1]===""?_e="utf-16be":xe[0]===""&&xe[1]===""?_e="utf-16le":xe[0]===""&&xe[1]===""&&xe[2]===""&&(_e="utf-8"),_e)try{const Ue=new TextDecoder(_e,{fatal:!0}),Ye=F(xe);return Ue.decode(Ye)}catch(Ue){fe(`stringToPDFString: "${Ue}".`)}}const ye=[];for(let _e=0,Ue=xe.length;_e<Ue;_e++){const Ye=De[xe.charCodeAt(_e)];ye.push(Ye?String.fromCharCode(Ye):xe.charAt(_e))}return ye.join("")}function ut(xe){return xe.replace(/([()\\\n\r])/g,ye=>ye===`
`?"\\n":ye==="\r"?"\\r":`\\${ye}`)}function yt(xe){return/^[\x00-\x7F]*$/.test(xe)}function ct(xe){const ye=[""];for(let _e=0,Ue=xe.length;_e<Ue;_e++){const Ye=xe.charCodeAt(_e);ye.push(String.fromCharCode(Ye>>8&255),String.fromCharCode(Ye&255))}return ye.join("")}function it(xe){return decodeURIComponent(escape(xe))}function nt(xe){return unescape(encodeURIComponent(xe))}function We(xe){return typeof xe=="object"&&xe!==null&&xe.byteLength!==void 0}function Jt(xe,ye){if(xe.length!==ye.length)return!1;for(let _e=0,Ue=xe.length;_e<Ue;_e++)if(xe[_e]!==ye[_e])return!1;return!0}function Zt(xe=new Date){return[xe.getUTCFullYear().toString(),(xe.getUTCMonth()+1).toString().padStart(2,"0"),xe.getUTCDate().toString().padStart(2,"0"),xe.getUTCHours().toString().padStart(2,"0"),xe.getUTCMinutes().toString().padStart(2,"0"),xe.getUTCSeconds().toString().padStart(2,"0")].join("")}function Ct(){const xe=Object.create(null);let ye=!1;return Object.defineProperty(xe,"settled",{get(){return ye}}),xe.promise=new Promise(function(_e,Ue){xe.resolve=function(Ye){ye=!0,_e(Ye)},xe.reject=function(Ye){ye=!0,Ue(Ye)}}),xe}},(t,e,n)=>{n(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,n,r,a,o,u,h,d,f,Ml,b,E;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:y,NodeCMapReaderFactory:g,NodeStandardFontDataFactory:v}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=y,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=g,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=v}let createPDFNetworkStream;function setPDFNetworkStreamFactory(y){createPDFNetworkStream=y}function getDocument(y){const g=new PDFDocumentLoadingTask;let v;if(typeof y=="string"||y instanceof URL)v={url:y};else if((0,_util.isArrayBuffer)(y))v={data:y};else if(y instanceof PDFDataRangeTransport)v={range:y};else{if(typeof y!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!y.url&&!y.data&&!y.range)throw new Error("Invalid parameter object: need either .data, .range or .url");v=y}const T=Object.create(null);let R=null,k=null;for(const S in v){const O=v[S];switch(S){case"url":if(typeof window<"u")try{T[S]=new URL(O,window.location).href;continue}catch(A){(0,_util.warn)(`Cannot create valid URL: "${A}".`)}else if(typeof O=="string"||O instanceof URL){T[S]=O.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":R=O;continue;case"worker":k=O;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&O instanceof Buffer)T[S]=new Uint8Array(O);else{if(O instanceof Uint8Array)break;if(typeof O=="string")T[S]=(0,_util.stringToBytes)(O);else if(typeof O=="object"&&O!==null&&!isNaN(O.length))T[S]=new Uint8Array(O);else if((0,_util.isArrayBuffer)(O))T[S]=new Uint8Array(O);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}T[S]=O}if(T.CMapReaderFactory=T.CMapReaderFactory||DefaultCMapReaderFactory,T.StandardFontDataFactory=T.StandardFontDataFactory||DefaultStandardFontDataFactory,T.ignoreErrors=T.stopAtErrors!==!0,T.fontExtraProperties=T.fontExtraProperties===!0,T.pdfBug=T.pdfBug===!0,T.enableXfa=T.enableXfa===!0,(!Number.isInteger(T.rangeChunkSize)||T.rangeChunkSize<1)&&(T.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof T.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(T.docBaseUrl))&&(T.docBaseUrl=null),(!Number.isInteger(T.maxImageSize)||T.maxImageSize<-1)&&(T.maxImageSize=-1),typeof T.cMapUrl!="string"&&(T.cMapUrl=null),typeof T.standardFontDataUrl!="string"&&(T.standardFontDataUrl=null),typeof T.useWorkerFetch!="boolean"&&(T.useWorkerFetch=T.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&T.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof T.isEvalSupported!="boolean"&&(T.isEvalSupported=!0),typeof T.disableFontFace!="boolean"&&(T.disableFontFace=_is_node.isNodeJS),typeof T.useSystemFonts!="boolean"&&(T.useSystemFonts=!_is_node.isNodeJS&&!T.disableFontFace),(typeof T.ownerDocument!="object"||T.ownerDocument===null)&&(T.ownerDocument=globalThis.document),typeof T.disableRange!="boolean"&&(T.disableRange=!1),typeof T.disableStream!="boolean"&&(T.disableStream=!1),typeof T.disableAutoFetch!="boolean"&&(T.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(T.verbosity),!k){const S={verbosity:T.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};k=S.port?PDFWorker.fromPort(S):new PDFWorker(S),g._worker=k}const x=g.docId;return k.promise.then(function(){if(g.destroyed)throw new Error("Loading aborted");const S=_fetchDocument(k,T,R,x),O=new Promise(function(A){let I;R?I=new _transport_stream.PDFDataTransportStream({length:T.length,initialData:T.initialData,progressiveDone:T.progressiveDone,contentDispositionFilename:T.contentDispositionFilename,disableRange:T.disableRange,disableStream:T.disableStream},R):T.data||(I=createPDFNetworkStream({url:T.url,length:T.length,httpHeaders:T.httpHeaders,withCredentials:T.withCredentials,rangeChunkSize:T.rangeChunkSize,disableRange:T.disableRange,disableStream:T.disableStream})),A(I)});return Promise.all([S,O]).then(function([A,I]){if(g.destroyed)throw new Error("Loading aborted");const P=new _message_handler.MessageHandler(x,A,k.port),j=new WorkerTransport(P,g,I,T);g._transport=j,P.send("Ready",null)})}).catch(g._capability.reject),g}async function _fetchDocument(y,g,v,T){if(y.destroyed)throw new Error("Worker was destroyed");v&&(g.length=v.length,g.initialData=v.initialData,g.progressiveDone=v.progressiveDone,g.contentDispositionFilename=v.contentDispositionFilename);const R=await y.messageHandler.sendWithPromise("GetDocRequest",{docId:T,apiVersion:"2.16.105",source:{data:g.data,url:g.url,password:g.password,disableAutoFetch:g.disableAutoFetch,rangeChunkSize:g.rangeChunkSize,length:g.length},maxImageSize:g.maxImageSize,disableFontFace:g.disableFontFace,docBaseUrl:g.docBaseUrl,ignoreErrors:g.ignoreErrors,isEvalSupported:g.isEvalSupported,fontExtraProperties:g.fontExtraProperties,enableXfa:g.enableXfa,useSystemFonts:g.useSystemFonts,cMapUrl:g.useWorkerFetch?g.cMapUrl:null,standardFontDataUrl:g.useWorkerFetch?g.standardFontDataUrl:null});if(g.data&&(g.data=null),y.destroyed)throw new Error("Worker was destroyed");return R}const e=class e{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Nl(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var g;this.destroyed=!0,await((g=this._transport)==null?void 0:g.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,Ne(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(g,v,T=!1,R=null){this.length=g,this.initialData=v,this.progressiveDone=T,this.contentDispositionFilename=R,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(g){this._rangeListeners.push(g)}addProgressListener(g){this._progressListeners.push(g)}addProgressiveReadListener(g){this._progressiveReadListeners.push(g)}addProgressiveDoneListener(g){this._progressiveDoneListeners.push(g)}onDataRange(g,v){for(const T of this._rangeListeners)T(g,v)}onDataProgress(g,v){this._readyCapability.promise.then(()=>{for(const T of this._progressListeners)T(g,v)})}onDataProgressiveRead(g){this._readyCapability.promise.then(()=>{for(const v of this._progressiveReadListeners)v(g)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const g of this._progressiveDoneListeners)g()})}transportReady(){this._readyCapability.resolve()}requestDataRange(g,v){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(g,v){this._pdfInfo=g,this._transport=v,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(g){return this._transport.getPage(g)}getPageIndex(g){return this._transport.getPageIndex(g)}getDestinations(){return this._transport.getDestinations()}getDestination(g){return this._transport.getDestination(g)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(g=!1){return this._transport.startCleanup(g||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(g,v,T,R,k=!1){this._pageIndex=g,this._pageInfo=v,this._ownerDocument=R,this._transport=T,this._stats=k?new _display_utils.StatTimer:null,this._pdfBug=k,this.commonObjs=T.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:g,rotation:v=this.rotate,offsetX:T=0,offsetY:R=0,dontFlip:k=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:g,rotation:v,offsetX:T,offsetY:R,dontFlip:k})}getAnnotations({intent:g="display"}={}){const v=this._transport.getRenderingIntent(g);let T=this._annotationPromises.get(v.cacheKey);return T||(T=this._transport.getAnnotations(this._pageIndex,v.renderingIntent),this._annotationPromises.set(v.cacheKey,T),T=T.then(R=>{for(const k of R)k.titleObj!==void 0&&Object.defineProperty(k,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),k.titleObj.str}}),k.contentsObj!==void 0&&Object.defineProperty(k,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),k.contentsObj.str}});return R})),T}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var g;return((g=this._transport._htmlForXfa)==null?void 0:g.children[this._pageIndex])||null}render({canvasContext:g,viewport:v,intent:T="display",annotationMode:R=_util.AnnotationMode.ENABLE,transform:k=null,imageLayer:x=null,canvasFactory:S=null,background:O=null,optionalContentConfigPromise:A=null,annotationCanvasMap:I=null,pageColors:P=null,printAnnotationStorage:j=null}){var se,ue;((se=arguments[0])==null?void 0:se.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_FORMS)),((ue=arguments[0])==null?void 0:ue.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&R===_util.AnnotationMode.ENABLE&&(R=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const B=this._transport.getRenderingIntent(T,R,j);this.pendingCleanup=!1,A||(A=this._transport.getOptionalContentConfig());let ie=this._intentStates.get(B.cacheKey);ie||(ie=Object.create(null),this._intentStates.set(B.cacheKey,ie)),ie.streamReaderCancelTimeout&&(clearTimeout(ie.streamReaderCancelTimeout),ie.streamReaderCancelTimeout=null);const oe=S||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),le=!!(B.renderingIntent&_util.RenderingIntentFlag.PRINT);ie.displayReadyCapability||(ie.displayReadyCapability=(0,_util.createPromiseCapability)(),ie.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(B));const de=q=>{ie.renderTasks.delete(K),(this.cleanupAfterRender||le)&&(this.pendingCleanup=!0),this._tryCleanup(),q?(K.capability.reject(q),this._abortOperatorList({intentState:ie,reason:q instanceof Error?q:new Error(q)})):K.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},K=new InternalRenderTask({callback:de,params:{canvasContext:g,viewport:v,transform:k,imageLayer:x,background:O},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:I,operatorList:ie.operatorList,pageIndex:this._pageIndex,canvasFactory:oe,useRequestAnimationFrame:!le,pdfBug:this._pdfBug,pageColors:P});(ie.renderTasks||(ie.renderTasks=new Set)).add(K);const J=K.task;return Promise.all([ie.displayReadyCapability.promise,A]).then(([q,fe])=>{if(this.pendingCleanup){de();return}this._stats&&this._stats.time("Rendering"),K.initializeGraphics({transparency:q,optionalContentConfig:fe}),K.operatorListChanged()}).catch(de),J}getOperatorList({intent:g="display",annotationMode:v=_util.AnnotationMode.ENABLE,printAnnotationStorage:T=null}={}){function R(){x.operatorList.lastChunk&&(x.opListReadCapability.resolve(x.operatorList),x.renderTasks.delete(S))}const k=this._transport.getRenderingIntent(g,v,T,!0);let x=this._intentStates.get(k.cacheKey);x||(x=Object.create(null),this._intentStates.set(k.cacheKey,x));let S;return x.opListReadCapability||(S=Object.create(null),S.operatorListChanged=R,x.opListReadCapability=(0,_util.createPromiseCapability)(),(x.renderTasks||(x.renderTasks=new Set)).add(S),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(k)),x.opListReadCapability.promise}streamTextContent({disableCombineTextItems:g=!1,includeMarkedContent:v=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:g!==!0,includeMarkedContent:v===!0},{highWaterMark:100,size(R){return R.items.length}})}getTextContent(g={}){if(this._transport._htmlForXfa)return this.getXfa().then(T=>_xfa_text.XfaText.textContent(T));const v=this.streamTextContent(g);return new Promise(function(T,R){function k(){x.read().then(function({value:O,done:A}){if(A){T(S);return}Object.assign(S.styles,O.styles),S.items.push(...O.items),k()},R)}const x=v.getReader(),S={items:[],styles:Object.create(null)};k()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const g=[];for(const v of this._intentStates.values())if(this._abortOperatorList({intentState:v,reason:new Error("Page was destroyed."),force:!0}),!v.opListReadCapability)for(const T of v.renderTasks)g.push(T.completed),T.cancel();this.objs.clear();for(const v of this._bitmaps)v.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(g)}cleanup(g=!1){return this.pendingCleanup=!0,this._tryCleanup(g)}_tryCleanup(g=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:v,operatorList:T}of this._intentStates.values())if(v.size>0||!T.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,g&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const v of this._bitmaps)v.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(g,v){const T=this._intentStates.get(v);T&&(this._stats&&this._stats.timeEnd("Page Request"),T.displayReadyCapability&&T.displayReadyCapability.resolve(g))}_renderPageChunk(g,v){for(let T=0,R=g.length;T<R;T++)v.operatorList.fnArray.push(g.fnArray[T]),v.operatorList.argsArray.push(g.argsArray[T]);v.operatorList.lastChunk=g.lastChunk,v.operatorList.separateAnnots=g.separateAnnots;for(const T of v.renderTasks)T.operatorListChanged();g.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:g,cacheKey:v,annotationStorageMap:T}){const k=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:g,cacheKey:v,annotationStorage:T}).getReader(),x=this._intentStates.get(v);x.streamReader=k;const S=()=>{k.read().then(({value:O,done:A})=>{if(A){x.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(O,x),S())},O=>{if(x.streamReader=null,!this._transport.destroyed){if(x.operatorList){x.operatorList.lastChunk=!0;for(const A of x.renderTasks)A.operatorListChanged();this._tryCleanup()}if(x.displayReadyCapability)x.displayReadyCapability.reject(O);else if(x.opListReadCapability)x.opListReadCapability.reject(O);else throw O}})};S()}_abortOperatorList({intentState:g,reason:v,force:T=!1}){if(g.streamReader){if(!T){if(g.renderTasks.size>0)return;if(v instanceof _display_utils.RenderingCancelledException){g.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:g,reason:v,force:!0}),g.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(g.streamReader.cancel(new _util.AbortException(v.message)).catch(()=>{}),g.streamReader=null,!this._transport.destroyed){for(const[R,k]of this._intentStates)if(k===g){this._intentStates.delete(R);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(g,v){const T={data:structuredClone(g,v)};this._deferred.then(()=>{for(const R of this._listeners)R.call(this,T)})}addEventListener(g,v){this._listeners.push(v)}removeEventListener(g,v){const T=this._listeners.indexOf(v);this._listeners.splice(T,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const y=(n=document==null?void 0:document.currentScript)==null?void 0:n.src;y&&(PDFWorkerUtil.fallbackWorkerSrc=y.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(y,g){let v;try{if(v=new URL(y),!v.origin||v.origin==="null")return!1}catch{return!1}const T=new URL(g,v);return v.origin===T.origin},PDFWorkerUtil.createCDNWrapper=function(y){const g=`importScripts("${y}");`;return URL.createObjectURL(new Blob([g]))}}const _PDFWorker=class _PDFWorker{constructor({name:y=null,port:g=null,verbosity:v=(0,_util.getVerbosityLevel)()}={}){if(g&&ee(_PDFWorker,r).has(g))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=y,this.destroyed=!1,this.verbosity=v,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,g){ee(_PDFWorker,r).set(g,this),this._initializeFromPort(g);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(y){this._port=y,this._messageHandler=new _message_handler.MessageHandler("main","worker",y),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:y}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,y)||(y=PDFWorkerUtil.createCDNWrapper(new URL(y,window.location).href));const g=new Worker(y),v=new _message_handler.MessageHandler("main","worker",g),T=()=>{g.removeEventListener("error",R),v.destroy(),g.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},R=()=>{this._webWorker||T()};g.addEventListener("error",R),v.on("test",x=>{if(g.removeEventListener("error",R),this.destroyed){T();return}x?(this._messageHandler=v,this._port=g,this._webWorker=g,this._readyCapability.resolve(),v.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),v.destroy(),g.terminate())}),v.on("ready",x=>{if(g.removeEventListener("error",R),this.destroyed){T();return}try{k()}catch{this._setupFakeWorker()}});const k=()=>{const x=new Uint8Array;v.send("test",x,[x.buffer])};k();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(y=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const g=new LoopbackPort;this._port=g;const v=`fake${PDFWorkerUtil.fakeWorkerId++}`,T=new _message_handler.MessageHandler(v+"_worker",v,g);y.setup(T,g);const R=new _message_handler.MessageHandler(v,v+"_worker",g);this._messageHandler=R,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})}).catch(y=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${y.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ee(_PDFWorker,r).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(y){if(!(y!=null&&y.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ee(this,r).has(y.port)?ee(this,r).get(y.port):new _PDFWorker(y)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var y;try{return((y=globalThis.pdfjsWorker)==null?void 0:y.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};r=new WeakMap,Ne(_PDFWorker,r,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(g,v,T,R){Ne(this,a,null);Ne(this,o,new Map);Ne(this,u,new Map);Ne(this,h,null);this.messageHandler=g,this.loadingTask=v,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:v.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:R.ownerDocument,styleElement:R.styleElement}),this._params=R,R.useWorkerFetch||(this.CMapReaderFactory=new R.CMapReaderFactory({baseUrl:R.cMapUrl,isCompressed:R.cMapPacked}),this.StandardFontDataFactory=new R.StandardFontDataFactory({baseUrl:R.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=T,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return ee(this,a)}getRenderingIntent(g,v=_util.AnnotationMode.ENABLE,T=null,R=!1){let k=_util.RenderingIntentFlag.DISPLAY,x=null;switch(g){case"any":k=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":k=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${g}`)}switch(v){case _util.AnnotationMode.DISABLE:k+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:k+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:k+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,x=(k&_util.RenderingIntentFlag.PRINT&&T instanceof _annotation_storage.PrintAnnotationStorage?T:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${v}`)}return R&&(k+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:k,cacheKey:`${k}_${_annotation_storage.AnnotationStorage.getHash(x)}`,annotationStorageMap:x}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const g=[];for(const T of ee(this,o).values())g.push(T._destroy());ee(this,o).clear(),ee(this,u).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const v=this.messageHandler.sendWithPromise("Terminate",null);return g.push(v),Promise.all(g).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Me(this,h,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:g,loadingTask:v}=this;g.on("GetReader",(T,R)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=k=>{this._lastProgress={loaded:k.loaded,total:k.total}},R.onPull=()=>{this._fullReader.read().then(function({value:k,done:x}){if(x){R.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(k),"GetReader - expected an ArrayBuffer."),R.enqueue(new Uint8Array(k),1,[k])}).catch(k=>{R.error(k)})},R.onCancel=k=>{this._fullReader.cancel(k),R.ready.catch(x=>{if(!this.destroyed)throw x})}}),g.on("ReaderHeadersReady",T=>{const R=(0,_util.createPromiseCapability)(),k=this._fullReader;return k.headersReady.then(()=>{var x;(!k.isStreamingSupported||!k.isRangeSupported)&&(this._lastProgress&&((x=v.onProgress)==null||x.call(v,this._lastProgress)),k.onProgress=S=>{var O;(O=v.onProgress)==null||O.call(v,{loaded:S.loaded,total:S.total})}),R.resolve({isStreamingSupported:k.isStreamingSupported,isRangeSupported:k.isRangeSupported,contentLength:k.contentLength})},R.reject),R.promise}),g.on("GetRangeReader",(T,R)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const k=this._networkStream.getRangeReader(T.begin,T.end);if(!k){R.close();return}R.onPull=()=>{k.read().then(function({value:x,done:S}){if(S){R.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(x),"GetRangeReader - expected an ArrayBuffer."),R.enqueue(new Uint8Array(x),1,[x])}).catch(x=>{R.error(x)})},R.onCancel=x=>{k.cancel(x),R.ready.catch(S=>{if(!this.destroyed)throw S})}}),g.on("GetDoc",({pdfInfo:T})=>{this._numPages=T.numPages,this._htmlForXfa=T.htmlForXfa,delete T.htmlForXfa,v._capability.resolve(new PDFDocumentProxy(T,this))}),g.on("DocException",function(T){let R;switch(T.name){case"PasswordException":R=new _util.PasswordException(T.message,T.code);break;case"InvalidPDFException":R=new _util.InvalidPDFException(T.message);break;case"MissingPDFException":R=new _util.MissingPDFException(T.message);break;case"UnexpectedResponseException":R=new _util.UnexpectedResponseException(T.message,T.status);break;case"UnknownErrorException":R=new _util.UnknownErrorException(T.message,T.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}v._capability.reject(R)}),g.on("PasswordRequest",T=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),v.onPassword){const R=k=>{k instanceof Error?this._passwordCapability.reject(k):this._passwordCapability.resolve({password:k})};try{v.onPassword(R,T.code)}catch(k){this._passwordCapability.reject(k)}}else this._passwordCapability.reject(new _util.PasswordException(T.message,T.code));return this._passwordCapability.promise}),g.on("DataLoaded",T=>{var R;(R=v.onProgress)==null||R.call(v,{loaded:T.length,total:T.length}),this.downloadInfoCapability.resolve(T)}),g.on("StartRenderPage",T=>{if(this.destroyed)return;ee(this,o).get(T.pageIndex)._startRenderPage(T.transparency,T.cacheKey)}),g.on("commonobj",([T,R,k])=>{var x;if(!this.destroyed&&!this.commonObjs.has(T))switch(R){case"Font":const S=this._params;if("error"in k){const I=k.error;(0,_util.warn)(`Error during font loading: ${I}`),this.commonObjs.resolve(T,I);break}let O=null;S.pdfBug&&((x=globalThis.FontInspector)!=null&&x.enabled)&&(O={registerFont(I,P){globalThis.FontInspector.fontAdded(I,P)}});const A=new _font_loader.FontFaceObject(k,{isEvalSupported:S.isEvalSupported,disableFontFace:S.disableFontFace,ignoreErrors:S.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:O});this.fontLoader.bind(A).catch(I=>g.sendWithPromise("FontFallback",{id:T})).finally(()=>{!S.fontExtraProperties&&A.data&&(A.data=null),this.commonObjs.resolve(T,A)});break;case"FontPath":case"Image":this.commonObjs.resolve(T,k);break;default:throw new Error(`Got unknown common object type ${R}`)}}),g.on("obj",([T,R,k,x])=>{var O;if(this.destroyed)return;const S=ee(this,o).get(R);if(!S.objs.has(T))switch(k){case"Image":S.objs.resolve(T,x);const A=8e6;if(x){let I;if(x.bitmap){const{bitmap:P,width:j,height:B}=x;I=j*B*4,S._bitmaps.add(P)}else I=((O=x.data)==null?void 0:O.length)||0;I>A&&(S.cleanupAfterRender=!0)}break;case"Pattern":S.objs.resolve(T,x);break;default:throw new Error(`Got unknown object type ${k}`)}}),g.on("DocProgress",T=>{var R;this.destroyed||(R=v.onProgress)==null||R.call(v,{loaded:T.loaded,total:T.total})}),g.on("DocStats",T=>{this.destroyed||Me(this,a,Object.freeze({streamTypes:Object.freeze(T.streamTypes),fontTypes:Object.freeze(T.fontTypes)}))}),g.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),g.on("FetchBuiltInCMap",T=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(T):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),g.on("FetchStandardFontData",T=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(T):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:g}){var v,T;this.destroyed||(T=(v=this.loadingTask).onUnsupportedFeature)==null||T.call(v,g)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(g){if(!Number.isInteger(g)||g<=0||g>this._numPages)return Promise.reject(new Error("Invalid page request."));const v=g-1,T=ee(this,u).get(v);if(T)return T;const R=this.messageHandler.sendWithPromise("GetPage",{pageIndex:v}).then(k=>{if(this.destroyed)throw new Error("Transport destroyed");const x=new PDFPageProxy(v,k,this,this._params.ownerDocument,this._params.pdfBug);return ee(this,o).set(v,x),x});return ee(this,u).set(v,R),R}getPageIndex(g){return typeof g!="object"||g===null||!Number.isInteger(g.num)||g.num<0||!Number.isInteger(g.gen)||g.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:g.num,gen:g.gen})}getAnnotations(g,v){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:g,intent:v})}saveDocument(){var g;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((g=this._fullReader)==null?void 0:g.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(g){return typeof g!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:g})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(g){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:g})}getStructTree(g){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:g})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(g=>new _optional_content_config.OptionalContentConfig(g))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return ee(this,h)||Me(this,h,this.messageHandler.sendWithPromise("GetMetadata",null).then(g=>{var v,T;return{info:g[0],metadata:g[1]?new _metadata.Metadata(g[1]):null,contentDispositionFilename:((v=this._fullReader)==null?void 0:v.filename)??null,contentLength:((T=this._fullReader)==null?void 0:T.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(g=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const v of ee(this,o).values())if(!v.cleanup())throw new Error(`startCleanup: Page ${v.pageNumber} is currently rendering.`);this.commonObjs.clear(),g||this.fontLoader.clear(),Me(this,h,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const g=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:g.disableAutoFetch,enableXfa:g.enableXfa})}}a=new WeakMap,o=new WeakMap,u=new WeakMap,h=new WeakMap;class PDFObjects{constructor(){Ne(this,f);Ne(this,d,Object.create(null))}get(g,v=null){if(v){const R=ke(this,f,Ml).call(this,g);return R.capability.promise.then(()=>v(R.data)),null}const T=ee(this,d)[g];if(!(T!=null&&T.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${g}.`);return T.data}has(g){const v=ee(this,d)[g];return(v==null?void 0:v.capability.settled)||!1}resolve(g,v=null){const T=ke(this,f,Ml).call(this,g);T.data=v,T.capability.resolve()}clear(){Me(this,d,Object.create(null))}}d=new WeakMap,f=new WeakSet,Ml=function(g){const v=ee(this,d)[g];return v||(ee(this,d)[g]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(g){Ne(this,b,null);Me(this,b,g),this.onContinue=null}get promise(){return ee(this,b).capability.promise}cancel(){ee(this,b).cancel()}get separateAnnots(){const{separateAnnots:g}=ee(this,b).operatorList;if(!g)return!1;const{annotationCanvasMap:v}=ee(this,b);return g.form||g.canvas&&(v==null?void 0:v.size)>0}}b=new WeakMap,exports.RenderTask=RenderTask;const w=class w{constructor({callback:g,params:v,objs:T,commonObjs:R,annotationCanvasMap:k,operatorList:x,pageIndex:S,canvasFactory:O,useRequestAnimationFrame:A=!1,pdfBug:I=!1,pageColors:P=null}){this.callback=g,this.params=v,this.objs=T,this.commonObjs=R,this.annotationCanvasMap=k,this.operatorListIdx=null,this.operatorList=x,this._pageIndex=S,this.canvasFactory=O,this._pdfBug=I,this.pageColors=P,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=A===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=v.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:g=!1,optionalContentConfig:v}){var O;if(this.cancelled)return;if(this._canvas){if(ee(w,E).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ee(w,E).add(this._canvas)}this._pdfBug&&((O=globalThis.StepperManager)!=null&&O.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:T,viewport:R,transform:k,imageLayer:x,background:S}=this.params;this.gfx=new _canvas.CanvasGraphics(T,this.commonObjs,this.objs,this.canvasFactory,x,v,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:k,viewport:R,transparency:g,background:S}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(g=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&ee(w,E).delete(this._canvas),this.callback(g||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&ee(w,E).delete(this._canvas),this.callback())))}};E=new WeakMap,Ne(w,E,new WeakSet);let InternalRenderTask=w;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(t,e,n)=>{var d,Cf,m;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=n(1),a=n(6),o=n(10);class u{constructor(){Ne(this,d);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(E,w){const y=this._storage.get(E);return y===void 0?w:Object.assign(w,y)}getRawValue(E){return this._storage.get(E)}remove(E){if(this._storage.delete(E),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const w of this._storage.values())if(w instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(E,w){const y=this._storage.get(E);let g=!1;if(y!==void 0)for(const[v,T]of Object.entries(w))y[v]!==T&&(g=!0,y[v]=T);else g=!0,this._storage.set(E,w);g&&ke(this,d,Cf).call(this),w instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(w.constructor._type)}has(E){return this._storage.has(E)}getAll(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(this._storage.size===0)return null;const E=new Map;for(const[w,y]of this._storage){const g=y instanceof a.AnnotationEditor?y.serialize():y;g&&E.set(w,g)}return E}static getHash(E){if(!E)return"";const w=new o.MurmurHash3_64;for(const[y,g]of E)w.update(`${y}:${JSON.stringify(g)}`);return w.hexdigest()}}d=new WeakSet,Cf=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=u;class h extends u{constructor(w){super();Ne(this,m,null);Me(this,m,structuredClone(w.serializable))}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return ee(this,m)}}m=new WeakMap,e.PrintAnnotationStorage=h},(t,e,n)=>{var u,h,d,f,m,b;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=n(7),a=n(1);const E=class E{constructor(y){Ne(this,u,this.focusin.bind(this));Ne(this,h,this.focusout.bind(this));Ne(this,d,!1);Ne(this,f,!1);Ne(this,m,!1);Ne(this,b,E._zIndex++);this.constructor===E&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=y.parent,this.id=y.id,this.width=this.height=null,this.pageIndex=y.parent.pageIndex,this.name=y.name,this.div=null;const[g,v]=this.parent.viewportBaseDimensions;this.x=y.x/g,this.y=y.y/v,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ee(this,b)}focusin(y){ee(this,d)?Me(this,d,!1):this.parent.setSelected(this)}focusout(y){if(!this.isAttachedToDOM)return;const g=y.relatedTarget;g!=null&&g.closest(`#${this.id}`)||(y.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(y){const g=this.parent.div.getBoundingClientRect();this.startX=y.clientX-g.x,this.startY=y.clientY-g.y,y.dataTransfer.setData("text/plain",this.id),y.dataTransfer.effectAllowed="move"}setAt(y,g,v,T){const[R,k]=this.parent.viewportBaseDimensions;[v,T]=this.screenToPageTranslation(v,T),this.x=(y+v)/R,this.y=(g+T)/k,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(y,g){const[v,T]=this.parent.viewportBaseDimensions;[y,g]=this.screenToPageTranslation(y,g),this.x+=y/v,this.y+=g/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(y,g){const{rotation:v}=this.parent.viewport;switch(v){case 90:return[g,-y];case 180:return[-y,-g];case 270:return[-g,y];default:return[y,g]}}setDims(y,g){const[v,T]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*y/v}%`,this.div.style.height=`${100*g/T}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",ee(this,u)),this.div.addEventListener("focusout",ee(this,h));const[y,g]=this.getInitialTranslation();return this.translate(y,g),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(y){const g=r.KeyboardManager.platform.isMac;if(y.button!==0||y.ctrlKey&&g){y.preventDefault();return}y.ctrlKey&&!g||y.shiftKey||y.metaKey&&g?this.parent.toggleSelected(this):this.parent.setSelected(this),Me(this,d,!0)}getRect(y,g){const[v,T]=this.parent.viewportBaseDimensions,[R,k]=this.parent.pageDimensions,x=R*y/v,S=k*g/T,O=this.x*R,A=this.y*k,I=this.width*R,P=this.height*k;switch(this.rotation){case 0:return[O+x,k-A-S-P,O+x+I,k-A-S];case 90:return[O+S,k-A+x,O+S+P,k-A+x+I];case 180:return[O-x-I,k-A+S,O-x,k-A+S+P];case 270:return[O-S-P,k-A-x-I,O-S,k-A-x];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(y,g){const[v,T,R,k]=y,x=R-v,S=k-T;switch(this.rotation){case 0:return[v,g-k,x,S];case 90:return[v,g-T,S,x];case 180:return[R,g-T,x,S];case 270:return[R,g-k,S,x];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Me(this,m,!0)}disableEditMode(){Me(this,m,!1)}isInEditMode(){return ee(this,m)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var y;(y=this.div)==null||y.addEventListener("focusin",ee(this,u))}serialize(){(0,a.unreachable)("An editor must be serializable")}static deserialize(y,g){const v=new this.prototype.constructor({parent:g,id:g.getNextId()});v.rotation=y.rotation;const[T,R]=g.pageDimensions,[k,x,S,O]=v.getRectInCurrentCoords(y.rect,R);return v.x=k/T,v.y=x/R,v.width=S/T,v.height=O/R,v}remove(){this.div.removeEventListener("focusin",ee(this,u)),this.div.removeEventListener("focusout",ee(this,h)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var y;(y=this.div)==null||y.classList.add("selectedEditor")}unselect(){var y;(y=this.div)==null||y.classList.remove("selectedEditor")}updateParams(y,g){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return ee(this,f)}set isEditing(y){Me(this,f,y),y?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,m=new WeakMap,b=new WeakMap,Et(E,"_colorManager",new r.ColorManager),Et(E,"_zIndex",1);let o=E;e.AnnotationEditor=o},(t,e,n)=>{var w,y,g,v,T,R,Rf,S,A,I,P,j,B,ie,oe,le,de,K,J,se,ue,q,fe,Z,N,D,Of,Ll,cn,mi,kf,Pf,jl,gi,wa;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=o,e.opacityToHex=u;var r=n(1),a=n(8);function o(G,F,ne){for(const he of ne)F.addEventListener(he,G[he].bind(G))}function u(G){return Math.round(Math.min(255,Math.max(1,255*G))).toString(16).padStart(2,"0")}class h{constructor(){Ne(this,w,0)}getId(){return`${r.AnnotationEditorPrefix}${Nl(this,w)._++}`}}w=new WeakMap;class d{constructor(F=128){Ne(this,y,[]);Ne(this,g,!1);Ne(this,v);Ne(this,T,-1);Me(this,v,F)}add({cmd:F,undo:ne,mustExec:he,type:ae=NaN,overwriteIfSameType:pe=!1,keepUndo:Ee=!1}){if(he&&F(),ee(this,g))return;const we={cmd:F,undo:ne,type:ae};if(ee(this,T)===-1){ee(this,y).length>0&&(ee(this,y).length=0),Me(this,T,0),ee(this,y).push(we);return}if(pe&&ee(this,y)[ee(this,T)].type===ae){Ee&&(we.undo=ee(this,y)[ee(this,T)].undo),ee(this,y)[ee(this,T)]=we;return}const Ie=ee(this,T)+1;Ie===ee(this,v)?ee(this,y).splice(0,1):(Me(this,T,Ie),Ie<ee(this,y).length&&ee(this,y).splice(Ie)),ee(this,y).push(we)}undo(){ee(this,T)!==-1&&(Me(this,g,!0),ee(this,y)[ee(this,T)].undo(),Me(this,g,!1),Me(this,T,ee(this,T)-1))}redo(){ee(this,T)<ee(this,y).length-1&&(Me(this,T,ee(this,T)+1),Me(this,g,!0),ee(this,y)[ee(this,T)].cmd(),Me(this,g,!1))}hasSomethingToUndo(){return ee(this,T)!==-1}hasSomethingToRedo(){return ee(this,T)<ee(this,y).length-1}destroy(){Me(this,y,null)}}y=new WeakMap,g=new WeakMap,v=new WeakMap,T=new WeakMap,e.CommandManager=d;const x=class x{constructor(F){Ne(this,R);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ne=x.platform.isMac;for(const[he,ae]of F)for(const pe of he){const Ee=pe.startsWith("mac+");ne&&Ee?(this.callbacks.set(pe.slice(4),ae),this.allKeys.add(pe.split("+").at(-1))):!ne&&!Ee&&(this.callbacks.set(pe,ae),this.allKeys.add(pe.split("+").at(-1)))}}static get platform(){const F=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:F.includes("Win"),isMac:F.includes("Mac")})}exec(F,ne){if(!this.allKeys.has(ne.key))return;const he=this.callbacks.get(ke(this,R,Rf).call(this,ne));he&&(he.bind(F)(),ne.stopPropagation(),ne.preventDefault())}};R=new WeakSet,Rf=function(F){F.altKey&&this.buffer.push("alt"),F.ctrlKey&&this.buffer.push("ctrl"),F.metaKey&&this.buffer.push("meta"),F.shiftKey&&this.buffer.push("shift"),this.buffer.push(F.key);const ne=this.buffer.join("+");return this.buffer.length=0,ne};let f=x;e.KeyboardManager=f;class m{constructor(){Ne(this,S,null)}copy(F){F&&(Array.isArray(F)?Me(this,S,F.map(ne=>ne.serialize())):Me(this,S,[F.serialize()]),Me(this,S,ee(this,S).filter(ne=>!!ne)),ee(this,S).length===0&&Me(this,S,null))}paste(){return ee(this,S)}isEmpty(){return ee(this,S)===null}destroy(){Me(this,S,null)}}S=new WeakMap;const O=class O{get _colors(){const F=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(F),(0,r.shadow)(this,"_colors",F)}convert(F){const ne=(0,a.getRGB)(F);if(!window.matchMedia("(forced-colors: active)").matches)return ne;for(const[he,ae]of this._colors)if(ae.every((pe,Ee)=>pe===ne[Ee]))return O._colorsMapping.get(he);return ne}getHexCode(F){const ne=this._colors.get(F);return ne?r.Util.makeHexColor(...ne):F}};Et(O,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let b=O;e.ColorManager=b;const Q=class Q{constructor(F,ne){Ne(this,D);Ne(this,A,null);Ne(this,I,new Map);Ne(this,P,new Map);Ne(this,j,new m);Ne(this,B,new d);Ne(this,ie,0);Ne(this,oe,null);Ne(this,le,null);Ne(this,de,new h);Ne(this,K,!1);Ne(this,J,r.AnnotationEditorType.NONE);Ne(this,se,new Set);Ne(this,ue,this.keydown.bind(this));Ne(this,q,this.onEditingAction.bind(this));Ne(this,fe,this.onPageChanging.bind(this));Ne(this,Z,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Ne(this,N,null);Me(this,N,F),Me(this,le,ne),ee(this,le)._on("editingaction",ee(this,q)),ee(this,le)._on("pagechanging",ee(this,fe))}destroy(){ke(this,D,Ll).call(this),ee(this,le)._off("editingaction",ee(this,q)),ee(this,le)._off("pagechanging",ee(this,fe));for(const F of ee(this,P).values())F.destroy();ee(this,P).clear(),ee(this,I).clear(),Me(this,A,null),ee(this,se).clear(),ee(this,j).destroy(),ee(this,B).destroy()}onPageChanging({pageNumber:F}){Me(this,ie,F-1)}focusMainContainer(){ee(this,N).focus()}keydown(F){var ne;(ne=this.getActive())!=null&&ne.shouldGetKeyboardEvents()||Q._keyboardManager.exec(this,F)}onEditingAction(F){["undo","redo","cut","copy","paste","delete","selectAll"].includes(F.name)&&this[F.name]()}setEditingState(F){F?(ke(this,D,Of).call(this),ke(this,D,cn).call(this,{isEditing:ee(this,J)!==r.AnnotationEditorType.NONE,isEmpty:ke(this,D,gi).call(this),hasSomethingToUndo:ee(this,B).hasSomethingToUndo(),hasSomethingToRedo:ee(this,B).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:ee(this,j).isEmpty()})):(ke(this,D,Ll).call(this),ke(this,D,cn).call(this,{isEditing:!1}))}registerEditorTypes(F){Me(this,oe,F);for(const ne of ee(this,oe))ke(this,D,mi).call(this,ne.defaultPropertiesToUpdate)}getId(){return ee(this,de).getId()}addLayer(F){ee(this,P).set(F.pageIndex,F),ee(this,K)?F.enable():F.disable()}removeLayer(F){ee(this,P).delete(F.pageIndex)}updateMode(F){if(Me(this,J,F),F===r.AnnotationEditorType.NONE)this.setEditingState(!1),ke(this,D,Pf).call(this);else{this.setEditingState(!0),ke(this,D,kf).call(this);for(const ne of ee(this,P).values())ne.updateMode(F)}}updateToolbar(F){F!==ee(this,J)&&ee(this,le).dispatch("switchannotationeditormode",{source:this,mode:F})}updateParams(F,ne){for(const he of ee(this,se))he.updateParams(F,ne);for(const he of ee(this,oe))he.updateDefaultParams(F,ne)}getEditors(F){const ne=[];for(const he of ee(this,I).values())he.pageIndex===F&&ne.push(he);return ne}getEditor(F){return ee(this,I).get(F)}addEditor(F){ee(this,I).set(F.id,F)}removeEditor(F){ee(this,I).delete(F.id),this.unselect(F)}setActiveEditor(F){ee(this,A)!==F&&(Me(this,A,F),F&&ke(this,D,mi).call(this,F.propertiesToUpdate))}toggleSelected(F){if(ee(this,se).has(F)){ee(this,se).delete(F),F.unselect(),ke(this,D,cn).call(this,{hasSelectedEditor:this.hasSelection});return}ee(this,se).add(F),F.select(),ke(this,D,mi).call(this,F.propertiesToUpdate),ke(this,D,cn).call(this,{hasSelectedEditor:!0})}setSelected(F){for(const ne of ee(this,se))ne!==F&&ne.unselect();ee(this,se).clear(),ee(this,se).add(F),F.select(),ke(this,D,mi).call(this,F.propertiesToUpdate),ke(this,D,cn).call(this,{hasSelectedEditor:!0})}isSelected(F){return ee(this,se).has(F)}unselect(F){F.unselect(),ee(this,se).delete(F),ke(this,D,cn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ee(this,se).size!==0}undo(){ee(this,B).undo(),ke(this,D,cn).call(this,{hasSomethingToUndo:ee(this,B).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ke(this,D,gi).call(this)})}redo(){ee(this,B).redo(),ke(this,D,cn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ee(this,B).hasSomethingToRedo(),isEmpty:ke(this,D,gi).call(this)})}addCommands(F){ee(this,B).add(F),ke(this,D,cn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ke(this,D,gi).call(this)})}delete(){if(ee(this,A)&&ee(this,A).commitOrRemove(),!this.hasSelection)return;const F=[...ee(this,se)],ne=()=>{for(const ae of F)ae.remove()},he=()=>{for(const ae of F)ke(this,D,jl).call(this,ae)};this.addCommands({cmd:ne,undo:he,mustExec:!0})}copy(){if(ee(this,A)&&ee(this,A).commitOrRemove(),this.hasSelection){const F=[];for(const ne of ee(this,se))ne.isEmpty()||F.push(ne);if(F.length===0)return;ee(this,j).copy(F),ke(this,D,cn).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(ee(this,j).isEmpty())return;this.unselectAll();const F=ee(this,P).get(ee(this,ie)),ne=ee(this,j).paste().map(pe=>F.deserialize(pe)),he=()=>{for(const pe of ne)ke(this,D,jl).call(this,pe);ke(this,D,wa).call(this,ne)},ae=()=>{for(const pe of ne)pe.remove()};this.addCommands({cmd:he,undo:ae,mustExec:!0})}selectAll(){for(const F of ee(this,se))F.commit();ke(this,D,wa).call(this,ee(this,I).values())}unselectAll(){if(ee(this,A)){ee(this,A).commitOrRemove();return}if(ke(this,D,wa).size!==0){for(const F of ee(this,se))F.unselect();ee(this,se).clear(),ke(this,D,cn).call(this,{hasSelectedEditor:!1})}}isActive(F){return ee(this,A)===F}getActive(){return ee(this,A)}getMode(){return ee(this,J)}};A=new WeakMap,I=new WeakMap,P=new WeakMap,j=new WeakMap,B=new WeakMap,ie=new WeakMap,oe=new WeakMap,le=new WeakMap,de=new WeakMap,K=new WeakMap,J=new WeakMap,se=new WeakMap,ue=new WeakMap,q=new WeakMap,fe=new WeakMap,Z=new WeakMap,N=new WeakMap,D=new WeakSet,Of=function(){ee(this,N).addEventListener("keydown",ee(this,ue))},Ll=function(){ee(this,N).removeEventListener("keydown",ee(this,ue))},cn=function(F){Object.entries(F).some(([he,ae])=>ee(this,Z)[he]!==ae)&&ee(this,le).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ee(this,Z),F)})},mi=function(F){ee(this,le).dispatch("annotationeditorparamschanged",{source:this,details:F})},kf=function(){if(!ee(this,K)){Me(this,K,!0);for(const F of ee(this,P).values())F.enable()}},Pf=function(){if(this.unselectAll(),ee(this,K)){Me(this,K,!1);for(const F of ee(this,P).values())F.disable()}},jl=function(F){const ne=ee(this,P).get(F.pageIndex);ne?ne.addOrRebuild(F):this.addEditor(F)},gi=function(){if(ee(this,I).size===0)return!0;if(ee(this,I).size===1)for(const F of ee(this,I).values())return F.isEmpty();return!1},wa=function(F){ee(this,se).clear();for(const ne of F)ne.isEmpty()||(ee(this,se).add(ne),ne.select());ke(this,D,cn).call(this,{hasSelectedEditor:!0})},Et(Q,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],Q.prototype.selectAll],[["ctrl+c","mac+meta+c"],Q.prototype.copy],[["ctrl+v","mac+meta+v"],Q.prototype.paste],[["ctrl+x","mac+meta+x"],Q.prototype.cut],[["ctrl+z","mac+meta+z"],Q.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Q.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Q.prototype.delete],[["Escape","mac+Escape"],Q.prototype.unselectAll]]));let E=Q;e.AnnotationEditorUIManager=E},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=O,e.getColorValues=B,e.getCurrentTransform=ie,e.getCurrentTransformInverse=oe,e.getFilenameFromUrl=T,e.getPdfFilenameFromUrl=R,e.getRGB=j,e.getXfaPageViewport=P,e.isDataScheme=g,e.isPdfFile=v,e.isValidFetchUrl=x,e.loadScript=S;var r=n(9),a=n(1);const o="http://www.w3.org/2000/svg",u="pdfjs_internal_id_";e.AnnotationPrefix=u;const le=class le{};Et(le,"CSS",96),Et(le,"PDF",72),Et(le,"PDF_TO_CSS_UNITS",le.CSS/le.PDF);let h=le;e.PixelsPerInch=h;class d extends r.BaseCanvasFactory{constructor({ownerDocument:K=globalThis.document}={}){super(),this._document=K}_createCanvas(K,J){const se=this._document.createElement("canvas");return se.width=K,se.height=J,se}}e.DOMCanvasFactory=d;async function f(de,K=!1){if(x(de,document.baseURI)){const J=await fetch(de);if(!J.ok)throw new Error(J.statusText);return K?new Uint8Array(await J.arrayBuffer()):(0,a.stringToBytes)(await J.text())}return new Promise((J,se)=>{const ue=new XMLHttpRequest;ue.open("GET",de,!0),K&&(ue.responseType="arraybuffer"),ue.onreadystatechange=()=>{if(ue.readyState===XMLHttpRequest.DONE){if(ue.status===200||ue.status===0){let q;if(K&&ue.response?q=new Uint8Array(ue.response):!K&&ue.responseText&&(q=(0,a.stringToBytes)(ue.responseText)),q){J(q);return}}se(new Error(ue.statusText))}},ue.send(null)})}class m extends r.BaseCMapReaderFactory{_fetchData(K,J){return f(K,this.isCompressed).then(se=>({cMapData:se,compressionType:J}))}}e.DOMCMapReaderFactory=m;class b extends r.BaseStandardFontDataFactory{_fetchData(K){return f(K,!0)}}e.DOMStandardFontDataFactory=b;class E extends r.BaseSVGFactory{_createSVG(K){return document.createElementNS(o,K)}}e.DOMSVGFactory=E;class w{constructor({viewBox:K,scale:J,rotation:se,offsetX:ue=0,offsetY:q=0,dontFlip:fe=!1}){this.viewBox=K,this.scale=J,this.rotation=se,this.offsetX=ue,this.offsetY=q;const Z=(K[2]+K[0])/2,N=(K[3]+K[1])/2;let D,V,W,te;switch(se%=360,se<0&&(se+=360),se){case 180:D=-1,V=0,W=0,te=1;break;case 90:D=0,V=1,W=1,te=0;break;case 270:D=0,V=-1,W=-1,te=0;break;case 0:D=1,V=0,W=0,te=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}fe&&(W=-W,te=-te);let X,C,L,U;D===0?(X=Math.abs(N-K[1])*J+ue,C=Math.abs(Z-K[0])*J+q,L=Math.abs(K[3]-K[1])*J,U=Math.abs(K[2]-K[0])*J):(X=Math.abs(Z-K[0])*J+ue,C=Math.abs(N-K[1])*J+q,L=Math.abs(K[2]-K[0])*J,U=Math.abs(K[3]-K[1])*J),this.transform=[D*J,V*J,W*J,te*J,X-D*J*Z-W*J*N,C-V*J*Z-te*J*N],this.width=L,this.height=U}clone({scale:K=this.scale,rotation:J=this.rotation,offsetX:se=this.offsetX,offsetY:ue=this.offsetY,dontFlip:q=!1}={}){return new w({viewBox:this.viewBox.slice(),scale:K,rotation:J,offsetX:se,offsetY:ue,dontFlip:q})}convertToViewportPoint(K,J){return a.Util.applyTransform([K,J],this.transform)}convertToViewportRectangle(K){const J=a.Util.applyTransform([K[0],K[1]],this.transform),se=a.Util.applyTransform([K[2],K[3]],this.transform);return[J[0],J[1],se[0],se[1]]}convertToPdfPoint(K,J){return a.Util.applyInverseTransform([K,J],this.transform)}}e.PageViewport=w;class y extends a.BaseException{constructor(K,J){super(K,"RenderingCancelledException"),this.type=J}}e.RenderingCancelledException=y;function g(de){const K=de.length;let J=0;for(;J<K&&de[J].trim()==="";)J++;return de.substring(J,J+5).toLowerCase()==="data:"}function v(de){return typeof de=="string"&&/\.pdf$/i.test(de)}function T(de){const K=de.indexOf("#"),J=de.indexOf("?"),se=Math.min(K>0?K:de.length,J>0?J:de.length);return de.substring(de.lastIndexOf("/",se)+1,se)}function R(de,K="document.pdf"){if(typeof de!="string")return K;if(g(de))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),K;const J=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,se=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,ue=J.exec(de);let q=se.exec(ue[1])||se.exec(ue[2])||se.exec(ue[3]);if(q&&(q=q[0],q.includes("%")))try{q=se.exec(decodeURIComponent(q))[0]}catch{}return q||K}class k{constructor(){this.started=Object.create(null),this.times=[]}time(K){K in this.started&&(0,a.warn)(`Timer is already running for ${K}`),this.started[K]=Date.now()}timeEnd(K){K in this.started||(0,a.warn)(`Timer has not been started for ${K}`),this.times.push({name:K,start:this.started[K],end:Date.now()}),delete this.started[K]}toString(){const K=[];let J=0;for(const se of this.times){const ue=se.name;ue.length>J&&(J=ue.length)}for(const se of this.times){const ue=se.end-se.start;K.push(`${se.name.padEnd(J)} ${ue}ms
`)}return K.join("")}}e.StatTimer=k;function x(de,K){try{const{protocol:J}=K?new URL(de,K):new URL(de);return J==="http:"||J==="https:"}catch{return!1}}function S(de,K=!1){return new Promise((J,se)=>{const ue=document.createElement("script");ue.src=de,ue.onload=function(q){K&&ue.remove(),J(q)},ue.onerror=function(){se(new Error(`Cannot load script at: ${ue.src}`))},(document.head||document.documentElement).append(ue)})}function O(de){console.log("Deprecated API usage: "+de)}let A;class I{static toDateObject(K){if(!K||typeof K!="string")return null;A||(A=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const J=A.exec(K);if(!J)return null;const se=parseInt(J[1],10);let ue=parseInt(J[2],10);ue=ue>=1&&ue<=12?ue-1:0;let q=parseInt(J[3],10);q=q>=1&&q<=31?q:1;let fe=parseInt(J[4],10);fe=fe>=0&&fe<=23?fe:0;let Z=parseInt(J[5],10);Z=Z>=0&&Z<=59?Z:0;let N=parseInt(J[6],10);N=N>=0&&N<=59?N:0;const D=J[7]||"Z";let V=parseInt(J[8],10);V=V>=0&&V<=23?V:0;let W=parseInt(J[9],10)||0;return W=W>=0&&W<=59?W:0,D==="-"?(fe+=V,Z+=W):D==="+"&&(fe-=V,Z-=W),new Date(Date.UTC(se,ue,q,fe,Z,N))}}e.PDFDateString=I;function P(de,{scale:K=1,rotation:J=0}){const{width:se,height:ue}=de.attributes.style,q=[0,0,parseInt(se),parseInt(ue)];return new w({viewBox:q,scale:K,rotation:J})}function j(de){if(de.startsWith("#")){const K=parseInt(de.slice(1),16);return[(K&16711680)>>16,(K&65280)>>8,K&255]}return de.startsWith("rgb(")?de.slice(4,-1).split(",").map(K=>parseInt(K)):de.startsWith("rgba(")?de.slice(5,-1).split(",").map(K=>parseInt(K)).slice(0,3):((0,a.warn)(`Not a valid color format: "${de}"`),[0,0,0])}function B(de){const K=document.createElement("span");K.style.visibility="hidden",document.body.append(K);for(const J of de.keys()){K.style.color=J;const se=window.getComputedStyle(K).color;de.set(J,j(se))}K.remove()}function ie(de){const{a:K,b:J,c:se,d:ue,e:q,f:fe}=de.getTransform();return[K,J,se,ue,q,fe]}function oe(de){const{a:K,b:J,c:se,d:ue,e:q,f:fe}=de.getTransform().invertSelf();return[K,J,se,ue,q,fe]}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=n(1);class a{constructor(){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,m){if(f<=0||m<=0)throw new Error("Invalid canvas size");const b=this._createCanvas(f,m);return{canvas:b,context:b.getContext("2d")}}reset(f,m,b){if(!f.canvas)throw new Error("Canvas is not specified");if(m<=0||b<=0)throw new Error("Invalid canvas size");f.canvas.width=m,f.canvas.height=b}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,m){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=a;class o{constructor({baseUrl:f=null,isCompressed:m=!1}){this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=m}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const m=this.baseUrl+f+(this.isCompressed?".bcmap":""),b=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(m,b).catch(E=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${m}`)})}_fetchData(f,m){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class u{constructor({baseUrl:f=null}){this.constructor===u&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const m=`${this.baseUrl}${f}`;return this._fetchData(m).catch(b=>{throw new Error(`Unable to load font data at: ${m}`)})}_fetchData(f){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=u;class h{constructor(){this.constructor===h&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,m,b=!1){if(f<=0||m<=0)throw new Error("Invalid SVG dimensions");const E=this._createSVG("svg:svg");return E.setAttribute("version","1.1"),b||(E.setAttribute("width",`${f}px`),E.setAttribute("height",`${m}px`)),E.setAttribute("preserveAspectRatio","none"),E.setAttribute("viewBox",`0 0 ${f} ${m}`),E}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=h},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=n(1);const a=3285377520,o=4294901760,u=65535;class h{constructor(f){this.h1=f?f&4294967295:a,this.h2=f?f&4294967295:a}update(f){let m,b;if(typeof f=="string"){m=new Uint8Array(f.length*2),b=0;for(let A=0,I=f.length;A<I;A++){const P=f.charCodeAt(A);P<=255?m[b++]=P:(m[b++]=P>>>8,m[b++]=P&255)}}else if((0,r.isArrayBuffer)(f))m=f.slice(),b=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const E=b>>2,w=b-E*4,y=new Uint32Array(m.buffer,0,E);let g=0,v=0,T=this.h1,R=this.h2;const k=3432918353,x=461845907,S=k&u,O=x&u;for(let A=0;A<E;A++)A&1?(g=y[A],g=g*k&o|g*S&u,g=g<<15|g>>>17,g=g*x&o|g*O&u,T^=g,T=T<<13|T>>>19,T=T*5+3864292196):(v=y[A],v=v*k&o|v*S&u,v=v<<15|v>>>17,v=v*x&o|v*O&u,R^=v,R=R<<13|R>>>19,R=R*5+3864292196);switch(g=0,w){case 3:g^=m[E*4+2]<<16;case 2:g^=m[E*4+1]<<8;case 1:g^=m[E*4],g=g*k&o|g*S&u,g=g<<15|g>>>17,g=g*x&o|g*O&u,E&1?T^=g:R^=g}this.h1=T,this.h2=R}hexdigest(){let f=this.h1,m=this.h2;f^=m>>>1,f=f*3981806797&o|f*36045&u,m=m*4283543511&o|((m<<16|f>>>16)*2950163797&o)>>>16,f^=m>>>1,f=f*444984403&o|f*60499&u,m=m*3301882366&o|((m<<16|f>>>16)*3120437893&o)>>>16,f^=m>>>1;const b=(f>>>0).toString(16),E=(m>>>0).toString(16);return b.padStart(8,"0")+E.padStart(8,"0")}}e.MurmurHash3_64=h},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=n(1);class a{constructor({docId:d,onUnsupportedFeature:f,ownerDocument:m=globalThis.document,styleElement:b=null}){this.constructor===a&&(0,r.unreachable)("Cannot initialize BaseFontLoader."),this.docId=d,this._onUnsupportedFeature=f,this._document=m,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(d){this.nativeFontFaces.push(d),this._document.fonts.add(d)}insertRule(d){let f=this.styleElement;f||(f=this.styleElement=this._document.createElement("style"),f.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(f));const m=f.sheet;m.insertRule(d,m.cssRules.length)}clear(){for(const d of this.nativeFontFaces)this._document.fonts.delete(d);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(d){if(d.attached||d.missingFile)return;if(d.attached=!0,this.isFontLoadingAPISupported){const m=d.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(b){throw this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,r.warn)(`Failed to load font '${m.family}': '${b}'.`),d.disableFontFace=!0,b}}return}const f=d.createFontFaceRule();if(f){if(this.insertRule(f),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const b=this._queueLoadingCallback(m);this._prepareFontLoadEvent([f],[d],b)})}}_queueLoadingCallback(d){(0,r.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var f;const d=!!((f=this._document)!=null&&f.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",d)}get isSyncFontLoadingSupported(){(0,r.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,r.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(d,f,m){(0,r.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let o;e.FontLoader=o,e.FontLoader=o=class extends a{constructor(d){super(d),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let d=!1;if(typeof navigator>"u")d=!0;else{const f=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(f==null?void 0:f[1])>=14&&(d=!0)}return(0,r.shadow)(this,"isSyncFontLoadingSupported",d)}_queueLoadingCallback(d){function f(){for((0,r.assert)(!b.done,"completeRequest() cannot be called twice."),b.done=!0;m.requests.length>0&&m.requests[0].done;){const E=m.requests.shift();setTimeout(E.callback,0)}}const m=this.loadingContext,b={id:`pdfjs-font-loading-${m.nextRequestId++}`,done:!1,complete:f,callback:d};return m.requests.push(b),b}get _loadTestFont(){const d=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,r.shadow)(this,"_loadTestFont",d())}_prepareFontLoadEvent(d,f,m){function b(oe,le){return oe.charCodeAt(le)<<24|oe.charCodeAt(le+1)<<16|oe.charCodeAt(le+2)<<8|oe.charCodeAt(le+3)&255}function E(oe,le,de,K){const J=oe.substring(0,le),se=oe.substring(le+de);return J+K+se}let w,y;const g=this._document.createElement("canvas");g.width=1,g.height=1;const v=g.getContext("2d");let T=0;function R(oe,le){if(T++,T>30){(0,r.warn)("Load test font never loaded."),le();return}if(v.font="30px "+oe,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){le();return}setTimeout(R.bind(null,oe,le))}const k=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=E(x,976,k.length,k);const O=16,A=1482184792;let I=b(x,O);for(w=0,y=k.length-3;w<y;w+=4)I=I-A+b(k,w)|0;w<k.length&&(I=I-A+b(k+"XXX",w)|0),x=E(x,O,4,(0,r.string32)(I));const P=`url(data:font/opentype;base64,${btoa(x)});`,j=`@font-face {font-family:"${k}";src:${P}}`;this.insertRule(j);const B=[];for(const oe of f)B.push(oe.loadedName);B.push(k);const ie=this._document.createElement("div");ie.style.visibility="hidden",ie.style.width=ie.style.height="10px",ie.style.position="absolute",ie.style.top=ie.style.left="0px";for(const oe of B){const le=this._document.createElement("span");le.textContent="Hi",le.style.fontFamily=oe,ie.append(le)}this._document.body.append(ie),R(k,()=>{ie.remove(),m.complete()})}};class u{constructor(d,{isEvalSupported:f=!0,disableFontFace:m=!1,ignoreErrors:b=!1,onUnsupportedFeature:E,fontRegistry:w=null}){this.compiledGlyphs=Object.create(null);for(const y in d)this[y]=d[y];this.isEvalSupported=f!==!1,this.disableFontFace=m===!0,this.ignoreErrors=b===!0,this._onUnsupportedFeature=E,this.fontRegistry=w}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let d;if(!this.cssFontInfo)d=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),d=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return this.fontRegistry&&this.fontRegistry.registerFont(this),d}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const d=(0,r.bytesToString)(this.data),f=`url(data:${this.mimetype};base64,${btoa(d)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${f}}`;else{let b=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(b+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${b}src:${f}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,f),m}getPathGenerator(d,f){if(this.compiledGlyphs[f]!==void 0)return this.compiledGlyphs[f];let m;try{m=d.get(this.loadedName+"_path_"+f)}catch(b){if(!this.ignoreErrors)throw b;return this._onUnsupportedFeature({featureId:r.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,r.warn)(`getPathGenerator - ignoring character: "${b}".`),this.compiledGlyphs[f]=function(E,w){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const b=[];for(const E of m){const w=E.args!==void 0?E.args.join(","):"";b.push("c.",E.cmd,"(",w,`);
`)}return this.compiledGlyphs[f]=new Function("c","size",b.join(""))}return this.compiledGlyphs[f]=function(b,E){for(const w of m)w.cmd==="scale"&&(w.args=[E,-E]),b[w.cmd].apply(b,w.args)}}}e.FontFaceObject=u},(t,e,n)=>{var ue,Fl;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=n(8),a=n(1),o=n(13),u=n(14),h=n(3);const d=16,f=100,m=4096,b=15,E=10,w=h.isNodeJS&&typeof Path2D>"u"?-1:1e3,y=16;function g(Z,N){if(Z._removeMirroring)throw new Error("Context is already forwarding operations.");Z.__originalSave=Z.save,Z.__originalRestore=Z.restore,Z.__originalRotate=Z.rotate,Z.__originalScale=Z.scale,Z.__originalTranslate=Z.translate,Z.__originalTransform=Z.transform,Z.__originalSetTransform=Z.setTransform,Z.__originalResetTransform=Z.resetTransform,Z.__originalClip=Z.clip,Z.__originalMoveTo=Z.moveTo,Z.__originalLineTo=Z.lineTo,Z.__originalBezierCurveTo=Z.bezierCurveTo,Z.__originalRect=Z.rect,Z.__originalClosePath=Z.closePath,Z.__originalBeginPath=Z.beginPath,Z._removeMirroring=()=>{Z.save=Z.__originalSave,Z.restore=Z.__originalRestore,Z.rotate=Z.__originalRotate,Z.scale=Z.__originalScale,Z.translate=Z.__originalTranslate,Z.transform=Z.__originalTransform,Z.setTransform=Z.__originalSetTransform,Z.resetTransform=Z.__originalResetTransform,Z.clip=Z.__originalClip,Z.moveTo=Z.__originalMoveTo,Z.lineTo=Z.__originalLineTo,Z.bezierCurveTo=Z.__originalBezierCurveTo,Z.rect=Z.__originalRect,Z.closePath=Z.__originalClosePath,Z.beginPath=Z.__originalBeginPath,delete Z._removeMirroring},Z.save=function(){N.save(),this.__originalSave()},Z.restore=function(){N.restore(),this.__originalRestore()},Z.translate=function(V,W){N.translate(V,W),this.__originalTranslate(V,W)},Z.scale=function(V,W){N.scale(V,W),this.__originalScale(V,W)},Z.transform=function(V,W,te,X,C,L){N.transform(V,W,te,X,C,L),this.__originalTransform(V,W,te,X,C,L)},Z.setTransform=function(V,W,te,X,C,L){N.setTransform(V,W,te,X,C,L),this.__originalSetTransform(V,W,te,X,C,L)},Z.resetTransform=function(){N.resetTransform(),this.__originalResetTransform()},Z.rotate=function(V){N.rotate(V),this.__originalRotate(V)},Z.clip=function(V){N.clip(V),this.__originalClip(V)},Z.moveTo=function(D,V){N.moveTo(D,V),this.__originalMoveTo(D,V)},Z.lineTo=function(D,V){N.lineTo(D,V),this.__originalLineTo(D,V)},Z.bezierCurveTo=function(D,V,W,te,X,C){N.bezierCurveTo(D,V,W,te,X,C),this.__originalBezierCurveTo(D,V,W,te,X,C)},Z.rect=function(D,V,W,te){N.rect(D,V,W,te),this.__originalRect(D,V,W,te)},Z.closePath=function(){N.closePath(),this.__originalClosePath()},Z.beginPath=function(){N.beginPath(),this.__originalBeginPath()}}class v{constructor(N){this.canvasFactory=N,this.cache=Object.create(null)}getCanvas(N,D,V){let W;return this.cache[N]!==void 0?(W=this.cache[N],this.canvasFactory.reset(W,D,V)):(W=this.canvasFactory.create(D,V),this.cache[N]=W),W}delete(N){delete this.cache[N]}clear(){for(const N in this.cache){const D=this.cache[N];this.canvasFactory.destroy(D),delete this.cache[N]}}}function T(Z,N,D,V,W,te,X,C,L,U){const[$,H,Q,G,F,ne]=(0,r.getCurrentTransform)(Z);if(H===0&&Q===0){const pe=X*$+F,Ee=Math.round(pe),we=C*G+ne,Ie=Math.round(we),ve=(X+L)*$+F,Ve=Math.abs(Math.round(ve)-Ee)||1,Fe=(C+U)*G+ne,De=Math.abs(Math.round(Fe)-Ie)||1;return Z.setTransform(Math.sign($),0,0,Math.sign(G),Ee,Ie),Z.drawImage(N,D,V,W,te,0,0,Ve,De),Z.setTransform($,H,Q,G,F,ne),[Ve,De]}if($===0&&G===0){const pe=C*Q+F,Ee=Math.round(pe),we=X*H+ne,Ie=Math.round(we),ve=(C+U)*Q+F,Ve=Math.abs(Math.round(ve)-Ee)||1,Fe=(X+L)*H+ne,De=Math.abs(Math.round(Fe)-Ie)||1;return Z.setTransform(0,Math.sign(H),Math.sign(Q),0,Ee,Ie),Z.drawImage(N,D,V,W,te,0,0,De,Ve),Z.setTransform($,H,Q,G,F,ne),[De,Ve]}Z.drawImage(N,D,V,W,te,X,C,L,U);const he=Math.hypot($,H),ae=Math.hypot(Q,G);return[he*L,ae*U]}function R(Z){const{width:N,height:D}=Z;if(N>w||D>w)return null;const V=1e3,W=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),te=N+1;let X=new Uint8Array(te*(D+1)),C,L,U;const $=N+7&-8;let H=new Uint8Array($*D),Q=0;for(const ae of Z.data){let pe=128;for(;pe>0;)H[Q++]=ae&pe?0:255,pe>>=1}let G=0;for(Q=0,H[Q]!==0&&(X[0]=1,++G),L=1;L<N;L++)H[Q]!==H[Q+1]&&(X[L]=H[Q]?2:1,++G),Q++;for(H[Q]!==0&&(X[L]=2,++G),C=1;C<D;C++){Q=C*$,U=C*te,H[Q-$]!==H[Q]&&(X[U]=H[Q]?1:8,++G);let ae=(H[Q]?4:0)+(H[Q-$]?8:0);for(L=1;L<N;L++)ae=(ae>>2)+(H[Q+1]?4:0)+(H[Q-$+1]?8:0),W[ae]&&(X[U+L]=W[ae],++G),Q++;if(H[Q-$]!==H[Q]&&(X[U+L]=H[Q]?2:4,++G),G>V)return null}for(Q=$*(D-1),U=C*te,H[Q]!==0&&(X[U]=8,++G),L=1;L<N;L++)H[Q]!==H[Q+1]&&(X[U+L]=H[Q]?4:8,++G),Q++;if(H[Q]!==0&&(X[U+L]=4,++G),G>V)return null;const F=new Int32Array([0,te,-1,0,-te,0,0,0,1]),ne=new Path2D;for(C=0;G&&C<=D;C++){let ae=C*te;const pe=ae+N;for(;ae<pe&&!X[ae];)ae++;if(ae===pe)continue;ne.moveTo(ae%te,C);const Ee=ae;let we=X[ae];do{const Ie=F[we];do ae+=Ie;while(!X[ae]);const ve=X[ae];ve!==5&&ve!==10?(we=ve,X[ae]=0):(we=ve&51*we>>4,X[ae]&=we>>2|we<<2),ne.lineTo(ae%te,ae/te|0),X[ae]||--G}while(Ee!==ae);--C}return H=null,X=null,function(ae){ae.save(),ae.scale(1/N,-1/D),ae.translate(0,-D),ae.fill(ne),ae.beginPath(),ae.restore()}}class k{constructor(N,D){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,N,D])}clone(){const N=Object.create(this);return N.clipBox=this.clipBox.slice(),N}setCurrentPoint(N,D){this.x=N,this.y=D}updatePathMinMax(N,D,V){[D,V]=a.Util.applyTransform([D,V],N),this.minX=Math.min(this.minX,D),this.minY=Math.min(this.minY,V),this.maxX=Math.max(this.maxX,D),this.maxY=Math.max(this.maxY,V)}updateRectMinMax(N,D){const V=a.Util.applyTransform(D,N),W=a.Util.applyTransform(D.slice(2),N);this.minX=Math.min(this.minX,V[0],W[0]),this.minY=Math.min(this.minY,V[1],W[1]),this.maxX=Math.max(this.maxX,V[0],W[0]),this.maxY=Math.max(this.maxY,V[1],W[1])}updateScalingPathMinMax(N,D){a.Util.scaleMinMax(N,D),this.minX=Math.min(this.minX,D[0]),this.maxX=Math.max(this.maxX,D[1]),this.minY=Math.min(this.minY,D[2]),this.maxY=Math.max(this.maxY,D[3])}updateCurvePathMinMax(N,D,V,W,te,X,C,L,U,$){const H=a.Util.bezierBoundingBox(D,V,W,te,X,C,L,U);if($){$[0]=Math.min($[0],H[0],H[2]),$[1]=Math.max($[1],H[0],H[2]),$[2]=Math.min($[2],H[1],H[3]),$[3]=Math.max($[3],H[1],H[3]);return}this.updateRectMinMax(N,H)}getPathBoundingBox(N=o.PathType.FILL,D=null){const V=[this.minX,this.minY,this.maxX,this.maxY];if(N===o.PathType.STROKE){D||(0,a.unreachable)("Stroke bounding box must include transform.");const W=a.Util.singularValueDecompose2dScale(D),te=W[0]*this.lineWidth/2,X=W[1]*this.lineWidth/2;V[0]-=te,V[1]-=X,V[2]+=te,V[3]+=X}return V}updateClipFromPath(){const N=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(N||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(N){this.clipBox=N,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(N=o.PathType.FILL,D=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(N,D))}}function x(Z,N,D=null){if(typeof ImageData<"u"&&N instanceof ImageData){Z.putImageData(N,0,0);return}const V=N.height,W=N.width,te=V%y,X=(V-te)/y,C=te===0?X:X+1,L=Z.createImageData(W,y);let U=0,$;const H=N.data,Q=L.data;let G,F,ne,he,ae,pe,Ee,we;if(D)switch(D.length){case 1:ae=D[0],pe=D[0],Ee=D[0],we=D[0];break;case 4:ae=D[0],pe=D[1],Ee=D[2],we=D[3];break}if(N.kind===a.ImageKind.GRAYSCALE_1BPP){const Ie=H.byteLength,ve=new Uint32Array(Q.buffer,0,Q.byteLength>>2),Ve=ve.length,Fe=W+7>>3;let De=4294967295,Be=a.FeatureTest.isLittleEndian?4278190080:255;for(we&&we[0]===255&&we[255]===0&&([De,Be]=[Be,De]),G=0;G<C;G++){for(ne=G<X?y:te,$=0,F=0;F<ne;F++){const ut=Ie-U;let yt=0;const ct=ut>Fe?W:ut*8-7,it=ct&-8;let nt=0,We=0;for(;yt<it;yt+=8)We=H[U++],ve[$++]=We&128?De:Be,ve[$++]=We&64?De:Be,ve[$++]=We&32?De:Be,ve[$++]=We&16?De:Be,ve[$++]=We&8?De:Be,ve[$++]=We&4?De:Be,ve[$++]=We&2?De:Be,ve[$++]=We&1?De:Be;for(;yt<ct;yt++)nt===0&&(We=H[U++],nt=128),ve[$++]=We&nt?De:Be,nt>>=1}for(;$<Ve;)ve[$++]=0;Z.putImageData(L,0,G*y)}}else if(N.kind===a.ImageKind.RGBA_32BPP){const Ie=!!(ae||pe||Ee);for(F=0,he=W*y*4,G=0;G<X;G++){if(Q.set(H.subarray(U,U+he)),U+=he,Ie)for(let ve=0;ve<he;ve+=4)ae&&(Q[ve+0]=ae[Q[ve+0]]),pe&&(Q[ve+1]=pe[Q[ve+1]]),Ee&&(Q[ve+2]=Ee[Q[ve+2]]);Z.putImageData(L,0,F),F+=y}if(G<C){if(he=W*te*4,Q.set(H.subarray(U,U+he)),Ie)for(let ve=0;ve<he;ve+=4)ae&&(Q[ve+0]=ae[Q[ve+0]]),pe&&(Q[ve+1]=pe[Q[ve+1]]),Ee&&(Q[ve+2]=Ee[Q[ve+2]]);Z.putImageData(L,0,F)}}else if(N.kind===a.ImageKind.RGB_24BPP){const Ie=!!(ae||pe||Ee);for(ne=y,he=W*ne,G=0;G<C;G++){for(G>=X&&(ne=te,he=W*ne),$=0,F=he;F--;)Q[$++]=H[U++],Q[$++]=H[U++],Q[$++]=H[U++],Q[$++]=255;if(Ie)for(let ve=0;ve<$;ve+=4)ae&&(Q[ve+0]=ae[Q[ve+0]]),pe&&(Q[ve+1]=pe[Q[ve+1]]),Ee&&(Q[ve+2]=Ee[Q[ve+2]]);Z.putImageData(L,0,G*y)}}else throw new Error(`bad image kind: ${N.kind}`)}function S(Z,N){if(N.bitmap){Z.drawImage(N.bitmap,0,0);return}const D=N.height,V=N.width,W=D%y,te=(D-W)/y,X=W===0?te:te+1,C=Z.createImageData(V,y);let L=0;const U=N.data,$=C.data;for(let H=0;H<X;H++){const Q=H<te?y:W;({srcPos:L}=(0,u.applyMaskImageData)({src:U,srcPos:L,dest:$,width:V,height:Q})),Z.putImageData(C,0,H*y)}}function O(Z,N){const D=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let V=0,W=D.length;V<W;V++){const te=D[V];Z[te]!==void 0&&(N[te]=Z[te])}Z.setLineDash!==void 0&&(N.setLineDash(Z.getLineDash()),N.lineDashOffset=Z.lineDashOffset)}function A(Z,N){Z.strokeStyle=Z.fillStyle=N||"#000000",Z.fillRule="nonzero",Z.globalAlpha=1,Z.lineWidth=1,Z.lineCap="butt",Z.lineJoin="miter",Z.miterLimit=10,Z.globalCompositeOperation="source-over",Z.font="10px sans-serif",Z.setLineDash!==void 0&&(Z.setLineDash([]),Z.lineDashOffset=0)}function I(Z,N,D,V){const W=Z.length;for(let te=3;te<W;te+=4){const X=Z[te];if(X===0)Z[te-3]=N,Z[te-2]=D,Z[te-1]=V;else if(X<255){const C=255-X;Z[te-3]=Z[te-3]*X+N*C>>8,Z[te-2]=Z[te-2]*X+D*C>>8,Z[te-1]=Z[te-1]*X+V*C>>8}}}function P(Z,N,D){const V=Z.length,W=1/255;for(let te=3;te<V;te+=4){const X=D?D[Z[te]]:Z[te];N[te]=N[te]*X*W|0}}function j(Z,N,D){const V=Z.length;for(let W=3;W<V;W+=4){const te=Z[W-3]*77+Z[W-2]*152+Z[W-1]*28;N[W]=D?N[W]*D[te>>8]>>8:N[W]*te>>16}}function B(Z,N,D,V,W,te,X,C,L,U,$){const H=!!te,Q=H?te[0]:0,G=H?te[1]:0,F=H?te[2]:0;let ne;W==="Luminosity"?ne=j:ne=P;const ae=Math.min(V,Math.ceil(1048576/D));for(let pe=0;pe<V;pe+=ae){const Ee=Math.min(ae,V-pe),we=Z.getImageData(C-U,pe+(L-$),D,Ee),Ie=N.getImageData(C,pe+L,D,Ee);H&&I(we.data,Q,G,F),ne(we.data,Ie.data,X),N.putImageData(Ie,C,pe+L)}}function ie(Z,N,D,V){const W=V[0],te=V[1],X=V[2]-W,C=V[3]-te;X===0||C===0||(B(N.context,D,X,C,N.subtype,N.backdrop,N.transferMap,W,te,N.offsetX,N.offsetY),Z.save(),Z.globalAlpha=1,Z.globalCompositeOperation="source-over",Z.setTransform(1,0,0,1,0,0),Z.drawImage(D.canvas,0,0),Z.restore())}function oe(Z,N){const D=a.Util.singularValueDecompose2dScale(Z);D[0]=Math.fround(D[0]),D[1]=Math.fround(D[1]);const V=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return N!==void 0?N:D[0]<=V||D[1]<=V}const le=["butt","round","square"],de=["miter","round","bevel"],K={},J={},fe=class fe{constructor(N,D,V,W,te,X,C,L){Ne(this,ue);this.ctx=N,this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=D,this.objs=V,this.canvasFactory=W,this.imageLayer=te,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=X,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=C,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(L==null?void 0:L.background)||null,this.foregroundColor=(L==null?void 0:L.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(N,D=null){return typeof N=="string"?N.startsWith("g_")?this.commonObjs.get(N):this.objs.get(N):D}beginDrawing({transform:N,viewport:D,transparency:V=!1,background:W=null}){const te=this.ctx.canvas.width,X=this.ctx.canvas.height,C=W||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const L=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const U=this.backgroundColor=this.ctx.fillStyle;let $=!0,H=C;if(this.ctx.fillStyle=C,H=this.ctx.fillStyle,$=typeof H=="string"&&/^#[0-9A-Fa-f]{6}$/.test(H),L==="#000000"&&U==="#ffffff"||L===U||!$)this.foregroundColor=this.backgroundColor=null;else{const[Q,G,F]=(0,r.getRGB)(H),ne=ae=>(ae/=255,ae<=.03928?ae/12.92:((ae+.055)/1.055)**2.4),he=Math.round(.2126*ne(Q)+.7152*ne(G)+.0722*ne(F));this.selectColor=(ae,pe,Ee)=>{const we=.2126*ne(ae)+.7152*ne(pe)+.0722*ne(Ee);return Math.round(we)===he?U:L}}}if(this.ctx.fillStyle=this.backgroundColor||C,this.ctx.fillRect(0,0,te,X),this.ctx.restore(),V){const L=this.cachedCanvases.getCanvas("transparent",te,X);this.compositeCtx=this.ctx,this.transparentCanvas=L.canvas,this.ctx=L.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),A(this.ctx,this.foregroundColor),N&&(this.ctx.transform(...N),this.outputScaleX=N[0],this.outputScaleY=N[0]),this.ctx.transform(...D.transform),this.viewportScale=D.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx),this.imageLayer&&((0,r.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(N,D,V,W){const te=N.argsArray,X=N.fnArray;let C=D||0;const L=te.length;if(L===C)return C;const U=L-C>E&&typeof V=="function",$=U?Date.now()+b:0;let H=0;const Q=this.commonObjs,G=this.objs;let F;for(;;){if(W!==void 0&&C===W.nextBreakPoint)return W.breakIt(C,V),C;if(F=X[C],F!==a.OPS.dependency)this[F].apply(this,te[C]);else for(const ne of te[C]){const he=ne.startsWith("g_")?Q:G;if(!he.has(ne))return he.get(ne,V),C}if(C++,C===L)return C;if(U&&++H>E){if(Date.now()>$)return V(),C;H=0}}}endDrawing(){ke(this,ue,Fl).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const N of this._cachedBitmapsMap.values()){for(const D of N.values())typeof HTMLCanvasElement<"u"&&D instanceof HTMLCanvasElement&&(D.width=D.height=0);N.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(N,D){const V=N.width,W=N.height;let te=Math.max(Math.hypot(D[0],D[1]),1),X=Math.max(Math.hypot(D[2],D[3]),1),C=V,L=W,U="prescale1",$,H;for(;te>2&&C>1||X>2&&L>1;){let Q=C,G=L;te>2&&C>1&&(Q=Math.ceil(C/2),te/=C/Q),X>2&&L>1&&(G=Math.ceil(L/2),X/=L/G),$=this.cachedCanvases.getCanvas(U,Q,G),H=$.context,H.clearRect(0,0,Q,G),H.drawImage(N,0,0,C,L,0,0,Q,G),N=$.canvas,C=Q,L=G,U=U==="prescale1"?"prescale2":"prescale1"}return{img:N,paintWidth:C,paintHeight:L}}_createMaskCanvas(N){const D=this.ctx,{width:V,height:W}=N,te=this.current.fillColor,X=this.current.patternFill,C=(0,r.getCurrentTransform)(D);let L,U,$,H;if((N.bitmap||N.data)&&N.count>1){const Ve=N.bitmap||N.data.buffer,Fe=C.slice(0,4);U=JSON.stringify(X?Fe:[Fe,te]),L=this._cachedBitmapsMap.get(Ve),L||(L=new Map,this._cachedBitmapsMap.set(Ve,L));const De=L.get(U);if(De&&!X){const Be=Math.round(Math.min(C[0],C[2])+C[4]),ut=Math.round(Math.min(C[1],C[3])+C[5]);return{canvas:De,offsetX:Be,offsetY:ut}}$=De}$||(H=this.cachedCanvases.getCanvas("maskCanvas",V,W),S(H.context,N));let Q=a.Util.transform(C,[1/V,0,0,-1/W,0,0]);Q=a.Util.transform(Q,[1,0,0,1,0,-W]);const G=a.Util.applyTransform([0,0],Q),F=a.Util.applyTransform([V,W],Q),ne=a.Util.normalizeRect([G[0],G[1],F[0],F[1]]),he=Math.round(ne[2]-ne[0])||1,ae=Math.round(ne[3]-ne[1])||1,pe=this.cachedCanvases.getCanvas("fillCanvas",he,ae),Ee=pe.context,we=Math.min(G[0],F[0]),Ie=Math.min(G[1],F[1]);Ee.translate(-we,-Ie),Ee.transform(...Q),$||($=this._scaleImage(H.canvas,(0,r.getCurrentTransformInverse)(Ee)),$=$.img,L&&X&&L.set(U,$)),Ee.imageSmoothingEnabled=oe((0,r.getCurrentTransform)(Ee),N.interpolate),T(Ee,$,0,0,$.width,$.height,0,0,V,W),Ee.globalCompositeOperation="source-in";const ve=a.Util.transform((0,r.getCurrentTransformInverse)(Ee),[1,0,0,1,-we,-Ie]);return Ee.fillStyle=X?te.getPattern(D,this,ve,o.PathType.FILL):te,Ee.fillRect(0,0,V,W),L&&!X&&(this.cachedCanvases.delete("fillCanvas"),L.set(U,pe.canvas)),{canvas:pe.canvas,offsetX:Math.round(we),offsetY:Math.round(Ie)}}setLineWidth(N){N!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=N,this.ctx.lineWidth=N}setLineCap(N){this.ctx.lineCap=le[N]}setLineJoin(N){this.ctx.lineJoin=de[N]}setMiterLimit(N){this.ctx.miterLimit=N}setDash(N,D){const V=this.ctx;V.setLineDash!==void 0&&(V.setLineDash(N),V.lineDashOffset=D)}setRenderingIntent(N){}setFlatness(N){}setGState(N){for(let D=0,V=N.length;D<V;D++){const W=N[D],te=W[0],X=W[1];switch(te){case"LW":this.setLineWidth(X);break;case"LC":this.setLineCap(X);break;case"LJ":this.setLineJoin(X);break;case"ML":this.setMiterLimit(X);break;case"D":this.setDash(X[0],X[1]);break;case"RI":this.setRenderingIntent(X);break;case"FL":this.setFlatness(X);break;case"Font":this.setFont(X[0],X[1]);break;case"CA":this.current.strokeAlpha=W[1];break;case"ca":this.current.fillAlpha=W[1],this.ctx.globalAlpha=W[1];break;case"BM":this.ctx.globalCompositeOperation=X;break;case"SMask":this.current.activeSMask=X?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=X}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const N=this.inSMaskMode;this.current.activeSMask&&!N?this.beginSMaskMode():!this.current.activeSMask&&N&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const N=this.ctx.canvas.width,D=this.ctx.canvas.height,V="smaskGroupAt"+this.groupLevel,W=this.cachedCanvases.getCanvas(V,N,D);this.suspendedCtx=this.ctx,this.ctx=W.context;const te=this.ctx;te.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),O(this.suspendedCtx,te),g(te,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),O(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(N){if(!this.current.activeSMask)return;N?(N[0]=Math.floor(N[0]),N[1]=Math.floor(N[1]),N[2]=Math.ceil(N[2]),N[3]=Math.ceil(N[3])):N=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const D=this.current.activeSMask,V=this.suspendedCtx;ie(V,D,this.ctx,N),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(O(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const N=this.current;this.stateStack.push(N),this.current=N.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),O(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(N,D,V,W,te,X){this.ctx.transform(N,D,V,W,te,X),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(N,D,V){const W=this.ctx,te=this.current;let X=te.x,C=te.y,L,U;const $=(0,r.getCurrentTransform)(W),H=$[0]===0&&$[3]===0||$[1]===0&&$[2]===0,Q=H?V.slice(0):null;for(let G=0,F=0,ne=N.length;G<ne;G++)switch(N[G]|0){case a.OPS.rectangle:X=D[F++],C=D[F++];const he=D[F++],ae=D[F++],pe=X+he,Ee=C+ae;W.moveTo(X,C),he===0||ae===0?W.lineTo(pe,Ee):(W.lineTo(pe,C),W.lineTo(pe,Ee),W.lineTo(X,Ee)),H||te.updateRectMinMax($,[X,C,pe,Ee]),W.closePath();break;case a.OPS.moveTo:X=D[F++],C=D[F++],W.moveTo(X,C),H||te.updatePathMinMax($,X,C);break;case a.OPS.lineTo:X=D[F++],C=D[F++],W.lineTo(X,C),H||te.updatePathMinMax($,X,C);break;case a.OPS.curveTo:L=X,U=C,X=D[F+4],C=D[F+5],W.bezierCurveTo(D[F],D[F+1],D[F+2],D[F+3],X,C),te.updateCurvePathMinMax($,L,U,D[F],D[F+1],D[F+2],D[F+3],X,C,Q),F+=6;break;case a.OPS.curveTo2:L=X,U=C,W.bezierCurveTo(X,C,D[F],D[F+1],D[F+2],D[F+3]),te.updateCurvePathMinMax($,L,U,X,C,D[F],D[F+1],D[F+2],D[F+3],Q),X=D[F+2],C=D[F+3],F+=4;break;case a.OPS.curveTo3:L=X,U=C,X=D[F+2],C=D[F+3],W.bezierCurveTo(D[F],D[F+1],X,C,X,C),te.updateCurvePathMinMax($,L,U,D[F],D[F+1],X,C,X,C,Q),F+=4;break;case a.OPS.closePath:W.closePath();break}H&&te.updateScalingPathMinMax($,Q),te.setCurrentPoint(X,C)}closePath(){this.ctx.closePath()}stroke(N){N=typeof N<"u"?N:!0;const D=this.ctx,V=this.current.strokeColor;D.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof V=="object"&&(V!=null&&V.getPattern)?(D.save(),D.strokeStyle=V.getPattern(D,this,(0,r.getCurrentTransformInverse)(D),o.PathType.STROKE),this.rescaleAndStroke(!1),D.restore()):this.rescaleAndStroke(!0)),N&&this.consumePath(this.current.getClippedPathBoundingBox()),D.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(N){N=typeof N<"u"?N:!0;const D=this.ctx,V=this.current.fillColor,W=this.current.patternFill;let te=!1;W&&(D.save(),D.fillStyle=V.getPattern(D,this,(0,r.getCurrentTransformInverse)(D),o.PathType.FILL),te=!0);const X=this.current.getClippedPathBoundingBox();this.contentVisible&&X!==null&&(this.pendingEOFill?(D.fill("evenodd"),this.pendingEOFill=!1):D.fill()),te&&D.restore(),N&&this.consumePath(X)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=K}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const N=this.pendingTextPaths,D=this.ctx;if(N===void 0){D.beginPath();return}D.save(),D.beginPath();for(const V of N)D.setTransform(...V.transform),D.translate(V.x,V.y),V.addToPath(D,V.fontSize);D.restore(),D.clip(),D.beginPath(),delete this.pendingTextPaths}setCharSpacing(N){this.current.charSpacing=N}setWordSpacing(N){this.current.wordSpacing=N}setHScale(N){this.current.textHScale=N/100}setLeading(N){this.current.leading=-N}setFont(N,D){const V=this.commonObjs.get(N),W=this.current;if(!V)throw new Error(`Can't find font for ${N}`);if(W.fontMatrix=V.fontMatrix||a.FONT_IDENTITY_MATRIX,(W.fontMatrix[0]===0||W.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+N),D<0?(D=-D,W.fontDirection=-1):W.fontDirection=1,this.current.font=V,this.current.fontSize=D,V.isType3Font)return;const te=V.loadedName||"sans-serif";let X="normal";V.black?X="900":V.bold&&(X="bold");const C=V.italic?"italic":"normal",L=`"${te}", ${V.fallbackName}`;let U=D;D<d?U=d:D>f&&(U=f),this.current.fontSizeScale=D/U,this.ctx.font=`${C} ${X} ${U}px ${L}`}setTextRenderingMode(N){this.current.textRenderingMode=N}setTextRise(N){this.current.textRise=N}moveText(N,D){this.current.x=this.current.lineX+=N,this.current.y=this.current.lineY+=D}setLeadingMoveText(N,D){this.setLeading(-D),this.moveText(N,D)}setTextMatrix(N,D,V,W,te,X){this.current.textMatrix=[N,D,V,W,te,X],this.current.textMatrixScale=Math.hypot(N,D),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(N,D,V,W){const te=this.ctx,X=this.current,C=X.font,L=X.textRenderingMode,U=X.fontSize/X.fontSizeScale,$=L&a.TextRenderingMode.FILL_STROKE_MASK,H=!!(L&a.TextRenderingMode.ADD_TO_PATH_FLAG),Q=X.patternFill&&!C.missingFile;let G;(C.disableFontFace||H||Q)&&(G=C.getPathGenerator(this.commonObjs,N)),C.disableFontFace||Q?(te.save(),te.translate(D,V),te.beginPath(),G(te,U),W&&te.setTransform(...W),($===a.TextRenderingMode.FILL||$===a.TextRenderingMode.FILL_STROKE)&&te.fill(),($===a.TextRenderingMode.STROKE||$===a.TextRenderingMode.FILL_STROKE)&&te.stroke(),te.restore()):(($===a.TextRenderingMode.FILL||$===a.TextRenderingMode.FILL_STROKE)&&te.fillText(N,D,V),($===a.TextRenderingMode.STROKE||$===a.TextRenderingMode.FILL_STROKE)&&te.strokeText(N,D,V)),H&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,r.getCurrentTransform)(te),x:D,y:V,fontSize:U,addToPath:G})}get isFontSubpixelAAEnabled(){const{context:N}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);N.scale(1.5,1),N.fillText("I",0,10);const D=N.getImageData(0,0,10,10).data;let V=!1;for(let W=3;W<D.length;W+=4)if(D[W]>0&&D[W]<255){V=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",V)}showText(N){const D=this.current,V=D.font;if(V.isType3Font)return this.showType3Text(N);const W=D.fontSize;if(W===0)return;const te=this.ctx,X=D.fontSizeScale,C=D.charSpacing,L=D.wordSpacing,U=D.fontDirection,$=D.textHScale*U,H=N.length,Q=V.vertical,G=Q?1:-1,F=V.defaultVMetrics,ne=W*D.fontMatrix[0],he=D.textRenderingMode===a.TextRenderingMode.FILL&&!V.disableFontFace&&!D.patternFill;te.save(),te.transform(...D.textMatrix),te.translate(D.x,D.y+D.textRise),U>0?te.scale($,-1):te.scale($,1);let ae;if(D.patternFill){te.save();const ve=D.fillColor.getPattern(te,this,(0,r.getCurrentTransformInverse)(te),o.PathType.FILL);ae=(0,r.getCurrentTransform)(te),te.restore(),te.fillStyle=ve}let pe=D.lineWidth;const Ee=D.textMatrixScale;if(Ee===0||pe===0){const ve=D.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(ve===a.TextRenderingMode.STROKE||ve===a.TextRenderingMode.FILL_STROKE)&&(pe=this.getSinglePixelWidth())}else pe/=Ee;X!==1&&(te.scale(X,X),pe/=X),te.lineWidth=pe;let we=0,Ie;for(Ie=0;Ie<H;++Ie){const ve=N[Ie];if(typeof ve=="number"){we+=G*ve*W/1e3;continue}let Ve=!1;const Fe=(ve.isSpace?L:0)+C,De=ve.fontChar,Be=ve.accent;let ut,yt,ct=ve.width;if(Q){const nt=ve.vmetric||F,We=-(ve.vmetric?nt[1]:ct*.5)*ne,Jt=nt[2]*ne;ct=nt?-nt[0]:ct,ut=We/X,yt=(we+Jt)/X}else ut=we/X,yt=0;if(V.remeasure&&ct>0){const nt=te.measureText(De).width*1e3/W*X;if(ct<nt&&this.isFontSubpixelAAEnabled){const We=ct/nt;Ve=!0,te.save(),te.scale(We,1),ut/=We}else ct!==nt&&(ut+=(ct-nt)/2e3*W/X)}if(this.contentVisible&&(ve.isInFont||V.missingFile)){if(he&&!Be)te.fillText(De,ut,yt);else if(this.paintChar(De,ut,yt,ae),Be){const nt=ut+W*Be.offset.x/X,We=yt-W*Be.offset.y/X;this.paintChar(Be.fontChar,nt,We,ae)}}let it;Q?it=ct*ne-Fe*U:it=ct*ne+Fe*U,we+=it,Ve&&te.restore()}Q?D.y-=we:D.x+=we*$,te.restore(),this.compose()}showType3Text(N){const D=this.ctx,V=this.current,W=V.font,te=V.fontSize,X=V.fontDirection,C=W.vertical?1:-1,L=V.charSpacing,U=V.wordSpacing,$=V.textHScale*X,H=V.fontMatrix||a.FONT_IDENTITY_MATRIX,Q=N.length,G=V.textRenderingMode===a.TextRenderingMode.INVISIBLE;let F,ne,he,ae;if(!(G||te===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,D.save(),D.transform(...V.textMatrix),D.translate(V.x,V.y),D.scale($,X),F=0;F<Q;++F){if(ne=N[F],typeof ne=="number"){ae=C*ne*te/1e3,this.ctx.translate(ae,0),V.x+=ae*$;continue}const pe=(ne.isSpace?U:0)+L,Ee=W.charProcOperatorList[ne.operatorListId];if(!Ee){(0,a.warn)(`Type3 character "${ne.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ne,this.save(),D.scale(te,te),D.transform(...H),this.executeOperatorList(Ee),this.restore()),he=a.Util.applyTransform([ne.width,0],H)[0]*te+pe,D.translate(he,0),V.x+=he*$}D.restore(),this.processingType3=null}}setCharWidth(N,D){}setCharWidthAndBounds(N,D,V,W,te,X){this.ctx.rect(V,W,te-V,X-W),this.ctx.clip(),this.endPath()}getColorN_Pattern(N){let D;if(N[0]==="TilingPattern"){const V=N[1],W=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),te={createCanvasGraphics:X=>new fe(X,this.commonObjs,this.objs,this.canvasFactory)};D=new o.TilingPattern(N,V,this.ctx,te,W)}else D=this._getPattern(N[1],N[2]);return D}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(N,D,V){var te;const W=((te=this.selectColor)==null?void 0:te.call(this,N,D,V))||a.Util.makeHexColor(N,D,V);this.ctx.strokeStyle=W,this.current.strokeColor=W}setFillRGBColor(N,D,V){var te;const W=((te=this.selectColor)==null?void 0:te.call(this,N,D,V))||a.Util.makeHexColor(N,D,V);this.ctx.fillStyle=W,this.current.fillColor=W,this.current.patternFill=!1}_getPattern(N,D=null){let V;return this.cachedPatterns.has(N)?V=this.cachedPatterns.get(N):(V=(0,o.getShadingPattern)(this.objs.get(N)),this.cachedPatterns.set(N,V)),D&&(V.matrix=D),V}shadingFill(N){if(!this.contentVisible)return;const D=this.ctx;this.save();const V=this._getPattern(N);D.fillStyle=V.getPattern(D,this,(0,r.getCurrentTransformInverse)(D),o.PathType.SHADING);const W=(0,r.getCurrentTransformInverse)(D);if(W){const te=D.canvas,X=te.width,C=te.height,L=a.Util.applyTransform([0,0],W),U=a.Util.applyTransform([0,C],W),$=a.Util.applyTransform([X,0],W),H=a.Util.applyTransform([X,C],W),Q=Math.min(L[0],U[0],$[0],H[0]),G=Math.min(L[1],U[1],$[1],H[1]),F=Math.max(L[0],U[0],$[0],H[0]),ne=Math.max(L[1],U[1],$[1],H[1]);this.ctx.fillRect(Q,G,F-Q,ne-G)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(N,D){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(N)&&N.length===6&&this.transform(...N),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),D)){const V=D[2]-D[0],W=D[3]-D[1];this.ctx.rect(D[0],D[1],V,W),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),D),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(N){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const D=this.ctx;N.isolated||(0,a.info)("TODO: Support non-isolated groups."),N.knockout&&(0,a.warn)("Knockout groups not supported.");const V=(0,r.getCurrentTransform)(D);if(N.matrix&&D.transform(...N.matrix),!N.bbox)throw new Error("Bounding box is required.");let W=a.Util.getAxialAlignedBoundingBox(N.bbox,(0,r.getCurrentTransform)(D));const te=[0,0,D.canvas.width,D.canvas.height];W=a.Util.intersect(W,te)||[0,0,0,0];const X=Math.floor(W[0]),C=Math.floor(W[1]);let L=Math.max(Math.ceil(W[2])-X,1),U=Math.max(Math.ceil(W[3])-C,1),$=1,H=1;L>m&&($=L/m,L=m),U>m&&(H=U/m,U=m),this.current.startNewPathAndClipBox([0,0,L,U]);let Q="groupAt"+this.groupLevel;N.smask&&(Q+="_smask_"+this.smaskCounter++%2);const G=this.cachedCanvases.getCanvas(Q,L,U),F=G.context;F.scale(1/$,1/H),F.translate(-X,-C),F.transform(...V),N.smask?this.smaskStack.push({canvas:G.canvas,context:F,offsetX:X,offsetY:C,scaleX:$,scaleY:H,subtype:N.smask.subtype,backdrop:N.smask.backdrop,transferMap:N.smask.transferMap||null,startTransformInverse:null}):(D.setTransform(1,0,0,1,0,0),D.translate(X,C),D.scale($,H),D.save()),O(D,F),this.ctx=F,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(D),this.groupLevel++}endGroup(N){if(!this.contentVisible)return;this.groupLevel--;const D=this.ctx,V=this.groupStack.pop();if(this.ctx=V,this.ctx.imageSmoothingEnabled=!1,N.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const W=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...W);const te=a.Util.getAxialAlignedBoundingBox([0,0,D.canvas.width,D.canvas.height],W);this.ctx.drawImage(D.canvas,0,0),this.ctx.restore(),this.compose(te)}}beginAnnotation(N,D,V,W,te){if(ke(this,ue,Fl).call(this),A(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(D)&&D.length===4){const X=D[2]-D[0],C=D[3]-D[1];if(te&&this.annotationCanvasMap){V=V.slice(),V[4]-=D[0],V[5]-=D[1],D=D.slice(),D[0]=D[1]=0,D[2]=X,D[3]=C;const[L,U]=a.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:$}=this,H=Math.ceil(X*this.outputScaleX*$),Q=Math.ceil(C*this.outputScaleY*$);this.annotationCanvas=this.canvasFactory.create(H,Q);const{canvas:G,context:F}=this.annotationCanvas;this.annotationCanvasMap.set(N,G),this.annotationCanvas.savedCtx=this.ctx,this.ctx=F,this.ctx.setTransform(L,0,0,-U,0,C*U),A(this.ctx,this.foregroundColor)}else A(this.ctx,this.foregroundColor),this.ctx.rect(D[0],D[1],X,C),this.ctx.clip(),this.endPath()}this.current=new k(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...V),this.transform(...W)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(N){if(!this.contentVisible)return;const D=N.count;N=this.getObject(N.data,N),N.count=D;const V=this.ctx,W=this.processingType3;if(W&&(W.compiled===void 0&&(W.compiled=R(N)),W.compiled)){W.compiled(V);return}const te=this._createMaskCanvas(N),X=te.canvas;V.save(),V.setTransform(1,0,0,1,0,0),V.drawImage(X,te.offsetX,te.offsetY),V.restore(),this.compose()}paintImageMaskXObjectRepeat(N,D,V=0,W=0,te,X){if(!this.contentVisible)return;N=this.getObject(N.data,N);const C=this.ctx;C.save();const L=(0,r.getCurrentTransform)(C);C.transform(D,V,W,te,0,0);const U=this._createMaskCanvas(N);C.setTransform(1,0,0,1,0,0);for(let $=0,H=X.length;$<H;$+=2){const Q=a.Util.transform(L,[D,V,W,te,X[$],X[$+1]]),[G,F]=a.Util.applyTransform([0,0],Q);C.drawImage(U.canvas,G,F)}C.restore(),this.compose()}paintImageMaskXObjectGroup(N){if(!this.contentVisible)return;const D=this.ctx,V=this.current.fillColor,W=this.current.patternFill;for(const te of N){const{data:X,width:C,height:L,transform:U}=te,$=this.cachedCanvases.getCanvas("maskCanvas",C,L),H=$.context;H.save();const Q=this.getObject(X,te);S(H,Q),H.globalCompositeOperation="source-in",H.fillStyle=W?V.getPattern(H,this,(0,r.getCurrentTransformInverse)(D),o.PathType.FILL):V,H.fillRect(0,0,C,L),H.restore(),D.save(),D.transform(...U),D.scale(1,-1),T(D,$.canvas,0,0,C,L,0,-1,1,1),D.restore()}this.compose()}paintImageXObject(N){if(!this.contentVisible)return;const D=this.getObject(N);if(!D){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(D)}paintImageXObjectRepeat(N,D,V,W){if(!this.contentVisible)return;const te=this.getObject(N);if(!te){(0,a.warn)("Dependent image isn't ready yet");return}const X=te.width,C=te.height,L=[];for(let U=0,$=W.length;U<$;U+=2)L.push({transform:[D,0,0,V,W[U],W[U+1]],x:0,y:0,w:X,h:C});this.paintInlineImageXObjectGroup(te,L)}paintInlineImageXObject(N){if(!this.contentVisible)return;const D=N.width,V=N.height,W=this.ctx;this.save(),W.scale(1/D,-1/V);let te;if(typeof HTMLElement=="function"&&N instanceof HTMLElement||!N.data)te=N;else{const U=this.cachedCanvases.getCanvas("inlineImage",D,V),$=U.context;x($,N,this.current.transferMaps),te=U.canvas}const X=this._scaleImage(te,(0,r.getCurrentTransformInverse)(W));W.imageSmoothingEnabled=oe((0,r.getCurrentTransform)(W),N.interpolate);const[C,L]=T(W,X.img,0,0,X.paintWidth,X.paintHeight,0,-V,D,V);if(this.imageLayer){const[U,$]=a.Util.applyTransform([0,-V],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:N,left:U,top:$,width:C,height:L})}this.compose(),this.restore()}paintInlineImageXObjectGroup(N,D){if(!this.contentVisible)return;const V=this.ctx,W=N.width,te=N.height,X=this.cachedCanvases.getCanvas("inlineImage",W,te),C=X.context;x(C,N,this.current.transferMaps);for(const L of D){if(V.save(),V.transform(...L.transform),V.scale(1,-1),T(V,X.canvas,L.x,L.y,L.w,L.h,0,-1,1,1),this.imageLayer){const[U,$]=a.Util.applyTransform([L.x,L.y],(0,r.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:N,left:U,top:$,width:W,height:te})}V.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(N){}markPointProps(N,D){}beginMarkedContent(N){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(N,D){N==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(D)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(N){const D=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(N);const V=this.ctx;this.pendingClip&&(D||(this.pendingClip===J?V.clip("evenodd"):V.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),V.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const N=(0,r.getCurrentTransform)(this.ctx);if(N[1]===0&&N[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(N[0]),Math.abs(N[3]));else{const D=Math.abs(N[0]*N[3]-N[2]*N[1]),V=Math.hypot(N[0],N[2]),W=Math.hypot(N[1],N[3]);this._cachedGetSinglePixelWidth=Math.max(V,W)/D}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:N}=this.current,D=(0,r.getCurrentTransform)(this.ctx);let V,W;if(D[1]===0&&D[2]===0){const te=Math.abs(D[0]),X=Math.abs(D[3]);if(N===0)V=1/te,W=1/X;else{const C=te*N,L=X*N;V=C<1?1/C:1,W=L<1?1/L:1}}else{const te=Math.abs(D[0]*D[3]-D[2]*D[1]),X=Math.hypot(D[0],D[1]),C=Math.hypot(D[2],D[3]);if(N===0)V=C/te,W=X/te;else{const L=N*te;V=C>L?C/L:1,W=X>L?X/L:1}}this._cachedScaleForStroking=[V,W]}return this._cachedScaleForStroking}rescaleAndStroke(N){const{ctx:D}=this,{lineWidth:V}=this.current,[W,te]=this.getScaleForStroking();if(D.lineWidth=V||1,W===1&&te===1){D.stroke();return}let X,C,L;N&&(X=(0,r.getCurrentTransform)(D),C=D.getLineDash().slice(),L=D.lineDashOffset),D.scale(W,te);const U=Math.max(W,te);D.setLineDash(D.getLineDash().map($=>$/U)),D.lineDashOffset/=U,D.stroke(),N&&(D.setTransform(...X),D.setLineDash(C),D.lineDashOffset=L)}isContentVisible(){for(let N=this.markedContentStack.length-1;N>=0;N--)if(!this.markedContentStack[N].visible)return!1;return!0}};ue=new WeakSet,Fl=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let se=fe;e.CanvasGraphics=se;for(const Z in a.OPS)se.prototype[Z]!==void 0&&(se.prototype[a.OPS[Z]]=se.prototype[Z])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=y;var r=n(1),a=n(8),o=n(3);const u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=u;function h(T,R){if(!R||o.isNodeJS)return;const k=R[2]-R[0],x=R[3]-R[1],S=new Path2D;S.rect(R[0],R[1],k,x),T.clip(S)}class d{constructor(){this.constructor===d&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class f extends d{constructor(R){super(),this._type=R[1],this._bbox=R[2],this._colorStops=R[3],this._p0=R[4],this._p1=R[5],this._r0=R[6],this._r1=R[7],this.matrix=null}_createGradient(R){let k;this._type==="axial"?k=R.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(k=R.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const x of this._colorStops)k.addColorStop(x[0],x[1]);return k}getPattern(R,k,x,S){let O;if(S===u.STROKE||S===u.FILL){const A=k.current.getClippedPathBoundingBox(S,(0,a.getCurrentTransform)(R))||[0,0,0,0],I=Math.ceil(A[2]-A[0])||1,P=Math.ceil(A[3]-A[1])||1,j=k.cachedCanvases.getCanvas("pattern",I,P,!0),B=j.context;B.clearRect(0,0,B.canvas.width,B.canvas.height),B.beginPath(),B.rect(0,0,B.canvas.width,B.canvas.height),B.translate(-A[0],-A[1]),x=r.Util.transform(x,[1,0,0,1,A[0],A[1]]),B.transform(...k.baseTransform),this.matrix&&B.transform(...this.matrix),h(B,this._bbox),B.fillStyle=this._createGradient(B),B.fill(),O=R.createPattern(j.canvas,"no-repeat");const ie=new DOMMatrix(x);try{O.setTransform(ie)}catch(oe){(0,r.warn)(`RadialAxialShadingPattern.getPattern: "${oe==null?void 0:oe.message}".`)}}else h(R,this._bbox),O=this._createGradient(R);return O}}function m(T,R,k,x,S,O,A,I){const P=R.coords,j=R.colors,B=T.data,ie=T.width*4;let oe;P[k+1]>P[x+1]&&(oe=k,k=x,x=oe,oe=O,O=A,A=oe),P[x+1]>P[S+1]&&(oe=x,x=S,S=oe,oe=A,A=I,I=oe),P[k+1]>P[x+1]&&(oe=k,k=x,x=oe,oe=O,O=A,A=oe);const le=(P[k]+R.offsetX)*R.scaleX,de=(P[k+1]+R.offsetY)*R.scaleY,K=(P[x]+R.offsetX)*R.scaleX,J=(P[x+1]+R.offsetY)*R.scaleY,se=(P[S]+R.offsetX)*R.scaleX,ue=(P[S+1]+R.offsetY)*R.scaleY;if(de>=ue)return;const q=j[O],fe=j[O+1],Z=j[O+2],N=j[A],D=j[A+1],V=j[A+2],W=j[I],te=j[I+1],X=j[I+2],C=Math.round(de),L=Math.round(ue);let U,$,H,Q,G,F,ne,he;for(let ae=C;ae<=L;ae++){if(ae<J){let ve;ae<de?ve=0:ve=(de-ae)/(de-J),U=le-(le-K)*ve,$=q-(q-N)*ve,H=fe-(fe-D)*ve,Q=Z-(Z-V)*ve}else{let ve;ae>ue?ve=1:J===ue?ve=0:ve=(J-ae)/(J-ue),U=K-(K-se)*ve,$=N-(N-W)*ve,H=D-(D-te)*ve,Q=V-(V-X)*ve}let pe;ae<de?pe=0:ae>ue?pe=1:pe=(de-ae)/(de-ue),G=le-(le-se)*pe,F=q-(q-W)*pe,ne=fe-(fe-te)*pe,he=Z-(Z-X)*pe;const Ee=Math.round(Math.min(U,G)),we=Math.round(Math.max(U,G));let Ie=ie*ae+Ee*4;for(let ve=Ee;ve<=we;ve++)pe=(U-ve)/(U-G),pe<0?pe=0:pe>1&&(pe=1),B[Ie++]=$-($-F)*pe|0,B[Ie++]=H-(H-ne)*pe|0,B[Ie++]=Q-(Q-he)*pe|0,B[Ie++]=255}}function b(T,R,k){const x=R.coords,S=R.colors;let O,A;switch(R.type){case"lattice":const I=R.verticesPerRow,P=Math.floor(x.length/I)-1,j=I-1;for(O=0;O<P;O++){let B=O*I;for(let ie=0;ie<j;ie++,B++)m(T,k,x[B],x[B+1],x[B+I],S[B],S[B+1],S[B+I]),m(T,k,x[B+I+1],x[B+1],x[B+I],S[B+I+1],S[B+1],S[B+I])}break;case"triangles":for(O=0,A=x.length;O<A;O+=3)m(T,k,x[O],x[O+1],x[O+2],S[O],S[O+1],S[O+2]);break;default:throw new Error("illegal figure")}}class E extends d{constructor(R){super(),this._coords=R[2],this._colors=R[3],this._figures=R[4],this._bounds=R[5],this._bbox=R[7],this._background=R[8],this.matrix=null}_createMeshCanvas(R,k,x){const I=Math.floor(this._bounds[0]),P=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-I,B=Math.ceil(this._bounds[3])-P,ie=Math.min(Math.ceil(Math.abs(j*R[0]*1.1)),3e3),oe=Math.min(Math.ceil(Math.abs(B*R[1]*1.1)),3e3),le=j/ie,de=B/oe,K={coords:this._coords,colors:this._colors,offsetX:-I,offsetY:-P,scaleX:1/le,scaleY:1/de},J=ie+2*2,se=oe+2*2,ue=x.getCanvas("mesh",J,se,!1),q=ue.context,fe=q.createImageData(ie,oe);if(k){const N=fe.data;for(let D=0,V=N.length;D<V;D+=4)N[D]=k[0],N[D+1]=k[1],N[D+2]=k[2],N[D+3]=255}for(const N of this._figures)b(fe,N,K);return q.putImageData(fe,2,2),{canvas:ue.canvas,offsetX:I-2*le,offsetY:P-2*de,scaleX:le,scaleY:de}}getPattern(R,k,x,S){h(R,this._bbox);let O;if(S===u.SHADING)O=r.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(R));else if(O=r.Util.singularValueDecompose2dScale(k.baseTransform),this.matrix){const I=r.Util.singularValueDecompose2dScale(this.matrix);O=[O[0]*I[0],O[1]*I[1]]}const A=this._createMeshCanvas(O,S===u.SHADING?null:this._background,k.cachedCanvases);return S!==u.SHADING&&(R.setTransform(...k.baseTransform),this.matrix&&R.transform(...this.matrix)),R.translate(A.offsetX,A.offsetY),R.scale(A.scaleX,A.scaleY),R.createPattern(A.canvas,"no-repeat")}}class w extends d{getPattern(){return"hotpink"}}function y(T){switch(T[0]){case"RadialAxial":return new f(T);case"Mesh":return new E(T);case"Dummy":return new w}throw new Error(`Unknown IR type: ${T[0]}`)}const g={COLORED:1,UNCOLORED:2};class v{static get MAX_PATTERN_SIZE(){return(0,r.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(R,k,x,S,O){this.operatorList=R[2],this.matrix=R[3]||[1,0,0,1,0,0],this.bbox=R[4],this.xstep=R[5],this.ystep=R[6],this.paintType=R[7],this.tilingType=R[8],this.color=k,this.ctx=x,this.canvasGraphicsFactory=S,this.baseTransform=O}createPatternCanvas(R){const k=this.operatorList,x=this.bbox,S=this.xstep,O=this.ystep,A=this.paintType,I=this.tilingType,P=this.color,j=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+I);const B=x[0],ie=x[1],oe=x[2],le=x[3],de=r.Util.singularValueDecompose2dScale(this.matrix),K=r.Util.singularValueDecompose2dScale(this.baseTransform),J=[de[0]*K[0],de[1]*K[1]],se=this.getSizeAndScale(S,this.ctx.canvas.width,J[0]),ue=this.getSizeAndScale(O,this.ctx.canvas.height,J[1]),q=R.cachedCanvases.getCanvas("pattern",se.size,ue.size,!0),fe=q.context,Z=j.createCanvasGraphics(fe);Z.groupLevel=R.groupLevel,this.setFillAndStrokeStyleToContext(Z,A,P);let N=B,D=ie,V=oe,W=le;return B<0&&(N=0,V+=Math.abs(B)),ie<0&&(D=0,W+=Math.abs(ie)),fe.translate(-(se.scale*N),-(ue.scale*D)),Z.transform(se.scale,0,0,ue.scale,0,0),fe.save(),this.clipBbox(Z,N,D,V,W),Z.baseTransform=(0,a.getCurrentTransform)(Z.ctx),Z.executeOperatorList(k),Z.endDrawing(),{canvas:q.canvas,scaleX:se.scale,scaleY:ue.scale,offsetX:N,offsetY:D}}getSizeAndScale(R,k,x){R=Math.abs(R);const S=Math.max(v.MAX_PATTERN_SIZE,k);let O=Math.ceil(R*x);return O>=S?O=S:x=O/R,{scale:x,size:O}}clipBbox(R,k,x,S,O){const A=S-k,I=O-x;R.ctx.rect(k,x,A,I),R.current.updateRectMinMax((0,a.getCurrentTransform)(R.ctx),[k,x,S,O]),R.clip(),R.endPath()}setFillAndStrokeStyleToContext(R,k,x){const S=R.ctx,O=R.current;switch(k){case g.COLORED:const A=this.ctx;S.fillStyle=A.fillStyle,S.strokeStyle=A.strokeStyle,O.fillColor=A.fillStyle,O.strokeColor=A.strokeStyle;break;case g.UNCOLORED:const I=r.Util.makeHexColor(x[0],x[1],x[2]);S.fillStyle=I,S.strokeStyle=I,O.fillColor=I,O.strokeColor=I;break;default:throw new r.FormatError(`Unsupported paint type: ${k}`)}}getPattern(R,k,x,S){let O=x;S!==u.SHADING&&(O=r.Util.transform(O,k.baseTransform),this.matrix&&(O=r.Util.transform(O,this.matrix)));const A=this.createPatternCanvas(k);let I=new DOMMatrix(O);I=I.translate(A.offsetX,A.offsetY),I=I.scale(1/A.scaleX,1/A.scaleY);const P=R.createPattern(A.canvas,"repeat");try{P.setTransform(I)}catch(j){(0,r.warn)(`TilingPattern.getPattern: "${j==null?void 0:j.message}".`)}return P}}e.TilingPattern=v},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=a;var r=n(1);function a({src:o,srcPos:u=0,dest:h,destPos:d=0,width:f,height:m,inverseDecode:b=!1}){const E=r.FeatureTest.isLittleEndian?4278190080:255,[w,y]=b?[0,E]:[E,0],g=f>>3,v=f&7,T=o.length;h=new Uint32Array(h.buffer);for(let R=0;R<m;R++){for(const x=u+g;u<x;u++){const S=u<T?o[u]:255;h[d++]=S&128?y:w,h[d++]=S&64?y:w,h[d++]=S&32?y:w,h[d++]=S&16?y:w,h[d++]=S&8?y:w,h[d++]=S&4?y:w,h[d++]=S&2?y:w,h[d++]=S&1?y:w}if(v===0)continue;const k=u<T?o[u++]:255;for(let x=0;x<v;x++)h[d++]=k&1<<7-x?y:w}return{srcPos:u,destPos:d}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=n.workerPort===void 0?null:n.workerPort,n.workerSrc=n.workerSrc===void 0?"":n.workerSrc},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=n(1);const a={UNKNOWN:0,DATA:1,ERROR:2},o={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function u(d){switch(d instanceof Error||typeof d=="object"&&d!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new r.AbortException(d.message);case"MissingPDFException":return new r.MissingPDFException(d.message);case"PasswordException":return new r.PasswordException(d.message,d.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(d.message,d.status);case"UnknownErrorException":return new r.UnknownErrorException(d.message,d.details);default:return new r.UnknownErrorException(d.message,d.toString())}}class h{constructor(f,m,b){this.sourceName=f,this.targetName=m,this.comObj=b,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const w=E.data;if(w.targetName!==this.sourceName)return;if(w.stream){this._processStreamMessage(w);return}if(w.callback){const g=w.callbackId,v=this.callbackCapabilities[g];if(!v)throw new Error(`Cannot resolve callback ${g}`);if(delete this.callbackCapabilities[g],w.callback===a.DATA)v.resolve(w.data);else if(w.callback===a.ERROR)v.reject(u(w.reason));else throw new Error("Unexpected callback case");return}const y=this.actionHandler[w.action];if(!y)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){const g=this.sourceName,v=w.sourceName;new Promise(function(T){T(y(w.data))}).then(function(T){b.postMessage({sourceName:g,targetName:v,callback:a.DATA,callbackId:w.callbackId,data:T})},function(T){b.postMessage({sourceName:g,targetName:v,callback:a.ERROR,callbackId:w.callbackId,reason:u(T)})});return}if(w.streamId){this._createStreamSink(w);return}y(w.data)},b.addEventListener("message",this._onComObjOnMessage)}on(f,m){const b=this.actionHandler;if(b[f])throw new Error(`There is already an actionName called "${f}"`);b[f]=m}send(f,m,b){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:m},b)}sendWithPromise(f,m,b){const E=this.callbackId++,w=(0,r.createPromiseCapability)();this.callbackCapabilities[E]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:E,data:m},b)}catch(y){w.reject(y)}return w.promise}sendWithStream(f,m,b,E){const w=this.streamId++,y=this.sourceName,g=this.targetName,v=this.comObj;return new ReadableStream({start:T=>{const R=(0,r.createPromiseCapability)();return this.streamControllers[w]={controller:T,startCall:R,pullCall:null,cancelCall:null,isClosed:!1},v.postMessage({sourceName:y,targetName:g,action:f,streamId:w,data:m,desiredSize:T.desiredSize},E),R.promise},pull:T=>{const R=(0,r.createPromiseCapability)();return this.streamControllers[w].pullCall=R,v.postMessage({sourceName:y,targetName:g,stream:o.PULL,streamId:w,desiredSize:T.desiredSize}),R.promise},cancel:T=>{(0,r.assert)(T instanceof Error,"cancel must have a valid reason");const R=(0,r.createPromiseCapability)();return this.streamControllers[w].cancelCall=R,this.streamControllers[w].isClosed=!0,v.postMessage({sourceName:y,targetName:g,stream:o.CANCEL,streamId:w,reason:u(T)}),R.promise}},b)}_createStreamSink(f){const m=f.streamId,b=this.sourceName,E=f.sourceName,w=this.comObj,y=this,g=this.actionHandler[f.action],v={enqueue(T,R=1,k){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=R,x>0&&this.desiredSize<=0&&(this.sinkCapability=(0,r.createPromiseCapability)(),this.ready=this.sinkCapability.promise),w.postMessage({sourceName:b,targetName:E,stream:o.ENQUEUE,streamId:m,chunk:T},k)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:b,targetName:E,stream:o.CLOSE,streamId:m}),delete y.streamSinks[m])},error(T){(0,r.assert)(T instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:b,targetName:E,stream:o.ERROR,streamId:m,reason:u(T)}))},sinkCapability:(0,r.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};v.sinkCapability.resolve(),v.ready=v.sinkCapability.promise,this.streamSinks[m]=v,new Promise(function(T){T(g(f.data,v))}).then(function(){w.postMessage({sourceName:b,targetName:E,stream:o.START_COMPLETE,streamId:m,success:!0})},function(T){w.postMessage({sourceName:b,targetName:E,stream:o.START_COMPLETE,streamId:m,reason:u(T)})})}_processStreamMessage(f){const m=f.streamId,b=this.sourceName,E=f.sourceName,w=this.comObj,y=this.streamControllers[m],g=this.streamSinks[m];switch(f.stream){case o.START_COMPLETE:f.success?y.startCall.resolve():y.startCall.reject(u(f.reason));break;case o.PULL_COMPLETE:f.success?y.pullCall.resolve():y.pullCall.reject(u(f.reason));break;case o.PULL:if(!g){w.postMessage({sourceName:b,targetName:E,stream:o.PULL_COMPLETE,streamId:m,success:!0});break}g.desiredSize<=0&&f.desiredSize>0&&g.sinkCapability.resolve(),g.desiredSize=f.desiredSize,new Promise(function(v){v(g.onPull&&g.onPull())}).then(function(){w.postMessage({sourceName:b,targetName:E,stream:o.PULL_COMPLETE,streamId:m,success:!0})},function(v){w.postMessage({sourceName:b,targetName:E,stream:o.PULL_COMPLETE,streamId:m,reason:u(v)})});break;case o.ENQUEUE:if((0,r.assert)(y,"enqueue should have stream controller"),y.isClosed)break;y.controller.enqueue(f.chunk);break;case o.CLOSE:if((0,r.assert)(y,"close should have stream controller"),y.isClosed)break;y.isClosed=!0,y.controller.close(),this._deleteStreamController(y,m);break;case o.ERROR:(0,r.assert)(y,"error should have stream controller"),y.controller.error(u(f.reason)),this._deleteStreamController(y,m);break;case o.CANCEL_COMPLETE:f.success?y.cancelCall.resolve():y.cancelCall.reject(u(f.reason)),this._deleteStreamController(y,m);break;case o.CANCEL:if(!g)break;new Promise(function(v){v(g.onCancel&&g.onCancel(u(f.reason)))}).then(function(){w.postMessage({sourceName:b,targetName:E,stream:o.CANCEL_COMPLETE,streamId:m,success:!0})},function(v){w.postMessage({sourceName:b,targetName:E,stream:o.CANCEL_COMPLETE,streamId:m,reason:u(v)})}),g.sinkCapability.reject(u(f.reason)),g.isCancelled=!0,delete this.streamSinks[m];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(f,m){await Promise.allSettled([f.startCall&&f.startCall.promise,f.pullCall&&f.pullCall.promise,f.cancelCall&&f.cancelCall.promise]),delete this.streamControllers[m]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=h},(t,e,n)=>{var o,u;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(1);class a{constructor({parsedData:d,rawData:f}){Ne(this,o);Ne(this,u);Me(this,o,d),Me(this,u,f)}getRaw(){return ee(this,u)}get(d){return ee(this,o).get(d)??null}getAll(){return(0,r.objectFromMap)(ee(this,o))}has(d){return ee(this,o).has(d)}}o=new WeakMap,u=new WeakMap,e.Metadata=a},(t,e,n)=>{var h,d,f,m,b,E,Ul;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=n(1);const a=Symbol("INTERNAL");class o{constructor(g,v){Ne(this,h,!0);this.name=g,this.intent=v}get visible(){return ee(this,h)}_setVisible(g,v){g!==a&&(0,r.unreachable)("Internal method `_setVisible` called."),Me(this,h,v)}}h=new WeakMap;class u{constructor(g){Ne(this,E);Ne(this,d,!0);Ne(this,f,new Map);Ne(this,m,null);Ne(this,b,null);if(this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,Me(this,b,g.order);for(const v of g.groups)ee(this,f).set(v.id,new o(v.name,v.intent));if(g.baseState==="OFF")for(const v of ee(this,f).values())v._setVisible(a,!1);for(const v of g.on)ee(this,f).get(v)._setVisible(a,!0);for(const v of g.off)ee(this,f).get(v)._setVisible(a,!1);Me(this,m,new Map);for(const[v,T]of ee(this,f))ee(this,m).set(v,T.visible)}}isVisible(g){if(ee(this,f).size===0)return!0;if(!g)return(0,r.warn)("Optional content group not defined."),!0;if(g.type==="OCG")return ee(this,f).has(g.id)?ee(this,f).get(g.id).visible:((0,r.warn)(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return ke(this,E,Ul).call(this,g.expression);if(!g.policy||g.policy==="AnyOn"){for(const v of g.ids){if(!ee(this,f).has(v))return(0,r.warn)(`Optional content group not found: ${v}`),!0;if(ee(this,f).get(v).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const v of g.ids){if(!ee(this,f).has(v))return(0,r.warn)(`Optional content group not found: ${v}`),!0;if(!ee(this,f).get(v).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const v of g.ids){if(!ee(this,f).has(v))return(0,r.warn)(`Optional content group not found: ${v}`),!0;if(!ee(this,f).get(v).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const v of g.ids){if(!ee(this,f).has(v))return(0,r.warn)(`Optional content group not found: ${v}`),!0;if(ee(this,f).get(v).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${g.policy}.`),!0}return(0,r.warn)(`Unknown group type ${g.type}.`),!0}setVisibility(g,v=!0){if(!ee(this,f).has(g)){(0,r.warn)(`Optional content group not found: ${g}`);return}ee(this,f).get(g)._setVisible(a,!!v),Me(this,d,null)}get hasInitialVisibility(){if(ee(this,d)!==null)return ee(this,d);for(const[g,v]of ee(this,f)){const T=ee(this,m).get(g);if(v.visible!==T)return Me(this,d,!1)}return Me(this,d,!0)}getOrder(){return ee(this,f).size?ee(this,b)?ee(this,b).slice():[...ee(this,f).keys()]:null}getGroups(){return ee(this,f).size>0?(0,r.objectFromMap)(ee(this,f)):null}getGroup(g){return ee(this,f).get(g)||null}}d=new WeakMap,f=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakSet,Ul=function(g){const v=g.length;if(v<2)return!0;const T=g[0];for(let R=1;R<v;R++){const k=g[R];let x;if(Array.isArray(k))x=ke(this,E,Ul).call(this,k);else if(ee(this,f).has(k))x=ee(this,f).get(k).visible;else return(0,r.warn)(`Optional content group not found: ${k}`),!0;switch(T){case"And":if(!x)return!1;break;case"Or":if(x)return!0;break;case"Not":return!x;default:return!0}}return T==="And"},e.OptionalContentConfig=u},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=n(1),a=n(8);class o{constructor(f,m){(0,r.assert)(m,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=f.progressiveDone||!1,this._contentDispositionFilename=f.contentDispositionFilename||null;const b=f.initialData;if((b==null?void 0:b.length)>0){const E=new Uint8Array(b).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=m,this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._contentLength=f.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,w)=>{this._onReceiveData({begin:E,chunk:w})}),this._pdfDataRangeTransport.addProgressListener((E,w)=>{this._onProgress({loaded:E,total:w})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(f){const m=new Uint8Array(f.chunk).buffer;if(f.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(m):this._queuedChunks.push(m);else{const b=this._rangeReaders.some(function(E){return E._begin!==f.begin?!1:(E._enqueue(m),!0)});(0,r.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}_onProgress(f){if(f.total===void 0){const m=this._rangeReaders[0];m!=null&&m.onProgress&&m.onProgress({loaded:f.loaded})}else{const m=this._fullRequestReader;m!=null&&m.onProgress&&m.onProgress({loaded:f.loaded,total:f.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const m=this._rangeReaders.indexOf(f);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new u(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,m){if(m<=this._progressiveDataLength)return null;const b=new h(this,f,m);return this._pdfDataRangeTransport.requestDataRange(f,m),this._rangeReaders.push(b),b}cancelAllRequests(f){this._fullRequestReader&&this._fullRequestReader.cancel(f);for(const m of this._rangeReaders.slice(0))m.cancel(f);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=o;class u{constructor(f,m,b=!1,E=null){this._stream=f,this._done=b||!1,this._filename=(0,a.isPdfFile)(E)?E:null,this._queuedChunks=m||[],this._loaded=0;for(const w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=(0,r.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class h{constructor(f,m,b){this._stream=f,this._begin=m,this._end=b,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const f=(0,r.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(a){const o=[],u={items:o,styles:Object.create(null)};function h(d){var b;if(!d)return;let f=null;const m=d.name;if(m==="#text")f=d.value;else if(n.shouldBuildText(m))(b=d==null?void 0:d.attributes)!=null&&b.textContent?f=d.attributes.textContent:d.value&&(f=d.value);else return;if(f!==null&&o.push({str:f}),!!d.children)for(const E of d.children)h(E)}return h(a),u}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=n(9);const a=function(d){return new Promise((f,m)=>{require$$5.readFile(d,(E,w)=>{if(E||!w){m(new Error(E));return}f(new Uint8Array(w))})})};class o extends r.BaseCanvasFactory{_createCanvas(f,m){return require$$5.createCanvas(f,m)}}e.NodeCanvasFactory=o;class u extends r.BaseCMapReaderFactory{_fetchData(f,m){return a(f).then(b=>({cMapData:b,compressionType:m}))}}e.NodeCMapReaderFactory=u;class h extends r.BaseStandardFontDataFactory{_fetchData(f){return a(f)}}e.NodeStandardFontDataFactory=h},(t,e,n)=>{var d,f,m,b,E,w,y,g,v,Bl,If,zl,Df;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=n(7),a=n(1),o=n(23),u=n(24);const S=class S{constructor(A){Ne(this,v);Ne(this,d);Ne(this,f,!1);Ne(this,m,this.pointerup.bind(this));Ne(this,b,this.pointerdown.bind(this));Ne(this,E,new Map);Ne(this,w,!1);Ne(this,y,!1);Ne(this,g);S._initialized||(S._initialized=!0,o.FreeTextEditor.initialize(A.l10n),u.InkEditor.initialize(A.l10n),A.uiManager.registerEditorTypes([o.FreeTextEditor,u.InkEditor])),Me(this,g,A.uiManager),this.annotationStorage=A.annotationStorage,this.pageIndex=A.pageIndex,this.div=A.div,Me(this,d,A.accessibilityManager),ee(this,g).addLayer(this)}updateToolbar(A){ee(this,g).updateToolbar(A)}updateMode(A=ee(this,g).getMode()){ke(this,v,Df).call(this),A===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ee(this,g).unselectAll()}addInkEditorIfNeeded(A){if(!A&&ee(this,g).getMode()!==a.AnnotationEditorType.INK)return;if(!A){for(const P of ee(this,E).values())if(P.isEmpty()){P.setInBackground();return}}ke(this,v,zl).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(A){ee(this,g).setEditingState(A)}addCommands(A){ee(this,g).addCommands(A)}enable(){this.div.style.pointerEvents="auto";for(const A of ee(this,E).values())A.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const A of ee(this,E).values())A.disableEditing()}setActiveEditor(A){ee(this,g).getActive()!==A&&ee(this,g).setActiveEditor(A)}enableClick(){this.div.addEventListener("pointerdown",ee(this,b)),this.div.addEventListener("pointerup",ee(this,m))}disableClick(){this.div.removeEventListener("pointerdown",ee(this,b)),this.div.removeEventListener("pointerup",ee(this,m))}attach(A){ee(this,E).set(A.id,A)}detach(A){var I;ee(this,E).delete(A.id),(I=ee(this,d))==null||I.removePointerInTextLayer(A.contentDiv)}remove(A){ee(this,g).removeEditor(A),this.detach(A),this.annotationStorage.remove(A.id),A.div.style.display="none",setTimeout(()=>{A.div.style.display="",A.div.remove(),A.isAttachedToDOM=!1,document.activeElement===document.body&&ee(this,g).focusMainContainer()},0),ee(this,y)||this.addInkEditorIfNeeded(!1)}add(A){if(ke(this,v,Bl).call(this,A),ee(this,g).addEditor(A),this.attach(A),!A.isAttachedToDOM){const I=A.render();this.div.append(I),A.isAttachedToDOM=!0}this.moveEditorInDOM(A),A.onceAdded(),this.addToAnnotationStorage(A)}moveEditorInDOM(A){var I;(I=ee(this,d))==null||I.moveElementInDOM(this.div,A.div,A.contentDiv,!0)}addToAnnotationStorage(A){!A.isEmpty()&&!this.annotationStorage.has(A.id)&&this.annotationStorage.setValue(A.id,A)}addOrRebuild(A){A.needsToBeRebuilt()?A.rebuild():this.add(A)}addANewEditor(A){const I=()=>{this.addOrRebuild(A)},P=()=>{A.remove()};this.addCommands({cmd:I,undo:P,mustExec:!0})}addUndoableEditor(A){const I=()=>{this.addOrRebuild(A)},P=()=>{A.remove()};this.addCommands({cmd:I,undo:P,mustExec:!1})}getNextId(){return ee(this,g).getId()}deserialize(A){switch(A.annotationType){case a.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(A,this);case a.AnnotationEditorType.INK:return u.InkEditor.deserialize(A,this)}return null}setSelected(A){ee(this,g).setSelected(A)}toggleSelected(A){ee(this,g).toggleSelected(A)}isSelected(A){return ee(this,g).isSelected(A)}unselect(A){ee(this,g).unselect(A)}pointerup(A){const I=r.KeyboardManager.platform.isMac;if(!(A.button!==0||A.ctrlKey&&I)&&A.target===this.div&&ee(this,w)){if(Me(this,w,!1),!ee(this,f)){Me(this,f,!0);return}ke(this,v,zl).call(this,A)}}pointerdown(A){const I=r.KeyboardManager.platform.isMac;if(A.button!==0||A.ctrlKey&&I||A.target!==this.div)return;Me(this,w,!0);const P=ee(this,g).getActive();Me(this,f,!P||P.isEmpty())}drop(A){const I=A.dataTransfer.getData("text/plain"),P=ee(this,g).getEditor(I);if(!P)return;A.preventDefault(),A.dataTransfer.dropEffect="move",ke(this,v,Bl).call(this,P);const j=this.div.getBoundingClientRect(),B=A.clientX-j.x,ie=A.clientY-j.y;P.translate(B-P.startX,ie-P.startY),this.moveEditorInDOM(P),P.div.focus()}dragover(A){A.preventDefault()}destroy(){var A,I;((A=ee(this,g).getActive())==null?void 0:A.parent)===this&&ee(this,g).setActiveEditor(null);for(const P of ee(this,E).values())(I=ee(this,d))==null||I.removePointerInTextLayer(P.contentDiv),P.isAttachedToDOM=!1,P.div.remove(),P.parent=null;this.div=null,ee(this,E).clear(),ee(this,g).removeLayer(this)}render(A){this.viewport=A.viewport,(0,r.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const I of ee(this,g).getEditors(this.pageIndex))this.add(I);this.updateMode()}update(A){this.viewport=A.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[A,I,P,j]=this.viewport.viewBox,B=P-A,ie=j-I;return[B,ie]}get viewportBaseDimensions(){const{width:A,height:I,rotation:P}=this.viewport;return P%180===0?[A,I]:[I,A]}setDimensions(){const{width:A,height:I,rotation:P}=this.viewport,j=P%180!==0,B=Math.floor(A)+"px",ie=Math.floor(I)+"px";this.div.style.width=j?ie:B,this.div.style.height=j?B:ie,this.div.setAttribute("data-main-rotation",P)}};d=new WeakMap,f=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,v=new WeakSet,Bl=function(A){var I;A.parent!==this&&(this.attach(A),A.pageIndex=this.pageIndex,(I=A.parent)==null||I.detach(A),A.parent=this,A.div&&A.isAttachedToDOM&&(A.div.remove(),this.div.append(A.div)))},If=function(A){switch(ee(this,g).getMode()){case a.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(A);case a.AnnotationEditorType.INK:return new u.InkEditor(A)}return null},zl=function(A){const I=this.getNextId(),P=ke(this,v,If).call(this,{parent:this,id:I,x:A.offsetX,y:A.offsetY});return P&&this.add(P),P},Df=function(){Me(this,y,!0);for(const A of ee(this,E).values())A.isEmpty()&&A.remove();Me(this,y,!1)},Et(S,"_initialized",!1);let h=S;e.AnnotationEditorLayer=h},(t,e,n)=>{var h,d,f,m,b,E,w,y,Nf,Mf,Lf,$l;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=n(1),a=n(7),o=n(6);const k=class k extends o.AnnotationEditor{constructor(O){super({...O,name:"freeTextEditor"});Ne(this,y);Ne(this,h,this.editorDivBlur.bind(this));Ne(this,d,this.editorDivFocus.bind(this));Ne(this,f,this.editorDivKeydown.bind(this));Ne(this,m);Ne(this,b,"");Ne(this,E,!1);Ne(this,w);Me(this,m,O.color||k._defaultColor||o.AnnotationEditor._defaultLineColor),Me(this,w,O.fontSize||k._defaultFontSize)}static initialize(O){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(I=>[I,O.get(I)]));const A=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(A.getPropertyValue("--freetext-padding"))}static updateDefaultParams(O,A){switch(O){case r.AnnotationEditorParamsType.FREETEXT_SIZE:k._defaultFontSize=A;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:k._defaultColor=A;break}}updateParams(O,A){switch(O){case r.AnnotationEditorParamsType.FREETEXT_SIZE:ke(this,y,Nf).call(this,A);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:ke(this,y,Mf).call(this,A);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,k._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,k._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,ee(this,w)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,ee(this,m)]]}getInitialTranslation(){return[-k._internalPadding*this.parent.scaleFactor,-(k._internalPadding+ee(this,w))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",ee(this,f)),this.editorDiv.addEventListener("focus",ee(this,d)),this.editorDiv.addEventListener("blur",ee(this,h)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",ee(this,f)),this.editorDiv.removeEventListener("focus",ee(this,d)),this.editorDiv.removeEventListener("blur",ee(this,h)),this.div.focus(),this.isEditing=!1)}focusin(O){super.focusin(O),O.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),ee(this,E)||(Me(this,E,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Me(this,b,ke(this,y,Lf).call(this).trimEnd()),ke(this,y,$l).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(O){this.enableEditMode(),this.editorDiv.focus()}keydown(O){O.target===this.div&&O.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(O){k._keyboardManager.exec(this,O)}editorDivFocus(O){this.isEditing=!0}editorDivBlur(O){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let O,A;this.width&&(O=this.x,A=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),k._l10nPromise.get("editor_free_text_aria_label").then(P=>{var j;return(j=this.editorDiv)==null?void 0:j.setAttribute("aria-label",P)}),k._l10nPromise.get("free_text_default_content").then(P=>{var j;return(j=this.editorDiv)==null?void 0:j.setAttribute("default-content",P)}),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${ee(this,w)}px * var(--scale-factor))`,I.color=ee(this,m),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[P,j]=this.parent.viewportBaseDimensions;this.setAt(O*P,A*j,this.width*P,this.height*j);for(const B of ee(this,b).split(`
`)){const ie=document.createElement("div");ie.append(B?document.createTextNode(B):document.createElement("br")),this.editorDiv.append(ie)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(O,A){const I=super.deserialize(O,A);return Me(I,w,O.fontSize),Me(I,m,r.Util.makeHexColor(...O.color)),Me(I,b,O.value),I}serialize(){if(this.isEmpty())return null;const O=k._internalPadding*this.parent.scaleFactor,A=this.getRect(O,O),I=o.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:r.AnnotationEditorType.FREETEXT,color:I,fontSize:ee(this,w),value:ee(this,b),pageIndex:this.parent.pageIndex,rect:A,rotation:this.rotation}}};h=new WeakMap,d=new WeakMap,f=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakMap,w=new WeakMap,y=new WeakSet,Nf=function(O){const A=P=>{this.editorDiv.style.fontSize=`calc(${P}px * var(--scale-factor))`,this.translate(0,-(P-ee(this,w))*this.parent.scaleFactor),Me(this,w,P),ke(this,y,$l).call(this)},I=ee(this,w);this.parent.addCommands({cmd:()=>{A(O)},undo:()=>{A(I)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Mf=function(O){const A=ee(this,m);this.parent.addCommands({cmd:()=>{Me(this,m,O),this.editorDiv.style.color=O},undo:()=>{Me(this,m,A),this.editorDiv.style.color=A},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Lf=function(){const O=this.editorDiv.getElementsByTagName("div");if(O.length===0)return this.editorDiv.innerText;const A=[];for(let I=0,P=O.length;I<P;I++){const B=O[I].firstChild;(B==null?void 0:B.nodeName)==="#text"?A.push(B.data):A.push("")}return A.join(`
`)},$l=function(){const[O,A]=this.parent.viewportBaseDimensions,I=this.div.getBoundingClientRect();this.width=I.width/O,this.height=I.height/A},Et(k,"_freeTextDefaultContent",""),Et(k,"_l10nPromise"),Et(k,"_internalPadding",0),Et(k,"_defaultColor",null),Et(k,"_defaultFontSize",10),Et(k,"_keyboardManager",new a.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],k.prototype.commitOrRemove]])),Et(k,"_type","freetext");let u=k;e.FreeTextEditor=u},(t,e,n)=>{var f,m,b,E,w,y,g,v,T,R,k,x,S,O,A,jf,Ff,Uf,Bf,ql,zf,$f,qf,Nn,Vl,xa,Ca,Es,Hl,Ra,N,Gl,Vf,Hf,Gf,Zl,Oa,Ss,Kl;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return o.fitCurve}});var r=n(1),a=n(6),o=n(25),u=n(7);const h=16,$=class $ extends a.AnnotationEditor{constructor(G){super({...G,name:"inkEditor"});Ne(this,A);Ne(this,f,0);Ne(this,m,0);Ne(this,b,0);Ne(this,E,this.canvasPointermove.bind(this));Ne(this,w,this.canvasPointerleave.bind(this));Ne(this,y,this.canvasPointerup.bind(this));Ne(this,g,this.canvasPointerdown.bind(this));Ne(this,v,!1);Ne(this,T,!1);Ne(this,R,null);Ne(this,k,null);Ne(this,x,0);Ne(this,S,0);Ne(this,O,null);this.color=G.color||null,this.thickness=G.thickness||null,this.opacity=G.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(G){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(F=>[F,G.get(F)]))}static updateDefaultParams(G,F){switch(G){case r.AnnotationEditorParamsType.INK_THICKNESS:$._defaultThickness=F;break;case r.AnnotationEditorParamsType.INK_COLOR:$._defaultColor=F;break;case r.AnnotationEditorParamsType.INK_OPACITY:$._defaultOpacity=F/100;break}}updateParams(G,F){switch(G){case r.AnnotationEditorParamsType.INK_THICKNESS:ke(this,A,jf).call(this,F);break;case r.AnnotationEditorParamsType.INK_COLOR:ke(this,A,Ff).call(this,F);break;case r.AnnotationEditorParamsType.INK_OPACITY:ke(this,A,Uf).call(this,F);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,$._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,$._defaultColor||a.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round($._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||$._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||$._defaultColor||a.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??$._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ke(this,A,xa).call(this),ke(this,A,Ca).call(this)),this.isAttachedToDOM||(this.parent.add(this),ke(this,A,Es).call(this)),ke(this,A,Ss).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ee(this,k).disconnect(),Me(this,k,null),super.remove())}enableEditMode(){ee(this,v)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",ee(this,g)),this.canvas.addEventListener("pointerup",ee(this,y)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ee(this,g)),this.canvas.removeEventListener("pointerup",ee(this,y)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){ee(this,v)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Me(this,v,!0),this.div.classList.add("disabled"),ke(this,A,Ss).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(G){super.focusin(G),this.enableEditMode()}canvasPointerdown(G){G.button!==0||!this.isInEditMode()||ee(this,v)||(this.setInForeground(),G.type!=="mouse"&&this.div.focus(),G.stopPropagation(),this.canvas.addEventListener("pointerleave",ee(this,w)),this.canvas.addEventListener("pointermove",ee(this,E)),ke(this,A,zf).call(this,G.offsetX,G.offsetY))}canvasPointermove(G){G.stopPropagation(),ke(this,A,$f).call(this,G.offsetX,G.offsetY)}canvasPointerup(G){G.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(G.stopPropagation(),ke(this,A,Vl).call(this,G),this.setInBackground())}canvasPointerleave(G){ke(this,A,Vl).call(this,G),this.setInBackground()}render(){if(this.div)return this.div;let G,F;this.width&&(G=this.x,F=this.y),super.render(),$._l10nPromise.get("editor_ink_aria_label").then(Ee=>{var we;return(we=this.div)==null?void 0:we.setAttribute("aria-label",Ee)});const[ne,he,ae,pe]=ke(this,A,Bf).call(this);if(this.setAt(ne,he,0,0),this.setDims(ae,pe),ke(this,A,xa).call(this),this.width){const[Ee,we]=this.parent.viewportBaseDimensions;this.setAt(G*Ee,F*we,this.width*Ee,this.height*we),Me(this,T,!0),ke(this,A,Es).call(this),this.setDims(this.width*Ee,this.height*we),ke(this,A,Nn).call(this),ke(this,A,Kl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ke(this,A,Ca).call(this),this.div}setDimensions(G,F){const ne=Math.round(G),he=Math.round(F);if(ee(this,x)===ne&&ee(this,S)===he)return;Me(this,x,ne),Me(this,S,he),this.canvas.style.visibility="hidden",ee(this,f)&&Math.abs(ee(this,f)-G/F)>.01&&(F=Math.ceil(G/ee(this,f)),this.setDims(G,F));const[ae,pe]=this.parent.viewportBaseDimensions;this.width=G/ae,this.height=F/pe,ee(this,v)&&ke(this,A,Hl).call(this,G,F),ke(this,A,Es).call(this),ke(this,A,Nn).call(this),this.canvas.style.visibility="visible"}static deserialize(G,F){var Ve,Fe;const ne=super.deserialize(G,F);ne.thickness=G.thickness,ne.color=r.Util.makeHexColor(...G.color),ne.opacity=G.opacity;const[he,ae]=F.pageDimensions,pe=ne.width*he,Ee=ne.height*ae,we=F.scaleFactor,Ie=G.thickness/2;Me(ne,f,pe/Ee),Me(ne,v,!0),Me(ne,x,Math.round(pe)),Me(ne,S,Math.round(Ee));for(const{bezier:De}of G.paths){const Be=[];ne.paths.push(Be);let ut=we*(De[0]-Ie),yt=we*(Ee-De[1]-Ie);for(let it=2,nt=De.length;it<nt;it+=6){const We=we*(De[it]-Ie),Jt=we*(Ee-De[it+1]-Ie),Zt=we*(De[it+2]-Ie),Ct=we*(Ee-De[it+3]-Ie),xe=we*(De[it+4]-Ie),ye=we*(Ee-De[it+5]-Ie);Be.push([[ut,yt],[We,Jt],[Zt,Ct],[xe,ye]]),ut=xe,yt=ye}const ct=ke(this,N,Gl).call(this,Be);ne.bezierPath2D.push(ct)}const ve=ke(Ve=ne,A,Zl).call(Ve);return Me(ne,b,Math.max(h,ve[2]-ve[0])),Me(ne,m,Math.max(h,ve[3]-ve[1])),ke(Fe=ne,A,Hl).call(Fe,pe,Ee),ne}serialize(){if(this.isEmpty())return null;const G=this.getRect(0,0),F=this.rotation%180===0?G[3]-G[1]:G[2]-G[0],ne=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:ne,thickness:this.thickness,opacity:this.opacity,paths:ke(this,A,Vf).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,F),pageIndex:this.parent.pageIndex,rect:G,rotation:this.rotation}}};f=new WeakMap,m=new WeakMap,b=new WeakMap,E=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,v=new WeakMap,T=new WeakMap,R=new WeakMap,k=new WeakMap,x=new WeakMap,S=new WeakMap,O=new WeakMap,A=new WeakSet,jf=function(G){const F=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=G,ke(this,A,Ss).call(this)},undo:()=>{this.thickness=F,ke(this,A,Ss).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ff=function(G){const F=this.color;this.parent.addCommands({cmd:()=>{this.color=G,ke(this,A,Nn).call(this)},undo:()=>{this.color=F,ke(this,A,Nn).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Uf=function(G){G/=100;const F=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=G,ke(this,A,Nn).call(this)},undo:()=>{this.opacity=F,ke(this,A,Nn).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bf=function(){const{width:G,height:F,rotation:ne}=this.parent.viewport;switch(ne){case 90:return[0,G,G,F];case 180:return[G,F,G,F];case 270:return[F,0,G,F];default:return[0,0,G,F]}},ql=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,u.opacityToHex)(this.opacity)}`},zf=function(G,F){this.isEditing=!0,ee(this,T)||(Me(this,T,!0),ke(this,A,Es).call(this),this.thickness||(this.thickness=$._defaultThickness),this.color||(this.color=$._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=$._defaultOpacity)),this.currentPath.push([G,F]),Me(this,R,null),ke(this,A,ql).call(this),this.ctx.beginPath(),this.ctx.moveTo(G,F),Me(this,O,()=>{ee(this,O)&&(ee(this,R)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ke(this,A,Nn).call(this),this.ctx.lineTo(...ee(this,R)),Me(this,R,null),this.ctx.stroke()),window.requestAnimationFrame(ee(this,O)))}),window.requestAnimationFrame(ee(this,O))},$f=function(G,F){const[ne,he]=this.currentPath.at(-1);G===ne&&F===he||(this.currentPath.push([G,F]),Me(this,R,[G,F]))},qf=function(G,F){var Ie;this.ctx.closePath(),Me(this,O,null),G=Math.min(Math.max(G,0),this.canvas.width),F=Math.min(Math.max(F,0),this.canvas.height);const[ne,he]=this.currentPath.at(-1);(G!==ne||F!==he)&&this.currentPath.push([G,F]);let ae;if(this.currentPath.length!==1)ae=(0,o.fitCurve)(this.currentPath,30,null);else{const ve=[G,F];ae=[[ve,ve.slice(),ve.slice(),ve]]}const pe=ke(Ie=$,N,Gl).call(Ie,ae);this.currentPath.length=0;const Ee=()=>{this.paths.push(ae),this.bezierPath2D.push(pe),this.rebuild()},we=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ke(this,A,xa).call(this),ke(this,A,Ca).call(this)),ke(this,A,Ss).call(this))};this.parent.addCommands({cmd:Ee,undo:we,mustExec:!0})},Nn=function(){if(this.isEmpty()){ke(this,A,Ra).call(this);return}ke(this,A,ql).call(this);const{canvas:G,ctx:F}=this;F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,G.width,G.height),ke(this,A,Ra).call(this);for(const ne of this.bezierPath2D)F.stroke(ne)},Vl=function(G){ke(this,A,qf).call(this,G.offsetX,G.offsetY),this.canvas.removeEventListener("pointerleave",ee(this,w)),this.canvas.removeEventListener("pointermove",ee(this,E)),this.parent.addToAnnotationStorage(this)},xa=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",$._l10nPromise.get("editor_ink_canvas_aria_label").then(G=>{var F;return(F=this.canvas)==null?void 0:F.setAttribute("aria-label",G)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ca=function(){Me(this,k,new ResizeObserver(G=>{const F=G[0].contentRect;F.width&&F.height&&this.setDimensions(F.width,F.height)})),ee(this,k).observe(this.div)},Es=function(){if(!ee(this,T))return;const[G,F]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*G),this.canvas.height=Math.ceil(this.height*F),ke(this,A,Ra).call(this)},Hl=function(G,F){const ne=ke(this,A,Oa).call(this),he=(G-ne)/ee(this,b),ae=(F-ne)/ee(this,m);this.scaleFactor=Math.min(he,ae)},Ra=function(){const G=ke(this,A,Oa).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+G,this.translationY*this.scaleFactor+G)},N=new WeakSet,Gl=function(G){const F=new Path2D;for(let ne=0,he=G.length;ne<he;ne++){const[ae,pe,Ee,we]=G[ne];ne===0&&F.moveTo(...ae),F.bezierCurveTo(pe[0],pe[1],Ee[0],Ee[1],we[0],we[1])}return F},Vf=function(G,F,ne,he){const pe=[],Ee=this.thickness/2;let we,Ie;for(const ve of this.paths){we=[],Ie=[];for(let Ve=0,Fe=ve.length;Ve<Fe;Ve++){const[De,Be,ut,yt]=ve[Ve],ct=G*(De[0]+F)+Ee,it=he-G*(De[1]+ne)-Ee,nt=G*(Be[0]+F)+Ee,We=he-G*(Be[1]+ne)-Ee,Jt=G*(ut[0]+F)+Ee,Zt=he-G*(ut[1]+ne)-Ee,Ct=G*(yt[0]+F)+Ee,xe=he-G*(yt[1]+ne)-Ee;Ve===0&&(we.push(ct,it),Ie.push(ct,it)),we.push(nt,We,Jt,Zt,Ct,xe),ke(this,A,Hf).call(this,ct,it,nt,We,Jt,Zt,Ct,xe,4,Ie)}pe.push({bezier:we,points:Ie})}return pe},Hf=function(G,F,ne,he,ae,pe,Ee,we,Ie,ve){if(ke(this,A,Gf).call(this,G,F,ne,he,ae,pe,Ee,we)){ve.push(Ee,we);return}for(let Ve=1;Ve<Ie-1;Ve++){const Fe=Ve/Ie,De=1-Fe;let Be=Fe*G+De*ne,ut=Fe*F+De*he,yt=Fe*ne+De*ae,ct=Fe*he+De*pe;const it=Fe*ae+De*Ee,nt=Fe*pe+De*we;Be=Fe*Be+De*yt,ut=Fe*ut+De*ct,yt=Fe*yt+De*it,ct=Fe*ct+De*nt,Be=Fe*Be+De*yt,ut=Fe*ut+De*ct,ve.push(Be,ut)}ve.push(Ee,we)},Gf=function(G,F,ne,he,ae,pe,Ee,we){const ve=(3*ne-2*G-Ee)**2,Ve=(3*he-2*F-we)**2,Fe=(3*ae-G-2*Ee)**2,De=(3*pe-F-2*we)**2;return Math.max(ve,Fe)+Math.max(Ve,De)<=10},Zl=function(){let G=1/0,F=-1/0,ne=1/0,he=-1/0;for(const ae of this.paths)for(const[pe,Ee,we,Ie]of ae){const ve=r.Util.bezierBoundingBox(...pe,...Ee,...we,...Ie);G=Math.min(G,ve[0]),ne=Math.min(ne,ve[1]),F=Math.max(F,ve[2]),he=Math.max(he,ve[3])}return[G,ne,F,he]},Oa=function(){return ee(this,v)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ss=function(G=!1){if(this.isEmpty())return;if(!ee(this,v)){ke(this,A,Nn).call(this);return}const F=ke(this,A,Zl).call(this),ne=ke(this,A,Oa).call(this);Me(this,b,Math.max(h,F[2]-F[0])),Me(this,m,Math.max(h,F[3]-F[1]));const he=Math.ceil(ne+ee(this,b)*this.scaleFactor),ae=Math.ceil(ne+ee(this,m)*this.scaleFactor),[pe,Ee]=this.parent.viewportBaseDimensions;this.width=he/pe,this.height=ae/Ee,Me(this,f,he/ae),ke(this,A,Kl).call(this);const we=this.translationX,Ie=this.translationY;this.translationX=-F[0],this.translationY=-F[1],ke(this,A,Es).call(this),ke(this,A,Nn).call(this),Me(this,x,he),Me(this,S,ae),this.setDims(he,ae);const ve=G?ne/this.scaleFactor/2:0;this.translate(we-this.translationX-ve,Ie-this.translationY-ve)},Kl=function(){const{style:G}=this.div;ee(this,f)>=1?(G.minHeight=`${h}px`,G.minWidth=`${Math.round(ee(this,f)*h)}px`):(G.minWidth=`${h}px`,G.minHeight=`${Math.round(h/ee(this,f))}px`)},Ne($,N),Et($,"_defaultColor",null),Et($,"_defaultOpacity",1),Et($,"_defaultThickness",1),Et($,"_l10nPromise"),Et($,"_type","ink");let d=$;e.InkEditor=d},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const r=n(26);e.fitCurve=r},t=>{function e(y,g,v){if(!Array.isArray(y))throw new TypeError("First argument should be an array");if(y.forEach(x=>{if(!Array.isArray(x)||x.some(S=>typeof S!="number")||x.length!==y[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),y=y.filter((x,S)=>S===0||!x.every((O,A)=>O===y[S-1][A])),y.length<2)return[];const T=y.length,R=b(y[1],y[0]),k=b(y[T-2],y[T-1]);return n(y,R,k,g,v)}function n(y,g,v,T,R){var x,S,O,A,I,P,j,B,ie,oe,le,de,K;if(y.length===2)return de=E.vectorLen(E.subtract(y[0],y[1]))/3,x=[y[0],E.addArrays(y[0],E.mulItems(g,de)),E.addArrays(y[1],E.mulItems(v,de)),y[1]],[x];if(S=h(y),[x,A,P]=r(y,S,S,g,v,R),A===0||A<T)return[x];if(A<T*T)for(O=S,I=A,j=P,K=0;K<20;K++){if(O=o(x,y,O),[x,A,P]=r(y,S,O,g,v,R),A<T)return[x];if(P===j){let J=A/I;if(J>.9999&&J<1.0001)break}I=A,j=P}return le=[],B=E.subtract(y[P-1],y[P+1]),B.every(J=>J===0)&&(B=E.subtract(y[P-1],y[P]),[B[0],B[1]]=[-B[1],B[0]]),ie=E.normalize(B),oe=E.mulItems(ie,-1),le=le.concat(n(y.slice(0,P+1),g,ie,T,R)),le=le.concat(n(y.slice(P),oe,v,T,R)),le}function r(y,g,v,T,R,k){var x,S,O;return x=a(y,v,T,R),[S,O]=d(y,x,g),k&&k({bez:x,points:y,params:g,maxErr:S,maxPoint:O}),[x,S,O]}function a(y,g,v,T){var R,k,x,S,O,A,I,P,j,B,ie,oe,le,de,K,J,se,ue=y[0],q=y[y.length-1];for(R=[ue,null,null,q],k=E.zeros_Xx2x2(g.length),le=0,de=g.length;le<de;le++)J=g[le],se=1-J,x=k[le],x[0]=E.mulItems(v,3*J*(se*se)),x[1]=E.mulItems(T,3*se*(J*J));for(S=[[0,0],[0,0]],O=[0,0],le=0,de=y.length;le<de;le++)J=g[le],x=k[le],S[0][0]+=E.dot(x[0],x[0]),S[0][1]+=E.dot(x[0],x[1]),S[1][0]+=E.dot(x[0],x[1]),S[1][1]+=E.dot(x[1],x[1]),K=E.subtract(y[le],w.q([ue,ue,q,q],J)),O[0]+=E.dot(x[0],K),O[1]+=E.dot(x[1],K);return A=S[0][0]*S[1][1]-S[1][0]*S[0][1],I=S[0][0]*O[1]-S[1][0]*O[0],P=O[0]*S[1][1]-O[1]*S[0][1],j=A===0?0:P/A,B=A===0?0:I/A,oe=E.vectorLen(E.subtract(ue,q)),ie=1e-6*oe,j<ie||B<ie?(R[1]=E.addArrays(ue,E.mulItems(v,oe/3)),R[2]=E.addArrays(q,E.mulItems(T,oe/3))):(R[1]=E.addArrays(ue,E.mulItems(v,j)),R[2]=E.addArrays(q,E.mulItems(T,B))),R}function o(y,g,v){return v.map((T,R)=>u(y,g[R],T))}function u(y,g,v){var T=E.subtract(w.q(y,v),g),R=w.qprime(y,v),k=E.mulMatrix(T,R),x=E.sum(E.squareItems(R))+2*E.mulMatrix(T,w.qprimeprime(y,v));return x===0?v:v-k/x}function h(y){var g=[],v,T,R;return y.forEach((k,x)=>{v=x?T+E.vectorLen(E.subtract(k,R)):0,g.push(v),T=v,R=k}),g=g.map(k=>k/T),g}function d(y,g,v){var T,R,k,x,S,O,A,I;R=0,k=Math.floor(y.length/2);const P=f(g,10);for(S=0,O=y.length;S<O;S++)A=y[S],I=m(g,v[S],P,10),x=E.subtract(w.q(g,I),A),T=x[0]*x[0]+x[1]*x[1],T>R&&(R=T,k=S);return[R,k]}var f=function(y,g){for(var v,T=[0],R=y[0],k=0,x=1;x<=g;x++)v=w.q(y,x/g),k+=E.vectorLen(E.subtract(v,R)),T.push(k),R=v;return T=T.map(S=>S/k),T};function m(y,g,v,T){if(g<0)return 0;if(g>1)return 1;for(var R,k,x,S,O,A=1;A<=T;A++)if(g<=v[A]){S=(A-1)/T,x=A/T,k=v[A-1],R=v[A],O=(g-k)/(R-k)*(x-S)+S;break}return O}function b(y,g){return E.normalize(E.subtract(y,g))}class E{static zeros_Xx2x2(g){for(var v=[];g--;)v.push([0,0]);return v}static mulItems(g,v){return g.map(T=>T*v)}static mulMatrix(g,v){return g.reduce((T,R,k)=>T+R*v[k],0)}static subtract(g,v){return g.map((T,R)=>T-v[R])}static addArrays(g,v){return g.map((T,R)=>T+v[R])}static addItems(g,v){return g.map(T=>T+v)}static sum(g){return g.reduce((v,T)=>v+T)}static dot(g,v){return E.mulMatrix(g,v)}static vectorLen(g){return Math.hypot(...g)}static divItems(g,v){return g.map(T=>T/v)}static squareItems(g){return g.map(v=>v*v)}static normalize(g){return this.divItems(g,this.vectorLen(g))}}class w{static q(g,v){var T=1-v,R=E.mulItems(g[0],T*T*T),k=E.mulItems(g[1],3*T*T*v),x=E.mulItems(g[2],3*T*v*v),S=E.mulItems(g[3],v*v*v);return E.addArrays(E.addArrays(R,k),E.addArrays(x,S))}static qprime(g,v){var T=1-v,R=E.mulItems(E.subtract(g[1],g[0]),3*T*T),k=E.mulItems(E.subtract(g[2],g[1]),6*T*v),x=E.mulItems(E.subtract(g[3],g[2]),3*v*v);return E.addArrays(E.addArrays(R,k),x)}static qprimeprime(g,v){return E.addArrays(E.mulItems(E.addArrays(E.subtract(g[2],E.mulItems(g[1],2)),g[0]),6*(1-v)),E.mulItems(E.addArrays(E.subtract(g[3],E.mulItems(g[2],2)),g[1]),6*v))}}t.exports=e,t.exports.fitCubic=n,t.exports.createTangent=b},(t,e,n)=>{var N,Yl,Xl,Wl;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r=n(1),a=n(8),o=n(5),u=n(28),h=n(29);const d=1e3,f=9,m=new WeakSet;function b(X){return{width:X[2]-X[0],height:X[3]-X[1]}}class E{static create(C){switch(C.data.annotationType){case r.AnnotationType.LINK:return new y(C);case r.AnnotationType.TEXT:return new g(C);case r.AnnotationType.WIDGET:switch(C.data.fieldType){case"Tx":return new T(C);case"Btn":return C.data.radioButton?new k(C):C.data.checkBox?new R(C):new x(C);case"Ch":return new S(C)}return new v(C);case r.AnnotationType.POPUP:return new O(C);case r.AnnotationType.FREETEXT:return new I(C);case r.AnnotationType.LINE:return new P(C);case r.AnnotationType.SQUARE:return new j(C);case r.AnnotationType.CIRCLE:return new B(C);case r.AnnotationType.POLYLINE:return new ie(C);case r.AnnotationType.CARET:return new le(C);case r.AnnotationType.INK:return new de(C);case r.AnnotationType.POLYGON:return new oe(C);case r.AnnotationType.HIGHLIGHT:return new K(C);case r.AnnotationType.UNDERLINE:return new J(C);case r.AnnotationType.SQUIGGLY:return new se(C);case r.AnnotationType.STRIKEOUT:return new ue(C);case r.AnnotationType.STAMP:return new q(C);case r.AnnotationType.FILEATTACHMENT:return new fe(C);default:return new w(C)}}}class w{constructor(C,{isRenderable:L=!1,ignoreBorder:U=!1,createQuadrilaterals:$=!1}={}){this.isRenderable=L,this.data=C.data,this.layer=C.layer,this.page=C.page,this.viewport=C.viewport,this.linkService=C.linkService,this.downloadManager=C.downloadManager,this.imageResourcesPath=C.imageResourcesPath,this.renderForms=C.renderForms,this.svgFactory=C.svgFactory,this.annotationStorage=C.annotationStorage,this.enableScripting=C.enableScripting,this.hasJSActions=C.hasJSActions,this._fieldObjects=C.fieldObjects,this._mouseState=C.mouseState,L&&(this.container=this._createContainer(U)),$&&(this.quadrilaterals=this._createQuadrilaterals(U))}_createContainer(C=!1){const L=this.data,U=this.page,$=this.viewport,H=document.createElement("section"),{width:Q,height:G}=b(L.rect),[F,ne,he,ae]=$.viewBox,pe=he-F,Ee=ae-ne;H.setAttribute("data-annotation-id",L.id);const we=r.Util.normalizeRect([L.rect[0],U.view[3]-L.rect[1]+U.view[1],L.rect[2],U.view[3]-L.rect[3]+U.view[1]]);if(!C&&L.borderStyle.width>0){H.style.borderWidth=`${L.borderStyle.width}px`;const ve=L.borderStyle.horizontalCornerRadius,Ve=L.borderStyle.verticalCornerRadius;if(ve>0||Ve>0){const De=`calc(${ve}px * var(--scale-factor)) / calc(${Ve}px * var(--scale-factor))`;H.style.borderRadius=De}else if(this instanceof k){const De=`calc(${Q}px * var(--scale-factor)) / calc(${G}px * var(--scale-factor))`;H.style.borderRadius=De}switch(L.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:H.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:H.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:H.style.borderBottomStyle="solid";break}const Fe=L.borderColor||null;Fe?H.style.borderColor=r.Util.makeHexColor(Fe[0]|0,Fe[1]|0,Fe[2]|0):H.style.borderWidth=0}H.style.left=`${100*(we[0]-F)/pe}%`,H.style.top=`${100*(we[1]-ne)/Ee}%`;const{rotation:Ie}=L;return L.hasOwnCanvas||Ie===0?(H.style.width=`${100*Q/pe}%`,H.style.height=`${100*G/Ee}%`):this.setRotation(Ie,H),H}setRotation(C,L=this.container){const[U,$,H,Q]=this.viewport.viewBox,G=H-U,F=Q-$,{width:ne,height:he}=b(this.data.rect);let ae,pe;C%180===0?(ae=100*ne/G,pe=100*he/F):(ae=100*he/G,pe=100*ne/F),L.style.width=`${ae}%`,L.style.height=`${pe}%`,L.setAttribute("data-main-rotation",(360-C)%360)}get _commonActions(){const C=(L,U,$)=>{const H=$.detail[L];$.target.style[U]=u.ColorConverters[`${H[0]}_HTML`](H.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:L=>{const U=L.detail.display%2===1;this.container.style.visibility=U?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:U,print:L.detail.display===0||L.detail.display===3})},print:L=>{this.annotationStorage.setValue(this.data.id,{print:L.detail.print})},hidden:L=>{this.container.style.visibility=L.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:L.detail.hidden})},focus:L=>{setTimeout(()=>L.target.focus({preventScroll:!1}),0)},userName:L=>{L.target.title=L.detail.userName},readonly:L=>{L.detail.readonly?L.target.setAttribute("readonly",""):L.target.removeAttribute("readonly")},required:L=>{this._setRequired(L.target,L.detail.required)},bgColor:L=>{C("bgColor","backgroundColor",L)},fillColor:L=>{C("fillColor","backgroundColor",L)},fgColor:L=>{C("fgColor","color",L)},textColor:L=>{C("textColor","color",L)},borderColor:L=>{C("borderColor","borderColor",L)},strokeColor:L=>{C("strokeColor","borderColor",L)},rotation:L=>{const U=L.detail.rotation;this.setRotation(U),this.annotationStorage.setValue(this.data.id,{rotation:U})}})}_dispatchEventFromSandbox(C,L){const U=this._commonActions;for(const $ of Object.keys(L.detail)){const H=C[$]||U[$];H&&H(L)}}_setDefaultPropertiesFromJS(C){if(!this.enableScripting)return;const L=this.annotationStorage.getRawValue(this.data.id);if(!L)return;const U=this._commonActions;for(const[$,H]of Object.entries(L)){const Q=U[$];if(Q){const G={detail:{[$]:H},target:C};Q(G),delete L[$]}}}_createQuadrilaterals(C=!1){if(!this.data.quadPoints)return null;const L=[],U=this.data.rect;for(const $ of this.data.quadPoints)this.data.rect=[$[2].x,$[2].y,$[1].x,$[1].y],L.push(this._createContainer(C));return this.data.rect=U,L}_createPopup(C,L){let U=this.container;this.quadrilaterals&&(C=C||this.quadrilaterals,U=this.quadrilaterals[0]),C||(C=document.createElement("div"),C.className="popupTriggerArea",U.append(C));const H=new A({container:U,trigger:C,color:L.color,titleObj:L.titleObj,modificationDate:L.modificationDate,contentsObj:L.contentsObj,richText:L.richText,hideWrapper:!0}).render();H.style.left="100%",U.append(H)}_renderQuadrilaterals(C){for(const L of this.quadrilaterals)L.className=C;return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(C,L=null){const U=[];if(this._fieldObjects){const $=this._fieldObjects[C];if($)for(const{page:H,id:Q,exportValues:G}of $){if(H===-1||Q===L)continue;const F=typeof G=="string"?G:null,ne=document.querySelector(`[data-element-id="${Q}"]`);if(ne&&!m.has(ne)){(0,r.warn)(`_getElementsByName - element not allowed: ${Q}`);continue}U.push({id:Q,exportValue:F,domElement:ne})}return U}for(const $ of document.getElementsByName(C)){const{id:H,exportValue:Q}=$;H!==L&&m.has($)&&U.push({id:H,exportValue:Q,domElement:$})}return U}static get platform(){const C=typeof navigator<"u"?navigator.platform:"";return(0,r.shadow)(this,"platform",{isWin:C.includes("Win"),isMac:C.includes("Mac")})}}class y extends w{constructor(C,L=null){super(C,{isRenderable:!0,ignoreBorder:!!(L!=null&&L.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=C.data.isTooltipOnly}render(){const{data:C,linkService:L}=this,U=document.createElement("a");U.setAttribute("data-element-id",C.id);let $=!1;return C.url?(L.addLinkAttributes(U,C.url,C.newWindow),$=!0):C.action?(this._bindNamedAction(U,C.action),$=!0):C.dest?(this._bindLink(U,C.dest),$=!0):(C.actions&&(C.actions.Action||C.actions["Mouse Up"]||C.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(U,C),$=!0),C.resetForm?(this._bindResetFormAction(U,C.resetForm),$=!0):this.isTooltipOnly&&!$&&(this._bindLink(U,""),$=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((H,Q)=>{const G=Q===0?U:U.cloneNode();return H.append(G),H}):(this.container.className="linkAnnotation",$&&this.container.append(U),this.container)}_bindLink(C,L){C.href=this.linkService.getDestinationHash(L),C.onclick=()=>(L&&this.linkService.goToDestination(L),!1),(L||L==="")&&(C.className="internalLink")}_bindNamedAction(C,L){C.href=this.linkService.getAnchorUrl(""),C.onclick=()=>(this.linkService.executeNamedAction(L),!1),C.className="internalLink"}_bindJSAction(C,L){C.href=this.linkService.getAnchorUrl("");const U=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const $ of Object.keys(L.actions)){const H=U.get($);H&&(C[H]=()=>{var Q;return(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L.id,name:$}}),!1})}C.onclick||(C.onclick=()=>!1),C.className="internalLink"}_bindResetFormAction(C,L){const U=C.onclick;if(U||(C.href=this.linkService.getAnchorUrl("")),C.className="internalLink",!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),U||(C.onclick=()=>!1);return}C.onclick=()=>{var he;U&&U();const{fields:$,refs:H,include:Q}=L,G=[];if($.length!==0||H.length!==0){const ae=new Set(H);for(const pe of $){const Ee=this._fieldObjects[pe]||[];for(const{id:we}of Ee)ae.add(we)}for(const pe of Object.values(this._fieldObjects))for(const Ee of pe)ae.has(Ee.id)===Q&&G.push(Ee)}else for(const ae of Object.values(this._fieldObjects))G.push(...ae);const F=this.annotationStorage,ne=[];for(const ae of G){const{id:pe}=ae;switch(ne.push(pe),ae.type){case"text":{const we=ae.defaultValue||"";F.setValue(pe,{value:we});break}case"checkbox":case"radiobutton":{const we=ae.defaultValue===ae.exportValues;F.setValue(pe,{value:we});break}case"combobox":case"listbox":{const we=ae.defaultValue||"";F.setValue(pe,{value:we});break}default:continue}const Ee=document.querySelector(`[data-element-id="${pe}"]`);if(Ee){if(!m.has(Ee)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${pe}`);continue}}else continue;Ee.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((he=this.linkService.eventBus)==null||he.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ne,name:"ResetForm"}})),!1}}}class g extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L})}render(){this.container.className="textAnnotation";const C=document.createElement("img");return C.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",C.alt="[{{type}} Annotation]",C.dataset.l10nId="text_annotation_type",C.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(C,this.data),this.container.append(C),this.container}}class v extends w{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(C){const{isWin:L,isMac:U}=w.platform;return L&&C.ctrlKey||U&&C.metaKey}_setEventListener(C,L,U,$){L.includes("mouse")?C.addEventListener(L,H=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:U,value:$(H),shift:H.shiftKey,modifier:this._getKeyModifier(H)}})}):C.addEventListener(L,H=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:U,value:$(H)}})})}_setEventListeners(C,L,U){var $;for(const[H,Q]of L)(Q==="Action"||($=this.data.actions)!=null&&$[Q])&&this._setEventListener(C,H,Q,U)}_setBackgroundColor(C){const L=this.data.backgroundColor||null;C.style.backgroundColor=L===null?"transparent":r.Util.makeHexColor(L[0],L[1],L[2])}_setTextStyle(C){const L=["left","center","right"],{fontColor:U}=this.data.defaultAppearanceData,$=this.data.defaultAppearanceData.fontSize||f,H=C.style;let Q;if(this.data.multiLine){const G=Math.abs(this.data.rect[3]-this.data.rect[1]),F=Math.round(G/(r.LINE_FACTOR*$))||1,ne=G/F;Q=Math.min($,Math.round(ne/r.LINE_FACTOR))}else{const G=Math.abs(this.data.rect[3]-this.data.rect[1]);Q=Math.min($,Math.round(G/r.LINE_FACTOR))}H.fontSize=`calc(${Q}px * var(--scale-factor))`,H.color=r.Util.makeHexColor(U[0],U[1],U[2]),this.data.textAlignment!==null&&(H.textAlign=L[this.data.textAlignment])}_setRequired(C,L){L?C.setAttribute("required",!0):C.removeAttribute("required"),C.setAttribute("aria-required",L)}}class T extends v{constructor(C){const L=C.renderForms||!C.data.hasAppearance&&!!C.data.fieldValue;super(C,{isRenderable:L})}setPropertyOnSiblings(C,L,U,$){const H=this.annotationStorage;for(const Q of this._getElementsByName(C.name,C.id))Q.domElement&&(Q.domElement[L]=U),H.setValue(Q.id,{[$]:U})}render(){var $;const C=this.annotationStorage,L=this.data.id;this.container.className="textWidgetAnnotation";let U=null;if(this.renderForms){const H=C.getValue(L,{value:this.data.fieldValue});let Q=H.formattedValue||H.value||"";const G=C.getValue(L,{charLimit:this.data.maxLen}).charLimit;G&&Q.length>G&&(Q=Q.slice(0,G));const F={userValue:Q,formattedValue:null,valueOnFocus:""};this.data.multiLine?(U=document.createElement("textarea"),U.textContent=Q,this.data.doNotScroll&&(U.style.overflowY="hidden")):(U=document.createElement("input"),U.type="text",U.setAttribute("value",Q),this.data.doNotScroll&&(U.style.overflowX="hidden")),m.add(U),U.setAttribute("data-element-id",L),U.disabled=this.data.readOnly,U.name=this.data.fieldName,U.tabIndex=d,this._setRequired(U,this.data.required),G&&(U.maxLength=G),U.addEventListener("input",he=>{C.setValue(L,{value:he.target.value}),this.setPropertyOnSiblings(U,"value",he.target.value,"value")}),U.addEventListener("resetform",he=>{const ae=this.data.defaultFieldValue??"";U.value=F.userValue=ae,F.formattedValue=null});let ne=he=>{const{formattedValue:ae}=F;ae!=null&&(he.target.value=ae),he.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){U.addEventListener("focus",ae=>{F.userValue&&(ae.target.value=F.userValue),F.valueOnFocus=ae.target.value}),U.addEventListener("updatefromsandbox",ae=>{const pe={value(Ee){F.userValue=Ee.detail.value??"",C.setValue(L,{value:F.userValue.toString()}),Ee.target.value=F.userValue},formattedValue(Ee){const{formattedValue:we}=Ee.detail;F.formattedValue=we,we!=null&&Ee.target!==document.activeElement&&(Ee.target.value=we),C.setValue(L,{formattedValue:we})},selRange(Ee){Ee.target.setSelectionRange(...Ee.detail.selRange)},charLimit:Ee=>{var Ve;const{charLimit:we}=Ee.detail,{target:Ie}=Ee;if(we===0){Ie.removeAttribute("maxLength");return}Ie.setAttribute("maxLength",we);let ve=F.userValue;!ve||ve.length<=we||(ve=ve.slice(0,we),Ie.value=F.userValue=ve,C.setValue(L,{value:ve}),(Ve=this.linkService.eventBus)==null||Ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:ve,willCommit:!0,commitKey:1,selStart:Ie.selectionStart,selEnd:Ie.selectionEnd}}))}};this._dispatchEventFromSandbox(pe,ae)}),U.addEventListener("keydown",ae=>{var we;let pe=-1;if(ae.key==="Escape"?pe=0:ae.key==="Enter"?pe=2:ae.key==="Tab"&&(pe=3),pe===-1)return;const{value:Ee}=ae.target;F.valueOnFocus!==Ee&&(F.userValue=Ee,(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:Ee,willCommit:!0,commitKey:pe,selStart:ae.target.selectionStart,selEnd:ae.target.selectionEnd}}))});const he=ne;ne=null,U.addEventListener("blur",ae=>{var Ee;const{value:pe}=ae.target;F.userValue=pe,this._mouseState.isDown&&F.valueOnFocus!==pe&&((Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:pe,willCommit:!0,commitKey:1,selStart:ae.target.selectionStart,selEnd:ae.target.selectionEnd}})),he(ae)}),($=this.data.actions)!=null&&$.Keystroke&&U.addEventListener("beforeinput",ae=>{var De;const{data:pe,target:Ee}=ae,{value:we,selectionStart:Ie,selectionEnd:ve}=Ee;let Ve=Ie,Fe=ve;switch(ae.inputType){case"deleteWordBackward":{const Be=we.substring(0,Ie).match(/\w*[^\w]*$/);Be&&(Ve-=Be[0].length);break}case"deleteWordForward":{const Be=we.substring(Ie).match(/^[^\w]*\w*/);Be&&(Fe+=Be[0].length);break}case"deleteContentBackward":Ie===ve&&(Ve-=1);break;case"deleteContentForward":Ie===ve&&(Fe+=1);break}ae.preventDefault(),(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:we,change:pe||"",willCommit:!1,selStart:Ve,selEnd:Fe}})}),this._setEventListeners(U,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ae=>ae.target.value)}if(ne&&U.addEventListener("blur",ne),this.data.comb){const ae=(this.data.rect[2]-this.data.rect[0])/G;U.classList.add("comb"),U.style.letterSpacing=`calc(${ae}px * var(--scale-factor) - 1ch)`}}else U=document.createElement("div"),U.textContent=this.data.fieldValue,U.style.verticalAlign="middle",U.style.display="table-cell";return this._setTextStyle(U),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class R extends v{constructor(C){super(C,{isRenderable:C.renderForms})}render(){const C=this.annotationStorage,L=this.data,U=L.id;let $=C.getValue(U,{value:L.exportValue===L.fieldValue}).value;typeof $=="string"&&($=$!=="Off",C.setValue(U,{value:$})),this.container.className="buttonWidgetAnnotation checkBox";const H=document.createElement("input");return m.add(H),H.setAttribute("data-element-id",U),H.disabled=L.readOnly,this._setRequired(H,this.data.required),H.type="checkbox",H.name=L.fieldName,$&&H.setAttribute("checked",!0),H.setAttribute("exportValue",L.exportValue),H.tabIndex=d,H.addEventListener("change",Q=>{const{name:G,checked:F}=Q.target;for(const ne of this._getElementsByName(G,U)){const he=F&&ne.exportValue===L.exportValue;ne.domElement&&(ne.domElement.checked=he),C.setValue(ne.id,{value:he})}C.setValue(U,{value:F})}),H.addEventListener("resetform",Q=>{const G=L.defaultFieldValue||"Off";Q.target.checked=G===L.exportValue}),this.enableScripting&&this.hasJSActions&&(H.addEventListener("updatefromsandbox",Q=>{const G={value(F){F.target.checked=F.detail.value!=="Off",C.setValue(U,{value:F.target.checked})}};this._dispatchEventFromSandbox(G,Q)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)),this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class k extends v{constructor(C){super(C,{isRenderable:C.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const C=this.annotationStorage,L=this.data,U=L.id;let $=C.getValue(U,{value:L.fieldValue===L.buttonValue}).value;typeof $=="string"&&($=$!==L.buttonValue,C.setValue(U,{value:$}));const H=document.createElement("input");if(m.add(H),H.setAttribute("data-element-id",U),H.disabled=L.readOnly,this._setRequired(H,this.data.required),H.type="radio",H.name=L.fieldName,$&&H.setAttribute("checked",!0),H.tabIndex=d,H.addEventListener("change",Q=>{const{name:G,checked:F}=Q.target;for(const ne of this._getElementsByName(G,U))C.setValue(ne.id,{value:!1});C.setValue(U,{value:F})}),H.addEventListener("resetform",Q=>{const G=L.defaultFieldValue;Q.target.checked=G!=null&&G===L.buttonValue}),this.enableScripting&&this.hasJSActions){const Q=L.buttonValue;H.addEventListener("updatefromsandbox",G=>{const F={value:ne=>{const he=Q===ne.detail.value;for(const ae of this._getElementsByName(ne.target.name)){const pe=he&&ae.id===U;ae.domElement&&(ae.domElement.checked=pe),C.setValue(ae.id,{value:pe})}}};this._dispatchEventFromSandbox(F,G)}),this._setEventListeners(H,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],G=>G.target.checked)}return this._setBackgroundColor(H),this._setDefaultPropertiesFromJS(H),this.container.append(H),this.container}}class x extends y{constructor(C){super(C,{ignoreBorder:C.data.hasAppearance})}render(){const C=super.render();C.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(C.title=this.data.alternativeText);const L=C.lastChild;return this.enableScripting&&this.hasJSActions&&L&&(this._setDefaultPropertiesFromJS(L),L.addEventListener("updatefromsandbox",U=>{this._dispatchEventFromSandbox({},U)})),C}}class S extends v{constructor(C){super(C,{isRenderable:C.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const C=this.annotationStorage,L=this.data.id,U=C.getValue(L,{value:this.data.fieldValue}),$=document.createElement("select");m.add($),$.setAttribute("data-element-id",L),$.disabled=this.data.readOnly,this._setRequired($,this.data.required),$.name=this.data.fieldName,$.tabIndex=d;let H=this.data.combo&&this.data.options.length>0;this.data.combo||($.size=this.data.options.length,this.data.multiSelect&&($.multiple=!0)),$.addEventListener("resetform",ne=>{const he=this.data.defaultFieldValue;for(const ae of $.options)ae.selected=ae.value===he});for(const ne of this.data.options){const he=document.createElement("option");he.textContent=ne.displayValue,he.value=ne.exportValue,U.value.includes(ne.exportValue)&&(he.setAttribute("selected",!0),H=!1),$.append(he)}let Q=null;if(H){const ne=document.createElement("option");ne.value=" ",ne.setAttribute("hidden",!0),ne.setAttribute("selected",!0),$.prepend(ne),Q=()=>{ne.remove(),$.removeEventListener("input",Q),Q=null},$.addEventListener("input",Q)}const G=(ne,he)=>{const ae=he?"value":"textContent",pe=ne.target.options;return ne.target.multiple?Array.prototype.filter.call(pe,Ee=>Ee.selected).map(Ee=>Ee[ae]):pe.selectedIndex===-1?null:pe[pe.selectedIndex][ae]},F=ne=>{const he=ne.target.options;return Array.prototype.map.call(he,ae=>({displayValue:ae.textContent,exportValue:ae.value}))};return this.enableScripting&&this.hasJSActions?($.addEventListener("updatefromsandbox",ne=>{const he={value(ae){Q==null||Q();const pe=ae.detail.value,Ee=new Set(Array.isArray(pe)?pe:[pe]);for(const we of $.options)we.selected=Ee.has(we.value);C.setValue(L,{value:G(ae,!0)})},multipleSelection(ae){$.multiple=!0},remove(ae){const pe=$.options,Ee=ae.detail.remove;pe[Ee].selected=!1,$.remove(Ee),pe.length>0&&Array.prototype.findIndex.call(pe,Ie=>Ie.selected)===-1&&(pe[0].selected=!0),C.setValue(L,{value:G(ae,!0),items:F(ae)})},clear(ae){for(;$.length!==0;)$.remove(0);C.setValue(L,{value:null,items:[]})},insert(ae){const{index:pe,displayValue:Ee,exportValue:we}=ae.detail.insert,Ie=$.children[pe],ve=document.createElement("option");ve.textContent=Ee,ve.value=we,Ie?Ie.before(ve):$.append(ve),C.setValue(L,{value:G(ae,!0),items:F(ae)})},items(ae){const{items:pe}=ae.detail;for(;$.length!==0;)$.remove(0);for(const Ee of pe){const{displayValue:we,exportValue:Ie}=Ee,ve=document.createElement("option");ve.textContent=we,ve.value=Ie,$.append(ve)}$.options.length>0&&($.options[0].selected=!0),C.setValue(L,{value:G(ae,!0),items:F(ae)})},indices(ae){const pe=new Set(ae.detail.indices);for(const Ee of ae.target.options)Ee.selected=pe.has(Ee.index);C.setValue(L,{value:G(ae,!0)})},editable(ae){ae.target.disabled=!ae.detail.editable}};this._dispatchEventFromSandbox(he,ne)}),$.addEventListener("input",ne=>{var pe;const he=G(ne,!0),ae=G(ne,!1);C.setValue(L,{value:he}),(pe=this.linkService.eventBus)==null||pe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:L,name:"Keystroke",value:ae,changeEx:he,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners($,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ne=>ne.target.checked)):$.addEventListener("input",function(ne){C.setValue(L,{value:G(ne,!0)})}),this.data.combo&&this._setTextStyle($),this._setBackgroundColor($),this._setDefaultPropertiesFromJS($),this.container.append($),this.container}}class O extends w{constructor(C){var U,$,H;const L=!!((U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L})}render(){const C=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",C.includes(this.data.parentType))return this.container;const L=`[data-annotation-id="${this.data.parentId}"]`,U=this.layer.querySelectorAll(L);if(U.length===0)return this.container;const $=new A({container:this.container,trigger:Array.from(U),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),H=this.page,Q=r.Util.normalizeRect([this.data.parentRect[0],H.view[3]-this.data.parentRect[1]+H.view[1],this.data.parentRect[2],H.view[3]-this.data.parentRect[3]+H.view[1]]),G=Q[0]+this.data.parentRect[2]-this.data.parentRect[0],F=Q[1],[ne,he,ae,pe]=this.viewport.viewBox,Ee=ae-ne,we=pe-he;return this.container.style.left=`${100*(G-ne)/Ee}%`,this.container.style.top=`${100*(F-he)/we}%`,this.container.append($.render()),this.container}}class A{constructor(C){this.container=C.container,this.trigger=C.trigger,this.color=C.color,this.titleObj=C.titleObj,this.modificationDate=C.modificationDate,this.contentsObj=C.contentsObj,this.richText=C.richText,this.hideWrapper=C.hideWrapper||!1,this.pinned=!1}render(){var G,F;const L=document.createElement("div");L.className="popupWrapper",this.hideElement=this.hideWrapper?L:this.container,this.hideElement.hidden=!0;const U=document.createElement("div");U.className="popup";const $=this.color;if($){const ne=.7*(255-$[0])+$[0],he=.7*(255-$[1])+$[1],ae=.7*(255-$[2])+$[2];U.style.backgroundColor=r.Util.makeHexColor(ne|0,he|0,ae|0)}const H=document.createElement("h1");H.dir=this.titleObj.dir,H.textContent=this.titleObj.str,U.append(H);const Q=a.PDFDateString.toDateObject(this.modificationDate);if(Q){const ne=document.createElement("span");ne.className="popupDate",ne.textContent="{{date}}, {{time}}",ne.dataset.l10nId="annotation_date_string",ne.dataset.l10nArgs=JSON.stringify({date:Q.toLocaleDateString(),time:Q.toLocaleTimeString()}),U.append(ne)}if((G=this.richText)!=null&&G.str&&(!((F=this.contentsObj)!=null&&F.str)||this.contentsObj.str===this.richText.str))h.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:U}),U.lastChild.className="richText popupContent";else{const ne=this._formatContents(this.contentsObj);U.append(ne)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ne of this.trigger)ne.addEventListener("click",this._toggle.bind(this)),ne.addEventListener("mouseover",this._show.bind(this,!1)),ne.addEventListener("mouseout",this._hide.bind(this,!1));return U.addEventListener("click",this._hide.bind(this,!0)),L.append(U),L}_formatContents({str:C,dir:L}){const U=document.createElement("p");U.className="popupContent",U.dir=L;const $=C.split(/(?:\r\n?|\n)/);for(let H=0,Q=$.length;H<Q;++H){const G=$[H];U.append(document.createTextNode(G)),H<Q-1&&U.append(document.createElement("br"))}return U}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(C=!1){C&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(C=!0){C&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class I extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0}),this.textContent=C.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const C=document.createElement("div");C.className="annotationTextContent",C.setAttribute("role","comment");for(const L of this.textContent){const U=document.createElement("span");U.textContent=L,C.append(U)}this.container.append(C)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class P extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const C=this.data,{width:L,height:U}=b(C.rect),$=this.svgFactory.create(L,U,!0),H=this.svgFactory.createElement("svg:line");return H.setAttribute("x1",C.rect[2]-C.lineCoordinates[0]),H.setAttribute("y1",C.rect[3]-C.lineCoordinates[1]),H.setAttribute("x2",C.rect[2]-C.lineCoordinates[2]),H.setAttribute("y2",C.rect[3]-C.lineCoordinates[3]),H.setAttribute("stroke-width",C.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),$.append(H),this.container.append($),this._createPopup(H,C),this.container}}class j extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const C=this.data,{width:L,height:U}=b(C.rect),$=this.svgFactory.create(L,U,!0),H=C.borderStyle.width,Q=this.svgFactory.createElement("svg:rect");return Q.setAttribute("x",H/2),Q.setAttribute("y",H/2),Q.setAttribute("width",L-H),Q.setAttribute("height",U-H),Q.setAttribute("stroke-width",H||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),$.append(Q),this.container.append($),this._createPopup(Q,C),this.container}}class B extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const C=this.data,{width:L,height:U}=b(C.rect),$=this.svgFactory.create(L,U,!0),H=C.borderStyle.width,Q=this.svgFactory.createElement("svg:ellipse");return Q.setAttribute("cx",L/2),Q.setAttribute("cy",U/2),Q.setAttribute("rx",L/2-H/2),Q.setAttribute("ry",U/2-H/2),Q.setAttribute("stroke-width",H||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),$.append(Q),this.container.append($),this._createPopup(Q,C),this.container}}class ie extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const C=this.data,{width:L,height:U}=b(C.rect),$=this.svgFactory.create(L,U,!0);let H=[];for(const G of C.vertices){const F=G.x-C.rect[0],ne=C.rect[3]-G.y;H.push(F+","+ne)}H=H.join(" ");const Q=this.svgFactory.createElement(this.svgElementName);return Q.setAttribute("points",H),Q.setAttribute("stroke-width",C.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),$.append(Q),this.container.append($),this._createPopup(Q,C),this.container}}class oe extends ie{constructor(C){super(C),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class le extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class de extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const C=this.data,{width:L,height:U}=b(C.rect),$=this.svgFactory.create(L,U,!0);for(const H of C.inkLists){let Q=[];for(const F of H){const ne=F.x-C.rect[0],he=C.rect[3]-F.y;Q.push(`${ne},${he}`)}Q=Q.join(" ");const G=this.svgFactory.createElement(this.svgElementName);G.setAttribute("points",Q),G.setAttribute("stroke-width",C.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),this._createPopup(G,C),$.append(G)}return this.container.append($),this.container}}class K extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class J extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class se extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class ue extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class q extends w{constructor(C){var U,$,H;const L=!!(C.data.hasPopup||(U=C.data.titleObj)!=null&&U.str||($=C.data.contentsObj)!=null&&$.str||(H=C.data.richText)!=null&&H.str);super(C,{isRenderable:L,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class fe extends w{constructor(C){var $;super(C,{isRenderable:!0});const{filename:L,content:U}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(L),this.content=U,($=this.linkService.eventBus)==null||$.dispatch("fileattachmentannotation",{source:this,filename:L,content:U})}render(){var L,U;this.container.className="fileAttachmentAnnotation";const C=document.createElement("div");return C.className="popupTriggerArea",C.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((L=this.data.titleObj)!=null&&L.str||(U=this.data.contentsObj)!=null&&U.str||this.data.richText)&&this._createPopup(C,this.data),this.container.append(C),this.container}_download(){var C;(C=this.downloadManager)==null||C.openOrDownloadData(this.container,this.content,this.filename)}}const te=class te{static render(C){var G,F;const{annotations:L,div:U,viewport:$,accessibilityManager:H}=C;ke(this,N,Xl).call(this,U,$);let Q=0;for(const ne of L){if(ne.annotationType!==r.AnnotationType.POPUP){const{width:ae,height:pe}=b(ne.rect);if(ae<=0||pe<=0)continue}const he=E.create({data:ne,layer:U,page:C.page,viewport:$,linkService:C.linkService,downloadManager:C.downloadManager,imageResourcesPath:C.imageResourcesPath||"",renderForms:C.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:C.annotationStorage||new o.AnnotationStorage,enableScripting:C.enableScripting,hasJSActions:C.hasJSActions,fieldObjects:C.fieldObjects,mouseState:C.mouseState||{isDown:!1}});if(he.isRenderable){const ae=he.render();if(ne.hidden&&(ae.style.visibility="hidden"),Array.isArray(ae))for(const pe of ae)pe.style.zIndex=Q++,ke(G=te,N,Yl).call(G,pe,ne.id,U,H);else ae.style.zIndex=Q++,he instanceof O?U.prepend(ae):ke(F=te,N,Yl).call(F,ae,ne.id,U,H)}}ke(this,N,Wl).call(this,U,C.annotationCanvasMap)}static update(C){const{annotationCanvasMap:L,div:U,viewport:$}=C;ke(this,N,Xl).call(this,U,$),ke(this,N,Wl).call(this,U,L),U.hidden=!1}};N=new WeakSet,Yl=function(C,L,U,$){const H=C.firstChild||C;H.id=`${a.AnnotationPrefix}${L}`,U.append(C),$==null||$.moveElementInDOM(U,C,H,!1)},Xl=function(C,{width:L,height:U,rotation:$}){const{style:H}=C,Q=$%180!==0,G=Math.floor(L)+"px",F=Math.floor(U)+"px";H.width=Q?F:G,H.height=Q?G:F,C.setAttribute("data-main-rotation",$)},Wl=function(C,L){if(L){for(const[U,$]of L){const H=C.querySelector(`[data-annotation-id="${U}"]`);if(!H)continue;const{firstChild:Q}=H;Q?Q.nodeName==="CANVAS"?Q.replaceWith($):Q.before($):H.append($)}L.clear()}},Ne(te,N);let Z=te;e.AnnotationLayer=Z},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}class r{static CMYK_G([o,u,h,d]){return["G",1-Math.min(1,.3*o+.59*h+.11*u+d)]}static G_CMYK([o]){return["CMYK",0,0,0,1-o]}static G_RGB([o]){return["RGB",o,o,o]}static G_HTML([o]){const u=n(o);return`#${u}${u}${u}`}static RGB_G([o,u,h]){return["G",.3*o+.59*u+.11*h]}static RGB_HTML([o,u,h]){const d=n(o),f=n(u),m=n(h);return`#${d}${f}${m}`}static T_HTML(){return"#00000000"}static CMYK_RGB([o,u,h,d]){return["RGB",1-Math.min(1,o+d),1-Math.min(1,h+d),1-Math.min(1,u+d)]}static CMYK_HTML(o){const u=this.CMYK_RGB(o).slice(1);return this.RGB_HTML(u)}static RGB_CMYK([o,u,h]){const d=1-o,f=1-u,m=1-h,b=Math.min(d,f,m);return["CMYK",d,f,m,b]}}e.ColorConverters=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=n(20);class a{static setupStorage(u,h,d,f,m){const b=f.getValue(h,{value:null});switch(d.name){case"textarea":if(b.value!==null&&(u.textContent=b.value),m==="print")break;u.addEventListener("input",E=>{f.setValue(h,{value:E.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(b.value===d.attributes.xfaOn?u.setAttribute("checked",!0):b.value===d.attributes.xfaOff&&u.removeAttribute("checked"),m==="print")break;u.addEventListener("change",E=>{f.setValue(h,{value:E.target.checked?E.target.getAttribute("xfaOn"):E.target.getAttribute("xfaOff")})})}else{if(b.value!==null&&u.setAttribute("value",b.value),m==="print")break;u.addEventListener("input",E=>{f.setValue(h,{value:E.target.value})})}break;case"select":if(b.value!==null)for(const E of d.children)E.attributes.value===b.value&&(E.attributes.selected=!0);u.addEventListener("input",E=>{const w=E.target.options,y=w.selectedIndex===-1?"":w[w.selectedIndex].value;f.setValue(h,{value:y})});break}}static setAttributes({html:u,element:h,storage:d=null,intent:f,linkService:m}){const{attributes:b}=h,E=u instanceof HTMLAnchorElement;b.type==="radio"&&(b.name=`${b.name}-${f}`);for(const[w,y]of Object.entries(b))if(y!=null)switch(w){case"class":y.length&&u.setAttribute(w,y.join(" "));break;case"dataId":break;case"id":u.setAttribute("data-element-id",y);break;case"style":Object.assign(u.style,y);break;case"textContent":u.textContent=y;break;default:(!E||w!=="href"&&w!=="newWindow")&&u.setAttribute(w,y)}E&&m.addLinkAttributes(u,b.href,b.newWindow),d&&b.dataId&&this.setupStorage(u,b.dataId,h,d)}static render(u){var g;const h=u.annotationStorage,d=u.linkService,f=u.xfaHtml,m=u.intent||"display",b=document.createElement(f.name);f.attributes&&this.setAttributes({html:b,element:f,intent:m,linkService:d});const E=[[f,-1,b]],w=u.div;if(w.append(b),u.viewport){const v=`matrix(${u.viewport.transform.join(",")})`;w.style.transform=v}m!=="richText"&&w.setAttribute("class","xfaLayer xfaFont");const y=[];for(;E.length>0;){const[v,T,R]=E.at(-1);if(T+1===v.children.length){E.pop();continue}const k=v.children[++E.at(-1)[1]];if(k===null)continue;const{name:x}=k;if(x==="#text"){const O=document.createTextNode(k.value);y.push(O),R.append(O);continue}let S;if((g=k==null?void 0:k.attributes)!=null&&g.xmlns?S=document.createElementNS(k.attributes.xmlns,x):S=document.createElement(x),R.append(S),k.attributes&&this.setAttributes({html:S,element:k,storage:h,intent:m,linkService:d}),k.children&&k.children.length>0)E.push([k,-1,S]);else if(k.value){const O=document.createTextNode(k.value);r.XfaText.shouldBuildText(x)&&y.push(O),S.append(O)}}for(const v of w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:y}}static update(u){const h=`matrix(${u.viewport.transform.join(",")})`;u.div.style.transform=h,u.div.hidden=!1}}e.XfaLayer=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=R;var r=n(1),a=n(8);const o=1e5,u=30,h=.8,d=new Map,f=/^\s+$/g;function m(k,x){const S=d.get(k);if(S)return S;x.save(),x.font=`${u}px ${k}`;const O=x.measureText("");let A=O.fontBoundingBoxAscent,I=Math.abs(O.fontBoundingBoxDescent);if(A){x.restore();const j=A/(A+I);return d.set(k,j),j}x.strokeStyle="red",x.clearRect(0,0,u,u),x.strokeText("g",0,0);let P=x.getImageData(0,0,u,u).data;I=0;for(let j=P.length-1-3;j>=0;j-=4)if(P[j]>0){I=Math.ceil(j/4/u);break}x.clearRect(0,0,u,u),x.strokeText("A",0,u),P=x.getImageData(0,0,u,u).data,A=0;for(let j=0,B=P.length;j<B;j+=4)if(P[j]>0){A=u-Math.floor(j/4/u);break}if(x.restore(),A){const j=A/(A+I);return d.set(k,j),j}return d.set(k,h),h}function b(k,x,S,O){const A=document.createElement("span"),I=k._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:x.str!=="",hasEOL:x.hasEOL,fontSize:0};k._textDivs.push(A);const P=r.Util.transform(k._viewport.transform,x.transform);let j=Math.atan2(P[1],P[0]);const B=S[x.fontName];B.vertical&&(j+=Math.PI/2);const ie=Math.hypot(P[2],P[3]),oe=ie*m(B.fontFamily,O);let le,de;j===0?(le=P[4],de=P[5]-oe):(le=P[4]+oe*Math.sin(j),de=P[5]-oe*Math.cos(j)),A.style.left=`${le}px`,A.style.top=`${de}px`,A.style.fontSize=`${ie}px`,A.style.fontFamily=B.fontFamily,I.fontSize=ie,A.setAttribute("role","presentation"),A.textContent=x.str,A.dir=x.dir,k._fontInspectorEnabled&&(A.dataset.fontName=x.fontName),j!==0&&(I.angle=j*(180/Math.PI));let K=!1;if(x.str.length>1||k._enhanceTextSelection&&f.test(x.str))K=!0;else if(x.str!==" "&&x.transform[0]!==x.transform[3]){const J=Math.abs(x.transform[0]),se=Math.abs(x.transform[3]);J!==se&&Math.max(J,se)/Math.min(J,se)>1.5&&(K=!0)}if(K&&(B.vertical?I.canvasWidth=x.height*k._viewport.scale:I.canvasWidth=x.width*k._viewport.scale),k._textDivProperties.set(A,I),k._textContentStream&&k._layoutText(A),k._enhanceTextSelection&&I.hasText){let J=1,se=0;j!==0&&(J=Math.cos(j),se=Math.sin(j));const ue=(B.vertical?x.height:x.width)*k._viewport.scale,q=ie;let fe,Z;j!==0?(fe=[J,se,-se,J,le,de],Z=r.Util.getAxialAlignedBoundingBox([0,0,ue,q],fe)):Z=[le,de,le+ue,de+q],k._bounds.push({left:Z[0],top:Z[1],right:Z[2],bottom:Z[3],div:A,size:[ue,q],m:fe})}}function E(k){if(k._canceled)return;const x=k._textDivs,S=k._capability,O=x.length;if(O>o){k._renderingDone=!0,S.resolve();return}if(!k._textContentStream)for(let A=0;A<O;A++)k._layoutText(x[A]);k._renderingDone=!0,S.resolve()}function w(k,x,S){let O=0;for(let A=0;A<S;A++){const I=k[x++];I>0&&(O=O?Math.min(I,O):I)}return O}function y(k){const x=k._bounds,S=k._viewport,O=g(S.width,S.height,x);for(let A=0;A<O.length;A++){const I=x[A].div,P=k._textDivProperties.get(I);if(P.angle===0){P.paddingLeft=x[A].left-O[A].left,P.paddingTop=x[A].top-O[A].top,P.paddingRight=O[A].right-x[A].right,P.paddingBottom=O[A].bottom-x[A].bottom,k._textDivProperties.set(I,P);continue}const j=O[A],B=x[A],ie=B.m,oe=ie[0],le=ie[1],de=[[0,0],[0,B.size[1]],[B.size[0],0],B.size],K=new Float64Array(64);for(let se=0,ue=de.length;se<ue;se++){const q=r.Util.applyTransform(de[se],ie);K[se+0]=oe&&(j.left-q[0])/oe,K[se+4]=le&&(j.top-q[1])/le,K[se+8]=oe&&(j.right-q[0])/oe,K[se+12]=le&&(j.bottom-q[1])/le,K[se+16]=le&&(j.left-q[0])/-le,K[se+20]=oe&&(j.top-q[1])/oe,K[se+24]=le&&(j.right-q[0])/-le,K[se+28]=oe&&(j.bottom-q[1])/oe,K[se+32]=oe&&(j.left-q[0])/-oe,K[se+36]=le&&(j.top-q[1])/-le,K[se+40]=oe&&(j.right-q[0])/-oe,K[se+44]=le&&(j.bottom-q[1])/-le,K[se+48]=le&&(j.left-q[0])/le,K[se+52]=oe&&(j.top-q[1])/-oe,K[se+56]=le&&(j.right-q[0])/le,K[se+60]=oe&&(j.bottom-q[1])/-oe}const J=1+Math.min(Math.abs(oe),Math.abs(le));P.paddingLeft=w(K,32,16)/J,P.paddingTop=w(K,48,16)/J,P.paddingRight=w(K,0,16)/J,P.paddingBottom=w(K,16,16)/J,k._textDivProperties.set(I,P)}}function g(k,x,S){const O=S.map(function(I,P){return{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom,index:P,x1New:void 0,x2New:void 0}});v(k,O);const A=new Array(S.length);for(const I of O){const P=I.index;A[P]={left:I.x1New,top:0,right:I.x2New,bottom:0}}S.map(function(I,P){const j=A[P],B=O[P];B.x1=I.top,B.y1=k-j.right,B.x2=I.bottom,B.y2=k-j.left,B.index=P,B.x1New=void 0,B.x2New=void 0}),v(x,O);for(const I of O){const P=I.index;A[P].top=I.x1New,A[P].bottom=I.x2New}return A}function v(k,x){x.sort(function(A,I){return A.x1-I.x1||A.index-I.index});const O=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const A of x){let I=0;for(;I<O.length&&O[I].end<=A.y1;)I++;let P=O.length-1;for(;P>=0&&O[P].start>=A.y2;)P--;let j,B,ie,oe,le=-1/0;for(ie=I;ie<=P;ie++){j=O[ie],B=j.boundary;let J;B.x2>A.x1?J=B.index>A.index?B.x1New:A.x1:B.x2New===void 0?J=(B.x2+A.x1)/2:J=B.x2New,J>le&&(le=J)}for(A.x1New=le,ie=I;ie<=P;ie++)j=O[ie],B=j.boundary,B.x2New===void 0?B.x2>A.x1?B.index>A.index&&(B.x2New=B.x2):B.x2New=le:B.x2New>le&&(B.x2New=Math.max(le,B.x2));const de=[];let K=null;for(ie=I;ie<=P;ie++){j=O[ie],B=j.boundary;const J=B.x2>A.x2?B:A;K===J?de.at(-1).end=j.end:(de.push({start:j.start,end:j.end,boundary:J}),K=J)}for(O[I].start<A.y1&&(de[0].start=A.y1,de.unshift({start:O[I].start,end:A.y1,boundary:O[I].boundary})),A.y2<O[P].end&&(de.at(-1).end=A.y2,de.push({start:A.y2,end:O[P].end,boundary:O[P].boundary})),ie=I;ie<=P;ie++){if(j=O[ie],B=j.boundary,B.x2New!==void 0)continue;let J=!1;for(oe=I-1;!J&&oe>=0&&O[oe].start>=B.y1;oe--)J=O[oe].boundary===B;for(oe=P+1;!J&&oe<O.length&&O[oe].end<=B.y2;oe++)J=O[oe].boundary===B;for(oe=0;!J&&oe<de.length;oe++)J=de[oe].boundary===B;J||(B.x2New=le)}Array.prototype.splice.apply(O,[I,P-I+1,...de])}for(const A of O){const I=A.boundary;I.x2New===void 0&&(I.x2New=Math.max(k,I.x2))}}class T{constructor({textContent:x,textContentStream:S,container:O,viewport:A,textDivs:I,textContentItemsStr:P,enhanceTextSelection:j}){var B;j&&(0,a.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=x,this._textContentStream=S,this._container=O,this._document=O.ownerDocument,this._viewport=A,this._textDivs=I||[],this._textContentItemsStr=P||[],this._enhanceTextSelection=!!j,this._fontInspectorEnabled=!!((B=globalThis.FontInspector)!=null&&B.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(x,S){for(let O=0,A=x.length;O<A;O++){if(x[O].str===void 0){if(x[O].type==="beginMarkedContentProps"||x[O].type==="beginMarkedContent"){const I=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),x[O].id!==null&&this._container.setAttribute("id",`${x[O].id}`),I.append(this._container)}else x[O].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(x[O].str),b(this,x[O],S,this._layoutTextCtx)}}_layoutText(x){const S=this._textDivProperties.get(x);let O="";if(S.canvasWidth!==0&&S.hasText){const{fontFamily:A}=x.style,{fontSize:I}=S;(I!==this._layoutTextLastFontSize||A!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${I*this._devicePixelRatio}px ${A}`,this._layoutTextLastFontSize=I,this._layoutTextLastFontFamily=A);const{width:P}=this._layoutTextCtx.measureText(x.textContent);if(P>0){const j=this._devicePixelRatio*S.canvasWidth/P;this._enhanceTextSelection&&(S.scale=j),O=`scaleX(${j})`}}if(S.angle!==0&&(O=`rotate(${S.angle}deg) ${O}`),O.length>0&&(this._enhanceTextSelection&&(S.originalTransform=O),x.style.transform=O),S.hasText&&this._container.append(x),S.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this._container.append(A)}}_render(x=0){const S=(0,r.createPromiseCapability)();let O=Object.create(null);const A=this._document.createElement("canvas");if(A.height=A.width=u,this._layoutTextCtx=A.getContext("2d",{alpha:!1}),this._textContent){const I=this._textContent.items,P=this._textContent.styles;this._processItems(I,P),S.resolve()}else if(this._textContentStream){const I=()=>{this._reader.read().then(({value:P,done:j})=>{if(j){S.resolve();return}Object.assign(O,P.styles),this._processItems(P.items,O),I()},S.reject)};this._reader=this._textContentStream.getReader(),I()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');S.promise.then(()=>{O=null,x?this._renderTimer=setTimeout(()=>{E(this),this._renderTimer=null},x):E(this)},this._capability.reject)}expandTextDivs(x=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(y(this),this._bounds=null);const S=[],O=[];for(let A=0,I=this._textDivs.length;A<I;A++){const P=this._textDivs[A],j=this._textDivProperties.get(P);j.hasText&&(x?(S.length=0,O.length=0,j.originalTransform&&S.push(j.originalTransform),j.paddingTop>0?(O.push(`${j.paddingTop}px`),S.push(`translateY(${-j.paddingTop}px)`)):O.push(0),j.paddingRight>0?O.push(`${j.paddingRight/j.scale}px`):O.push(0),j.paddingBottom>0?O.push(`${j.paddingBottom}px`):O.push(0),j.paddingLeft>0?(O.push(`${j.paddingLeft/j.scale}px`),S.push(`translateX(${-j.paddingLeft/j.scale}px)`)):O.push(0),P.style.padding=O.join(" "),S.length&&(P.style.transform=S.join(" "))):(P.style.padding=null,P.style.transform=j.originalTransform))}}}e.TextLayerRenderTask=T;function R(k){const x=new T({textContent:k.textContent,textContentStream:k.textContentStream,container:k.container,viewport:k.viewport,textDivs:k.textDivs,textContentItemsStr:k.textContentItemsStr,enhanceTextSelection:k.enhanceTextSelection});return x._render(k.timeout),x}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=n(8),a=n(1),o=n(3);let u=class{constructor(){(0,a.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=u;{let g=function(S){let O=[];const A=[];for(const I of S){if(I.fn==="save"){O.push({fnId:92,fn:"group",items:[]}),A.push(O),O=O.at(-1).items;continue}I.fn==="restore"?O=A.pop():O.push(I)}return O},v=function(S){if(Number.isInteger(S))return S.toString();const O=S.toFixed(10);let A=O.length-1;if(O[A]!=="0")return O;do A--;while(O[A]==="0");return O.substring(0,O[A]==="."?A:A+1)},T=function(S){if(S[4]===0&&S[5]===0){if(S[1]===0&&S[2]===0)return S[0]===1&&S[3]===1?"":`scale(${v(S[0])} ${v(S[3])})`;if(S[0]===S[3]&&S[1]===-S[2]){const O=Math.acos(S[0])*180/Math.PI;return`rotate(${v(O)})`}}else if(S[0]===1&&S[1]===0&&S[2]===0&&S[3]===1)return`translate(${v(S[4])} ${v(S[5])})`;return`matrix(${v(S[0])} ${v(S[1])} ${v(S[2])} ${v(S[3])} ${v(S[4])} ${v(S[5])})`};const h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/1999/xlink",m=["butt","round","square"],b=["miter","round","bevel"],E=function(S,O="",A=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!A)return URL.createObjectURL(new Blob([S],{type:O}));const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P=`data:${O};base64,`;for(let j=0,B=S.length;j<B;j+=3){const ie=S[j]&255,oe=S[j+1]&255,le=S[j+2]&255,de=ie>>2,K=(ie&3)<<4|oe>>4,J=j+1<B?(oe&15)<<2|le>>6:64,se=j+2<B?le&63:64;P+=I[de]+I[K]+I[J]+I[se]}return P},w=function(){const S=new Uint8Array([137,80,78,71,13,10,26,10]),O=12,A=new Int32Array(256);for(let le=0;le<256;le++){let de=le;for(let K=0;K<8;K++)de&1?de=3988292384^de>>1&2147483647:de=de>>1&2147483647;A[le]=de}function I(le,de,K){let J=-1;for(let se=de;se<K;se++){const ue=(J^le[se])&255,q=A[ue];J=J>>>8^q}return J^-1}function P(le,de,K,J){let se=J;const ue=de.length;K[se]=ue>>24&255,K[se+1]=ue>>16&255,K[se+2]=ue>>8&255,K[se+3]=ue&255,se+=4,K[se]=le.charCodeAt(0)&255,K[se+1]=le.charCodeAt(1)&255,K[se+2]=le.charCodeAt(2)&255,K[se+3]=le.charCodeAt(3)&255,se+=4,K.set(de,se),se+=de.length;const q=I(K,J+4,se);K[se]=q>>24&255,K[se+1]=q>>16&255,K[se+2]=q>>8&255,K[se+3]=q&255}function j(le,de,K){let J=1,se=0;for(let ue=de;ue<K;++ue)J=(J+(le[ue]&255))%65521,se=(se+J)%65521;return se<<16|J}function B(le){if(!o.isNodeJS)return ie(le);try{let de;parseInt(process.versions.node)>=8?de=le:de=Buffer.from(le);const K=require$$5.deflateSync(de,{level:9});return K instanceof Uint8Array?K:new Uint8Array(K)}catch(de){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+de)}return ie(le)}function ie(le){let de=le.length;const K=65535,J=Math.ceil(de/K),se=new Uint8Array(2+de+J*5+4);let ue=0;se[ue++]=120,se[ue++]=156;let q=0;for(;de>K;)se[ue++]=0,se[ue++]=255,se[ue++]=255,se[ue++]=0,se[ue++]=0,se.set(le.subarray(q,q+K),ue),ue+=K,q+=K,de-=K;se[ue++]=1,se[ue++]=de&255,se[ue++]=de>>8&255,se[ue++]=~de&65535&255,se[ue++]=(~de&65535)>>8&255,se.set(le.subarray(q),ue),ue+=le.length-q;const fe=j(le,0,le.length);return se[ue++]=fe>>24&255,se[ue++]=fe>>16&255,se[ue++]=fe>>8&255,se[ue++]=fe&255,se}function oe(le,de,K,J){const se=le.width,ue=le.height;let q,fe,Z;const N=le.data;switch(de){case a.ImageKind.GRAYSCALE_1BPP:fe=0,q=1,Z=se+7>>3;break;case a.ImageKind.RGB_24BPP:fe=2,q=8,Z=se*3;break;case a.ImageKind.RGBA_32BPP:fe=6,q=8,Z=se*4;break;default:throw new Error("invalid format")}const D=new Uint8Array((1+Z)*ue);let V=0,W=0;for(let $=0;$<ue;++$)D[V++]=0,D.set(N.subarray(W,W+Z),V),W+=Z,V+=Z;if(de===a.ImageKind.GRAYSCALE_1BPP&&J){V=0;for(let $=0;$<ue;$++){V++;for(let H=0;H<Z;H++)D[V++]^=255}}const te=new Uint8Array([se>>24&255,se>>16&255,se>>8&255,se&255,ue>>24&255,ue>>16&255,ue>>8&255,ue&255,q,fe,0,0,0]),X=B(D),C=S.length+O*3+te.length+X.length,L=new Uint8Array(C);let U=0;return L.set(S,U),U+=S.length,P("IHDR",te,L,U),U+=O+te.length,P("IDATA",X,L,U),U+=O+X.length,P("IEND",new Uint8Array(0),L,U),E(L,"image/png",K)}return function(de,K,J){const se=de.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:de.kind;return oe(de,se,K,J)}}();class y{constructor(){this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(O,A){this.x=O,this.y=A}}let R=0,k=0,x=0;e.SVGGraphics=u=class{constructor(S,O,A=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new y,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=S,this.objs=O,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!A,this._operatorIdMapping=[];for(const I in a.OPS)this._operatorIdMapping[a.OPS[I]]=I}save(){this.transformStack.push(this.transformMatrix);const S=this.current;this.extraStack.push(S),this.current=S.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(S){this.save(),this.executeOpTree(S),this.restore()}loadDependencies(S){const O=S.fnArray,A=S.argsArray;for(let I=0,P=O.length;I<P;I++)if(O[I]===a.OPS.dependency)for(const j of A[I]){const B=j.startsWith("g_")?this.commonObjs:this.objs,ie=new Promise(oe=>{B.get(j,oe)});this.current.dependencies.push(ie)}return Promise.all(this.current.dependencies)}transform(S,O,A,I,P,j){const B=[S,O,A,I,P,j];this.transformMatrix=a.Util.transform(this.transformMatrix,B),this.tgrp=null}getSVG(S,O){this.viewport=O;const A=this._initialize(O);return this.loadDependencies(S).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(S)),A))}convertOpList(S){const O=this._operatorIdMapping,A=S.argsArray,I=S.fnArray,P=[];for(let j=0,B=I.length;j<B;j++){const ie=I[j];P.push({fnId:ie,fn:O[ie],args:A[j]})}return g(P)}executeOpTree(S){for(const O of S){const A=O.fn,I=O.fnId,P=O.args;switch(I|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(P);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(P[0],P[1]);break;case a.OPS.setFont:this.setFont(P);break;case a.OPS.showText:this.showText(P[0]);break;case a.OPS.showSpacedText:this.showText(P[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(P[0],P[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(P[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(P[0]);break;case a.OPS.setHScale:this.setHScale(P[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(P[0],P[1],P[2],P[3],P[4],P[5]);break;case a.OPS.setTextRise:this.setTextRise(P[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(P[0]);break;case a.OPS.setLineWidth:this.setLineWidth(P[0]);break;case a.OPS.setLineJoin:this.setLineJoin(P[0]);break;case a.OPS.setLineCap:this.setLineCap(P[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(P[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(P[0],P[1],P[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(P[0],P[1],P[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(P);break;case a.OPS.setFillColorN:this.setFillColorN(P);break;case a.OPS.shadingFill:this.shadingFill(P[0]);break;case a.OPS.setDash:this.setDash(P[0],P[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(P[0]);break;case a.OPS.setFlatness:this.setFlatness(P[0]);break;case a.OPS.setGState:this.setGState(P[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(P[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(P[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(P[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(P[0],P[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(P[0],P[1],P[2],P[3],P[4],P[5]);break;case a.OPS.constructPath:this.constructPath(P[0],P[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(O.items);break;default:(0,a.warn)(`Unimplemented operator ${A}`);break}}}setWordSpacing(S){this.current.wordSpacing=S}setCharSpacing(S){this.current.charSpacing=S}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(S,O,A,I,P,j){const B=this.current;B.textMatrix=B.lineMatrix=[S,O,A,I,P,j],B.textMatrixScale=Math.hypot(S,O),B.x=B.lineX=0,B.y=B.lineY=0,B.xcoords=[],B.ycoords=[],B.tspan=this.svgFactory.createElement("svg:tspan"),B.tspan.setAttributeNS(null,"font-family",B.fontFamily),B.tspan.setAttributeNS(null,"font-size",`${v(B.fontSize)}px`),B.tspan.setAttributeNS(null,"y",v(-B.y)),B.txtElement=this.svgFactory.createElement("svg:text"),B.txtElement.append(B.tspan)}beginText(){const S=this.current;S.x=S.lineX=0,S.y=S.lineY=0,S.textMatrix=a.IDENTITY_MATRIX,S.lineMatrix=a.IDENTITY_MATRIX,S.textMatrixScale=1,S.tspan=this.svgFactory.createElement("svg:tspan"),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtgrp=this.svgFactory.createElement("svg:g"),S.xcoords=[],S.ycoords=[]}moveText(S,O){const A=this.current;A.x=A.lineX+=S,A.y=A.lineY+=O,A.xcoords=[],A.ycoords=[],A.tspan=this.svgFactory.createElement("svg:tspan"),A.tspan.setAttributeNS(null,"font-family",A.fontFamily),A.tspan.setAttributeNS(null,"font-size",`${v(A.fontSize)}px`),A.tspan.setAttributeNS(null,"y",v(-A.y))}showText(S){const O=this.current,A=O.font,I=O.fontSize;if(I===0)return;const P=O.fontSizeScale,j=O.charSpacing,B=O.wordSpacing,ie=O.fontDirection,oe=O.textHScale*ie,le=A.vertical,de=le?1:-1,K=A.defaultVMetrics,J=I*O.fontMatrix[0];let se=0;for(const fe of S){if(fe===null){se+=ie*B;continue}else if(typeof fe=="number"){se+=de*fe*I/1e3;continue}const Z=(fe.isSpace?B:0)+j,N=fe.fontChar;let D,V,W=fe.width;if(le){let X;const C=fe.vmetric||K;X=fe.vmetric?C[1]:W*.5,X=-X*J;const L=C[2]*J;W=C?-C[0]:W,D=X/P,V=(se+L)/P}else D=se/P,V=0;(fe.isInFont||A.missingFile)&&(O.xcoords.push(O.x+D),le&&O.ycoords.push(-O.y+V),O.tspan.textContent+=N);let te;le?te=W*J-Z*ie:te=W*J+Z*ie,se+=te}O.tspan.setAttributeNS(null,"x",O.xcoords.map(v).join(" ")),le?O.tspan.setAttributeNS(null,"y",O.ycoords.map(v).join(" ")):O.tspan.setAttributeNS(null,"y",v(-O.y)),le?O.y-=se:O.x+=se*oe,O.tspan.setAttributeNS(null,"font-family",O.fontFamily),O.tspan.setAttributeNS(null,"font-size",`${v(O.fontSize)}px`),O.fontStyle!==h.fontStyle&&O.tspan.setAttributeNS(null,"font-style",O.fontStyle),O.fontWeight!==h.fontWeight&&O.tspan.setAttributeNS(null,"font-weight",O.fontWeight);const ue=O.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(ue===a.TextRenderingMode.FILL||ue===a.TextRenderingMode.FILL_STROKE?(O.fillColor!==h.fillColor&&O.tspan.setAttributeNS(null,"fill",O.fillColor),O.fillAlpha<1&&O.tspan.setAttributeNS(null,"fill-opacity",O.fillAlpha)):O.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?O.tspan.setAttributeNS(null,"fill","transparent"):O.tspan.setAttributeNS(null,"fill","none"),ue===a.TextRenderingMode.STROKE||ue===a.TextRenderingMode.FILL_STROKE){const fe=1/(O.textMatrixScale||1);this._setStrokeAttributes(O.tspan,fe)}let q=O.textMatrix;O.textRise!==0&&(q=q.slice(),q[5]+=O.textRise),O.txtElement.setAttributeNS(null,"transform",`${T(q)} scale(${v(oe)}, -1)`),O.txtElement.setAttributeNS(d,"xml:space","preserve"),O.txtElement.append(O.tspan),O.txtgrp.append(O.txtElement),this._ensureTransformGroup().append(O.txtElement)}setLeadingMoveText(S,O){this.setLeading(-O),this.moveText(S,O)}addFontStyle(S){if(!S.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const O=E(S.data,S.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${S.loadedName}"; src: url(${O}); }
`}setFont(S){const O=this.current,A=this.commonObjs.get(S[0]);let I=S[1];O.font=A,this.embedFonts&&!A.missingFile&&!this.embeddedFonts[A.loadedName]&&(this.addFontStyle(A),this.embeddedFonts[A.loadedName]=A),O.fontMatrix=A.fontMatrix||a.FONT_IDENTITY_MATRIX;let P="normal";A.black?P="900":A.bold&&(P="bold");const j=A.italic?"italic":"normal";I<0?(I=-I,O.fontDirection=-1):O.fontDirection=1,O.fontSize=I,O.fontFamily=A.loadedName,O.fontWeight=P,O.fontStyle=j,O.tspan=this.svgFactory.createElement("svg:tspan"),O.tspan.setAttributeNS(null,"y",v(-O.y)),O.xcoords=[],O.ycoords=[]}endText(){var O;const S=this.current;S.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((O=S.txtElement)!=null&&O.hasChildNodes())&&(S.element=S.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(S){S>0&&(this.current.lineWidth=S)}setLineCap(S){this.current.lineCap=m[S]}setLineJoin(S){this.current.lineJoin=b[S]}setMiterLimit(S){this.current.miterLimit=S}setStrokeAlpha(S){this.current.strokeAlpha=S}setStrokeRGBColor(S,O,A){this.current.strokeColor=a.Util.makeHexColor(S,O,A)}setFillAlpha(S){this.current.fillAlpha=S}setFillRGBColor(S,O,A){this.current.fillColor=a.Util.makeHexColor(S,O,A),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(S){this.current.strokeColor=this._makeColorN_Pattern(S)}setFillColorN(S){this.current.fillColor=this._makeColorN_Pattern(S)}shadingFill(S){const O=this.viewport.width,A=this.viewport.height,I=a.Util.inverseTransform(this.transformMatrix),P=a.Util.applyTransform([0,0],I),j=a.Util.applyTransform([0,A],I),B=a.Util.applyTransform([O,0],I),ie=a.Util.applyTransform([O,A],I),oe=Math.min(P[0],j[0],B[0],ie[0]),le=Math.min(P[1],j[1],B[1],ie[1]),de=Math.max(P[0],j[0],B[0],ie[0]),K=Math.max(P[1],j[1],B[1],ie[1]),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",oe),J.setAttributeNS(null,"y",le),J.setAttributeNS(null,"width",de-oe),J.setAttributeNS(null,"height",K-le),J.setAttributeNS(null,"fill",this._makeShadingPattern(S)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(J)}_makeColorN_Pattern(S){return S[0]==="TilingPattern"?this._makeTilingPattern(S):this._makeShadingPattern(S)}_makeTilingPattern(S){const O=S[1],A=S[2],I=S[3]||a.IDENTITY_MATRIX,[P,j,B,ie]=S[4],oe=S[5],le=S[6],de=S[7],K=`shading${x++}`,[J,se,ue,q]=a.Util.normalizeRect([...a.Util.applyTransform([P,j],I),...a.Util.applyTransform([B,ie],I)]),[fe,Z]=a.Util.singularValueDecompose2dScale(I),N=oe*fe,D=le*Z,V=this.svgFactory.createElement("svg:pattern");V.setAttributeNS(null,"id",K),V.setAttributeNS(null,"patternUnits","userSpaceOnUse"),V.setAttributeNS(null,"width",N),V.setAttributeNS(null,"height",D),V.setAttributeNS(null,"x",`${J}`),V.setAttributeNS(null,"y",`${se}`);const W=this.svg,te=this.transformMatrix,X=this.current.fillColor,C=this.current.strokeColor,L=this.svgFactory.create(ue-J,q-se);if(this.svg=L,this.transformMatrix=I,de===2){const U=a.Util.makeHexColor(...O);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(A)),this.svg=W,this.transformMatrix=te,this.current.fillColor=X,this.current.strokeColor=C,V.append(L.childNodes[0]),this.defs.append(V),`url(#${K})`}_makeShadingPattern(S){switch(typeof S=="string"&&(S=this.objs.get(S)),S[0]){case"RadialAxial":const O=`shading${x++}`,A=S[3];let I;switch(S[1]){case"axial":const P=S[4],j=S[5];I=this.svgFactory.createElement("svg:linearGradient"),I.setAttributeNS(null,"id",O),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"x1",P[0]),I.setAttributeNS(null,"y1",P[1]),I.setAttributeNS(null,"x2",j[0]),I.setAttributeNS(null,"y2",j[1]);break;case"radial":const B=S[4],ie=S[5],oe=S[6],le=S[7];I=this.svgFactory.createElement("svg:radialGradient"),I.setAttributeNS(null,"id",O),I.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),I.setAttributeNS(null,"cx",ie[0]),I.setAttributeNS(null,"cy",ie[1]),I.setAttributeNS(null,"r",le),I.setAttributeNS(null,"fx",B[0]),I.setAttributeNS(null,"fy",B[1]),I.setAttributeNS(null,"fr",oe);break;default:throw new Error(`Unknown RadialAxial type: ${S[1]}`)}for(const P of A){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",P[0]),j.setAttributeNS(null,"stop-color",P[1]),I.append(j)}return this.defs.append(I),`url(#${O})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${S[0]}`)}}setDash(S,O){this.current.dashArray=S,this.current.dashPhase=O}constructPath(S,O){const A=this.current;let I=A.x,P=A.y,j=[],B=0;for(const ie of S)switch(ie|0){case a.OPS.rectangle:I=O[B++],P=O[B++];const oe=O[B++],le=O[B++],de=I+oe,K=P+le;j.push("M",v(I),v(P),"L",v(de),v(P),"L",v(de),v(K),"L",v(I),v(K),"Z");break;case a.OPS.moveTo:I=O[B++],P=O[B++],j.push("M",v(I),v(P));break;case a.OPS.lineTo:I=O[B++],P=O[B++],j.push("L",v(I),v(P));break;case a.OPS.curveTo:I=O[B+4],P=O[B+5],j.push("C",v(O[B]),v(O[B+1]),v(O[B+2]),v(O[B+3]),v(I),v(P)),B+=6;break;case a.OPS.curveTo2:j.push("C",v(I),v(P),v(O[B]),v(O[B+1]),v(O[B+2]),v(O[B+3])),I=O[B+2],P=O[B+3],B+=4;break;case a.OPS.curveTo3:I=O[B+2],P=O[B+3],j.push("C",v(O[B]),v(O[B+1]),v(I),v(P),v(I),v(P)),B+=4;break;case a.OPS.closePath:j.push("Z");break}j=j.join(" "),A.path&&S.length>0&&S[0]!==a.OPS.rectangle&&S[0]!==a.OPS.moveTo?j=A.path.getAttributeNS(null,"d")+j:(A.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(A.path)),A.path.setAttributeNS(null,"d",j),A.path.setAttributeNS(null,"fill","none"),A.element=A.path,A.setCurrentPoint(I,P)}endPath(){const S=this.current;if(S.path=null,!this.pendingClip)return;if(!S.element){this.pendingClip=null;return}const O=`clippath${R++}`,A=this.svgFactory.createElement("svg:clipPath");A.setAttributeNS(null,"id",O),A.setAttributeNS(null,"transform",T(this.transformMatrix));const I=S.element.cloneNode(!0);if(this.pendingClip==="evenodd"?I.setAttributeNS(null,"clip-rule","evenodd"):I.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,A.append(I),this.defs.append(A),S.activeClipUrl){S.clipGroup=null;for(const P of this.extraStack)P.clipGroup=null;A.setAttributeNS(null,"clip-path",S.activeClipUrl)}S.activeClipUrl=`url(#${O})`,this.tgrp=null}clip(S){this.pendingClip=S}closePath(){const S=this.current;if(S.path){const O=`${S.path.getAttributeNS(null,"d")}Z`;S.path.setAttributeNS(null,"d",O)}}setLeading(S){this.current.leading=-S}setTextRise(S){this.current.textRise=S}setTextRenderingMode(S){this.current.textRenderingMode=S}setHScale(S){this.current.textHScale=S/100}setRenderingIntent(S){}setFlatness(S){}setGState(S){for(const[O,A]of S)switch(O){case"LW":this.setLineWidth(A);break;case"LC":this.setLineCap(A);break;case"LJ":this.setLineJoin(A);break;case"ML":this.setMiterLimit(A);break;case"D":this.setDash(A[0],A[1]);break;case"RI":this.setRenderingIntent(A);break;case"FL":this.setFlatness(A);break;case"Font":this.setFont(A);break;case"CA":this.setStrokeAlpha(A);break;case"ca":this.setFillAlpha(A);break;default:(0,a.warn)(`Unimplemented graphic state operator ${O}`);break}}fill(){const S=this.current;S.element&&(S.element.setAttributeNS(null,"fill",S.fillColor),S.element.setAttributeNS(null,"fill-opacity",S.fillAlpha),this.endPath())}stroke(){const S=this.current;S.element&&(this._setStrokeAttributes(S.element),S.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(S,O=1){const A=this.current;let I=A.dashArray;O!==1&&I.length>0&&(I=I.map(function(P){return O*P})),S.setAttributeNS(null,"stroke",A.strokeColor),S.setAttributeNS(null,"stroke-opacity",A.strokeAlpha),S.setAttributeNS(null,"stroke-miterlimit",v(A.miterLimit)),S.setAttributeNS(null,"stroke-linecap",A.lineCap),S.setAttributeNS(null,"stroke-linejoin",A.lineJoin),S.setAttributeNS(null,"stroke-width",v(O*A.lineWidth)+"px"),S.setAttributeNS(null,"stroke-dasharray",I.map(v).join(" ")),S.setAttributeNS(null,"stroke-dashoffset",v(O*A.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width","1px"),S.setAttributeNS(null,"height","1px"),S.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(S)}paintImageXObject(S){const O=S.startsWith("g_")?this.commonObjs.get(S):this.objs.get(S);if(!O){(0,a.warn)(`Dependent image with object ID ${S} is not ready yet`);return}this.paintInlineImageXObject(O)}paintInlineImageXObject(S,O){const A=S.width,I=S.height,P=w(S,this.forceDataSchema,!!O),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",v(A)),j.setAttributeNS(null,"height",v(I)),this.current.element=j,this.clip("nonzero");const B=this.svgFactory.createElement("svg:image");B.setAttributeNS(f,"xlink:href",P),B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y",v(-I)),B.setAttributeNS(null,"width",v(A)+"px"),B.setAttributeNS(null,"height",v(I)+"px"),B.setAttributeNS(null,"transform",`scale(${v(1/A)} ${v(-1/I)})`),O?O.append(B):this._ensureTransformGroup().append(B)}paintImageMaskXObject(S){const O=this.current,A=S.width,I=S.height,P=O.fillColor;O.maskId=`mask${k++}`;const j=this.svgFactory.createElement("svg:mask");j.setAttributeNS(null,"id",O.maskId);const B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x","0"),B.setAttributeNS(null,"y","0"),B.setAttributeNS(null,"width",v(A)),B.setAttributeNS(null,"height",v(I)),B.setAttributeNS(null,"fill",P),B.setAttributeNS(null,"mask",`url(#${O.maskId})`),this.defs.append(j),this._ensureTransformGroup().append(B),this.paintInlineImageXObject(S,j)}paintFormXObjectBegin(S,O){if(Array.isArray(S)&&S.length===6&&this.transform(S[0],S[1],S[2],S[3],S[4],S[5]),O){const A=O[2]-O[0],I=O[3]-O[1],P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x",O[0]),P.setAttributeNS(null,"y",O[1]),P.setAttributeNS(null,"width",v(A)),P.setAttributeNS(null,"height",v(I)),this.current.element=P,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(S){const O=this.svgFactory.create(S.width,S.height),A=this.svgFactory.createElement("svg:defs");O.append(A),this.defs=A;const I=this.svgFactory.createElement("svg:g");return I.setAttributeNS(null,"transform",T(S.transform)),O.append(I),this.svg=I,O}_ensureClipGroup(){if(!this.current.clipGroup){const S=this.svgFactory.createElement("svg:g");S.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(S),this.current.clipGroup=S}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=n(1),a=n(33);const o=require$$5,u=require$$5,h=require$$5,d=require$$5,f=/^file:\/\/\/[a-zA-Z]:\//;function m(k){const x=d.parse(k);return x.protocol==="file:"||x.host?x:/^[a-z]:[/\\]/i.test(k)?d.parse(`file:///${k}`):(x.host||(x.protocol="file:"),x)}class b{constructor(x){this.source=x,this.url=m(x.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new g(this),this._fullRequestReader}getRangeReader(x,S){if(S<=this._progressiveDataLength)return null;const O=this.isFsUrl?new R(this,x,S):new v(this,x,S);return this._rangeRequestReaders.push(O),O}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x);for(const S of this._rangeRequestReaders.slice(0))S.cancel(x)}}e.PDFNodeStream=b;class E{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const S=x.source;this._contentLength=S.length,this._loaded=0,this._filename=null,this._disableRange=S.disableRange||!1,this._rangeChunkSize=S.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!S.disableStream,this._isRangeSupported=!S.disableRange,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)(),this._headersCapability=(0,r.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=x.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",S=>{this._error(S)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,r.createPromiseCapability)();const S=x.source;this._isStreamingSupported=!S.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const x=this._readableStream.read();return x===null?(this._readCapability=(0,r.createPromiseCapability)(),this.read()):(this._loaded+=x.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){if(!this._readableStream){this._error(x);return}this._readableStream.destroy(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",S=>{this._error(S)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function y(k,x){return{protocol:k.protocol,auth:k.auth,host:k.hostname,port:k.port,path:k.path,method:"GET",headers:x}}class g extends E{constructor(x){super(x);const S=O=>{if(O.statusCode===404){const j=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=j,this._headersCapability.reject(j);return}this._headersCapability.resolve(),this._setReadableStream(O);const A=j=>this._readableStream.headers[j.toLowerCase()],{allowRangeRequests:I,suggestedLength:P}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:A,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=P||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(A)};this._request=null,this._url.protocol==="http:"?this._request=u.request(y(this._url,x.httpHeaders),S):this._request=h.request(y(this._url,x.httpHeaders),S),this._request.on("error",O=>{this._storedError=O,this._headersCapability.reject(O)}),this._request.end()}}class v extends w{constructor(x,S,O){super(x),this._httpHeaders={};for(const I in x.httpHeaders){const P=x.httpHeaders[I];typeof P>"u"||(this._httpHeaders[I]=P)}this._httpHeaders.Range=`bytes=${S}-${O-1}`;const A=I=>{if(I.statusCode===404){const P=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=P;return}this._setReadableStream(I)};this._request=null,this._url.protocol==="http:"?this._request=u.request(y(this._url,this._httpHeaders),A):this._request=h.request(y(this._url,this._httpHeaders),A),this._request.on("error",I=>{this._storedError=I}),this._request.end()}}class T extends E{constructor(x){super(x);let S=decodeURIComponent(this._url.path);f.test(this._url.href)&&(S=S.replace(/^\//,"")),o.lstat(S,(O,A)=>{if(O){O.code==="ENOENT"&&(O=new r.MissingPDFException(`Missing PDF "${S}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=A.size,this._setReadableStream(o.createReadStream(S)),this._headersCapability.resolve()})}}class R extends w{constructor(x,S,O){super(x);let A=decodeURIComponent(this._url.path);f.test(this._url.href)&&(A=A.replace(/^\//,"")),this._setReadableStream(o.createReadStream(A,{start:S,end:O-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=d,e.extractFilenameFromHeader=h,e.validateRangeRequestCapabilities=u,e.validateResponseStatus=f;var r=n(1),a=n(34),o=n(8);function u({getResponseHeader:m,isHttp:b,rangeChunkSize:E,disableRange:w}){const y={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(m("Content-Length"),10);return!Number.isInteger(g)||(y.suggestedLength=g,g<=2*E)||w||!b||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(y.allowRangeRequests=!0),y}function h(m){const b=m("Content-Disposition");if(b){let E=(0,a.getFilenameFromContentDispositionHeader)(b);if(E.includes("%"))try{E=decodeURIComponent(E)}catch{}if((0,o.isPdfFile)(E))return E}return null}function d(m,b){return m===404||m===0&&b.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+b+'".'):new r.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${b}".`,m)}function f(m){return m===200||m===206}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var r=n(1);function a(o){let u=!0,h=d("filename\\*","i").exec(o);if(h){h=h[1];let g=E(h);return g=unescape(g),g=w(g),g=y(g),m(g)}if(h=b(o),h){const g=y(h);return m(g)}if(h=d("filename","i").exec(o),h){h=h[1];let g=E(h);return g=y(g),m(g)}function d(g,v){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function f(g,v){if(g){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const T=new TextDecoder(g,{fatal:!0}),R=(0,r.stringToBytes)(v);v=T.decode(R),u=!1}catch{}}return v}function m(g){return u&&/[\x80-\xff]/.test(g)&&(g=f("utf-8",g),u&&(g=f("iso-8859-1",g))),g}function b(g){const v=[];let T;const R=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=R.exec(g))!==null;){let[,x,S,O]=T;if(x=parseInt(x,10),x in v){if(x===0)break;continue}v[x]=[S,O]}const k=[];for(let x=0;x<v.length&&x in v;++x){let[S,O]=v[x];O=E(O),S&&(O=unescape(O),x===0&&(O=w(O))),k.push(O)}return k.join("")}function E(g){if(g.startsWith('"')){const v=g.slice(1).split('\\"');for(let T=0;T<v.length;++T){const R=v[T].indexOf('"');R!==-1&&(v[T]=v[T].slice(0,R),v.length=T+1),v[T]=v[T].replace(/\\(.)/g,"$1")}g=v.join('"')}return g}function w(g){const v=g.indexOf("'");if(v===-1)return g;const T=g.slice(0,v),k=g.slice(v+1).replace(/^[^']*'/,"");return f(T,k)}function y(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,T,R,k){if(R==="q"||R==="Q")return k=k.replace(/_/g," "),k=k.replace(/=([0-9a-fA-F]{2})/g,function(x,S){return String.fromCharCode(parseInt(S,16))}),f(T,k);try{k=atob(k)}catch{}return f(T,k)})}return""}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=n(1),a=n(33);const o=200,u=206;function h(E){const w=E.response;return typeof w!="string"?w:(0,r.stringToBytes)(w).buffer}class d{constructor(w,y={}){this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&y.httpHeaders||Object.create(null),this.withCredentials=y.withCredentials||!1,this.getXhr=y.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,y,g){const v={begin:w,end:y};for(const T in g)v[T]=g[T];return this.request(v)}requestFull(w){return this.request(w)}request(w){const y=this.getXhr(),g=this.currXhrId++,v=this.pendingRequests[g]={xhr:y};y.open("GET",this.url),y.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const R=this.httpHeaders[T];typeof R>"u"||y.setRequestHeader(T,R)}return this.isHttp&&"begin"in w&&"end"in w?(y.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),v.expectedStatus=u):v.expectedStatus=o,y.responseType="arraybuffer",w.onError&&(y.onerror=function(T){w.onError(y.status)}),y.onreadystatechange=this.onStateChange.bind(this,g),y.onprogress=this.onProgress.bind(this,g),v.onHeadersReceived=w.onHeadersReceived,v.onDone=w.onDone,v.onError=w.onError,v.onProgress=w.onProgress,y.send(null),g}onProgress(w,y){var v;const g=this.pendingRequests[w];g&&((v=g.onProgress)==null||v.call(g,y))}onStateChange(w,y){var x,S,O;const g=this.pendingRequests[w];if(!g)return;const v=g.xhr;if(v.readyState>=2&&g.onHeadersReceived&&(g.onHeadersReceived(),delete g.onHeadersReceived),v.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],v.status===0&&this.isHttp){(x=g.onError)==null||x.call(g,v.status);return}const T=v.status||o;if(!(T===o&&g.expectedStatus===u)&&T!==g.expectedStatus){(S=g.onError)==null||S.call(g,v.status);return}const k=h(v);if(T===u){const A=v.getResponseHeader("Content-Range"),I=/bytes (\d+)-(\d+)\/(\d+)/.exec(A);g.onDone({begin:parseInt(I[1],10),chunk:k})}else k?g.onDone({begin:0,chunk:k}):(O=g.onError)==null||O.call(g,v.status)}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){const y=this.pendingRequests[w].xhr;delete this.pendingRequests[w],y.abort()}}class f{constructor(w){this._source=w,this._manager=new d(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){const y=this._rangeRequestReaders.indexOf(w);y>=0&&this._rangeRequestReaders.splice(y,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(w,y){const g=new b(this._manager,w,y);return g.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(g),g}cancelAllRequests(w){var y;(y=this._fullRequestReader)==null||y.cancel(w);for(const g of this._rangeRequestReaders.slice(0))g.cancel(w)}}e.PDFNetworkStream=f;class m{constructor(w,y){this._manager=w;const g={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=w.requestFull(g),this._headersReceivedCapability=(0,r.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const w=this._fullRequestId,y=this._manager.getRequestXhr(w),g=R=>y.getResponseHeader(R),{allowRangeRequests:v,suggestedLength:T}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});v&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(g),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,a.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){var y;(y=this.onProgress)==null||y.call(this,{loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=(0,r.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(w,y,g){this._manager=w;const v={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(y,g,v),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var w;(w=this.onClosed)==null||w.call(this,this)}_onDone(w){const y=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunk=y,this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,a.createResponseStatusError)(w,this._url);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){var y;this.isStreamingSupported||(y=this.onProgress)==null||y.call(this,{loaded:w.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const w=(0,r.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=n(1),a=n(33);function o(m,b,E){return{method:"GET",headers:m,signal:E.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function u(m){const b=new Headers;for(const E in m){const w=m[E];typeof w>"u"||b.append(E,w)}return b}class h{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(b,E){if(E<=this._progressiveDataLength)return null;const w=new f(this,b,E);return this._rangeRequestReaders.push(w),w}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b);for(const E of this._rangeRequestReaders.slice(0))E.cancel(b)}}e.PDFFetchStream=h;class d{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;const E=b.source;this._withCredentials=E.withCredentials||!1,this._contentLength=E.length,this._headersCapability=(0,r.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._headers=u(this._stream.httpHeaders);const w=E.url;fetch(w,o(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,a.validateResponseStatus)(y.status))throw(0,a.createResponseStatusError)(y.status,w);this._reader=y.body.getReader(),this._headersCapability.resolve();const g=R=>y.headers.get(R),{allowRangeRequests:v,suggestedLength:T}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=v,this._contentLength=T||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(g),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:b,done:E}=await this._reader.read();return E?{value:b,done:E}:(this._loaded+=b.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){this._reader&&this._reader.cancel(b),this._abortController.abort()}}class f{constructor(b,E,w){this._stream=b,this._reader=null,this._loaded=0;const y=b.source;this._withCredentials=y.withCredentials||!1,this._readCapability=(0,r.createPromiseCapability)(),this._isStreamingSupported=!y.disableStream,this._abortController=new AbortController,this._headers=u(this._stream.httpHeaders),this._headers.append("Range",`bytes=${E}-${w-1}`);const g=y.url;fetch(g,o(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,a.validateResponseStatus)(v.status))throw(0,a.createResponseStatusError)(v.status,g);this._readCapability.resolve(),this._reader=v.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:b,done:E}=await this._reader.read();return E?{value:b,done:E}:(this._loaded+=b.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){this._reader&&this._reader.cancel(b),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return u.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return m.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return f.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(4),r=__w_pdfjs_require__(8),a=__w_pdfjs_require__(22),o=__w_pdfjs_require__(7),u=__w_pdfjs_require__(27),h=__w_pdfjs_require__(15),d=__w_pdfjs_require__(3),f=__w_pdfjs_require__(30),m=__w_pdfjs_require__(31),b=__w_pdfjs_require__(29);if(d.isNodeJS){const{PDFNodeStream:E}=__w_pdfjs_require__(32);(0,n.setPDFNetworkStreamFactory)(w=>new E(w))}else{const{PDFNetworkStream:E}=__w_pdfjs_require__(35),{PDFFetchStream:w}=__w_pdfjs_require__(36);(0,n.setPDFNetworkStreamFactory)(y=>(0,r.isValidFetchUrl)(y.url)?new w(y):new E(y))}})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf(),papaparse_min$1={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var papaparse_min=papaparse_min$1.exports,hasRequiredPapaparse_min;function requirePapaparse_min(){return hasRequiredPapaparse_min||(hasRequiredPapaparse_min=1,function(t,e){((n,r)=>{t.exports=r()})(papaparse_min,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},a,o=!r.document&&!!r.postMessage,u=r.IS_PAPA_WORKER||!1,h={},d=0,f={};function m(I){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(P){var j=S(P);j.chunkSize=parseInt(j.chunkSize),P.step||P.chunk||(j.chunkSize=null),this._handle=new g(j),(this._handle.streamer=this)._config=j}).call(this,I),this.parseChunk=function(P,j){var B=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<B){let oe=this._config.newline;oe||(ie=this._config.quoteChar||'"',oe=this._handle.guessLineEndings(P,ie)),P=[...P.split(oe).slice(B)].join(oe)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(ie=this._config.beforeFirstChunk(P))!==void 0&&(P=ie),this.isFirstChunk=!1,this._halted=!1;var B=this._partialLine+P,ie=(this._partialLine="",this._handle.parse(B,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(P=ie.meta.cursor,B=(this._finished||(this._partialLine=B.substring(P-this._baseIndex),this._baseIndex=P),ie&&ie.data&&(this._rowCount+=ie.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)r.postMessage({results:ie,workerId:f.WORKER_ID,finished:B});else if(A(this._config.chunk)&&!j){if(this._config.chunk(ie,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=ie=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(ie.data),this._completeResults.errors=this._completeResults.errors.concat(ie.errors),this._completeResults.meta=ie.meta),this._completed||!B||!A(this._config.complete)||ie&&ie.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),B||ie&&ie.meta.paused||this._nextChunk(),ie}this._halted=!0},this._sendError=function(P){A(this._config.error)?this._config.error(P):u&&this._config.error&&r.postMessage({workerId:f.WORKER_ID,error:P,finished:!1})}}function b(I){var P;(I=I||{}).chunkSize||(I.chunkSize=f.RemoteChunkSize),m.call(this,I),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(j){this._input=j,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(P=new XMLHttpRequest,this._config.withCredentials&&(P.withCredentials=this._config.withCredentials),o||(P.onload=O(this._chunkLoaded,this),P.onerror=O(this._chunkError,this)),P.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var j,B=this._config.downloadRequestHeaders;for(j in B)P.setRequestHeader(j,B[j])}var ie;this._config.chunkSize&&(ie=this._start+this._config.chunkSize-1,P.setRequestHeader("Range","bytes="+this._start+"-"+ie));try{P.send(this._config.downloadRequestBody)}catch(oe){this._chunkError(oe.message)}o&&P.status===0&&this._chunkError()}},this._chunkLoaded=function(){P.readyState===4&&(P.status<200||400<=P.status?this._chunkError():(this._start+=this._config.chunkSize||P.responseText.length,this._finished=!this._config.chunkSize||this._start>=(j=>(j=j.getResponseHeader("Content-Range"))!==null?parseInt(j.substring(j.lastIndexOf("/")+1)):-1)(P),this.parseChunk(P.responseText)))},this._chunkError=function(j){j=P.statusText||j,this._sendError(new Error(j))}}function E(I){(I=I||{}).chunkSize||(I.chunkSize=f.LocalChunkSize),m.call(this,I);var P,j,B=typeof FileReader<"u";this.stream=function(ie){this._input=ie,j=ie.slice||ie.webkitSlice||ie.mozSlice,B?((P=new FileReader).onload=O(this._chunkLoaded,this),P.onerror=O(this._chunkError,this)):P=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var ie=this._input,oe=(this._config.chunkSize&&(oe=Math.min(this._start+this._config.chunkSize,this._input.size),ie=j.call(ie,this._start,oe)),P.readAsText(ie,this._config.encoding));B||this._chunkLoaded({target:{result:oe}})},this._chunkLoaded=function(ie){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(ie.target.result)},this._chunkError=function(){this._sendError(P.error)}}function w(I){var P;m.call(this,I=I||{}),this.stream=function(j){return P=j,this._nextChunk()},this._nextChunk=function(){var j,B;if(!this._finished)return j=this._config.chunkSize,P=j?(B=P.substring(0,j),P.substring(j)):(B=P,""),this._finished=!P,this.parseChunk(B)}}function y(I){m.call(this,I=I||{});var P=[],j=!0,B=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(ie){this._input=ie,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){B&&P.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),P.length?this.parseChunk(P.shift()):j=!0},this._streamData=O(function(ie){try{P.push(typeof ie=="string"?ie:ie.toString(this._config.encoding)),j&&(j=!1,this._checkIsFinished(),this.parseChunk(P.shift()))}catch(oe){this._streamError(oe)}},this),this._streamError=O(function(ie){this._streamCleanUp(),this._sendError(ie)},this),this._streamEnd=O(function(){this._streamCleanUp(),B=!0,this._streamData("")},this),this._streamCleanUp=O(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(I){var P,j,B,ie,oe=Math.pow(2,53),le=-oe,de=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,K=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,J=this,se=0,ue=0,q=!1,fe=!1,Z=[],N={data:[],errors:[],meta:{}};function D(X){return I.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function V(){if(N&&B&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),B=!1),I.skipEmptyLines&&(N.data=N.data.filter(function(U){return!D(U)})),W()){let U=function($,H){A(I.transformHeader)&&($=I.transformHeader($,H)),Z.push($)};if(N)if(Array.isArray(N.data[0])){for(var X=0;W()&&X<N.data.length;X++)N.data[X].forEach(U);N.data.splice(0,1)}else N.data.forEach(U)}function C(U,$){for(var H=I.header?{}:[],Q=0;Q<U.length;Q++){var G=Q,F=U[Q],F=((ne,he)=>(ae=>(I.dynamicTypingFunction&&I.dynamicTyping[ae]===void 0&&(I.dynamicTyping[ae]=I.dynamicTypingFunction(ae)),(I.dynamicTyping[ae]||I.dynamicTyping)===!0))(ne)?he==="true"||he==="TRUE"||he!=="false"&&he!=="FALSE"&&((ae=>{if(de.test(ae)&&(ae=parseFloat(ae),le<ae&&ae<oe))return 1})(he)?parseFloat(he):K.test(he)?new Date(he):he===""?null:he):he)(G=I.header?Q>=Z.length?"__parsed_extra":Z[Q]:G,F=I.transform?I.transform(F,G):F);G==="__parsed_extra"?(H[G]=H[G]||[],H[G].push(F)):H[G]=F}return I.header&&(Q>Z.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+Q,ue+$):Q<Z.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+Q,ue+$)),H}var L;N&&(I.header||I.dynamicTyping||I.transform)&&(L=1,!N.data.length||Array.isArray(N.data[0])?(N.data=N.data.map(C),L=N.data.length):N.data=C(N.data,0),I.header&&N.meta&&(N.meta.fields=Z),ue+=L)}function W(){return I.header&&Z.length===0}function te(X,C,L,U){X={type:X,code:C,message:L},U!==void 0&&(X.row=U),N.errors.push(X)}A(I.step)&&(ie=I.step,I.step=function(X){N=X,W()?V():(V(),N.data.length!==0&&(se+=X.data.length,I.preview&&se>I.preview?j.abort():(N.data=N.data[0],ie(N,J))))}),this.parse=function(X,C,L){var U=I.quoteChar||'"',U=(I.newline||(I.newline=this.guessLineEndings(X,U)),B=!1,I.delimiter?A(I.delimiter)&&(I.delimiter=I.delimiter(X),N.meta.delimiter=I.delimiter):((U=(($,H,Q,G,F)=>{var ne,he,ae,pe;F=F||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var Ee=0;Ee<F.length;Ee++){for(var we,Ie=F[Ee],ve=0,Ve=0,Fe=0,De=(ae=void 0,new T({comments:G,delimiter:Ie,newline:H,preview:10}).parse($)),Be=0;Be<De.data.length;Be++)Q&&D(De.data[Be])?Fe++:(we=De.data[Be].length,Ve+=we,ae===void 0?ae=we:0<we&&(ve+=Math.abs(we-ae),ae=we));0<De.data.length&&(Ve/=De.data.length-Fe),(he===void 0||ve<=he)&&(pe===void 0||pe<Ve)&&1.99<Ve&&(he=ve,ne=Ie,pe=Ve)}return{successful:!!(I.delimiter=ne),bestDelimiter:ne}})(X,I.newline,I.skipEmptyLines,I.comments,I.delimitersToGuess)).successful?I.delimiter=U.bestDelimiter:(B=!0,I.delimiter=f.DefaultDelimiter),N.meta.delimiter=I.delimiter),S(I));return I.preview&&I.header&&U.preview++,P=X,j=new T(U),N=j.parse(P,C,L),V(),q?{meta:{paused:!0}}:N||{meta:{paused:!1}}},this.paused=function(){return q},this.pause=function(){q=!0,j.abort(),P=A(I.chunk)?"":P.substring(j.getCharIndex())},this.resume=function(){J.streamer._halted?(q=!1,J.streamer.parseChunk(P,!0)):setTimeout(J.resume,3)},this.aborted=function(){return fe},this.abort=function(){fe=!0,j.abort(),N.meta.aborted=!0,A(I.complete)&&I.complete(N),P=""},this.guessLineEndings=function($,U){$=$.substring(0,1048576);var U=new RegExp(v(U)+"([^]*?)"+v(U),"gm"),L=($=$.replace(U,"")).split("\r"),U=$.split(`
`),$=1<U.length&&U[0].length<L[0].length;if(L.length===1||$)return`
`;for(var H=0,Q=0;Q<L.length;Q++)L[Q][0]===`
`&&H++;return H>=L.length/2?`\r
`:"\r"}}function v(I){return I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(I){var P=(I=I||{}).delimiter,j=I.newline,B=I.comments,ie=I.step,oe=I.preview,le=I.fastMode,de=null,K=!1,J=I.quoteChar==null?'"':I.quoteChar,se=J;if(I.escapeChar!==void 0&&(se=I.escapeChar),(typeof P!="string"||-1<f.BAD_DELIMITERS.indexOf(P))&&(P=","),B===P)throw new Error("Comment character same as delimiter");B===!0?B="#":(typeof B!="string"||-1<f.BAD_DELIMITERS.indexOf(B))&&(B=!1),j!==`
`&&j!=="\r"&&j!==`\r
`&&(j=`
`);var ue=0,q=!1;this.parse=function(fe,Z,N){if(typeof fe!="string")throw new Error("Input must be a string");var D=fe.length,V=P.length,W=j.length,te=B.length,X=A(ie),C=[],L=[],U=[],$=ue=0;if(!fe)return ve();if(le||le!==!1&&fe.indexOf(J)===-1){for(var H=fe.split(j),Q=0;Q<H.length;Q++){if(U=H[Q],ue+=U.length,Q!==H.length-1)ue+=j.length;else if(N)return ve();if(!B||U.substring(0,te)!==B){if(X){if(C=[],pe(U.split(P)),Ve(),q)return ve()}else pe(U.split(P));if(oe&&oe<=Q)return C=C.slice(0,oe),ve(!0)}}return ve()}for(var G=fe.indexOf(P,ue),F=fe.indexOf(j,ue),ne=new RegExp(v(se)+v(J),"g"),he=fe.indexOf(J,ue);;)if(fe[ue]===J)for(he=ue,ue++;;){if((he=fe.indexOf(J,he+1))===-1)return N||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:C.length,index:ue}),we();if(he===D-1)return we(fe.substring(ue,he).replace(ne,J));if(J===se&&fe[he+1]===se)he++;else if(J===se||he===0||fe[he-1]!==se){G!==-1&&G<he+1&&(G=fe.indexOf(P,he+1));var ae=Ee((F=F!==-1&&F<he+1?fe.indexOf(j,he+1):F)===-1?G:Math.min(G,F));if(fe.substr(he+1+ae,V)===P){U.push(fe.substring(ue,he).replace(ne,J)),fe[ue=he+1+ae+V]!==J&&(he=fe.indexOf(J,ue)),G=fe.indexOf(P,ue),F=fe.indexOf(j,ue);break}if(ae=Ee(F),fe.substring(he+1+ae,he+1+ae+W)===j){if(U.push(fe.substring(ue,he).replace(ne,J)),Ie(he+1+ae+W),G=fe.indexOf(P,ue),he=fe.indexOf(J,ue),X&&(Ve(),q))return ve();if(oe&&C.length>=oe)return ve(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:C.length,index:ue}),he++}}else if(B&&U.length===0&&fe.substring(ue,ue+te)===B){if(F===-1)return ve();ue=F+W,F=fe.indexOf(j,ue),G=fe.indexOf(P,ue)}else if(G!==-1&&(G<F||F===-1))U.push(fe.substring(ue,G)),ue=G+V,G=fe.indexOf(P,ue);else{if(F===-1)break;if(U.push(fe.substring(ue,F)),Ie(F+W),X&&(Ve(),q))return ve();if(oe&&C.length>=oe)return ve(!0)}return we();function pe(Fe){C.push(Fe),$=ue}function Ee(Fe){var De=0;return De=Fe!==-1&&(Fe=fe.substring(he+1,Fe))&&Fe.trim()===""?Fe.length:De}function we(Fe){return N||(Fe===void 0&&(Fe=fe.substring(ue)),U.push(Fe),ue=D,pe(U),X&&Ve()),ve()}function Ie(Fe){ue=Fe,pe(U),U=[],F=fe.indexOf(j,ue)}function ve(Fe){if(I.header&&!Z&&C.length&&!K){var De=C[0],Be={},ut=new Set(De);let yt=!1;for(let ct=0;ct<De.length;ct++){let it=De[ct];if(Be[it=A(I.transformHeader)?I.transformHeader(it,ct):it]){let nt,We=Be[it];for(;nt=it+"_"+We,We++,ut.has(nt););ut.add(nt),De[ct]=nt,Be[it]++,yt=!0,(de=de===null?{}:de)[nt]=it}else Be[it]=1,De[ct]=it;ut.add(it)}yt&&console.warn("Duplicate headers found and renamed."),K=!0}return{data:C,errors:L,meta:{delimiter:P,linebreak:j,aborted:q,truncated:!!Fe,cursor:$+(Z||0),renamedHeaders:de}}}function Ve(){ie(ve()),C=[],L=[]}},this.abort=function(){q=!0},this.getCharIndex=function(){return ue}}function R(I){var P=I.data,j=h[P.workerId],B=!1;if(P.error)j.userError(P.error,P.file);else if(P.results&&P.results.data){var ie={abort:function(){B=!0,k(P.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(A(j.userStep)){for(var oe=0;oe<P.results.data.length&&(j.userStep({data:P.results.data[oe],errors:P.results.errors,meta:P.results.meta},ie),!B);oe++);delete P.results}else A(j.userChunk)&&(j.userChunk(P.results,ie,P.file),delete P.results)}P.finished&&!B&&k(P.workerId,P.results)}function k(I,P){var j=h[I];A(j.userComplete)&&j.userComplete(P),j.terminate(),delete h[I]}function x(){throw new Error("Not implemented.")}function S(I){if(typeof I!="object"||I===null)return I;var P,j=Array.isArray(I)?[]:{};for(P in I)j[P]=S(I[P]);return j}function O(I,P){return function(){I.apply(P,arguments)}}function A(I){return typeof I=="function"}return f.parse=function(I,P){var j=(P=P||{}).dynamicTyping||!1;if(A(j)&&(P.dynamicTypingFunction=j,j={}),P.dynamicTyping=j,P.transform=!!A(P.transform)&&P.transform,!P.worker||!f.WORKERS_SUPPORTED)return j=null,f.NODE_STREAM_INPUT,typeof I=="string"?(I=(B=>B.charCodeAt(0)!==65279?B:B.slice(1))(I),j=new(P.download?b:w)(P)):I.readable===!0&&A(I.read)&&A(I.on)?j=new y(P):(r.File&&I instanceof File||I instanceof Object)&&(j=new E(P)),j.stream(I);(j=(()=>{var B;return!!f.WORKERS_SUPPORTED&&(B=(()=>{var ie=r.URL||r.webkitURL||null,oe=n.toString();return f.BLOB_URL||(f.BLOB_URL=ie.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",oe,")();"],{type:"text/javascript"})))})(),(B=new r.Worker(B)).onmessage=R,B.id=d++,h[B.id]=B)})()).userStep=P.step,j.userChunk=P.chunk,j.userComplete=P.complete,j.userError=P.error,P.step=A(P.step),P.chunk=A(P.chunk),P.complete=A(P.complete),P.error=A(P.error),delete P.worker,j.postMessage({input:I,config:P,workerId:j.id})},f.unparse=function(I,P){var j=!1,B=!0,ie=",",oe=`\r
`,le='"',de=le+le,K=!1,J=null,se=!1,ue=((()=>{if(typeof P=="object"){if(typeof P.delimiter!="string"||f.BAD_DELIMITERS.filter(function(Z){return P.delimiter.indexOf(Z)!==-1}).length||(ie=P.delimiter),typeof P.quotes!="boolean"&&typeof P.quotes!="function"&&!Array.isArray(P.quotes)||(j=P.quotes),typeof P.skipEmptyLines!="boolean"&&typeof P.skipEmptyLines!="string"||(K=P.skipEmptyLines),typeof P.newline=="string"&&(oe=P.newline),typeof P.quoteChar=="string"&&(le=P.quoteChar),typeof P.header=="boolean"&&(B=P.header),Array.isArray(P.columns)){if(P.columns.length===0)throw new Error("Option columns is empty");J=P.columns}P.escapeChar!==void 0&&(de=P.escapeChar+le),P.escapeFormulae instanceof RegExp?se=P.escapeFormulae:typeof P.escapeFormulae=="boolean"&&P.escapeFormulae&&(se=/^[=+\-@\t\r].*$/)}})(),new RegExp(v(le),"g"));if(typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(I)){if(!I.length||Array.isArray(I[0]))return q(null,I,K);if(typeof I[0]=="object")return q(J||Object.keys(I[0]),I,K)}else if(typeof I=="object")return typeof I.data=="string"&&(I.data=JSON.parse(I.data)),Array.isArray(I.data)&&(I.fields||(I.fields=I.meta&&I.meta.fields||J),I.fields||(I.fields=Array.isArray(I.data[0])?I.fields:typeof I.data[0]=="object"?Object.keys(I.data[0]):[]),Array.isArray(I.data[0])||typeof I.data[0]=="object"||(I.data=[I.data])),q(I.fields||[],I.data||[],K);throw new Error("Unable to serialize unrecognized input");function q(Z,N,D){var V="",W=(typeof Z=="string"&&(Z=JSON.parse(Z)),typeof N=="string"&&(N=JSON.parse(N)),Array.isArray(Z)&&0<Z.length),te=!Array.isArray(N[0]);if(W&&B){for(var X=0;X<Z.length;X++)0<X&&(V+=ie),V+=fe(Z[X],X);0<N.length&&(V+=oe)}for(var C=0;C<N.length;C++){var L=(W?Z:N[C]).length,U=!1,$=W?Object.keys(N[C]).length===0:N[C].length===0;if(D&&!W&&(U=D==="greedy"?N[C].join("").trim()==="":N[C].length===1&&N[C][0].length===0),D==="greedy"&&W){for(var H=[],Q=0;Q<L;Q++){var G=te?Z[Q]:Q;H.push(N[C][G])}U=H.join("").trim()===""}if(!U){for(var F=0;F<L;F++){0<F&&!$&&(V+=ie);var ne=W&&te?Z[F]:F;V+=fe(N[C][ne],F)}C<N.length-1&&(!D||0<L&&!$)&&(V+=oe)}}return V}function fe(Z,N){var D,V;return Z==null?"":Z.constructor===Date?JSON.stringify(Z).slice(1,25):(V=!1,se&&typeof Z=="string"&&se.test(Z)&&(Z="'"+Z,V=!0),D=Z.toString().replace(ue,de),(V=V||j===!0||typeof j=="function"&&j(Z,N)||Array.isArray(j)&&j[N]||((W,te)=>{for(var X=0;X<te.length;X++)if(-1<W.indexOf(te[X]))return!0;return!1})(D,f.BAD_DELIMITERS)||-1<D.indexOf(ie)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?le+D+le:D)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!o&&!!r.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=T,f.ParserHandle=g,f.NetworkStreamer=b,f.FileStreamer=E,f.StringStreamer=w,f.ReadableStreamStreamer=y,r.jQuery&&((a=r.jQuery).fn.parse=function(I){var P=I.config||{},j=[];return this.each(function(oe){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var le=0;le<this.files.length;le++)j.push({file:this.files[le],inputElem:this,instanceConfig:a.extend({},P)})}),B(),this;function B(){if(j.length===0)A(I.complete)&&I.complete();else{var oe,le,de,K,J=j[0];if(A(I.before)){var se=I.before(J.file,J.inputElem);if(typeof se=="object"){if(se.action==="abort")return oe="AbortError",le=J.file,de=J.inputElem,K=se.reason,void(A(I.error)&&I.error({name:oe},le,de,K));if(se.action==="skip")return void ie();typeof se.config=="object"&&(J.instanceConfig=a.extend(J.instanceConfig,se.config))}else if(se==="skip")return void ie()}var ue=J.instanceConfig.complete;J.instanceConfig.complete=function(q){A(ue)&&ue(q,J.file,J.inputElem),ie()},f.parse(J.file,J.instanceConfig)}}function ie(){j.splice(0,1),B()}}),u&&(r.onmessage=function(I){I=I.data,f.WORKER_ID===void 0&&I&&(f.WORKER_ID=I.workerId),typeof I.input=="string"?r.postMessage({workerId:f.WORKER_ID,results:f.parse(I.input,I.config),finished:!0}):(r.File&&I.input instanceof File||I.input instanceof Object)&&(I=f.parse(I.input,I.config))&&r.postMessage({workerId:f.WORKER_ID,results:I,finished:!0})}),(b.prototype=Object.create(m.prototype)).constructor=b,(E.prototype=Object.create(m.prototype)).constructor=E,(w.prototype=Object.create(w.prototype)).constructor=w,(y.prototype=Object.create(m.prototype)).constructor=y,f})}(papaparse_min$1)),papaparse_min$1.exports}var papaparse_minExports=requirePapaparse_min();const Papa=getDefaultExportFromCjs(papaparse_minExports);var SchemaType;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(SchemaType||(SchemaType={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ExecutableCodeLanguage;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(ExecutableCodeLanguage||(ExecutableCodeLanguage={}));var Outcome;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Outcome||(Outcome={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const POSSIBLE_ROLES=["user","model","function","system"];var HarmCategory;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmProbability;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var BlockReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(BlockReason||(BlockReason={}));var FinishReason;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(FinishReason||(FinishReason={}));var TaskType;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(TaskType||(TaskType={}));var FunctionCallingMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(FunctionCallingMode||(FunctionCallingMode={}));var DynamicRetrievalMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalMode||(DynamicRetrievalMode={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAIError extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(e,n){super(e),this.response=n}}class GoogleGenerativeAIFetchError extends GoogleGenerativeAIError{constructor(e,n,r,a){super(e),this.status=n,this.statusText=r,this.errorDetails=a}}class GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_BASE_URL="https://generativelanguage.googleapis.com",DEFAULT_API_VERSION="v1beta",PACKAGE_VERSION="0.21.0",PACKAGE_LOG_HEADER="genai-js";var Task;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Task||(Task={}));class RequestUrl{constructor(e,n,r,a,o){this.model=e,this.task=n,this.apiKey=r,this.stream=a,this.requestOptions=o}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||DEFAULT_API_VERSION;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||DEFAULT_BASE_URL}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function getClientHeaders(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`),e.join(" ")}async function getHeaders(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",getClientHeaders(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(a){throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${a.message}`)}for(const[a,o]of r.entries()){if(a==="x-goog-api-key")throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new GoogleGenerativeAIRequestInputError(`Header name ${a} can only be set using the apiClient field`);n.append(a,o)}}return n}async function constructModelRequest(t,e,n,r,a,o){const u=new RequestUrl(t,e,n,r,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},buildFetchOptions(o)),{method:"POST",headers:await getHeaders(u),body:a})}}async function makeModelRequest(t,e,n,r,a,o={},u=fetch){const{url:h,fetchOptions:d}=await constructModelRequest(t,e,n,r,a,o);return makeRequest(h,d,u)}async function makeRequest(t,e,n=fetch){let r;try{r=await n(t,e)}catch(a){handleResponseError(a,t)}return r.ok||await handleResponseNotOk(r,t),r}function handleResponseError(t,e){let n=t;throw t instanceof GoogleGenerativeAIFetchError||t instanceof GoogleGenerativeAIRequestInputError||(n=new GoogleGenerativeAIError(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function handleResponseNotOk(t,e){let n="",r;try{const a=await t.json();n=a.error.message,a.error.details&&(n+=` ${JSON.stringify(a.error.details)}`,r=a.error.details)}catch{}throw new GoogleGenerativeAIFetchError(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function buildFetchOptions(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function addHelpers(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return getText(t)}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),getFunctionCalls(t)[0]}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return getFunctionCalls(t)}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(t)}`,t)},t}function getText(t){var e,n,r,a;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(a=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||a===void 0?void 0:a.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function getFunctionCalls(t){var e,n,r,a;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const u of(a=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||a===void 0?void 0:a.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}const badFinishReasons=[FinishReason.RECITATION,FinishReason.SAFETY,FinishReason.LANGUAGE];function hadBadFinishReason(t){return!!t.finishReason&&badFinishReasons.includes(t.finishReason)}function formatBlockErrorMessage(t){var e,n,r;let a="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)a+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(a+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(a+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const o=t.candidates[0];hadBadFinishReason(o)&&(a+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(a+=`: ${o.finishMessage}`))}return a}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,o=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(E){r[E]&&(a[E]=function(w){return new Promise(function(y,g){o.push([E,w,y,g])>1||h(E,w)})})}function h(E,w){try{d(r[E](w))}catch(y){b(o[0][3],y)}}function d(E){E.value instanceof __await?Promise.resolve(E.value.v).then(f,m):b(o[0][2],E)}function f(E){h("next",E)}function m(E){h("throw",E)}function b(E,w){E(w),o.shift(),o.length&&h(o[0][0],o[0][1])}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const responseLineRE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function processStream(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=getResponseStream(e),[r,a]=n.tee();return{stream:generateResponseSequence(r),response:getResponsePromise(a)}}async function getResponsePromise(t){const e=[],n=t.getReader();for(;;){const{done:r,value:a}=await n.read();if(r)return addHelpers(aggregateResponses(e));e.push(a)}}function generateResponseSequence(t){return __asyncGenerator(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:a}=yield __await(n.read());if(a)break;yield yield __await(addHelpers(r))}})}function getResponseStream(t){const e=t.getReader();return new ReadableStream({start(r){let a="";return o();function o(){return e.read().then(({value:u,done:h})=>{if(h){if(a.trim()){r.error(new GoogleGenerativeAIError("Failed to parse stream"));return}r.close();return}a+=u;let d=a.match(responseLineRE),f;for(;d;){try{f=JSON.parse(d[1])}catch{r.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(f),a=a.substring(d[0].length),d=a.match(responseLineRE)}return o()})}}})}function aggregateResponses(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates)for(const a of r.candidates){const o=a.index;if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:a.index}),n.candidates[o].citationMetadata=a.citationMetadata,n.candidates[o].groundingMetadata=a.groundingMetadata,n.candidates[o].finishReason=a.finishReason,n.candidates[o].finishMessage=a.finishMessage,n.candidates[o].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[o].content||(n.candidates[o].content={role:a.content.role||"user",parts:[]});const u={};for(const h of a.content.parts)h.text&&(u.text=h.text),h.functionCall&&(u.functionCall=h.functionCall),h.executableCode&&(u.executableCode=h.executableCode),h.codeExecutionResult&&(u.codeExecutionResult=h.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[o].content.parts.push(u)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateContentStream(t,e,n,r){const a=await makeModelRequest(e,Task.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return processStream(a)}async function generateContent(t,e,n,r){const o=await(await makeModelRequest(e,Task.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:addHelpers(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function formatSystemInstruction(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function formatNewContent(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return assignRoleToPartsAndValidateSendMessageRequest(e)}function assignRoleToPartsAndValidateSendMessageRequest(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,a=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),a=!0):(e.parts.push(o),r=!0);if(r&&a)throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!a)throw new GoogleGenerativeAIError("No content is provided for sending chat message.");return r?e:n}function formatCountTokensInput(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const a=t.generateContentRequest!=null;if(t.contents){if(a)throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(a)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const o=formatNewContent(t);r.contents=[o]}return{generateContentRequest:r}}function formatGenerateContentInput(t){let e;return t.contents?e=t:e={contents:[formatNewContent(t)]},t.systemInstruction&&(e.systemInstruction=formatSystemInstruction(t.systemInstruction)),e}function formatEmbedContentInput(t){return typeof t=="string"||Array.isArray(t)?{content:formatNewContent(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_PART_FIELDS=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],VALID_PARTS_PER_ROLE={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function validateChatHistory(t){let e=!1;for(const n of t){const{role:r,parts:a}=n;if(!e&&r!=="user")throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${r}`);if(!POSSIBLE_ROLES.includes(r))throw new GoogleGenerativeAIError(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);if(!Array.isArray(a))throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new GoogleGenerativeAIError("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const h of a)for(const d of VALID_PART_FIELDS)d in h&&(o[d]+=1);const u=VALID_PARTS_PER_ROLE[r];for(const h of VALID_PART_FIELDS)if(!u.includes(h)&&o[h]>0)throw new GoogleGenerativeAIError(`Content with role '${r}' can't contain '${h}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SILENT_ERROR="SILENT_ERROR";class ChatSession{constructor(e,n,r,a={}){this.model=n,this.params=r,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(validateChatHistory(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,a,o,u,h,d;await this._sendPromise;const f=formatNewContent(e),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},b=Object.assign(Object.assign({},this._requestOptions),n);let E;return this._sendPromise=this._sendPromise.then(()=>generateContent(this._apiKey,this.model,m,b)).then(w=>{var y;if(w.response.candidates&&w.response.candidates.length>0){this._history.push(f);const g=Object.assign({parts:[],role:"model"},(y=w.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(g)}else{const g=formatBlockErrorMessage(w.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}E=w}),await this._sendPromise,E}async sendMessageStream(e,n={}){var r,a,o,u,h,d;await this._sendPromise;const f=formatNewContent(e),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(h=this.params)===null||h===void 0?void 0:h.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},b=Object.assign(Object.assign({},this._requestOptions),n),E=generateContentStream(this._apiKey,this.model,m,b);return this._sendPromise=this._sendPromise.then(()=>E).catch(w=>{throw new Error(SILENT_ERROR)}).then(w=>w.response).then(w=>{if(w.candidates&&w.candidates.length>0){this._history.push(f);const y=Object.assign({},w.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=formatBlockErrorMessage(w);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(w=>{w.message!==SILENT_ERROR&&console.error(w)}),E}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function countTokens(t,e,n,r){return(await makeModelRequest(e,Task.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function embedContent(t,e,n,r){return(await makeModelRequest(e,Task.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function batchEmbedContents(t,e,n,r){const a=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await makeModelRequest(e,Task.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:a}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GenerativeModel{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=formatSystemInstruction(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const a=formatGenerateContentInput(e),o=Object.assign(Object.assign({},this._requestOptions),n);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},a),o)}async generateContentStream(e,n={}){var r;const a=formatGenerateContentInput(e),o=Object.assign(Object.assign({},this._requestOptions),n);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},a),o)}startChat(e){var n;return new ChatSession(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=formatCountTokensInput(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),n);return countTokens(this.apiKey,this.model,r,a)}async embedContent(e,n={}){const r=formatEmbedContentInput(e),a=Object.assign(Object.assign({},this._requestOptions),n);return embedContent(this.apiKey,this.model,r,a)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return batchEmbedContents(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAI{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");if(!e.model)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const u of a)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){const h=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(h===d)continue}throw new GoogleGenerativeAIRequestInputError(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new GenerativeModel(this.apiKey,o,r)}}var marker$1="vercel.ai.error",symbol$1=Symbol.for(marker$1),_a$1,_AISDKError=class Zf extends Error{constructor({name:e,message:n,cause:r}){super(n),this[_a$1]=!0,this.name=e,this.cause=r}static isInstance(e){return Zf.hasMarker(e,marker$1)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};_a$1=symbol$1;var AISDKError=_AISDKError,name$2="AI_APICallError",marker2$1=`vercel.ai.error.${name$2}`,symbol2$1=Symbol.for(marker2$1),_a2$1,APICallError=class extends AISDKError{constructor({message:t,url:e,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:o,cause:u,isRetryable:h=r!=null&&(r===408||r===409||r===429||r>=500),data:d}){super({name:name$2,message:t,cause:u}),this[_a2$1]=!0,this.url=e,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=o,this.isRetryable=h,this.data=d}static isInstance(t){return AISDKError.hasMarker(t,marker2$1)}};_a2$1=symbol2$1;var name2$1="AI_EmptyResponseBodyError",marker3=`vercel.ai.error.${name2$1}`,symbol3=Symbol.for(marker3),_a3,EmptyResponseBodyError=class extends AISDKError{constructor({message:t="Empty response body"}={}){super({name:name2$1,message:t}),this[_a3]=!0}static isInstance(t){return AISDKError.hasMarker(t,marker3)}};_a3=symbol3;function getErrorMessage$1(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var name3="AI_InvalidArgumentError",marker4$1=`vercel.ai.error.${name3}`,symbol4$1=Symbol.for(marker4$1),_a4$1,InvalidArgumentError$1=class extends AISDKError{constructor({message:e,cause:n,argument:r}){super({name:name3,message:e,cause:n}),this[_a4$1]=!0,this.argument=r}static isInstance(e){return AISDKError.hasMarker(e,marker4$1)}};_a4$1=symbol4$1;var name4$1="AI_InvalidPromptError",marker5$1=`vercel.ai.error.${name4$1}`,symbol5$1=Symbol.for(marker5$1),_a5$1,InvalidPromptError=class extends AISDKError{constructor({prompt:t,message:e,cause:n}){super({name:name4$1,message:`Invalid prompt: ${e}`,cause:n}),this[_a5$1]=!0,this.prompt=t}static isInstance(t){return AISDKError.hasMarker(t,marker5$1)}};_a5$1=symbol5$1;var name5$1="AI_InvalidResponseDataError",marker6$1=`vercel.ai.error.${name5$1}`,symbol6$1=Symbol.for(marker6$1),_a6$1,InvalidResponseDataError=class extends AISDKError{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:name5$1,message:e}),this[_a6$1]=!0,this.data=t}static isInstance(t){return AISDKError.hasMarker(t,marker6$1)}};_a6$1=symbol6$1;var name6$1="AI_JSONParseError",marker7$1=`vercel.ai.error.${name6$1}`,symbol7$1=Symbol.for(marker7$1),_a7$1,JSONParseError=class extends AISDKError{constructor({text:t,cause:e}){super({name:name6$1,message:`JSON parsing failed: Text: ${t}.
Error message: ${getErrorMessage$1(e)}`,cause:e}),this[_a7$1]=!0,this.text=t}static isInstance(t){return AISDKError.hasMarker(t,marker7$1)}};_a7$1=symbol7$1;var name7$1="AI_LoadAPIKeyError",marker8$1=`vercel.ai.error.${name7$1}`,symbol8$1=Symbol.for(marker8$1),_a8$1,LoadAPIKeyError=class extends AISDKError{constructor({message:t}){super({name:name7$1,message:t}),this[_a8$1]=!0}static isInstance(t){return AISDKError.hasMarker(t,marker8$1)}};_a8$1=symbol8$1;var name10$1="AI_NoSuchModelError",marker11$1=`vercel.ai.error.${name10$1}`,symbol11$1=Symbol.for(marker11$1),_a11$1,NoSuchModelError=class extends AISDKError{constructor({errorName:t=name10$1,modelId:e,modelType:n,message:r=`No such ${n}: ${e}`}){super({name:t,message:r}),this[_a11$1]=!0,this.modelId=e,this.modelType=n}static isInstance(t){return AISDKError.hasMarker(t,marker11$1)}};_a11$1=symbol11$1;var name12$1="AI_TypeValidationError",marker13$1=`vercel.ai.error.${name12$1}`,symbol13$1=Symbol.for(marker13$1),_a13$1,_TypeValidationError=class Jl extends AISDKError{constructor({value:e,cause:n}){super({name:name12$1,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${getErrorMessage$1(n)}`,cause:n}),this[_a13$1]=!0,this.value=e}static isInstance(e){return AISDKError.hasMarker(e,marker13$1)}static wrap({value:e,cause:n}){return Jl.isInstance(n)&&n.value===e?n:new Jl({value:e,cause:n})}};_a13$1=symbol13$1;var TypeValidationError=_TypeValidationError,name13$1="AI_UnsupportedFunctionalityError",marker14=`vercel.ai.error.${name13$1}`,symbol14=Symbol.for(marker14),_a14,UnsupportedFunctionalityError=class extends AISDKError{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:name13$1,message:e}),this[_a14]=!0,this.functionality=t}static isInstance(t){return AISDKError.hasMarker(t,marker14)}};_a14=symbol14;let customAlphabet=(t,e=21)=>(n=e)=>{let r="",a=n|0;for(;a--;)r+=t[Math.random()*t.length|0];return r};var secureJsonParse={exports:{}},hasRequiredSecureJsonParse;function requireSecureJsonParse(){if(hasRequiredSecureJsonParse)return secureJsonParse.exports;hasRequiredSecureJsonParse=1;const t=typeof Buffer<"u",e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(h,d,f){f==null&&d!==null&&typeof d=="object"&&(f=d,d=void 0),t&&Buffer.isBuffer(h)&&(h=h.toString()),h&&h.charCodeAt(0)===65279&&(h=h.slice(1));const m=JSON.parse(h,d);if(m===null||typeof m!="object")return m;const b=f&&f.protoAction||"error",E=f&&f.constructorAction||"error";if(b==="ignore"&&E==="ignore")return m;if(b!=="ignore"&&E!=="ignore"){if(e.test(h)===!1&&n.test(h)===!1)return m}else if(b!=="ignore"&&E==="ignore"){if(e.test(h)===!1)return m}else if(n.test(h)===!1)return m;return a(m,{protoAction:b,constructorAction:E,safe:f&&f.safe})}function a(h,{protoAction:d="error",constructorAction:f="error",safe:m}={}){let b=[h];for(;b.length;){const E=b;b=[];for(const w of E){if(d!=="ignore"&&Object.prototype.hasOwnProperty.call(w,"__proto__")){if(m===!0)return null;if(d==="error")throw new SyntaxError("Object contains forbidden prototype property");delete w.__proto__}if(f!=="ignore"&&Object.prototype.hasOwnProperty.call(w,"constructor")&&Object.prototype.hasOwnProperty.call(w.constructor,"prototype")){if(m===!0)return null;if(f==="error")throw new SyntaxError("Object contains forbidden prototype property");delete w.constructor}for(const y in w){const g=w[y];g&&typeof g=="object"&&b.push(g)}}}return h}function o(h,d,f){const m=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(h,d,f)}finally{Error.stackTraceLimit=m}}function u(h,d){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(h,d,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=f}}return secureJsonParse.exports=o,secureJsonParse.exports.default=o,secureJsonParse.exports.parse=o,secureJsonParse.exports.safeParse=u,secureJsonParse.exports.scan=a,secureJsonParse.exports}var secureJsonParseExports=requireSecureJsonParse();const SecureJSON=getDefaultExportFromCjs(secureJsonParseExports);var __defProp$2=Object.defineProperty,__defNormalProp=(t,e,n)=>e in t?__defProp$2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__publicField=(t,e,n)=>__defNormalProp(t,typeof e!="symbol"?e+"":e,n);class ParseError extends Error{constructor(e,n){super(e),__publicField(this,"type"),__publicField(this,"field"),__publicField(this,"value"),__publicField(this,"line"),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function noop(t){}function createParser(t){const{onEvent:e=noop,onError:n=noop,onRetry:r=noop,onComment:a}=t;let o="",u=!0,h,d="",f="";function m(g){const v=u?g.replace(/^\xEF\xBB\xBF/,""):g,[T,R]=splitLines(`${o}${v}`);for(const k of T)b(k);o=R,u=!1}function b(g){if(g===""){w();return}if(g.startsWith(":")){a&&a(g.slice(g.startsWith(": ")?2:1));return}const v=g.indexOf(":");if(v!==-1){const T=g.slice(0,v),R=g[v+1]===" "?2:1,k=g.slice(v+R);E(T,k,g);return}E(g,"",g)}function E(g,v,T){switch(g){case"event":f=v;break;case"data":d=`${d}${v}
`;break;case"id":h=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new ParseError(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:T}));break;default:n(new ParseError(`Unknown field "${g.length>20?`${g.slice(0,20)}`:g}"`,{type:"unknown-field",field:g,value:v,line:T}));break}}function w(){d.length>0&&e({id:h,event:f||void 0,data:d.endsWith(`
`)?d.slice(0,-1):d}),h=void 0,d="",f=""}function y(g={}){o&&g.consume&&b(o),h=void 0,d="",f="",o=""}return{feed:m,reset:y}}function splitLines(t){const e=[];let n="";const r=t.length;for(let a=0;a<r;a++){const o=t[a];o==="\r"&&t[a+1]===`
`?(e.push(n),n="",a++):o==="\r"||o===`
`?(e.push(n),n=""):n+=o}return[e,n]}class EventSourceParserStream extends TransformStream{constructor({onError:e,onRetry:n,onComment:r}={}){let a;super({start(o){a=createParser({onEvent:u=>{o.enqueue(u)},onError(u){e==="terminate"?o.error(u):typeof e=="function"&&e(u)},onRetry:n,onComment:r})},transform(o){a.feed(o)}})}}var define_process_env_default={};function combineHeaders(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function convertAsyncIteratorToReadableStream(t){return new ReadableStream({async pull(e){try{const{value:n,done:r}=await t.next();r?e.close():e.enqueue(n)}catch(n){e.error(n)}},cancel(){}})}async function delay(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}function extractResponseHeaders(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var createIdGenerator=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=customAlphabet(n,e);if(t==null)return a;if(n.includes(r))throw new InvalidArgumentError$1({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return o=>`${t}${r}${a(o)}`},generateId=createIdGenerator();function getErrorMessage(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function removeUndefinedEntries(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}function isAbortError(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function loadApiKey({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new LoadAPIKeyError({message:`${r} API key must be a string.`});if(typeof process>"u")throw new LoadAPIKeyError({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=define_process_env_default[e],t==null)throw new LoadAPIKeyError({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new LoadAPIKeyError({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var validatorSymbol=Symbol.for("vercel.ai.validator");function validator(t){return{[validatorSymbol]:!0,validate:t}}function isValidator(t){return typeof t=="object"&&t!==null&&validatorSymbol in t&&t[validatorSymbol]===!0&&"validate"in t}function asValidator(t){return isValidator(t)?t:zodValidator(t)}function zodValidator(t){return validator(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function validateTypes({value:t,schema:e}){const n=safeValidateTypes({value:t,schema:e});if(!n.success)throw TypeValidationError.wrap({value:t,cause:n.error});return n.value}function safeValidateTypes({value:t,schema:e}){const n=asValidator(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:TypeValidationError.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:TypeValidationError.wrap({value:t,cause:r})}}}function parseJSON({text:t,schema:e}){try{const n=SecureJSON.parse(t);return e==null?n:validateTypes({value:n,schema:e})}catch(n){throw JSONParseError.isInstance(n)||TypeValidationError.isInstance(n)?n:new JSONParseError({text:t,cause:n})}}function safeParseJSON({text:t,schema:e}){try{const n=SecureJSON.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=safeValidateTypes({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:JSONParseError.isInstance(n)?n:new JSONParseError({text:t,cause:n})}}}function isParsableJson(t){try{return SecureJSON.parse(t),!0}catch{return!1}}var getOriginalFetch2=()=>globalThis.fetch,postJsonToApi=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:o,fetch:u})=>postToApi({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:o,fetch:u}),postToApi=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:o,fetch:u=getOriginalFetch2()})=>{try{const h=await u(t,{method:"POST",headers:removeUndefinedEntries(e),body:n.content,signal:o}),d=extractResponseHeaders(h);if(!h.ok){let f;try{f=await a({response:h,url:t,requestBodyValues:n.values})}catch(m){throw isAbortError(m)||APICallError.isInstance(m)?m:new APICallError({message:"Failed to process error response",cause:m,statusCode:h.status,url:t,responseHeaders:d,requestBodyValues:n.values})}throw f.value}try{return await r({response:h,url:t,requestBodyValues:n.values})}catch(f){throw f instanceof Error&&(isAbortError(f)||APICallError.isInstance(f))?f:new APICallError({message:"Failed to process successful response",cause:f,statusCode:h.status,url:t,responseHeaders:d,requestBodyValues:n.values})}}catch(h){if(isAbortError(h))throw h;if(h instanceof TypeError&&h.message==="fetch failed"){const d=h.cause;if(d!=null)throw new APICallError({message:`Cannot connect to API: ${d.message}`,cause:d,url:t,requestBodyValues:n.values,isRetryable:!0})}throw h}},createJsonErrorResponseHandler=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:a,requestBodyValues:o})=>{const u=await r.text(),h=extractResponseHeaders(r);if(u.trim()==="")return{responseHeaders:h,value:new APICallError({message:r.statusText,url:a,requestBodyValues:o,statusCode:r.status,responseHeaders:h,responseBody:u,isRetryable:n==null?void 0:n(r)})};try{const d=parseJSON({text:u,schema:t});return{responseHeaders:h,value:new APICallError({message:e(d),url:a,requestBodyValues:o,statusCode:r.status,responseHeaders:h,responseBody:u,data:d,isRetryable:n==null?void 0:n(r,d)})}}catch{return{responseHeaders:h,value:new APICallError({message:r.statusText,url:a,requestBodyValues:o,statusCode:r.status,responseHeaders:h,responseBody:u,isRetryable:n==null?void 0:n(r)})}}},createEventSourceResponseHandler=t=>async({response:e})=>{const n=extractResponseHeaders(e);if(e.body==null)throw new EmptyResponseBodyError({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new EventSourceParserStream).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(safeParseJSON({text:r,schema:t}))}}))}},createJsonResponseHandler=t=>async({response:e,url:n,requestBodyValues:r})=>{const a=await e.text(),o=safeParseJSON({text:a,schema:t}),u=extractResponseHeaders(e);if(!o.success)throw new APICallError({message:"Invalid JSON response",cause:o.error,statusCode:e.status,responseHeaders:u,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:u,value:o.value,rawValue:o.rawValue}},{btoa:btoa$1,atob:atob$1}=globalThis;function convertBase64ToUint8Array(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=atob$1(e);return Uint8Array.from(n,r=>r.codePointAt(0))}function convertUint8ArrayToBase64(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return btoa$1(e)}function withoutTrailingSlash(t){return t==null?void 0:t.replace(/\/$/,"")}var util;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function n(a){throw new Error}t.assertNever=n,t.arrayToEnum=a=>{const o={};for(const u of a)o[u]=u;return o},t.getValidEnumValues=a=>{const o=t.objectKeys(a).filter(h=>typeof a[a[h]]!="number"),u={};for(const h of o)u[h]=a[h];return t.objectValues(u)},t.objectValues=a=>t.objectKeys(a).map(function(o){return a[o]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const o=[];for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&o.push(u);return o},t.find=(a,o)=>{for(const u of a)if(o(u))return u},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,o=" | "){return a.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(a,o)=>typeof o=="bigint"?o.toString():o})(util||(util={}));var objectUtil;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=t=>{switch(typeof t){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(t)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(t)?ZodParsedType.array:t===null?ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?ZodParsedType.map:typeof Set<"u"&&t instanceof Set?ZodParsedType.set:typeof Date<"u"&&t instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},a=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(a);else if(u.code==="invalid_return_type")a(u.returnTypeError);else if(u.code==="invalid_arguments")a(u.argumentsError);else if(u.path.length===0)r._errors.push(n(u));else{let h=r,d=0;for(;d<u.path.length;){const f=u.path[d];d===u.path.length-1?(h[f]=h[f]||{_errors:[]},h[f]._errors.push(n(u))):h[f]=h[f]||{_errors:[]},h=h[f],d++}}};return a(this),r}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(e(a))):r.push(e(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ZodError.create=t=>new ZodError(t);const errorMap=(t,e)=>{let n;switch(t.code){case ZodIssueCode.invalid_type:t.received===ZodParsedType.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${util.joinValues(t.keys,", ")}`;break;case ZodIssueCode.invalid_union:n="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${util.joinValues(t.options)}`;break;case ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${util.joinValues(t.options)}, received '${t.received}'`;break;case ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case ZodIssueCode.invalid_date:n="Invalid date";break;case ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:util.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ZodIssueCode.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ZodIssueCode.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ZodIssueCode.custom:n="Invalid input";break;case ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ZodIssueCode.not_finite:n="Number must be finite";break;default:n=e.defaultError,util.assertNever(t)}return{message:n}};let overrideErrorMap=errorMap;function setErrorMap(t){overrideErrorMap=t}function getErrorMap(){return overrideErrorMap}const makeIssue=t=>{const{data:e,path:n,errorMaps:r,issueData:a}=t,o=[...n,...a.path||[]],u={...a,path:o};if(a.message!==void 0)return{...a,path:o,message:a.message};let h="";const d=r.filter(f=>!!f).slice().reverse();for(const f of d)h=f(u,{data:e,defaultError:h}).message;return{...a,path:o,message:h}},EMPTY_PATH=[];function addIssueToContext(t,e){const n=getErrorMap(),r=makeIssue({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===errorMap?void 0:errorMap].filter(a=>!!a)});t.common.issues.push(r)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const a of n){if(a.status==="aborted")return INVALID;a.status==="dirty"&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const a of n){const o=await a.key,u=await a.value;r.push({key:o,value:u})}return ParseStatus.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const a of n){const{key:o,value:u}=a;if(o.status==="aborted"||u.status==="aborted")return INVALID;o.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof u.value<"u"||a.alwaysSet)&&(r[o.value]=u.value)}return{status:e.value,value:r}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=t=>({status:"dirty",value:t}),OK=t=>({status:"valid",value:t}),isAborted=t=>t.status==="aborted",isDirty=t=>t.status==="dirty",isValid=t=>t.status==="valid",isAsync=t=>typeof Promise<"u"&&t instanceof Promise;function __classPrivateFieldGet(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function __classPrivateFieldSet(t,e,n,r,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,n,r,a){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(t,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ZodError(t.common.issues);return this._error=n,this._error}}};function processCreateParams(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:a}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(u,h)=>{var d,f;const{message:m}=t;return u.code==="invalid_enum_value"?{message:m??h.defaultError}:typeof h.data>"u"?{message:(d=m??r)!==null&&d!==void 0?d:h.defaultError}:u.code!=="invalid_type"?{message:h.defaultError}:{message:(f=m??n)!==null&&f!==void 0?f:h.defaultError}},description:a}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(isAsync(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},o=this._parseSync({data:e,path:a.path,parent:a});return handleResult(a,o)}"~validate"(e){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:a});return isValid(o)?{value:o.value}:{issues:a.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then(o=>isValid(o)?{value:o.value}:{issues:a.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},a=this._parse({data:e,path:r.path,parent:r}),o=await(isAsync(a)?a:Promise.resolve(a));return handleResult(r,o)}refine(e,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,o)=>{const u=e(a),h=()=>o.addIssue({code:ZodIssueCode.custom,...r(a)});return typeof Promise<"u"&&u instanceof Promise?u.then(d=>d?!0:(h(),!1)):u?!0:(h(),!1)})}refinement(e,n){return this._refinement((r,a)=>e(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:n,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:n,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex$1;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(t){return new RegExp(`^${timeRegexSource(t)}$`)}function datetimeRegex(t){let e=`${dateRegexSource}T${timeRegexSource(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(t,e){return!!((e==="v4"||!e)&&ipv4Regex.test(t)||(e==="v6"||!e)&&ipv6Regex.test(t))}function isValidJWT(t,e){if(!jwtRegex.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||e&&a.alg!==e)}catch{return!1}}function isValidCidr(t,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(t)||(e==="v6"||!e)&&ipv6CidrRegex.test(t))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:o.parsedType}),INVALID}const r=new ParseStatus;let a;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const u=e.data.length>o.value,h=e.data.length<o.value;(u||h)&&(a=this._getOrReturnCtx(e,a),u?addIssueToContext(a,{code:ZodIssueCode.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):h&&addIssueToContext(a,{code:ZodIssueCode.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")emailRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"email",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")emojiRegex$1||(emojiRegex$1=new RegExp(_emojiRegex,"u")),emojiRegex$1.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"emoji",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")uuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"uuid",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")nanoidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")cuidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")cuid2Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")ulidRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ulid",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"url",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"regex",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?datetimeRegex(o).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?dateRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?timeRegex(o).test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?durationRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"duration",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?isValidIP(e.data,o.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"ip",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?isValidJWT(e.data,o.alg)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"jwt",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?isValidCidr(e.data,o.version)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"cidr",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?base64Regex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"base64",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?base64urlRegex.test(e.data)||(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{validation:"base64url",code:ZodIssueCode.invalid_string,message:o.message}),r.dirty()):util.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(a=>e.test(a),{validation:n,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(r)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...errorUtil.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(n)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodString.create=t=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(t)})};function floatSafeRemainder(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,a=n>r?n:r,o=parseInt(t.toFixed(a).replace(".","")),u=parseInt(e.toFixed(a).replace(".",""));return o%u/Math.pow(10,a)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:o.parsedType}),INVALID}let r;const a=new ParseStatus;for(const o of this._def.checks)o.kind==="int"?util.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?floatSafeRemainder(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.not_finite,message:o.message}),a.dirty()):util.assertNever(o);return{status:a.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,r,a){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:errorUtil.toString(a)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ZodNumber.create=t=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...processCreateParams(t)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let r;const a=new ParseStatus;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):util.assertNever(o);return{status:a.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:n.parsedType}),INVALID}gte(e,n){return this.setLimit("min",e,!0,errorUtil.toString(n))}gt(e,n){return this.setLimit("min",e,!1,errorUtil.toString(n))}lte(e,n){return this.setLimit("max",e,!0,errorUtil.toString(n))}lt(e,n){return this.setLimit("max",e,!1,errorUtil.toString(n))}setLimit(e,n,r,a){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:errorUtil.toString(a)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ZodBigInt.create=t=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(t)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:r.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=t=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...processCreateParams(t)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:o.parsedType}),INVALID}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return addIssueToContext(o,{code:ZodIssueCode.invalid_date}),INVALID}const r=new ParseStatus;let a;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(a=this._getOrReturnCtx(e,a),addIssueToContext(a,{code:ZodIssueCode.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):util.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ZodDate.create=t=>new ZodDate({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(t)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:r.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=t=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(t)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:r.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=t=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(t)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:r.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=t=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(t)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=t=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(t)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=t=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(t)});class ZodNever extends ZodType{_parse(e){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:n.parsedType}),INVALID}}ZodNever.create=t=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(t)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:r.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=t=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(t)});class ZodArray extends ZodType{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),a=this._def;if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(a.exactLength!==null){const u=n.data.length>a.exactLength.value,h=n.data.length<a.exactLength.value;(u||h)&&(addIssueToContext(n,{code:u?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:h?a.exactLength.value:void 0,maximum:u?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((u,h)=>a.type._parseAsync(new ParseInputLazyPath(n,u,n.path,h)))).then(u=>ParseStatus.mergeArray(r,u));const o=[...n.data].map((u,h)=>a.type._parseSync(new ParseInputLazyPath(n,u,n.path,h)));return ParseStatus.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(n)}})}length(e,n){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(n)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(t,e)=>new ZodArray({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(t){if(t instanceof ZodObject){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ZodOptional.create(deepPartialify(r))}return new ZodObject({...t._def,shape:()=>e})}else return t instanceof ZodArray?new ZodArray({...t._def,type:deepPartialify(t.element)}):t instanceof ZodOptional?ZodOptional.create(deepPartialify(t.unwrap())):t instanceof ZodNullable?ZodNullable.create(deepPartialify(t.unwrap())):t instanceof ZodTuple?ZodTuple.create(t.items.map(e=>deepPartialify(e))):t}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=util.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const f=this._getOrReturnCtx(e);return addIssueToContext(f,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:f.parsedType}),INVALID}const{status:r,ctx:a}=this._processInputParams(e),{shape:o,keys:u}=this._getCached(),h=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const f in a.data)u.includes(f)||h.push(f);const d=[];for(const f of u){const m=o[f],b=a.data[f];d.push({key:{status:"valid",value:f},value:m._parse(new ParseInputLazyPath(a,b,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof ZodNever){const f=this._def.unknownKeys;if(f==="passthrough")for(const m of h)d.push({key:{status:"valid",value:m},value:{status:"valid",value:a.data[m]}});else if(f==="strict")h.length>0&&(addIssueToContext(a,{code:ZodIssueCode.unrecognized_keys,keys:h}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const m of h){const b=a.data[m];d.push({key:{status:"valid",value:m},value:f._parse(new ParseInputLazyPath(a,b,a.path,m)),alwaysSet:m in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const m of d){const b=await m.key,E=await m.value;f.push({key:b,value:E,alwaysSet:m.alwaysSet})}return f}).then(f=>ParseStatus.mergeObjectSync(r,f)):ParseStatus.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var a,o,u,h;const d=(u=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,n,r).message)!==null&&u!==void 0?u:r.defaultError;return n.code==="unrecognized_keys"?{message:(h=errorUtil.errToObj(e).message)!==null&&h!==void 0?h:d}:{message:d}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const n={};return util.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ZodObject({...this._def,shape:()=>n})}omit(e){const n={};return util.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ZodObject({...this._def,shape:()=>n})}deepPartial(){return deepPartialify(this)}partial(e){const n={};return util.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];e&&!e[r]?n[r]=a:n[r]=a.optional()}),new ZodObject({...this._def,shape:()=>n})}required(e){const n={};return util.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof ZodOptional;)o=o._def.innerType;n[r]=o}}),new ZodObject({...this._def,shape:()=>n})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(t,e)=>new ZodObject({shape:t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function a(o){for(const h of o)if(h.result.status==="valid")return h.result;for(const h of o)if(h.result.status==="dirty")return n.common.issues.push(...h.ctx.common.issues),h.result;const u=o.map(h=>new ZodError(h.ctx.common.issues));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:u}),INVALID}if(n.common.async)return Promise.all(r.map(async o=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(a);{let o;const u=[];for(const d of r){const f={...n,common:{...n.common,issues:[]},parent:null},m=d._parseSync({data:n.data,path:n.path,parent:f});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:f}),f.common.issues.length&&u.push(f.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const h=u.map(d=>new ZodError(d));return addIssueToContext(n,{code:ZodIssueCode.invalid_union,unionErrors:h}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(t,e)=>new ZodUnion({options:t,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=t=>t instanceof ZodLazy?getDiscriminator(t.schema):t instanceof ZodEffects?getDiscriminator(t.innerType()):t instanceof ZodLiteral?[t.value]:t instanceof ZodEnum?t.options:t instanceof ZodNativeEnum?util.objectValues(t.enum):t instanceof ZodDefault?getDiscriminator(t._def.innerType):t instanceof ZodUndefined?[void 0]:t instanceof ZodNull?[null]:t instanceof ZodOptional?[void 0,...getDiscriminator(t.unwrap())]:t instanceof ZodNullable?[null,...getDiscriminator(t.unwrap())]:t instanceof ZodBranded||t instanceof ZodReadonly?getDiscriminator(t.unwrap()):t instanceof ZodCatch?getDiscriminator(t._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const r=this.discriminator,a=n.data[r],o=this.optionsMap.get(a);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(addIssueToContext(n,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const a=new Map;for(const o of n){const u=getDiscriminator(o.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const h of u){if(a.has(h))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(h)}`);a.set(h,o)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:a,...processCreateParams(r)})}}function mergeValues(t,e){const n=getParsedType(t),r=getParsedType(e);if(t===e)return{valid:!0,data:t};if(n===ZodParsedType.object&&r===ZodParsedType.object){const a=util.objectKeys(e),o=util.objectKeys(t).filter(h=>a.indexOf(h)!==-1),u={...t,...e};for(const h of o){const d=mergeValues(t[h],e[h]);if(!d.valid)return{valid:!1};u[h]=d.data}return{valid:!0,data:u}}else if(n===ZodParsedType.array&&r===ZodParsedType.array){if(t.length!==e.length)return{valid:!1};const a=[];for(let o=0;o<t.length;o++){const u=t[o],h=e[o],d=mergeValues(u,h);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return n===ZodParsedType.date&&r===ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=(o,u)=>{if(isAborted(o)||isAborted(u))return INVALID;const h=mergeValues(o.value,u.value);return h.valid?((isDirty(o)||isDirty(u))&&n.dirty(),{status:n.value,value:h.data}):(addIssueToContext(r,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,u])=>a(o,u)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ZodIntersection.create=(t,e,n)=>new ZodIntersection({left:t,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(n)});class ZodTuple extends ZodType{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(r.data.length<this._def.items.length)return addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&r.data.length>this._def.items.length&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((u,h)=>{const d=this._def.items[h]||this._def.rest;return d?d._parse(new ParseInputLazyPath(r,u,r.path,h)):null}).filter(u=>!!u);return r.common.async?Promise.all(o).then(u=>ParseStatus.mergeArray(n,u)):ParseStatus.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:t,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.object)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r.parsedType}),INVALID;const a=[],o=this._def.keyType,u=this._def.valueType;for(const h in r.data)a.push({key:o._parse(new ParseInputLazyPath(r,h,r.path,h)),value:u._parse(new ParseInputLazyPath(r,r.data[h],r.path,h)),alwaysSet:h in r.data});return r.common.async?ParseStatus.mergeObjectAsync(n,a):ParseStatus.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ZodType?new ZodRecord({keyType:e,valueType:n,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.map)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:r.parsedType}),INVALID;const a=this._def.keyType,o=this._def.valueType,u=[...r.data.entries()].map(([h,d],f)=>({key:a._parse(new ParseInputLazyPath(r,h,r.path,[f,"key"])),value:o._parse(new ParseInputLazyPath(r,d,r.path,[f,"value"]))}));if(r.common.async){const h=new Map;return Promise.resolve().then(async()=>{for(const d of u){const f=await d.key,m=await d.value;if(f.status==="aborted"||m.status==="aborted")return INVALID;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),h.set(f.value,m.value)}return{status:n.value,value:h}})}else{const h=new Map;for(const d of u){const f=d.key,m=d.value;if(f.status==="aborted"||m.status==="aborted")return INVALID;(f.status==="dirty"||m.status==="dirty")&&n.dirty(),h.set(f.value,m.value)}return{status:n.value,value:h}}}}ZodMap.create=(t,e,n)=>new ZodMap({valueType:e,keyType:t,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(n)});class ZodSet extends ZodType{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.set)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:r.parsedType}),INVALID;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const o=this._def.valueType;function u(d){const f=new Set;for(const m of d){if(m.status==="aborted")return INVALID;m.status==="dirty"&&n.dirty(),f.add(m.value)}return{status:n.value,value:f}}const h=[...r.data.values()].map((d,f)=>o._parse(new ParseInputLazyPath(r,d,r.path,f)));return r.common.async?Promise.all(h).then(d=>u(d)):u(h)}min(e,n){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(n)}})}max(e,n){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ZodSet.create=(t,e)=>new ZodSet({valueType:t,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.function)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:n.parsedType}),INVALID;function r(h,d){return makeIssue({data:h,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:d}})}function a(h,d){return makeIssue({data:h,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(f=>!!f),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:d}})}const o={errorMap:n.common.contextualErrorMap},u=n.data;if(this._def.returns instanceof ZodPromise){const h=this;return OK(async function(...d){const f=new ZodError([]),m=await h._def.args.parseAsync(d,o).catch(w=>{throw f.addIssue(r(d,w)),f}),b=await Reflect.apply(u,this,m);return await h._def.returns._def.type.parseAsync(b,o).catch(w=>{throw f.addIssue(a(b,w)),f})})}else{const h=this;return OK(function(...d){const f=h._def.args.safeParse(d,o);if(!f.success)throw new ZodError([r(d,f.error)]);const m=Reflect.apply(u,this,f.data),b=h._def.returns.safeParse(m,o);if(!b.success)throw new ZodError([a(m,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:n||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(r)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZodLazy.create=(t,e)=>new ZodLazy({getter:t,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(t,e)=>new ZodLiteral({value:t,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(t,e){return new ZodEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(n,{expected:util.joinValues(r),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:r}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return ZodEnum.create(e,{...this._def,...n})}exclude(e,n=this._def){return ZodEnum.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const n=util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ZodParsedType.string&&r.parsedType!==ZodParsedType.number){const a=util.objectValues(n);return addIssueToContext(r,{expected:util.joinValues(a),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const a=util.objectValues(n);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:a}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(t,e)=>new ZodNativeEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.promise&&n.common.async===!1)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:n.parsedType}),INVALID;const r=n.parsedType===ZodParsedType.promise?n.data:Promise.resolve(n.data);return OK(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ZodPromise.create=(t,e)=>new ZodPromise({type:t,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),a=this._def.effect||null,o={addIssue:u=>{addIssueToContext(r,u),u.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){const u=a.transform(r.data,o);if(r.common.async)return Promise.resolve(u).then(async h=>{if(n.value==="aborted")return INVALID;const d=await this._def.schema._parseAsync({data:h,path:r.path,parent:r});return d.status==="aborted"?INVALID:d.status==="dirty"||n.value==="dirty"?DIRTY(d.value):d});{if(n.value==="aborted")return INVALID;const h=this._def.schema._parseSync({data:u,path:r.path,parent:r});return h.status==="aborted"?INVALID:h.status==="dirty"||n.value==="dirty"?DIRTY(h.value):h}}if(a.type==="refinement"){const u=h=>{const d=a.refinement(h,o);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return h};if(r.common.async===!1){const h=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return h.status==="aborted"?INVALID:(h.status==="dirty"&&n.dirty(),u(h.value),{status:n.value,value:h.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(h=>h.status==="aborted"?INVALID:(h.status==="dirty"&&n.dirty(),u(h.value).then(()=>({status:n.value,value:h.value}))))}if(a.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!isValid(u))return u;const h=a.transform(u.value,o);if(h instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:h}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>isValid(u)?Promise.resolve(a.transform(u.value,o)).then(h=>({status:n.value,value:h})):u);util.assertNever(a)}}ZodEffects.create=(t,e,n)=>new ZodEffects({schema:t,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(n)});ZodEffects.createWithPreprocess=(t,e,n)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:t},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(n)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(t,e)=>new ZodOptional({innerType:t,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(t,e)=>new ZodNullable({innerType:t,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ZodDefault.create=(t,e)=>new ZodDefault({innerType:t,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return isAsync(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(t,e)=>new ZodCatch({innerType:t,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:r.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=t=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(t)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?INVALID:o.status==="dirty"?(n.dirty(),DIRTY(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?INVALID:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(e,n){return new ZodPipeline({in:e,out:n,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const n=this._def.innerType._parse(e),r=a=>(isValid(a)&&(a.value=Object.freeze(a.value)),a);return isAsync(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}ZodReadonly.create=(t,e)=>new ZodReadonly({innerType:t,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function custom(t,e={},n){return t?ZodAny.create().superRefine((r,a)=>{var o,u;if(!t(r)){const h=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,d=(u=(o=h.fatal)!==null&&o!==void 0?o:n)!==null&&u!==void 0?u:!0,f=typeof h=="string"?{message:h}:h;a.addIssue({code:"custom",...f,fatal:d})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(t,e={message:`Input not instance of ${t.name}`})=>custom(n=>n instanceof t,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:t=>ZodString.create({...t,coerce:!0}),number:t=>ZodNumber.create({...t,coerce:!0}),boolean:t=>ZodBoolean.create({...t,coerce:!0}),bigint:t=>ZodBigInt.create({...t,coerce:!0}),date:t=>ZodDate.create({...t,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});function getOpenAIMetadata(t){var e,n;return(n=(e=t==null?void 0:t.providerMetadata)==null?void 0:e.openaiCompatible)!=null?n:{}}function convertToOpenAICompatibleChatMessages(t){const e=[];for(const{role:n,content:r,...a}of t){const o=getOpenAIMetadata({...a});switch(n){case"system":{e.push({role:"system",content:r,...o});break}case"user":{if(r.length===1&&r[0].type==="text"){e.push({role:"user",content:r[0].text,...getOpenAIMetadata(r[0])});break}e.push({role:"user",content:r.map(u=>{var h;const d=getOpenAIMetadata(u);switch(u.type){case"text":return{type:"text",text:u.text,...d};case"image":return{type:"image_url",image_url:{url:u.image instanceof URL?u.image.toString():`data:${(h=u.mimeType)!=null?h:"image/jpeg"};base64,${convertUint8ArrayToBase64(u.image)}`},...d};case"file":throw new UnsupportedFunctionalityError({functionality:"File content parts in user messages"})}}),...o});break}case"assistant":{let u="";const h=[];for(const d of r){const f=getOpenAIMetadata(d);switch(d.type){case"text":{u+=d.text;break}case"tool-call":{h.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)},...f});break}default:{const m=d;throw new Error(`Unsupported part: ${m}`)}}}e.push({role:"assistant",content:u,tool_calls:h.length>0?h:void 0,...o});break}case"tool":{for(const u of r){const h=getOpenAIMetadata(u);e.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),...h})}break}default:{const u=n;throw new Error(`Unsupported role: ${u}`)}}}return e}function getResponseMetadata({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function mapOpenAICompatibleFinishReason(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var openaiCompatibleErrorDataSchema=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),defaultOpenAICompatibleErrorStructure={errorSchema:openaiCompatibleErrorDataSchema,errorToMessage:t=>t.error.message};function prepareTools({mode:t,structuredOutputs:e}){var n;const r=(n=t.tools)!=null&&n.length?t.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const o=t.toolChoice,u=[];for(const d of r)d.type==="provider-defined"?a.push({type:"unsupported-tool",tool:d}):u.push({type:"function",function:{name:d.name,description:d.description,parameters:d.parameters}});if(o==null)return{tools:u,tool_choice:void 0,toolWarnings:a};const h=o.type;switch(h){case"auto":case"none":case"required":return{tools:u,tool_choice:h,toolWarnings:a};case"tool":return{tools:u,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:a};default:{const d=h;throw new UnsupportedFunctionalityError({functionality:`Unsupported tool choice type: ${d}`})}}}var OpenAICompatibleChatLanguageModel=class{constructor(t,e,n){this.specificationVersion="v1";var r,a;this.modelId=t,this.settings=e,this.config=n;const o=(r=n.errorStructure)!=null?r:defaultOpenAICompatibleErrorStructure;this.chunkSchema=createOpenAICompatibleChatChunkSchema(o.errorSchema),this.failedResponseHandler=createJsonErrorResponseHandler(o),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:a,topK:o,frequencyPenalty:u,presencePenalty:h,providerMetadata:d,stopSequences:f,responseFormat:m,seed:b}){var E,w;const y=t.type,g=[];o!=null&&g.push({type:"unsupported-setting",setting:"topK"}),(m==null?void 0:m.type)==="json"&&m.schema!=null&&!this.supportsStructuredOutputs&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const v={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:u,presence_penalty:h,response_format:(m==null?void 0:m.type)==="json"?this.supportsStructuredOutputs===!0&&m.schema!=null?{type:"json_schema",json_schema:{schema:m.schema,name:(E=m.name)!=null?E:"response",description:m.description}}:{type:"json_object"}:void 0,stop:f,seed:b,...d==null?void 0:d[this.providerOptionsName],messages:convertToOpenAICompatibleChatMessages(e)};switch(y){case"regular":{const{tools:T,tool_choice:R,toolWarnings:k}=prepareTools({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{...v,tools:T,tool_choice:R},warnings:[...g,...k]}}case"object-json":return{args:{...v,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(w=t.name)!=null?w:"response",description:t.description}}:{type:"json_object"}},warnings:g};case"object-tool":return{args:{...v,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:g};default:{const T=y;throw new Error(`Unsupported type: ${T}`)}}}async doGenerate(t){var e,n,r,a,o,u,h,d,f;const{args:m,warnings:b}=this.getArgs({...t}),E=JSON.stringify(m),{responseHeaders:w,value:y,rawValue:g}=await postJsonToApi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:combineHeaders(this.config.headers(),t.headers),body:m,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:createJsonResponseHandler(OpenAICompatibleChatResponseSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:v,...T}=m,R=y.choices[0],k=(n=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:n.call(e,{parsedBody:g});return{text:(r=R.message.content)!=null?r:void 0,reasoning:(a=R.message.reasoning_content)!=null?a:void 0,toolCalls:(o=R.message.tool_calls)==null?void 0:o.map(x=>{var S;return{toolCallType:"function",toolCallId:(S=x.id)!=null?S:generateId(),toolName:x.function.name,args:x.function.arguments}}),finishReason:mapOpenAICompatibleFinishReason(R.finish_reason),usage:{promptTokens:(h=(u=y.usage)==null?void 0:u.prompt_tokens)!=null?h:NaN,completionTokens:(f=(d=y.usage)==null?void 0:d.completion_tokens)!=null?f:NaN},...k&&{providerMetadata:k},rawCall:{rawPrompt:v,rawSettings:T},rawResponse:{headers:w},response:getResponseMetadata(y),warnings:b,request:{body:E}}}async doStream(t){var e;if(this.settings.simulateStreaming){const y=await this.doGenerate(t);return{stream:new ReadableStream({start(v){if(v.enqueue({type:"response-metadata",...y.response}),y.reasoning&&v.enqueue({type:"reasoning",textDelta:y.reasoning}),y.text&&v.enqueue({type:"text-delta",textDelta:y.text}),y.toolCalls)for(const T of y.toolCalls)v.enqueue({type:"tool-call",...T});v.enqueue({type:"finish",finishReason:y.finishReason,usage:y.usage,logprobs:y.logprobs,providerMetadata:y.providerMetadata}),v.close()}}),rawCall:y.rawCall,rawResponse:y.rawResponse,warnings:y.warnings}}const{args:n,warnings:r}=this.getArgs({...t}),a=JSON.stringify({...n,stream:!0}),o=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:u,value:h}=await postJsonToApi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:combineHeaders(this.config.headers(),t.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:d,...f}=n,m=[];let b="unknown",E={promptTokens:void 0,completionTokens:void 0},w=!0;return{stream:h.pipeThrough(new TransformStream({transform(y,g){var v,T,R,k,x,S,O,A,I,P,j,B,ie,oe;if(!y.success){b="error",g.enqueue({type:"error",error:y.error});return}const le=y.value;if(o==null||o.processChunk(y.rawValue),"error"in le){b="error",g.enqueue({type:"error",error:le.error.message});return}w&&(w=!1,g.enqueue({type:"response-metadata",...getResponseMetadata(le)})),le.usage!=null&&(E={promptTokens:(v=le.usage.prompt_tokens)!=null?v:void 0,completionTokens:(T=le.usage.completion_tokens)!=null?T:void 0});const de=le.choices[0];if((de==null?void 0:de.finish_reason)!=null&&(b=mapOpenAICompatibleFinishReason(de.finish_reason)),(de==null?void 0:de.delta)==null)return;const K=de.delta;if(K.reasoning_content!=null&&g.enqueue({type:"reasoning",textDelta:K.reasoning_content}),K.content!=null&&g.enqueue({type:"text-delta",textDelta:K.content}),K.tool_calls!=null)for(const J of K.tool_calls){const se=J.index;if(m[se]==null){if(J.type!=="function")throw new InvalidResponseDataError({data:J,message:"Expected 'function' type."});if(J.id==null)throw new InvalidResponseDataError({data:J,message:"Expected 'id' to be a string."});if(((R=J.function)==null?void 0:R.name)==null)throw new InvalidResponseDataError({data:J,message:"Expected 'function.name' to be a string."});m[se]={id:J.id,type:"function",function:{name:J.function.name,arguments:(k=J.function.arguments)!=null?k:""},hasFinished:!1};const q=m[se];((x=q.function)==null?void 0:x.name)!=null&&((S=q.function)==null?void 0:S.arguments)!=null&&(q.function.arguments.length>0&&g.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:q.id,toolName:q.function.name,argsTextDelta:q.function.arguments}),isParsableJson(q.function.arguments)&&(g.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=q.id)!=null?O:generateId(),toolName:q.function.name,args:q.function.arguments}),q.hasFinished=!0));continue}const ue=m[se];ue.hasFinished||(((A=J.function)==null?void 0:A.arguments)!=null&&(ue.function.arguments+=(P=(I=J.function)==null?void 0:I.arguments)!=null?P:""),g.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:(j=J.function.arguments)!=null?j:""}),((B=ue.function)==null?void 0:B.name)!=null&&((ie=ue.function)==null?void 0:ie.arguments)!=null&&isParsableJson(ue.function.arguments)&&(g.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(oe=ue.id)!=null?oe:generateId(),toolName:ue.function.name,args:ue.function.arguments}),ue.hasFinished=!0))}},flush(y){var g,v;const T=o==null?void 0:o.buildMetadata();y.enqueue({type:"finish",finishReason:b,usage:{promptTokens:(g=E.promptTokens)!=null?g:NaN,completionTokens:(v=E.completionTokens)!=null?v:NaN},...T&&{providerMetadata:T}})}})),rawCall:{rawPrompt:d,rawSettings:f},rawResponse:{headers:u},warnings:r,request:{body:a}}}},OpenAICompatibleChatResponseSchema=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),finish_reason:z.string().nullish()})),usage:z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish()}).nullish()}),createOpenAICompatibleChatChunkSchema=t=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").optional(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),finish_reason:z.string().nullish()})),usage:z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish()}).nullish()}),t]);z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()});z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()});var perplexityMetadataExtractor={extractMetadata:({parsedBody:t})=>{var e,n,r;const a=safeValidateTypes({value:t,schema:perplexityResponseSchema});return a.success?buildPerplexityMetadata((e=a.value.citations)!=null?e:void 0,(n=a.value.images)!=null?n:void 0,(r=a.value.usage)!=null?r:void 0):void 0},createStreamExtractor:()=>{let t,e,n;return{processChunk:r=>{var a,o,u;const h=safeValidateTypes({value:r,schema:perplexityStreamChunkSchema});h.success&&(t=(a=h.value.citations)!=null?a:t,e=(o=h.value.images)!=null?o:e,n=(u=h.value.usage)!=null?u:n)},buildMetadata:()=>buildPerplexityMetadata(t,e,n)}}},buildPerplexityMetadata=(t,e,n)=>{var r,a;return t||e||n?{perplexity:{...t&&{citations:t},...e&&{images:e.map(o=>({imageUrl:o.image_url,originUrl:o.origin_url,height:o.height,width:o.width}))},...n&&{usage:{citationTokens:(r=n.citation_tokens)!=null?r:NaN,numSearchQueries:(a=n.num_search_queries)!=null?a:NaN}}}}:void 0},perplexityCitationSchema=z.array(z.string()),perplexityImageSchema=z.object({image_url:z.string(),origin_url:z.string(),height:z.number(),width:z.number()}),perplexityUsageSchema=z.object({citation_tokens:z.number().nullish(),num_search_queries:z.number().nullish()}),perplexityResponseSchema=z.object({citations:perplexityCitationSchema.nullish(),images:z.array(perplexityImageSchema).nullish(),usage:perplexityUsageSchema.nullish()}),perplexityStreamChunkSchema=z.object({choices:z.array(z.object({finish_reason:z.string().nullish(),delta:z.object({role:z.string(),content:z.string()}).nullish()})).nullish(),citations:perplexityCitationSchema.nullish(),images:z.array(perplexityImageSchema).nullish(),usage:perplexityUsageSchema.nullish()}),perplexityErrorSchema=z.object({code:z.string(),error:z.string()}),perplexityErrorStructure={errorSchema:perplexityErrorSchema,errorToMessage:t=>t.error};function createPerplexity(t={}){var e;const n=withoutTrailingSlash((e=t.baseURL)!=null?e:"https://api.perplexity.ai"),r=()=>({Authorization:`Bearer ${loadApiKey({apiKey:t.apiKey,environmentVariableName:"PERPLEXITY_API_KEY",description:"Perplexity"})}`,...t.headers}),a=(u,h={})=>new OpenAICompatibleChatLanguageModel(u,h,{provider:"perplexity.chat",url:({path:d})=>`${n}${d}`,headers:r,fetch:t.fetch,defaultObjectGenerationMode:"json",errorStructure:perplexityErrorStructure,metadataExtractor:perplexityMetadataExtractor,supportsStructuredOutputs:!0}),o=(u,h)=>a(u,h);return o.languageModel=a,o.chat=a,o.textEmbeddingModel=u=>{throw new NoSuchModelError({modelId:u,modelType:"textEmbeddingModel"})},o}createPerplexity();const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions=t=>typeof t=="string"?{...defaultOptions,name:t}:{...defaultOptions,...t},getRefs=t=>{const e=getDefaultOptions(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function addErrorMessage(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function setResponseValueAndErrors(t,e,n,r,a){t[e]=n,addErrorMessage(t,e,r,a)}function parseAnyDef(){return{}}function parseArrayDef(t,e){var r,a,o;const n={type:"array"};return(r=t.type)!=null&&r._def&&((o=(a=t.type)==null?void 0:a._def)==null?void 0:o.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(n.items=parseDef(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&setResponseValueAndErrors(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&setResponseValueAndErrors(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(setResponseValueAndErrors(n,"minItems",t.exactLength.value,t.exactLength.message,e),setResponseValueAndErrors(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function parseBigintDef(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(n,"minimum",r.value,r.message,e):setResponseValueAndErrors(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),setResponseValueAndErrors(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(n,"maximum",r.value,r.message,e):setResponseValueAndErrors(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),setResponseValueAndErrors(n,"maximum",r.value,r.message,e));break;case"multipleOf":setResponseValueAndErrors(n,"multipleOf",r.value,r.message,e);break}return n}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(t,e){return parseDef(t.type._def,e)}const parseCatchDef=(t,e)=>parseDef(t.innerType._def,e);function parseDateDef(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,o)=>parseDateDef(t,e,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(t,e)}}const integerDateParser=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":setResponseValueAndErrors(n,"minimum",r.value,r.message,e);break;case"max":setResponseValueAndErrors(n,"maximum",r.value,r.message,e);break}return n};function parseDefaultDef(t,e){return{...parseDef(t.innerType._def,e),default:t.defaultValue()}}function parseEffectsDef(t,e){return e.effectStrategy==="input"?parseDef(t.schema._def,e):{}}function parseEnumDef(t){return{type:"string",enum:Array.from(t.values)}}const isJsonSchema7AllOfType=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function parseIntersectionDef(t,e){const n=[parseDef(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),parseDef(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(o=>{if(isJsonSchema7AllOfType(o))a.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let u=o;if("additionalProperties"in o&&o.additionalProperties===!1){const{additionalProperties:h,...d}=o;u=d}else r=void 0;a.push(u)}}),a.length?{allOf:a,...r}:void 0}function parseLiteralDef(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let emojiRegex;const zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex===void 0&&(emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":setResponseValueAndErrors(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":setResponseValueAndErrors(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":addFormat(n,"email",r.message,e);break;case"format:idn-email":addFormat(n,"idn-email",r.message,e);break;case"pattern:zod":addPattern(n,zodPatterns.email,r.message,e);break}break;case"url":addFormat(n,"uri",r.message,e);break;case"uuid":addFormat(n,"uuid",r.message,e);break;case"regex":addPattern(n,r.regex,r.message,e);break;case"cuid":addPattern(n,zodPatterns.cuid,r.message,e);break;case"cuid2":addPattern(n,zodPatterns.cuid2,r.message,e);break;case"startsWith":addPattern(n,RegExp(`^${escapeLiteralCheckValue(r.value,e)}`),r.message,e);break;case"endsWith":addPattern(n,RegExp(`${escapeLiteralCheckValue(r.value,e)}$`),r.message,e);break;case"datetime":addFormat(n,"date-time",r.message,e);break;case"date":addFormat(n,"date",r.message,e);break;case"time":addFormat(n,"time",r.message,e);break;case"duration":addFormat(n,"duration",r.message,e);break;case"length":setResponseValueAndErrors(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),setResponseValueAndErrors(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{addPattern(n,RegExp(escapeLiteralCheckValue(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&addFormat(n,"ipv4",r.message,e),r.version!=="v4"&&addFormat(n,"ipv6",r.message,e);break}case"base64url":addPattern(n,zodPatterns.base64url,r.message,e);break;case"jwt":addPattern(n,zodPatterns.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&addPattern(n,zodPatterns.ipv4Cidr,r.message,e),r.version!=="v4"&&addPattern(n,zodPatterns.ipv6Cidr,r.message,e);break}case"emoji":addPattern(n,zodPatterns.emoji(),r.message,e);break;case"ulid":{addPattern(n,zodPatterns.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{addFormat(n,"binary",r.message,e);break}case"contentEncoding:base64":{setResponseValueAndErrors(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{addPattern(n,zodPatterns.base64,r.message,e);break}}break}case"nanoid":addPattern(n,zodPatterns.nanoid,r.message,e)}return n}function escapeLiteralCheckValue(t,e){return e.patternStrategy==="escape"?escapeNonAlphaNumeric(t):t}const ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric(t){let e="";for(let n=0;n<t.length;n++)ALPHA_NUMERIC.has(t[n])||(e+="\\"),e+=t[n];return e}function addFormat(t,e,n,r){var a;t.format||(a=t.anyOf)!=null&&a.some(o=>o.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):setResponseValueAndErrors(t,"format",e,n,r)}function addPattern(t,e,n,r){var a;t.pattern||(a=t.allOf)!=null&&a.some(o=>o.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:stringifyRegExpWithFlags(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):setResponseValueAndErrors(t,"pattern",stringifyRegExpWithFlags(e,r),n,r)}function stringifyRegExpWithFlags(t,e){var d;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let a="",o=!1,u=!1,h=!1;for(let f=0;f<r.length;f++){if(o){a+=r[f],o=!1;continue}if(n.i){if(u){if(r[f].match(/[a-z]/)){h?(a+=r[f],a+=`${r[f-2]}-${r[f]}`.toUpperCase(),h=!1):r[f+1]==="-"&&((d=r[f+2])!=null&&d.match(/[a-z]/))?(a+=r[f],h=!0):a+=`${r[f]}${r[f].toUpperCase()}`;continue}}else if(r[f].match(/[a-z]/)){a+=`[${r[f]}${r[f].toUpperCase()}]`;continue}}if(n.m){if(r[f]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[f]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[f]==="."){a+=u?`${r[f]}\r
`:`[${r[f]}\r
]`;continue}a+=r[f],r[f]==="\\"?o=!0:u&&r[f]==="]"?u=!1:!u&&r[f]==="["&&(u=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a}function parseRecordDef(t,e){var r,a,o,u,h,d;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((f,m)=>({...f,[m]:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",m]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((a=t.keyType)==null?void 0:a._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((o=t.keyType._def.checks)!=null&&o.length)){const{type:f,...m}=parseStringDef(t.keyType._def,e);return{...n,propertyNames:m}}else{if(((u=t.keyType)==null?void 0:u._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(((h=t.keyType)==null?void 0:h._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&t.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&((d=t.keyType._def.type._def.checks)!=null&&d.length)){const{type:f,...m}=parseBrandedDef(t.keyType._def,e);return{...n,propertyNames:m}}}return n}function parseMapDef(t,e){if(e.mapStrategy==="record")return parseRecordDef(t,e);const n=parseDef(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function parseNativeEnumDef(t){const e=t.values,r=Object.keys(t.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),a=Array.from(new Set(r.map(o=>typeof o)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function parseNeverDef(){return{not:{}}}function parseNullDef(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(t,e){if(e.target==="openApi3")return asAnyOf(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in primitiveMappings&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,o)=>{const u=primitiveMappings[o._def.typeName];return u&&!a.includes(u)?[...a,u]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,o)=>{const u=typeof o._def.value;switch(u){case"string":case"number":case"boolean":return[...a,u];case"bigint":return[...a,"integer"];case"object":if(o._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((o,u,h)=>h.indexOf(o)===u);return{type:a.length>1?a:a[0],enum:n.reduce((o,u)=>o.includes(u._def.value)?o:[...o,u._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(o=>!r.includes(o))],[])};return asAnyOf(t,e)}const asAnyOf=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,a)=>parseDef(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function parseNullableDef(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:primitiveMappings[t.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function parseNumberDef(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",addErrorMessage(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(n,"minimum",r.value,r.message,e):setResponseValueAndErrors(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),setResponseValueAndErrors(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?setResponseValueAndErrors(n,"maximum",r.value,r.message,e):setResponseValueAndErrors(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),setResponseValueAndErrors(n,"maximum",r.value,r.message,e));break;case"multipleOf":setResponseValueAndErrors(n,"multipleOf",r.value,r.message,e);break}return n}function decideAdditionalProperties(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":parseDef(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":parseDef(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function parseObjectDef(t,e){const n=e.target==="openAi",r={type:"object",...Object.entries(t.shape()).reduce((a,[o,u])=>{if(u===void 0||u._def===void 0)return a;let h=u.isOptional();h&&n&&(u instanceof ZodOptional&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),h=!1);const d=parseDef(u._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});return d===void 0?a:{properties:{...a.properties,[o]:d},required:h?a.required:[...a.required,o]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(t,e)};return r.required.length||delete r.required,r}const parseOptionalDef=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return parseDef(t.innerType._def,e);const n=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},parsePipelineDef=(t,e)=>{if(e.pipeStrategy==="input")return parseDef(t.in._def,e);if(e.pipeStrategy==="output")return parseDef(t.out._def,e);const n=parseDef(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=parseDef(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function parsePromiseDef(t,e){return parseDef(t.type._def,e)}function parseSetDef(t,e){const r={type:"array",uniqueItems:!0,items:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&setResponseValueAndErrors(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&setResponseValueAndErrors(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function parseTupleDef(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>parseDef(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:parseDef(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>parseDef(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(t,e)=>parseDef(t.innerType._def,e);function parseDef(t,e,n=!1){var u;const r=e.seen.get(t);if(e.override){const h=(u=e.override)==null?void 0:u.call(e,t,e,r,n);if(h!==ignoreOverride)return h}if(r&&!n){const h=get$ref(r,e);if(h!==void 0)return h}const a={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,a);const o=selectParser(t,t.typeName,e);return o&&addMeta(t,e,o),a.jsonSchema=o,o}const get$ref=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:getRelativePath(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},getRelativePath=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},selectParser=(t,e,n)=>{switch(e){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(t,n);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(t,n);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(t,n);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(t,n);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(t,n);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(n);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(t,n);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(t,n);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(t,n);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(t,n);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(t,n);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(t,n);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(t);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(t);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(t,n);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(t,n);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(t,n);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(t,n);case ZodFirstPartyTypeKind.ZodLazy:return parseDef(t.getter()._def,n);case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(t,n);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(t,n);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(t,n);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(t,n);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(t,n);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(t,n);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(t,n);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(r=>{})()}},addMeta=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),zodToJsonSchema=(t,e)=>{const n=getRefs(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[f,m])=>({...d,[f]:parseDef(m._def,{...n,currentPath:[...n.basePath,n.definitionPath,f]},!0)??{}}),{}):void 0,a=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,o=parseDef(t._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},u=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;u!==void 0&&(o.title=u);const h=a===void 0?r?{...o,[n.definitionPath]:r}:o:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:o}};return n.target==="jsonSchema7"?h.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(h.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in h||"oneOf"in h||"allOf"in h||"type"in h&&Array.isArray(h.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),h};var textStreamPart={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},errorStreamPart={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},assistantMessageStreamPart={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},assistantControlDataStreamPart={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},dataMessageStreamPart={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},assistantStreamParts=[textStreamPart,errorStreamPart,assistantMessageStreamPart,assistantControlDataStreamPart,dataMessageStreamPart];textStreamPart.code+"",errorStreamPart.code+"",assistantMessageStreamPart.code+"",assistantControlDataStreamPart.code+"",dataMessageStreamPart.code+"";textStreamPart.name+"",textStreamPart.code,errorStreamPart.name+"",errorStreamPart.code,assistantMessageStreamPart.name+"",assistantMessageStreamPart.code,assistantControlDataStreamPart.name+"",assistantControlDataStreamPart.code,dataMessageStreamPart.name+"",dataMessageStreamPart.code;assistantStreamParts.map(t=>t.code);function fixJson(t){const e=["ROOT"];let n=-1,r=null;function a(d,f,m){switch(d){case'"':{n=f,e.pop(),e.push(m),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=f,r=f,e.pop(),e.push(m),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(m),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=f,e.pop(),e.push(m),e.push("INSIDE_NUMBER");break}case"{":{n=f,e.pop(),e.push(m),e.push("INSIDE_OBJECT_START");break}case"[":{n=f,e.pop(),e.push(m),e.push("INSIDE_ARRAY_START");break}}}function o(d,f){switch(d){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=f,e.pop();break}}}function u(d,f){switch(d){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=f,e.pop();break}}}for(let d=0;d<t.length;d++){const f=t[d];switch(e[e.length-1]){case"ROOT":a(f,d,"FINISH");break;case"INSIDE_OBJECT_START":{switch(f){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{n=d,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(f){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(f){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(f){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(f,d,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(f,d);break}case"INSIDE_STRING":{switch(f){case'"':{e.pop(),n=d;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=d}break}case"INSIDE_ARRAY_START":{switch(f){case"]":{n=d,e.pop();break}default:{n=d,a(f,d,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(f){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=d,e.pop();break}default:{n=d;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(f,d,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),n=d;break}case"INSIDE_NUMBER":{switch(f){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=d;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(f,d),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(f,d);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(f,d);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(f,d);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const b=t.substring(r,d+1);!"false".startsWith(b)&&!"true".startsWith(b)&&!"null".startsWith(b)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(f,d):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(f,d)):n=d;break}}}let h=t.slice(0,n+1);for(let d=e.length-1;d>=0;d--)switch(e[d]){case"INSIDE_STRING":{h+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{h+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{h+="]";break}case"INSIDE_LITERAL":{const m=t.substring(r,t.length);"true".startsWith(m)?h+="true".slice(m.length):"false".startsWith(m)?h+="false".slice(m.length):"null".startsWith(m)&&(h+="null".slice(m.length))}}return h}function parsePartialJson(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=safeParseJSON({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=safeParseJSON({text:fixJson(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var textStreamPart2={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},dataStreamPart={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},errorStreamPart2={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},messageAnnotationsStreamPart={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},toolCallStreamPart={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},toolResultStreamPart={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},toolCallStreamingStartStreamPart={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},toolCallDeltaStreamPart={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},finishMessageStreamPart={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},finishStepStreamPart={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},startStepStreamPart={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},reasoningStreamPart={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},dataStreamParts=[textStreamPart2,dataStreamPart,errorStreamPart2,messageAnnotationsStreamPart,toolCallStreamPart,toolResultStreamPart,toolCallStreamingStartStreamPart,toolCallDeltaStreamPart,finishMessageStreamPart,finishStepStreamPart,startStepStreamPart,reasoningStreamPart];textStreamPart2.code+"",dataStreamPart.code+"",errorStreamPart2.code+"",messageAnnotationsStreamPart.code+"",toolCallStreamPart.code+"",toolResultStreamPart.code+"",toolCallStreamingStartStreamPart.code+"",toolCallDeltaStreamPart.code+"",finishMessageStreamPart.code+"",finishStepStreamPart.code+"",startStepStreamPart.code+"",reasoningStreamPart.code+"";textStreamPart2.name+"",textStreamPart2.code,dataStreamPart.name+"",dataStreamPart.code,errorStreamPart2.name+"",errorStreamPart2.code,messageAnnotationsStreamPart.name+"",messageAnnotationsStreamPart.code,toolCallStreamPart.name+"",toolCallStreamPart.code,toolResultStreamPart.name+"",toolResultStreamPart.code,toolCallStreamingStartStreamPart.name+"",toolCallStreamingStartStreamPart.code,toolCallDeltaStreamPart.name+"",toolCallDeltaStreamPart.code,finishMessageStreamPart.name+"",finishMessageStreamPart.code,finishStepStreamPart.name+"",finishStepStreamPart.code,startStepStreamPart.name+"",startStepStreamPart.code,reasoningStreamPart.name+"",reasoningStreamPart.code;dataStreamParts.map(t=>t.code);function formatDataStreamPart(t,e){const n=dataStreamParts.find(r=>r.name===t);if(!n)throw new Error(`Invalid stream part type: ${t}`);return`${n.code}:${JSON.stringify(e)}
`}function zodSchema(t,e){var n;const r=(n=void 0)!=null?n:!1;return jsonSchema(zodToJsonSchema(t,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const o=t.safeParse(a);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}var schemaSymbol=Symbol.for("vercel.ai.schema");function jsonSchema(t,{validate:e}={}){return{[schemaSymbol]:!0,_type:void 0,[validatorSymbol]:!0,jsonSchema:t,validate:e}}function isSchema(t){return typeof t=="object"&&t!==null&&schemaSymbol in t&&t[schemaSymbol]===!0&&"jsonSchema"in t&&"validate"in t}function asSchema(t){return isSchema(t)?t:zodSchema(t)}var _globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},VERSION="1.9.0",re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(t){var e=new Set([t]),n=new Set,r=t.match(re);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(d){return d===t};function o(h){return n.add(h),!1}function u(h){return e.add(h),!0}return function(d){if(e.has(d))return!0;if(n.has(d))return!1;var f=d.match(re);if(!f)return o(d);var m={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};return m.prerelease!=null||a.major!==m.major?o(d):a.major===0?a.minor===m.minor&&a.patch<=m.patch?u(d):o(d):a.minor<=m.minor?u(d):o(d)}}var isCompatible=_makeCompatibilityCheck(VERSION),major=VERSION.split(".")[0],GLOBAL_OPENTELEMETRY_API_KEY=Symbol.for("opentelemetry.js.api."+major),_global=_globalThis;function registerGlobal(t,e,n,r){var a;r===void 0&&(r=!1);var o=_global[GLOBAL_OPENTELEMETRY_API_KEY]=(a=_global[GLOBAL_OPENTELEMETRY_API_KEY])!==null&&a!==void 0?a:{version:VERSION};if(!r&&o[t]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(u.stack||u.message),!1}if(o.version!==VERSION){var u=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+t+" does not match previously registered API v"+VERSION);return n.error(u.stack||u.message),!1}return o[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+VERSION+"."),!0}function getGlobal(t){var e,n,r=(e=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||e===void 0?void 0:e.version;if(!(!r||!isCompatible(r)))return(n=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||n===void 0?void 0:n[t]}function unregisterGlobal(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+VERSION+".");var n=_global[GLOBAL_OPENTELEMETRY_API_KEY];n&&delete n[t]}var __read$3=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],u;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},__spreadArray$3=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},DiagComponentLogger=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return logProxy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return logProxy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return logProxy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return logProxy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return logProxy("verbose",this._namespace,e)},t}();function logProxy(t,e,n){var r=getGlobal("diag");if(r)return n.unshift(e),r[t].apply(r,__spreadArray$3([],__read$3(n),!1))}var DiagLogLevel;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(DiagLogLevel||(DiagLogLevel={}));function createLogLevelDiagLogger(t,e){t<DiagLogLevel.NONE?t=DiagLogLevel.NONE:t>DiagLogLevel.ALL&&(t=DiagLogLevel.ALL),e=e||{};function n(r,a){var o=e[r];return typeof o=="function"&&t>=a?o.bind(e):function(){}}return{error:n("error",DiagLogLevel.ERROR),warn:n("warn",DiagLogLevel.WARN),info:n("info",DiagLogLevel.INFO),debug:n("debug",DiagLogLevel.DEBUG),verbose:n("verbose",DiagLogLevel.VERBOSE)}}var __read$2=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],u;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},__spreadArray$2=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},API_NAME$2="diag",DiagAPI=function(){function t(){function e(a){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var h=getGlobal("diag");if(h)return h[a].apply(h,__spreadArray$2([],__read$2(o),!1))}}var n=this,r=function(a,o){var u,h,d;if(o===void 0&&(o={logLevel:DiagLogLevel.INFO}),a===n){var f=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((u=f.stack)!==null&&u!==void 0?u:f.message),!1}typeof o=="number"&&(o={logLevel:o});var m=getGlobal("diag"),b=createLogLevelDiagLogger((h=o.logLevel)!==null&&h!==void 0?h:DiagLogLevel.INFO,a);if(m&&!o.suppressOverrideMessage){var E=(d=new Error().stack)!==null&&d!==void 0?d:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+E),b.warn("Current logger will overwrite one already registered from "+E)}return registerGlobal("diag",b,n,!0)};n.setLogger=r,n.disable=function(){unregisterGlobal(API_NAME$2,n)},n.createComponentLogger=function(a){return new DiagComponentLogger(a)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function createContextKey(t){return Symbol.for(t)}var BaseContext=function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var o=new t(n._currentContext);return o._currentContext.set(r,a),o},n.deleteValue=function(r){var a=new t(n._currentContext);return a._currentContext.delete(r),a}}return t}(),ROOT_CONTEXT=new BaseContext,__read$1=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],u;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},__spreadArray$1=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},NoopContextManager=function(){function t(){}return t.prototype.active=function(){return ROOT_CONTEXT},t.prototype.with=function(e,n,r){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return n.call.apply(n,__spreadArray$1([r],__read$1(a),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),__read=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,o=[],u;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(h){u={error:h}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o},__spreadArray=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,o;r<a;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},API_NAME$1="context",NOOP_CONTEXT_MANAGER=new NoopContextManager,ContextAPI=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return registerGlobal(API_NAME$1,e,DiagAPI.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,r){for(var a,o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];return(a=this._getContextManager()).with.apply(a,__spreadArray([e,n,r],__read(o),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return getGlobal(API_NAME$1)||NOOP_CONTEXT_MANAGER},t.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(API_NAME$1,DiagAPI.instance())},t}(),TraceFlags;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(TraceFlags||(TraceFlags={}));var INVALID_SPANID="0000000000000000",INVALID_TRACEID="00000000000000000000000000000000",INVALID_SPAN_CONTEXT={traceId:INVALID_TRACEID,spanId:INVALID_SPANID,traceFlags:TraceFlags.NONE},NonRecordingSpan=function(){function t(e){e===void 0&&(e=INVALID_SPAN_CONTEXT),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t}(),SPAN_KEY=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(t){return t.getValue(SPAN_KEY)||void 0}function getActiveSpan(){return getSpan(ContextAPI.getInstance().active())}function setSpan(t,e){return t.setValue(SPAN_KEY,e)}function deleteSpan(t){return t.deleteValue(SPAN_KEY)}function setSpanContext(t,e){return setSpan(t,new NonRecordingSpan(e))}function getSpanContext(t){var e;return(e=getSpan(t))===null||e===void 0?void 0:e.spanContext()}var VALID_TRACEID_REGEX=/^([0-9a-f]{32})$/i,VALID_SPANID_REGEX=/^[0-9a-f]{16}$/i;function isValidTraceId(t){return VALID_TRACEID_REGEX.test(t)&&t!==INVALID_TRACEID}function isValidSpanId(t){return VALID_SPANID_REGEX.test(t)&&t!==INVALID_SPANID}function isSpanContextValid(t){return isValidTraceId(t.traceId)&&isValidSpanId(t.spanId)}function wrapSpanContext(t){return new NonRecordingSpan(t)}var contextApi=ContextAPI.getInstance(),NoopTracer=function(){function t(){}return t.prototype.startSpan=function(e,n,r){r===void 0&&(r=contextApi.active());var a=!!(n!=null&&n.root);if(a)return new NonRecordingSpan;var o=r&&getSpanContext(r);return isSpanContext(o)&&isSpanContextValid(o)?new NonRecordingSpan(o):new NonRecordingSpan},t.prototype.startActiveSpan=function(e,n,r,a){var o,u,h;if(!(arguments.length<2)){arguments.length===2?h=n:arguments.length===3?(o=n,h=r):(o=n,u=r,h=a);var d=u??contextApi.active(),f=this.startSpan(e,o,d),m=setSpan(d,f);return contextApi.with(m,h,void 0,f)}},t}();function isSpanContext(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var NOOP_TRACER=new NoopTracer,ProxyTracer=function(){function t(e,n,r,a){this._provider=e,this.name=n,this.version=r,this.options=a}return t.prototype.startSpan=function(e,n,r){return this._getTracer().startSpan(e,n,r)},t.prototype.startActiveSpan=function(e,n,r,a){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):NOOP_TRACER},t}(),NoopTracerProvider=function(){function t(){}return t.prototype.getTracer=function(e,n,r){return new NoopTracer},t}(),NOOP_TRACER_PROVIDER=new NoopTracerProvider,ProxyTracerProvider=function(){function t(){}return t.prototype.getTracer=function(e,n,r){var a;return(a=this.getDelegateTracer(e,n,r))!==null&&a!==void 0?a:new ProxyTracer(this,e,n,r)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:NOOP_TRACER_PROVIDER},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(e,n,r)},t}(),SpanStatusCode;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(SpanStatusCode||(SpanStatusCode={}));var API_NAME="trace",TraceAPI=function(){function t(){this._proxyTracerProvider=new ProxyTracerProvider,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getActiveSpan=getActiveSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=registerGlobal(API_NAME,this._proxyTracerProvider,DiagAPI.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return getGlobal(API_NAME)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){unregisterGlobal(API_NAME,DiagAPI.instance()),this._proxyTracerProvider=new ProxyTracerProvider},t}(),trace=TraceAPI.getInstance(),__defProp$1=Object.defineProperty,__export$1=(t,e)=>{for(var n in e)__defProp$1(t,n,{get:e[n],enumerable:!0})};function prepareResponseHeaders(t,{contentType:e,dataStreamVersion:n}){const r=new Headers(t??{});return r.has("Content-Type")||r.set("Content-Type",e),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}var name$1="AI_InvalidArgumentError",marker=`vercel.ai.error.${name$1}`,symbol=Symbol.for(marker),_a,InvalidArgumentError=class extends AISDKError{constructor({parameter:t,value:e,message:n}){super({name:name$1,message:`Invalid argument for parameter ${t}: ${n}`}),this[_a]=!0,this.parameter=t,this.value=e}static isInstance(t){return AISDKError.hasMarker(t,marker)}};_a=symbol;var name2="AI_RetryError",marker2=`vercel.ai.error.${name2}`,symbol2=Symbol.for(marker2),_a2,RetryError=class extends AISDKError{constructor({message:t,reason:e,errors:n}){super({name:name2,message:t}),this[_a2]=!0,this.reason=e,this.errors=n,this.lastError=n[n.length-1]}static isInstance(t){return AISDKError.hasMarker(t,marker2)}};_a2=symbol2;var retryWithExponentialBackoff=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:n=2}={})=>async r=>_retryWithExponentialBackoff(r,{maxRetries:t,delayInMs:e,backoffFactor:n});async function _retryWithExponentialBackoff(t,{maxRetries:e,delayInMs:n,backoffFactor:r},a=[]){try{return await t()}catch(o){if(isAbortError(o)||e===0)throw o;const u=getErrorMessage(o),h=[...a,o],d=h.length;if(d>e)throw new RetryError({message:`Failed after ${d} attempts. Last error: ${u}`,reason:"maxRetriesExceeded",errors:h});if(o instanceof Error&&APICallError.isInstance(o)&&o.isRetryable===!0&&d<=e)return await delay(n),_retryWithExponentialBackoff(t,{maxRetries:e,delayInMs:r*n,backoffFactor:r},h);throw d===1?o:new RetryError({message:`Failed after ${d} attempts with non-retryable error: '${u}'`,reason:"errorNotRetryable",errors:h})}}function prepareRetries({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new InvalidArgumentError({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new InvalidArgumentError({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}const e=t??2;return{maxRetries:e,retry:retryWithExponentialBackoff({maxRetries:e})}}function assembleOperationName({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function getBaseTelemetryAttributes({model:t,settings:e,telemetry:n,headers:r}){var a;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((o,[u,h])=>(o[`ai.settings.${u}`]=h,o),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((o,[u,h])=>(o[`ai.telemetry.metadata.${u}`]=h,o),{}),...Object.entries(r??{}).reduce((o,[u,h])=>(h!==void 0&&(o[`ai.request.headers.${u}`]=h),o),{})}}var noopTracer={startSpan(){return noopSpan},startActiveSpan(t,e,n,r){if(typeof e=="function")return e(noopSpan);if(typeof n=="function")return n(noopSpan);if(typeof r=="function")return r(noopSpan)}},noopSpan={spanContext(){return noopSpanContext},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},noopSpanContext={traceId:"",spanId:"",traceFlags:0};function getTracer({isEnabled:t=!1,tracer:e}={}){return t?e||trace.getTracer("ai"):noopTracer}function recordSpan({name:t,tracer:e,attributes:n,fn:r,endWhenDone:a=!0}){return e.startActiveSpan(t,{attributes:n},async o=>{try{const u=await r(o);return a&&o.end(),u}catch(u){try{u instanceof Error?(o.recordException({name:u.name,message:u.message,stack:u.stack}),o.setStatus({code:SpanStatusCode.ERROR,message:u.message})):o.setStatus({code:SpanStatusCode.ERROR})}finally{o.end()}throw u}})}function selectTelemetryAttributes({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return n;const o=a.input();return o===void 0?n:{...n,[r]:o}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return n;const o=a.output();return o===void 0?n:{...n,[r]:o}}return{...n,[r]:a}},{})}var name4="AI_NoObjectGeneratedError",marker4=`vercel.ai.error.${name4}`,symbol4=Symbol.for(marker4),_a4,NoObjectGeneratedError=class extends AISDKError{constructor({message:t="No object generated.",cause:e,text:n,response:r,usage:a}){super({name:name4,message:t,cause:e}),this[_a4]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(t){return AISDKError.hasMarker(t,marker4)}};_a4=symbol4;var name5="AI_DownloadError",marker5=`vercel.ai.error.${name5}`,symbol5=Symbol.for(marker5),_a5,DownloadError=class extends AISDKError{constructor({url:t,statusCode:e,statusText:n,cause:r,message:a=r==null?`Failed to download ${t}: ${e} ${n}`:`Failed to download ${t}: ${r}`}){super({name:name5,message:a,cause:r}),this[_a5]=!0,this.url=t,this.statusCode=e,this.statusText=n}static isInstance(t){return AISDKError.hasMarker(t,marker5)}};_a5=symbol5;async function download({url:t,fetchImplementation:e=fetch}){var n;const r=t.toString();try{const a=await e(r);if(!a.ok)throw new DownloadError({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw DownloadError.isInstance(a)?a:new DownloadError({url:r,cause:a})}}var mimeTypeSignatures=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function detectImageMimeType(t){for(const{bytes:e,mimeType:n}of mimeTypeSignatures)if(t.length>=e.length&&e.every((r,a)=>t[a]===r))return n}var name6="AI_InvalidDataContentError",marker6=`vercel.ai.error.${name6}`,symbol6=Symbol.for(marker6),_a6,InvalidDataContentError=class extends AISDKError{constructor({content:t,cause:e,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:name6,message:n,cause:e}),this[_a6]=!0,this.content=t}static isInstance(t){return AISDKError.hasMarker(t,marker6)}};_a6=symbol6;var dataContentSchema=z.union([z.string(),z.instanceof(Uint8Array),z.instanceof(ArrayBuffer),z.custom(t=>{var e,n;return(n=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?n:!1},{message:"Must be a Buffer"})]);function convertDataContentToBase64String(t){return typeof t=="string"?t:t instanceof ArrayBuffer?convertUint8ArrayToBase64(new Uint8Array(t)):convertUint8ArrayToBase64(t)}function convertDataContentToUint8Array(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return convertBase64ToUint8Array(t)}catch(e){throw new InvalidDataContentError({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new InvalidDataContentError({content:t})}function convertUint8ArrayToText(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}var name7="AI_InvalidMessageRoleError",marker7=`vercel.ai.error.${name7}`,symbol7=Symbol.for(marker7),_a7,InvalidMessageRoleError=class extends AISDKError{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:name7,message:e}),this[_a7]=!0,this.role=t}static isInstance(t){return AISDKError.hasMarker(t,marker7)}};_a7=symbol7;function splitDataUrl(t){try{const[e,n]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function convertToLanguageModelPrompt({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=download}){const a=await downloadAssets(t.messages,r,e,n);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(o=>convertToLanguageModelMessage(o,a))]}function convertToLanguageModelMessage(t,e){var n,r,a,o,u,h;const d=t.role;switch(d){case"system":return{role:"system",content:t.content,providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata}:{role:"user",content:t.content.map(f=>convertPartToLanguageModelPart(f,e)).filter(f=>f.type!=="text"||f.text!==""),providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(o=t.providerOptions)!=null?o:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(f=>f.type!=="text"||f.text!=="").map(f=>{const{experimental_providerMetadata:m,providerOptions:b,...E}=f;return{...E,providerMetadata:b??m}}),providerMetadata:(u=t.providerOptions)!=null?u:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(f=>{var m;return{type:"tool-result",toolCallId:f.toolCallId,toolName:f.toolName,result:f.result,content:f.experimental_content,isError:f.isError,providerMetadata:(m=f.providerOptions)!=null?m:f.experimental_providerMetadata}}),providerMetadata:(h=t.providerOptions)!=null?h:t.experimental_providerMetadata};default:{const f=d;throw new InvalidMessageRoleError({role:f})}}}async function downloadAssets(t,e,n,r){const a=t.filter(u=>u.role==="user").map(u=>u.content).filter(u=>Array.isArray(u)).flat().filter(u=>u.type==="image"||u.type==="file").filter(u=>!(u.type==="image"&&n===!0)).map(u=>u.type==="image"?u.image:u.data).map(u=>typeof u=="string"&&(u.startsWith("http:")||u.startsWith("https:"))?new URL(u):u).filter(u=>u instanceof URL).filter(u=>!r(u)),o=await Promise.all(a.map(async u=>({url:u,data:await e({url:u})})));return Object.fromEntries(o.map(({url:u,data:h})=>[u.toString(),h]))}function convertPartToLanguageModelPart(t,e){var n;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:t.experimental_providerMetadata};let r=t.mimeType,a,o,u;const h=t.type;switch(h){case"image":a=t.image;break;case"file":a=t.data;break;default:throw new Error(`Unsupported part type: ${h}`)}try{o=typeof a=="string"?new URL(a):a}catch{o=a}if(o instanceof URL)if(o.protocol==="data:"){const{mimeType:d,base64Content:f}=splitDataUrl(o.toString());if(d==null||f==null)throw new Error(`Invalid data URL format in part ${h}`);r=d,u=convertDataContentToUint8Array(f)}else{const d=e[o.toString()];d?(u=d.data,r??(r=d.mimeType)):u=o}else u=convertDataContentToUint8Array(o);switch(h){case"image":return u instanceof Uint8Array&&(r=(n=detectImageMimeType(u))!=null?n:r),{type:"image",image:u,mimeType:r,providerMetadata:t.experimental_providerMetadata};case"file":{if(r==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?convertDataContentToBase64String(u):u,mimeType:r,providerMetadata:t.experimental_providerMetadata}}}}function prepareCallSettings({maxTokens:t,temperature:e,topP:n,topK:r,presencePenalty:a,frequencyPenalty:o,stopSequences:u,seed:h}){if(t!=null){if(!Number.isInteger(t))throw new InvalidArgumentError({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new InvalidArgumentError({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new InvalidArgumentError({parameter:"temperature",value:e,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new InvalidArgumentError({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new InvalidArgumentError({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new InvalidArgumentError({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(o!=null&&typeof o!="number")throw new InvalidArgumentError({parameter:"frequencyPenalty",value:o,message:"frequencyPenalty must be a number"});if(h!=null&&!Number.isInteger(h))throw new InvalidArgumentError({parameter:"seed",value:h,message:"seed must be an integer"});return{maxTokens:t,temperature:e??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:o,stopSequences:u!=null&&u.length>0?u:void 0,seed:h}}function attachmentsToParts(t){var e,n,r;const a=[];for(const o of t){let u;try{u=new URL(o.url)}catch{throw new Error(`Invalid URL: ${o.url}`)}switch(u.protocol){case"http:":case"https:":{if((e=o.contentType)!=null&&e.startsWith("image/"))a.push({type:"image",image:u});else{if(!o.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:u,mimeType:o.contentType})}break}case"data:":{let h,d,f;try{[h,d]=o.url.split(","),f=h.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${o.url}`)}if(f==null||d==null)throw new Error(`Invalid data URL format: ${o.url}`);if((n=o.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:convertDataContentToUint8Array(d)});else if((r=o.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:convertUint8ArrayToText(convertDataContentToUint8Array(d))});else{if(!o.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:d,mimeType:o.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${u.protocol}`)}}return a}var name8="AI_MessageConversionError",marker8=`vercel.ai.error.${name8}`,symbol8=Symbol.for(marker8),_a8,MessageConversionError=class extends AISDKError{constructor({originalMessage:t,message:e}){super({name:name8,message:e}),this[_a8]=!0,this.originalMessage=t}static isInstance(t){return AISDKError.hasMarker(t,marker8)}};_a8=symbol8;function convertToCoreMessages(t,e){var n,r;const a=(n=e==null?void 0:e.tools)!=null?n:{},o=[];for(let u=0;u<t.length;u++){const h=t[u],d=u===t.length-1,{role:f,content:m,experimental_attachments:b}=h;switch(f){case"system":{o.push({role:"system",content:m});break}case"user":{o.push({role:"user",content:b?[{type:"text",text:m},...attachmentsToParts(b)]:m});break}case"assistant":{if(h.parts!=null){let y=function(){o.push({role:"assistant",content:T.map(k=>{switch(k.type){case"text":return{type:"text",text:k.text};default:return{type:"tool-call",toolCallId:k.toolInvocation.toolCallId,toolName:k.toolInvocation.toolName,args:k.toolInvocation.args}}})});const R=T.filter(k=>k.type==="tool-invocation").map(k=>k.toolInvocation);R.length>0&&o.push({role:"tool",content:R.map(k=>{if(!("result"in k))throw new MessageConversionError({originalMessage:h,message:"ToolInvocation must have a result: "+JSON.stringify(k)});const{toolCallId:x,toolName:S,result:O}=k,A=a[S];return(A==null?void 0:A.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:A.experimental_toToolResultContent(O),experimental_content:A.experimental_toToolResultContent(O)}:{type:"tool-result",toolCallId:x,toolName:S,result:O}})}),T=[],v=!1,g++},g=0,v=!1,T=[];for(const R of h.parts)switch(R.type){case"reasoning":break;case"text":{v&&y(),T.push(R);break}case"tool-invocation":{((r=R.toolInvocation.step)!=null?r:0)!==g&&y(),T.push(R),v=!0;break}}y();break}const E=h.toolInvocations;if(E==null||E.length===0){o.push({role:"assistant",content:m});break}const w=E.reduce((y,g)=>{var v;return Math.max(y,(v=g.step)!=null?v:0)},0);for(let y=0;y<=w;y++){const g=E.filter(v=>{var T;return((T=v.step)!=null?T:0)===y});g.length!==0&&(o.push({role:"assistant",content:[...d&&m&&y===0?[{type:"text",text:m}]:[],...g.map(({toolCallId:v,toolName:T,args:R})=>({type:"tool-call",toolCallId:v,toolName:T,args:R}))]}),o.push({role:"tool",content:g.map(v=>{if(!("result"in v))throw new MessageConversionError({originalMessage:h,message:"ToolInvocation must have a result: "+JSON.stringify(v)});const{toolCallId:T,toolName:R,result:k}=v,x=a[R];return(x==null?void 0:x.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:T,toolName:R,result:x.experimental_toToolResultContent(k),experimental_content:x.experimental_toToolResultContent(k)}:{type:"tool-result",toolCallId:T,toolName:R,result:k}})}))}m&&!d&&o.push({role:"assistant",content:m});break}case"data":break;default:{const E=f;throw new MessageConversionError({originalMessage:h,message:`Unsupported role: ${E}`})}}}return o}function detectPromptType(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";const e=t.map(detectSingleMessageCharacteristics);return e.some(n=>n==="has-ui-specific-parts")?"ui-messages":e.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function detectSingleMessageCharacteristics(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var jsonValueSchema=z.lazy(()=>z.union([z.null(),z.string(),z.number(),z.boolean(),z.record(z.string(),jsonValueSchema),z.array(jsonValueSchema)])),providerMetadataSchema=z.record(z.string(),z.record(z.string(),jsonValueSchema)),toolResultContentSchema=z.array(z.union([z.object({type:z.literal("text"),text:z.string()}),z.object({type:z.literal("image"),data:z.string(),mimeType:z.string().optional()})])),textPartSchema=z.object({type:z.literal("text"),text:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),imagePartSchema=z.object({type:z.literal("image"),image:z.union([dataContentSchema,z.instanceof(URL)]),mimeType:z.string().optional(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),filePartSchema=z.object({type:z.literal("file"),data:z.union([dataContentSchema,z.instanceof(URL)]),mimeType:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),toolCallPartSchema=z.object({type:z.literal("tool-call"),toolCallId:z.string(),toolName:z.string(),args:z.unknown(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),toolResultPartSchema=z.object({type:z.literal("tool-result"),toolCallId:z.string(),toolName:z.string(),result:z.unknown(),content:toolResultContentSchema.optional(),isError:z.boolean().optional(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreSystemMessageSchema=z.object({role:z.literal("system"),content:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreUserMessageSchema=z.object({role:z.literal("user"),content:z.union([z.string(),z.array(z.union([textPartSchema,imagePartSchema,filePartSchema]))]),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreAssistantMessageSchema=z.object({role:z.literal("assistant"),content:z.union([z.string(),z.array(z.union([textPartSchema,toolCallPartSchema]))]),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreToolMessageSchema=z.object({role:z.literal("tool"),content:z.array(toolResultPartSchema),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreMessageSchema=z.union([coreSystemMessageSchema,coreUserMessageSchema,coreAssistantMessageSchema,coreToolMessageSchema]);function standardizePrompt({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new InvalidPromptError({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new InvalidPromptError({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new InvalidPromptError({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new InvalidPromptError({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){const n=detectPromptType(t.messages);if(n==="other")throw new InvalidPromptError({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?convertToCoreMessages(t.messages,{tools:e}):t.messages,a=safeValidateTypes({value:r,schema:z.array(coreMessageSchema)});if(!a.success)throw new InvalidPromptError({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:t.system}}throw new Error("unreachable")}function calculateLanguageModelUsage({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function addLanguageModelUsage(t,e){return{promptTokens:t.promptTokens+e.promptTokens,completionTokens:t.completionTokens+e.completionTokens,totalTokens:t.totalTokens+e.totalTokens}}var DEFAULT_SCHEMA_PREFIX="JSON schema:",DEFAULT_SCHEMA_SUFFIX="You MUST answer with a JSON object that matches the JSON schema above.",DEFAULT_GENERIC_SUFFIX="You MUST answer with JSON.";function injectJsonInstruction({prompt:t,schema:e,schemaPrefix:n=e!=null?DEFAULT_SCHEMA_PREFIX:void 0,schemaSuffix:r=e!=null?DEFAULT_SCHEMA_SUFFIX:DEFAULT_GENERIC_SUFFIX}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,n,e!=null?JSON.stringify(e):void 0,r].filter(a=>a!=null).join(`
`)}createIdGenerator({prefix:"aiobj",size:24});createIdGenerator({prefix:"aiobj",size:24});var name9="AI_NoOutputSpecifiedError",marker9=`vercel.ai.error.${name9}`,symbol9=Symbol.for(marker9),_a9,NoOutputSpecifiedError=class extends AISDKError{constructor({message:t="No output specified."}={}){super({name:name9,message:t}),this[_a9]=!0}static isInstance(t){return AISDKError.hasMarker(t,marker9)}};_a9=symbol9;var name10="AI_ToolExecutionError",marker10=`vercel.ai.error.${name10}`,symbol10=Symbol.for(marker10),_a10,ToolExecutionError=class extends AISDKError{constructor({toolArgs:t,toolName:e,toolCallId:n,cause:r,message:a=`Error executing tool ${e}: ${getErrorMessage$1(r)}`}){super({name:name10,message:a,cause:r}),this[_a10]=!0,this.toolArgs=t,this.toolName=e,this.toolCallId=n}static isInstance(t){return AISDKError.hasMarker(t,marker10)}};_a10=symbol10;function isNonEmptyObject(t){return t!=null&&Object.keys(t).length>0}function prepareToolsAndToolChoice({tools:t,toolChoice:e,activeTools:n}){return isNonEmptyObject(t)?{tools:(n!=null?Object.entries(t).filter(([a])=>n.includes(a)):Object.entries(t)).map(([a,o])=>{const u=o.type;switch(u){case void 0:case"function":return{type:"function",name:a,description:o.description,parameters:asSchema(o.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:o.id,args:o.args};default:{const h=u;throw new Error(`Unsupported tool type: ${h}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}var lastWhitespaceRegexp=/^([\s\S]*?)(\s+)(\S*)$/;function splitOnLastWhitespace(t){const e=t.match(lastWhitespaceRegexp);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}function removeTextAfterLastWhitespace(t){const e=splitOnLastWhitespace(t);return e?e.prefix+e.whitespace:t}var name11="AI_InvalidToolArgumentsError",marker11=`vercel.ai.error.${name11}`,symbol11=Symbol.for(marker11),_a11,InvalidToolArgumentsError=class extends AISDKError{constructor({toolArgs:t,toolName:e,cause:n,message:r=`Invalid arguments for tool ${e}: ${getErrorMessage$1(n)}`}){super({name:name11,message:r,cause:n}),this[_a11]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return AISDKError.hasMarker(t,marker11)}};_a11=symbol11;var name12="AI_NoSuchToolError",marker12=`vercel.ai.error.${name12}`,symbol12=Symbol.for(marker12),_a12,NoSuchToolError=class extends AISDKError{constructor({toolName:t,availableTools:e=void 0,message:n=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:name12,message:n}),this[_a12]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return AISDKError.hasMarker(t,marker12)}};_a12=symbol12;var name13="AI_ToolCallRepairError",marker13=`vercel.ai.error.${name13}`,symbol13=Symbol.for(marker13),_a13,ToolCallRepairError=class extends AISDKError{constructor({cause:t,originalError:e,message:n=`Error repairing tool call: ${getErrorMessage$1(t)}`}){super({name:name13,message:n,cause:t}),this[_a13]=!0,this.originalError=e}static isInstance(t){return AISDKError.hasMarker(t,marker13)}};_a13=symbol13;async function parseToolCall({toolCall:t,tools:e,repairToolCall:n,system:r,messages:a}){if(e==null)throw new NoSuchToolError({toolName:t.toolName});try{return await doParseToolCall({toolCall:t,tools:e})}catch(o){if(n==null||!(NoSuchToolError.isInstance(o)||InvalidToolArgumentsError.isInstance(o)))throw o;let u=null;try{u=await n({toolCall:t,tools:e,parameterSchema:({toolName:h})=>asSchema(e[h].parameters).jsonSchema,system:r,messages:a,error:o})}catch(h){throw new ToolCallRepairError({cause:h,originalError:o})}if(u==null)throw o;return await doParseToolCall({toolCall:u,tools:e})}}async function doParseToolCall({toolCall:t,tools:e}){const n=t.toolName,r=e[n];if(r==null)throw new NoSuchToolError({toolName:t.toolName,availableTools:Object.keys(e)});const a=asSchema(r.parameters),o=t.args.trim()===""?safeValidateTypes({value:{},schema:a}):safeParseJSON({text:t.args,schema:a});if(o.success===!1)throw new InvalidToolArgumentsError({toolName:n,toolArgs:t.args,cause:o.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:n,args:o.value}}function toResponseMessages({text:t="",tools:e,toolCalls:n,toolResults:r,messageId:a,generateMessageId:o}){const u=[];return u.push({role:"assistant",content:[{type:"text",text:t},...n],id:a}),r.length>0&&u.push({role:"tool",id:o(),content:r.map(h=>{const d=e[h.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:h.toolCallId,toolName:h.toolName,result:d.experimental_toToolResultContent(h.result),experimental_content:d.experimental_toToolResultContent(h.result)}:{type:"tool-result",toolCallId:h.toolCallId,toolName:h.toolName,result:h.result}})}),u}var originalGenerateId3=createIdGenerator({prefix:"aitxt",size:24}),originalGenerateMessageId=createIdGenerator({prefix:"msg",size:24});async function generateText({model:t,tools:e,toolChoice:n,system:r,prompt:a,messages:o,maxRetries:u,abortSignal:h,headers:d,maxSteps:f=1,experimental_generateMessageId:m=originalGenerateMessageId,experimental_output:b,experimental_continueSteps:E=!1,experimental_telemetry:w,experimental_providerMetadata:y,providerOptions:g=y,experimental_activeTools:v,experimental_repairToolCall:T,_internal:{generateId:R=originalGenerateId3,currentDate:k=()=>new Date}={},onStepFinish:x,...S}){var O;if(f<1)throw new InvalidArgumentError({parameter:"maxSteps",value:f,message:"maxSteps must be at least 1"});const{maxRetries:A,retry:I}=prepareRetries({maxRetries:u}),P=getBaseTelemetryAttributes({model:t,telemetry:w,headers:d,settings:{...S,maxRetries:A}}),j=standardizePrompt({prompt:{system:(O=b==null?void 0:b.injectIntoSystemPrompt({system:r,model:t}))!=null?O:r,prompt:a,messages:o},tools:e}),B=getTracer(w);return recordSpan({name:"ai.generateText",attributes:selectTelemetryAttributes({telemetry:w,attributes:{...assembleOperationName({operationId:"ai.generateText",telemetry:w}),...P,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:a,messages:o})},"ai.settings.maxSteps":f}}),tracer:B,fn:async ie=>{var oe,le,de,K,J,se,ue;const q={type:"regular",...prepareToolsAndToolChoice({tools:e,toolChoice:n,activeTools:v})},fe=prepareCallSettings(S);let Z,N=[],D=[],V=0;const W=[];let te="";const X=[];let C={completionTokens:0,promptTokens:0,totalTokens:0},L="initial";do{const U=V===0?j.type:"messages",$=[...j.messages,...W],H=await convertToLanguageModelPrompt({prompt:{type:U,system:j.system,messages:$},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(oe=t.supportsUrl)==null?void 0:oe.bind(t)});Z=await I(()=>recordSpan({name:"ai.generateText.doGenerate",attributes:selectTelemetryAttributes({telemetry:w,attributes:{...assembleOperationName({operationId:"ai.generateText.doGenerate",telemetry:w}),...P,"ai.prompt.format":{input:()=>U},"ai.prompt.messages":{input:()=>JSON.stringify(H)},"ai.prompt.tools":{input:()=>{var pe;return(pe=q.tools)==null?void 0:pe.map(Ee=>JSON.stringify(Ee))}},"ai.prompt.toolChoice":{input:()=>q.toolChoice!=null?JSON.stringify(q.toolChoice):void 0},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":S.frequencyPenalty,"gen_ai.request.max_tokens":S.maxTokens,"gen_ai.request.presence_penalty":S.presencePenalty,"gen_ai.request.stop_sequences":S.stopSequences,"gen_ai.request.temperature":S.temperature,"gen_ai.request.top_k":S.topK,"gen_ai.request.top_p":S.topP}}),tracer:B,fn:async pe=>{var Ee,we,Ie,ve,Ve,Fe;const De=await t.doGenerate({mode:q,...fe,inputFormat:U,responseFormat:b==null?void 0:b.responseFormat({model:t}),prompt:H,providerMetadata:g,abortSignal:h,headers:d}),Be={id:(we=(Ee=De.response)==null?void 0:Ee.id)!=null?we:R(),timestamp:(ve=(Ie=De.response)==null?void 0:Ie.timestamp)!=null?ve:k(),modelId:(Fe=(Ve=De.response)==null?void 0:Ve.modelId)!=null?Fe:t.modelId};return pe.setAttributes(selectTelemetryAttributes({telemetry:w,attributes:{"ai.response.finishReason":De.finishReason,"ai.response.text":{output:()=>De.text},"ai.response.toolCalls":{output:()=>JSON.stringify(De.toolCalls)},"ai.response.id":Be.id,"ai.response.model":Be.modelId,"ai.response.timestamp":Be.timestamp.toISOString(),"ai.usage.promptTokens":De.usage.promptTokens,"ai.usage.completionTokens":De.usage.completionTokens,"gen_ai.response.finish_reasons":[De.finishReason],"gen_ai.response.id":Be.id,"gen_ai.response.model":Be.modelId,"gen_ai.usage.input_tokens":De.usage.promptTokens,"gen_ai.usage.output_tokens":De.usage.completionTokens}})),{...De,response:Be}}})),N=await Promise.all(((le=Z.toolCalls)!=null?le:[]).map(pe=>parseToolCall({toolCall:pe,tools:e,repairToolCall:T,system:r,messages:$}))),D=e==null?[]:await executeTools({toolCalls:N,tools:e,tracer:B,telemetry:w,messages:$,abortSignal:h});const Q=calculateLanguageModelUsage(Z.usage);C=addLanguageModelUsage(C,Q);let G="done";++V<f&&(E&&Z.finishReason==="length"&&N.length===0?G="continue":N.length>0&&D.length===N.length&&(G="tool-result"));const F=(de=Z.text)!=null?de:"",ne=L==="continue"&&te.trimEnd()!==te?F.trimStart():F,he=G==="continue"?removeTextAfterLastWhitespace(ne):ne;if(te=G==="continue"||L==="continue"?te+he:he,L==="continue"){const pe=W[W.length-1];typeof pe.content=="string"?pe.content+=he:pe.content.push({text:he,type:"text"})}else W.push(...toResponseMessages({text:te,tools:e??{},toolCalls:N,toolResults:D,messageId:m(),generateMessageId:m}));const ae={stepType:L,text:he,reasoning:Z.reasoning,toolCalls:N,toolResults:D,finishReason:Z.finishReason,usage:Q,warnings:Z.warnings,logprobs:Z.logprobs,request:(K=Z.request)!=null?K:{},response:{...Z.response,headers:(J=Z.rawResponse)==null?void 0:J.headers,messages:structuredClone(W)},experimental_providerMetadata:Z.providerMetadata,isContinued:G==="continue"};X.push(ae),await(x==null?void 0:x(ae)),L=G}while(L!=="done");return ie.setAttributes(selectTelemetryAttributes({telemetry:w,attributes:{"ai.response.finishReason":Z.finishReason,"ai.response.text":{output:()=>Z.text},"ai.response.toolCalls":{output:()=>JSON.stringify(Z.toolCalls)},"ai.usage.promptTokens":Z.usage.promptTokens,"ai.usage.completionTokens":Z.usage.completionTokens}})),new DefaultGenerateTextResult({text:te,reasoning:Z.reasoning,outputResolver:()=>{if(b==null)throw new NoOutputSpecifiedError;return b.parseOutput({text:te},{response:Z.response,usage:C})},toolCalls:N,toolResults:D,finishReason:Z.finishReason,usage:C,warnings:Z.warnings,request:(se=Z.request)!=null?se:{},response:{...Z.response,headers:(ue=Z.rawResponse)==null?void 0:ue.headers,messages:W},logprobs:Z.logprobs,steps:X,providerMetadata:Z.providerMetadata})}})}async function executeTools({toolCalls:t,tools:e,tracer:n,telemetry:r,messages:a,abortSignal:o}){return(await Promise.all(t.map(async({toolCallId:h,toolName:d,args:f})=>{const m=e[d];if((m==null?void 0:m.execute)==null)return;const b=await recordSpan({name:"ai.toolCall",attributes:selectTelemetryAttributes({telemetry:r,attributes:{...assembleOperationName({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":d,"ai.toolCall.id":h,"ai.toolCall.args":{output:()=>JSON.stringify(f)}}}),tracer:n,fn:async E=>{try{const w=await m.execute(f,{toolCallId:h,messages:a,abortSignal:o});try{E.setAttributes(selectTelemetryAttributes({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(w)}}}))}catch{}return w}catch(w){throw new ToolExecutionError({toolCallId:h,toolName:d,toolArgs:f,cause:w})}}});return{type:"tool-result",toolCallId:h,toolName:d,args:f,result:b}}))).filter(h=>h!=null)}var DefaultGenerateTextResult=class{constructor(t){this.text=t.text,this.reasoning=t.reasoning,this.toolCalls=t.toolCalls,this.toolResults=t.toolResults,this.finishReason=t.finishReason,this.usage=t.usage,this.warnings=t.warnings,this.request=t.request,this.response=t.response,this.steps=t.steps,this.experimental_providerMetadata=t.providerMetadata,this.logprobs=t.logprobs,this.outputResolver=t.outputResolver}get experimental_output(){return this.outputResolver()}},output_exports={};__export$1(output_exports,{object:()=>object,text:()=>text});var text=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),object=({schema:t})=>{const e=asSchema(t);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:injectJsonInstruction({prompt:n,schema:e.jsonSchema})},parsePartial({text:n}){const r=parsePartialJson(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=safeParseJSON({text:n});if(!a.success)throw new NoObjectGeneratedError({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const o=safeValidateTypes({value:a.value,schema:e});if(!o.success)throw new NoObjectGeneratedError({message:"No object generated: response did not match schema.",cause:o.error,text:n,response:r.response,usage:r.usage});return o.value}}};function mergeStreams(t,e){const n=t.getReader(),r=e.getReader();let a,o,u=!1,h=!1;async function d(m){try{a==null&&(a=n.read());const b=await a;a=void 0,b.done?m.close():m.enqueue(b.value)}catch(b){m.error(b)}}async function f(m){try{o==null&&(o=r.read());const b=await o;o=void 0,b.done?m.close():m.enqueue(b.value)}catch(b){m.error(b)}}return new ReadableStream({async pull(m){try{if(u){await f(m);return}if(h){await d(m);return}a==null&&(a=n.read()),o==null&&(o=r.read());const{result:b,reader:E}=await Promise.race([a.then(w=>({result:w,reader:n})),o.then(w=>({result:w,reader:r}))]);b.done||m.enqueue(b.value),E===n?(a=void 0,b.done&&(await f(m),u=!0)):(o=void 0,b.done&&(h=!0,await d(m)))}catch(b){m.error(b)}},cancel(){n.cancel(),r.cancel()}})}createIdGenerator({prefix:"aitxt",size:24});createIdGenerator({prefix:"msg",size:24});var langchain_adapter_exports={};__export$1(langchain_adapter_exports,{mergeIntoDataStream:()=>mergeIntoDataStream,toDataStream:()=>toDataStream,toDataStreamResponse:()=>toDataStreamResponse});function createCallbacksTransformer(t={}){const e=new TextEncoder;let n="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(r,a){a.enqueue(e.encode(r)),n+=r,t.onToken&&await t.onToken(r),t.onText&&typeof r=="string"&&await t.onText(r)},async flush(){t.onCompletion&&await t.onCompletion(n),t.onFinal&&await t.onFinal(n)}})}function toDataStreamInternal(t,e){return t.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&forwardAIMessageChunk((a=n.data)==null?void 0:a.chunk,r);return}forwardAIMessageChunk(n,r)}})).pipeThrough(createCallbacksTransformer(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(formatDataStreamPart("text",n))}}))}function toDataStream(t,e){return toDataStreamInternal(t,e).pipeThrough(new TextEncoderStream)}function toDataStreamResponse(t,e){var n;const r=toDataStreamInternal(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),a=e==null?void 0:e.data,o=e==null?void 0:e.init,u=a?mergeStreams(a.stream,r):r;return new Response(u,{status:(n=o==null?void 0:o.status)!=null?n:200,statusText:o==null?void 0:o.statusText,headers:prepareResponseHeaders(o==null?void 0:o.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function mergeIntoDataStream(t,e){e.dataStream.merge(toDataStreamInternal(t,e.callbacks))}function forwardAIMessageChunk(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{const n=t.content;for(const r of n)r.type==="text"&&e.enqueue(r.text)}}var llamaindex_adapter_exports={};__export$1(llamaindex_adapter_exports,{mergeIntoDataStream:()=>mergeIntoDataStream2,toDataStream:()=>toDataStream2,toDataStreamResponse:()=>toDataStreamResponse2});function toDataStreamInternal2(t,e){const n=trimStartOfStream();return convertAsyncIteratorToReadableStream(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(createCallbacksTransformer(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(formatDataStreamPart("text",r))}}))}function toDataStream2(t,e){return toDataStreamInternal2(t,e).pipeThrough(new TextEncoderStream)}function toDataStreamResponse2(t,e={}){var n;const{init:r,data:a,callbacks:o}=e,u=toDataStreamInternal2(t,o).pipeThrough(new TextEncoderStream),h=a?mergeStreams(a.stream,u):u;return new Response(h,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:prepareResponseHeaders(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function mergeIntoDataStream2(t,e){e.dataStream.merge(toDataStreamInternal2(t,e.callbacks))}function trimStartOfStream(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}var __defProp=Object.defineProperty,__export=(t,e)=>{for(var n in e)__defProp(t,n,{get:e[n],enumerable:!0})},tasks_exports={};__export(tasks_exports,{audioClassification:()=>audioClassification,audioToAudio:()=>audioToAudio,automaticSpeechRecognition:()=>automaticSpeechRecognition,chatCompletion:()=>chatCompletion,chatCompletionStream:()=>chatCompletionStream,documentQuestionAnswering:()=>documentQuestionAnswering,featureExtraction:()=>featureExtraction,fillMask:()=>fillMask,imageClassification:()=>imageClassification,imageSegmentation:()=>imageSegmentation,imageToImage:()=>imageToImage,imageToText:()=>imageToText,objectDetection:()=>objectDetection,questionAnswering:()=>questionAnswering,request:()=>request,sentenceSimilarity:()=>sentenceSimilarity,streamingRequest:()=>streamingRequest,summarization:()=>summarization,tableQuestionAnswering:()=>tableQuestionAnswering,tabularClassification:()=>tabularClassification,tabularRegression:()=>tabularRegression,textClassification:()=>textClassification,textGeneration:()=>textGeneration,textGenerationStream:()=>textGenerationStream,textToImage:()=>textToImage,textToSpeech:()=>textToSpeech,textToVideo:()=>textToVideo,tokenClassification:()=>tokenClassification,translation:()=>translation,visualQuestionAnswering:()=>visualQuestionAnswering,zeroShotClassification:()=>zeroShotClassification,zeroShotImageClassification:()=>zeroShotImageClassification});var HF_HUB_URL="https://huggingface.co",FAL_AI_API_BASE_URL="https://fal.run",NEBIUS_API_BASE_URL="https://api.studio.nebius.ai",REPLICATE_API_BASE_URL="https://api.replicate.com",SAMBANOVA_API_BASE_URL="https://api.sambanova.ai",TOGETHER_API_BASE_URL="https://api.together.xyz",FIREWORKS_AI_API_BASE_URL="https://api.fireworks.ai/inference";function isUrl(t){return/^http(s?):/.test(t)||t.startsWith("/")}var name="@huggingface/inference",version="3.3.2",HARDCODED_MODEL_ID_MAPPING={"fal-ai":{},"fireworks-ai":{},"hf-inference":{},nebius:{},replicate:{},sambanova:{},together:{}},inferenceProviderMappingCache=new Map;async function getProviderModelId(t,e,n={}){var u,h;if(t.provider==="hf-inference")return t.model;if(!n.taskHint)throw new Error("taskHint must be specified when using a third-party provider");const r=n.taskHint==="text-generation"&&n.chatCompletion?"conversational":n.taskHint;if((u=HARDCODED_MODEL_ID_MAPPING[t.provider])!=null&&u[t.model])return HARDCODED_MODEL_ID_MAPPING[t.provider][t.model];let a;if(inferenceProviderMappingCache.has(t.model)?a=inferenceProviderMappingCache.get(t.model):a=await((n==null?void 0:n.fetch)??fetch)(`${HF_HUB_URL}/api/models/${t.model}?expand[]=inferenceProviderMapping`,{headers:(h=e.accessToken)!=null&&h.startsWith("hf_")?{Authorization:`Bearer ${e.accessToken}`}:{}}).then(d=>d.json()).then(d=>d.inferenceProviderMapping).catch(()=>null),!a)throw new Error(`We have not been able to find inference provider information for model ${t.model}.`);const o=a[t.provider];if(o){if(o.task!==r)throw new Error(`Model ${t.model} is not supported for task ${r} and provider ${t.provider}. Supported task: ${o.task}.`);return o.status==="staging"&&console.warn(`Model ${t.model} is in staging mode for provider ${t.provider}. Meant for test purposes only.`),o.providerId}throw new Error(`Model ${t.model} is not supported provider ${t.provider}.`)}var HF_HUB_INFERENCE_PROXY_TEMPLATE=`${HF_HUB_URL}/api/inference-proxy/{{PROVIDER}}`,tasks=null;async function makeRequestOptions(t,e){const{accessToken:n,endpointUrl:r,provider:a,model:o,...u}=t;let h=u;const d=a??"hf-inference",{forceTask:f,includeCredentials:m,taskHint:b,chatCompletion:E}=e??{};if(r&&d!=="hf-inference")throw new Error("Cannot use endpointUrl with a third-party provider.");if(f&&d!=="hf-inference")throw new Error("Cannot use forceTask with a third-party provider.");if(o&&isUrl(o))throw new Error("Model URLs are no longer supported. Use endpointUrl instead.");if(!o&&!b)throw new Error("No model provided, and no task has been specified.");const w=o??await loadDefaultModel(b),y=await getProviderModelId({model:w,provider:d},t,{taskHint:b,chatCompletion:E,fetch:e==null?void 0:e.fetch}),g=n?n.startsWith("hf_")?"hf-token":"provider-key":m==="include"?"credentials-include":"none",v=r?E?r+"/v1/chat/completions":r:makeUrl({authMethod:g,chatCompletion:E??!1,forceTask:f,model:y,provider:d??"hf-inference",taskHint:b}),T={};n&&(T.Authorization=d==="fal-ai"&&g==="provider-key"?`Key ${n}`:`Bearer ${n}`);const R=`${name}/${version}`;T["User-Agent"]=[R,typeof navigator<"u"?navigator.userAgent:void 0].filter(O=>O!==void 0).join(" ");const k="data"in t&&!!t.data;k||(T["Content-Type"]="application/json"),d==="replicate"&&(T.Prefer="wait");let x;if(typeof m=="string"?x=m:m===!0&&(x="include"),d==="replicate"){const O=y.includes(":")?y.split(":")[1]:void 0;h={input:h,version:O}}const S={headers:T,method:"POST",body:k?t.data:JSON.stringify({...h,...E||d==="together"||d==="nebius"?{model:y}:void 0}),...x?{credentials:x}:void 0,signal:e==null?void 0:e.signal};return{url:v,info:S}}function makeUrl(t){if(t.authMethod==="none"&&t.provider!=="hf-inference")throw new Error("Authentication is required when requesting a third-party provider. Please provide accessToken");const e=t.provider!=="hf-inference"&&t.authMethod!=="provider-key";switch(t.provider){case"fal-ai":return`${e?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",t.provider):FAL_AI_API_BASE_URL}/${t.model}`;case"nebius":{const n=e?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",t.provider):NEBIUS_API_BASE_URL;return t.taskHint==="text-to-image"?`${n}/v1/images/generations`:t.taskHint==="text-generation"?t.chatCompletion?`${n}/v1/chat/completions`:`${n}/v1/completions`:n}case"replicate":{const n=e?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",t.provider):REPLICATE_API_BASE_URL;return t.model.includes(":")?`${n}/v1/predictions`:`${n}/v1/models/${t.model}/predictions`}case"sambanova":{const n=e?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",t.provider):SAMBANOVA_API_BASE_URL;return t.taskHint==="text-generation"&&t.chatCompletion?`${n}/v1/chat/completions`:n}case"together":{const n=e?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",t.provider):TOGETHER_API_BASE_URL;return t.taskHint==="text-to-image"?`${n}/v1/images/generations`:t.taskHint==="text-generation"?t.chatCompletion?`${n}/v1/chat/completions`:`${n}/v1/completions`:n}case"fireworks-ai":{const n=e?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",t.provider):FIREWORKS_AI_API_BASE_URL;return t.taskHint==="text-generation"&&t.chatCompletion?`${n}/v1/chat/completions`:n}default:{const n=HF_HUB_INFERENCE_PROXY_TEMPLATE.replaceAll("{{PROVIDER}}","hf-inference"),r=t.forceTask?`${n}/pipeline/${t.forceTask}/${t.model}`:`${n}/models/${t.model}`;return t.taskHint==="text-generation"&&t.chatCompletion?r+"/v1/chat/completions":r}}}async function loadDefaultModel(t){tasks||(tasks=await loadTaskInfo());const e=tasks[t];if(((e==null?void 0:e.models.length)??0)<=0)throw new Error(`No default model defined for task ${t}, please define the model explicitly.`);return e.models[0].id}async function loadTaskInfo(){const t=await fetch(`${HF_HUB_URL}/api/tasks`);if(!t.ok)throw new Error("Failed to load tasks definitions from Hugging Face Hub.");return await t.json()}async function request(t,e){var o;const{url:n,info:r}=await makeRequestOptions(t,e),a=await((e==null?void 0:e.fetch)??fetch)(n,r);if((e==null?void 0:e.retry_on_error)!==!1&&a.status===503)return request(t,e);if(!a.ok){const u=a.headers.get("Content-Type");if(["application/json","application/problem+json"].some(d=>u==null?void 0:u.startsWith(d))){const d=await a.json();throw[400,422,404,500].includes(a.status)&&(e!=null&&e.chatCompletion)?new Error(`Server ${t.model} does not seem to support chat completion. Error: ${JSON.stringify(d.error)}`):d.error||d.detail?new Error(JSON.stringify(d.error??d.detail)):new Error(d)}const h=u!=null&&u.startsWith("text/plain;")?await a.text():void 0;throw new Error(h??"An error occurred while fetching the blob")}return(o=a.headers.get("Content-Type"))!=null&&o.startsWith("application/json")?await a.json():await a.blob()}function getLines(t){let e,n,r,a=!1;return function(u){e===void 0?(e=u,n=0,r=-1):e=concat(e,u);const h=e.length;let d=0;for(;n<h;){a&&(e[n]===10&&(d=++n),a=!1);let f=-1;for(;n<h&&f===-1;++n)switch(e[n]){case 58:r===-1&&(r=n-d);break;case 13:a=!0;case 10:f=n;break}if(f===-1)break;t(e.subarray(d,f),r),d=n,r=-1}d===h?e=void 0:d!==0&&(e=e.subarray(d),n-=d)}}function getMessages(t,e,n){let r=newMessage();const a=new TextDecoder;return function(u,h){if(u.length===0)n==null||n(r),r=newMessage();else if(h>0){const d=a.decode(u.subarray(0,h)),f=h+(u[h+1]===32?2:1),m=a.decode(u.subarray(f));switch(d){case"data":r.data=r.data?r.data+`
`+m:m;break;case"event":r.event=m;break;case"id":t(r.id=m);break;case"retry":const b=parseInt(m,10);isNaN(b)||e(r.retry=b);break}}}}function concat(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function newMessage(){return{data:"",event:"",id:"",retry:void 0}}async function*streamingRequest(t,e){var f,m;const{url:n,info:r}=await makeRequestOptions({...t,stream:!0},e),a=await((e==null?void 0:e.fetch)??fetch)(n,r);if((e==null?void 0:e.retry_on_error)!==!1&&a.status===503)return yield*streamingRequest(t,e);if(!a.ok){if((f=a.headers.get("Content-Type"))!=null&&f.startsWith("application/json")){const b=await a.json();if([400,422,404,500].includes(a.status)&&(e!=null&&e.chatCompletion))throw new Error(`Server ${t.model} does not seem to support chat completion. Error: ${b.error}`);if(typeof b.error=="string")throw new Error(b.error);if(b.error&&"message"in b.error&&typeof b.error.message=="string")throw new Error(b.error.message)}throw new Error(`Server response contains error: ${a.status}`)}if(!((m=a.headers.get("content-type"))!=null&&m.startsWith("text/event-stream")))throw new Error("Server does not support event stream content type, it returned "+a.headers.get("content-type"));if(!a.body)return;const o=a.body.getReader();let u=[];const d=getLines(getMessages(()=>{},()=>{},b=>{u.push(b)}));try{for(;;){const{done:b,value:E}=await o.read();if(b)return;d(E);for(const w of u)if(w.data.length>0){if(w.data==="[DONE]")return;const y=JSON.parse(w.data);if(typeof y=="object"&&y!==null&&"error"in y){const g=typeof y.error=="string"?y.error:typeof y.error=="object"&&y.error&&"message"in y.error&&typeof y.error.message=="string"?y.error.message:JSON.stringify(y.error);throw new Error("Error forwarded from backend: "+g)}yield y}u=[]}}finally{o.releaseLock()}}var InferenceOutputError=class extends TypeError{constructor(t){super(`Invalid inference output: ${t}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}};function pick(t,e){return Object.assign({},...e.map(n=>{if(t[n]!==void 0)return{[n]:t[n]}}))}function typedInclude(t,e){return t.includes(e)}function omit(t,e){const n=Array.isArray(e)?e:[e],r=Object.keys(t).filter(a=>!typedInclude(n,a));return pick(t,r)}function preparePayload(t){return"data"in t?t:{...omit(t,"inputs"),data:t.inputs}}async function audioClassification(t,e){const n=preparePayload(t),r=await request(n,{...e,taskHint:"audio-classification"});if(!(Array.isArray(r)&&r.every(o=>typeof o.label=="string"&&typeof o.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return r}function base64FromBytes(t){if(globalThis.Buffer)return globalThis.Buffer.from(t).toString("base64");{const e=[];return t.forEach(n=>{e.push(String.fromCharCode(n))}),globalThis.btoa(e.join(""))}}async function automaticSpeechRecognition(t,e){const n=await buildPayload(t),r=await request(n,{...e,taskHint:"automatic-speech-recognition"});if(!(typeof(r==null?void 0:r.text)=="string"))throw new InferenceOutputError("Expected {text: string}");return r}var FAL_AI_SUPPORTED_BLOB_TYPES=["audio/mpeg","audio/mp4","audio/wav","audio/x-wav"];async function buildPayload(t){if(t.provider==="fal-ai"){const e="data"in t&&t.data instanceof Blob?t.data:"inputs"in t?t.inputs:void 0,n=e==null?void 0:e.type;if(!n)throw new Error("Unable to determine the input's content-type. Make sure your are passing a Blob when using provider fal-ai.");if(!FAL_AI_SUPPORTED_BLOB_TYPES.includes(n))throw new Error(`Provider fal-ai does not support blob type ${n} - supported content types are: ${FAL_AI_SUPPORTED_BLOB_TYPES.join(", ")}`);const r=base64FromBytes(new Uint8Array(await e.arrayBuffer()));return{..."data"in t?omit(t,"data"):omit(t,"inputs"),audio_url:`data:${n};base64,${r}`}}else return preparePayload(t)}async function textToSpeech(t,e){const n=t.provider==="replicate"?{...omit(t,["inputs","parameters"]),...t.parameters,text:t.inputs}:t,r=await request(n,{...e,taskHint:"text-to-speech"});if(r instanceof Blob)return r;if(r&&typeof r=="object"&&"output"in r){if(typeof r.output=="string")return await(await fetch(r.output)).blob();if(Array.isArray(r.output))return await(await fetch(r.output[0])).blob()}throw new InferenceOutputError("Expected Blob or object with output")}async function audioToAudio(t,e){const n=preparePayload(t),r=await request(n,{...e,taskHint:"audio-to-audio"});return validateOutput(r)}function validateOutput(t){if(!Array.isArray(t))throw new InferenceOutputError("Expected Array");if(!t.every(e=>typeof e=="object"&&e&&"label"in e&&typeof e.label=="string"&&"content-type"in e&&typeof e["content-type"]=="string"&&"blob"in e&&typeof e.blob=="string"))throw new InferenceOutputError("Expected Array<{label: string, audio: Blob}>");return t}function preparePayload2(t){return"data"in t?t:{...omit(t,"inputs"),data:t.inputs}}async function imageClassification(t,e){const n=preparePayload2(t),r=await request(n,{...e,taskHint:"image-classification"});if(!(Array.isArray(r)&&r.every(o=>typeof o.label=="string"&&typeof o.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return r}async function imageSegmentation(t,e){const n=preparePayload2(t),r=await request(n,{...e,taskHint:"image-segmentation"});if(!(Array.isArray(r)&&r.every(o=>typeof o.label=="string"&&typeof o.mask=="string"&&typeof o.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, mask: string, score: number}>");return r}async function imageToText(t,e){var a;const n=preparePayload2(t),r=(a=await request(n,{...e,taskHint:"image-to-text"}))==null?void 0:a[0];if(typeof(r==null?void 0:r.generated_text)!="string")throw new InferenceOutputError("Expected {generated_text: string}");return r}async function objectDetection(t,e){const n=preparePayload2(t),r=await request(n,{...e,taskHint:"object-detection"});if(!(Array.isArray(r)&&r.every(o=>typeof o.label=="string"&&typeof o.score=="number"&&typeof o.box.xmin=="number"&&typeof o.box.ymin=="number"&&typeof o.box.xmax=="number"&&typeof o.box.ymax=="number")))throw new InferenceOutputError("Expected Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return r}function getResponseFormatArg(t){switch(t){case"fal-ai":return{sync_mode:!0};case"nebius":return{response_format:"b64_json"};case"replicate":return;case"together":return{response_format:"base64"};default:return}}async function textToImage(t,e){const n=!t.provider||t.provider==="hf-inference"||t.provider==="sambanova"?t:{...omit(t,["inputs","parameters"]),...t.parameters,...getResponseFormatArg(t.provider),prompt:t.inputs},r=await request(n,{...e,taskHint:"text-to-image"});if(r&&typeof r=="object"){if(t.provider==="fal-ai"&&"images"in r&&Array.isArray(r.images)&&r.images[0].url)return await(await fetch(r.images[0].url)).blob();if("data"in r&&Array.isArray(r.data)&&r.data[0].b64_json){const o=r.data[0].b64_json;return await(await fetch(`data:image/jpeg;base64,${o}`)).blob()}if("output"in r&&Array.isArray(r.output))return await(await fetch(r.output[0])).blob()}if(!(r&&r instanceof Blob))throw new InferenceOutputError("Expected Blob");return r}async function imageToImage(t,e){let n;t.parameters?n={...t,inputs:base64FromBytes(new Uint8Array(t.inputs instanceof ArrayBuffer?t.inputs:await t.inputs.arrayBuffer()))}:n={accessToken:t.accessToken,model:t.model,data:t.inputs};const r=await request(n,{...e,taskHint:"image-to-image"});if(!(r&&r instanceof Blob))throw new InferenceOutputError("Expected Blob");return r}async function preparePayload3(t){return t.inputs instanceof Blob?{...t,inputs:{image:base64FromBytes(new Uint8Array(await t.inputs.arrayBuffer()))}}:{...t,inputs:{image:base64FromBytes(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}}}async function zeroShotImageClassification(t,e){const n=await preparePayload3(t),r=await request(n,{...e,taskHint:"zero-shot-image-classification"});if(!(Array.isArray(r)&&r.every(o=>typeof o.label=="string"&&typeof o.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return r}var SUPPORTED_PROVIDERS=["fal-ai","replicate"];async function textToVideo(t,e){if(!t.provider||!typedInclude(SUPPORTED_PROVIDERS,t.provider))throw new Error(`textToVideo inference is only supported for the following providers: ${SUPPORTED_PROVIDERS.join(", ")}`);const n=t.provider==="fal-ai"||t.provider==="replicate"?{...omit(t,["inputs","parameters"]),...t.parameters,prompt:t.inputs}:t,r=await request(n,{...e,taskHint:"text-to-video"});if(t.provider==="fal-ai"){if(!(typeof r=="object"&&!!r&&"video"in r&&typeof r.video=="object"&&!!r.video&&"url"in r.video&&typeof r.video.url=="string"&&isUrl(r.video.url)))throw new InferenceOutputError("Expected { video: { url: string } }");return await(await fetch(r.video.url)).blob()}else{if(!(typeof r=="object"&&!!r&&"output"in r&&typeof r.output=="string"&&isUrl(r.output)))throw new InferenceOutputError("Expected { output: string }");return await(await fetch(r.output)).blob()}}var taskCache=new Map,CACHE_DURATION=10*60*1e3,MAX_CACHE_ITEMS=1e3;async function getDefaultTask(t,e,n){if(isUrl(t))return null;const r=`${t}:${e}`;let a=taskCache.get(r);if(a&&a.date<new Date(Date.now()-CACHE_DURATION)&&(taskCache.delete(r),a=void 0),a===void 0){const o=await((n==null?void 0:n.fetch)??fetch)(`${HF_HUB_URL}/api/models/${t}?expand[]=pipeline_tag`,{headers:e?{Authorization:`Bearer ${e}`}:{}}).then(u=>u.json()).then(u=>u.pipeline_tag).catch(()=>null);if(!o)return null;a={task:o,date:new Date},taskCache.set(r,{task:o,date:new Date}),taskCache.size>MAX_CACHE_ITEMS&&taskCache.delete(taskCache.keys().next().value)}return a.task}async function featureExtraction(t,e){const n=t.model?await getDefaultTask(t.model,t.accessToken,e):void 0,r=await request(t,{...e,taskHint:"feature-extraction",...n==="sentence-similarity"&&{forceTask:"feature-extraction"}});let a=!0;const o=(u,h,d=0)=>d>h?!1:u.every(f=>Array.isArray(f))?u.every(f=>o(f,h,d+1)):u.every(f=>typeof f=="number");if(a=Array.isArray(r)&&o(r,3,0),!a)throw new InferenceOutputError("Expected Array<number[][][] | number[][] | number[] | number>");return r}async function fillMask(t,e){const n=await request(t,{...e,taskHint:"fill-mask"});if(!(Array.isArray(n)&&n.every(a=>typeof a.score=="number"&&typeof a.sequence=="string"&&typeof a.token=="number"&&typeof a.token_str=="string")))throw new InferenceOutputError("Expected Array<{score: number, sequence: string, token: number, token_str: string}>");return n}async function questionAnswering(t,e){const n=await request(t,{...e,taskHint:"question-answering"});if(!(Array.isArray(n)?n.every(a=>typeof a=="object"&&!!a&&typeof a.answer=="string"&&typeof a.end=="number"&&typeof a.score=="number"&&typeof a.start=="number"):typeof n=="object"&&!!n&&typeof n.answer=="string"&&typeof n.end=="number"&&typeof n.score=="number"&&typeof n.start=="number"))throw new InferenceOutputError("Expected Array<{answer: string, end: number, score: number, start: number}>");return Array.isArray(n)?n[0]:n}async function sentenceSimilarity(t,e){const n=t.model?await getDefaultTask(t.model,t.accessToken,e):void 0,r=await request(prepareInput(t),{...e,taskHint:"sentence-similarity",...n==="feature-extraction"&&{forceTask:"sentence-similarity"}});if(!(Array.isArray(r)&&r.every(o=>typeof o=="number")))throw new InferenceOutputError("Expected number[]");return r}function prepareInput(t){return{...omit(t,["inputs","parameters"]),inputs:{...omit(t.inputs,"sourceSentence")},parameters:{source_sentence:t.inputs.sourceSentence,...t.parameters}}}async function summarization(t,e){const n=await request(t,{...e,taskHint:"summarization"});if(!(Array.isArray(n)&&n.every(a=>typeof(a==null?void 0:a.summary_text)=="string")))throw new InferenceOutputError("Expected Array<{summary_text: string}>");return n==null?void 0:n[0]}async function tableQuestionAnswering(t,e){const n=await request(t,{...e,taskHint:"table-question-answering"});if(!(Array.isArray(n)?n.every(a=>validate(a)):validate(n)))throw new InferenceOutputError("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}");return Array.isArray(n)?n[0]:n}function validate(t){return typeof t=="object"&&!!t&&"aggregator"in t&&typeof t.aggregator=="string"&&"answer"in t&&typeof t.answer=="string"&&"cells"in t&&Array.isArray(t.cells)&&t.cells.every(e=>typeof e=="string")&&"coordinates"in t&&Array.isArray(t.coordinates)&&t.coordinates.every(e=>Array.isArray(e)&&e.every(n=>typeof n=="number"))}async function textClassification(t,e){var a;const n=(a=await request(t,{...e,taskHint:"text-classification"}))==null?void 0:a[0];if(!(Array.isArray(n)&&n.every(o=>typeof(o==null?void 0:o.label)=="string"&&typeof o.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return n}function toArray(t){return Array.isArray(t)?t:[t]}async function textGeneration(t,e){if(t.provider==="together"){t.prompt=t.inputs;const n=await request(t,{...e,taskHint:"text-generation"});if(!(typeof n=="object"&&"choices"in n&&Array.isArray(n==null?void 0:n.choices)&&typeof(n==null?void 0:n.model)=="string"))throw new InferenceOutputError("Expected ChatCompletionOutput");return{generated_text:n.choices[0].text}}else{const n=toArray(await request(t,{...e,taskHint:"text-generation"}));if(!(Array.isArray(n)&&n.every(a=>"generated_text"in a&&typeof(a==null?void 0:a.generated_text)=="string")))throw new InferenceOutputError("Expected Array<{generated_text: string}>");return n==null?void 0:n[0]}}async function*textGenerationStream(t,e){yield*streamingRequest(t,{...e,taskHint:"text-generation"})}async function tokenClassification(t,e){const n=toArray(await request(t,{...e,taskHint:"token-classification"}));if(!(Array.isArray(n)&&n.every(a=>typeof a.end=="number"&&typeof a.entity_group=="string"&&typeof a.score=="number"&&typeof a.start=="number"&&typeof a.word=="string")))throw new InferenceOutputError("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>");return n}async function translation(t,e){const n=await request(t,{...e,taskHint:"translation"});if(!(Array.isArray(n)&&n.every(a=>typeof(a==null?void 0:a.translation_text)=="string")))throw new InferenceOutputError("Expected type Array<{translation_text: string}>");return(n==null?void 0:n.length)===1?n==null?void 0:n[0]:n}async function zeroShotClassification(t,e){const n=toArray(await request(t,{...e,taskHint:"zero-shot-classification"}));if(!(Array.isArray(n)&&n.every(a=>Array.isArray(a.labels)&&a.labels.every(o=>typeof o=="string")&&Array.isArray(a.scores)&&a.scores.every(o=>typeof o=="number")&&typeof a.sequence=="string")))throw new InferenceOutputError("Expected Array<{labels: string[], scores: number[], sequence: string}>");return n}async function chatCompletion(t,e){const n=await request(t,{...e,taskHint:"text-generation",chatCompletion:!0});if(!(typeof n=="object"&&Array.isArray(n==null?void 0:n.choices)&&typeof(n==null?void 0:n.created)=="number"&&typeof(n==null?void 0:n.id)=="string"&&typeof(n==null?void 0:n.model)=="string"&&(n.system_fingerprint===void 0||n.system_fingerprint===null||typeof n.system_fingerprint=="string")&&typeof(n==null?void 0:n.usage)=="object"))throw new InferenceOutputError("Expected ChatCompletionOutput");return n}async function*chatCompletionStream(t,e){yield*streamingRequest(t,{...e,taskHint:"text-generation",chatCompletion:!0})}async function documentQuestionAnswering(t,e){const n={...t,inputs:{question:t.inputs.question,image:base64FromBytes(new Uint8Array(await t.inputs.image.arrayBuffer()))}},r=toArray(await request(n,{...e,taskHint:"document-question-answering"}));if(!(Array.isArray(r)&&r.every(o=>typeof o=="object"&&!!o&&typeof(o==null?void 0:o.answer)=="string"&&(typeof o.end=="number"||typeof o.end>"u")&&(typeof o.score=="number"||typeof o.score>"u")&&(typeof o.start=="number"||typeof o.start>"u"))))throw new InferenceOutputError("Expected Array<{answer: string, end?: number, score?: number, start?: number}>");return r[0]}async function visualQuestionAnswering(t,e){const n={...t,inputs:{question:t.inputs.question,image:base64FromBytes(new Uint8Array(await t.inputs.image.arrayBuffer()))}},r=await request(n,{...e,taskHint:"visual-question-answering"});if(!(Array.isArray(r)&&r.every(o=>typeof o=="object"&&!!o&&typeof(o==null?void 0:o.answer)=="string"&&typeof o.score=="number")))throw new InferenceOutputError("Expected Array<{answer: string, score: number}>");return r[0]}async function tabularRegression(t,e){const n=await request(t,{...e,taskHint:"tabular-regression"});if(!(Array.isArray(n)&&n.every(a=>typeof a=="number")))throw new InferenceOutputError("Expected number[]");return n}async function tabularClassification(t,e){const n=await request(t,{...e,taskHint:"tabular-classification"});if(!(Array.isArray(n)&&n.every(a=>typeof a=="number")))throw new InferenceOutputError("Expected number[]");return n}var HfInference=class{constructor(t="",e={}){Et(this,"accessToken");Et(this,"defaultOptions");this.accessToken=t,this.defaultOptions=e;for(const[n,r]of Object.entries(tasks_exports))Object.defineProperty(this,n,{enumerable:!1,value:(a,o)=>r({...a,accessToken:t},{...e,...o})})}endpoint(t){return new HfInferenceEndpoint(t,this.accessToken,this.defaultOptions)}},HfInferenceEndpoint=class{constructor(t,e="",n={}){for(const[r,a]of Object.entries(tasks_exports))Object.defineProperty(this,r,{enumerable:!1,value:(o,u)=>a({...o,accessToken:e,endpointUrl:t},{...n,...u})})}};const store={_origin:"https://api.emailjs.com"},init=(t,e="https://api.emailjs.com")=>{store._userID=t,store._origin=e},validateParams=(t,e,n)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class EmailJSResponseStatus{constructor(e){this.status=e.status,this.text=e.responseText}}const sendPost=(t,e,n={})=>new Promise((r,a)=>{const o=new XMLHttpRequest;o.addEventListener("load",({target:u})=>{const h=new EmailJSResponseStatus(u);h.status===200||h.text==="OK"?r(h):a(h)}),o.addEventListener("error",({target:u})=>{a(new EmailJSResponseStatus(u))}),o.open("POST",store._origin+t,!0),Object.keys(n).forEach(u=>{o.setRequestHeader(u,n[u])}),o.send(e)}),send=(t,e,n,r)=>{const a=r||store._userID;return validateParams(a,t,e),sendPost("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:a,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},findHTMLForm=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},sendForm=(t,e,n,r)=>{const a=r||store._userID,o=findHTMLForm(n);validateParams(a,t,e);const u=new FormData(o);return u.append("lib_version","3.2.0"),u.append("service_id",t),u.append("template_id",e),u.append("user_id",a),sendPost("/api/v1.0/email/send-form",u)},emailjs={init,send,sendForm};var FileSaver_min$1={exports:{}},FileSaver_min=FileSaver_min$1.exports,hasRequiredFileSaver_min;function requireFileSaver_min(){return hasRequiredFileSaver_min||(hasRequiredFileSaver_min=1,function(t,e){(function(n,r){r()})(FileSaver_min,function(){function n(f,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function r(f,m,b){var E=new XMLHttpRequest;E.open("GET",f),E.responseType="blob",E.onload=function(){d(E.response,m,b)},E.onerror=function(){console.error("could not download file")},E.send()}function a(f){var m=new XMLHttpRequest;m.open("HEAD",f,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(m)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,h=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(f,m,b){var E=u.URL||u.webkitURL,w=document.createElement("a");m=m||f.name||"download",w.download=m,w.rel="noopener",typeof f=="string"?(w.href=f,w.origin===location.origin?o(w):a(w.href)?r(f,m,b):o(w,w.target="_blank")):(w.href=E.createObjectURL(f),setTimeout(function(){E.revokeObjectURL(w.href)},4e4),setTimeout(function(){o(w)},0))}:"msSaveOrOpenBlob"in navigator?function(f,m,b){if(m=m||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,b),m);else if(a(f))r(f,m,b);else{var E=document.createElement("a");E.href=f,E.target="_blank",setTimeout(function(){o(E)})}}:function(f,m,b,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof f=="string")return r(f,m,b);var w=f.type==="application/octet-stream",y=/constructor/i.test(u.HTMLElement)||u.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||w&&y||h)&&typeof FileReader<"u"){var v=new FileReader;v.onloadend=function(){var k=v.result;k=g?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=k:location=k,E=null},v.readAsDataURL(f)}else{var T=u.URL||u.webkitURL,R=T.createObjectURL(f);E?E.location=R:location.href=R,E=null,setTimeout(function(){T.revokeObjectURL(R)},4e4)}});u.saveAs=d.saveAs=d,t.exports=d})}(FileSaver_min$1)),FileSaver_min$1.exports}var FileSaver_minExports=requireFileSaver_min();function isObject$2(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function extend$2(t,e){t===void 0&&(t={}),e===void 0&&(e={});const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:isObject$2(e[r])&&isObject$2(t[r])&&Object.keys(e[r]).length>0&&extend$2(t[r],e[r])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const t=typeof document<"u"?document:{};return extend$2(t,ssrDocument),t}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function t(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function getWindow(){const t=typeof window<"u"?window:{};return extend$2(t,ssrWindow),t}function classesToTokens(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function deleteProps(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function nextTick(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function now(){return Date.now()}function getComputedStyle$1(t){const e=getWindow();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function getTranslate(t,e){e===void 0&&(e="x");const n=getWindow();let r,a,o;const u=getComputedStyle$1(t);return n.WebKitCSSMatrix?(a=u.transform||u.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(h=>h.replace(",",".")).join(", ")),o=new n.WebKitCSSMatrix(a==="none"?"":a)):(o=u.MozTransform||u.OTransform||u.MsTransform||u.msTransform||u.transform||u.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?a=o.m41:r.length===16?a=parseFloat(r[12]):a=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?a=o.m42:r.length===16?a=parseFloat(r[13]):a=parseFloat(r[5])),a||0}function isObject$1(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function isNode$1(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function extend$1(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(r!=null&&!isNode$1(r)){const a=Object.keys(Object(r)).filter(o=>e.indexOf(o)<0);for(let o=0,u=a.length;o<u;o+=1){const h=a[o],d=Object.getOwnPropertyDescriptor(r,h);d!==void 0&&d.enumerable&&(isObject$1(t[h])&&isObject$1(r[h])?r[h].__swiper__?t[h]=r[h]:extend$1(t[h],r[h]):!isObject$1(t[h])&&isObject$1(r[h])?(t[h]={},r[h].__swiper__?t[h]=r[h]:extend$1(t[h],r[h])):t[h]=r[h])}}}return t}function setCSSProperty(t,e,n){t.style.setProperty(e,n)}function animateCSSModeScroll(t){let{swiper:e,targetPosition:n,side:r}=t;const a=getWindow(),o=-e.translate;let u=null,h;const d=e.params.speed;e.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(e.cssModeFrameID);const f=n>o?"next":"prev",m=(E,w)=>f==="next"&&E>=w||f==="prev"&&E<=w,b=()=>{h=new Date().getTime(),u===null&&(u=h);const E=Math.max(Math.min((h-u)/d,1),0),w=.5-Math.cos(E*Math.PI)/2;let y=o+w*(n-o);if(m(y,n)&&(y=n),e.wrapperEl.scrollTo({[r]:y}),m(y,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:y})}),a.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=a.requestAnimationFrame(b)};b()}function elementChildren(t,e){e===void 0&&(e="");const n=getWindow(),r=[...t.children];return n.HTMLSlotElement&&t instanceof HTMLSlotElement&&r.push(...t.assignedElements()),e?r.filter(a=>a.matches(e)):r}function elementIsChildOfSlot(t,e){const n=[e];for(;n.length>0;){const r=n.shift();if(t===r)return!0;n.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function elementIsChildOf(t,e){const n=getWindow();let r=e.contains(t);return!r&&n.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(t),r||(r=elementIsChildOfSlot(t,e))),r}function showWarning(t){try{console.warn(t);return}catch{}}function createElement(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:classesToTokens(e)),n}function elementOffset(t){const e=getWindow(),n=getDocument(),r=t.getBoundingClientRect(),a=n.body,o=t.clientTop||a.clientTop||0,u=t.clientLeft||a.clientLeft||0,h=t===e?e.scrollY:t.scrollTop,d=t===e?e.scrollX:t.scrollLeft;return{top:r.top+h-o,left:r.left+d-u}}function elementPrevAll(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function elementNextAll(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function elementStyle(t,e){return getWindow().getComputedStyle(t,null).getPropertyValue(e)}function elementIndex(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function elementParents(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}function elementOuterSize(t,e,n){const r=getWindow();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function makeElementsArray(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}let support;function calcSupport(){const t=getWindow(),e=getDocument();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(t){let{userAgent:e}=t===void 0?{}:t;const n=getSupport(),r=getWindow(),a=r.navigator.platform,o=e||r.navigator.userAgent,u={ios:!1,android:!1},h=r.screen.width,d=r.screen.height,f=o.match(/(Android);?[\s\/]+([\d.]+)?/);let m=o.match(/(iPad).*OS\s([\d_]+)/);const b=o.match(/(iPod)(.*OS\s([\d_]+))?/),E=!m&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),w=a==="Win32";let y=a==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!m&&y&&n.touch&&g.indexOf(`${h}x${d}`)>=0&&(m=o.match(/(Version)\/([\d.]+)/),m||(m=[0,1,"13_0_0"]),y=!1),f&&!w&&(u.os="android",u.android=!0),(m||E||b)&&(u.os="ios",u.ios=!0),u}function getDevice(t){return t===void 0&&(t={}),deviceCached||(deviceCached=calcDevice(t)),deviceCached}let browser;function calcBrowser(){const t=getWindow(),e=getDevice();let n=!1;function r(){const h=t.navigator.userAgent.toLowerCase();return h.indexOf("safari")>=0&&h.indexOf("chrome")<0&&h.indexOf("android")<0}if(r()){const h=String(t.navigator.userAgent);if(h.includes("Version/")){const[d,f]=h.split("Version/")[1].split(" ")[0].split(".").map(m=>Number(m));n=d<16||d===16&&f<2}}const a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),o=r(),u=o||a&&e.ios;return{isSafari:n||o,needPerspectiveFix:n,need3dFix:u,isWebView:a}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize(t){let{swiper:e,on:n,emit:r}=t;const a=getWindow();let o=null,u=null;const h=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},d=()=>{!e||e.destroyed||!e.initialized||(o=new ResizeObserver(b=>{u=a.requestAnimationFrame(()=>{const{width:E,height:w}=e;let y=E,g=w;b.forEach(v=>{let{contentBoxSize:T,contentRect:R,target:k}=v;k&&k!==e.el||(y=R?R.width:(T[0]||T).inlineSize,g=R?R.height:(T[0]||T).blockSize)}),(y!==E||g!==w)&&h()})}),o.observe(e.el))},f=()=>{u&&a.cancelAnimationFrame(u),o&&o.unobserve&&e.el&&(o.unobserve(e.el),o=null)},m=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof a.ResizeObserver<"u"){d();return}a.addEventListener("resize",h),a.addEventListener("orientationchange",m)}),n("destroy",()=>{f(),a.removeEventListener("resize",h),a.removeEventListener("orientationchange",m)})}function Observer(t){let{swiper:e,extendParams:n,on:r,emit:a}=t;const o=[],u=getWindow(),h=function(m,b){b===void 0&&(b={});const E=u.MutationObserver||u.WebkitMutationObserver,w=new E(y=>{if(e.__preventObserver__)return;if(y.length===1){a("observerUpdate",y[0]);return}const g=function(){a("observerUpdate",y[0])};u.requestAnimationFrame?u.requestAnimationFrame(g):u.setTimeout(g,0)});w.observe(m,{attributes:typeof b.attributes>"u"?!0:b.attributes,childList:e.isElement||(typeof b.childList>"u"?!0:b).childList,characterData:typeof b.characterData>"u"?!0:b.characterData}),o.push(w)},d=()=>{if(e.params.observer){if(e.params.observeParents){const m=elementParents(e.hostEl);for(let b=0;b<m.length;b+=1)h(m[b])}h(e.hostEl,{childList:e.params.observeSlideChildren}),h(e.wrapperEl,{attributes:!1})}},f=()=>{o.forEach(m=>{m.disconnect()}),o.splice(0,o.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",d),r("destroy",f)}var eventsEmitter={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const a=n?"unshift":"push";return t.split(" ").forEach(o=>{r.eventsListeners[o]||(r.eventsListeners[o]=[]),r.eventsListeners[o][a](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function a(){r.off(t,a),a.__emitterProxy&&delete a.__emitterProxy;for(var o=arguments.length,u=new Array(o),h=0;h<o;h++)u[h]=arguments[h];e.apply(r,u)}return a.__emitterProxy=e,r.on(t,a,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((a,o)=>{(a===e||a.__emitterProxy&&a.__emitterProxy===e)&&n.eventsListeners[r].splice(o,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,r;for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return typeof o[0]=="string"||Array.isArray(o[0])?(e=o[0],n=o.slice(1,o.length),r=t):(e=o[0].events,n=o[0].data,r=o[0].context||t),n.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(d=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(f=>{f.apply(r,[d,...n])}),t.eventsListeners&&t.eventsListeners[d]&&t.eventsListeners[d].forEach(f=>{f.apply(r,n)})}),t}};function updateSize(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(elementStyle(r,"padding-left")||0,10)-parseInt(elementStyle(r,"padding-right")||0,10),n=n-parseInt(elementStyle(r,"padding-top")||0,10)-parseInt(elementStyle(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function updateSlides(){const t=this;function e(j,B){return parseFloat(j.getPropertyValue(t.getDirectionLabel(B))||0)}const n=t.params,{wrapperEl:r,slidesEl:a,size:o,rtlTranslate:u,wrongRTL:h}=t,d=t.virtual&&n.virtual.enabled,f=d?t.virtual.slides.length:t.slides.length,m=elementChildren(a,`.${t.params.slideClass}, swiper-slide`),b=d?t.virtual.slides.length:m.length;let E=[];const w=[],y=[];let g=n.slidesOffsetBefore;typeof g=="function"&&(g=n.slidesOffsetBefore.call(t));let v=n.slidesOffsetAfter;typeof v=="function"&&(v=n.slidesOffsetAfter.call(t));const T=t.snapGrid.length,R=t.slidesGrid.length;let k=n.spaceBetween,x=-g,S=0,O=0;if(typeof o>"u")return;typeof k=="string"&&k.indexOf("%")>=0?k=parseFloat(k.replace("%",""))/100*o:typeof k=="string"&&(k=parseFloat(k)),t.virtualSize=-k,m.forEach(j=>{u?j.style.marginLeft="":j.style.marginRight="",j.style.marginBottom="",j.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(setCSSProperty(r,"--swiper-centered-offset-before",""),setCSSProperty(r,"--swiper-centered-offset-after",""));const A=n.grid&&n.grid.rows>1&&t.grid;A?t.grid.initSlides(m):t.grid&&t.grid.unsetSlides();let I;const P=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(j=>typeof n.breakpoints[j].slidesPerView<"u").length>0;for(let j=0;j<b;j+=1){I=0;let B;if(m[j]&&(B=m[j]),A&&t.grid.updateSlide(j,B,m),!(m[j]&&elementStyle(B,"display")==="none")){if(n.slidesPerView==="auto"){P&&(m[j].style[t.getDirectionLabel("width")]="");const ie=getComputedStyle(B),oe=B.style.transform,le=B.style.webkitTransform;if(oe&&(B.style.transform="none"),le&&(B.style.webkitTransform="none"),n.roundLengths)I=t.isHorizontal()?elementOuterSize(B,"width"):elementOuterSize(B,"height");else{const de=e(ie,"width"),K=e(ie,"padding-left"),J=e(ie,"padding-right"),se=e(ie,"margin-left"),ue=e(ie,"margin-right"),q=ie.getPropertyValue("box-sizing");if(q&&q==="border-box")I=de+se+ue;else{const{clientWidth:fe,offsetWidth:Z}=B;I=de+K+J+se+ue+(Z-fe)}}oe&&(B.style.transform=oe),le&&(B.style.webkitTransform=le),n.roundLengths&&(I=Math.floor(I))}else I=(o-(n.slidesPerView-1)*k)/n.slidesPerView,n.roundLengths&&(I=Math.floor(I)),m[j]&&(m[j].style[t.getDirectionLabel("width")]=`${I}px`);m[j]&&(m[j].swiperSlideSize=I),y.push(I),n.centeredSlides?(x=x+I/2+S/2+k,S===0&&j!==0&&(x=x-o/2-k),j===0&&(x=x-o/2-k),Math.abs(x)<1/1e3&&(x=0),n.roundLengths&&(x=Math.floor(x)),O%n.slidesPerGroup===0&&E.push(x),w.push(x)):(n.roundLengths&&(x=Math.floor(x)),(O-Math.min(t.params.slidesPerGroupSkip,O))%t.params.slidesPerGroup===0&&E.push(x),w.push(x),x=x+I+k),t.virtualSize+=I+k,S=I,O+=1}}if(t.virtualSize=Math.max(t.virtualSize,o)+v,u&&h&&(n.effect==="slide"||n.effect==="coverflow")&&(r.style.width=`${t.virtualSize+k}px`),n.setWrapperSize&&(r.style[t.getDirectionLabel("width")]=`${t.virtualSize+k}px`),A&&t.grid.updateWrapperSize(I,E),!n.centeredSlides){const j=[];for(let B=0;B<E.length;B+=1){let ie=E[B];n.roundLengths&&(ie=Math.floor(ie)),E[B]<=t.virtualSize-o&&j.push(ie)}E=j,Math.floor(t.virtualSize-o)-Math.floor(E[E.length-1])>1&&E.push(t.virtualSize-o)}if(d&&n.loop){const j=y[0]+k;if(n.slidesPerGroup>1){const B=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),ie=j*n.slidesPerGroup;for(let oe=0;oe<B;oe+=1)E.push(E[E.length-1]+ie)}for(let B=0;B<t.virtual.slidesBefore+t.virtual.slidesAfter;B+=1)n.slidesPerGroup===1&&E.push(E[E.length-1]+j),w.push(w[w.length-1]+j),t.virtualSize+=j}if(E.length===0&&(E=[0]),k!==0){const j=t.isHorizontal()&&u?"marginLeft":t.getDirectionLabel("marginRight");m.filter((B,ie)=>!n.cssMode||n.loop?!0:ie!==m.length-1).forEach(B=>{B.style[j]=`${k}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let j=0;y.forEach(ie=>{j+=ie+(k||0)}),j-=k;const B=j>o?j-o:0;E=E.map(ie=>ie<=0?-g:ie>B?B+v:ie)}if(n.centerInsufficientSlides){let j=0;y.forEach(ie=>{j+=ie+(k||0)}),j-=k;const B=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(j+B<o){const ie=(o-j-B)/2;E.forEach((oe,le)=>{E[le]=oe-ie}),w.forEach((oe,le)=>{w[le]=oe+ie})}}if(Object.assign(t,{slides:m,snapGrid:E,slidesGrid:w,slidesSizesGrid:y}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){setCSSProperty(r,"--swiper-centered-offset-before",`${-E[0]}px`),setCSSProperty(r,"--swiper-centered-offset-after",`${t.size/2-y[y.length-1]/2}px`);const j=-t.snapGrid[0],B=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(ie=>ie+j),t.slidesGrid=t.slidesGrid.map(ie=>ie+B)}if(b!==f&&t.emit("slidesLengthChange"),E.length!==T&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),w.length!==R&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!d&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const j=`${n.containerModifierClass}backface-hidden`,B=t.el.classList.contains(j);b<=n.maxBackfaceHiddenSlides?B||t.el.classList.add(j):B&&t.el.classList.remove(j)}}function updateAutoHeight(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let a=0,o;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const u=h=>r?e.slides[e.getSlideIndexByData(h)]:e.slides[h];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(h=>{n.push(h)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const h=e.activeIndex+o;if(h>e.slides.length&&!r)break;n.push(u(h))}else n.push(u(e.activeIndex));for(o=0;o<n.length;o+=1)if(typeof n[o]<"u"){const h=n[o].offsetHeight;a=h>a?h:a}(a||a===0)&&(e.wrapperEl.style.height=`${a}px`)}function updateSlidesOffset(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n-t.cssOverflowAdjustment()}const toggleSlideClasses$1=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function updateSlidesProgress(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:r,rtlTranslate:a,snapGrid:o}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let u=-t;a&&(u=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let h=n.spaceBetween;typeof h=="string"&&h.indexOf("%")>=0?h=parseFloat(h.replace("%",""))/100*e.size:typeof h=="string"&&(h=parseFloat(h));for(let d=0;d<r.length;d+=1){const f=r[d];let m=f.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(m-=r[0].swiperSlideOffset);const b=(u+(n.centeredSlides?e.minTranslate():0)-m)/(f.swiperSlideSize+h),E=(u-o[0]+(n.centeredSlides?e.minTranslate():0)-m)/(f.swiperSlideSize+h),w=-(u-m),y=w+e.slidesSizesGrid[d],g=w>=0&&w<=e.size-e.slidesSizesGrid[d],v=w>=0&&w<e.size-1||y>1&&y<=e.size||w<=0&&y>=e.size;v&&(e.visibleSlides.push(f),e.visibleSlidesIndexes.push(d)),toggleSlideClasses$1(f,v,n.slideVisibleClass),toggleSlideClasses$1(f,g,n.slideFullyVisibleClass),f.progress=a?-b:b,f.originalProgress=a?-E:E}}function updateProgress(t){const e=this;if(typeof t>"u"){const m=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*m||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:a,isBeginning:o,isEnd:u,progressLoop:h}=e;const d=o,f=u;if(r===0)a=0,o=!0,u=!0;else{a=(t-e.minTranslate())/r;const m=Math.abs(t-e.minTranslate())<1,b=Math.abs(t-e.maxTranslate())<1;o=m||a<=0,u=b||a>=1,m&&(a=0),b&&(a=1)}if(n.loop){const m=e.getSlideIndexByData(0),b=e.getSlideIndexByData(e.slides.length-1),E=e.slidesGrid[m],w=e.slidesGrid[b],y=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(t);g>=E?h=(g-E)/y:h=(g+y-w)/y,h>1&&(h-=1)}Object.assign(e,{progress:a,progressLoop:h,isBeginning:o,isEnd:u}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),o&&!d&&e.emit("reachBeginning toEdge"),u&&!f&&e.emit("reachEnd toEdge"),(d&&!o||f&&!u)&&e.emit("fromEdge"),e.emit("progress",a)}const toggleSlideClasses=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function updateSlidesClasses(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:a}=t,o=t.virtual&&n.virtual.enabled,u=t.grid&&n.grid&&n.grid.rows>1,h=b=>elementChildren(r,`.${n.slideClass}${b}, swiper-slide${b}`)[0];let d,f,m;if(o)if(n.loop){let b=a-t.virtual.slidesBefore;b<0&&(b=t.virtual.slides.length+b),b>=t.virtual.slides.length&&(b-=t.virtual.slides.length),d=h(`[data-swiper-slide-index="${b}"]`)}else d=h(`[data-swiper-slide-index="${a}"]`);else u?(d=e.find(b=>b.column===a),m=e.find(b=>b.column===a+1),f=e.find(b=>b.column===a-1)):d=e[a];d&&(u||(m=elementNextAll(d,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!m&&(m=e[0]),f=elementPrevAll(d,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!f===0&&(f=e[e.length-1]))),e.forEach(b=>{toggleSlideClasses(b,b===d,n.slideActiveClass),toggleSlideClasses(b,b===m,n.slideNextClass),toggleSlideClasses(b,b===f,n.slidePrevClass)}),t.emitSlidesClasses()}const processLazyPreloader=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){let a=r.querySelector(`.${t.params.lazyPreloaderClass}`);!a&&t.isElement&&(r.shadowRoot?a=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(a=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),a&&a.remove())})),a&&a.remove()}},unlazy=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},preload=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const r=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),a=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const u=a,h=[u-e];h.push(...Array.from({length:e}).map((d,f)=>u+r+f)),t.slides.forEach((d,f)=>{h.includes(d.column)&&unlazy(t,f)});return}const o=a+r-1;if(t.params.rewind||t.params.loop)for(let u=a-e;u<=o+e;u+=1){const h=(u%n+n)%n;(h<a||h>o)&&unlazy(t,h)}else for(let u=Math.max(a-e,0);u<=Math.min(o+e,n-1);u+=1)u!==a&&(u>o||u<a)&&unlazy(t,u)};function getActiveIndexByTranslate(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let a;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?r>=e[o]&&r<e[o+1]-(e[o+1]-e[o])/2?a=o:r>=e[o]&&r<e[o+1]&&(a=o+1):r>=e[o]&&(a=o);return n.normalizeSlideIndex&&(a<0||typeof a>"u")&&(a=0),a}function updateActiveIndex(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:a,activeIndex:o,realIndex:u,snapIndex:h}=e;let d=t,f;const m=w=>{let y=w-e.virtual.slidesBefore;return y<0&&(y=e.virtual.slides.length+y),y>=e.virtual.slides.length&&(y-=e.virtual.slides.length),y};if(typeof d>"u"&&(d=getActiveIndexByTranslate(e)),r.indexOf(n)>=0)f=r.indexOf(n);else{const w=Math.min(a.slidesPerGroupSkip,d);f=w+Math.floor((d-w)/a.slidesPerGroup)}if(f>=r.length&&(f=r.length-1),d===o&&!e.params.loop){f!==h&&(e.snapIndex=f,e.emit("snapIndexChange"));return}if(d===o&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=m(d);return}const b=e.grid&&a.grid&&a.grid.rows>1;let E;if(e.virtual&&a.virtual.enabled&&a.loop)E=m(d);else if(b){const w=e.slides.find(g=>g.column===d);let y=parseInt(w.getAttribute("data-swiper-slide-index"),10);Number.isNaN(y)&&(y=Math.max(e.slides.indexOf(w),0)),E=Math.floor(y/a.grid.rows)}else if(e.slides[d]){const w=e.slides[d].getAttribute("data-swiper-slide-index");w?E=parseInt(w,10):E=d}else E=d;Object.assign(e,{previousSnapIndex:h,snapIndex:f,previousRealIndex:u,realIndex:E,previousIndex:o,activeIndex:d}),e.initialized&&preload(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(u!==E&&e.emit("realIndexChange"),e.emit("slideChange"))}function updateClickedSlide(t,e){const n=this,r=n.params;let a=t.closest(`.${r.slideClass}, swiper-slide`);!a&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(h=>{!a&&h.matches&&h.matches(`.${r.slideClass}, swiper-slide`)&&(a=h)});let o=!1,u;if(a){for(let h=0;h<n.slides.length;h+=1)if(n.slides[h]===a){o=!0,u=h;break}}if(a&&o)n.clickedSlide=a,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(a.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=u;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}r.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:r,translate:a,wrapperEl:o}=e;if(n.virtualTranslate)return r?-a:a;if(n.cssMode)return a;let u=getTranslate(o,t);return u+=e.cssOverflowAdjustment(),r&&(u=-u),u||0}function setTranslate(t,e){const n=this,{rtlTranslate:r,params:a,wrapperEl:o,progress:u}=n;let h=0,d=0;const f=0;n.isHorizontal()?h=r?-t:t:d=t,a.roundLengths&&(h=Math.floor(h),d=Math.floor(d)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?h:d,a.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-h:-d:a.virtualTranslate||(n.isHorizontal()?h-=n.cssOverflowAdjustment():d-=n.cssOverflowAdjustment(),o.style.transform=`translate3d(${h}px, ${d}px, ${f}px)`);let m;const b=n.maxTranslate()-n.minTranslate();b===0?m=0:m=(t-n.minTranslate())/b,m!==u&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(t,e,n,r,a){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),r===void 0&&(r=!0);const o=this,{params:u,wrapperEl:h}=o;if(o.animating&&u.preventInteractionOnTransition)return!1;const d=o.minTranslate(),f=o.maxTranslate();let m;if(r&&t>d?m=d:r&&t<f?m=f:m=t,o.updateProgress(m),u.cssMode){const b=o.isHorizontal();if(e===0)h[b?"scrollLeft":"scrollTop"]=-m;else{if(!o.support.smoothScroll)return animateCSSModeScroll({swiper:o,targetPosition:-m,side:b?"left":"top"}),!0;h.scrollTo({[b?"left":"top"]:-m,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(m),n&&(o.emit("beforeTransitionStart",e,a),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(m),n&&(o.emit("beforeTransitionStart",e,a),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(E){!o||o.destroyed||E.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,n&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function transitionEmit(t){let{swiper:e,runCallbacks:n,direction:r,step:a}=t;const{activeIndex:o,previousIndex:u}=e;let h=r;if(h||(o>u?h="next":o<u?h="prev":h="reset"),e.emit(`transition${a}`),n&&o!==u){if(h==="reset"){e.emit(`slideResetTransition${a}`);return}e.emit(`slideChangeTransition${a}`),h==="next"?e.emit(`slideNextTransition${a}`):e.emit(`slidePrevTransition${a}`)}}function transitionStart(t,e){t===void 0&&(t=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),transitionEmit({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function transitionEnd(t,e){t===void 0&&(t=!0);const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),transitionEmit({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(t,e,n,r,a){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const o=this;let u=t;u<0&&(u=0);const{params:h,snapGrid:d,slidesGrid:f,previousIndex:m,activeIndex:b,rtlTranslate:E,wrapperEl:w,enabled:y}=o;if(!y&&!r&&!a||o.destroyed||o.animating&&h.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=o.params.speed);const g=Math.min(o.params.slidesPerGroupSkip,u);let v=g+Math.floor((u-g)/o.params.slidesPerGroup);v>=d.length&&(v=d.length-1);const T=-d[v];if(h.normalizeSlideIndex)for(let A=0;A<f.length;A+=1){const I=-Math.floor(T*100),P=Math.floor(f[A]*100),j=Math.floor(f[A+1]*100);typeof f[A+1]<"u"?I>=P&&I<j-(j-P)/2?u=A:I>=P&&I<j&&(u=A+1):I>=P&&(u=A)}if(o.initialized&&u!==b&&(!o.allowSlideNext&&(E?T>o.translate&&T>o.minTranslate():T<o.translate&&T<o.minTranslate())||!o.allowSlidePrev&&T>o.translate&&T>o.maxTranslate()&&(b||0)!==u))return!1;u!==(m||0)&&n&&o.emit("beforeSlideChangeStart"),o.updateProgress(T);let R;u>b?R="next":u<b?R="prev":R="reset";const k=o.virtual&&o.params.virtual.enabled;if(!(k&&a)&&(E&&-T===o.translate||!E&&T===o.translate))return o.updateActiveIndex(u),h.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),h.effect!=="slide"&&o.setTranslate(T),R!=="reset"&&(o.transitionStart(n,R),o.transitionEnd(n,R)),!1;if(h.cssMode){const A=o.isHorizontal(),I=E?T:-T;if(e===0)k&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),k&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{w[A?"scrollLeft":"scrollTop"]=I})):w[A?"scrollLeft":"scrollTop"]=I,k&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return animateCSSModeScroll({swiper:o,targetPosition:I,side:A?"left":"top"}),!0;w.scrollTo({[A?"left":"top"]:I,behavior:"smooth"})}return!0}const O=getBrowser().isSafari;return k&&!a&&O&&o.isElement&&o.virtual.update(!1,!1,u),o.setTransition(e),o.setTranslate(T),o.updateActiveIndex(u),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,r),o.transitionStart(n,R),e===0?o.transitionEnd(n,R):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(I){!o||o.destroyed||I.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(n,R))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(t,e,n,r){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const a=this;if(a.destroyed)return;typeof e>"u"&&(e=a.params.speed);const o=a.grid&&a.params.grid&&a.params.grid.rows>1;let u=t;if(a.params.loop)if(a.virtual&&a.params.virtual.enabled)u=u+a.virtual.slidesBefore;else{let h;if(o){const E=u*a.params.grid.rows;h=a.slides.find(w=>w.getAttribute("data-swiper-slide-index")*1===E).column}else h=a.getSlideIndexByData(u);const d=o?Math.ceil(a.slides.length/a.params.grid.rows):a.slides.length,{centeredSlides:f}=a.params;let m=a.params.slidesPerView;m==="auto"?m=a.slidesPerViewDynamic():(m=Math.ceil(parseFloat(a.params.slidesPerView,10)),f&&m%2===0&&(m=m+1));let b=d-h<m;if(f&&(b=b||h<Math.ceil(m/2)),r&&f&&a.params.slidesPerView!=="auto"&&!o&&(b=!1),b){const E=f?h<a.activeIndex?"prev":"next":h-a.activeIndex-1<a.params.slidesPerView?"next":"prev";a.loopFix({direction:E,slideTo:!0,activeSlideIndex:E==="next"?h+1:h-d+1,slideRealIndex:E==="next"?a.realIndex:void 0})}if(o){const E=u*a.params.grid.rows;u=a.slides.find(w=>w.getAttribute("data-swiper-slide-index")*1===E).column}else u=a.getSlideIndexByData(u)}return requestAnimationFrame(()=>{a.slideTo(u,e,n,r)}),a}function slideNext(t,e,n){e===void 0&&(e=!0);const r=this,{enabled:a,params:o,animating:u}=r;if(!a||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);let h=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(h=Math.max(r.slidesPerViewDynamic("current",!0),1));const d=r.activeIndex<o.slidesPerGroupSkip?1:h,f=r.virtual&&o.virtual.enabled;if(o.loop){if(u&&!f&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+d,t,e,n)}),!0}return o.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+d,t,e,n)}function slidePrev(t,e,n){e===void 0&&(e=!0);const r=this,{params:a,snapGrid:o,slidesGrid:u,rtlTranslate:h,enabled:d,animating:f}=r;if(!d||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);const m=r.virtual&&a.virtual.enabled;if(a.loop){if(f&&!m&&a.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const b=h?r.translate:-r.translate;function E(R){return R<0?-Math.floor(Math.abs(R)):Math.floor(R)}const w=E(b),y=o.map(R=>E(R)),g=a.freeMode&&a.freeMode.enabled;let v=o[y.indexOf(w)-1];if(typeof v>"u"&&(a.cssMode||g)){let R;o.forEach((k,x)=>{w>=k&&(R=x)}),typeof R<"u"&&(v=g?o[R]:o[R>0?R-1:R])}let T=0;if(typeof v<"u"&&(T=u.indexOf(v),T<0&&(T=r.activeIndex-1),a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(T=T-r.slidesPerViewDynamic("previous",!0)+1,T=Math.max(T,0))),a.rewind&&r.isBeginning){const R=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(R,t,e,n)}else if(a.loop&&r.activeIndex===0&&a.cssMode)return requestAnimationFrame(()=>{r.slideTo(T,t,e,n)}),!0;return r.slideTo(T,t,e,n)}function slideReset(t,e,n){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof t>"u"&&(t=r.params.speed),r.slideTo(r.activeIndex,t,e,n)}function slideToClosest(t,e,n,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const a=this;if(a.destroyed)return;typeof t>"u"&&(t=a.params.speed);let o=a.activeIndex;const u=Math.min(a.params.slidesPerGroupSkip,o),h=u+Math.floor((o-u)/a.params.slidesPerGroup),d=a.rtlTranslate?a.translate:-a.translate;if(d>=a.snapGrid[h]){const f=a.snapGrid[h],m=a.snapGrid[h+1];d-f>(m-f)*r&&(o+=a.params.slidesPerGroup)}else{const f=a.snapGrid[h-1],m=a.snapGrid[h];d-f<=(m-f)*r&&(o-=a.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,a.slidesGrid.length-1),a.slideTo(o,t,e,n)}function slideToClickedSlide(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let a=t.clickedIndex,o;const u=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;o=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?a<t.loopedSlides-r/2||a>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),a=t.getSlideIndex(elementChildren(n,`${u}[data-swiper-slide-index="${o}"]`)[0]),nextTick(()=>{t.slideTo(a)})):t.slideTo(a):a>t.slides.length-r?(t.loopFix(),a=t.getSlideIndex(elementChildren(n,`${u}[data-swiper-slide-index="${o}"]`)[0]),nextTick(()=>{t.slideTo(a)})):t.slideTo(a)}else t.slideTo(a)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;const a=()=>{elementChildren(r,`.${n.slideClass}, swiper-slide`).forEach((b,E)=>{b.setAttribute("data-swiper-slide-index",E)})},o=e.grid&&n.grid&&n.grid.rows>1,u=n.slidesPerGroup*(o?n.grid.rows:1),h=e.slides.length%u!==0,d=o&&e.slides.length%n.grid.rows!==0,f=m=>{for(let b=0;b<m;b+=1){const E=e.isElement?createElement("swiper-slide",[n.slideBlankClass]):createElement("div",[n.slideClass,n.slideBlankClass]);e.slidesEl.append(E)}};if(h){if(n.loopAddBlankSlides){const m=u-e.slides.length%u;f(m),e.recalcSlides(),e.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(d){if(n.loopAddBlankSlides){const m=n.grid.rows-e.slides.length%n.grid.rows;f(m),e.recalcSlides(),e.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function loopFix(t){let{slideRealIndex:e,slideTo:n=!0,direction:r,setTranslate:a,activeSlideIndex:o,byController:u,byMousewheel:h}=t===void 0?{}:t;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:f,allowSlidePrev:m,allowSlideNext:b,slidesEl:E,params:w}=d,{centeredSlides:y}=w;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&w.virtual.enabled){n&&(!w.centeredSlides&&d.snapIndex===0?d.slideTo(d.virtual.slides.length,0,!1,!0):w.centeredSlides&&d.snapIndex<w.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0)),d.allowSlidePrev=m,d.allowSlideNext=b,d.emit("loopFix");return}let g=w.slidesPerView;g==="auto"?g=d.slidesPerViewDynamic():(g=Math.ceil(parseFloat(w.slidesPerView,10)),y&&g%2===0&&(g=g+1));const v=w.slidesPerGroupAuto?g:w.slidesPerGroup;let T=v;T%v!==0&&(T+=v-T%v),T+=w.loopAdditionalSlides,d.loopedSlides=T;const R=d.grid&&w.grid&&w.grid.rows>1;f.length<g+T?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):R&&w.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const k=[],x=[];let S=d.activeIndex;typeof o>"u"?o=d.getSlideIndex(f.find(oe=>oe.classList.contains(w.slideActiveClass))):S=o;const O=r==="next"||!r,A=r==="prev"||!r;let I=0,P=0;const j=R?Math.ceil(f.length/w.grid.rows):f.length,ie=(R?f[o].column:o)+(y&&typeof a>"u"?-g/2+.5:0);if(ie<T){I=Math.max(T-ie,v);for(let oe=0;oe<T-ie;oe+=1){const le=oe-Math.floor(oe/j)*j;if(R){const de=j-le-1;for(let K=f.length-1;K>=0;K-=1)f[K].column===de&&k.push(K)}else k.push(j-le-1)}}else if(ie+g>j-T){P=Math.max(ie-(j-T*2),v);for(let oe=0;oe<P;oe+=1){const le=oe-Math.floor(oe/j)*j;R?f.forEach((de,K)=>{de.column===le&&x.push(K)}):x.push(le)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),A&&k.forEach(oe=>{f[oe].swiperLoopMoveDOM=!0,E.prepend(f[oe]),f[oe].swiperLoopMoveDOM=!1}),O&&x.forEach(oe=>{f[oe].swiperLoopMoveDOM=!0,E.append(f[oe]),f[oe].swiperLoopMoveDOM=!1}),d.recalcSlides(),w.slidesPerView==="auto"?d.updateSlides():R&&(k.length>0&&A||x.length>0&&O)&&d.slides.forEach((oe,le)=>{d.grid.updateSlide(le,oe,d.slides)}),w.watchSlidesProgress&&d.updateSlidesOffset(),n){if(k.length>0&&A){if(typeof e>"u"){const oe=d.slidesGrid[S],de=d.slidesGrid[S+I]-oe;h?d.setTranslate(d.translate-de):(d.slideTo(S+Math.ceil(I),0,!1,!0),a&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-de,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-de))}else if(a){const oe=R?k.length/w.grid.rows:k.length;d.slideTo(d.activeIndex+oe,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(x.length>0&&O)if(typeof e>"u"){const oe=d.slidesGrid[S],de=d.slidesGrid[S-P]-oe;h?d.setTranslate(d.translate-de):(d.slideTo(S-P,0,!1,!0),a&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-de,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-de))}else{const oe=R?x.length/w.grid.rows:x.length;d.slideTo(d.activeIndex-oe,0,!1,!0)}}if(d.allowSlidePrev=m,d.allowSlideNext=b,d.controller&&d.controller.control&&!u){const oe={slideRealIndex:e,direction:r,setTranslate:a,activeSlideIndex:o,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(le=>{!le.destroyed&&le.params.loop&&le.loopFix({...oe,slideTo:le.params.slidesPerView===w.slidesPerView?n:!1})}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...oe,slideTo:d.controller.control.params.slidesPerView===w.slidesPerView?n:!1})}d.emit("loopFix")}function loopDestroy(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach(a=>{const o=typeof a.swiperSlideIndex>"u"?a.getAttribute("data-swiper-slide-index")*1:a.swiperSlideIndex;r[o]=a}),t.slides.forEach(a=>{a.removeAttribute("data-swiper-slide-index")}),r.forEach(a=>{n.append(a)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function unsetGrabCursor(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(t,e){e===void 0&&(e=this);function n(r){if(!r||r===getDocument()||r===getWindow())return null;r.assignedSlot&&(r=r.assignedSlot);const a=r.closest(t);return!a&&!r.getRootNode?null:a||n(r.getRootNode().host)}return n(e)}function preventEdgeSwipe(t,e,n){const r=getWindow(),{params:a}=t,o=a.edgeSwipeDetection,u=a.edgeSwipeThreshold;return o&&(n<=u||n>=r.innerWidth-u)?o==="prevent"?(e.preventDefault(),!0):!1:!0}function onTouchStart(t){const e=this,n=getDocument();let r=t;r.originalEvent&&(r=r.originalEvent);const a=e.touchEventsData;if(r.type==="pointerdown"){if(a.pointerId!==null&&a.pointerId!==r.pointerId)return;a.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(a.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){preventEdgeSwipe(e,r,r.targetTouches[0].pageX);return}const{params:o,touches:u,enabled:h}=e;if(!h||!o.simulateTouch&&r.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let d=r.target;if(o.touchEventsTarget==="wrapper"&&!elementIsChildOf(d,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||a.isTouched&&a.isMoved)return;const f=!!o.noSwipingClass&&o.noSwipingClass!=="",m=r.composedPath?r.composedPath():r.path;f&&r.target&&r.target.shadowRoot&&m&&(d=m[0]);const b=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,E=!!(r.target&&r.target.shadowRoot);if(o.noSwiping&&(E?closestElement(b,d):d.closest(b))){e.allowClick=!0;return}if(o.swipeHandler&&!d.closest(o.swipeHandler))return;u.currentX=r.pageX,u.currentY=r.pageY;const w=u.currentX,y=u.currentY;if(!preventEdgeSwipe(e,r,w))return;Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),u.startX=w,u.startY=y,a.touchStartTime=now(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(a.allowThresholdMove=!1);let g=!0;d.matches(a.focusableElements)&&(g=!1,d.nodeName==="SELECT"&&(a.isTouched=!1)),n.activeElement&&n.activeElement.matches(a.focusableElements)&&n.activeElement!==d&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!d.matches(a.focusableElements))&&n.activeElement.blur();const v=g&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||v)&&!d.isContentEditable&&r.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function onTouchMove(t){const e=getDocument(),n=this,r=n.touchEventsData,{params:a,touches:o,rtlTranslate:u,enabled:h}=n;if(!h||!a.simulateTouch&&t.pointerType==="mouse")return;let d=t;if(d.originalEvent&&(d=d.originalEvent),d.type==="pointermove"&&(r.touchId!==null||d.pointerId!==r.pointerId))return;let f;if(d.type==="touchmove"){if(f=[...d.changedTouches].find(S=>S.identifier===r.touchId),!f||f.identifier!==r.touchId)return}else f=d;if(!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",d);return}const m=f.pageX,b=f.pageY;if(d.preventedByNestedSwiper){o.startX=m,o.startY=b;return}if(!n.allowTouchMove){d.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(o,{startX:m,startY:b,currentX:m,currentY:b}),r.touchStartTime=now());return}if(a.touchReleaseOnEdges&&!a.loop){if(n.isVertical()){if(b<o.startY&&n.translate<=n.maxTranslate()||b>o.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(m<o.startX&&n.translate<=n.maxTranslate()||m>o.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==d.target&&d.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&d.target===e.activeElement&&d.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}r.allowTouchCallbacks&&n.emit("touchMove",d),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=m,o.currentY=b;const E=o.currentX-o.startX,w=o.currentY-o.startY;if(n.params.threshold&&Math.sqrt(E**2+w**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let S;n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:E*E+w*w>=25&&(S=Math.atan2(Math.abs(w),Math.abs(E))*180/Math.PI,r.isScrolling=n.isHorizontal()?S>a.touchAngle:90-S>a.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",d),typeof r.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(r.startMoving=!0),r.isScrolling||d.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!a.cssMode&&d.cancelable&&d.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&d.stopPropagation();let y=n.isHorizontal()?E:w,g=n.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;a.oneWayMovement&&(y=Math.abs(y)*(u?1:-1),g=Math.abs(g)*(u?1:-1)),o.diff=y,y*=a.touchRatio,u&&(y=-y,g=-g);const v=n.touchesDirection;n.swipeDirection=y>0?"prev":"next",n.touchesDirection=g>0?"prev":"next";const T=n.params.loop&&!a.cssMode,R=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!r.isMoved){if(T&&R&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const S=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(S)}r.allowMomentumBounce=!1,a.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",d)}if(new Date().getTime(),a._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&v!==n.touchesDirection&&T&&R&&Math.abs(y)>=1){Object.assign(o,{startX:m,startY:b,currentX:m,currentY:b,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}n.emit("sliderMove",d),r.isMoved=!0,r.currentTranslate=y+r.startTranslate;let k=!0,x=a.resistanceRatio;if(a.touchReleaseOnEdges&&(x=0),y>0?(T&&R&&r.allowThresholdMove&&r.currentTranslate>(a.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(a.slidesPerView!=="auto"&&n.slides.length-a.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(k=!1,a.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+y)**x))):y<0&&(T&&R&&r.allowThresholdMove&&r.currentTranslate<(a.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(a.slidesPerView!=="auto"&&n.slides.length-a.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(a.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(k=!1,a.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-y)**x))),k&&(d.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),a.threshold>0)if(Math.abs(y)>a.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{r.currentTranslate=r.startTranslate;return}!a.followFinger||a.cssMode||((a.freeMode&&a.freeMode.enabled&&n.freeMode||a.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function onTouchEnd(t){const e=this,n=e.touchEventsData;let r=t;r.originalEvent&&(r=r.originalEvent);let a;if(r.type==="touchend"||r.type==="touchcancel"){if(a=[...r.changedTouches].find(S=>S.identifier===n.touchId),!a||a.identifier!==n.touchId)return}else{if(n.touchId!==null||r.pointerId!==n.pointerId)return;a=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:u,touches:h,rtlTranslate:d,slidesGrid:f,enabled:m}=e;if(!m||!u.simulateTouch&&r.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",r),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&u.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}u.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const b=now(),E=b-n.touchStartTime;if(e.allowClick){const S=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(S&&S[0]||r.target,S),e.emit("tap click",r),E<300&&b-n.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(n.lastClickTime=now(),nextTick(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||h.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let w;if(u.followFinger?w=d?e.translate:-e.translate:w=-n.currentTranslate,u.cssMode)return;if(u.freeMode&&u.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:w});return}const y=w>=-e.maxTranslate()&&!e.params.loop;let g=0,v=e.slidesSizesGrid[0];for(let S=0;S<f.length;S+=S<u.slidesPerGroupSkip?1:u.slidesPerGroup){const O=S<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;typeof f[S+O]<"u"?(y||w>=f[S]&&w<f[S+O])&&(g=S,v=f[S+O]-f[S]):(y||w>=f[S])&&(g=S,v=f[f.length-1]-f[f.length-2])}let T=null,R=null;u.rewind&&(e.isBeginning?R=u.virtual&&u.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(T=0));const k=(w-f[g])/v,x=g<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;if(E>u.longSwipesMs){if(!u.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(k>=u.longSwipesRatio?e.slideTo(u.rewind&&e.isEnd?T:g+x):e.slideTo(g)),e.swipeDirection==="prev"&&(k>1-u.longSwipesRatio?e.slideTo(g+x):R!==null&&k<0&&Math.abs(k)>u.longSwipesRatio?e.slideTo(R):e.slideTo(g))}else{if(!u.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(g+x):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(T!==null?T:g+x),e.swipeDirection==="prev"&&e.slideTo(R!==null?R:g))}}function onResize(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:a,snapGrid:o}=t,u=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const h=u&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!h?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!u?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=a,t.allowSlideNext=r,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}function onClick(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function onScroll(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let a;const o=t.maxTranslate()-t.minTranslate();o===0?a=0:a=(t.translate-t.minTranslate())/o,a!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function onLoad(t){const e=this;processLazyPreloader(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function onDocumentTouchStart(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const events=(t,e)=>{const n=getDocument(),{params:r,el:a,wrapperEl:o,device:u}=t,h=!!r.nested,d=e==="on"?"addEventListener":"removeEventListener",f=e;!a||typeof a=="string"||(n[d]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:h}),a[d]("touchstart",t.onTouchStart,{passive:!1}),a[d]("pointerdown",t.onTouchStart,{passive:!1}),n[d]("touchmove",t.onTouchMove,{passive:!1,capture:h}),n[d]("pointermove",t.onTouchMove,{passive:!1,capture:h}),n[d]("touchend",t.onTouchEnd,{passive:!0}),n[d]("pointerup",t.onTouchEnd,{passive:!0}),n[d]("pointercancel",t.onTouchEnd,{passive:!0}),n[d]("touchcancel",t.onTouchEnd,{passive:!0}),n[d]("pointerout",t.onTouchEnd,{passive:!0}),n[d]("pointerleave",t.onTouchEnd,{passive:!0}),n[d]("contextmenu",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&a[d]("click",t.onClick,!0),r.cssMode&&o[d]("scroll",t.onScroll),r.updateOnWindowResize?t[f](u.ios||u.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):t[f]("observerUpdate",onResize,!0),a[d]("load",t.onLoad,{capture:!0}))};function attachEvents(){const t=this,{params:e}=t;t.onTouchStart=onTouchStart.bind(t),t.onTouchMove=onTouchMove.bind(t),t.onTouchEnd=onTouchEnd.bind(t),t.onDocumentTouchStart=onDocumentTouchStart.bind(t),e.cssMode&&(t.onScroll=onScroll.bind(t)),t.onClick=onClick.bind(t),t.onLoad=onLoad.bind(t),events(t,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function setBreakpoint(){const t=this,{realIndex:e,initialized:n,params:r,el:a}=t,o=r.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const u=getDocument(),h=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",d=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?t.el:u.querySelector(r.breakpointsBase),f=t.getBreakpoint(o,h,d);if(!f||t.currentBreakpoint===f)return;const b=(f in o?o[f]:void 0)||t.originalParams,E=isGridEnabled(t,r),w=isGridEnabled(t,b),y=t.params.grabCursor,g=b.grabCursor,v=r.enabled;E&&!w?(a.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!E&&w&&(a.classList.add(`${r.containerModifierClass}grid`),(b.grid.fill&&b.grid.fill==="column"||!b.grid.fill&&r.grid.fill==="column")&&a.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),y&&!g?t.unsetGrabCursor():!y&&g&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(O=>{if(typeof b[O]>"u")return;const A=r[O]&&r[O].enabled,I=b[O]&&b[O].enabled;A&&!I&&t[O].disable(),!A&&I&&t[O].enable()});const T=b.direction&&b.direction!==r.direction,R=r.loop&&(b.slidesPerView!==r.slidesPerView||T),k=r.loop;T&&n&&t.changeDirection(),extend$1(t.params,b);const x=t.params.enabled,S=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),v&&!x?t.disable():!v&&x&&t.enable(),t.currentBreakpoint=f,t.emit("_beforeBreakpoint",b),n&&(R?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!k&&S?(t.loopCreate(e),t.updateSlides()):k&&!S&&t.loopDestroy()),t.emit("breakpoint",b)}function getBreakpoint(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let r=!1;const a=getWindow(),o=e==="window"?a.innerHeight:n.clientHeight,u=Object.keys(t).map(h=>{if(typeof h=="string"&&h.indexOf("@")===0){const d=parseFloat(h.substr(1));return{value:o*d,point:h}}return{value:h,point:h}});u.sort((h,d)=>parseInt(h.value,10)-parseInt(d.value,10));for(let h=0;h<u.length;h+=1){const{point:d,value:f}=u[h];e==="window"?a.matchMedia(`(min-width: ${f}px)`).matches&&(r=d):f<=n.clientWidth&&(r=d)}return r||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(a=>{r[a]&&n.push(e+a)}):typeof r=="string"&&n.push(e+r)}),n}function addClasses(){const t=this,{classNames:e,params:n,rtl:r,el:a,device:o}=t,u=prepareClasses(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...u),a.classList.add(...e),t.emitContainerClasses()}function removeClasses(){const t=this,{el:e,classNames:n}=t;!e||typeof e=="string"||(e.classList.remove(...n),t.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const a=t.slides.length-1,o=t.slidesGrid[a]+t.slidesSizesGrid[a]+r*2;t.isLocked=t.size>o}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(t,e){return function(r){r===void 0&&(r={});const a=Object.keys(r)[0],o=r[a];if(typeof o!="object"||o===null){extend$1(e,r);return}if(t[a]===!0&&(t[a]={enabled:!0}),a==="navigation"&&t[a]&&t[a].enabled&&!t[a].prevEl&&!t[a].nextEl&&(t[a].auto=!0),["pagination","scrollbar"].indexOf(a)>=0&&t[a]&&t[a].enabled&&!t[a].el&&(t[a].auto=!0),!(a in t&&"enabled"in o)){extend$1(e,r);return}typeof t[a]=="object"&&!("enabled"in t[a])&&(t[a].enabled=!0),t[a]||(t[a]={enabled:!1}),extend$1(e,r)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class Jn{constructor(){let e,n;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];a.length===1&&a[0].constructor&&Object.prototype.toString.call(a[0]).slice(8,-1)==="Object"?n=a[0]:[e,n]=a,n||(n={}),n=extend$1({},n),e&&!n.el&&(n.el=e);const u=getDocument();if(n.el&&typeof n.el=="string"&&u.querySelectorAll(n.el).length>1){const m=[];return u.querySelectorAll(n.el).forEach(b=>{const E=extend$1({},n,{el:b});m.push(new Jn(E))}),m}const h=this;h.__swiper__=!0,h.support=getSupport(),h.device=getDevice({userAgent:n.userAgent}),h.browser=getBrowser(),h.eventsListeners={},h.eventsAnyListeners=[],h.modules=[...h.__modules__],n.modules&&Array.isArray(n.modules)&&h.modules.push(...n.modules);const d={};h.modules.forEach(m=>{m({params:n,swiper:h,extendParams:moduleExtendParams(n,d),on:h.on.bind(h),once:h.once.bind(h),off:h.off.bind(h),emit:h.emit.bind(h)})});const f=extend$1({},defaults,d);return h.params=extend$1({},f,extendedDefaults,n),h.originalParams=extend$1({},h.params),h.passedParams=extend$1({},n),h.params&&h.params.on&&Object.keys(h.params.on).forEach(m=>{h.on(m,h.params.on[m])}),h.params&&h.params.onAny&&h.onAny(h.params.onAny),Object.assign(h,{enabled:h.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return h.params.direction==="horizontal"},isVertical(){return h.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:h.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.emit("_swiper"),h.params.init&&h.init(),h}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:r}=this,a=elementChildren(n,`.${r.slideClass}, swiper-slide`),o=elementIndex(a[0]);return elementIndex(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=elementChildren(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const a=r.minTranslate(),u=(r.maxTranslate()-a)*e+a;r.translateTo(u,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const a=e.getSlideClasses(r);n.push({slideEl:r,classNames:a}),e.emit("_slideClass",r,a)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const r=this,{params:a,slides:o,slidesGrid:u,slidesSizesGrid:h,size:d,activeIndex:f}=r;let m=1;if(typeof a.slidesPerView=="number")return a.slidesPerView;if(a.centeredSlides){let b=o[f]?Math.ceil(o[f].swiperSlideSize):0,E;for(let w=f+1;w<o.length;w+=1)o[w]&&!E&&(b+=Math.ceil(o[w].swiperSlideSize),m+=1,b>d&&(E=!0));for(let w=f-1;w>=0;w-=1)o[w]&&!E&&(b+=o[w].swiperSlideSize,m+=1,b>d&&(E=!0))}else if(e==="current")for(let b=f+1;b<o.length;b+=1)(n?u[b]+h[b]-u[f]<d:u[b]-u[f]<d)&&(m+=1);else for(let b=f-1;b>=0;b-=1)u[f]-u[b]<d&&(m+=1);return m}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(u=>{u.complete&&processLazyPreloader(e,u)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function a(){const u=e.rtlTranslate?e.translate*-1:e.translate,h=Math.min(Math.max(u,e.maxTranslate()),e.minTranslate());e.setTranslate(h),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)a(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const u=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(u.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||a()}r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const r=this,a=r.params.direction;return e||(e=a==="horizontal"?"vertical":"horizontal"),e===a||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${a}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const a=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let u=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(a()):elementChildren(r,a())[0];return!u&&n.params.createElements&&(u=createElement("div",n.params.wrapperClass),r.append(u),elementChildren(r,`.${n.params.slideClass}`).forEach(h=>{u.append(h)})),Object.assign(n,{el:r,wrapperEl:u,slidesEl:n.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:u,hostEl:n.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||elementStyle(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||elementStyle(r,"direction")==="rtl"),wrongRTL:elementStyle(u,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const a=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&a.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),a.forEach(o=>{o.complete?processLazyPreloader(n,o):o.addEventListener("load",u=>{processLazyPreloader(n,u.target)})}),preload(n),n.initialized=!0,preload(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const r=this,{params:a,el:o,wrapperEl:u,slides:h}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),a.loop&&r.loopDestroy(),n&&(r.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),u&&u.removeAttribute("style"),h&&h.length&&h.forEach(d=>{d.classList.remove(a.slideVisibleClass,a.slideFullyVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass),d.removeAttribute("style"),d.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(d=>{r.off(d)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),deleteProps(r)),r.destroyed=!0),null}static extendDefaults(e){extend$1(extendedDefaults,e)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(e){Jn.prototype.__modules__||(Jn.prototype.__modules__=[]);const n=Jn.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Jn.installModule(n)),Jn):(Jn.installModule(e),Jn)}};Object.keys(prototypes).forEach(t=>{Object.keys(prototypes[t]).forEach(e=>{Swiper$1.prototype[e]=prototypes[t][e]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function extend(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:isObject(e[r])&&isObject(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:extend(t[r],e[r]):t[r]=e[r]})}function needsNavigation(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function needsPagination(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function needsScrollbar(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function uniqueClasses(t){t===void 0&&(t="");const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function wrapperClass(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function updateSwiper(t){let{swiper:e,slides:n,passedParams:r,changedParams:a,nextEl:o,prevEl:u,scrollbarEl:h,paginationEl:d}=t;const f=a.filter(P=>P!=="children"&&P!=="direction"&&P!=="wrapperClass"),{params:m,pagination:b,navigation:E,scrollbar:w,virtual:y,thumbs:g}=e;let v,T,R,k,x,S,O,A;a.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&m.thumbs&&(!m.thumbs.swiper||m.thumbs.swiper.destroyed)&&(v=!0),a.includes("controller")&&r.controller&&r.controller.control&&m.controller&&!m.controller.control&&(T=!0),a.includes("pagination")&&r.pagination&&(r.pagination.el||d)&&(m.pagination||m.pagination===!1)&&b&&!b.el&&(R=!0),a.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||h)&&(m.scrollbar||m.scrollbar===!1)&&w&&!w.el&&(k=!0),a.includes("navigation")&&r.navigation&&(r.navigation.prevEl||u)&&(r.navigation.nextEl||o)&&(m.navigation||m.navigation===!1)&&E&&!E.prevEl&&!E.nextEl&&(x=!0);const I=P=>{e[P]&&(e[P].destroy(),P==="navigation"?(e.isElement&&(e[P].prevEl.remove(),e[P].nextEl.remove()),m[P].prevEl=void 0,m[P].nextEl=void 0,e[P].prevEl=void 0,e[P].nextEl=void 0):(e.isElement&&e[P].el.remove(),m[P].el=void 0,e[P].el=void 0))};a.includes("loop")&&e.isElement&&(m.loop&&!r.loop?S=!0:!m.loop&&r.loop?O=!0:A=!0),f.forEach(P=>{if(isObject(m[P])&&isObject(r[P]))Object.assign(m[P],r[P]),(P==="navigation"||P==="pagination"||P==="scrollbar")&&"enabled"in r[P]&&!r[P].enabled&&I(P);else{const j=r[P];(j===!0||j===!1)&&(P==="navigation"||P==="pagination"||P==="scrollbar")?j===!1&&I(P):m[P]=r[P]}}),f.includes("controller")&&!T&&e.controller&&e.controller.control&&m.controller&&m.controller.control&&(e.controller.control=m.controller.control),a.includes("children")&&n&&y&&m.virtual.enabled?(y.slides=n,y.update(!0)):a.includes("virtual")&&y&&m.virtual.enabled&&(n&&(y.slides=n),y.update(!0)),a.includes("children")&&n&&m.loop&&(A=!0),v&&g.init()&&g.update(!0),T&&(e.controller.control=m.controller.control),R&&(e.isElement&&(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-pagination"),d.part.add("pagination"),e.el.appendChild(d)),d&&(m.pagination.el=d),b.init(),b.render(),b.update()),k&&(e.isElement&&(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-scrollbar"),h.part.add("scrollbar"),e.el.appendChild(h)),h&&(m.scrollbar.el=h),w.init(),w.updateSize(),w.setTranslate()),x&&(e.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),o.innerHTML=e.hostEl.constructor.nextButtonSvg,o.part.add("button-next"),e.el.appendChild(o)),(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-button-prev"),u.innerHTML=e.hostEl.constructor.prevButtonSvg,u.part.add("button-prev"),e.el.appendChild(u))),o&&(m.navigation.nextEl=o),u&&(m.navigation.prevEl=u),E.init(),E.update()),a.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),a.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),a.includes("direction")&&e.changeDirection(r.direction,!1),(S||A)&&e.loopDestroy(),(O||A)&&e.loopCreate(),e.update()}function getParams(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},r={},a={};extend(n,defaults),n._emitClasses=!0,n.init=!1;const o={},u=paramsList.map(d=>d.replace(/_/,"")),h=Object.assign({},t);return Object.keys(h).forEach(d=>{typeof t[d]>"u"||(u.indexOf(d)>=0?isObject(t[d])?(n[d]={},a[d]={},extend(n[d],t[d]),extend(a[d],t[d])):(n[d]=t[d],a[d]=t[d]):d.search(/on[A-Z]/)===0&&typeof t[d]=="function"?e?r[`${d[2].toLowerCase()}${d.substr(3)}`]=t[d]:n.on[`${d[2].toLowerCase()}${d.substr(3)}`]=t[d]:o[d]=t[d])}),["navigation","pagination","scrollbar"].forEach(d=>{n[d]===!0&&(n[d]={}),n[d]===!1&&delete n[d]}),{params:n,passedParams:a,rest:o,events:r}}function mountSwiper(t,e){let{el:n,nextEl:r,prevEl:a,paginationEl:o,scrollbarEl:u,swiper:h}=t;needsNavigation(e)&&r&&a&&(h.params.navigation.nextEl=r,h.originalParams.navigation.nextEl=r,h.params.navigation.prevEl=a,h.originalParams.navigation.prevEl=a),needsPagination(e)&&o&&(h.params.pagination.el=o,h.originalParams.pagination.el=o),needsScrollbar(e)&&u&&(h.params.scrollbar.el=u,h.originalParams.scrollbar.el=u),h.init(n)}function getChangedParams(t,e,n,r,a){const o=[];if(!e)return o;const u=d=>{o.indexOf(d)<0&&o.push(d)};if(n&&r){const d=r.map(a),f=n.map(a);d.join("")!==f.join("")&&u("children"),r.length!==n.length&&u("children")}return paramsList.filter(d=>d[0]==="_").map(d=>d.replace(/_/,"")).forEach(d=>{if(d in t&&d in e)if(isObject(t[d])&&isObject(e[d])){const f=Object.keys(t[d]),m=Object.keys(e[d]);f.length!==m.length?u(d):(f.forEach(b=>{t[d][b]!==e[d][b]&&u(d)}),m.forEach(b=>{t[d][b]!==e[d][b]&&u(d)}))}else t[d]!==e[d]&&u(d)}),o}const updateOnVirtualData=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_extends.apply(this,arguments)}function isChildSwiperSlide(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function processChildren(t){const e=[];return React.Children.toArray(t).forEach(n=>{isChildSwiperSlide(n)?e.push(n):n.props&&n.props.children&&processChildren(n.props.children).forEach(r=>e.push(r))}),e}function getChildren(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(t).forEach(r=>{if(isChildSwiperSlide(r))e.push(r);else if(r.props&&r.props.slot&&n[r.props.slot])n[r.props.slot].push(r);else if(r.props&&r.props.children){const a=processChildren(r.props.children);a.length>0?a.forEach(o=>e.push(o)):n["container-end"].push(r)}else n["container-end"].push(r)}),{slides:e,slots:n}}function renderVirtual(t,e,n){if(!n)return null;const r=m=>{let b=m;return m<0?b=e.length+m:b>=e.length&&(b=b-e.length),b},a=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:o,to:u}=n,h=t.params.loop?-e.length:0,d=t.params.loop?e.length*2:e.length,f=[];for(let m=h;m<d;m+=1)m>=o&&m<=u&&f.push(e[r(m)]);return f.map((m,b)=>React.cloneElement(m,{swiper:t,style:a,key:m.props.virtualIndex||m.key||`slide-${b}`}))}function useIsomorphicLayoutEffect(t,e){return typeof window>"u"?reactExports.useEffect(t,e):reactExports.useLayoutEffect(t,e)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(t,e){let{className:n,tag:r="div",wrapperTag:a="div",children:o,onSwiper:u,...h}=t===void 0?{}:t,d=!1;const[f,m]=reactExports.useState("swiper"),[b,E]=reactExports.useState(null),[w,y]=reactExports.useState(!1),g=reactExports.useRef(!1),v=reactExports.useRef(null),T=reactExports.useRef(null),R=reactExports.useRef(null),k=reactExports.useRef(null),x=reactExports.useRef(null),S=reactExports.useRef(null),O=reactExports.useRef(null),A=reactExports.useRef(null),{params:I,passedParams:P,rest:j,events:B}=getParams(h),{slides:ie,slots:oe}=getChildren(o),le=()=>{y(!w)};Object.assign(I.on,{_containerClasses(ue,q){m(q)}});const de=()=>{Object.assign(I.on,B),d=!0;const ue={...I};if(delete ue.wrapperClass,T.current=new Swiper$1(ue),T.current.virtual&&T.current.params.virtual.enabled){T.current.virtual.slides=ie;const q={cache:!1,slides:ie,renderExternal:E,renderExternalUpdate:!1};extend(T.current.params.virtual,q),extend(T.current.originalParams.virtual,q)}};v.current||de(),T.current&&T.current.on("_beforeBreakpoint",le);const K=()=>{d||!B||!T.current||Object.keys(B).forEach(ue=>{T.current.on(ue,B[ue])})},J=()=>{!B||!T.current||Object.keys(B).forEach(ue=>{T.current.off(ue,B[ue])})};reactExports.useEffect(()=>()=>{T.current&&T.current.off("_beforeBreakpoint",le)}),reactExports.useEffect(()=>{!g.current&&T.current&&(T.current.emitSlidesClasses(),g.current=!0)}),useIsomorphicLayoutEffect(()=>{if(e&&(e.current=v.current),!!v.current)return T.current.destroyed&&de(),mountSwiper({el:v.current,nextEl:x.current,prevEl:S.current,paginationEl:O.current,scrollbarEl:A.current,swiper:T.current},I),u&&!T.current.destroyed&&u(T.current),()=>{T.current&&!T.current.destroyed&&T.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect(()=>{K();const ue=getChangedParams(P,R.current,ie,k.current,q=>q.key);return R.current=P,k.current=ie,ue.length&&T.current&&!T.current.destroyed&&updateSwiper({swiper:T.current,slides:ie,passedParams:P,changedParams:ue,nextEl:x.current,prevEl:S.current,scrollbarEl:A.current,paginationEl:O.current}),()=>{J()}}),useIsomorphicLayoutEffect(()=>{updateOnVirtualData(T.current)},[b]);function se(){return I.virtual?renderVirtual(T.current,ie,b):ie.map((ue,q)=>React.cloneElement(ue,{swiper:T.current,swiperSlideIndex:q}))}return React.createElement(r,_extends({ref:v,className:uniqueClasses(`${f}${n?` ${n}`:""}`)},j),React.createElement(SwiperContext.Provider,{value:T.current},oe["container-start"],React.createElement(a,{className:wrapperClass(I.wrapperClass)},oe["wrapper-start"],se(),oe["wrapper-end"]),needsNavigation(I)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:S,className:"swiper-button-prev"}),React.createElement("div",{ref:x,className:"swiper-button-next"})),needsScrollbar(I)&&React.createElement("div",{ref:A,className:"swiper-scrollbar"}),needsPagination(I)&&React.createElement("div",{ref:O,className:"swiper-pagination"}),oe["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(t,e){let{tag:n="div",children:r,className:a="",swiper:o,zoom:u,lazy:h,virtualIndex:d,swiperSlideIndex:f,...m}=t===void 0?{}:t;const b=reactExports.useRef(null),[E,w]=reactExports.useState("swiper-slide"),[y,g]=reactExports.useState(!1);function v(x,S,O){S===b.current&&w(O)}useIsomorphicLayoutEffect(()=>{if(typeof f<"u"&&(b.current.swiperSlideIndex=f),e&&(e.current=b.current),!(!b.current||!o)){if(o.destroyed){E!=="swiper-slide"&&w("swiper-slide");return}return o.on("_slideClass",v),()=>{o&&o.off("_slideClass",v)}}}),useIsomorphicLayoutEffect(()=>{o&&b.current&&!o.destroyed&&w(o.getSlideClasses(b.current))},[o]);const T={isActive:E.indexOf("swiper-slide-active")>=0,isVisible:E.indexOf("swiper-slide-visible")>=0,isPrev:E.indexOf("swiper-slide-prev")>=0,isNext:E.indexOf("swiper-slide-next")>=0},R=()=>typeof r=="function"?r(T):r,k=()=>{g(!0)};return React.createElement(n,_extends({ref:b,className:uniqueClasses(`${E}${a?` ${a}`:""}`),"data-swiper-slide-index":d,onLoad:k},m),u&&React.createElement(SwiperSlideContext.Provider,{value:T},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof u=="number"?u:void 0},R(),h&&!y&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!u&&React.createElement(SwiperSlideContext.Provider,{value:T},R(),h&&!y&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";function Keyboard(t){let{swiper:e,extendParams:n,on:r,emit:a}=t;const o=getDocument(),u=getWindow();e.keyboard={enabled:!1},n({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function h(m){if(!e.enabled)return;const{rtlTranslate:b}=e;let E=m;E.originalEvent&&(E=E.originalEvent);const w=E.keyCode||E.charCode,y=e.params.keyboard.pageUpDown,g=y&&w===33,v=y&&w===34,T=w===37,R=w===39,k=w===38,x=w===40;if(!e.allowSlideNext&&(e.isHorizontal()&&R||e.isVertical()&&x||v)||!e.allowSlidePrev&&(e.isHorizontal()&&T||e.isVertical()&&k||g))return!1;if(!(E.shiftKey||E.altKey||E.ctrlKey||E.metaKey)&&!(o.activeElement&&o.activeElement.nodeName&&(o.activeElement.nodeName.toLowerCase()==="input"||o.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(g||v||T||R||k||x)){let S=!1;if(elementParents(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&elementParents(e.el,`.${e.params.slideActiveClass}`).length===0)return;const O=e.el,A=O.clientWidth,I=O.clientHeight,P=u.innerWidth,j=u.innerHeight,B=elementOffset(O);b&&(B.left-=O.scrollLeft);const ie=[[B.left,B.top],[B.left+A,B.top],[B.left,B.top+I],[B.left+A,B.top+I]];for(let oe=0;oe<ie.length;oe+=1){const le=ie[oe];if(le[0]>=0&&le[0]<=P&&le[1]>=0&&le[1]<=j){if(le[0]===0&&le[1]===0)continue;S=!0}}if(!S)return}e.isHorizontal()?((g||v||T||R)&&(E.preventDefault?E.preventDefault():E.returnValue=!1),((v||R)&&!b||(g||T)&&b)&&e.slideNext(),((g||T)&&!b||(v||R)&&b)&&e.slidePrev()):((g||v||k||x)&&(E.preventDefault?E.preventDefault():E.returnValue=!1),(v||x)&&e.slideNext(),(g||k)&&e.slidePrev()),a("keyPress",w)}}function d(){e.keyboard.enabled||(o.addEventListener("keydown",h),e.keyboard.enabled=!0)}function f(){e.keyboard.enabled&&(o.removeEventListener("keydown",h),e.keyboard.enabled=!1)}r("init",()=>{e.params.keyboard.enabled&&d()}),r("destroy",()=>{e.keyboard.enabled&&f()}),Object.assign(e.keyboard,{enable:d,disable:f})}function createElementIfNotDefined(t,e,n,r){return t.params.createElements&&Object.keys(r).forEach(a=>{if(!n[a]&&n.auto===!0){let o=elementChildren(t.el,`.${r[a]}`)[0];o||(o=createElement("div",r[a]),o.className=r[a],t.el.append(o)),n[a]=o,e[a]=o}}),n}function Navigation(t){let{swiper:e,extendParams:n,on:r,emit:a}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function o(y){let g;return y&&typeof y=="string"&&e.isElement&&(g=e.el.querySelector(y)||e.hostEl.querySelector(y),g)?g:(y&&(typeof y=="string"&&(g=[...document.querySelectorAll(y)]),e.params.uniqueNavElements&&typeof y=="string"&&g&&g.length>1&&e.el.querySelectorAll(y).length===1?g=e.el.querySelector(y):g&&g.length===1&&(g=g[0])),y&&!g?y:g)}function u(y,g){const v=e.params.navigation;y=makeElementsArray(y),y.forEach(T=>{T&&(T.classList[g?"add":"remove"](...v.disabledClass.split(" ")),T.tagName==="BUTTON"&&(T.disabled=g),e.params.watchOverflow&&e.enabled&&T.classList[e.isLocked?"add":"remove"](v.lockClass))})}function h(){const{nextEl:y,prevEl:g}=e.navigation;if(e.params.loop){u(g,!1),u(y,!1);return}u(g,e.isBeginning&&!e.params.rewind),u(y,e.isEnd&&!e.params.rewind)}function d(y){y.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),a("navigationPrev"))}function f(y){y.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),a("navigationNext"))}function m(){const y=e.params.navigation;if(e.params.navigation=createElementIfNotDefined(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(y.nextEl||y.prevEl))return;let g=o(y.nextEl),v=o(y.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:v}),g=makeElementsArray(g),v=makeElementsArray(v);const T=(R,k)=>{R&&R.addEventListener("click",k==="next"?f:d),!e.enabled&&R&&R.classList.add(...y.lockClass.split(" "))};g.forEach(R=>T(R,"next")),v.forEach(R=>T(R,"prev"))}function b(){let{nextEl:y,prevEl:g}=e.navigation;y=makeElementsArray(y),g=makeElementsArray(g);const v=(T,R)=>{T.removeEventListener("click",R==="next"?f:d),T.classList.remove(...e.params.navigation.disabledClass.split(" "))};y.forEach(T=>v(T,"next")),g.forEach(T=>v(T,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?w():(m(),h())}),r("toEdge fromEdge lock unlock",()=>{h()}),r("destroy",()=>{b()}),r("enable disable",()=>{let{nextEl:y,prevEl:g}=e.navigation;if(y=makeElementsArray(y),g=makeElementsArray(g),e.enabled){h();return}[...y,...g].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),r("click",(y,g)=>{let{nextEl:v,prevEl:T}=e.navigation;v=makeElementsArray(v),T=makeElementsArray(T);const R=g.target;let k=T.includes(R)||v.includes(R);if(e.isElement&&!k){const x=g.path||g.composedPath&&g.composedPath();x&&(k=x.find(S=>v.includes(S)||T.includes(S)))}if(e.params.navigation.hideOnClick&&!k){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===R||e.pagination.el.contains(R)))return;let x;v.length?x=v[0].classList.contains(e.params.navigation.hiddenClass):T.length&&(x=T[0].classList.contains(e.params.navigation.hiddenClass)),a(x===!0?"navigationShow":"navigationHide"),[...v,...T].filter(S=>!!S).forEach(S=>S.classList.toggle(e.params.navigation.hiddenClass))}});const E=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),m(),h()},w=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),b()};Object.assign(e.navigation,{enable:E,disable:w,update:h,init:m,destroy:b})}function classesToSelector(t){return t===void 0&&(t=""),`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination(t){let{swiper:e,extendParams:n,on:r,emit:a}=t;const o="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:R=>R,formatFractionTotal:R=>R,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),e.pagination={el:null,bullets:[]};let u,h=0;function d(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function f(R,k){const{bulletActiveClass:x}=e.params.pagination;R&&(R=R[`${k==="prev"?"previous":"next"}ElementSibling`],R&&(R.classList.add(`${x}-${k}`),R=R[`${k==="prev"?"previous":"next"}ElementSibling`],R&&R.classList.add(`${x}-${k}-${k}`)))}function m(R,k,x){if(R=R%x,k=k%x,k===R+1)return"next";if(k===R-1)return"previous"}function b(R){const k=R.target.closest(classesToSelector(e.params.pagination.bulletClass));if(!k)return;R.preventDefault();const x=elementIndex(k)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===x)return;const S=m(e.realIndex,x,e.slides.length);S==="next"?e.slideNext():S==="previous"?e.slidePrev():e.slideToLoop(x)}else e.slideTo(x)}function E(){const R=e.rtl,k=e.params.pagination;if(d())return;let x=e.pagination.el;x=makeElementsArray(x);let S,O;const A=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,I=e.params.loop?Math.ceil(A/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(O=e.previousRealIndex||0,S=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(S=e.snapIndex,O=e.previousSnapIndex):(O=e.previousIndex||0,S=e.activeIndex||0),k.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const P=e.pagination.bullets;let j,B,ie;if(k.dynamicBullets&&(u=elementOuterSize(P[0],e.isHorizontal()?"width":"height"),x.forEach(oe=>{oe.style[e.isHorizontal()?"width":"height"]=`${u*(k.dynamicMainBullets+4)}px`}),k.dynamicMainBullets>1&&O!==void 0&&(h+=S-(O||0),h>k.dynamicMainBullets-1?h=k.dynamicMainBullets-1:h<0&&(h=0)),j=Math.max(S-h,0),B=j+(Math.min(P.length,k.dynamicMainBullets)-1),ie=(B+j)/2),P.forEach(oe=>{const le=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(de=>`${k.bulletActiveClass}${de}`)].map(de=>typeof de=="string"&&de.includes(" ")?de.split(" "):de).flat();oe.classList.remove(...le)}),x.length>1)P.forEach(oe=>{const le=elementIndex(oe);le===S?oe.classList.add(...k.bulletActiveClass.split(" ")):e.isElement&&oe.setAttribute("part","bullet"),k.dynamicBullets&&(le>=j&&le<=B&&oe.classList.add(...`${k.bulletActiveClass}-main`.split(" ")),le===j&&f(oe,"prev"),le===B&&f(oe,"next"))});else{const oe=P[S];if(oe&&oe.classList.add(...k.bulletActiveClass.split(" ")),e.isElement&&P.forEach((le,de)=>{le.setAttribute("part",de===S?"bullet-active":"bullet")}),k.dynamicBullets){const le=P[j],de=P[B];for(let K=j;K<=B;K+=1)P[K]&&P[K].classList.add(...`${k.bulletActiveClass}-main`.split(" "));f(le,"prev"),f(de,"next")}}if(k.dynamicBullets){const oe=Math.min(P.length,k.dynamicMainBullets+4),le=(u*oe-u)/2-ie*u,de=R?"right":"left";P.forEach(K=>{K.style[e.isHorizontal()?de:"top"]=`${le}px`})}}x.forEach((P,j)=>{if(k.type==="fraction"&&(P.querySelectorAll(classesToSelector(k.currentClass)).forEach(B=>{B.textContent=k.formatFractionCurrent(S+1)}),P.querySelectorAll(classesToSelector(k.totalClass)).forEach(B=>{B.textContent=k.formatFractionTotal(I)})),k.type==="progressbar"){let B;k.progressbarOpposite?B=e.isHorizontal()?"vertical":"horizontal":B=e.isHorizontal()?"horizontal":"vertical";const ie=(S+1)/I;let oe=1,le=1;B==="horizontal"?oe=ie:le=ie,P.querySelectorAll(classesToSelector(k.progressbarFillClass)).forEach(de=>{de.style.transform=`translate3d(0,0,0) scaleX(${oe}) scaleY(${le})`,de.style.transitionDuration=`${e.params.speed}ms`})}k.type==="custom"&&k.renderCustom?(P.innerHTML=k.renderCustom(e,S+1,I),j===0&&a("paginationRender",P)):(j===0&&a("paginationRender",P),a("paginationUpdate",P)),e.params.watchOverflow&&e.enabled&&P.classList[e.isLocked?"add":"remove"](k.lockClass)})}function w(){const R=e.params.pagination;if(d())return;const k=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let x=e.pagination.el;x=makeElementsArray(x);let S="";if(R.type==="bullets"){let O=e.params.loop?Math.ceil(k/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&O>k&&(O=k);for(let A=0;A<O;A+=1)R.renderBullet?S+=R.renderBullet.call(e,A,R.bulletClass):S+=`<${R.bulletElement} ${e.isElement?'part="bullet"':""} class="${R.bulletClass}"></${R.bulletElement}>`}R.type==="fraction"&&(R.renderFraction?S=R.renderFraction.call(e,R.currentClass,R.totalClass):S=`<span class="${R.currentClass}"></span> / <span class="${R.totalClass}"></span>`),R.type==="progressbar"&&(R.renderProgressbar?S=R.renderProgressbar.call(e,R.progressbarFillClass):S=`<span class="${R.progressbarFillClass}"></span>`),e.pagination.bullets=[],x.forEach(O=>{R.type!=="custom"&&(O.innerHTML=S||""),R.type==="bullets"&&e.pagination.bullets.push(...O.querySelectorAll(classesToSelector(R.bulletClass)))}),R.type!=="custom"&&a("paginationRender",x[0])}function y(){e.params.pagination=createElementIfNotDefined(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const R=e.params.pagination;if(!R.el)return;let k;typeof R.el=="string"&&e.isElement&&(k=e.el.querySelector(R.el)),!k&&typeof R.el=="string"&&(k=[...document.querySelectorAll(R.el)]),k||(k=R.el),!(!k||k.length===0)&&(e.params.uniqueNavElements&&typeof R.el=="string"&&Array.isArray(k)&&k.length>1&&(k=[...e.el.querySelectorAll(R.el)],k.length>1&&(k=k.find(x=>elementParents(x,".swiper")[0]===e.el))),Array.isArray(k)&&k.length===1&&(k=k[0]),Object.assign(e.pagination,{el:k}),k=makeElementsArray(k),k.forEach(x=>{R.type==="bullets"&&R.clickable&&x.classList.add(...(R.clickableClass||"").split(" ")),x.classList.add(R.modifierClass+R.type),x.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass),R.type==="bullets"&&R.dynamicBullets&&(x.classList.add(`${R.modifierClass}${R.type}-dynamic`),h=0,R.dynamicMainBullets<1&&(R.dynamicMainBullets=1)),R.type==="progressbar"&&R.progressbarOpposite&&x.classList.add(R.progressbarOppositeClass),R.clickable&&x.addEventListener("click",b),e.enabled||x.classList.add(R.lockClass)}))}function g(){const R=e.params.pagination;if(d())return;let k=e.pagination.el;k&&(k=makeElementsArray(k),k.forEach(x=>{x.classList.remove(R.hiddenClass),x.classList.remove(R.modifierClass+R.type),x.classList.remove(e.isHorizontal()?R.horizontalClass:R.verticalClass),R.clickable&&(x.classList.remove(...(R.clickableClass||"").split(" ")),x.removeEventListener("click",b))})),e.pagination.bullets&&e.pagination.bullets.forEach(x=>x.classList.remove(...R.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const R=e.params.pagination;let{el:k}=e.pagination;k=makeElementsArray(k),k.forEach(x=>{x.classList.remove(R.horizontalClass,R.verticalClass),x.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?T():(y(),w(),E())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&E()}),r("snapIndexChange",()=>{E()}),r("snapGridLengthChange",()=>{w(),E()}),r("destroy",()=>{g()}),r("enable disable",()=>{let{el:R}=e.pagination;R&&(R=makeElementsArray(R),R.forEach(k=>k.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{E()}),r("click",(R,k)=>{const x=k.target,S=makeElementsArray(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&S&&S.length>0&&!x.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&x===e.navigation.nextEl||e.navigation.prevEl&&x===e.navigation.prevEl))return;const O=S[0].classList.contains(e.params.pagination.hiddenClass);a(O===!0?"paginationShow":"paginationHide"),S.forEach(A=>A.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:R}=e.pagination;R&&(R=makeElementsArray(R),R.forEach(k=>k.classList.remove(e.params.pagination.paginationDisabledClass))),y(),w(),E()},T=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:R}=e.pagination;R&&(R=makeElementsArray(R),R.forEach(k=>k.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:v,disable:T,render:w,update:E,init:y,destroy:g})}class ClientError extends Error{constructor(n,r){const a=`${ClientError.extractMessage(n)}: ${JSON.stringify({response:n,request:r})}`;super(a);Et(this,"response");Et(this,"request");Object.setPrototypeOf(this,ClientError.prototype),this.response=n,this.request=r,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ClientError)}static extractMessage(n){var r,a;return((a=(r=n.errors)==null?void 0:r[0])==null?void 0:a.message)??`GraphQL Error (Code: ${String(n.status)})`}}const uppercase=t=>t.toUpperCase(),callOrIdentity=t=>typeof t=="function"?t():t,zip=(t,e)=>t.map((n,r)=>[n,e[r]]),HeadersInitToPlainObject=t=>{let e={};return t instanceof Headers?e=HeadersInstanceToPlainObject(t):Array.isArray(t)?t.forEach(([n,r])=>{n&&r!==void 0&&(e[n]=r)}):t&&(e=t),e},HeadersInstanceToPlainObject=t=>{const e={};return t.forEach((n,r)=>{e[r]=n}),e},tryCatch=t=>{try{const e=t();return isPromiseLikeValue(e)?e.catch(n=>errorFromMaybeError(n)):e}catch(e){return errorFromMaybeError(e)}},errorFromMaybeError=t=>t instanceof Error?t:new Error(String(t)),isPromiseLikeValue=t=>typeof t=="object"&&t!==null&&"then"in t&&typeof t.then=="function"&&"catch"in t&&typeof t.catch=="function"&&"finally"in t&&typeof t.finally=="function",casesExhausted=t=>{throw new Error(`Unhandled case: ${String(t)}`)},isPlainObject=t=>typeof t=="object"&&t!==null&&!Array.isArray(t),parseBatchRequestArgs=(t,e)=>t.documents?t:{documents:t,requestHeaders:e,signal:void 0},parseRawRequestArgs=(t,e,n)=>t.query?t:{query:t,variables:e,requestHeaders:n,signal:void 0};function devAssert(t,e){if(!!!t)throw new Error(e)}function isObjectLike(t){return typeof t=="object"&&t!==null}function invariant(t,e){if(!!!t)throw new Error("Unexpected invariant triggered.")}const LineRegExp=/\r\n|[\n\r]/g;function getLocation(t,e){let n=0,r=1;for(const a of t.body.matchAll(LineRegExp)){if(typeof a.index=="number"||invariant(!1),a.index>=e)break;n=a.index+a[0].length,r+=1}return{line:r,column:e+1-n}}function printLocation(t){return printSourceLocation(t.source,getLocation(t.source,t.start))}function printSourceLocation(t,e){const n=t.locationOffset.column-1,r="".padStart(n)+t.body,a=e.line-1,o=t.locationOffset.line-1,u=e.line+o,h=e.line===1?n:0,d=e.column+h,f=`${t.name}:${u}:${d}
`,m=r.split(/\r\n|[\n\r]/g),b=m[a];if(b.length>120){const E=Math.floor(d/80),w=d%80,y=[];for(let g=0;g<b.length;g+=80)y.push(b.slice(g,g+80));return f+printPrefixedLines([[`${u} |`,y[0]],...y.slice(1,E+1).map(g=>["|",g]),["|","^".padStart(w)],["|",y[E+1]]])}return f+printPrefixedLines([[`${u-1} |`,m[a-1]],[`${u} |`,b],["|","^".padStart(d)],[`${u+1} |`,m[a+1]]])}function printPrefixedLines(t){const e=t.filter(([r,a])=>a!==void 0),n=Math.max(...e.map(([r])=>r.length));return e.map(([r,a])=>r.padStart(n)+(a?" "+a:"")).join(`
`)}function toNormalizedOptions(t){const e=t[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:t[1],positions:t[2],path:t[3],originalError:t[4],extensions:t[5]}:e}class GraphQLError extends Error{constructor(e,...n){var r,a,o;const{nodes:u,source:h,positions:d,path:f,originalError:m,extensions:b}=toNormalizedOptions(n);super(e),this.name="GraphQLError",this.path=f??void 0,this.originalError=m??void 0,this.nodes=undefinedIfEmpty(Array.isArray(u)?u:u?[u]:void 0);const E=undefinedIfEmpty((r=this.nodes)===null||r===void 0?void 0:r.map(y=>y.loc).filter(y=>y!=null));this.source=h??(E==null||(a=E[0])===null||a===void 0?void 0:a.source),this.positions=d??(E==null?void 0:E.map(y=>y.start)),this.locations=d&&h?d.map(y=>getLocation(h,y)):E==null?void 0:E.map(y=>getLocation(y.source,y.start));const w=isObjectLike(m==null?void 0:m.extensions)?m==null?void 0:m.extensions:void 0;this.extensions=(o=b??w)!==null&&o!==void 0?o:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),m!=null&&m.stack?Object.defineProperty(this,"stack",{value:m.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,GraphQLError):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(e+=`

`+printLocation(n.loc));else if(this.source&&this.locations)for(const n of this.locations)e+=`

`+printSourceLocation(this.source,n);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function undefinedIfEmpty(t){return t===void 0||t.length===0?void 0:t}function syntaxError(t,e,n){return new GraphQLError(`Syntax Error: ${n}`,{source:t,positions:[e]})}class Location{constructor(e,n,r){this.start=e.start,this.end=n.end,this.startToken=e,this.endToken=n,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Token{constructor(e,n,r,a,o,u){this.kind=e,this.start=n,this.end=r,this.line=a,this.column=o,this.value=u,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},kindValues=new Set(Object.keys(QueryDocumentKeys));function isNode(t){const e=t==null?void 0:t.kind;return typeof e=="string"&&kindValues.has(e)}var OperationTypeNode;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(OperationTypeNode||(OperationTypeNode={}));var DirectiveLocation;(function(t){t.QUERY="QUERY",t.MUTATION="MUTATION",t.SUBSCRIPTION="SUBSCRIPTION",t.FIELD="FIELD",t.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",t.FRAGMENT_SPREAD="FRAGMENT_SPREAD",t.INLINE_FRAGMENT="INLINE_FRAGMENT",t.VARIABLE_DEFINITION="VARIABLE_DEFINITION",t.SCHEMA="SCHEMA",t.SCALAR="SCALAR",t.OBJECT="OBJECT",t.FIELD_DEFINITION="FIELD_DEFINITION",t.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",t.INTERFACE="INTERFACE",t.UNION="UNION",t.ENUM="ENUM",t.ENUM_VALUE="ENUM_VALUE",t.INPUT_OBJECT="INPUT_OBJECT",t.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(DirectiveLocation||(DirectiveLocation={}));var Kind;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Kind||(Kind={}));function isWhiteSpace(t){return t===9||t===32}function isDigit(t){return t>=48&&t<=57}function isLetter(t){return t>=97&&t<=122||t>=65&&t<=90}function isNameStart(t){return isLetter(t)||t===95}function isNameContinue(t){return isLetter(t)||isDigit(t)||t===95}function dedentBlockStringLines(t){var e;let n=Number.MAX_SAFE_INTEGER,r=null,a=-1;for(let u=0;u<t.length;++u){var o;const h=t[u],d=leadingWhitespace(h);d!==h.length&&(r=(o=r)!==null&&o!==void 0?o:u,a=u,u!==0&&d<n&&(n=d))}return t.map((u,h)=>h===0?u:u.slice(n)).slice((e=r)!==null&&e!==void 0?e:0,a+1)}function leadingWhitespace(t){let e=0;for(;e<t.length&&isWhiteSpace(t.charCodeAt(e));)++e;return e}function printBlockString(t,e){const n=t.replace(/"""/g,'\\"""'),r=n.split(/\r\n|[\n\r]/g),a=r.length===1,o=r.length>1&&r.slice(1).every(w=>w.length===0||isWhiteSpace(w.charCodeAt(0))),u=n.endsWith('\\"""'),h=t.endsWith('"')&&!u,d=t.endsWith("\\"),f=h||d,m=!a||t.length>70||f||o||u;let b="";const E=a&&isWhiteSpace(t.charCodeAt(0));return(m&&!E||o)&&(b+=`
`),b+=n,(m||f)&&(b+=`
`),'"""'+b+'"""'}var TokenKind;(function(t){t.SOF="<SOF>",t.EOF="<EOF>",t.BANG="!",t.DOLLAR="$",t.AMP="&",t.PAREN_L="(",t.PAREN_R=")",t.SPREAD="...",t.COLON=":",t.EQUALS="=",t.AT="@",t.BRACKET_L="[",t.BRACKET_R="]",t.BRACE_L="{",t.PIPE="|",t.BRACE_R="}",t.NAME="Name",t.INT="Int",t.FLOAT="Float",t.STRING="String",t.BLOCK_STRING="BlockString",t.COMMENT="Comment"})(TokenKind||(TokenKind={}));class Lexer{constructor(e){const n=new Token(TokenKind.SOF,0,0,0,0);this.source=e,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==TokenKind.EOF)do if(e.next)e=e.next;else{const n=readNextToken(this,e.end);e.next=n,n.prev=e,e=n}while(e.kind===TokenKind.COMMENT);return e}}function isPunctuatorTokenKind(t){return t===TokenKind.BANG||t===TokenKind.DOLLAR||t===TokenKind.AMP||t===TokenKind.PAREN_L||t===TokenKind.PAREN_R||t===TokenKind.SPREAD||t===TokenKind.COLON||t===TokenKind.EQUALS||t===TokenKind.AT||t===TokenKind.BRACKET_L||t===TokenKind.BRACKET_R||t===TokenKind.BRACE_L||t===TokenKind.PIPE||t===TokenKind.BRACE_R}function isUnicodeScalarValue(t){return t>=0&&t<=55295||t>=57344&&t<=1114111}function isSupplementaryCodePoint(t,e){return isLeadingSurrogate(t.charCodeAt(e))&&isTrailingSurrogate(t.charCodeAt(e+1))}function isLeadingSurrogate(t){return t>=55296&&t<=56319}function isTrailingSurrogate(t){return t>=56320&&t<=57343}function printCodePointAt(t,e){const n=t.source.body.codePointAt(e);if(n===void 0)return TokenKind.EOF;if(n>=32&&n<=126){const r=String.fromCodePoint(n);return r==='"'?`'"'`:`"${r}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function createToken(t,e,n,r,a){const o=t.line,u=1+n-t.lineStart;return new Token(e,n,r,o,u,a)}function readNextToken(t,e){const n=t.source.body,r=n.length;let a=e;for(;a<r;){const o=n.charCodeAt(a);switch(o){case 65279:case 9:case 32:case 44:++a;continue;case 10:++a,++t.line,t.lineStart=a;continue;case 13:n.charCodeAt(a+1)===10?a+=2:++a,++t.line,t.lineStart=a;continue;case 35:return readComment(t,a);case 33:return createToken(t,TokenKind.BANG,a,a+1);case 36:return createToken(t,TokenKind.DOLLAR,a,a+1);case 38:return createToken(t,TokenKind.AMP,a,a+1);case 40:return createToken(t,TokenKind.PAREN_L,a,a+1);case 41:return createToken(t,TokenKind.PAREN_R,a,a+1);case 46:if(n.charCodeAt(a+1)===46&&n.charCodeAt(a+2)===46)return createToken(t,TokenKind.SPREAD,a,a+3);break;case 58:return createToken(t,TokenKind.COLON,a,a+1);case 61:return createToken(t,TokenKind.EQUALS,a,a+1);case 64:return createToken(t,TokenKind.AT,a,a+1);case 91:return createToken(t,TokenKind.BRACKET_L,a,a+1);case 93:return createToken(t,TokenKind.BRACKET_R,a,a+1);case 123:return createToken(t,TokenKind.BRACE_L,a,a+1);case 124:return createToken(t,TokenKind.PIPE,a,a+1);case 125:return createToken(t,TokenKind.BRACE_R,a,a+1);case 34:return n.charCodeAt(a+1)===34&&n.charCodeAt(a+2)===34?readBlockString(t,a):readString(t,a)}if(isDigit(o)||o===45)return readNumber(t,a,o);if(isNameStart(o))return readName(t,a);throw syntaxError(t.source,a,o===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:isUnicodeScalarValue(o)||isSupplementaryCodePoint(n,a)?`Unexpected character: ${printCodePointAt(t,a)}.`:`Invalid character: ${printCodePointAt(t,a)}.`)}return createToken(t,TokenKind.EOF,r,r)}function readComment(t,e){const n=t.source.body,r=n.length;let a=e+1;for(;a<r;){const o=n.charCodeAt(a);if(o===10||o===13)break;if(isUnicodeScalarValue(o))++a;else if(isSupplementaryCodePoint(n,a))a+=2;else break}return createToken(t,TokenKind.COMMENT,e,a,n.slice(e+1,a))}function readNumber(t,e,n){const r=t.source.body;let a=e,o=n,u=!1;if(o===45&&(o=r.charCodeAt(++a)),o===48){if(o=r.charCodeAt(++a),isDigit(o))throw syntaxError(t.source,a,`Invalid number, unexpected digit after 0: ${printCodePointAt(t,a)}.`)}else a=readDigits(t,a,o),o=r.charCodeAt(a);if(o===46&&(u=!0,o=r.charCodeAt(++a),a=readDigits(t,a,o),o=r.charCodeAt(a)),(o===69||o===101)&&(u=!0,o=r.charCodeAt(++a),(o===43||o===45)&&(o=r.charCodeAt(++a)),a=readDigits(t,a,o),o=r.charCodeAt(a)),o===46||isNameStart(o))throw syntaxError(t.source,a,`Invalid number, expected digit but got: ${printCodePointAt(t,a)}.`);return createToken(t,u?TokenKind.FLOAT:TokenKind.INT,e,a,r.slice(e,a))}function readDigits(t,e,n){if(!isDigit(n))throw syntaxError(t.source,e,`Invalid number, expected digit but got: ${printCodePointAt(t,e)}.`);const r=t.source.body;let a=e+1;for(;isDigit(r.charCodeAt(a));)++a;return a}function readString(t,e){const n=t.source.body,r=n.length;let a=e+1,o=a,u="";for(;a<r;){const h=n.charCodeAt(a);if(h===34)return u+=n.slice(o,a),createToken(t,TokenKind.STRING,e,a+1,u);if(h===92){u+=n.slice(o,a);const d=n.charCodeAt(a+1)===117?n.charCodeAt(a+2)===123?readEscapedUnicodeVariableWidth(t,a):readEscapedUnicodeFixedWidth(t,a):readEscapedCharacter(t,a);u+=d.value,a+=d.size,o=a;continue}if(h===10||h===13)break;if(isUnicodeScalarValue(h))++a;else if(isSupplementaryCodePoint(n,a))a+=2;else throw syntaxError(t.source,a,`Invalid character within String: ${printCodePointAt(t,a)}.`)}throw syntaxError(t.source,a,"Unterminated string.")}function readEscapedUnicodeVariableWidth(t,e){const n=t.source.body;let r=0,a=3;for(;a<12;){const o=n.charCodeAt(e+a++);if(o===125){if(a<5||!isUnicodeScalarValue(r))break;return{value:String.fromCodePoint(r),size:a}}if(r=r<<4|readHexDigit(o),r<0)break}throw syntaxError(t.source,e,`Invalid Unicode escape sequence: "${n.slice(e,e+a)}".`)}function readEscapedUnicodeFixedWidth(t,e){const n=t.source.body,r=read16BitHexCode(n,e+2);if(isUnicodeScalarValue(r))return{value:String.fromCodePoint(r),size:6};if(isLeadingSurrogate(r)&&n.charCodeAt(e+6)===92&&n.charCodeAt(e+7)===117){const a=read16BitHexCode(n,e+8);if(isTrailingSurrogate(a))return{value:String.fromCodePoint(r,a),size:12}}throw syntaxError(t.source,e,`Invalid Unicode escape sequence: "${n.slice(e,e+6)}".`)}function read16BitHexCode(t,e){return readHexDigit(t.charCodeAt(e))<<12|readHexDigit(t.charCodeAt(e+1))<<8|readHexDigit(t.charCodeAt(e+2))<<4|readHexDigit(t.charCodeAt(e+3))}function readHexDigit(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function readEscapedCharacter(t,e){const n=t.source.body;switch(n.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw syntaxError(t.source,e,`Invalid character escape sequence: "${n.slice(e,e+2)}".`)}function readBlockString(t,e){const n=t.source.body,r=n.length;let a=t.lineStart,o=e+3,u=o,h="";const d=[];for(;o<r;){const f=n.charCodeAt(o);if(f===34&&n.charCodeAt(o+1)===34&&n.charCodeAt(o+2)===34){h+=n.slice(u,o),d.push(h);const m=createToken(t,TokenKind.BLOCK_STRING,e,o+3,dedentBlockStringLines(d).join(`
`));return t.line+=d.length-1,t.lineStart=a,m}if(f===92&&n.charCodeAt(o+1)===34&&n.charCodeAt(o+2)===34&&n.charCodeAt(o+3)===34){h+=n.slice(u,o),u=o+1,o+=4;continue}if(f===10||f===13){h+=n.slice(u,o),d.push(h),f===13&&n.charCodeAt(o+1)===10?o+=2:++o,h="",u=o,a=o;continue}if(isUnicodeScalarValue(f))++o;else if(isSupplementaryCodePoint(n,o))o+=2;else throw syntaxError(t.source,o,`Invalid character within String: ${printCodePointAt(t,o)}.`)}throw syntaxError(t.source,o,"Unterminated string.")}function readName(t,e){const n=t.source.body,r=n.length;let a=e+1;for(;a<r;){const o=n.charCodeAt(a);if(isNameContinue(o))++a;else break}return createToken(t,TokenKind.NAME,e,a,n.slice(e,a))}const MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(t){return formatValue(t,[])}function formatValue(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return formatObjectValue(t,e);default:return String(t)}}function formatObjectValue(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const n=[...e,t];if(isJSONable(t)){const r=t.toJSON();if(r!==t)return typeof r=="string"?r:formatValue(r,n)}else if(Array.isArray(t))return formatArray(t,n);return formatObject(t,n)}function isJSONable(t){return typeof t.toJSON=="function"}function formatObject(t,e){const n=Object.entries(t);return n.length===0?"{}":e.length>MAX_RECURSIVE_DEPTH?"["+getObjectTag(t)+"]":"{ "+n.map(([a,o])=>a+": "+formatValue(o,e)).join(", ")+" }"}function formatArray(t,e){if(t.length===0)return"[]";if(e.length>MAX_RECURSIVE_DEPTH)return"[Array]";const n=Math.min(MAX_ARRAY_LENGTH,t.length),r=t.length-n,a=[];for(let o=0;o<n;++o)a.push(formatValue(t[o],e));return r===1?a.push("... 1 more item"):r>1&&a.push(`... ${r} more items`),"["+a.join(", ")+"]"}function getObjectTag(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const n=t.constructor.name;if(typeof n=="string"&&n!=="")return n}return e}const isProduction=globalThis.process&&!0,instanceOf=isProduction?function t(e,n){return e instanceof n}:function t(e,n){if(e instanceof n)return!0;if(typeof e=="object"&&e!==null){var r;const a=n.prototype[Symbol.toStringTag],o=Symbol.toStringTag in e?e[Symbol.toStringTag]:(r=e.constructor)===null||r===void 0?void 0:r.name;if(a===o){const u=inspect(e);throw new Error(`Cannot use ${a} "${u}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Source{constructor(e,n="GraphQL request",r={line:1,column:1}){typeof e=="string"||devAssert(!1,`Body must be a string. Received: ${inspect(e)}.`),this.body=e,this.name=n,this.locationOffset=r,this.locationOffset.line>0||devAssert(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function isSource(t){return instanceOf(t,Source)}function parse(t,e){const n=new Parser(t,e),r=n.parseDocument();return Object.defineProperty(r,"tokenCount",{enumerable:!1,value:n.tokenCount}),r}class Parser{constructor(e,n={}){const r=isSource(e)?e:new Source(e);this._lexer=new Lexer(r),this._options=n,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(TokenKind.NAME);return this.node(e,{kind:Kind.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF)})}parseDefinition(){if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),n=e?this._lexer.lookahead():this._lexer.token;if(n.kind===TokenKind.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw syntaxError(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return this.node(e,{kind:Kind.OPERATION_DEFINITION,operation:OperationTypeNode.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const n=this.parseOperationType();let r;return this.peek(TokenKind.NAME)&&(r=this.parseName()),this.node(e,{kind:Kind.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(TokenKind.NAME);switch(e.value){case"query":return OperationTypeNode.QUERY;case"mutation":return OperationTypeNode.MUTATION;case"subscription":return OperationTypeNode.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),this.node(e,{kind:Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R)})}parseSelection(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,n=this.parseName();let r,a;return this.expectOptionalToken(TokenKind.COLON)?(r=n,a=this.parseName()):a=n,this.node(e,{kind:Kind.FIELD,alias:r,name:a,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const n=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,n,TokenKind.PAREN_R)}parseArgument(e=!1){const n=this._lexer.token,r=this.parseName();return this.expectToken(TokenKind.COLON),this.node(n,{kind:Kind.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(TokenKind.SPREAD);const n=this.expectOptionalKeyword("on");return!n&&this.peek(TokenKind.NAME)?this.node(e,{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:Kind.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const n=this._lexer.token;switch(n.kind){case TokenKind.BRACKET_L:return this.parseList(e);case TokenKind.BRACE_L:return this.parseObject(e);case TokenKind.INT:return this.advanceLexer(),this.node(n,{kind:Kind.INT,value:n.value});case TokenKind.FLOAT:return this.advanceLexer(),this.node(n,{kind:Kind.FLOAT,value:n.value});case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:Kind.BOOLEAN,value:!0});case"false":return this.node(n,{kind:Kind.BOOLEAN,value:!1});case"null":return this.node(n,{kind:Kind.NULL});default:return this.node(n,{kind:Kind.ENUM,value:n.value})}case TokenKind.DOLLAR:if(e)if(this.expectToken(TokenKind.DOLLAR),this._lexer.token.kind===TokenKind.NAME){const r=this._lexer.token.value;throw syntaxError(this._lexer.source,n.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:Kind.STRING,value:e.value,block:e.kind===TokenKind.BLOCK_STRING})}parseList(e){const n=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,n,TokenKind.BRACKET_R)})}parseObject(e){const n=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,n,TokenKind.BRACE_R)})}parseObjectField(e){const n=this._lexer.token,r=this.parseName();return this.expectToken(TokenKind.COLON),this.node(n,{kind:Kind.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const n=[];for(;this.peek(TokenKind.AT);)n.push(this.parseDirective(e));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const n=this._lexer.token;return this.expectToken(TokenKind.AT),this.node(n,{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let n;if(this.expectOptionalToken(TokenKind.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(TokenKind.BRACKET_R),n=this.node(e,{kind:Kind.LIST_TYPE,type:r})}else n=this.parseNamedType();return this.expectOptionalToken(TokenKind.BANG)?this.node(e,{kind:Kind.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),a=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return this.node(e,{kind:Kind.SCHEMA_DEFINITION,description:n,directives:r,operationTypes:a})}parseOperationTypeDefinition(){const e=this._lexer.token,n=this.parseOperationType();this.expectToken(TokenKind.COLON);const r=this.parseNamedType();return this.node(e,{kind:Kind.OPERATION_TYPE_DEFINITION,operation:n,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),a=this.parseConstDirectives();return this.node(e,{kind:Kind.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:a})}parseObjectTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),a=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),u=this.parseFieldsDefinition();return this.node(e,{kind:Kind.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:a,directives:o,fields:u})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseName(),a=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);const o=this.parseTypeReference(),u=this.parseConstDirectives();return this.node(e,{kind:Kind.FIELD_DEFINITION,description:n,name:r,arguments:a,type:o,directives:u})}parseArgumentDefs(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(TokenKind.COLON);const a=this.parseTypeReference();let o;this.expectOptionalToken(TokenKind.EQUALS)&&(o=this.parseConstValueLiteral());const u=this.parseConstDirectives();return this.node(e,{kind:Kind.INPUT_VALUE_DEFINITION,description:n,name:r,type:a,defaultValue:o,directives:u})}parseInterfaceTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),a=this.parseImplementsInterfaces(),o=this.parseConstDirectives(),u=this.parseFieldsDefinition();return this.node(e,{kind:Kind.INTERFACE_TYPE_DEFINITION,description:n,name:r,interfaces:a,directives:o,fields:u})}parseUnionTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),a=this.parseConstDirectives(),o=this.parseUnionMemberTypes();return this.node(e,{kind:Kind.UNION_TYPE_DEFINITION,description:n,name:r,directives:a,types:o})}parseUnionMemberTypes(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),a=this.parseConstDirectives(),o=this.parseEnumValuesDefinition();return this.node(e,{kind:Kind.ENUM_TYPE_DEFINITION,description:n,name:r,directives:a,values:o})}parseEnumValuesDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,n=this.parseDescription(),r=this.parseEnumValueName(),a=this.parseConstDirectives();return this.node(e,{kind:Kind.ENUM_VALUE_DEFINITION,description:n,name:r,directives:a})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw syntaxError(this._lexer.source,this._lexer.token.start,`${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),a=this.parseConstDirectives(),o=this.parseInputFieldsDefinition();return this.node(e,{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:a,fields:o})}parseInputFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===TokenKind.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(n.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:Kind.SCHEMA_EXTENSION,directives:n,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:Kind.SCALAR_TYPE_EXTENSION,name:n,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:Kind.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:a,fields:o})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseConstDirectives(),o=this.parseFieldsDefinition();if(r.length===0&&a.length===0&&o.length===0)throw this.unexpected();return this.node(e,{kind:Kind.INTERFACE_TYPE_EXTENSION,name:n,interfaces:r,directives:a,fields:o})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),a=this.parseUnionMemberTypes();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Kind.UNION_TYPE_EXTENSION,name:n,directives:r,types:a})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),a=this.parseEnumValuesDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Kind.ENUM_TYPE_EXTENSION,name:n,directives:r,values:a})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),a=this.parseInputFieldsDefinition();if(r.length===0&&a.length===0)throw this.unexpected();return this.node(e,{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:a})}parseDirectiveDefinition(){const e=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);const r=this.parseName(),a=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const u=this.parseDirectiveLocations();return this.node(e,{kind:Kind.DIRECTIVE_DEFINITION,description:n,name:r,arguments:a,repeatable:o,locations:u})}parseDirectiveLocations(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(DirectiveLocation,n.value))return n;throw this.unexpected(e)}node(e,n){return this._options.noLocation!==!0&&(n.loc=new Location(e,this._lexer.lastToken,this._lexer.source)),n}peek(e){return this._lexer.token.kind===e}expectToken(e){const n=this._lexer.token;if(n.kind===e)return this.advanceLexer(),n;throw syntaxError(this._lexer.source,n.start,`Expected ${getTokenKindDesc(e)}, found ${getTokenDesc(n)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const n=this._lexer.token;if(n.kind===TokenKind.NAME&&n.value===e)this.advanceLexer();else throw syntaxError(this._lexer.source,n.start,`Expected "${e}", found ${getTokenDesc(n)}.`)}expectOptionalKeyword(e){const n=this._lexer.token;return n.kind===TokenKind.NAME&&n.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const n=e??this._lexer.token;return syntaxError(this._lexer.source,n.start,`Unexpected ${getTokenDesc(n)}.`)}any(e,n,r){this.expectToken(e);const a=[];for(;!this.expectOptionalToken(r);)a.push(n.call(this));return a}optionalMany(e,n,r){if(this.expectOptionalToken(e)){const a=[];do a.push(n.call(this));while(!this.expectOptionalToken(r));return a}return[]}many(e,n,r){this.expectToken(e);const a=[];do a.push(n.call(this));while(!this.expectOptionalToken(r));return a}delimitedMany(e,n){this.expectOptionalToken(e);const r=[];do r.push(n.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,n=this._lexer.advance();if(n.kind!==TokenKind.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw syntaxError(this._lexer.source,n.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function getTokenDesc(t){const e=t.value;return getTokenKindDesc(t.kind)+(e!=null?` "${e}"`:"")}function getTokenKindDesc(t){return isPunctuatorTokenKind(t)?`"${t}"`:t}function printString(t){return`"${t.replace(escapedRegExp,escapedReplacer)}"`}const escapedRegExp=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function escapedReplacer(t){return escapeSequences[t.charCodeAt(0)]}const escapeSequences=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],BREAK=Object.freeze({});function visit(t,e,n=QueryDocumentKeys){const r=new Map;for(const T of Object.values(Kind))r.set(T,getEnterLeaveForKind(e,T));let a,o=Array.isArray(t),u=[t],h=-1,d=[],f=t,m,b;const E=[],w=[];do{h++;const T=h===u.length,R=T&&d.length!==0;if(T){if(m=w.length===0?void 0:E[E.length-1],f=b,b=w.pop(),R)if(o){f=f.slice();let x=0;for(const[S,O]of d){const A=S-x;O===null?(f.splice(A,1),x++):f[A]=O}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(const[x,S]of d)f[x]=S}h=a.index,u=a.keys,d=a.edits,o=a.inArray,a=a.prev}else if(b){if(m=o?h:u[h],f=b[m],f==null)continue;E.push(m)}let k;if(!Array.isArray(f)){var y,g;isNode(f)||devAssert(!1,`Invalid AST Node: ${inspect(f)}.`);const x=T?(y=r.get(f.kind))===null||y===void 0?void 0:y.leave:(g=r.get(f.kind))===null||g===void 0?void 0:g.enter;if(k=x==null?void 0:x.call(e,f,m,b,E,w),k===BREAK)break;if(k===!1){if(!T){E.pop();continue}}else if(k!==void 0&&(d.push([m,k]),!T))if(isNode(k))f=k;else{E.pop();continue}}if(k===void 0&&R&&d.push([m,f]),T)E.pop();else{var v;a={inArray:o,index:h,keys:u,edits:d,prev:a},o=Array.isArray(f),u=o?f:(v=n[f.kind])!==null&&v!==void 0?v:[],h=-1,d=[],b&&w.push(b),b=f}}while(a!==void 0);return d.length!==0?d[d.length-1][1]:t}function getEnterLeaveForKind(t,e){const n=t[e];return typeof n=="object"?n:typeof n=="function"?{enter:n,leave:void 0}:{enter:t.enter,leave:t.leave}}function print(t){return visit(t,printDocASTReducer)}const MAX_LINE_LENGTH=80,printDocASTReducer={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>join(t.definitions,`

`)},OperationDefinition:{leave(t){const e=wrap("(",join(t.variableDefinitions,", "),")"),n=join([t.operation,join([t.name,e]),join(t.directives," ")]," ");return(n==="query"?"":n+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:n,directives:r})=>t+": "+e+wrap(" = ",n)+wrap(" ",join(r," "))},SelectionSet:{leave:({selections:t})=>block(t)},Field:{leave({alias:t,name:e,arguments:n,directives:r,selectionSet:a}){const o=wrap("",t,": ")+e;let u=o+wrap("(",join(n,", "),")");return u.length>MAX_LINE_LENGTH&&(u=o+wrap(`(
`,indent(join(n,`
`)),`
)`)),join([u,join(r," "),a]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+wrap(" ",join(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:n})=>join(["...",wrap("on ",t),join(e," "),n]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:n,directives:r,selectionSet:a})=>`fragment ${t}${wrap("(",join(n,", "),")")} on ${e} ${wrap("",join(r," ")," ")}`+a},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?printBlockString(t):printString(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+join(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+join(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+wrap("(",join(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:n})=>wrap("",t,`
`)+join(["schema",join(e," "),block(n)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:n})=>wrap("",t,`
`)+join(["scalar",e,join(n," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:n,directives:r,fields:a})=>wrap("",t,`
`)+join(["type",e,wrap("implements ",join(n," & ")),join(r," "),block(a)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:n,type:r,directives:a})=>wrap("",t,`
`)+e+(hasMultilineItems(n)?wrap(`(
`,indent(join(n,`
`)),`
)`):wrap("(",join(n,", "),")"))+": "+r+wrap(" ",join(a," "))},InputValueDefinition:{leave:({description:t,name:e,type:n,defaultValue:r,directives:a})=>wrap("",t,`
`)+join([e+": "+n,wrap("= ",r),join(a," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:n,directives:r,fields:a})=>wrap("",t,`
`)+join(["interface",e,wrap("implements ",join(n," & ")),join(r," "),block(a)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:n,types:r})=>wrap("",t,`
`)+join(["union",e,join(n," "),wrap("= ",join(r," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:n,values:r})=>wrap("",t,`
`)+join(["enum",e,join(n," "),block(r)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:n})=>wrap("",t,`
`)+join([e,join(n," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:n,fields:r})=>wrap("",t,`
`)+join(["input",e,join(n," "),block(r)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:n,repeatable:r,locations:a})=>wrap("",t,`
`)+"directive @"+e+(hasMultilineItems(n)?wrap(`(
`,indent(join(n,`
`)),`
)`):wrap("(",join(n,", "),")"))+(r?" repeatable":"")+" on "+join(a," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>join(["extend schema",join(t," "),block(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>join(["extend scalar",t,join(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:n,fields:r})=>join(["extend type",t,wrap("implements ",join(e," & ")),join(n," "),block(r)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:n,fields:r})=>join(["extend interface",t,wrap("implements ",join(e," & ")),join(n," "),block(r)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:n})=>join(["extend union",t,join(e," "),wrap("= ",join(n," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:n})=>join(["extend enum",t,join(e," "),block(n)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:n})=>join(["extend input",t,join(e," "),block(n)]," ")}};function join(t,e=""){var n;return(n=t==null?void 0:t.filter(r=>r).join(e))!==null&&n!==void 0?n:""}function block(t){return wrap(`{
`,indent(join(t,`
`)),`
}`)}function wrap(t,e,n=""){return e!=null&&e!==""?t+e+n:""}function indent(t){return wrap("  ",t.replace(/\n/g,`
  `))}function hasMultilineItems(t){var e;return(e=t==null?void 0:t.some(n=>n.includes(`
`)))!==null&&e!==void 0?e:!1}const ACCEPT_HEADER="Accept",CONTENT_TYPE_HEADER="Content-Type",CONTENT_TYPE_JSON="application/json",CONTENT_TYPE_GQL="application/graphql-response+json",cleanQuery=t=>t.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),isGraphQLContentType=t=>{const e=t.toLowerCase();return e.includes(CONTENT_TYPE_GQL)||e.includes(CONTENT_TYPE_JSON)},parseGraphQLExecutionResult=t=>{try{if(Array.isArray(t))return{_tag:"Batch",executionResults:t.map(parseExecutionResult)};if(isPlainObject(t))return{_tag:"Single",executionResult:parseExecutionResult(t)};throw new Error(`Invalid execution result: result is not object or array. 
Got:
${String(t)}`)}catch(e){return e}},parseExecutionResult=t=>{if(typeof t!="object"||t===null)throw new Error("Invalid execution result: result is not object");let e,n,r;if("errors"in t){if(!isPlainObject(t.errors)&&!Array.isArray(t.errors))throw new Error("Invalid execution result: errors is not plain object OR array");e=t.errors}if("data"in t){if(!isPlainObject(t.data)&&t.data!==null)throw new Error("Invalid execution result: data is not plain object");n=t.data}if("extensions"in t){if(!isPlainObject(t.extensions))throw new Error("Invalid execution result: extensions is not plain object");r=t.extensions}return{data:n,errors:e,extensions:r}},isRequestResultHaveErrors=t=>t._tag==="Batch"?t.executionResults.some(isExecutionResultHaveErrors):isExecutionResultHaveErrors(t.executionResult),isExecutionResultHaveErrors=t=>Array.isArray(t.errors)?t.errors.length>0:!!t.errors,isOperationDefinitionNode=t=>typeof t=="object"&&t!==null&&"kind"in t&&t.kind===Kind.OPERATION_DEFINITION,extractOperationName=t=>{var r;let e;const n=t.definitions.filter(isOperationDefinitionNode);return n.length===1&&(e=(r=n[0].name)==null?void 0:r.value),e},extractIsMutation=t=>{let e=!1;const n=t.definitions.filter(isOperationDefinitionNode);return n.length===1&&(e=n[0].operation===OperationTypeNode.MUTATION),e},analyzeDocument=(t,e)=>{const n=typeof t=="string"?t:print(t);let r=!1,a;if(e)return{expression:n,isMutation:r,operationName:a};const o=tryCatch(()=>typeof t=="string"?parse(t):t);return o instanceof Error?{expression:n,isMutation:r,operationName:a}:(a=extractOperationName(o),r=extractIsMutation(o),{expression:n,operationName:a,isMutation:r})},defaultJsonSerializer=JSON,runRequest=async t=>{const e={...t,method:t.request._tag==="Single"?t.request.document.isMutation?"POST":uppercase(t.method??"post"):t.request.hasMutations?"POST":uppercase(t.method??"post"),fetchOptions:{...t.fetchOptions,errorPolicy:t.fetchOptions.errorPolicy??"none"}},r=await createFetcher(e.method)(e);if(!r.ok)return new ClientError({status:r.status,headers:r.headers},{query:t.request._tag==="Single"?t.request.document.expression:t.request.query,variables:t.request.variables});const a=await parseResultFromResponse(r,t.fetchOptions.jsonSerializer??defaultJsonSerializer);if(a instanceof Error)throw a;const o={status:r.status,headers:r.headers};if(isRequestResultHaveErrors(a)&&e.fetchOptions.errorPolicy==="none"){const u=a._tag==="Batch"?{...a.executionResults,...o}:{...a.executionResult,...o};return new ClientError(u,{query:t.request._tag==="Single"?t.request.document.expression:t.request.query,variables:t.request.variables})}switch(a._tag){case"Single":return{...o,...executionResultClientResponseFields(e)(a.executionResult)};case"Batch":return{...o,data:a.executionResults.map(executionResultClientResponseFields(e))};default:casesExhausted(a)}},executionResultClientResponseFields=t=>e=>({extensions:e.extensions,data:e.data,errors:t.fetchOptions.errorPolicy==="all"?e.errors:void 0}),parseResultFromResponse=async(t,e)=>{const n=t.headers.get(CONTENT_TYPE_HEADER),r=await t.text();return n&&isGraphQLContentType(n)?parseGraphQLExecutionResult(e.parse(r)):parseGraphQLExecutionResult(r)},createFetcher=t=>async e=>{const n=new Headers(e.headers);let r=null,a;n.has(ACCEPT_HEADER)||n.set(ACCEPT_HEADER,[CONTENT_TYPE_GQL,CONTENT_TYPE_JSON].join(", ")),t==="POST"?(a=(e.fetchOptions.jsonSerializer??defaultJsonSerializer).stringify(buildBody(e)),typeof a=="string"&&!n.has(CONTENT_TYPE_HEADER)&&n.set(CONTENT_TYPE_HEADER,CONTENT_TYPE_JSON)):r=buildQueryParams(e);const o={method:t,headers:n,body:a,...e.fetchOptions};let u=new URL(e.url),h=o;if(e.middleware){const f=await Promise.resolve(e.middleware({...o,url:e.url,operationName:e.request._tag==="Single"?e.request.document.operationName:void 0,variables:e.request.variables})),{url:m,...b}=f;u=new URL(m),h=b}return r&&r.forEach((f,m)=>{u.searchParams.append(m,f)}),await(e.fetch??fetch)(u,h)},buildBody=t=>{switch(t.request._tag){case"Single":return{query:t.request.document.expression,variables:t.request.variables,operationName:t.request.document.operationName};case"Batch":return zip(t.request.query,t.request.variables??[]).map(([e,n])=>({query:e,variables:n}));default:throw casesExhausted(t.request)}},buildQueryParams=t=>{var r;const e=t.fetchOptions.jsonSerializer??defaultJsonSerializer,n=new URLSearchParams;switch(t.request._tag){case"Single":return n.append("query",cleanQuery(t.request.document.expression)),t.request.variables&&n.append("variables",e.stringify(t.request.variables)),t.request.document.operationName&&n.append("operationName",t.request.document.operationName),n;case"Batch":{const a=((r=t.request.variables)==null?void 0:r.map(h=>e.stringify(h)))??[],o=t.request.query.map(cleanQuery),u=zip(o,a).map(([h,d])=>({query:h,variables:d}));return n.append("query",e.stringify(u)),n}default:throw casesExhausted(t.request)}};class GraphQLClient{constructor(e,n={}){Et(this,"url");Et(this,"requestConfig");Et(this,"rawRequest",async(...e)=>{const[n,r,a]=e,o=parseRawRequestArgs(n,r,a),{headers:u,fetch:h=globalThis.fetch,method:d="POST",requestMiddleware:f,responseMiddleware:m,excludeOperationName:b,...E}=this.requestConfig,{url:w}=this;o.signal!==void 0&&(E.signal=o.signal);const y=analyzeDocument(o.query,b),g=await runRequest({url:w,request:{_tag:"Single",document:y,variables:o.variables},headers:{...HeadersInitToPlainObject(callOrIdentity(u)),...HeadersInitToPlainObject(o.requestHeaders)},fetch:h,method:d,fetchOptions:E,middleware:f});if(m&&await m(g,{operationName:y.operationName,variables:r,url:this.url}),g instanceof Error)throw g;return g});this.url=e,this.requestConfig=n}async request(e,...n){const[r,a]=n,o=parseRequestArgs(e,r,a),{headers:u,fetch:h=globalThis.fetch,method:d="POST",requestMiddleware:f,responseMiddleware:m,excludeOperationName:b,...E}=this.requestConfig,{url:w}=this;o.signal!==void 0&&(E.signal=o.signal);const y=analyzeDocument(o.document,b),g=await runRequest({url:w,request:{_tag:"Single",document:y,variables:o.variables},headers:{...HeadersInitToPlainObject(callOrIdentity(u)),...HeadersInitToPlainObject(o.requestHeaders)},fetch:h,method:d,fetchOptions:E,middleware:f});if(m&&await m(g,{operationName:y.operationName,variables:o.variables,url:this.url}),g instanceof Error)throw g;return g.data}async batchRequests(e,n){const r=parseBatchRequestArgs(e,n),{headers:a,excludeOperationName:o,...u}=this.requestConfig;r.signal!==void 0&&(u.signal=r.signal);const h=r.documents.map(({document:E})=>analyzeDocument(E,o)),d=h.map(({expression:E})=>E),f=h.some(({isMutation:E})=>E),m=r.documents.map(({variables:E})=>E),b=await runRequest({url:this.url,request:{_tag:"Batch",operationName:void 0,query:d,hasMutations:f,variables:m},headers:{...HeadersInitToPlainObject(callOrIdentity(a)),...HeadersInitToPlainObject(r.requestHeaders)},fetch:this.requestConfig.fetch??globalThis.fetch,method:this.requestConfig.method||"POST",fetchOptions:u,middleware:this.requestConfig.requestMiddleware});if(this.requestConfig.responseMiddleware&&await this.requestConfig.responseMiddleware(b,{operationName:void 0,variables:m,url:this.url}),b instanceof Error)throw b;return b.data}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,n){const{headers:r}=this.requestConfig;return r?r[e]=n:this.requestConfig.headers={[e]:n},this}setEndpoint(e){return this.url=e,this}}const parseRequestArgs=(t,e,n)=>t.document?t:{document:t,variables:e,requestHeaders:n,signal:void 0},__vite_import_meta_env__={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_CATEG_CITA:"1",VITE_CHATGPT_KEY:"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",VITE_CHATGPT_URL:"https://api.openai.com/v1/chat/completions",VITE_EMAIL:"adrien012014@gmail.com",VITE_EMAIL_SERVICE_ID:"service_pih4vzi",VITE_EMAIL_TEMPLATE_ID:"template_wp8vf49",VITE_EMAIL_USER_ID:"QPFyG_5okzR39bVkS",VITE_END_SLOT_AM:"14:00",VITE_END_SLOT_PM:"20:00",VITE_GEMINI_API_KEY:"AIzaSyDx2nwruTIGV2NWCuoF0TWtrZwY1badw5Q",VITE_GOOGLEMAPS:"https://g.co/kgs/k6nkVw2",VITE_GRAPHQL_KEY:"b0oJ5NWT^GXk8=O+mdV=X2yzz1D5AgWX",VITE_GRAPHQL_URL:"https://irkwbvxjbynhlcascmrk.hasura.eu-central-1.nhost.run/v1/graphql",VITE_HUGGING_KEY:"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",VITE_HUGGING_MODEL:"mistralai/Mistral-Small-24B-Instruct-2501",VITE_ID_CLIENT:"1",VITE_LANG:"es",VITE_MAX_TOKENS_CHATGPT:"100",VITE_MAX_TOKENS_GEMINI:"30",VITE_MAX_TOKENS_HUGGING:"200",VITE_MAX_TOKENS_PERPLEXITY:"50",VITE_MODEL_PERPLEXITY:"sonar-reasoning",VITE_OPT_BUDGET:"1",VITE_OPT_CITA:"1",VITE_PERPLEXITY_API_KEY:"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",VITE_PROCEDURE_GET:"get_construction_data_",VITE_PUBLIC_HOLIDAYS_2025:"2025-01-01,2025-01-06,2025-04-18,2025-05-01,2025-05-02,2025-08-15,2025-10-12,2025-11-01,2025-12-06,2025-12-08,2025-12-25",VITE_PUBLIC_HOLIDAYS_2026:"2026-01-01,2026-01-06,2026-04-03,2026-04-02,2026-05-01,2026-05-02,2026-08-15,2026-10-12,2026-11-01,2026-12-06,2026-12-08,2026-12-25",VITE_PUBLIC_HOLIDAYS_2027:"2027-01-01,2027-01-06,2027-03-26,2027-03-25,2027-05-01,2027-05-03,2027-08-16,2027-10-12,2027-11-01,2027-12-06,2027-12-08,2027-12-25",VITE_PUBLIC_HOLIDAYS_2028:"2028-01-01,2028-01-06,2028-04-13,2028-04-14,2028-05-01,2028-05-02,2028-08-15,2028-10-12,2028-11-01,2028-12-06,2028-12-08,2028-12-25",VITE_PUBLIC_HOLIDAYS_2029:"2029-01-01,2029-01-06,2029-03-30,2029-05-01,2029-05-02,2029-08-15,2029-10-12,2029-11-01,2029-12-06,2029-12-08,2029-12-25",VITE_PUBLIC_HOLIDAYS_2030:"2030-01-01,2030-01-06,2030-04-19,2030-05-01,2030-05-02,2030-08-15,2030-10-12,2030-11-01,2030-12-06,2030-12-08,2030-12-25",VITE_PUBLIC_HOLIDAYS_2031:"2031-01-01,2031-01-06,2031-04-11,2031-05-01,2031-05-02,2031-08-15,2031-10-12,2031-11-01,2031-12-06,2031-12-08,2031-12-25",VITE_PUBLIC_HOLIDAYS_2032:"2032-01-01,2032-01-06,2032-03-26,2032-05-01,2032-05-03,2032-08-16,2032-10-12,2032-11-01,2032-12-06,2032-12-08,2032-12-25",VITE_PUBLIC_HOLIDAYS_2033:"2033-01-01,2033-01-06,2033-04-15,2033-05-01,2033-05-02,2033-08-15,2033-10-12,2033-11-01,2033-12-06,2033-12-08,2033-12-25",VITE_PUBLIC_HOLIDAYS_2034:"2034-01-01,2034-01-06,2034-04-07,2034-05-01,2034-08-15,2034-10-12,2034-11-01,2034-12-06,2034-12-08,2034-12-25",VITE_PUBLIC_HOLIDAYS_2035:"2035-01-01,2035-01-06,2035-03-23,2035-05-01,2035-05-02,2035-08-15,2035-10-12,2035-11-01,2035-12-06,2035-12-08,2035-12-25",VITE_START_SLOT_AM:"09:00",VITE_START_SLOT_PM:"17:00",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZicGFvam9jam9hdmZjZ3NqbGN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkyMDYyOTYsImV4cCI6MjA1NDc4MjI5Nn0._V1xik3yJRRv8EA0tLV2EvmHrLpZjSOzgsstza0SOB0",VITE_SUPABASE_URL:"https://vbpaojocjoavfcgsjlcy.supabase.co",VITE_TYPE_AI:"2",VITE_WHATSAPP:"34685338165"},perplexity=createPerplexity({apiKey:"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"}),client=new GraphQLClient("https://irkwbvxjbynhlcascmrk.hasura.eu-central-1.nhost.run/v1/graphql",{headers:{"x-hasura-admin-secret":"b0oJ5NWT^GXk8=O+mdV=X2yzz1D5AgWX"}});pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";const year=new Date().getFullYear(),envVarName=`VITE_PUBLIC_HOLIDAYS_${year}`,public_holidays=__vite_import_meta_env__[envVarName],chatgpt_api_url="https://api.openai.com/v1/chat/completions",chatgpt_api_key="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",supabaseUrl$1="https://vbpaojocjoavfcgsjlcy.supabase.co",supabaseAnonKey$1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZicGFvam9jam9hdmZjZ3NqbGN5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzkyMDYyOTYsImV4cCI6MjA1NDc4MjI5Nn0._V1xik3yJRRv8EA0tLV2EvmHrLpZjSOzgsstza0SOB0",supabase=createClient(supabaseUrl$1,supabaseAnonKey$1),ClientView=()=>{const[t,e]=reactExports.useState(!1),[n,r]=reactExports.useState([]),[a,o]=reactExports.useState(()=>JSON.parse(localStorage.getItem("curCateg"))||0),[u,h]=reactExports.useState([]),[d,f]=reactExports.useState([]),[m,b]=reactExports.useState([[]]),[E,w]=reactExports.useState("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"),[y,g]=reactExports.useState(""),[v,T]=reactExports.useState("none"),[R,k]=reactExports.useState(!1),[x,S]=reactExports.useState("es"),O=Te=>Te===""?x==="es"?"Resumen de mi cita":x==="en"?"Summary of my appointment":"Rsum de mon rendez-vous":Te==="es"?"Resumen de mi cita":Te==="en"?"Summary of my appointment":"Rsum de mon rendez-vous",A=Te=>Te===""?x==="es"?"Fecha y hora de mi cita : ":x==="en"?"Date and time of my appointment : ":"Date et heure de mon rendez-vous : ":Te==="es"?"Fecha y hora de mi cita : ":Te==="en"?"Date and time of my appointment : ":"Date et heure de mon rendez-vous : ",I=Te=>Te===""?x==="es"?"Tipo de servicio : ":x==="en"?"Type of service : ":"Type de service : ":Te==="es"?"Tipo de servicio : ":Te==="en"?"Type of service : ":"Type de service : ",P=Te=>x==="en"?"WhatsApp of the manager : ":"WhatsApp de la responsable : ",j=Te=>x==="es"?"Para cancelar su cita, haga clic en el botn 'Cancelar' en la parte inferior izquierda de la pgina. Para cualquier modificacin, por favor contacte a la responsable a travs de WhatsApp.":x==="en"?"To cancel your appointment, click on the 'Cancel' button at the bottom left of the page. For any changes, please contact the manager via WhatsApp.":"Pour annuler votre rendez-vous, cliquez sur le bouton 'Annuler' en bas  gauche de la page. Pour toute modification, veuillez contacter la responsable via WhatsApp.",B=Te=>x==="es"?" Para qu tipo de servicio desea solicitar una cita ?":x==="en"?"What type of service would you like to schedule an appointment for ?":"Pour quel type de service souhaitez-vous prendre rendez-vous ?",ie=Te=>Te===""?x==="es"?" Qu tipo de informacin le gustara recibir ?":x==="en"?"What specific information would you like to receive ?":"Quel type d'informations souhaiteriez-vous recevoir ?":Te==="es"?" Qu tipo de informacin le gustara recibir ?":Te==="en"?"What specific information would you like to receive ?":"Quel type d'informations souhaiteriez-vous recevoir ?",oe=Te=>Te===""?x==="es"?" Qu tipo de presupuesto le gustara recibir ?":x==="en"?"What kind of quote would you like to receive ?":"Quel type de devis aimeriez-vous recevoir ?":Te==="es"?" Qu tipo de presupuesto le gustara recibir ?":Te==="en"?"What kind of quote would you like to receive ?":"Quel type de devis aimeriez-vous recevoir ?",le=Te=>{navigator.clipboard.writeText(Te).then(()=>{k(!0),setTimeout(()=>k(!1),1500)}).catch(je=>console.error("Failed to copy:",je))},de=(Te,je,Le,ze,qe,tt,_t,Qe,rt,xt,Tt,et,ht)=>{Rn(ze);const $t={from_name:Le,to_name:Te,lbl_headerCita:qe,lbl_datehour:tt,val_datehour:_t,lbl_service:Qe,val_service:rt,lbl_name:xt,val_name:Tt,email:Te,lbl_wap:et,val_wap:ht,msg:ze,reply_to:je};emailjs.send("service_pih4vzi","template_wp8vf49",$t,"QPFyG_5okzR39bVkS").then(Ze=>{console.log("SUCCESS Mail !",Ze.status,Ze.text)},Ze=>{console.log("FAILED Mail ...",Ze)})};reactExports.useEffect(()=>{(async()=>{const{data:je,error:Le}=await supabase.from("AVAILABILITY").select("cur_date,slot").eq("id_client",1);Le?console.error("Error fetching availability:",Le):h(je)})()},[]);const K=`
    query GetSERVICE {
      SERVICE {
        id
        en
        es
        fr
        cat
      }
    }
  `,J=async()=>{try{const Te=await client.request(K);r(Te.SERVICE)}catch(Te){console.error("Error fetching data:",Te)}};reactExports.useEffect(()=>{J()},[]);const se=(Te,je,Le,ze)=>{let qe=[],tt=new Date(Te),_t=0;for(;tt<=je;){let rt=tt.getDay(),xt=tt.toISOString().split("T")[0];if(rt!==0&&!Le.includes(xt)&&qe.push(xt),_t++,_t===ze)break;tt.setDate(tt.getDate()+1)}qe.sort((rt,xt)=>new Date(rt)-new Date(xt));let Qe=[];for(let rt=0;rt<qe.length;rt+=5)Qe.push(qe.slice(rt,rt+5));return Qe},ue=()=>{e(!0)},[q,fe]=reactExports.useState({display:a!==1?"block":"none"}),[Z,N]=reactExports.useState({display:a!==0?"block":"none"}),[D,V]=reactExports.useState({display:a!==2?"block":"none"}),W=x==="es"?"Copiado !":x==="en"?"Copied !":"Copi !",te=Te=>Te==""?x==="es"?"es-ES":x==="en"?"en-US":"fr-FR":Te==="es"?"es-ES":Te==="en"?"en-US":"fr-FR",X=x==="es"?"Yo":x==="en"?"Me":"Moi",[C,L]=reactExports.useState(()=>JSON.parse(localStorage.getItem("curCita1"))||{idService:0,labelService:"",dateCita:new Date,nombre:"",contact:"",stepCita:0}),[U,$]=reactExports.useState(a===2&&C.stepCita<3||C.contact!=="");reactExports.useEffect(()=>{console.log("curCita1 lbl : "+C.labelService),console.log("curCita1 date : "+C.dateCita),console.log("curCita1 name : "+C.nombre),console.log("curCita1 contact : "+C.contact),console.log("curCita1 Step : "+C.stepCita),console.log("curCateg : "+a)},[]);const[H,Q]=reactExports.useState(X),G=Te=>Te===""?x==="es"?"Asistente virtual":x==="en"?"Virtual assistant":"Assistant virtuel":Te==="es"?"Asistente virtual":Te==="en"?"Virtual assistant":"Assistant virtuel",F=x==="es"?"Enviar":x==="en"?"Send":"Envoyer",ne=x==="es"?"Borrar":x==="en"?"Clear":"Effacer",he=x==="es"?"Cancelar":x==="en"?"Cancel":"Annuler",ae=x==="es"?"Informacin":"Information",pe=x==="es"?"Cita":x==="en"?"Appointment":"Rendez-vous",Ee=x==="es"?"Presupuesto":"Budget",we=x==="es"?"Escribe aqu":x==="en"?"Type here":"Tapez ici",Ie="";async function ve(Te,je){try{const Le="2";console.log("Type AI : "+Le);const ze=Te+(Te===""?"":`
Based on the previous text and/or CSV report, provide a natural and conversational response to the following question :  `)+je+"No recomendar de ponerse en contacto con empresas de limpieza locales. La expresin 'Lo siento' no puede aparecer en la respuesta.";if(Le==="2"){const tt="AIzaSyDx2nwruTIGV2NWCuoF0TWtrZwY1badw5Q",rt=await new GoogleGenerativeAI(tt).getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:"You are a company in the construction industry.",maxOutputTokens:30}).generateContent(ze);return console.log(`USE GEMINI, input :
`+ze),rt.response.text()}}catch(Le){console.error("Error generating content:",Le)}return"No-API AI"}const Ve=Te=>Te.split(`
`).filter(je=>je.trim()!=="").join(`
`);async function Fe(Te,je,Le,ze){try{let qe="";if(a===1){const{data:pt,error:Dt}=await supabase.rpc(Le);if(Dt)throw new Error(`Supabase RPC Error: ${Dt.message}`);return console.log(pt.length+"-"+Le),pt.length<=1?pt.length>0?qe=pt[0].TITLE:qe="":qe=Papa.unparse(pt,{header:!1,newline:`\r
`,quotes:!1}),qe=qe.replace(/"/g,""),qe=await ve(qe+`.
Si la informacin necesaria para proporcionar un presupuesto no es suficiente, dar el WhatsApp del jefe de la empresa : +`+"34685338165"+" (ultima frase de la respuesta).",Te),console.log(`Request only : 
`+qe),qe}else if(categ===2)return await ve("",Te);let tt=`
      How should I request a supabase table "${je}" with the headers "${ze}" if I have to answer to the question : "${Te}" ? Give as anwer only the select string and the filter string in the JSON format model 
      {
        "select": "Account",
        "filter": "Contact name=%Bertrand VANNE%"
      }. Follow the previous JSON model strictly.
      `;const _t=await ve("",tt);console.log(_t);let Qe="",rt="",xt="",Tt="",et=_t.split("{"),ht=null,$t=0;if(et.length>1&&(et=et[1].split("}"),et.length>0)){let pt=et[0].replace("eq.","");console.log("jsonText : "+pt),ht=JSON.parse(`{${pt}}`),ht.filter.split(",").forEach(Qt=>{let Nt=Qt.split("=");console.log(Nt[0]),Nt.length>1&&($t===0?(Qe=ht.select,rt=Qt.includes("%")?`${Nt[0]}=${Nt[1]}`:`${Nt[0]}=%${Nt[1]}%`,console.log(rt)):(xt=ht.select,Tt=Qt.includes("%")?`${Nt[0]}=${Nt[1]}`:`${Nt[0]}=%${Nt[1]}%`),$t++)})}console.log(Qe+`
`+rt);const{data:Ze,error:br}=await supabase.rpc(Le,{selectcontact:Qe,filtercontact:rt});if(br)throw new Error(`Supabase RPC Error: ${br.message}`);let Tn="";if(console.log("Number of items : "+Ze.length),Ze.length===0)return"";if(Ze.length<=1?qe=Ze[0].TITLE:qe=Papa.unparse(Ze,{header:!1,newline:`\r
`}),console.log(qe),$t>=2){console.log(xt+`
`+Tt);const{data2:pt,error2:Dt}=await supabase.rpc(Le,{selectcontact:xt,filtercontact:Tt});if(Dt)throw new Error(`Supabase RPC Error: ${Dt.message}`);if(pt.length===0)return qe;Tn=qe+`
`+pt[0].TITLE}else Tn=qe;return Tn=Ve(Tn),console.log(Tn),Tn}catch(qe){console.error(qe)}}async function De(Te){try{const je="get_construction_data_1_"+x;let Le=await Fe(Te,"",je,"");console.log(ut.length);for(let ze=0;ze<ut.length;ze++){const qe=await ve(ut[ze],Te);console.log(qe),!(qe.includes("doesn't provide")||qe.includes("doesn't mention")||qe.includes("doesn't include")||qe.includes("not provide")||qe.includes("not mention")||qe.includes("not include")||qe.includes("doesn't specify")||qe.includes("not specify")||qe.includes("not contain")||qe.includes("sorry"))&&(Le=Le+`
`+qe)}return Le}catch(je){return console.error("Error fetching ChatGPT response:",je),"Sorry, I couldn't process your request."}}const Be=reactExports.useRef(null),[ut,yt]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{Ie!=""}catch(je){console.error("Error in fetchFiles function:",je)}})()},[]);const ct=async Te=>{const je=await pdfExports.getDocument({data:Te}).promise;let Le="";for(let ze=1;ze<=je.numPages;ze++){const _t=(await(await je.getPage(ze)).getTextContent()).items.map(Qe=>Qe.str).join(" ");Le+=_t+`
`}return Le};reactExports.useEffect(()=>{localStorage.setItem("curCateg",JSON.stringify(a)),f([]),Xe(G(""),ie(""),"")},[a]),reactExports.useEffect(()=>{localStorage.setItem("curCita1",JSON.stringify(C))},[C]),reactExports.useEffect(()=>{Be.current&&(Be.current.scrollTop=Be.current.scrollHeight)},[d]);const it=Date.now(),nt=async Te=>{if(Te.preventDefault(),E!=="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"){console.log("Bot detected! Submission blocked.");return}else{const Qe=Date.now()-it;if(console.log("Diff : "+Qe),Qe<2e3){console.log("Bot detected: Too fast!");return}else if(!t){console.log("Bot detected: No prior interaction!");return}}if(y.trim()==="")return;const je=x==="es"?"es-ES":x==="en"?"en-US":"fr-FR",Le=new Date().toLocaleString(je,{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0});let ze="",qe="";const tt={sender:H,text:y,lines:y.split(`
`),whatsapp:ze,lnkWhatsapp:qe,timestamp:Le};if(D.display==="none"&&C.stepCita===3&&C.contact===""){ze="34685338165",qe="https://wa.me/"+ze+"?text=TT",L(rt=>({...rt,nombre:y,stepCita:rt.stepCita+1})),Xe(X,y,x);let Qe=x==="es"?"Finalmente, por favor, ingrese su correo electrnico ( haz clic en 'Enviar' para guardarlo) para confirmar la cita.":x==="en"?'Finally, please enter your email ( click "Send" to save it ) to confirm the appointment.':"Enfin, veuillez, s'il vous plat, saisir votre email ( cliquer sur 'Envoyer' pour l'enregistrer ) pour confirmer le rendez-vous.";Xe(G(""),Qe,x);return}else if(D.display==="none"&&C.stepCita===4&&C.contact===""){L(ht=>({...ht,contact:y,stepCita:ht.stepCita+1})),f([]);let Qe=O("")+`
`+A("")+`
`,rt=zt(new Date(C.dateCita)).toLocaleString(te(""),{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});Qe+=rt+`
`,Qe+=I("")+C.labelService+`
`,Qe+=P("")+` +34685338165
`;let xt=x==="es"?"Nueva cita":x==="en"?"New appointment":"Nouveau rendez-vous",Tt=x==="es"?"Nombre : ":x==="en"?"Name : ":"Nom : ";console.log("Nom :"+C.nombre);const et=encodeURIComponent(Qe);Ye(),de(y,"adrien012014@gmail.com",xt,et,O(""),A(""),rt,I(""),C.labelService,Tt,C.nombre,P(""),"34685338165");return}if(f([]),f(Qe=>[...Qe,tt]),a==0){Xe(G(""),"Les envio toda la informacion que tengo : ","");return}const _t="34685338165";if(H===X){console.log("msg : "+y),T("flex");let Qe=await De(y);Qe.includes(_t)?(ze="+"+_t,qe="https://wa.me/"+_t+"?text="+Qe):(ze="",qe=""),console.log("Before html : "+Qe);const rt=new RegExp(`\\+${ze}\\.`,"g");Qe=Qe.replace(rt,":");const xt={sender:G(""),text:Qe,lines:Qe.split(`
`),whatsapp:ze,lnkWhatsapp:qe,timestamp:Le};f(Tt=>[...Tt,xt]),T("none")}g("")},We=async()=>{if($(!0),a!==2)L(Te=>({...Te,stepCita:0})),f([]),setTimeout(()=>{a===0&&Xe(G(""),ie(""),""),a===1&&Xe(G(""),oe(""),"")},1e3);else{const Te=`
        mutation DeleteCitaById($id: Int!) {
          delete_CITA(where: { id: { _eq: $id } }) {
            affected_rows
          }
        }
      `,je={id:C.idService};(await client.request(Te,je)).delete_CITA.affected_rows>0?(console.log("Cita deleted successfully."),L({idService:0,labelService:"",dateCita:new Date,nombre:"",contact:"",stepCita:0})):console.log("No cita found with that ID."),localStorage.clear(),setTimeout(()=>{xe(!0)},1e3)}fe({display:"block"}),N({display:"block"}),V({display:"block"}),b([[]])},Jt=(Te,je,Le)=>{let ze="";f([]);const qe=x==="es"?"es-ES":x==="en"?"en-US":"fr-FR",tt=new Date().toLocaleString(qe,{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0}),_t=new Date;let Qe=je>=0?je:C.stepCita;switch(Qe){case 0:let rt=null;if(je<0){let pt=Number(Te);if(rt=n.filter(Dt=>Dt.id===pt),C.labelService.length===0&&_t<C.dateCita){ze=x==="es"?"Usted no puede reservar otra cita porque ya ha reservado dos.":x==="en"?"You cannot book another appointment because you have already booked two.":"Vous ne pouvez pas prendre un autre rendez-vous, car vous en avez dj pris deux.";const Dt={sender:G(""),text:ze,lines:[],whatsapp:"",lnkWhatsapp:"",timestamp:tt};f(Qt=>[...Qt,Dt]),Q(X);return}else console.log("filteredData"+rt[0]),L(Dt=>({...Dt,idService:pt,labelService:rt[0][x],stepCita:Dt.stepCita+1}));ze=I(x)+rt[0][x]+"  "+(x==="es"?" Qu da le gustara programar una cita ?":x==="en"?"Which day would you like to schedule an appointment ?":"Quel jour souhaitez-vous prendre rendez-vous ?")}else rt=n.filter(pt=>pt.id===C.idService),L(pt=>({...pt,labelService:rt[0][Le]})),ze=Le==="es"?" Qu da le gustara programar una cita ?":Le==="en"?"Which day would you like to schedule an appointment ?":"Quel jour souhaitez-vous prendre rendez-vous ?";console.log(Te);const xt=new Date;xt.setDate(xt.getDate()+1),console.log(xt);const Tt=xt,et=new Date("2099-12-31");console.log(public_holidays);let ht=se(Tt,et,public_holidays,29);b(ht);break;case 1:Qe<0?ze=x==="es"?" A qu hora ?":x==="en"?"At what time ?":" quelle heure ?":ze=Le==="es"?" A qu hora ?":Le==="en"?"At what time ?":" quelle heure ?",console.log(Te);const $t=new Date(Te);L(pt=>({...pt,dateCita:$t,stepCita:pt.stepCita+1})),console.log("VITE_ID_CLIENT:","1"),console.log("VITE_START_SLOT_AM:","09:00"),console.log("VITE_END_SLOT_AM:","14:00"),console.log("VITE_START_SLOT_PM:","17:00"),console.log("VITE_END_SLOT_PM:","20:00"),console.log(u);const Ze=[[]];Ze.push([]);let br=0,Tn=-1;if(u.forEach(pt=>{pt.cur_date===Te&&(br%4===0&&(Ze.push([]),Tn++),Ze[Tn].push(pt.slot)),br++}),console.log("arr l = "+Ze[0].length),Ze[0].length===0){let pt=je<0?x:Le;console.log("lg "+pt),Ze[0].push("11:00"),Ze[0].push("11:15"),Ze[0].push("11:30"),Ze[0].push("11:45"),Ze.push([]),Ze[1].push("12:00"),Ze[1].push("12:15"),Ze[1].push("12:30"),Ze[1].push("12:45"),Ze.push([]),Ze[2].push("13:00"),Ze[2].push("13:15"),Ze[2].push("13:30"),Ze[2].push("13:45"),Ze.push([]),Ze[3].push("17:00"),Ze[3].push("17:15"),Ze[3].push("17:30"),Ze[3].push("17:45"),Ze.push([]),Ze[4].push("18:00"),Ze[4].push("18:15"),Ze[4].push("18:30"),Ze[4].push("18:45"),Ze.push([]),Ze[5].push("19:00"),Ze[5].push("19:15"),Ze[5].push("19:30"),Ze[5].push("19:45")}b(Ze);break;case 2:if(console.log("hour selected "+Te),Te.length===5){const pt=Number(Te.slice(0,2)),Dt=Number(Te.slice(-2));let Qt=new Date;C.contact===""&&(Qt=C.dateCita,Qt.setUTCHours(pt),Qt.setUTCMinutes(Dt),L(Nt=>({...Nt,dateCita:Qt,nombre:"",contact:"",stepCita:Nt.stepCita+1})))}Qe<0?ze=x==="es"?"Para confirmar la cita, usted debe registrar su nombre y su direccin de correo electrnico. Primero, introduzca su nombre y luego haga clic en 'Enviar' para guardarlo.":x==="en"?"To confirm the appointment, you must register your first name and your email address. First, enter your first name, then click 'Send' to save it.":"Pour confirmer le rendez-vous, vous devez enregistrer votre prnom ainsi que votre adresse e-mail. Veuillez d'abord saisir votre prnom, puis cliquez sur 'Envoyer' pour l'enregistrer.":(ze=Le==="es"?"Para confirmar la cita, usted debe registrar su nombre y su direccin de correo electrnico. Primero, introduzca su nombre y luego haga clic en 'Enviar' para guardarlo.":Le==="en"?"To confirm the appointment, you must register your first name and your email address. First, enter your first name, then click 'Send' to save it.":"Pour confirmer le rendez-vous, vous devez enregistrer votre prnom ainsi que votre adresse e-mail. Veuillez d'abord saisir votre prnom, puis cliquez sur 'Envoyer' pour l'enregistrer.",Xe(G(""),ze,"")),b([[]]);break}return ze},Zt=async Te=>{Te.preventDefault(),console.log("manageCita"+C.labelService);let je=Jt(Te.target.value,-1,x);console.log(Te.target.value+"-"+je),f([]),Xe(G(""),je,"")},Ct=Te=>{$(Te===2),o(Te);const je=x==="es"?"es-ES":x==="en"?"en-US":"fr-FR";new Date().toLocaleString(je,{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0}),Te===1&&(fe({display:"none"}),V({display:"block"}),N({display:"block"})),Te===0&&(fe({display:"block"}),V({display:"block"}),N({display:"none"})),setTimeout(()=>{let Le="";f([]),Te===2?xe(!1):(Te===0&&(Le=ie("")),Te===1&&(Le=oe("")),Xe(G(""),Le,""))},1e3)},xe=Te=>{let je=B();fe({display:"block"}),N({display:"block"}),V({display:Te?"block":"none"}),C.contact===""&&(console.log("serv nb : "+n.length),Xe(G(x),je,""),ye([[]],""))},ye=(Te,je)=>{const Le=[[]];let ze=0,qe=-1;console.log("lentgh services - "+n.length),console.log("lentgh data : "+Te[0].length),(Te[0].length===0?n:Te).forEach(_t=>{ze%4===0&&(Le.push([]),qe++),Le[qe].push(_t.id+"-"+_t[je===""?x:je]),ze++}),b(Le)},_e=Te=>{w(Te.target.value)},Ue=`
    mutation InsertCita($id_client: Int!, $id_service: Int!, $name: String!, $date: timestamp!) {
      insert_CITA(objects: {id_client : $id_client,id_service : $id_service,name: $name,start_date: $date}) {
        returning {
          id
          id_service
          name
          start_date
        }
      }
    }
    `,Ye=async()=>{const Te={id_client:1,id_service:C.idService,name:C.nombre,date:C.dateCita},je=await client.request(Ue,Te);je.insert_CITA.returning.length>0?(L(Le=>({...Le,idService:je.insert_CITA.returning[0].id,stepCita:0})),console.log("Cita inserted successfully.")):console.log("Failed to insert cita.")},ot=Te=>{if(S(Te),f([]),a!==2){a===1&&Xe(G(Te),oe(Te),Te),a===0&&Xe(G(Te),ie(Te),Te);return}console.log("stepCita : "+C.stepCita);let je=Te==="es"?" Para qu tipo de servicio desea solicitar una cita ?":Te==="en"?"What type of service would you like to schedule an appointment for ?":"Pour quel type de service souhaitez-vous prendre rendez-vous ?";switch(C.stepCita){case 0:ye([[]],Te),C.labelService.length>0&&Jt(C.labelService[Te],-1,Te);break;case 1:console.log("changeLang : "+C.dateCita);const Le=Jt(C.dateCita,0,Te);console.log("GGGGG"+Le),Xe(G(Te),Le,Te);return;case 2:let ze=Jt(C.nombre,1,Te);Xe(G(Te),ze,Te);return}Xe(G(Te),je,"")},Xe=(Te,je,Le)=>{const ze=Le===""?x==="es"?"es-ES":x==="en"?"en-US":"fr-FR":Le==="es"?"es-ES":Le==="en"?"en-US":"fr-FR",qe=new Date().toLocaleString(ze,{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0}),tt={sender:Te,text:je,lines:[],whatsapp:"",lnkWhatsapp:"",timestamp:qe};f(_t=>[..._t,tt]),Q(X)},zt=Te=>{const je=Te;return je.setUTCHours(je.getUTCHours()-1),je},Rn=Te=>{let je=new Date(C.dateCita);je=new Date(je.getTime()-60*60*1e3);let Le=new Date(je.getTime()+30*60*1e3);const ze=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//YourCompany//YourProduct//EN
BEGIN:VEVENT
UID:${Date.now()}@yourdomain.com
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}
DTSTART:${je.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}
DTEND:${Le.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}
SUMMARY:${C.labelService}
DESCRIPTION:${P()+"https://wa.me/34685338165?text="+Te}
LOCATION:https://g.co/kgs/k6nkVw2
END:VEVENT
END:VCALENDAR`,qe=new Blob([ze],{type:"text/calendar;charset=utf-8"});FileSaver_minExports.saveAs(qe,x==="es"?"cita.ics":"event.ics")};return jsxRuntimeExports.jsxs("div",{className:"app-container",children:[jsxRuntimeExports.jsxs("div",{class:"header-container",children:[jsxRuntimeExports.jsx("div",{class:"header-left",children:jsxRuntimeExports.jsx("img",{src:"logo.png",alt:"Logo"})}),jsxRuntimeExports.jsxs("div",{class:"header-right",children:[jsxRuntimeExports.jsx("div",{class:"header-top",children:"Top 50%"}),jsxRuntimeExports.jsx("div",{class:"header-bottom",children:"Bottom 50%"})]})]}),jsxRuntimeExports.jsxs("div",{className:"chat-container",children:[jsxRuntimeExports.jsxs("div",{className:"chat-header typing-indicator",style:{display:v},children:[jsxRuntimeExports.jsxs("h2",{className:"chat-header",children:[H," chatting"]}),jsxRuntimeExports.jsx("span",{className:"dot"}),jsxRuntimeExports.jsx("span",{className:"dot"}),jsxRuntimeExports.jsx("span",{className:"dot"})]}),jsxRuntimeExports.jsxs("div",{ref:Be,className:"chat-messages",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("div",{className:"message blue-bg",style:{display:C.contact===""?"none":"block"},children:[jsxRuntimeExports.jsx("b",{children:O("")}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),A(""),jsxRuntimeExports.jsx("b",{className:"color-cita",children:zt(new Date(C.dateCita)).toLocaleString(te(""),{weekday:"short",day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}),jsxRuntimeExports.jsx("br",{}),I(""),jsxRuntimeExports.jsx("b",{className:"color-cita",children:C.labelService}),jsxRuntimeExports.jsx("br",{}),P(""),jsxRuntimeExports.jsx("b",{className:"color-cita",children:jsxRuntimeExports.jsx("a",{href:"https://wa.me/34685338165?text=",children:"+34685338165"})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),j()]})}),d.map((Te,je)=>jsxRuntimeExports.jsxs("div",{className:`message ${Te.sender===X?"blue-bg":"gray-bg"}`,children:[jsxRuntimeExports.jsxs("div",{className:"message-sender",children:[Te.sender,jsxRuntimeExports.jsx("button",{onClick:()=>le(Te.text),className:"clipboard-icon",children:""}),jsxRuntimeExports.jsx("span",{className:`copied-message ${R?"visible":""}`,children:W})]}),jsxRuntimeExports.jsxs("div",{className:"message-text",children:[Te.lines&&Te.lines.length>0?Te.lines.map((Le,ze)=>jsxRuntimeExports.jsxs("span",{children:[Le,jsxRuntimeExports.jsx("br",{})]},ze)):Te.text,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("a",{style:{color:"white"},href:Te.lnkWhatsapp,children:Te.whatsapp})]}),jsxRuntimeExports.jsx("div",{className:"message-timestamp",children:Te.timestamp}),jsxRuntimeExports.jsxs("div",{style:{height:"40vh",display:Te.sender===G("")?"block":"none"},children:[jsxRuntimeExports.jsx("img",{src:"/images/ed0.jpg",alt:"My Image"}),jsxRuntimeExports.jsx("img",{src:"/assets/ed1.jpg",alt:"My Image"}),jsxRuntimeExports.jsxs(Swiper,{slidesPerView:1,spaceBetween:30,keyboard:{enabled:!0},pagination:{clickable:!0},navigation:!0,modules:[Keyboard,Pagination,Navigation],className:"mySwiper",children:[jsxRuntimeExports.jsx(SwiperSlide,{}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 2"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 3"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 4"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 5"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 6"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 7"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 8"}),jsxRuntimeExports.jsx(SwiperSlide,{children:"Slide 9"})]})]})]},je)),jsxRuntimeExports.jsx("div",{class:"cita-container",children:m.map((Te,je)=>jsxRuntimeExports.jsxs("div",{className:"button-line",children:[Te.map((Le,ze)=>jsxRuntimeExports.jsx("button",{className:"cita-button button send-button",onClick:qe=>Zt(qe),value:Le.split("-").length>2?Le.split("-")[0]+"-"+Le.split("-")[1]+"-"+Le.split("-")[2]:Le.split("-")[0],children:Le.split("-").length>2?zt(new Date(Le)).toLocaleString(te(""),{weekday:"short",day:"2-digit",month:"2-digit"}):Le.split("-").length>1?Le.split("-")[1]:new Date("2000-01-01T"+Le+":00").toLocaleString(x,{hour:"2-digit",minute:"2-digit"})},ze)),jsxRuntimeExports.jsx("br",{})]},je))})]}),jsxRuntimeExports.jsxs("div",{class:"fixed-bottom",children:[jsxRuntimeExports.jsxs("form",{className:"chat-input-form",onSubmit:nt,children:[jsxRuntimeExports.jsx("textarea",{id:"message",name:"message",rows:"5",cols:"50",disabled:a===2&&C.stepCita<3||C.contact!=="",className:"chat-input",value:y,placeholder:`${we}, ${H}...`,onFocus:ue,onChange:Te=>g(Te.target.value)}),jsxRuntimeExports.jsx("input",{type:"text",name:"usr",value:"",onChange:_e,onFocus:ue,style:{display:"none"},tabIndex:"-1",autoComplete:"off"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:a===2&&C.stepCita<3||C.contact!=="",className:"button send-button",children:F})]}),jsxRuntimeExports.jsxs("div",{className:"displayElements1",children:[jsxRuntimeExports.jsx("button",{className:"button send-button",onClick:We,children:C.contact===""?ne:he}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"radio",id:"en",name:"options",checked:x==="en",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"EN",className:"label",onClick:()=>ot("en"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${x==="en"?"selected":""}`}),"EN"]}),jsxRuntimeExports.jsx("input",{type:"radio",id:"fr",name:"options",checked:x==="fr",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"FR",className:"label",onClick:()=>ot("fr"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${x==="fr"?"selected":""}`}),"FR"]}),jsxRuntimeExports.jsx("input",{type:"radio",id:"es",name:"options",checked:x==="es",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"ES",className:"label",onClick:()=>ot("es"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${x==="es"?"selected":""}`}),"ES"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"displayElements2",children:[jsxRuntimeExports.jsx("button",{style:Z,className:"button send-button",onClick:()=>Ct(0),children:ae}),jsxRuntimeExports.jsx("button",{style:q,className:"button send-button",onClick:()=>Ct(1),children:Ee}),jsxRuntimeExports.jsx("button",{style:D,className:"button send-button",onClick:()=>Ct(2),children:pe})]})]})]})]})},supabaseUrl="https://ydxelzxjsuemylifgwte.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkeGVsenhqc3VlbXlsaWZnd3RlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY2MDY4MzAsImV4cCI6MjA1MjE4MjgzMH0.Nnbgsp8NvJaD_DyXpsNwnvrdZUwZz4ylWzv7_fglxPo";createClient(supabaseUrl,supabaseAnonKey);const App=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("main",{children:jsxRuntimeExports.jsx(ClientView,{})})}),root=ReactDOM.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(BrowserRouter,{basename:"/",children:jsxRuntimeExports.jsx(App,{})})}));export{getDefaultExportFromCjs as g};
