var Zr=Object.defineProperty;var dr=t=>{throw TypeError(t)};var Xr=(t,e,r)=>e in t?Zr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ue=(t,e,r)=>Xr(t,typeof e!="symbol"?e+"":e,r),qt=(t,e,r)=>e.has(t)||dr("Cannot "+r);var oe=(t,e,r)=>(qt(t,e,"read from private field"),r?r.call(t):e.get(t)),Se=(t,e,r)=>e.has(t)?dr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ee=(t,e,r,n)=>(qt(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),ve=(t,e,r)=>(qt(t,e,"access private method"),r);var jt=(t,e,r,n)=>({set _(i){Ee(t,e,i,r)},get _(){return oe(t,e,n)}});import{g as getAugmentedNamespace,a as getDefaultExportFromCjs$2,c as commonjsGlobal$1,r as reactExports,R as React,j as jsxRuntimeExports,G as GraphQLClient}from"./index-CWGqjewq.js";import{c as createClient}from"./client-CqLpxT0a.js";function commonjsRequire$1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(e,r){module.exports=r()})(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=x,e.arraysToBytes=R,e.assert=U,e.bytesToString=ne,e.createPromiseCapability=nt,e.createValidAbsoluteUrl=ee,e.escapeString=Re,e.getModificationDate=He,e.getVerbosityLevel=X,e.info=J,e.isArrayBuffer=Ne,e.isArrayEqual=Ye,e.isAscii=Pe,e.objectFromMap=ae,e.objectSize=ie,e.setVerbosityLevel=Y,e.shadow=Z,e.string32=G,e.stringToBytes=D,e.stringToPDFString=be,e.stringToUTF16BEString=ke,e.stringToUTF8String=ye,e.unreachable=W,e.utf8StringToString=Ce,e.warn=Q,r(2);const n=[1,0,0,1,0,0];e.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=i;const s=1.35;e.LINE_FACTOR=s;const f=.35;e.LINE_DESCENT_FACTOR=f;const a={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=a;const o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=o;const u="pdfjs_internal_editor_";e.AnnotationEditorPrefix=u;const y={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};e.AnnotationEditorType=y;const w={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};e.AnnotationEditorParamsType=w;const v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=v;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=g;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=b;const l={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=l;const _={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=_;const h={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=h;const d={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=d;const c={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=c;const p={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=p;const m={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=m;const S={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=S;const E={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=E;const T={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=T;const A={O:"PageOpen",C:"PageClose"};e.PageActionEventType=A;const P={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=P;const H={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=H;const O={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=O;const q={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=q;const C={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=C;const j={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=j;const V={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=V;let N=O.WARNINGS;function Y(me){Number.isInteger(me)&&(N=me)}function X(){return N}function J(me){N>=O.INFOS&&console.log(`Info: ${me}`)}function Q(me){N>=O.WARNINGS&&console.log(`Warning: ${me}`)}function W(me){throw new Error(me)}function U(me,fe){me||W(fe)}function $(me){if(!me)return!1;switch(me.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ee(me,fe=null,pe=null){if(!me)return null;try{if(pe&&typeof me=="string"){if(pe.addDefaultProtocol&&me.startsWith("www.")){const Ie=me.match(/\./g);Ie&&Ie.length>=2&&(me=`http://${me}`)}if(pe.tryConvertEncoding)try{me=ye(me)}catch{}}const Te=fe?new URL(me,fe):new URL(me);if($(Te))return Te}catch{}return null}function Z(me,fe,pe){return Object.defineProperty(me,fe,{value:pe,enumerable:!0,configurable:!0,writable:!1}),pe}const L=function(){function fe(pe,Te){this.constructor===fe&&W("Cannot initialize BaseException."),this.message=pe,this.name=Te}return fe.prototype=new Error,fe.constructor=fe,fe}();e.BaseException=L;class I extends L{constructor(fe,pe){super(fe,"PasswordException"),this.code=pe}}e.PasswordException=I;class k extends L{constructor(fe,pe){super(fe,"UnknownErrorException"),this.details=pe}}e.UnknownErrorException=k;class B extends L{constructor(fe){super(fe,"InvalidPDFException")}}e.InvalidPDFException=B;class F extends L{constructor(fe){super(fe,"MissingPDFException")}}e.MissingPDFException=F;class K extends L{constructor(fe,pe){super(fe,"UnexpectedResponseException"),this.status=pe}}e.UnexpectedResponseException=K;class te extends L{constructor(fe){super(fe,"FormatError")}}e.FormatError=te;class M extends L{constructor(fe){super(fe,"AbortException")}}e.AbortException=M;function ne(me){(typeof me!="object"||me===null||me.length===void 0)&&W("Invalid argument for bytesToString");const fe=me.length,pe=8192;if(fe<pe)return String.fromCharCode.apply(null,me);const Te=[];for(let Ie=0;Ie<fe;Ie+=pe){const Me=Math.min(Ie+pe,fe),qe=me.subarray(Ie,Me);Te.push(String.fromCharCode.apply(null,qe))}return Te.join("")}function D(me){typeof me!="string"&&W("Invalid argument for stringToBytes");const fe=me.length,pe=new Uint8Array(fe);for(let Te=0;Te<fe;++Te)pe[Te]=me.charCodeAt(Te)&255;return pe}function x(me){if(me.length!==void 0)return me.length;if(me.byteLength!==void 0)return me.byteLength;W("Invalid argument for arrayByteLength")}function R(me){const fe=me.length;if(fe===1&&me[0]instanceof Uint8Array)return me[0];let pe=0;for(let Me=0;Me<fe;Me++)pe+=x(me[Me]);let Te=0;const Ie=new Uint8Array(pe);for(let Me=0;Me<fe;Me++){let qe=me[Me];qe instanceof Uint8Array||(typeof qe=="string"?qe=D(qe):qe=new Uint8Array(qe));const it=qe.byteLength;Ie.set(qe,Te),Te+=it}return Ie}function G(me){return String.fromCharCode(me>>24&255,me>>16&255,me>>8&255,me&255)}function ie(me){return Object.keys(me).length}function ae(me){const fe=Object.create(null);for(const[pe,Te]of me)fe[pe]=Te;return fe}function se(){const me=new Uint8Array(4);return me[0]=1,new Uint32Array(me.buffer,0,1)[0]===1}function ue(){try{return new Function(""),!0}catch{return!1}}class le{static get isLittleEndian(){return Z(this,"isLittleEndian",se())}static get isEvalSupported(){return Z(this,"isEvalSupported",ue())}static get isOffscreenCanvasSupported(){return Z(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}e.FeatureTest=le;const de=[...Array(256).keys()].map(me=>me.toString(16).padStart(2,"0"));class he{static makeHexColor(fe,pe,Te){return`#${de[fe]}${de[pe]}${de[Te]}`}static scaleMinMax(fe,pe){let Te;fe[0]?(fe[0]<0&&(Te=pe[0],pe[0]=pe[1],pe[1]=Te),pe[0]*=fe[0],pe[1]*=fe[0],fe[3]<0&&(Te=pe[2],pe[2]=pe[3],pe[3]=Te),pe[2]*=fe[3],pe[3]*=fe[3]):(Te=pe[0],pe[0]=pe[2],pe[2]=Te,Te=pe[1],pe[1]=pe[3],pe[3]=Te,fe[1]<0&&(Te=pe[2],pe[2]=pe[3],pe[3]=Te),pe[2]*=fe[1],pe[3]*=fe[1],fe[2]<0&&(Te=pe[0],pe[0]=pe[1],pe[1]=Te),pe[0]*=fe[2],pe[1]*=fe[2]),pe[0]+=fe[4],pe[1]+=fe[4],pe[2]+=fe[5],pe[3]+=fe[5]}static transform(fe,pe){return[fe[0]*pe[0]+fe[2]*pe[1],fe[1]*pe[0]+fe[3]*pe[1],fe[0]*pe[2]+fe[2]*pe[3],fe[1]*pe[2]+fe[3]*pe[3],fe[0]*pe[4]+fe[2]*pe[5]+fe[4],fe[1]*pe[4]+fe[3]*pe[5]+fe[5]]}static applyTransform(fe,pe){const Te=fe[0]*pe[0]+fe[1]*pe[2]+pe[4],Ie=fe[0]*pe[1]+fe[1]*pe[3]+pe[5];return[Te,Ie]}static applyInverseTransform(fe,pe){const Te=pe[0]*pe[3]-pe[1]*pe[2],Ie=(fe[0]*pe[3]-fe[1]*pe[2]+pe[2]*pe[5]-pe[4]*pe[3])/Te,Me=(-fe[0]*pe[1]+fe[1]*pe[0]+pe[4]*pe[1]-pe[5]*pe[0])/Te;return[Ie,Me]}static getAxialAlignedBoundingBox(fe,pe){const Te=he.applyTransform(fe,pe),Ie=he.applyTransform(fe.slice(2,4),pe),Me=he.applyTransform([fe[0],fe[3]],pe),qe=he.applyTransform([fe[2],fe[1]],pe);return[Math.min(Te[0],Ie[0],Me[0],qe[0]),Math.min(Te[1],Ie[1],Me[1],qe[1]),Math.max(Te[0],Ie[0],Me[0],qe[0]),Math.max(Te[1],Ie[1],Me[1],qe[1])]}static inverseTransform(fe){const pe=fe[0]*fe[3]-fe[1]*fe[2];return[fe[3]/pe,-fe[1]/pe,-fe[2]/pe,fe[0]/pe,(fe[2]*fe[5]-fe[4]*fe[3])/pe,(fe[4]*fe[1]-fe[5]*fe[0])/pe]}static apply3dTransform(fe,pe){return[fe[0]*pe[0]+fe[1]*pe[1]+fe[2]*pe[2],fe[3]*pe[0]+fe[4]*pe[1]+fe[5]*pe[2],fe[6]*pe[0]+fe[7]*pe[1]+fe[8]*pe[2]]}static singularValueDecompose2dScale(fe){const pe=[fe[0],fe[2],fe[1],fe[3]],Te=fe[0]*pe[0]+fe[1]*pe[2],Ie=fe[0]*pe[1]+fe[1]*pe[3],Me=fe[2]*pe[0]+fe[3]*pe[2],qe=fe[2]*pe[1]+fe[3]*pe[3],it=(Te+qe)/2,dt=Math.sqrt((Te+qe)**2-4*(Te*qe-Me*Ie))/2,lt=it+dt||1,Ke=it-dt||1;return[Math.sqrt(lt),Math.sqrt(Ke)]}static normalizeRect(fe){const pe=fe.slice(0);return fe[0]>fe[2]&&(pe[0]=fe[2],pe[2]=fe[0]),fe[1]>fe[3]&&(pe[1]=fe[3],pe[3]=fe[1]),pe}static intersect(fe,pe){const Te=Math.max(Math.min(fe[0],fe[2]),Math.min(pe[0],pe[2])),Ie=Math.min(Math.max(fe[0],fe[2]),Math.max(pe[0],pe[2]));if(Te>Ie)return null;const Me=Math.max(Math.min(fe[1],fe[3]),Math.min(pe[1],pe[3])),qe=Math.min(Math.max(fe[1],fe[3]),Math.max(pe[1],pe[3]));return Me>qe?null:[Te,Me,Ie,qe]}static bezierBoundingBox(fe,pe,Te,Ie,Me,qe,it,dt){const lt=[],Ke=[[],[]];let ft,st,ut,ze,bt,_t,wt,ht;for(let St=0;St<2;++St){if(St===0?(st=6*fe-12*Te+6*Me,ft=-3*fe+9*Te-9*Me+3*it,ut=3*Te-3*fe):(st=6*pe-12*Ie+6*qe,ft=-3*pe+9*Ie-9*qe+3*dt,ut=3*Ie-3*pe),Math.abs(ft)<1e-12){if(Math.abs(st)<1e-12)continue;ze=-ut/st,0<ze&&ze<1&&lt.push(ze);continue}wt=st*st-4*ut*ft,ht=Math.sqrt(wt),!(wt<0)&&(bt=(-st+ht)/(2*ft),0<bt&&bt<1&&lt.push(bt),_t=(-st-ht)/(2*ft),0<_t&&_t<1&&lt.push(_t))}let mt=lt.length,Je;const at=mt;for(;mt--;)ze=lt[mt],Je=1-ze,Ke[0][mt]=Je*Je*Je*fe+3*Je*Je*ze*Te+3*Je*ze*ze*Me+ze*ze*ze*it,Ke[1][mt]=Je*Je*Je*pe+3*Je*Je*ze*Ie+3*Je*ze*ze*qe+ze*ze*ze*dt;return Ke[0][at]=fe,Ke[1][at]=pe,Ke[0][at+1]=it,Ke[1][at+1]=dt,Ke[0].length=Ke[1].length=at+2,[Math.min(...Ke[0]),Math.min(...Ke[1]),Math.max(...Ke[0]),Math.max(...Ke[1])]}}e.Util=he;const ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function be(me){if(me[0]>="ï"){let pe;if(me[0]==="þ"&&me[1]==="ÿ"?pe="utf-16be":me[0]==="ÿ"&&me[1]==="þ"?pe="utf-16le":me[0]==="ï"&&me[1]==="»"&&me[2]==="¿"&&(pe="utf-8"),pe)try{const Te=new TextDecoder(pe,{fatal:!0}),Ie=D(me);return Te.decode(Ie)}catch(Te){Q(`stringToPDFString: "${Te}".`)}}const fe=[];for(let pe=0,Te=me.length;pe<Te;pe++){const Ie=ge[me.charCodeAt(pe)];fe.push(Ie?String.fromCharCode(Ie):me.charAt(pe))}return fe.join("")}function Re(me){return me.replace(/([()\\\n\r])/g,fe=>fe===`
`?"\\n":fe==="\r"?"\\r":`\\${fe}`)}function Pe(me){return/^[\x00-\x7F]*$/.test(me)}function ke(me){const fe=["þÿ"];for(let pe=0,Te=me.length;pe<Te;pe++){const Ie=me.charCodeAt(pe);fe.push(String.fromCharCode(Ie>>8&255),String.fromCharCode(Ie&255))}return fe.join("")}function ye(me){return decodeURIComponent(escape(me))}function Ce(me){return unescape(encodeURIComponent(me))}function Ne(me){return typeof me=="object"&&me!==null&&me.byteLength!==void 0}function Ye(me,fe){if(me.length!==fe.length)return!1;for(let pe=0,Te=me.length;pe<Te;pe++)if(me[pe]!==fe[pe])return!1;return!0}function He(me=new Date){return[me.getUTCFullYear().toString(),(me.getUTCMonth()+1).toString().padStart(2,"0"),me.getUTCDate().toString().padStart(2,"0"),me.getUTCHours().toString().padStart(2,"0"),me.getUTCMinutes().toString().padStart(2,"0"),me.getUTCSeconds().toString().padStart(2,"0")].join("")}function nt(){const me=Object.create(null);let fe=!1;return Object.defineProperty(me,"settled",{get(){return fe}}),me.promise=new Promise(function(pe,Te){me.resolve=function(Ie){fe=!0,pe(Ie)},me.reject=function(Ie){fe=!0,Te(Ie)}}),me}},(t,e,r)=>{r(3)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const r=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=r},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var t,r,n,i,s,f,a,o,u,Bt,w,v;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:b,NodeCMapReaderFactory:l,NodeStandardFontDataFactory:_}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=b,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=l,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=_}let createPDFNetworkStream;function setPDFNetworkStreamFactory(b){createPDFNetworkStream=b}function getDocument(b){const l=new PDFDocumentLoadingTask;let _;if(typeof b=="string"||b instanceof URL)_={url:b};else if((0,_util.isArrayBuffer)(b))_={data:b};else if(b instanceof PDFDataRangeTransport)_={range:b};else{if(typeof b!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");_=b}const h=Object.create(null);let d=null,c=null;for(const m in _){const S=_[m];switch(m){case"url":if(typeof window<"u")try{h[m]=new URL(S,window.location).href;continue}catch(E){(0,_util.warn)(`Cannot create valid URL: "${E}".`)}else if(typeof S=="string"||S instanceof URL){h[m]=S.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":d=S;continue;case"worker":c=S;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&S instanceof Buffer)h[m]=new Uint8Array(S);else{if(S instanceof Uint8Array)break;if(typeof S=="string")h[m]=(0,_util.stringToBytes)(S);else if(typeof S=="object"&&S!==null&&!isNaN(S.length))h[m]=new Uint8Array(S);else if((0,_util.isArrayBuffer)(S))h[m]=new Uint8Array(S);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}h[m]=S}if(h.CMapReaderFactory=h.CMapReaderFactory||DefaultCMapReaderFactory,h.StandardFontDataFactory=h.StandardFontDataFactory||DefaultStandardFontDataFactory,h.ignoreErrors=h.stopAtErrors!==!0,h.fontExtraProperties=h.fontExtraProperties===!0,h.pdfBug=h.pdfBug===!0,h.enableXfa=h.enableXfa===!0,(!Number.isInteger(h.rangeChunkSize)||h.rangeChunkSize<1)&&(h.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof h.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(h.docBaseUrl))&&(h.docBaseUrl=null),(!Number.isInteger(h.maxImageSize)||h.maxImageSize<-1)&&(h.maxImageSize=-1),typeof h.cMapUrl!="string"&&(h.cMapUrl=null),typeof h.standardFontDataUrl!="string"&&(h.standardFontDataUrl=null),typeof h.useWorkerFetch!="boolean"&&(h.useWorkerFetch=h.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&h.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof h.isEvalSupported!="boolean"&&(h.isEvalSupported=!0),typeof h.disableFontFace!="boolean"&&(h.disableFontFace=_is_node.isNodeJS),typeof h.useSystemFonts!="boolean"&&(h.useSystemFonts=!_is_node.isNodeJS&&!h.disableFontFace),(typeof h.ownerDocument!="object"||h.ownerDocument===null)&&(h.ownerDocument=globalThis.document),typeof h.disableRange!="boolean"&&(h.disableRange=!1),typeof h.disableStream!="boolean"&&(h.disableStream=!1),typeof h.disableAutoFetch!="boolean"&&(h.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(h.verbosity),!c){const m={verbosity:h.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};c=m.port?PDFWorker.fromPort(m):new PDFWorker(m),l._worker=c}const p=l.docId;return c.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const m=_fetchDocument(c,h,d,p),S=new Promise(function(E){let T;d?T=new _transport_stream.PDFDataTransportStream({length:h.length,initialData:h.initialData,progressiveDone:h.progressiveDone,contentDispositionFilename:h.contentDispositionFilename,disableRange:h.disableRange,disableStream:h.disableStream},d):h.data||(T=createPDFNetworkStream({url:h.url,length:h.length,httpHeaders:h.httpHeaders,withCredentials:h.withCredentials,rangeChunkSize:h.rangeChunkSize,disableRange:h.disableRange,disableStream:h.disableStream})),E(T)});return Promise.all([m,S]).then(function([E,T]){if(l.destroyed)throw new Error("Loading aborted");const A=new _message_handler.MessageHandler(p,E,c.port),P=new WorkerTransport(A,l,T,h);l._transport=P,A.send("Ready",null)})}).catch(l._capability.reject),l}async function _fetchDocument(b,l,_,h){if(b.destroyed)throw new Error("Worker was destroyed");_&&(l.length=_.length,l.initialData=_.initialData,l.progressiveDone=_.progressiveDone,l.contentDispositionFilename=_.contentDispositionFilename);const d=await b.messageHandler.sendWithPromise("GetDocRequest",{docId:h,apiVersion:"2.16.105",source:{data:l.data,url:l.url,password:l.password,disableAutoFetch:l.disableAutoFetch,rangeChunkSize:l.rangeChunkSize,length:l.length},maxImageSize:l.maxImageSize,disableFontFace:l.disableFontFace,docBaseUrl:l.docBaseUrl,ignoreErrors:l.ignoreErrors,isEvalSupported:l.isEvalSupported,fontExtraProperties:l.fontExtraProperties,enableXfa:l.enableXfa,useSystemFonts:l.useSystemFonts,cMapUrl:l.useWorkerFetch?l.cMapUrl:null,standardFontDataUrl:l.useWorkerFetch?l.standardFontDataUrl:null});if(l.data&&(l.data=null),b.destroyed)throw new Error("Worker was destroyed");return d}const e=class e{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${jt(e,t)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var l;this.destroyed=!0,await((l=this._transport)==null?void 0:l.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};t=new WeakMap,Se(e,t,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,_,h=!1,d=null){this.length=l,this.initialData=_,this.progressiveDone=h,this.contentDispositionFilename=d,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,_){for(const h of this._rangeListeners)h(l,_)}onDataProgress(l,_){this._readyCapability.promise.then(()=>{for(const h of this._progressListeners)h(l,_)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const _ of this._progressiveReadListeners)_(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,_){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,_){this._pdfInfo=l,this._transport=_,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,_,h,d,c=!1){this._pageIndex=l,this._pageInfo=_,this._ownerDocument=d,this._transport=h,this._stats=c?new _display_utils.StatTimer:null,this._pdfBug=c,this.commonObjs=h.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:_=this.rotate,offsetX:h=0,offsetY:d=0,dontFlip:c=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:_,offsetX:h,offsetY:d,dontFlip:c})}getAnnotations({intent:l="display"}={}){const _=this._transport.getRenderingIntent(l);let h=this._annotationPromises.get(_.cacheKey);return h||(h=this._transport.getAnnotations(this._pageIndex,_.renderingIntent),this._annotationPromises.set(_.cacheKey,h),h=h.then(d=>{for(const c of d)c.titleObj!==void 0&&Object.defineProperty(c,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),c.titleObj.str}}),c.contentsObj!==void 0&&Object.defineProperty(c,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),c.contentsObj.str}});return d})),h}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var l;return((l=this._transport._htmlForXfa)==null?void 0:l.children[this._pageIndex])||null}render({canvasContext:l,viewport:_,intent:h="display",annotationMode:d=_util.AnnotationMode.ENABLE,transform:c=null,imageLayer:p=null,canvasFactory:m=null,background:S=null,optionalContentConfigPromise:E=null,annotationCanvasMap:T=null,pageColors:A=null,printAnnotationStorage:P=null}){var Y,X;((Y=arguments[0])==null?void 0:Y.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&d===_util.AnnotationMode.ENABLE&&(d=_util.AnnotationMode.ENABLE_FORMS)),((X=arguments[0])==null?void 0:X.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&d===_util.AnnotationMode.ENABLE&&(d=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const H=this._transport.getRenderingIntent(h,d,P);this.pendingCleanup=!1,E||(E=this._transport.getOptionalContentConfig());let O=this._intentStates.get(H.cacheKey);O||(O=Object.create(null),this._intentStates.set(H.cacheKey,O)),O.streamReaderCancelTimeout&&(clearTimeout(O.streamReaderCancelTimeout),O.streamReaderCancelTimeout=null);const q=m||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),C=!!(H.renderingIntent&_util.RenderingIntentFlag.PRINT);O.displayReadyCapability||(O.displayReadyCapability=(0,_util.createPromiseCapability)(),O.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(H));const j=J=>{O.renderTasks.delete(V),(this.cleanupAfterRender||C)&&(this.pendingCleanup=!0),this._tryCleanup(),J?(V.capability.reject(J),this._abortOperatorList({intentState:O,reason:J instanceof Error?J:new Error(J)})):V.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},V=new InternalRenderTask({callback:j,params:{canvasContext:l,viewport:_,transform:c,imageLayer:p,background:S},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:T,operatorList:O.operatorList,pageIndex:this._pageIndex,canvasFactory:q,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:A});(O.renderTasks||(O.renderTasks=new Set)).add(V);const N=V.task;return Promise.all([O.displayReadyCapability.promise,E]).then(([J,Q])=>{if(this.pendingCleanup){j();return}this._stats&&this._stats.time("Rendering"),V.initializeGraphics({transparency:J,optionalContentConfig:Q}),V.operatorListChanged()}).catch(j),N}getOperatorList({intent:l="display",annotationMode:_=_util.AnnotationMode.ENABLE,printAnnotationStorage:h=null}={}){function d(){p.operatorList.lastChunk&&(p.opListReadCapability.resolve(p.operatorList),p.renderTasks.delete(m))}const c=this._transport.getRenderingIntent(l,_,h,!0);let p=this._intentStates.get(c.cacheKey);p||(p=Object.create(null),this._intentStates.set(c.cacheKey,p));let m;return p.opListReadCapability||(m=Object.create(null),m.operatorListChanged=d,p.opListReadCapability=(0,_util.createPromiseCapability)(),(p.renderTasks||(p.renderTasks=new Set)).add(m),p.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(c)),p.opListReadCapability.promise}streamTextContent({disableCombineTextItems:l=!1,includeMarkedContent:_=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:l!==!0,includeMarkedContent:_===!0},{highWaterMark:100,size(d){return d.items.length}})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(h=>_xfa_text.XfaText.textContent(h));const _=this.streamTextContent(l);return new Promise(function(h,d){function c(){p.read().then(function({value:S,done:E}){if(E){h(m);return}Object.assign(m.styles,S.styles),m.items.push(...S.items),c()},d)}const p=_.getReader(),m={items:[],styles:Object.create(null)};c()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const l=[];for(const _ of this._intentStates.values())if(this._abortOperatorList({intentState:_,reason:new Error("Page was destroyed."),force:!0}),!_.opListReadCapability)for(const h of _.renderTasks)l.push(h.completed),h.cancel();this.objs.clear();for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(l)}cleanup(l=!1){return this.pendingCleanup=!0,this._tryCleanup(l)}_tryCleanup(l=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:_,operatorList:h}of this._intentStates.values())if(_.size>0||!h.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,l&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const _ of this._bitmaps)_.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(l,_){const h=this._intentStates.get(_);h&&(this._stats&&this._stats.timeEnd("Page Request"),h.displayReadyCapability&&h.displayReadyCapability.resolve(l))}_renderPageChunk(l,_){for(let h=0,d=l.length;h<d;h++)_.operatorList.fnArray.push(l.fnArray[h]),_.operatorList.argsArray.push(l.argsArray[h]);_.operatorList.lastChunk=l.lastChunk,_.operatorList.separateAnnots=l.separateAnnots;for(const h of _.renderTasks)h.operatorListChanged();l.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:l,cacheKey:_,annotationStorageMap:h}){const c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:_,annotationStorage:h}).getReader(),p=this._intentStates.get(_);p.streamReader=c;const m=()=>{c.read().then(({value:S,done:E})=>{if(E){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(S,p),m())},S=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const E of p.renderTasks)E.operatorListChanged();this._tryCleanup()}if(p.displayReadyCapability)p.displayReadyCapability.reject(S);else if(p.opListReadCapability)p.opListReadCapability.reject(S);else throw S}})};m()}_abortOperatorList({intentState:l,reason:_,force:h=!1}){if(l.streamReader){if(!h){if(l.renderTasks.size>0)return;if(_ instanceof _display_utils.RenderingCancelledException){l.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:l,reason:_,force:!0}),l.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(l.streamReader.cancel(new _util.AbortException(_.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[d,c]of this._intentStates)if(c===l){this._intentStates.delete(d);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(l,_){const h={data:structuredClone(l,_)};this._deferred.then(()=>{for(const d of this._listeners)d.call(this,h)})}addEventListener(l,_){this._listeners.push(_)}removeEventListener(l,_){const h=this._listeners.indexOf(_);this._listeners.splice(h,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire$1=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(r=document==null?void 0:document.currentScript)==null?void 0:r.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,l){let _;try{if(_=new URL(b),!_.origin||_.origin==="null")return!1}catch{return!1}const h=new URL(l,_);return _.origin===h.origin},PDFWorkerUtil.createCDNWrapper=function(b){const l=`importScripts("${b}");`;return URL.createObjectURL(new Blob([l]))}}const _PDFWorker=class _PDFWorker{constructor({name:b=null,port:l=null,verbosity:_=(0,_util.getVerbosityLevel)()}={}){if(l&&oe(_PDFWorker,n).has(l))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=b,this.destroyed=!1,this.verbosity=_,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l){oe(_PDFWorker,n).set(l,this),this._initializeFromPort(l);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const l=new Worker(b),_=new _message_handler.MessageHandler("main","worker",l),h=()=>{l.removeEventListener("error",d),_.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},d=()=>{this._webWorker||h()};l.addEventListener("error",d),_.on("test",p=>{if(l.removeEventListener("error",d),this.destroyed){h();return}p?(this._messageHandler=_,this._port=l,this._webWorker=l,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),_.destroy(),l.terminate())}),_.on("ready",p=>{if(l.removeEventListener("error",d),this.destroyed){h();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const p=new Uint8Array;_.send("test",p,[p.buffer])};c();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const l=new LoopbackPort;this._port=l;const _=`fake${PDFWorkerUtil.fakeWorkerId++}`,h=new _message_handler.MessageHandler(_+"_worker",_,l);b.setup(h,l);const d=new _message_handler.MessageHandler(_,_+"_worker",l);this._messageHandler=d,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),oe(_PDFWorker,n).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return oe(this,n).has(b.port)?oe(this,n).get(b.port):new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire$1=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};n=new WeakMap,Se(_PDFWorker,n,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(l,_,h,d){Se(this,i,null);Se(this,s,new Map);Se(this,f,new Map);Se(this,a,null);this.messageHandler=l,this.loadingTask=_,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:_.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:d.ownerDocument,styleElement:d.styleElement}),this._params=d,d.useWorkerFetch||(this.CMapReaderFactory=new d.CMapReaderFactory({baseUrl:d.cMapUrl,isCompressed:d.cMapPacked}),this.StandardFontDataFactory=new d.StandardFontDataFactory({baseUrl:d.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=h,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return oe(this,i)}getRenderingIntent(l,_=_util.AnnotationMode.ENABLE,h=null,d=!1){let c=_util.RenderingIntentFlag.DISPLAY,p=null;switch(l){case"any":c=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":c=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(_){case _util.AnnotationMode.DISABLE:c+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:c+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:c+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,p=(c&_util.RenderingIntentFlag.PRINT&&h instanceof _annotation_storage.PrintAnnotationStorage?h:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${_}`)}return d&&(c+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:c,cacheKey:`${c}_${_annotation_storage.AnnotationStorage.getHash(p)}`,annotationStorageMap:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const h of oe(this,s).values())l.push(h._destroy());oe(this,s).clear(),oe(this,f).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const _=this.messageHandler.sendWithPromise("Terminate",null);return l.push(_),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Ee(this,a,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:_}=this;l.on("GetReader",(h,d)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=c=>{this._lastProgress={loaded:c.loaded,total:c.total}},d.onPull=()=>{this._fullReader.read().then(function({value:c,done:p}){if(p){d.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(c),"GetReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{d.error(c)})},d.onCancel=c=>{this._fullReader.cancel(c),d.ready.catch(p=>{if(!this.destroyed)throw p})}}),l.on("ReaderHeadersReady",h=>{const d=(0,_util.createPromiseCapability)(),c=this._fullReader;return c.headersReady.then(()=>{var p;(!c.isStreamingSupported||!c.isRangeSupported)&&(this._lastProgress&&((p=_.onProgress)==null||p.call(_,this._lastProgress)),c.onProgress=m=>{var S;(S=_.onProgress)==null||S.call(_,{loaded:m.loaded,total:m.total})}),d.resolve({isStreamingSupported:c.isStreamingSupported,isRangeSupported:c.isRangeSupported,contentLength:c.contentLength})},d.reject),d.promise}),l.on("GetRangeReader",(h,d)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const c=this._networkStream.getRangeReader(h.begin,h.end);if(!c){d.close();return}d.onPull=()=>{c.read().then(function({value:p,done:m}){if(m){d.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(p),"GetRangeReader - expected an ArrayBuffer."),d.enqueue(new Uint8Array(p),1,[p])}).catch(p=>{d.error(p)})},d.onCancel=p=>{c.cancel(p),d.ready.catch(m=>{if(!this.destroyed)throw m})}}),l.on("GetDoc",({pdfInfo:h})=>{this._numPages=h.numPages,this._htmlForXfa=h.htmlForXfa,delete h.htmlForXfa,_._capability.resolve(new PDFDocumentProxy(h,this))}),l.on("DocException",function(h){let d;switch(h.name){case"PasswordException":d=new _util.PasswordException(h.message,h.code);break;case"InvalidPDFException":d=new _util.InvalidPDFException(h.message);break;case"MissingPDFException":d=new _util.MissingPDFException(h.message);break;case"UnexpectedResponseException":d=new _util.UnexpectedResponseException(h.message,h.status);break;case"UnknownErrorException":d=new _util.UnknownErrorException(h.message,h.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}_._capability.reject(d)}),l.on("PasswordRequest",h=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),_.onPassword){const d=c=>{c instanceof Error?this._passwordCapability.reject(c):this._passwordCapability.resolve({password:c})};try{_.onPassword(d,h.code)}catch(c){this._passwordCapability.reject(c)}}else this._passwordCapability.reject(new _util.PasswordException(h.message,h.code));return this._passwordCapability.promise}),l.on("DataLoaded",h=>{var d;(d=_.onProgress)==null||d.call(_,{loaded:h.length,total:h.length}),this.downloadInfoCapability.resolve(h)}),l.on("StartRenderPage",h=>{if(this.destroyed)return;oe(this,s).get(h.pageIndex)._startRenderPage(h.transparency,h.cacheKey)}),l.on("commonobj",([h,d,c])=>{var p;if(!this.destroyed&&!this.commonObjs.has(h))switch(d){case"Font":const m=this._params;if("error"in c){const T=c.error;(0,_util.warn)(`Error during font loading: ${T}`),this.commonObjs.resolve(h,T);break}let S=null;m.pdfBug&&((p=globalThis.FontInspector)!=null&&p.enabled)&&(S={registerFont(T,A){globalThis.FontInspector.fontAdded(T,A)}});const E=new _font_loader.FontFaceObject(c,{isEvalSupported:m.isEvalSupported,disableFontFace:m.disableFontFace,ignoreErrors:m.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:S});this.fontLoader.bind(E).catch(T=>l.sendWithPromise("FontFallback",{id:h})).finally(()=>{!m.fontExtraProperties&&E.data&&(E.data=null),this.commonObjs.resolve(h,E)});break;case"FontPath":case"Image":this.commonObjs.resolve(h,c);break;default:throw new Error(`Got unknown common object type ${d}`)}}),l.on("obj",([h,d,c,p])=>{var S;if(this.destroyed)return;const m=oe(this,s).get(d);if(!m.objs.has(h))switch(c){case"Image":m.objs.resolve(h,p);const E=8e6;if(p){let T;if(p.bitmap){const{bitmap:A,width:P,height:H}=p;T=P*H*4,m._bitmaps.add(A)}else T=((S=p.data)==null?void 0:S.length)||0;T>E&&(m.cleanupAfterRender=!0)}break;case"Pattern":m.objs.resolve(h,p);break;default:throw new Error(`Got unknown object type ${c}`)}}),l.on("DocProgress",h=>{var d;this.destroyed||(d=_.onProgress)==null||d.call(_,{loaded:h.loaded,total:h.total})}),l.on("DocStats",h=>{this.destroyed||Ee(this,i,Object.freeze({streamTypes:Object.freeze(h.streamTypes),fontTypes:Object.freeze(h.fontTypes)}))}),l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),l.on("FetchBuiltInCMap",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(h):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",h=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(h):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:l}){var _,h;this.destroyed||(h=(_=this.loadingTask).onUnsupportedFeature)==null||h.call(_,l)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const _=l-1,h=oe(this,f).get(_);if(h)return h;const d=this.messageHandler.sendWithPromise("GetPage",{pageIndex:_}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");const p=new PDFPageProxy(_,c,this,this._params.ownerDocument,this._params.pdfBug);return oe(this,s).set(_,p),p});return oe(this,f).set(_,d),d}getPageIndex(l){return typeof l!="object"||l===null||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,_){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:_})}saveDocument(){var l;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((l=this._fullReader)==null?void 0:l.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return typeof l!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return oe(this,a)||Ee(this,a,this.messageHandler.sendWithPromise("GetMetadata",null).then(l=>{var _,h;return{info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:((_=this._fullReader)==null?void 0:_.filename)??null,contentLength:((h=this._fullReader)==null?void 0:h.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(l=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const _ of oe(this,s).values())if(!_.cleanup())throw new Error(`startCleanup: Page ${_.pageNumber} is currently rendering.`);this.commonObjs.clear(),l||this.fontLoader.clear(),Ee(this,a,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const l=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l.disableAutoFetch,enableXfa:l.enableXfa})}}i=new WeakMap,s=new WeakMap,f=new WeakMap,a=new WeakMap;class PDFObjects{constructor(){Se(this,u);Se(this,o,Object.create(null))}get(l,_=null){if(_){const d=ve(this,u,Bt).call(this,l);return d.capability.promise.then(()=>_(d.data)),null}const h=oe(this,o)[l];if(!(h!=null&&h.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${l}.`);return h.data}has(l){const _=oe(this,o)[l];return(_==null?void 0:_.capability.settled)||!1}resolve(l,_=null){const h=ve(this,u,Bt).call(this,l);h.data=_,h.capability.resolve()}clear(){Ee(this,o,Object.create(null))}}o=new WeakMap,u=new WeakSet,Bt=function(l){const _=oe(this,o)[l];return _||(oe(this,o)[l]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(l){Se(this,w,null);Ee(this,w,l),this.onContinue=null}get promise(){return oe(this,w).capability.promise}cancel(){oe(this,w).cancel()}get separateAnnots(){const{separateAnnots:l}=oe(this,w).operatorList;if(!l)return!1;const{annotationCanvasMap:_}=oe(this,w);return l.form||l.canvas&&(_==null?void 0:_.size)>0}}w=new WeakMap,exports.RenderTask=RenderTask;const g=class g{constructor({callback:l,params:_,objs:h,commonObjs:d,annotationCanvasMap:c,operatorList:p,pageIndex:m,canvasFactory:S,useRequestAnimationFrame:E=!1,pdfBug:T=!1,pageColors:A=null}){this.callback=l,this.params=_,this.objs=h,this.commonObjs=d,this.annotationCanvasMap=c,this.operatorListIdx=null,this.operatorList=p,this._pageIndex=m,this.canvasFactory=S,this._pdfBug=T,this.pageColors=A,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=E===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=_.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:_}){var S;if(this.cancelled)return;if(this._canvas){if(oe(g,v).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");oe(g,v).add(this._canvas)}this._pdfBug&&((S=globalThis.StepperManager)!=null&&S.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:h,viewport:d,transform:c,imageLayer:p,background:m}=this.params;this.gfx=new _canvas.CanvasGraphics(h,this.commonObjs,this.objs,this.canvasFactory,p,_,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:d,transparency:l,background:m}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(l=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&oe(g,v).delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&oe(g,v).delete(this._canvas),this.callback())))}};v=new WeakMap,Se(g,v,new WeakSet);let InternalRenderTask=g;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(t,e,r)=>{var o,fr,y;Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var n=r(1),i=r(6),s=r(10);class f{constructor(){Se(this,o);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,g){const b=this._storage.get(v);return b===void 0?g:Object.assign(g,b)}getRawValue(v){return this._storage.get(v)}remove(v){if(this._storage.delete(v),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const g of this._storage.values())if(g instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,g){const b=this._storage.get(v);let l=!1;if(b!==void 0)for(const[_,h]of Object.entries(g))b[_]!==h&&(l=!0,b[_]=h);else l=!0,this._storage.set(v,g);l&&ve(this,o,fr).call(this),g instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(g.constructor._type)}has(v){return this._storage.has(v)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new a(this)}get serializable(){if(this._storage.size===0)return null;const v=new Map;for(const[g,b]of this._storage){const l=b instanceof i.AnnotationEditor?b.serialize():b;l&&v.set(g,l)}return v}static getHash(v){if(!v)return"";const g=new s.MurmurHash3_64;for(const[b,l]of v)g.update(`${b}:${JSON.stringify(l)}`);return g.hexdigest()}}o=new WeakSet,fr=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=f;class a extends f{constructor(g){super();Se(this,y,null);Ee(this,y,structuredClone(g.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return oe(this,y)}}y=new WeakMap,e.PrintAnnotationStorage=a},(t,e,r)=>{var f,a,o,u,y,w;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var n=r(7),i=r(1);const v=class v{constructor(b){Se(this,f,this.focusin.bind(this));Se(this,a,this.focusout.bind(this));Se(this,o,!1);Se(this,u,!1);Se(this,y,!1);Se(this,w,v._zIndex++);this.constructor===v&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=b.parent,this.id=b.id,this.width=this.height=null,this.pageIndex=b.parent.pageIndex,this.name=b.name,this.div=null;const[l,_]=this.parent.viewportBaseDimensions;this.x=b.x/l,this.y=b.y/_,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=oe(this,w)}focusin(b){oe(this,o)?Ee(this,o,!1):this.parent.setSelected(this)}focusout(b){if(!this.isAttachedToDOM)return;const l=b.relatedTarget;l!=null&&l.closest(`#${this.id}`)||(b.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(b){const l=this.parent.div.getBoundingClientRect();this.startX=b.clientX-l.x,this.startY=b.clientY-l.y,b.dataTransfer.setData("text/plain",this.id),b.dataTransfer.effectAllowed="move"}setAt(b,l,_,h){const[d,c]=this.parent.viewportBaseDimensions;[_,h]=this.screenToPageTranslation(_,h),this.x=(b+_)/d,this.y=(l+h)/c,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(b,l){const[_,h]=this.parent.viewportBaseDimensions;[b,l]=this.screenToPageTranslation(b,l),this.x+=b/_,this.y+=l/h,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(b,l){const{rotation:_}=this.parent.viewport;switch(_){case 90:return[l,-b];case 180:return[-b,-l];case 270:return[-l,b];default:return[b,l]}}setDims(b,l){const[_,h]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*b/_}%`,this.div.style.height=`${100*l/h}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",oe(this,f)),this.div.addEventListener("focusout",oe(this,a));const[b,l]=this.getInitialTranslation();return this.translate(b,l),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(b){const l=n.KeyboardManager.platform.isMac;if(b.button!==0||b.ctrlKey&&l){b.preventDefault();return}b.ctrlKey&&!l||b.shiftKey||b.metaKey&&l?this.parent.toggleSelected(this):this.parent.setSelected(this),Ee(this,o,!0)}getRect(b,l){const[_,h]=this.parent.viewportBaseDimensions,[d,c]=this.parent.pageDimensions,p=d*b/_,m=c*l/h,S=this.x*d,E=this.y*c,T=this.width*d,A=this.height*c;switch(this.rotation){case 0:return[S+p,c-E-m-A,S+p+T,c-E-m];case 90:return[S+m,c-E+p,S+m+A,c-E+p+T];case 180:return[S-p-T,c-E+m,S-p,c-E+m+A];case 270:return[S-m-A,c-E-p-T,S-m,c-E-p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(b,l){const[_,h,d,c]=b,p=d-_,m=c-h;switch(this.rotation){case 0:return[_,l-c,p,m];case 90:return[_,l-h,m,p];case 180:return[d,l-h,p,m];case 270:return[d,l-c,m,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ee(this,y,!0)}disableEditMode(){Ee(this,y,!1)}isInEditMode(){return oe(this,y)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var b;(b=this.div)==null||b.addEventListener("focusin",oe(this,f))}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(b,l){const _=new this.prototype.constructor({parent:l,id:l.getNextId()});_.rotation=b.rotation;const[h,d]=l.pageDimensions,[c,p,m,S]=_.getRectInCurrentCoords(b.rect,d);return _.x=c/h,_.y=p/d,_.width=m/h,_.height=S/d,_}remove(){this.div.removeEventListener("focusin",oe(this,f)),this.div.removeEventListener("focusout",oe(this,a)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var b;(b=this.div)==null||b.classList.add("selectedEditor")}unselect(){var b;(b=this.div)==null||b.classList.remove("selectedEditor")}updateParams(b,l){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return oe(this,u)}set isEditing(b){Ee(this,u,b),b?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};f=new WeakMap,a=new WeakMap,o=new WeakMap,u=new WeakMap,y=new WeakMap,w=new WeakMap,Ue(v,"_colorManager",new n.ColorManager),Ue(v,"_zIndex",1);let s=v;e.AnnotationEditor=s},(t,e,r)=>{var g,b,l,_,h,d,pr,m,E,T,A,P,H,O,q,C,j,V,N,Y,X,J,Q,W,U,$,hr,Ut,tt,Ct,mr,gr,$t,xt,Pt;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=s,e.opacityToHex=f;var n=r(1),i=r(8);function s(ne,D,x){for(const R of x)D.addEventListener(R,ne[R].bind(ne))}function f(ne){return Math.round(Math.min(255,Math.max(1,255*ne))).toString(16).padStart(2,"0")}class a{constructor(){Se(this,g,0)}getId(){return`${n.AnnotationEditorPrefix}${jt(this,g)._++}`}}g=new WeakMap;class o{constructor(D=128){Se(this,b,[]);Se(this,l,!1);Se(this,_);Se(this,h,-1);Ee(this,_,D)}add({cmd:D,undo:x,mustExec:R,type:G=NaN,overwriteIfSameType:ie=!1,keepUndo:ae=!1}){if(R&&D(),oe(this,l))return;const se={cmd:D,undo:x,type:G};if(oe(this,h)===-1){oe(this,b).length>0&&(oe(this,b).length=0),Ee(this,h,0),oe(this,b).push(se);return}if(ie&&oe(this,b)[oe(this,h)].type===G){ae&&(se.undo=oe(this,b)[oe(this,h)].undo),oe(this,b)[oe(this,h)]=se;return}const ue=oe(this,h)+1;ue===oe(this,_)?oe(this,b).splice(0,1):(Ee(this,h,ue),ue<oe(this,b).length&&oe(this,b).splice(ue)),oe(this,b).push(se)}undo(){oe(this,h)!==-1&&(Ee(this,l,!0),oe(this,b)[oe(this,h)].undo(),Ee(this,l,!1),Ee(this,h,oe(this,h)-1))}redo(){oe(this,h)<oe(this,b).length-1&&(Ee(this,h,oe(this,h)+1),Ee(this,l,!0),oe(this,b)[oe(this,h)].cmd(),Ee(this,l,!1))}hasSomethingToUndo(){return oe(this,h)!==-1}hasSomethingToRedo(){return oe(this,h)<oe(this,b).length-1}destroy(){Ee(this,b,null)}}b=new WeakMap,l=new WeakMap,_=new WeakMap,h=new WeakMap,e.CommandManager=o;const p=class p{constructor(D){Se(this,d);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const x=p.platform.isMac;for(const[R,G]of D)for(const ie of R){const ae=ie.startsWith("mac+");x&&ae?(this.callbacks.set(ie.slice(4),G),this.allKeys.add(ie.split("+").at(-1))):!x&&!ae&&(this.callbacks.set(ie,G),this.allKeys.add(ie.split("+").at(-1)))}}static get platform(){const D=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:D.includes("Win"),isMac:D.includes("Mac")})}exec(D,x){if(!this.allKeys.has(x.key))return;const R=this.callbacks.get(ve(this,d,pr).call(this,x));R&&(R.bind(D)(),x.stopPropagation(),x.preventDefault())}};d=new WeakSet,pr=function(D){D.altKey&&this.buffer.push("alt"),D.ctrlKey&&this.buffer.push("ctrl"),D.metaKey&&this.buffer.push("meta"),D.shiftKey&&this.buffer.push("shift"),this.buffer.push(D.key);const x=this.buffer.join("+");return this.buffer.length=0,x};let u=p;e.KeyboardManager=u;class y{constructor(){Se(this,m,null)}copy(D){D&&(Array.isArray(D)?Ee(this,m,D.map(x=>x.serialize())):Ee(this,m,[D.serialize()]),Ee(this,m,oe(this,m).filter(x=>!!x)),oe(this,m).length===0&&Ee(this,m,null))}paste(){return oe(this,m)}isEmpty(){return oe(this,m)===null}destroy(){Ee(this,m,null)}}m=new WeakMap;const S=class S{get _colors(){const D=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(D),(0,n.shadow)(this,"_colors",D)}convert(D){const x=(0,i.getRGB)(D);if(!window.matchMedia("(forced-colors: active)").matches)return x;for(const[R,G]of this._colors)if(G.every((ie,ae)=>ie===x[ae]))return S._colorsMapping.get(R);return x}getHexCode(D){const x=this._colors.get(D);return x?n.Util.makeHexColor(...x):D}};Ue(S,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let w=S;e.ColorManager=w;const M=class M{constructor(D,x){Se(this,$);Se(this,E,null);Se(this,T,new Map);Se(this,A,new Map);Se(this,P,new y);Se(this,H,new o);Se(this,O,0);Se(this,q,null);Se(this,C,null);Se(this,j,new a);Se(this,V,!1);Se(this,N,n.AnnotationEditorType.NONE);Se(this,Y,new Set);Se(this,X,this.keydown.bind(this));Se(this,J,this.onEditingAction.bind(this));Se(this,Q,this.onPageChanging.bind(this));Se(this,W,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Se(this,U,null);Ee(this,U,D),Ee(this,C,x),oe(this,C)._on("editingaction",oe(this,J)),oe(this,C)._on("pagechanging",oe(this,Q))}destroy(){ve(this,$,Ut).call(this),oe(this,C)._off("editingaction",oe(this,J)),oe(this,C)._off("pagechanging",oe(this,Q));for(const D of oe(this,A).values())D.destroy();oe(this,A).clear(),oe(this,T).clear(),Ee(this,E,null),oe(this,Y).clear(),oe(this,P).destroy(),oe(this,H).destroy()}onPageChanging({pageNumber:D}){Ee(this,O,D-1)}focusMainContainer(){oe(this,U).focus()}keydown(D){var x;(x=this.getActive())!=null&&x.shouldGetKeyboardEvents()||M._keyboardManager.exec(this,D)}onEditingAction(D){["undo","redo","cut","copy","paste","delete","selectAll"].includes(D.name)&&this[D.name]()}setEditingState(D){D?(ve(this,$,hr).call(this),ve(this,$,tt).call(this,{isEditing:oe(this,N)!==n.AnnotationEditorType.NONE,isEmpty:ve(this,$,xt).call(this),hasSomethingToUndo:oe(this,H).hasSomethingToUndo(),hasSomethingToRedo:oe(this,H).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:oe(this,P).isEmpty()})):(ve(this,$,Ut).call(this),ve(this,$,tt).call(this,{isEditing:!1}))}registerEditorTypes(D){Ee(this,q,D);for(const x of oe(this,q))ve(this,$,Ct).call(this,x.defaultPropertiesToUpdate)}getId(){return oe(this,j).getId()}addLayer(D){oe(this,A).set(D.pageIndex,D),oe(this,V)?D.enable():D.disable()}removeLayer(D){oe(this,A).delete(D.pageIndex)}updateMode(D){if(Ee(this,N,D),D===n.AnnotationEditorType.NONE)this.setEditingState(!1),ve(this,$,gr).call(this);else{this.setEditingState(!0),ve(this,$,mr).call(this);for(const x of oe(this,A).values())x.updateMode(D)}}updateToolbar(D){D!==oe(this,N)&&oe(this,C).dispatch("switchannotationeditormode",{source:this,mode:D})}updateParams(D,x){for(const R of oe(this,Y))R.updateParams(D,x);for(const R of oe(this,q))R.updateDefaultParams(D,x)}getEditors(D){const x=[];for(const R of oe(this,T).values())R.pageIndex===D&&x.push(R);return x}getEditor(D){return oe(this,T).get(D)}addEditor(D){oe(this,T).set(D.id,D)}removeEditor(D){oe(this,T).delete(D.id),this.unselect(D)}setActiveEditor(D){oe(this,E)!==D&&(Ee(this,E,D),D&&ve(this,$,Ct).call(this,D.propertiesToUpdate))}toggleSelected(D){if(oe(this,Y).has(D)){oe(this,Y).delete(D),D.unselect(),ve(this,$,tt).call(this,{hasSelectedEditor:this.hasSelection});return}oe(this,Y).add(D),D.select(),ve(this,$,Ct).call(this,D.propertiesToUpdate),ve(this,$,tt).call(this,{hasSelectedEditor:!0})}setSelected(D){for(const x of oe(this,Y))x!==D&&x.unselect();oe(this,Y).clear(),oe(this,Y).add(D),D.select(),ve(this,$,Ct).call(this,D.propertiesToUpdate),ve(this,$,tt).call(this,{hasSelectedEditor:!0})}isSelected(D){return oe(this,Y).has(D)}unselect(D){D.unselect(),oe(this,Y).delete(D),ve(this,$,tt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return oe(this,Y).size!==0}undo(){oe(this,H).undo(),ve(this,$,tt).call(this,{hasSomethingToUndo:oe(this,H).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ve(this,$,xt).call(this)})}redo(){oe(this,H).redo(),ve(this,$,tt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:oe(this,H).hasSomethingToRedo(),isEmpty:ve(this,$,xt).call(this)})}addCommands(D){oe(this,H).add(D),ve(this,$,tt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ve(this,$,xt).call(this)})}delete(){if(oe(this,E)&&oe(this,E).commitOrRemove(),!this.hasSelection)return;const D=[...oe(this,Y)],x=()=>{for(const G of D)G.remove()},R=()=>{for(const G of D)ve(this,$,$t).call(this,G)};this.addCommands({cmd:x,undo:R,mustExec:!0})}copy(){if(oe(this,E)&&oe(this,E).commitOrRemove(),this.hasSelection){const D=[];for(const x of oe(this,Y))x.isEmpty()||D.push(x);if(D.length===0)return;oe(this,P).copy(D),ve(this,$,tt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(oe(this,P).isEmpty())return;this.unselectAll();const D=oe(this,A).get(oe(this,O)),x=oe(this,P).paste().map(ie=>D.deserialize(ie)),R=()=>{for(const ie of x)ve(this,$,$t).call(this,ie);ve(this,$,Pt).call(this,x)},G=()=>{for(const ie of x)ie.remove()};this.addCommands({cmd:R,undo:G,mustExec:!0})}selectAll(){for(const D of oe(this,Y))D.commit();ve(this,$,Pt).call(this,oe(this,T).values())}unselectAll(){if(oe(this,E)){oe(this,E).commitOrRemove();return}if(ve(this,$,Pt).size!==0){for(const D of oe(this,Y))D.unselect();oe(this,Y).clear(),ve(this,$,tt).call(this,{hasSelectedEditor:!1})}}isActive(D){return oe(this,E)===D}getActive(){return oe(this,E)}getMode(){return oe(this,N)}};E=new WeakMap,T=new WeakMap,A=new WeakMap,P=new WeakMap,H=new WeakMap,O=new WeakMap,q=new WeakMap,C=new WeakMap,j=new WeakMap,V=new WeakMap,N=new WeakMap,Y=new WeakMap,X=new WeakMap,J=new WeakMap,Q=new WeakMap,W=new WeakMap,U=new WeakMap,$=new WeakSet,hr=function(){oe(this,U).addEventListener("keydown",oe(this,X))},Ut=function(){oe(this,U).removeEventListener("keydown",oe(this,X))},tt=function(D){Object.entries(D).some(([R,G])=>oe(this,W)[R]!==G)&&oe(this,C).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(oe(this,W),D)})},Ct=function(D){oe(this,C).dispatch("annotationeditorparamschanged",{source:this,details:D})},mr=function(){if(!oe(this,V)){Ee(this,V,!0);for(const D of oe(this,A).values())D.enable()}},gr=function(){if(this.unselectAll(),oe(this,V)){Ee(this,V,!1);for(const D of oe(this,A).values())D.disable()}},$t=function(D){const x=oe(this,A).get(D.pageIndex);x?x.addOrRebuild(D):this.addEditor(D)},xt=function(){if(oe(this,T).size===0)return!0;if(oe(this,T).size===1)for(const D of oe(this,T).values())return D.isEmpty();return!1},Pt=function(D){oe(this,Y).clear();for(const x of D)x.isEmpty()||(oe(this,Y).add(x),x.select());ve(this,$,tt).call(this,{hasSelectedEditor:!0})},Ue(M,"_keyboardManager",new u([[["ctrl+a","mac+meta+a"],M.prototype.selectAll],[["ctrl+c","mac+meta+c"],M.prototype.copy],[["ctrl+v","mac+meta+v"],M.prototype.paste],[["ctrl+x","mac+meta+x"],M.prototype.cut],[["ctrl+z","mac+meta+z"],M.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],M.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],M.prototype.delete],[["Escape","mac+Escape"],M.prototype.unselectAll]]));let v=M;e.AnnotationEditorUIManager=v},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=S,e.getColorValues=H,e.getCurrentTransform=O,e.getCurrentTransformInverse=q,e.getFilenameFromUrl=h,e.getPdfFilenameFromUrl=d,e.getRGB=P,e.getXfaPageViewport=A,e.isDataScheme=l,e.isPdfFile=_,e.isValidFetchUrl=p,e.loadScript=m;var n=r(9),i=r(1);const s="http://www.w3.org/2000/svg",f="pdfjs_internal_id_";e.AnnotationPrefix=f;const C=class C{};Ue(C,"CSS",96),Ue(C,"PDF",72),Ue(C,"PDF_TO_CSS_UNITS",C.CSS/C.PDF);let a=C;e.PixelsPerInch=a;class o extends n.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,N){const Y=this._document.createElement("canvas");return Y.width=V,Y.height=N,Y}}e.DOMCanvasFactory=o;async function u(j,V=!1){if(p(j,document.baseURI)){const N=await fetch(j);if(!N.ok)throw new Error(N.statusText);return V?new Uint8Array(await N.arrayBuffer()):(0,i.stringToBytes)(await N.text())}return new Promise((N,Y)=>{const X=new XMLHttpRequest;X.open("GET",j,!0),V&&(X.responseType="arraybuffer"),X.onreadystatechange=()=>{if(X.readyState===XMLHttpRequest.DONE){if(X.status===200||X.status===0){let J;if(V&&X.response?J=new Uint8Array(X.response):!V&&X.responseText&&(J=(0,i.stringToBytes)(X.responseText)),J){N(J);return}}Y(new Error(X.statusText))}},X.send(null)})}class y extends n.BaseCMapReaderFactory{_fetchData(V,N){return u(V,this.isCompressed).then(Y=>({cMapData:Y,compressionType:N}))}}e.DOMCMapReaderFactory=y;class w extends n.BaseStandardFontDataFactory{_fetchData(V){return u(V,!0)}}e.DOMStandardFontDataFactory=w;class v extends n.BaseSVGFactory{_createSVG(V){return document.createElementNS(s,V)}}e.DOMSVGFactory=v;class g{constructor({viewBox:V,scale:N,rotation:Y,offsetX:X=0,offsetY:J=0,dontFlip:Q=!1}){this.viewBox=V,this.scale=N,this.rotation=Y,this.offsetX=X,this.offsetY=J;const W=(V[2]+V[0])/2,U=(V[3]+V[1])/2;let $,ee,Z,L;switch(Y%=360,Y<0&&(Y+=360),Y){case 180:$=-1,ee=0,Z=0,L=1;break;case 90:$=0,ee=1,Z=1,L=0;break;case 270:$=0,ee=-1,Z=-1,L=0;break;case 0:$=1,ee=0,Z=0,L=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Q&&(Z=-Z,L=-L);let I,k,B,F;$===0?(I=Math.abs(U-V[1])*N+X,k=Math.abs(W-V[0])*N+J,B=Math.abs(V[3]-V[1])*N,F=Math.abs(V[2]-V[0])*N):(I=Math.abs(W-V[0])*N+X,k=Math.abs(U-V[1])*N+J,B=Math.abs(V[2]-V[0])*N,F=Math.abs(V[3]-V[1])*N),this.transform=[$*N,ee*N,Z*N,L*N,I-$*N*W-Z*N*U,k-ee*N*W-L*N*U],this.width=B,this.height=F}clone({scale:V=this.scale,rotation:N=this.rotation,offsetX:Y=this.offsetX,offsetY:X=this.offsetY,dontFlip:J=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:V,rotation:N,offsetX:Y,offsetY:X,dontFlip:J})}convertToViewportPoint(V,N){return i.Util.applyTransform([V,N],this.transform)}convertToViewportRectangle(V){const N=i.Util.applyTransform([V[0],V[1]],this.transform),Y=i.Util.applyTransform([V[2],V[3]],this.transform);return[N[0],N[1],Y[0],Y[1]]}convertToPdfPoint(V,N){return i.Util.applyInverseTransform([V,N],this.transform)}}e.PageViewport=g;class b extends i.BaseException{constructor(V,N){super(V,"RenderingCancelledException"),this.type=N}}e.RenderingCancelledException=b;function l(j){const V=j.length;let N=0;for(;N<V&&j[N].trim()==="";)N++;return j.substring(N,N+5).toLowerCase()==="data:"}function _(j){return typeof j=="string"&&/\.pdf$/i.test(j)}function h(j){const V=j.indexOf("#"),N=j.indexOf("?"),Y=Math.min(V>0?V:j.length,N>0?N:j.length);return j.substring(j.lastIndexOf("/",Y)+1,Y)}function d(j,V="document.pdf"){if(typeof j!="string")return V;if(l(j))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const N=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Y=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,X=N.exec(j);let J=Y.exec(X[1])||Y.exec(X[2])||Y.exec(X[3]);if(J&&(J=J[0],J.includes("%")))try{J=Y.exec(decodeURIComponent(J))[0]}catch{}return J||V}class c{constructor(){this.started=Object.create(null),this.times=[]}time(V){V in this.started&&(0,i.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,i.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let N=0;for(const Y of this.times){const X=Y.name;X.length>N&&(N=X.length)}for(const Y of this.times){const X=Y.end-Y.start;V.push(`${Y.name.padEnd(N)} ${X}ms
`)}return V.join("")}}e.StatTimer=c;function p(j,V){try{const{protocol:N}=V?new URL(j,V):new URL(j);return N==="http:"||N==="https:"}catch{return!1}}function m(j,V=!1){return new Promise((N,Y)=>{const X=document.createElement("script");X.src=j,X.onload=function(J){V&&X.remove(),N(J)},X.onerror=function(){Y(new Error(`Cannot load script at: ${X.src}`))},(document.head||document.documentElement).append(X)})}function S(j){console.log("Deprecated API usage: "+j)}let E;class T{static toDateObject(V){if(!V||typeof V!="string")return null;E||(E=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const N=E.exec(V);if(!N)return null;const Y=parseInt(N[1],10);let X=parseInt(N[2],10);X=X>=1&&X<=12?X-1:0;let J=parseInt(N[3],10);J=J>=1&&J<=31?J:1;let Q=parseInt(N[4],10);Q=Q>=0&&Q<=23?Q:0;let W=parseInt(N[5],10);W=W>=0&&W<=59?W:0;let U=parseInt(N[6],10);U=U>=0&&U<=59?U:0;const $=N[7]||"Z";let ee=parseInt(N[8],10);ee=ee>=0&&ee<=23?ee:0;let Z=parseInt(N[9],10)||0;return Z=Z>=0&&Z<=59?Z:0,$==="-"?(Q+=ee,W+=Z):$==="+"&&(Q-=ee,W-=Z),new Date(Date.UTC(Y,X,J,Q,W,U))}}e.PDFDateString=T;function A(j,{scale:V=1,rotation:N=0}){const{width:Y,height:X}=j.attributes.style,J=[0,0,parseInt(Y),parseInt(X)];return new g({viewBox:J,scale:V,rotation:N})}function P(j){if(j.startsWith("#")){const V=parseInt(j.slice(1),16);return[(V&16711680)>>16,(V&65280)>>8,V&255]}return j.startsWith("rgb(")?j.slice(4,-1).split(",").map(V=>parseInt(V)):j.startsWith("rgba(")?j.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,i.warn)(`Not a valid color format: "${j}"`),[0,0,0])}function H(j){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const N of j.keys()){V.style.color=N;const Y=window.getComputedStyle(V).color;j.set(N,P(Y))}V.remove()}function O(j){const{a:V,b:N,c:Y,d:X,e:J,f:Q}=j.getTransform();return[V,N,Y,X,J,Q]}function q(j){const{a:V,b:N,c:Y,d:X,e:J,f:Q}=j.getTransform().invertSelf();return[V,N,Y,X,J,Q]}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var n=r(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,y){if(u<=0||y<=0)throw new Error("Invalid canvas size");const w=this._createCanvas(u,y);return{canvas:w,context:w.getContext("2d")}}reset(u,y,w){if(!u.canvas)throw new Error("Canvas is not specified");if(y<=0||w<=0)throw new Error("Invalid canvas size");u.canvas.width=y,u.canvas.height=w}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,y){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=i;class s{constructor({baseUrl:u=null,isCompressed:y=!1}){this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=y}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const y=this.baseUrl+u+(this.isCompressed?".bcmap":""),w=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(y,w).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${y}`)})}_fetchData(u,y){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class f{constructor({baseUrl:u=null}){this.constructor===f&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const y=`${this.baseUrl}${u}`;return this._fetchData(y).catch(w=>{throw new Error(`Unable to load font data at: ${y}`)})}_fetchData(u){(0,n.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=f;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,y,w=!1){if(u<=0||y<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),w||(v.setAttribute("width",`${u}px`),v.setAttribute("height",`${y}px`)),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${u} ${y}`),v}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,n.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=a},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var n=r(1);const i=3285377520,s=4294901760,f=65535;class a{constructor(u){this.h1=u?u&4294967295:i,this.h2=u?u&4294967295:i}update(u){let y,w;if(typeof u=="string"){y=new Uint8Array(u.length*2),w=0;for(let E=0,T=u.length;E<T;E++){const A=u.charCodeAt(E);A<=255?y[w++]=A:(y[w++]=A>>>8,y[w++]=A&255)}}else if((0,n.isArrayBuffer)(u))y=u.slice(),w=y.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const v=w>>2,g=w-v*4,b=new Uint32Array(y.buffer,0,v);let l=0,_=0,h=this.h1,d=this.h2;const c=3432918353,p=461845907,m=c&f,S=p&f;for(let E=0;E<v;E++)E&1?(l=b[E],l=l*c&s|l*m&f,l=l<<15|l>>>17,l=l*p&s|l*S&f,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(_=b[E],_=_*c&s|_*m&f,_=_<<15|_>>>17,_=_*p&s|_*S&f,d^=_,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,g){case 3:l^=y[v*4+2]<<16;case 2:l^=y[v*4+1]<<8;case 1:l^=y[v*4],l=l*c&s|l*m&f,l=l<<15|l>>>17,l=l*p&s|l*S&f,v&1?h^=l:d^=l}this.h1=h,this.h2=d}hexdigest(){let u=this.h1,y=this.h2;u^=y>>>1,u=u*3981806797&s|u*36045&f,y=y*4283543511&s|((y<<16|u>>>16)*2950163797&s)>>>16,u^=y>>>1,u=u*444984403&s|u*60499&f,y=y*3301882366&s|((y<<16|u>>>16)*3120437893&s)>>>16,u^=y>>>1;const w=(u>>>0).toString(16),v=(y>>>0).toString(16);return w.padStart(8,"0")+v.padStart(8,"0")}}e.MurmurHash3_64=a},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var n=r(1);class i{constructor({docId:o,onUnsupportedFeature:u,ownerDocument:y=globalThis.document,styleElement:w=null}){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=o,this._onUnsupportedFeature=u,this._document=y,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(o){this.nativeFontFaces.push(o),this._document.fonts.add(o)}insertRule(o){let u=this.styleElement;u||(u=this.styleElement=this._document.createElement("style"),u.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(u));const y=u.sheet;y.insertRule(o,y.cssRules.length)}clear(){for(const o of this.nativeFontFaces)this._document.fonts.delete(o);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(o){if(o.attached||o.missingFile)return;if(o.attached=!0,this.isFontLoadingAPISupported){const y=o.createNativeFontFace();if(y){this.addNativeFontFace(y);try{await y.loaded}catch(w){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${y.family}': '${w}'.`),o.disableFontFace=!0,w}}return}const u=o.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(y=>{const w=this._queueLoadingCallback(y);this._prepareFontLoadEvent([u],[o],w)})}}_queueLoadingCallback(o){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var u;const o=!!((u=this._document)!=null&&u.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",o)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(o,u,y){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;e.FontLoader=s,e.FontLoader=s=class extends i{constructor(o){super(o),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let o=!1;if(typeof navigator>"u")o=!0;else{const u=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(u==null?void 0:u[1])>=14&&(o=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",o)}_queueLoadingCallback(o){function u(){for((0,n.assert)(!w.done,"completeRequest() cannot be called twice."),w.done=!0;y.requests.length>0&&y.requests[0].done;){const v=y.requests.shift();setTimeout(v.callback,0)}}const y=this.loadingContext,w={id:`pdfjs-font-loading-${y.nextRequestId++}`,done:!1,complete:u,callback:o};return y.requests.push(w),w}get _loadTestFont(){const o=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",o())}_prepareFontLoadEvent(o,u,y){function w(q,C){return q.charCodeAt(C)<<24|q.charCodeAt(C+1)<<16|q.charCodeAt(C+2)<<8|q.charCodeAt(C+3)&255}function v(q,C,j,V){const N=q.substring(0,C),Y=q.substring(C+j);return N+V+Y}let g,b;const l=this._document.createElement("canvas");l.width=1,l.height=1;const _=l.getContext("2d");let h=0;function d(q,C){if(h++,h>30){(0,n.warn)("Load test font never loaded."),C();return}if(_.font="30px "+q,_.fillText(".",0,20),_.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(d.bind(null,q,C))}const c=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=v(p,976,c.length,c);const S=16,E=1482184792;let T=w(p,S);for(g=0,b=c.length-3;g<b;g+=4)T=T-E+w(c,g)|0;g<c.length&&(T=T-E+w(c+"XXX",g)|0),p=v(p,S,4,(0,n.string32)(T));const A=`url(data:font/opentype;base64,${btoa(p)});`,P=`@font-face {font-family:"${c}";src:${A}}`;this.insertRule(P);const H=[];for(const q of u)H.push(q.loadedName);H.push(c);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const q of H){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=q,O.append(C)}this._document.body.append(O),d(c,()=>{O.remove(),y.complete()})}};class f{constructor(o,{isEvalSupported:u=!0,disableFontFace:y=!1,ignoreErrors:w=!1,onUnsupportedFeature:v,fontRegistry:g=null}){this.compiledGlyphs=Object.create(null);for(const b in o)this[b]=o[b];this.isEvalSupported=u!==!1,this.disableFontFace=y===!0,this.ignoreErrors=w===!0,this._onUnsupportedFeature=v,this.fontRegistry=g}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let o;if(!this.cssFontInfo)o=new FontFace(this.loadedName,this.data,{});else{const u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),o=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return this.fontRegistry&&this.fontRegistry.registerFont(this),o}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const o=(0,n.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(o)});`;let y;if(!this.cssFontInfo)y=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let w=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(w+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),y=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${w}src:${u}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,u),y}getPathGenerator(o,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let y;try{y=o.get(this.loadedName+"_path_"+u)}catch(w){if(!this.ignoreErrors)throw w;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${w}".`),this.compiledGlyphs[u]=function(v,g){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const w=[];for(const v of y){const g=v.args!==void 0?v.args.join(","):"";w.push("c.",v.cmd,"(",g,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",w.join(""))}return this.compiledGlyphs[u]=function(w,v){for(const g of y)g.cmd==="scale"&&(g.args=[v,-v]),w[g.cmd].apply(w,g.args)}}}e.FontFaceObject=f},(t,e,r)=>{var X,zt;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var n=r(8),i=r(1),s=r(13),f=r(14),a=r(3);const o=16,u=100,y=4096,w=15,v=10,g=a.isNodeJS&&typeof Path2D>"u"?-1:1e3,b=16;function l(W,U){if(W._removeMirroring)throw new Error("Context is already forwarding operations.");W.__originalSave=W.save,W.__originalRestore=W.restore,W.__originalRotate=W.rotate,W.__originalScale=W.scale,W.__originalTranslate=W.translate,W.__originalTransform=W.transform,W.__originalSetTransform=W.setTransform,W.__originalResetTransform=W.resetTransform,W.__originalClip=W.clip,W.__originalMoveTo=W.moveTo,W.__originalLineTo=W.lineTo,W.__originalBezierCurveTo=W.bezierCurveTo,W.__originalRect=W.rect,W.__originalClosePath=W.closePath,W.__originalBeginPath=W.beginPath,W._removeMirroring=()=>{W.save=W.__originalSave,W.restore=W.__originalRestore,W.rotate=W.__originalRotate,W.scale=W.__originalScale,W.translate=W.__originalTranslate,W.transform=W.__originalTransform,W.setTransform=W.__originalSetTransform,W.resetTransform=W.__originalResetTransform,W.clip=W.__originalClip,W.moveTo=W.__originalMoveTo,W.lineTo=W.__originalLineTo,W.bezierCurveTo=W.__originalBezierCurveTo,W.rect=W.__originalRect,W.closePath=W.__originalClosePath,W.beginPath=W.__originalBeginPath,delete W._removeMirroring},W.save=function(){U.save(),this.__originalSave()},W.restore=function(){U.restore(),this.__originalRestore()},W.translate=function(ee,Z){U.translate(ee,Z),this.__originalTranslate(ee,Z)},W.scale=function(ee,Z){U.scale(ee,Z),this.__originalScale(ee,Z)},W.transform=function(ee,Z,L,I,k,B){U.transform(ee,Z,L,I,k,B),this.__originalTransform(ee,Z,L,I,k,B)},W.setTransform=function(ee,Z,L,I,k,B){U.setTransform(ee,Z,L,I,k,B),this.__originalSetTransform(ee,Z,L,I,k,B)},W.resetTransform=function(){U.resetTransform(),this.__originalResetTransform()},W.rotate=function(ee){U.rotate(ee),this.__originalRotate(ee)},W.clip=function(ee){U.clip(ee),this.__originalClip(ee)},W.moveTo=function($,ee){U.moveTo($,ee),this.__originalMoveTo($,ee)},W.lineTo=function($,ee){U.lineTo($,ee),this.__originalLineTo($,ee)},W.bezierCurveTo=function($,ee,Z,L,I,k){U.bezierCurveTo($,ee,Z,L,I,k),this.__originalBezierCurveTo($,ee,Z,L,I,k)},W.rect=function($,ee,Z,L){U.rect($,ee,Z,L),this.__originalRect($,ee,Z,L)},W.closePath=function(){U.closePath(),this.__originalClosePath()},W.beginPath=function(){U.beginPath(),this.__originalBeginPath()}}class _{constructor(U){this.canvasFactory=U,this.cache=Object.create(null)}getCanvas(U,$,ee){let Z;return this.cache[U]!==void 0?(Z=this.cache[U],this.canvasFactory.reset(Z,$,ee)):(Z=this.canvasFactory.create($,ee),this.cache[U]=Z),Z}delete(U){delete this.cache[U]}clear(){for(const U in this.cache){const $=this.cache[U];this.canvasFactory.destroy($),delete this.cache[U]}}}function h(W,U,$,ee,Z,L,I,k,B,F){const[K,te,M,ne,D,x]=(0,n.getCurrentTransform)(W);if(te===0&&M===0){const ie=I*K+D,ae=Math.round(ie),se=k*ne+x,ue=Math.round(se),le=(I+B)*K+D,de=Math.abs(Math.round(le)-ae)||1,he=(k+F)*ne+x,ge=Math.abs(Math.round(he)-ue)||1;return W.setTransform(Math.sign(K),0,0,Math.sign(ne),ae,ue),W.drawImage(U,$,ee,Z,L,0,0,de,ge),W.setTransform(K,te,M,ne,D,x),[de,ge]}if(K===0&&ne===0){const ie=k*M+D,ae=Math.round(ie),se=I*te+x,ue=Math.round(se),le=(k+F)*M+D,de=Math.abs(Math.round(le)-ae)||1,he=(I+B)*te+x,ge=Math.abs(Math.round(he)-ue)||1;return W.setTransform(0,Math.sign(te),Math.sign(M),0,ae,ue),W.drawImage(U,$,ee,Z,L,0,0,ge,de),W.setTransform(K,te,M,ne,D,x),[ge,de]}W.drawImage(U,$,ee,Z,L,I,k,B,F);const R=Math.hypot(K,te),G=Math.hypot(M,ne);return[R*B,G*F]}function d(W){const{width:U,height:$}=W;if(U>g||$>g)return null;const ee=1e3,Z=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=U+1;let I=new Uint8Array(L*($+1)),k,B,F;const K=U+7&-8;let te=new Uint8Array(K*$),M=0;for(const G of W.data){let ie=128;for(;ie>0;)te[M++]=G&ie?0:255,ie>>=1}let ne=0;for(M=0,te[M]!==0&&(I[0]=1,++ne),B=1;B<U;B++)te[M]!==te[M+1]&&(I[B]=te[M]?2:1,++ne),M++;for(te[M]!==0&&(I[B]=2,++ne),k=1;k<$;k++){M=k*K,F=k*L,te[M-K]!==te[M]&&(I[F]=te[M]?1:8,++ne);let G=(te[M]?4:0)+(te[M-K]?8:0);for(B=1;B<U;B++)G=(G>>2)+(te[M+1]?4:0)+(te[M-K+1]?8:0),Z[G]&&(I[F+B]=Z[G],++ne),M++;if(te[M-K]!==te[M]&&(I[F+B]=te[M]?2:4,++ne),ne>ee)return null}for(M=K*($-1),F=k*L,te[M]!==0&&(I[F]=8,++ne),B=1;B<U;B++)te[M]!==te[M+1]&&(I[F+B]=te[M]?4:8,++ne),M++;if(te[M]!==0&&(I[F+B]=4,++ne),ne>ee)return null;const D=new Int32Array([0,L,-1,0,-L,0,0,0,1]),x=new Path2D;for(k=0;ne&&k<=$;k++){let G=k*L;const ie=G+U;for(;G<ie&&!I[G];)G++;if(G===ie)continue;x.moveTo(G%L,k);const ae=G;let se=I[G];do{const ue=D[se];do G+=ue;while(!I[G]);const le=I[G];le!==5&&le!==10?(se=le,I[G]=0):(se=le&51*se>>4,I[G]&=se>>2|se<<2),x.lineTo(G%L,G/L|0),I[G]||--ne}while(ae!==G);--k}return te=null,I=null,function(G){G.save(),G.scale(1/U,-1/$),G.translate(0,-$),G.fill(x),G.beginPath(),G.restore()}}class c{constructor(U,$){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,U,$])}clone(){const U=Object.create(this);return U.clipBox=this.clipBox.slice(),U}setCurrentPoint(U,$){this.x=U,this.y=$}updatePathMinMax(U,$,ee){[$,ee]=i.Util.applyTransform([$,ee],U),this.minX=Math.min(this.minX,$),this.minY=Math.min(this.minY,ee),this.maxX=Math.max(this.maxX,$),this.maxY=Math.max(this.maxY,ee)}updateRectMinMax(U,$){const ee=i.Util.applyTransform($,U),Z=i.Util.applyTransform($.slice(2),U);this.minX=Math.min(this.minX,ee[0],Z[0]),this.minY=Math.min(this.minY,ee[1],Z[1]),this.maxX=Math.max(this.maxX,ee[0],Z[0]),this.maxY=Math.max(this.maxY,ee[1],Z[1])}updateScalingPathMinMax(U,$){i.Util.scaleMinMax(U,$),this.minX=Math.min(this.minX,$[0]),this.maxX=Math.max(this.maxX,$[1]),this.minY=Math.min(this.minY,$[2]),this.maxY=Math.max(this.maxY,$[3])}updateCurvePathMinMax(U,$,ee,Z,L,I,k,B,F,K){const te=i.Util.bezierBoundingBox($,ee,Z,L,I,k,B,F);if(K){K[0]=Math.min(K[0],te[0],te[2]),K[1]=Math.max(K[1],te[0],te[2]),K[2]=Math.min(K[2],te[1],te[3]),K[3]=Math.max(K[3],te[1],te[3]);return}this.updateRectMinMax(U,te)}getPathBoundingBox(U=s.PathType.FILL,$=null){const ee=[this.minX,this.minY,this.maxX,this.maxY];if(U===s.PathType.STROKE){$||(0,i.unreachable)("Stroke bounding box must include transform.");const Z=i.Util.singularValueDecompose2dScale($),L=Z[0]*this.lineWidth/2,I=Z[1]*this.lineWidth/2;ee[0]-=L,ee[1]-=I,ee[2]+=L,ee[3]+=I}return ee}updateClipFromPath(){const U=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(U||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(U){this.clipBox=U,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(U=s.PathType.FILL,$=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(U,$))}}function p(W,U,$=null){if(typeof ImageData<"u"&&U instanceof ImageData){W.putImageData(U,0,0);return}const ee=U.height,Z=U.width,L=ee%b,I=(ee-L)/b,k=L===0?I:I+1,B=W.createImageData(Z,b);let F=0,K;const te=U.data,M=B.data;let ne,D,x,R,G,ie,ae,se;if($)switch($.length){case 1:G=$[0],ie=$[0],ae=$[0],se=$[0];break;case 4:G=$[0],ie=$[1],ae=$[2],se=$[3];break}if(U.kind===i.ImageKind.GRAYSCALE_1BPP){const ue=te.byteLength,le=new Uint32Array(M.buffer,0,M.byteLength>>2),de=le.length,he=Z+7>>3;let ge=4294967295,be=i.FeatureTest.isLittleEndian?4278190080:255;for(se&&se[0]===255&&se[255]===0&&([ge,be]=[be,ge]),ne=0;ne<k;ne++){for(x=ne<I?b:L,K=0,D=0;D<x;D++){const Re=ue-F;let Pe=0;const ke=Re>he?Z:Re*8-7,ye=ke&-8;let Ce=0,Ne=0;for(;Pe<ye;Pe+=8)Ne=te[F++],le[K++]=Ne&128?ge:be,le[K++]=Ne&64?ge:be,le[K++]=Ne&32?ge:be,le[K++]=Ne&16?ge:be,le[K++]=Ne&8?ge:be,le[K++]=Ne&4?ge:be,le[K++]=Ne&2?ge:be,le[K++]=Ne&1?ge:be;for(;Pe<ke;Pe++)Ce===0&&(Ne=te[F++],Ce=128),le[K++]=Ne&Ce?ge:be,Ce>>=1}for(;K<de;)le[K++]=0;W.putImageData(B,0,ne*b)}}else if(U.kind===i.ImageKind.RGBA_32BPP){const ue=!!(G||ie||ae);for(D=0,R=Z*b*4,ne=0;ne<I;ne++){if(M.set(te.subarray(F,F+R)),F+=R,ue)for(let le=0;le<R;le+=4)G&&(M[le+0]=G[M[le+0]]),ie&&(M[le+1]=ie[M[le+1]]),ae&&(M[le+2]=ae[M[le+2]]);W.putImageData(B,0,D),D+=b}if(ne<k){if(R=Z*L*4,M.set(te.subarray(F,F+R)),ue)for(let le=0;le<R;le+=4)G&&(M[le+0]=G[M[le+0]]),ie&&(M[le+1]=ie[M[le+1]]),ae&&(M[le+2]=ae[M[le+2]]);W.putImageData(B,0,D)}}else if(U.kind===i.ImageKind.RGB_24BPP){const ue=!!(G||ie||ae);for(x=b,R=Z*x,ne=0;ne<k;ne++){for(ne>=I&&(x=L,R=Z*x),K=0,D=R;D--;)M[K++]=te[F++],M[K++]=te[F++],M[K++]=te[F++],M[K++]=255;if(ue)for(let le=0;le<K;le+=4)G&&(M[le+0]=G[M[le+0]]),ie&&(M[le+1]=ie[M[le+1]]),ae&&(M[le+2]=ae[M[le+2]]);W.putImageData(B,0,ne*b)}}else throw new Error(`bad image kind: ${U.kind}`)}function m(W,U){if(U.bitmap){W.drawImage(U.bitmap,0,0);return}const $=U.height,ee=U.width,Z=$%b,L=($-Z)/b,I=Z===0?L:L+1,k=W.createImageData(ee,b);let B=0;const F=U.data,K=k.data;for(let te=0;te<I;te++){const M=te<L?b:Z;({srcPos:B}=(0,f.applyMaskImageData)({src:F,srcPos:B,dest:K,width:ee,height:M})),W.putImageData(k,0,te*b)}}function S(W,U){const $=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let ee=0,Z=$.length;ee<Z;ee++){const L=$[ee];W[L]!==void 0&&(U[L]=W[L])}W.setLineDash!==void 0&&(U.setLineDash(W.getLineDash()),U.lineDashOffset=W.lineDashOffset)}function E(W,U){W.strokeStyle=W.fillStyle=U||"#000000",W.fillRule="nonzero",W.globalAlpha=1,W.lineWidth=1,W.lineCap="butt",W.lineJoin="miter",W.miterLimit=10,W.globalCompositeOperation="source-over",W.font="10px sans-serif",W.setLineDash!==void 0&&(W.setLineDash([]),W.lineDashOffset=0)}function T(W,U,$,ee){const Z=W.length;for(let L=3;L<Z;L+=4){const I=W[L];if(I===0)W[L-3]=U,W[L-2]=$,W[L-1]=ee;else if(I<255){const k=255-I;W[L-3]=W[L-3]*I+U*k>>8,W[L-2]=W[L-2]*I+$*k>>8,W[L-1]=W[L-1]*I+ee*k>>8}}}function A(W,U,$){const ee=W.length,Z=1/255;for(let L=3;L<ee;L+=4){const I=$?$[W[L]]:W[L];U[L]=U[L]*I*Z|0}}function P(W,U,$){const ee=W.length;for(let Z=3;Z<ee;Z+=4){const L=W[Z-3]*77+W[Z-2]*152+W[Z-1]*28;U[Z]=$?U[Z]*$[L>>8]>>8:U[Z]*L>>16}}function H(W,U,$,ee,Z,L,I,k,B,F,K){const te=!!L,M=te?L[0]:0,ne=te?L[1]:0,D=te?L[2]:0;let x;Z==="Luminosity"?x=P:x=A;const G=Math.min(ee,Math.ceil(1048576/$));for(let ie=0;ie<ee;ie+=G){const ae=Math.min(G,ee-ie),se=W.getImageData(k-F,ie+(B-K),$,ae),ue=U.getImageData(k,ie+B,$,ae);te&&T(se.data,M,ne,D),x(se.data,ue.data,I),U.putImageData(ue,k,ie+B)}}function O(W,U,$,ee){const Z=ee[0],L=ee[1],I=ee[2]-Z,k=ee[3]-L;I===0||k===0||(H(U.context,$,I,k,U.subtype,U.backdrop,U.transferMap,Z,L,U.offsetX,U.offsetY),W.save(),W.globalAlpha=1,W.globalCompositeOperation="source-over",W.setTransform(1,0,0,1,0,0),W.drawImage($.canvas,0,0),W.restore())}function q(W,U){const $=i.Util.singularValueDecompose2dScale(W);$[0]=Math.fround($[0]),$[1]=Math.fround($[1]);const ee=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return U!==void 0?U:$[0]<=ee||$[1]<=ee}const C=["butt","round","square"],j=["miter","round","bevel"],V={},N={},Q=class Q{constructor(U,$,ee,Z,L,I,k,B){Se(this,X);this.ctx=U,this.current=new c(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=$,this.objs=ee,this.canvasFactory=Z,this.imageLayer=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=I,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=k,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(B==null?void 0:B.background)||null,this.foregroundColor=(B==null?void 0:B.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(U,$=null){return typeof U=="string"?U.startsWith("g_")?this.commonObjs.get(U):this.objs.get(U):$}beginDrawing({transform:U,viewport:$,transparency:ee=!1,background:Z=null}){const L=this.ctx.canvas.width,I=this.ctx.canvas.height,k=Z||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const B=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const F=this.backgroundColor=this.ctx.fillStyle;let K=!0,te=k;if(this.ctx.fillStyle=k,te=this.ctx.fillStyle,K=typeof te=="string"&&/^#[0-9A-Fa-f]{6}$/.test(te),B==="#000000"&&F==="#ffffff"||B===F||!K)this.foregroundColor=this.backgroundColor=null;else{const[M,ne,D]=(0,n.getRGB)(te),x=G=>(G/=255,G<=.03928?G/12.92:((G+.055)/1.055)**2.4),R=Math.round(.2126*x(M)+.7152*x(ne)+.0722*x(D));this.selectColor=(G,ie,ae)=>{const se=.2126*x(G)+.7152*x(ie)+.0722*x(ae);return Math.round(se)===R?F:B}}}if(this.ctx.fillStyle=this.backgroundColor||k,this.ctx.fillRect(0,0,L,I),this.ctx.restore(),ee){const B=this.cachedCanvases.getCanvas("transparent",L,I);this.compositeCtx=this.ctx,this.transparentCanvas=B.canvas,this.ctx=B.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),E(this.ctx,this.foregroundColor),U&&(this.ctx.transform(...U),this.outputScaleX=U[0],this.outputScaleY=U[0]),this.ctx.transform(...$.transform),this.viewportScale=$.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(U,$,ee,Z){const L=U.argsArray,I=U.fnArray;let k=$||0;const B=L.length;if(B===k)return k;const F=B-k>v&&typeof ee=="function",K=F?Date.now()+w:0;let te=0;const M=this.commonObjs,ne=this.objs;let D;for(;;){if(Z!==void 0&&k===Z.nextBreakPoint)return Z.breakIt(k,ee),k;if(D=I[k],D!==i.OPS.dependency)this[D].apply(this,L[k]);else for(const x of L[k]){const R=x.startsWith("g_")?M:ne;if(!R.has(x))return R.get(x,ee),k}if(k++,k===B)return k;if(F&&++te>v){if(Date.now()>K)return ee(),k;te=0}}}endDrawing(){ve(this,X,zt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const U of this._cachedBitmapsMap.values()){for(const $ of U.values())typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement&&($.width=$.height=0);U.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(U,$){const ee=U.width,Z=U.height;let L=Math.max(Math.hypot($[0],$[1]),1),I=Math.max(Math.hypot($[2],$[3]),1),k=ee,B=Z,F="prescale1",K,te;for(;L>2&&k>1||I>2&&B>1;){let M=k,ne=B;L>2&&k>1&&(M=Math.ceil(k/2),L/=k/M),I>2&&B>1&&(ne=Math.ceil(B/2),I/=B/ne),K=this.cachedCanvases.getCanvas(F,M,ne),te=K.context,te.clearRect(0,0,M,ne),te.drawImage(U,0,0,k,B,0,0,M,ne),U=K.canvas,k=M,B=ne,F=F==="prescale1"?"prescale2":"prescale1"}return{img:U,paintWidth:k,paintHeight:B}}_createMaskCanvas(U){const $=this.ctx,{width:ee,height:Z}=U,L=this.current.fillColor,I=this.current.patternFill,k=(0,n.getCurrentTransform)($);let B,F,K,te;if((U.bitmap||U.data)&&U.count>1){const de=U.bitmap||U.data.buffer,he=k.slice(0,4);F=JSON.stringify(I?he:[he,L]),B=this._cachedBitmapsMap.get(de),B||(B=new Map,this._cachedBitmapsMap.set(de,B));const ge=B.get(F);if(ge&&!I){const be=Math.round(Math.min(k[0],k[2])+k[4]),Re=Math.round(Math.min(k[1],k[3])+k[5]);return{canvas:ge,offsetX:be,offsetY:Re}}K=ge}K||(te=this.cachedCanvases.getCanvas("maskCanvas",ee,Z),m(te.context,U));let M=i.Util.transform(k,[1/ee,0,0,-1/Z,0,0]);M=i.Util.transform(M,[1,0,0,1,0,-Z]);const ne=i.Util.applyTransform([0,0],M),D=i.Util.applyTransform([ee,Z],M),x=i.Util.normalizeRect([ne[0],ne[1],D[0],D[1]]),R=Math.round(x[2]-x[0])||1,G=Math.round(x[3]-x[1])||1,ie=this.cachedCanvases.getCanvas("fillCanvas",R,G),ae=ie.context,se=Math.min(ne[0],D[0]),ue=Math.min(ne[1],D[1]);ae.translate(-se,-ue),ae.transform(...M),K||(K=this._scaleImage(te.canvas,(0,n.getCurrentTransformInverse)(ae)),K=K.img,B&&I&&B.set(F,K)),ae.imageSmoothingEnabled=q((0,n.getCurrentTransform)(ae),U.interpolate),h(ae,K,0,0,K.width,K.height,0,0,ee,Z),ae.globalCompositeOperation="source-in";const le=i.Util.transform((0,n.getCurrentTransformInverse)(ae),[1,0,0,1,-se,-ue]);return ae.fillStyle=I?L.getPattern($,this,le,s.PathType.FILL):L,ae.fillRect(0,0,ee,Z),B&&!I&&(this.cachedCanvases.delete("fillCanvas"),B.set(F,ie.canvas)),{canvas:ie.canvas,offsetX:Math.round(se),offsetY:Math.round(ue)}}setLineWidth(U){U!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=U,this.ctx.lineWidth=U}setLineCap(U){this.ctx.lineCap=C[U]}setLineJoin(U){this.ctx.lineJoin=j[U]}setMiterLimit(U){this.ctx.miterLimit=U}setDash(U,$){const ee=this.ctx;ee.setLineDash!==void 0&&(ee.setLineDash(U),ee.lineDashOffset=$)}setRenderingIntent(U){}setFlatness(U){}setGState(U){for(let $=0,ee=U.length;$<ee;$++){const Z=U[$],L=Z[0],I=Z[1];switch(L){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I[0],I[1]);break;case"CA":this.current.strokeAlpha=Z[1];break;case"ca":this.current.fillAlpha=Z[1],this.ctx.globalAlpha=Z[1];break;case"BM":this.ctx.globalCompositeOperation=I;break;case"SMask":this.current.activeSMask=I?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=I}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const U=this.inSMaskMode;this.current.activeSMask&&!U?this.beginSMaskMode():!this.current.activeSMask&&U&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const U=this.ctx.canvas.width,$=this.ctx.canvas.height,ee="smaskGroupAt"+this.groupLevel,Z=this.cachedCanvases.getCanvas(ee,U,$);this.suspendedCtx=this.ctx,this.ctx=Z.context;const L=this.ctx;L.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),S(this.suspendedCtx,L),l(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),S(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(U){if(!this.current.activeSMask)return;U?(U[0]=Math.floor(U[0]),U[1]=Math.floor(U[1]),U[2]=Math.ceil(U[2]),U[3]=Math.ceil(U[3])):U=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const $=this.current.activeSMask,ee=this.suspendedCtx;O(ee,$,this.ctx,U),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(S(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const U=this.current;this.stateStack.push(U),this.current=U.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),S(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(U,$,ee,Z,L,I){this.ctx.transform(U,$,ee,Z,L,I),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(U,$,ee){const Z=this.ctx,L=this.current;let I=L.x,k=L.y,B,F;const K=(0,n.getCurrentTransform)(Z),te=K[0]===0&&K[3]===0||K[1]===0&&K[2]===0,M=te?ee.slice(0):null;for(let ne=0,D=0,x=U.length;ne<x;ne++)switch(U[ne]|0){case i.OPS.rectangle:I=$[D++],k=$[D++];const R=$[D++],G=$[D++],ie=I+R,ae=k+G;Z.moveTo(I,k),R===0||G===0?Z.lineTo(ie,ae):(Z.lineTo(ie,k),Z.lineTo(ie,ae),Z.lineTo(I,ae)),te||L.updateRectMinMax(K,[I,k,ie,ae]),Z.closePath();break;case i.OPS.moveTo:I=$[D++],k=$[D++],Z.moveTo(I,k),te||L.updatePathMinMax(K,I,k);break;case i.OPS.lineTo:I=$[D++],k=$[D++],Z.lineTo(I,k),te||L.updatePathMinMax(K,I,k);break;case i.OPS.curveTo:B=I,F=k,I=$[D+4],k=$[D+5],Z.bezierCurveTo($[D],$[D+1],$[D+2],$[D+3],I,k),L.updateCurvePathMinMax(K,B,F,$[D],$[D+1],$[D+2],$[D+3],I,k,M),D+=6;break;case i.OPS.curveTo2:B=I,F=k,Z.bezierCurveTo(I,k,$[D],$[D+1],$[D+2],$[D+3]),L.updateCurvePathMinMax(K,B,F,I,k,$[D],$[D+1],$[D+2],$[D+3],M),I=$[D+2],k=$[D+3],D+=4;break;case i.OPS.curveTo3:B=I,F=k,I=$[D+2],k=$[D+3],Z.bezierCurveTo($[D],$[D+1],I,k,I,k),L.updateCurvePathMinMax(K,B,F,$[D],$[D+1],I,k,I,k,M),D+=4;break;case i.OPS.closePath:Z.closePath();break}te&&L.updateScalingPathMinMax(K,M),L.setCurrentPoint(I,k)}closePath(){this.ctx.closePath()}stroke(U){U=typeof U<"u"?U:!0;const $=this.ctx,ee=this.current.strokeColor;$.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof ee=="object"&&(ee!=null&&ee.getPattern)?($.save(),$.strokeStyle=ee.getPattern($,this,(0,n.getCurrentTransformInverse)($),s.PathType.STROKE),this.rescaleAndStroke(!1),$.restore()):this.rescaleAndStroke(!0)),U&&this.consumePath(this.current.getClippedPathBoundingBox()),$.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(U){U=typeof U<"u"?U:!0;const $=this.ctx,ee=this.current.fillColor,Z=this.current.patternFill;let L=!1;Z&&($.save(),$.fillStyle=ee.getPattern($,this,(0,n.getCurrentTransformInverse)($),s.PathType.FILL),L=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?($.fill("evenodd"),this.pendingEOFill=!1):$.fill()),L&&$.restore(),U&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=V}eoClip(){this.pendingClip=N}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const U=this.pendingTextPaths,$=this.ctx;if(U===void 0){$.beginPath();return}$.save(),$.beginPath();for(const ee of U)$.setTransform(...ee.transform),$.translate(ee.x,ee.y),ee.addToPath($,ee.fontSize);$.restore(),$.clip(),$.beginPath(),delete this.pendingTextPaths}setCharSpacing(U){this.current.charSpacing=U}setWordSpacing(U){this.current.wordSpacing=U}setHScale(U){this.current.textHScale=U/100}setLeading(U){this.current.leading=-U}setFont(U,$){const ee=this.commonObjs.get(U),Z=this.current;if(!ee)throw new Error(`Can't find font for ${U}`);if(Z.fontMatrix=ee.fontMatrix||i.FONT_IDENTITY_MATRIX,(Z.fontMatrix[0]===0||Z.fontMatrix[3]===0)&&(0,i.warn)("Invalid font matrix for font "+U),$<0?($=-$,Z.fontDirection=-1):Z.fontDirection=1,this.current.font=ee,this.current.fontSize=$,ee.isType3Font)return;const L=ee.loadedName||"sans-serif";let I="normal";ee.black?I="900":ee.bold&&(I="bold");const k=ee.italic?"italic":"normal",B=`"${L}", ${ee.fallbackName}`;let F=$;$<o?F=o:$>u&&(F=u),this.current.fontSizeScale=$/F,this.ctx.font=`${k} ${I} ${F}px ${B}`}setTextRenderingMode(U){this.current.textRenderingMode=U}setTextRise(U){this.current.textRise=U}moveText(U,$){this.current.x=this.current.lineX+=U,this.current.y=this.current.lineY+=$}setLeadingMoveText(U,$){this.setLeading(-$),this.moveText(U,$)}setTextMatrix(U,$,ee,Z,L,I){this.current.textMatrix=[U,$,ee,Z,L,I],this.current.textMatrixScale=Math.hypot(U,$),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(U,$,ee,Z){const L=this.ctx,I=this.current,k=I.font,B=I.textRenderingMode,F=I.fontSize/I.fontSizeScale,K=B&i.TextRenderingMode.FILL_STROKE_MASK,te=!!(B&i.TextRenderingMode.ADD_TO_PATH_FLAG),M=I.patternFill&&!k.missingFile;let ne;(k.disableFontFace||te||M)&&(ne=k.getPathGenerator(this.commonObjs,U)),k.disableFontFace||M?(L.save(),L.translate($,ee),L.beginPath(),ne(L,F),Z&&L.setTransform(...Z),(K===i.TextRenderingMode.FILL||K===i.TextRenderingMode.FILL_STROKE)&&L.fill(),(K===i.TextRenderingMode.STROKE||K===i.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((K===i.TextRenderingMode.FILL||K===i.TextRenderingMode.FILL_STROKE)&&L.fillText(U,$,ee),(K===i.TextRenderingMode.STROKE||K===i.TextRenderingMode.FILL_STROKE)&&L.strokeText(U,$,ee)),te&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(L),x:$,y:ee,fontSize:F,addToPath:ne})}get isFontSubpixelAAEnabled(){const{context:U}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);U.scale(1.5,1),U.fillText("I",0,10);const $=U.getImageData(0,0,10,10).data;let ee=!1;for(let Z=3;Z<$.length;Z+=4)if($[Z]>0&&$[Z]<255){ee=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",ee)}showText(U){const $=this.current,ee=$.font;if(ee.isType3Font)return this.showType3Text(U);const Z=$.fontSize;if(Z===0)return;const L=this.ctx,I=$.fontSizeScale,k=$.charSpacing,B=$.wordSpacing,F=$.fontDirection,K=$.textHScale*F,te=U.length,M=ee.vertical,ne=M?1:-1,D=ee.defaultVMetrics,x=Z*$.fontMatrix[0],R=$.textRenderingMode===i.TextRenderingMode.FILL&&!ee.disableFontFace&&!$.patternFill;L.save(),L.transform(...$.textMatrix),L.translate($.x,$.y+$.textRise),F>0?L.scale(K,-1):L.scale(K,1);let G;if($.patternFill){L.save();const le=$.fillColor.getPattern(L,this,(0,n.getCurrentTransformInverse)(L),s.PathType.FILL);G=(0,n.getCurrentTransform)(L),L.restore(),L.fillStyle=le}let ie=$.lineWidth;const ae=$.textMatrixScale;if(ae===0||ie===0){const le=$.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(le===i.TextRenderingMode.STROKE||le===i.TextRenderingMode.FILL_STROKE)&&(ie=this.getSinglePixelWidth())}else ie/=ae;I!==1&&(L.scale(I,I),ie/=I),L.lineWidth=ie;let se=0,ue;for(ue=0;ue<te;++ue){const le=U[ue];if(typeof le=="number"){se+=ne*le*Z/1e3;continue}let de=!1;const he=(le.isSpace?B:0)+k,ge=le.fontChar,be=le.accent;let Re,Pe,ke=le.width;if(M){const Ce=le.vmetric||D,Ne=-(le.vmetric?Ce[1]:ke*.5)*x,Ye=Ce[2]*x;ke=Ce?-Ce[0]:ke,Re=Ne/I,Pe=(se+Ye)/I}else Re=se/I,Pe=0;if(ee.remeasure&&ke>0){const Ce=L.measureText(ge).width*1e3/Z*I;if(ke<Ce&&this.isFontSubpixelAAEnabled){const Ne=ke/Ce;de=!0,L.save(),L.scale(Ne,1),Re/=Ne}else ke!==Ce&&(Re+=(ke-Ce)/2e3*Z/I)}if(this.contentVisible&&(le.isInFont||ee.missingFile)){if(R&&!be)L.fillText(ge,Re,Pe);else if(this.paintChar(ge,Re,Pe,G),be){const Ce=Re+Z*be.offset.x/I,Ne=Pe-Z*be.offset.y/I;this.paintChar(be.fontChar,Ce,Ne,G)}}let ye;M?ye=ke*x-he*F:ye=ke*x+he*F,se+=ye,de&&L.restore()}M?$.y-=se:$.x+=se*K,L.restore(),this.compose()}showType3Text(U){const $=this.ctx,ee=this.current,Z=ee.font,L=ee.fontSize,I=ee.fontDirection,k=Z.vertical?1:-1,B=ee.charSpacing,F=ee.wordSpacing,K=ee.textHScale*I,te=ee.fontMatrix||i.FONT_IDENTITY_MATRIX,M=U.length,ne=ee.textRenderingMode===i.TextRenderingMode.INVISIBLE;let D,x,R,G;if(!(ne||L===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,$.save(),$.transform(...ee.textMatrix),$.translate(ee.x,ee.y),$.scale(K,I),D=0;D<M;++D){if(x=U[D],typeof x=="number"){G=k*x*L/1e3,this.ctx.translate(G,0),ee.x+=G*K;continue}const ie=(x.isSpace?F:0)+B,ae=Z.charProcOperatorList[x.operatorListId];if(!ae){(0,i.warn)(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),$.scale(L,L),$.transform(...te),this.executeOperatorList(ae),this.restore()),R=i.Util.applyTransform([x.width,0],te)[0]*L+ie,$.translate(R,0),ee.x+=R*K}$.restore(),this.processingType3=null}}setCharWidth(U,$){}setCharWidthAndBounds(U,$,ee,Z,L,I){this.ctx.rect(ee,Z,L-ee,I-Z),this.ctx.clip(),this.endPath()}getColorN_Pattern(U){let $;if(U[0]==="TilingPattern"){const ee=U[1],Z=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),L={createCanvasGraphics:I=>new Q(I,this.commonObjs,this.objs,this.canvasFactory)};$=new s.TilingPattern(U,ee,this.ctx,L,Z)}else $=this._getPattern(U[1],U[2]);return $}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(U,$,ee){var L;const Z=((L=this.selectColor)==null?void 0:L.call(this,U,$,ee))||i.Util.makeHexColor(U,$,ee);this.ctx.strokeStyle=Z,this.current.strokeColor=Z}setFillRGBColor(U,$,ee){var L;const Z=((L=this.selectColor)==null?void 0:L.call(this,U,$,ee))||i.Util.makeHexColor(U,$,ee);this.ctx.fillStyle=Z,this.current.fillColor=Z,this.current.patternFill=!1}_getPattern(U,$=null){let ee;return this.cachedPatterns.has(U)?ee=this.cachedPatterns.get(U):(ee=(0,s.getShadingPattern)(this.objs.get(U)),this.cachedPatterns.set(U,ee)),$&&(ee.matrix=$),ee}shadingFill(U){if(!this.contentVisible)return;const $=this.ctx;this.save();const ee=this._getPattern(U);$.fillStyle=ee.getPattern($,this,(0,n.getCurrentTransformInverse)($),s.PathType.SHADING);const Z=(0,n.getCurrentTransformInverse)($);if(Z){const L=$.canvas,I=L.width,k=L.height,B=i.Util.applyTransform([0,0],Z),F=i.Util.applyTransform([0,k],Z),K=i.Util.applyTransform([I,0],Z),te=i.Util.applyTransform([I,k],Z),M=Math.min(B[0],F[0],K[0],te[0]),ne=Math.min(B[1],F[1],K[1],te[1]),D=Math.max(B[0],F[0],K[0],te[0]),x=Math.max(B[1],F[1],K[1],te[1]);this.ctx.fillRect(M,ne,D-M,x-ne)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(U,$){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(U)&&U.length===6&&this.transform(...U),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),$)){const ee=$[2]-$[0],Z=$[3]-$[1];this.ctx.rect($[0],$[1],ee,Z),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),$),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(U){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const $=this.ctx;U.isolated||(0,i.info)("TODO: Support non-isolated groups."),U.knockout&&(0,i.warn)("Knockout groups not supported.");const ee=(0,n.getCurrentTransform)($);if(U.matrix&&$.transform(...U.matrix),!U.bbox)throw new Error("Bounding box is required.");let Z=i.Util.getAxialAlignedBoundingBox(U.bbox,(0,n.getCurrentTransform)($));const L=[0,0,$.canvas.width,$.canvas.height];Z=i.Util.intersect(Z,L)||[0,0,0,0];const I=Math.floor(Z[0]),k=Math.floor(Z[1]);let B=Math.max(Math.ceil(Z[2])-I,1),F=Math.max(Math.ceil(Z[3])-k,1),K=1,te=1;B>y&&(K=B/y,B=y),F>y&&(te=F/y,F=y),this.current.startNewPathAndClipBox([0,0,B,F]);let M="groupAt"+this.groupLevel;U.smask&&(M+="_smask_"+this.smaskCounter++%2);const ne=this.cachedCanvases.getCanvas(M,B,F),D=ne.context;D.scale(1/K,1/te),D.translate(-I,-k),D.transform(...ee),U.smask?this.smaskStack.push({canvas:ne.canvas,context:D,offsetX:I,offsetY:k,scaleX:K,scaleY:te,subtype:U.smask.subtype,backdrop:U.smask.backdrop,transferMap:U.smask.transferMap||null,startTransformInverse:null}):($.setTransform(1,0,0,1,0,0),$.translate(I,k),$.scale(K,te),$.save()),S($,D),this.ctx=D,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push($),this.groupLevel++}endGroup(U){if(!this.contentVisible)return;this.groupLevel--;const $=this.ctx,ee=this.groupStack.pop();if(this.ctx=ee,this.ctx.imageSmoothingEnabled=!1,U.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Z=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Z);const L=i.Util.getAxialAlignedBoundingBox([0,0,$.canvas.width,$.canvas.height],Z);this.ctx.drawImage($.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(U,$,ee,Z,L){if(ve(this,X,zt).call(this),E(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray($)&&$.length===4){const I=$[2]-$[0],k=$[3]-$[1];if(L&&this.annotationCanvasMap){ee=ee.slice(),ee[4]-=$[0],ee[5]-=$[1],$=$.slice(),$[0]=$[1]=0,$[2]=I,$[3]=k;const[B,F]=i.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:K}=this,te=Math.ceil(I*this.outputScaleX*K),M=Math.ceil(k*this.outputScaleY*K);this.annotationCanvas=this.canvasFactory.create(te,M);const{canvas:ne,context:D}=this.annotationCanvas;this.annotationCanvasMap.set(U,ne),this.annotationCanvas.savedCtx=this.ctx,this.ctx=D,this.ctx.setTransform(B,0,0,-F,0,k*F),E(this.ctx,this.foregroundColor)}else E(this.ctx,this.foregroundColor),this.ctx.rect($[0],$[1],I,k),this.ctx.clip(),this.endPath()}this.current=new c(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...ee),this.transform(...Z)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(U){if(!this.contentVisible)return;const $=U.count;U=this.getObject(U.data,U),U.count=$;const ee=this.ctx,Z=this.processingType3;if(Z&&(Z.compiled===void 0&&(Z.compiled=d(U)),Z.compiled)){Z.compiled(ee);return}const L=this._createMaskCanvas(U),I=L.canvas;ee.save(),ee.setTransform(1,0,0,1,0,0),ee.drawImage(I,L.offsetX,L.offsetY),ee.restore(),this.compose()}paintImageMaskXObjectRepeat(U,$,ee=0,Z=0,L,I){if(!this.contentVisible)return;U=this.getObject(U.data,U);const k=this.ctx;k.save();const B=(0,n.getCurrentTransform)(k);k.transform($,ee,Z,L,0,0);const F=this._createMaskCanvas(U);k.setTransform(1,0,0,1,0,0);for(let K=0,te=I.length;K<te;K+=2){const M=i.Util.transform(B,[$,ee,Z,L,I[K],I[K+1]]),[ne,D]=i.Util.applyTransform([0,0],M);k.drawImage(F.canvas,ne,D)}k.restore(),this.compose()}paintImageMaskXObjectGroup(U){if(!this.contentVisible)return;const $=this.ctx,ee=this.current.fillColor,Z=this.current.patternFill;for(const L of U){const{data:I,width:k,height:B,transform:F}=L,K=this.cachedCanvases.getCanvas("maskCanvas",k,B),te=K.context;te.save();const M=this.getObject(I,L);m(te,M),te.globalCompositeOperation="source-in",te.fillStyle=Z?ee.getPattern(te,this,(0,n.getCurrentTransformInverse)($),s.PathType.FILL):ee,te.fillRect(0,0,k,B),te.restore(),$.save(),$.transform(...F),$.scale(1,-1),h($,K.canvas,0,0,k,B,0,-1,1,1),$.restore()}this.compose()}paintImageXObject(U){if(!this.contentVisible)return;const $=this.getObject(U);if(!$){(0,i.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject($)}paintImageXObjectRepeat(U,$,ee,Z){if(!this.contentVisible)return;const L=this.getObject(U);if(!L){(0,i.warn)("Dependent image isn't ready yet");return}const I=L.width,k=L.height,B=[];for(let F=0,K=Z.length;F<K;F+=2)B.push({transform:[$,0,0,ee,Z[F],Z[F+1]],x:0,y:0,w:I,h:k});this.paintInlineImageXObjectGroup(L,B)}paintInlineImageXObject(U){if(!this.contentVisible)return;const $=U.width,ee=U.height,Z=this.ctx;this.save(),Z.scale(1/$,-1/ee);let L;if(typeof HTMLElement=="function"&&U instanceof HTMLElement||!U.data)L=U;else{const F=this.cachedCanvases.getCanvas("inlineImage",$,ee),K=F.context;p(K,U,this.current.transferMaps),L=F.canvas}const I=this._scaleImage(L,(0,n.getCurrentTransformInverse)(Z));Z.imageSmoothingEnabled=q((0,n.getCurrentTransform)(Z),U.interpolate);const[k,B]=h(Z,I.img,0,0,I.paintWidth,I.paintHeight,0,-ee,$,ee);if(this.imageLayer){const[F,K]=i.Util.applyTransform([0,-ee],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:U,left:F,top:K,width:k,height:B})}this.compose(),this.restore()}paintInlineImageXObjectGroup(U,$){if(!this.contentVisible)return;const ee=this.ctx,Z=U.width,L=U.height,I=this.cachedCanvases.getCanvas("inlineImage",Z,L),k=I.context;p(k,U,this.current.transferMaps);for(const B of $){if(ee.save(),ee.transform(...B.transform),ee.scale(1,-1),h(ee,I.canvas,B.x,B.y,B.w,B.h,0,-1,1,1),this.imageLayer){const[F,K]=i.Util.applyTransform([B.x,B.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:U,left:F,top:K,width:Z,height:L})}ee.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(U){}markPointProps(U,$){}beginMarkedContent(U){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(U,$){U==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible($)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(U){const $=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(U);const ee=this.ctx;this.pendingClip&&($||(this.pendingClip===N?ee.clip("evenodd"):ee.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ee.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const U=(0,n.getCurrentTransform)(this.ctx);if(U[1]===0&&U[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(U[0]),Math.abs(U[3]));else{const $=Math.abs(U[0]*U[3]-U[2]*U[1]),ee=Math.hypot(U[0],U[2]),Z=Math.hypot(U[1],U[3]);this._cachedGetSinglePixelWidth=Math.max(ee,Z)/$}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:U}=this.current,$=(0,n.getCurrentTransform)(this.ctx);let ee,Z;if($[1]===0&&$[2]===0){const L=Math.abs($[0]),I=Math.abs($[3]);if(U===0)ee=1/L,Z=1/I;else{const k=L*U,B=I*U;ee=k<1?1/k:1,Z=B<1?1/B:1}}else{const L=Math.abs($[0]*$[3]-$[2]*$[1]),I=Math.hypot($[0],$[1]),k=Math.hypot($[2],$[3]);if(U===0)ee=k/L,Z=I/L;else{const B=U*L;ee=k>B?k/B:1,Z=I>B?I/B:1}}this._cachedScaleForStroking=[ee,Z]}return this._cachedScaleForStroking}rescaleAndStroke(U){const{ctx:$}=this,{lineWidth:ee}=this.current,[Z,L]=this.getScaleForStroking();if($.lineWidth=ee||1,Z===1&&L===1){$.stroke();return}let I,k,B;U&&(I=(0,n.getCurrentTransform)($),k=$.getLineDash().slice(),B=$.lineDashOffset),$.scale(Z,L);const F=Math.max(Z,L);$.setLineDash($.getLineDash().map(K=>K/F)),$.lineDashOffset/=F,$.stroke(),U&&($.setTransform(...I),$.setLineDash(k),$.lineDashOffset=B)}isContentVisible(){for(let U=this.markedContentStack.length-1;U>=0;U--)if(!this.markedContentStack[U].visible)return!1;return!0}};X=new WeakSet,zt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let Y=Q;e.CanvasGraphics=Y;for(const W in i.OPS)Y.prototype[W]!==void 0&&(Y.prototype[i.OPS[W]]=Y.prototype[W])},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=b;var n=r(1),i=r(8),s=r(3);const f={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=f;function a(h,d){if(!d||s.isNodeJS)return;const c=d[2]-d[0],p=d[3]-d[1],m=new Path2D;m.rect(d[0],d[1],c,p),h.clip(m)}class o{constructor(){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class u extends o{constructor(d){super(),this._type=d[1],this._bbox=d[2],this._colorStops=d[3],this._p0=d[4],this._p1=d[5],this._r0=d[6],this._r1=d[7],this.matrix=null}_createGradient(d){let c;this._type==="axial"?c=d.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(c=d.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const p of this._colorStops)c.addColorStop(p[0],p[1]);return c}getPattern(d,c,p,m){let S;if(m===f.STROKE||m===f.FILL){const E=c.current.getClippedPathBoundingBox(m,(0,i.getCurrentTransform)(d))||[0,0,0,0],T=Math.ceil(E[2]-E[0])||1,A=Math.ceil(E[3]-E[1])||1,P=c.cachedCanvases.getCanvas("pattern",T,A,!0),H=P.context;H.clearRect(0,0,H.canvas.width,H.canvas.height),H.beginPath(),H.rect(0,0,H.canvas.width,H.canvas.height),H.translate(-E[0],-E[1]),p=n.Util.transform(p,[1,0,0,1,E[0],E[1]]),H.transform(...c.baseTransform),this.matrix&&H.transform(...this.matrix),a(H,this._bbox),H.fillStyle=this._createGradient(H),H.fill(),S=d.createPattern(P.canvas,"no-repeat");const O=new DOMMatrix(p);try{S.setTransform(O)}catch(q){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${q==null?void 0:q.message}".`)}}else a(d,this._bbox),S=this._createGradient(d);return S}}function y(h,d,c,p,m,S,E,T){const A=d.coords,P=d.colors,H=h.data,O=h.width*4;let q;A[c+1]>A[p+1]&&(q=c,c=p,p=q,q=S,S=E,E=q),A[p+1]>A[m+1]&&(q=p,p=m,m=q,q=E,E=T,T=q),A[c+1]>A[p+1]&&(q=c,c=p,p=q,q=S,S=E,E=q);const C=(A[c]+d.offsetX)*d.scaleX,j=(A[c+1]+d.offsetY)*d.scaleY,V=(A[p]+d.offsetX)*d.scaleX,N=(A[p+1]+d.offsetY)*d.scaleY,Y=(A[m]+d.offsetX)*d.scaleX,X=(A[m+1]+d.offsetY)*d.scaleY;if(j>=X)return;const J=P[S],Q=P[S+1],W=P[S+2],U=P[E],$=P[E+1],ee=P[E+2],Z=P[T],L=P[T+1],I=P[T+2],k=Math.round(j),B=Math.round(X);let F,K,te,M,ne,D,x,R;for(let G=k;G<=B;G++){if(G<N){let le;G<j?le=0:le=(j-G)/(j-N),F=C-(C-V)*le,K=J-(J-U)*le,te=Q-(Q-$)*le,M=W-(W-ee)*le}else{let le;G>X?le=1:N===X?le=0:le=(N-G)/(N-X),F=V-(V-Y)*le,K=U-(U-Z)*le,te=$-($-L)*le,M=ee-(ee-I)*le}let ie;G<j?ie=0:G>X?ie=1:ie=(j-G)/(j-X),ne=C-(C-Y)*ie,D=J-(J-Z)*ie,x=Q-(Q-L)*ie,R=W-(W-I)*ie;const ae=Math.round(Math.min(F,ne)),se=Math.round(Math.max(F,ne));let ue=O*G+ae*4;for(let le=ae;le<=se;le++)ie=(F-le)/(F-ne),ie<0?ie=0:ie>1&&(ie=1),H[ue++]=K-(K-D)*ie|0,H[ue++]=te-(te-x)*ie|0,H[ue++]=M-(M-R)*ie|0,H[ue++]=255}}function w(h,d,c){const p=d.coords,m=d.colors;let S,E;switch(d.type){case"lattice":const T=d.verticesPerRow,A=Math.floor(p.length/T)-1,P=T-1;for(S=0;S<A;S++){let H=S*T;for(let O=0;O<P;O++,H++)y(h,c,p[H],p[H+1],p[H+T],m[H],m[H+1],m[H+T]),y(h,c,p[H+T+1],p[H+1],p[H+T],m[H+T+1],m[H+1],m[H+T])}break;case"triangles":for(S=0,E=p.length;S<E;S+=3)y(h,c,p[S],p[S+1],p[S+2],m[S],m[S+1],m[S+2]);break;default:throw new Error("illegal figure")}}class v extends o{constructor(d){super(),this._coords=d[2],this._colors=d[3],this._figures=d[4],this._bounds=d[5],this._bbox=d[7],this._background=d[8],this.matrix=null}_createMeshCanvas(d,c,p){const T=Math.floor(this._bounds[0]),A=Math.floor(this._bounds[1]),P=Math.ceil(this._bounds[2])-T,H=Math.ceil(this._bounds[3])-A,O=Math.min(Math.ceil(Math.abs(P*d[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(H*d[1]*1.1)),3e3),C=P/O,j=H/q,V={coords:this._coords,colors:this._colors,offsetX:-T,offsetY:-A,scaleX:1/C,scaleY:1/j},N=O+2*2,Y=q+2*2,X=p.getCanvas("mesh",N,Y,!1),J=X.context,Q=J.createImageData(O,q);if(c){const U=Q.data;for(let $=0,ee=U.length;$<ee;$+=4)U[$]=c[0],U[$+1]=c[1],U[$+2]=c[2],U[$+3]=255}for(const U of this._figures)w(Q,U,V);return J.putImageData(Q,2,2),{canvas:X.canvas,offsetX:T-2*C,offsetY:A-2*j,scaleX:C,scaleY:j}}getPattern(d,c,p,m){a(d,this._bbox);let S;if(m===f.SHADING)S=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(d));else if(S=n.Util.singularValueDecompose2dScale(c.baseTransform),this.matrix){const T=n.Util.singularValueDecompose2dScale(this.matrix);S=[S[0]*T[0],S[1]*T[1]]}const E=this._createMeshCanvas(S,m===f.SHADING?null:this._background,c.cachedCanvases);return m!==f.SHADING&&(d.setTransform(...c.baseTransform),this.matrix&&d.transform(...this.matrix)),d.translate(E.offsetX,E.offsetY),d.scale(E.scaleX,E.scaleY),d.createPattern(E.canvas,"no-repeat")}}class g extends o{getPattern(){return"hotpink"}}function b(h){switch(h[0]){case"RadialAxial":return new u(h);case"Mesh":return new v(h);case"Dummy":return new g}throw new Error(`Unknown IR type: ${h[0]}`)}const l={COLORED:1,UNCOLORED:2};class _{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(d,c,p,m,S){this.operatorList=d[2],this.matrix=d[3]||[1,0,0,1,0,0],this.bbox=d[4],this.xstep=d[5],this.ystep=d[6],this.paintType=d[7],this.tilingType=d[8],this.color=c,this.ctx=p,this.canvasGraphicsFactory=m,this.baseTransform=S}createPatternCanvas(d){const c=this.operatorList,p=this.bbox,m=this.xstep,S=this.ystep,E=this.paintType,T=this.tilingType,A=this.color,P=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+T);const H=p[0],O=p[1],q=p[2],C=p[3],j=n.Util.singularValueDecompose2dScale(this.matrix),V=n.Util.singularValueDecompose2dScale(this.baseTransform),N=[j[0]*V[0],j[1]*V[1]],Y=this.getSizeAndScale(m,this.ctx.canvas.width,N[0]),X=this.getSizeAndScale(S,this.ctx.canvas.height,N[1]),J=d.cachedCanvases.getCanvas("pattern",Y.size,X.size,!0),Q=J.context,W=P.createCanvasGraphics(Q);W.groupLevel=d.groupLevel,this.setFillAndStrokeStyleToContext(W,E,A);let U=H,$=O,ee=q,Z=C;return H<0&&(U=0,ee+=Math.abs(H)),O<0&&($=0,Z+=Math.abs(O)),Q.translate(-(Y.scale*U),-(X.scale*$)),W.transform(Y.scale,0,0,X.scale,0,0),Q.save(),this.clipBbox(W,U,$,ee,Z),W.baseTransform=(0,i.getCurrentTransform)(W.ctx),W.executeOperatorList(c),W.endDrawing(),{canvas:J.canvas,scaleX:Y.scale,scaleY:X.scale,offsetX:U,offsetY:$}}getSizeAndScale(d,c,p){d=Math.abs(d);const m=Math.max(_.MAX_PATTERN_SIZE,c);let S=Math.ceil(d*p);return S>=m?S=m:p=S/d,{scale:p,size:S}}clipBbox(d,c,p,m,S){const E=m-c,T=S-p;d.ctx.rect(c,p,E,T),d.current.updateRectMinMax((0,i.getCurrentTransform)(d.ctx),[c,p,m,S]),d.clip(),d.endPath()}setFillAndStrokeStyleToContext(d,c,p){const m=d.ctx,S=d.current;switch(c){case l.COLORED:const E=this.ctx;m.fillStyle=E.fillStyle,m.strokeStyle=E.strokeStyle,S.fillColor=E.fillStyle,S.strokeColor=E.strokeStyle;break;case l.UNCOLORED:const T=n.Util.makeHexColor(p[0],p[1],p[2]);m.fillStyle=T,m.strokeStyle=T,S.fillColor=T,S.strokeColor=T;break;default:throw new n.FormatError(`Unsupported paint type: ${c}`)}}getPattern(d,c,p,m){let S=p;m!==f.SHADING&&(S=n.Util.transform(S,c.baseTransform),this.matrix&&(S=n.Util.transform(S,this.matrix)));const E=this.createPatternCanvas(c);let T=new DOMMatrix(S);T=T.translate(E.offsetX,E.offsetY),T=T.scale(1/E.scaleX,1/E.scaleY);const A=d.createPattern(E.canvas,"repeat");try{A.setTransform(T)}catch(P){(0,n.warn)(`TilingPattern.getPattern: "${P==null?void 0:P.message}".`)}return A}}e.TilingPattern=_},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.applyMaskImageData=i;var n=r(1);function i({src:s,srcPos:f=0,dest:a,destPos:o=0,width:u,height:y,inverseDecode:w=!1}){const v=n.FeatureTest.isLittleEndian?4278190080:255,[g,b]=w?[0,v]:[v,0],l=u>>3,_=u&7,h=s.length;a=new Uint32Array(a.buffer);for(let d=0;d<y;d++){for(const p=f+l;f<p;f++){const m=f<h?s[f]:255;a[o++]=m&128?b:g,a[o++]=m&64?b:g,a[o++]=m&32?b:g,a[o++]=m&16?b:g,a[o++]=m&8?b:g,a[o++]=m&4?b:g,a[o++]=m&2?b:g,a[o++]=m&1?b:g}if(_===0)continue;const c=f<h?s[f++]:255;for(let p=0;p<_;p++)a[o++]=c&1<<7-p?b:g}return{srcPos:f,destPos:o}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const r=Object.create(null);e.GlobalWorkerOptions=r,r.workerPort=r.workerPort===void 0?null:r.workerPort,r.workerSrc=r.workerSrc===void 0?"":r.workerSrc},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var n=r(1);const i={DATA:1,ERROR:2},s={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f(o){switch(o instanceof Error||typeof o=="object"&&o!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new n.AbortException(o.message);case"MissingPDFException":return new n.MissingPDFException(o.message);case"PasswordException":return new n.PasswordException(o.message,o.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(o.message,o.status);case"UnknownErrorException":return new n.UnknownErrorException(o.message,o.details);default:return new n.UnknownErrorException(o.message,o.toString())}}class a{constructor(u,y,w){this.sourceName=u,this.targetName=y,this.comObj=w,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=v=>{const g=v.data;if(g.targetName!==this.sourceName)return;if(g.stream){this._processStreamMessage(g);return}if(g.callback){const l=g.callbackId,_=this.callbackCapabilities[l];if(!_)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],g.callback===i.DATA)_.resolve(g.data);else if(g.callback===i.ERROR)_.reject(f(g.reason));else throw new Error("Unexpected callback case");return}const b=this.actionHandler[g.action];if(!b)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const l=this.sourceName,_=g.sourceName;new Promise(function(h){h(b(g.data))}).then(function(h){w.postMessage({sourceName:l,targetName:_,callback:i.DATA,callbackId:g.callbackId,data:h})},function(h){w.postMessage({sourceName:l,targetName:_,callback:i.ERROR,callbackId:g.callbackId,reason:f(h)})});return}if(g.streamId){this._createStreamSink(g);return}b(g.data)},w.addEventListener("message",this._onComObjOnMessage)}on(u,y){const w=this.actionHandler;if(w[u])throw new Error(`There is already an actionName called "${u}"`);w[u]=y}send(u,y,w){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:y},w)}sendWithPromise(u,y,w){const v=this.callbackId++,g=(0,n.createPromiseCapability)();this.callbackCapabilities[v]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:v,data:y},w)}catch(b){g.reject(b)}return g.promise}sendWithStream(u,y,w,v){const g=this.streamId++,b=this.sourceName,l=this.targetName,_=this.comObj;return new ReadableStream({start:h=>{const d=(0,n.createPromiseCapability)();return this.streamControllers[g]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:b,targetName:l,action:u,streamId:g,data:y,desiredSize:h.desiredSize},v),d.promise},pull:h=>{const d=(0,n.createPromiseCapability)();return this.streamControllers[g].pullCall=d,_.postMessage({sourceName:b,targetName:l,stream:s.PULL,streamId:g,desiredSize:h.desiredSize}),d.promise},cancel:h=>{(0,n.assert)(h instanceof Error,"cancel must have a valid reason");const d=(0,n.createPromiseCapability)();return this.streamControllers[g].cancelCall=d,this.streamControllers[g].isClosed=!0,_.postMessage({sourceName:b,targetName:l,stream:s.CANCEL,streamId:g,reason:f(h)}),d.promise}},w)}_createStreamSink(u){const y=u.streamId,w=this.sourceName,v=u.sourceName,g=this.comObj,b=this,l=this.actionHandler[u.action],_={enqueue(h,d=1,c){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),g.postMessage({sourceName:w,targetName:v,stream:s.ENQUEUE,streamId:y,chunk:h},c)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:w,targetName:v,stream:s.CLOSE,streamId:y}),delete b.streamSinks[y])},error(h){(0,n.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:w,targetName:v,stream:s.ERROR,streamId:y,reason:f(h)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[y]=_,new Promise(function(h){h(l(u.data,_))}).then(function(){g.postMessage({sourceName:w,targetName:v,stream:s.START_COMPLETE,streamId:y,success:!0})},function(h){g.postMessage({sourceName:w,targetName:v,stream:s.START_COMPLETE,streamId:y,reason:f(h)})})}_processStreamMessage(u){const y=u.streamId,w=this.sourceName,v=u.sourceName,g=this.comObj,b=this.streamControllers[y],l=this.streamSinks[y];switch(u.stream){case s.START_COMPLETE:u.success?b.startCall.resolve():b.startCall.reject(f(u.reason));break;case s.PULL_COMPLETE:u.success?b.pullCall.resolve():b.pullCall.reject(f(u.reason));break;case s.PULL:if(!l){g.postMessage({sourceName:w,targetName:v,stream:s.PULL_COMPLETE,streamId:y,success:!0});break}l.desiredSize<=0&&u.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=u.desiredSize,new Promise(function(_){_(l.onPull&&l.onPull())}).then(function(){g.postMessage({sourceName:w,targetName:v,stream:s.PULL_COMPLETE,streamId:y,success:!0})},function(_){g.postMessage({sourceName:w,targetName:v,stream:s.PULL_COMPLETE,streamId:y,reason:f(_)})});break;case s.ENQUEUE:if((0,n.assert)(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(u.chunk);break;case s.CLOSE:if((0,n.assert)(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),this._deleteStreamController(b,y);break;case s.ERROR:(0,n.assert)(b,"error should have stream controller"),b.controller.error(f(u.reason)),this._deleteStreamController(b,y);break;case s.CANCEL_COMPLETE:u.success?b.cancelCall.resolve():b.cancelCall.reject(f(u.reason)),this._deleteStreamController(b,y);break;case s.CANCEL:if(!l)break;new Promise(function(_){_(l.onCancel&&l.onCancel(f(u.reason)))}).then(function(){g.postMessage({sourceName:w,targetName:v,stream:s.CANCEL_COMPLETE,streamId:y,success:!0})},function(_){g.postMessage({sourceName:w,targetName:v,stream:s.CANCEL_COMPLETE,streamId:y,reason:f(_)})}),l.sinkCapability.reject(f(u.reason)),l.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,y){await Promise.allSettled([u.startCall&&u.startCall.promise,u.pullCall&&u.pullCall.promise,u.cancelCall&&u.cancelCall.promise]),delete this.streamControllers[y]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=a},(t,e,r)=>{var s,f;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var n=r(1);class i{constructor({parsedData:o,rawData:u}){Se(this,s);Se(this,f);Ee(this,s,o),Ee(this,f,u)}getRaw(){return oe(this,f)}get(o){return oe(this,s).get(o)??null}getAll(){return(0,n.objectFromMap)(oe(this,s))}has(o){return oe(this,s).has(o)}}s=new WeakMap,f=new WeakMap,e.Metadata=i},(t,e,r)=>{var a,o,u,y,w,v,Vt;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var n=r(1);const i=Symbol("INTERNAL");class s{constructor(l,_){Se(this,a,!0);this.name=l,this.intent=_}get visible(){return oe(this,a)}_setVisible(l,_){l!==i&&(0,n.unreachable)("Internal method `_setVisible` called."),Ee(this,a,_)}}a=new WeakMap;class f{constructor(l){Se(this,v);Se(this,o,!0);Se(this,u,new Map);Se(this,y,null);Se(this,w,null);if(this.name=null,this.creator=null,l!==null){this.name=l.name,this.creator=l.creator,Ee(this,w,l.order);for(const _ of l.groups)oe(this,u).set(_.id,new s(_.name,_.intent));if(l.baseState==="OFF")for(const _ of oe(this,u).values())_._setVisible(i,!1);for(const _ of l.on)oe(this,u).get(_)._setVisible(i,!0);for(const _ of l.off)oe(this,u).get(_)._setVisible(i,!1);Ee(this,y,new Map);for(const[_,h]of oe(this,u))oe(this,y).set(_,h.visible)}}isVisible(l){if(oe(this,u).size===0)return!0;if(!l)return(0,n.warn)("Optional content group not defined."),!0;if(l.type==="OCG")return oe(this,u).has(l.id)?oe(this,u).get(l.id).visible:((0,n.warn)(`Optional content group not found: ${l.id}`),!0);if(l.type==="OCMD"){if(l.expression)return ve(this,v,Vt).call(this,l.expression);if(!l.policy||l.policy==="AnyOn"){for(const _ of l.ids){if(!oe(this,u).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(oe(this,u).get(_).visible)return!0}return!1}else if(l.policy==="AllOn"){for(const _ of l.ids){if(!oe(this,u).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(!oe(this,u).get(_).visible)return!1}return!0}else if(l.policy==="AnyOff"){for(const _ of l.ids){if(!oe(this,u).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(!oe(this,u).get(_).visible)return!0}return!1}else if(l.policy==="AllOff"){for(const _ of l.ids){if(!oe(this,u).has(_))return(0,n.warn)(`Optional content group not found: ${_}`),!0;if(oe(this,u).get(_).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${l.policy}.`),!0}return(0,n.warn)(`Unknown group type ${l.type}.`),!0}setVisibility(l,_=!0){if(!oe(this,u).has(l)){(0,n.warn)(`Optional content group not found: ${l}`);return}oe(this,u).get(l)._setVisible(i,!!_),Ee(this,o,null)}get hasInitialVisibility(){if(oe(this,o)!==null)return oe(this,o);for(const[l,_]of oe(this,u)){const h=oe(this,y).get(l);if(_.visible!==h)return Ee(this,o,!1)}return Ee(this,o,!0)}getOrder(){return oe(this,u).size?oe(this,w)?oe(this,w).slice():[...oe(this,u).keys()]:null}getGroups(){return oe(this,u).size>0?(0,n.objectFromMap)(oe(this,u)):null}getGroup(l){return oe(this,u).get(l)||null}}o=new WeakMap,u=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakSet,Vt=function(l){const _=l.length;if(_<2)return!0;const h=l[0];for(let d=1;d<_;d++){const c=l[d];let p;if(Array.isArray(c))p=ve(this,v,Vt).call(this,c);else if(oe(this,u).has(c))p=oe(this,u).get(c).visible;else return(0,n.warn)(`Optional content group not found: ${c}`),!0;switch(h){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return h==="And"},e.OptionalContentConfig=f},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var n=r(1),i=r(8);class s{constructor(u,y){(0,n.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=u.progressiveDone||!1,this._contentDispositionFilename=u.contentDispositionFilename||null;const w=u.initialData;if((w==null?void 0:w.length)>0){const v=new Uint8Array(w).buffer;this._queuedChunks.push(v)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._contentLength=u.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((v,g)=>{this._onReceiveData({begin:v,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((v,g)=>{this._onProgress({loaded:v,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(v=>{this._onReceiveData({chunk:v})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){const y=new Uint8Array(u.chunk).buffer;if(u.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(y):this._queuedChunks.push(y);else{const w=this._rangeReaders.some(function(v){return v._begin!==u.begin?!1:(v._enqueue(y),!0)});(0,n.assert)(w,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u;return((u=this._fullRequestReader)==null?void 0:u._loaded)??0}_onProgress(u){if(u.total===void 0){const y=this._rangeReaders[0];y!=null&&y.onProgress&&y.onProgress({loaded:u.loaded})}else{const y=this._fullRequestReader;y!=null&&y.onProgress&&y.onProgress({loaded:u.loaded,total:u.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const y=this._rangeReaders.indexOf(u);y>=0&&this._rangeReaders.splice(y,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new f(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,y){if(y<=this._progressiveDataLength)return null;const w=new a(this,u,y);return this._pdfDataRangeTransport.requestDataRange(u,y),this._rangeReaders.push(w),w}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);for(const y of this._rangeReaders.slice(0))y.cancel(u);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=s;class f{constructor(u,y,w=!1,v=null){this._stream=u,this._done=w||!1,this._filename=(0,i.isPdfFile)(v)?v:null,this._queuedChunks=y||[],this._loaded=0;for(const g of this._queuedChunks)this._loaded+=g.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a{constructor(u,y,w){this._stream=u,this._begin=y,this._end=w,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const w of this._requests)w.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,n.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class r{static textContent(i){const s=[],f={items:s,styles:Object.create(null)};function a(o){var w;if(!o)return;let u=null;const y=o.name;if(y==="#text")u=o.value;else if(r.shouldBuildText(y))(w=o==null?void 0:o.attributes)!=null&&w.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&s.push({str:u}),!!o.children)for(const v of o.children)a(v)}return a(i),f}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}e.XfaText=r},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var n=r(9);const i=function(o){return new Promise((u,y)=>{require$$5.readFile(o,(v,g)=>{if(v||!g){y(new Error(v));return}u(new Uint8Array(g))})})};class s extends n.BaseCanvasFactory{_createCanvas(u,y){return require$$5.createCanvas(u,y)}}e.NodeCanvasFactory=s;class f extends n.BaseCMapReaderFactory{_fetchData(u,y){return i(u).then(w=>({cMapData:w,compressionType:y}))}}e.NodeCMapReaderFactory=f;class a extends n.BaseStandardFontDataFactory{_fetchData(u){return i(u)}}e.NodeStandardFontDataFactory=a},(t,e,r)=>{var o,u,y,w,v,g,b,l,_,Gt,yr,Ht,vr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var n=r(7),i=r(1),s=r(23),f=r(24);const m=class m{constructor(E){Se(this,_);Se(this,o);Se(this,u,!1);Se(this,y,this.pointerup.bind(this));Se(this,w,this.pointerdown.bind(this));Se(this,v,new Map);Se(this,g,!1);Se(this,b,!1);Se(this,l);m._initialized||(m._initialized=!0,s.FreeTextEditor.initialize(E.l10n),f.InkEditor.initialize(E.l10n),E.uiManager.registerEditorTypes([s.FreeTextEditor,f.InkEditor])),Ee(this,l,E.uiManager),this.annotationStorage=E.annotationStorage,this.pageIndex=E.pageIndex,this.div=E.div,Ee(this,o,E.accessibilityManager),oe(this,l).addLayer(this)}updateToolbar(E){oe(this,l).updateToolbar(E)}updateMode(E=oe(this,l).getMode()){ve(this,_,vr).call(this),E===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),oe(this,l).unselectAll()}addInkEditorIfNeeded(E){if(!E&&oe(this,l).getMode()!==i.AnnotationEditorType.INK)return;if(!E){for(const A of oe(this,v).values())if(A.isEmpty()){A.setInBackground();return}}ve(this,_,Ht).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(E){oe(this,l).setEditingState(E)}addCommands(E){oe(this,l).addCommands(E)}enable(){this.div.style.pointerEvents="auto";for(const E of oe(this,v).values())E.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const E of oe(this,v).values())E.disableEditing()}setActiveEditor(E){oe(this,l).getActive()!==E&&oe(this,l).setActiveEditor(E)}enableClick(){this.div.addEventListener("pointerdown",oe(this,w)),this.div.addEventListener("pointerup",oe(this,y))}disableClick(){this.div.removeEventListener("pointerdown",oe(this,w)),this.div.removeEventListener("pointerup",oe(this,y))}attach(E){oe(this,v).set(E.id,E)}detach(E){var T;oe(this,v).delete(E.id),(T=oe(this,o))==null||T.removePointerInTextLayer(E.contentDiv)}remove(E){oe(this,l).removeEditor(E),this.detach(E),this.annotationStorage.remove(E.id),E.div.style.display="none",setTimeout(()=>{E.div.style.display="",E.div.remove(),E.isAttachedToDOM=!1,document.activeElement===document.body&&oe(this,l).focusMainContainer()},0),oe(this,b)||this.addInkEditorIfNeeded(!1)}add(E){if(ve(this,_,Gt).call(this,E),oe(this,l).addEditor(E),this.attach(E),!E.isAttachedToDOM){const T=E.render();this.div.append(T),E.isAttachedToDOM=!0}this.moveEditorInDOM(E),E.onceAdded(),this.addToAnnotationStorage(E)}moveEditorInDOM(E){var T;(T=oe(this,o))==null||T.moveElementInDOM(this.div,E.div,E.contentDiv,!0)}addToAnnotationStorage(E){!E.isEmpty()&&!this.annotationStorage.has(E.id)&&this.annotationStorage.setValue(E.id,E)}addOrRebuild(E){E.needsToBeRebuilt()?E.rebuild():this.add(E)}addANewEditor(E){const T=()=>{this.addOrRebuild(E)},A=()=>{E.remove()};this.addCommands({cmd:T,undo:A,mustExec:!0})}addUndoableEditor(E){const T=()=>{this.addOrRebuild(E)},A=()=>{E.remove()};this.addCommands({cmd:T,undo:A,mustExec:!1})}getNextId(){return oe(this,l).getId()}deserialize(E){switch(E.annotationType){case i.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(E,this);case i.AnnotationEditorType.INK:return f.InkEditor.deserialize(E,this)}return null}setSelected(E){oe(this,l).setSelected(E)}toggleSelected(E){oe(this,l).toggleSelected(E)}isSelected(E){return oe(this,l).isSelected(E)}unselect(E){oe(this,l).unselect(E)}pointerup(E){const T=n.KeyboardManager.platform.isMac;if(!(E.button!==0||E.ctrlKey&&T)&&E.target===this.div&&oe(this,g)){if(Ee(this,g,!1),!oe(this,u)){Ee(this,u,!0);return}ve(this,_,Ht).call(this,E)}}pointerdown(E){const T=n.KeyboardManager.platform.isMac;if(E.button!==0||E.ctrlKey&&T||E.target!==this.div)return;Ee(this,g,!0);const A=oe(this,l).getActive();Ee(this,u,!A||A.isEmpty())}drop(E){const T=E.dataTransfer.getData("text/plain"),A=oe(this,l).getEditor(T);if(!A)return;E.preventDefault(),E.dataTransfer.dropEffect="move",ve(this,_,Gt).call(this,A);const P=this.div.getBoundingClientRect(),H=E.clientX-P.x,O=E.clientY-P.y;A.translate(H-A.startX,O-A.startY),this.moveEditorInDOM(A),A.div.focus()}dragover(E){E.preventDefault()}destroy(){var E,T;((E=oe(this,l).getActive())==null?void 0:E.parent)===this&&oe(this,l).setActiveEditor(null);for(const A of oe(this,v).values())(T=oe(this,o))==null||T.removePointerInTextLayer(A.contentDiv),A.isAttachedToDOM=!1,A.div.remove(),A.parent=null;this.div=null,oe(this,v).clear(),oe(this,l).removeLayer(this)}render(E){this.viewport=E.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const T of oe(this,l).getEditors(this.pageIndex))this.add(T);this.updateMode()}update(E){this.viewport=E.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[E,T,A,P]=this.viewport.viewBox,H=A-E,O=P-T;return[H,O]}get viewportBaseDimensions(){const{width:E,height:T,rotation:A}=this.viewport;return A%180===0?[E,T]:[T,E]}setDimensions(){const{width:E,height:T,rotation:A}=this.viewport,P=A%180!==0,H=Math.floor(E)+"px",O=Math.floor(T)+"px";this.div.style.width=P?O:H,this.div.style.height=P?H:O,this.div.setAttribute("data-main-rotation",A)}};o=new WeakMap,u=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,l=new WeakMap,_=new WeakSet,Gt=function(E){var T;E.parent!==this&&(this.attach(E),E.pageIndex=this.pageIndex,(T=E.parent)==null||T.detach(E),E.parent=this,E.div&&E.isAttachedToDOM&&(E.div.remove(),this.div.append(E.div)))},yr=function(E){switch(oe(this,l).getMode()){case i.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(E);case i.AnnotationEditorType.INK:return new f.InkEditor(E)}return null},Ht=function(E){const T=this.getNextId(),A=ve(this,_,yr).call(this,{parent:this,id:T,x:E.offsetX,y:E.offsetY});return A&&this.add(A),A},vr=function(){Ee(this,b,!0);for(const E of oe(this,v).values())E.isEmpty()&&E.remove();Ee(this,b,!1)},Ue(m,"_initialized",!1);let a=m;e.AnnotationEditorLayer=a},(t,e,r)=>{var a,o,u,y,w,v,g,b,br,_r,wr,Wt;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var n=r(1),i=r(7),s=r(6);const c=class c extends s.AnnotationEditor{constructor(S){super({...S,name:"freeTextEditor"});Se(this,b);Se(this,a,this.editorDivBlur.bind(this));Se(this,o,this.editorDivFocus.bind(this));Se(this,u,this.editorDivKeydown.bind(this));Se(this,y);Se(this,w,"");Se(this,v,!1);Se(this,g);Ee(this,y,S.color||c._defaultColor||s.AnnotationEditor._defaultLineColor),Ee(this,g,S.fontSize||c._defaultFontSize)}static initialize(S){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(T=>[T,S.get(T)]));const E=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(E.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,E){switch(S){case n.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=E;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=E;break}}updateParams(S,E){switch(S){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ve(this,b,br).call(this,E);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ve(this,b,_r).call(this,E);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,oe(this,g)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,oe(this,y)]]}getInitialTranslation(){return[-c._internalPadding*this.parent.scaleFactor,-(c._internalPadding+oe(this,g))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",oe(this,u)),this.editorDiv.addEventListener("focus",oe(this,o)),this.editorDiv.addEventListener("blur",oe(this,a)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",oe(this,u)),this.editorDiv.removeEventListener("focus",oe(this,o)),this.editorDiv.removeEventListener("blur",oe(this,a)),this.div.focus(),this.isEditing=!1)}focusin(S){super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),oe(this,v)||(Ee(this,v,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Ee(this,w,ve(this,b,wr).call(this).trimEnd()),ve(this,b,Wt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(S){this.enableEditMode(),this.editorDiv.focus()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(S){c._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,E;this.width&&(S=this.x,E=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),c._l10nPromise.get("editor_free_text_aria_label").then(A=>{var P;return(P=this.editorDiv)==null?void 0:P.setAttribute("aria-label",A)}),c._l10nPromise.get("free_text_default_content").then(A=>{var P;return(P=this.editorDiv)==null?void 0:P.setAttribute("default-content",A)}),this.editorDiv.contentEditable=!0;const{style:T}=this.editorDiv;if(T.fontSize=`calc(${oe(this,g)}px * var(--scale-factor))`,T.color=oe(this,y),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[A,P]=this.parent.viewportBaseDimensions;this.setAt(S*A,E*P,this.width*A,this.height*P);for(const H of oe(this,w).split(`
`)){const O=document.createElement("div");O.append(H?document.createTextNode(H):document.createElement("br")),this.editorDiv.append(O)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,E){const T=super.deserialize(S,E);return Ee(T,g,S.fontSize),Ee(T,y,n.Util.makeHexColor(...S.color)),Ee(T,w,S.value),T}serialize(){if(this.isEmpty())return null;const S=c._internalPadding*this.parent.scaleFactor,E=this.getRect(S,S),T=s.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:T,fontSize:oe(this,g),value:oe(this,w),pageIndex:this.parent.pageIndex,rect:E,rotation:this.rotation}}};a=new WeakMap,o=new WeakMap,u=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakSet,br=function(S){const E=A=>{this.editorDiv.style.fontSize=`calc(${A}px * var(--scale-factor))`,this.translate(0,-(A-oe(this,g))*this.parent.scaleFactor),Ee(this,g,A),ve(this,b,Wt).call(this)},T=oe(this,g);this.parent.addCommands({cmd:()=>{E(S)},undo:()=>{E(T)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_r=function(S){const E=oe(this,y);this.parent.addCommands({cmd:()=>{Ee(this,y,S),this.editorDiv.style.color=S},undo:()=>{Ee(this,y,E),this.editorDiv.style.color=E},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},wr=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const E=[];for(let T=0,A=S.length;T<A;T++){const H=S[T].firstChild;(H==null?void 0:H.nodeName)==="#text"?E.push(H.data):E.push("")}return E.join(`
`)},Wt=function(){const[S,E]=this.parent.viewportBaseDimensions,T=this.div.getBoundingClientRect();this.width=T.width/S,this.height=T.height/E},Ue(c,"_freeTextDefaultContent",""),Ue(c,"_l10nPromise"),Ue(c,"_internalPadding",0),Ue(c,"_defaultColor",null),Ue(c,"_defaultFontSize",10),Ue(c,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],c.prototype.commitOrRemove]])),Ue(c,"_type","freetext");let f=c;e.FreeTextEditor=f},(t,e,r)=>{var u,y,w,v,g,b,l,_,h,d,c,p,m,S,E,Sr,Er,Ar,Tr,Kt,Cr,xr,kr,ot,Zt,Ot,Dt,gt,Xt,Nt,U,Yt,Rr,Ir,Pr,Jt,Lt,yt,Qt;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0,Object.defineProperty(e,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var n=r(1),i=r(6),s=r(25),f=r(7);const a=16,K=class K extends i.AnnotationEditor{constructor(ne){super({...ne,name:"inkEditor"});Se(this,E);Se(this,u,0);Se(this,y,0);Se(this,w,0);Se(this,v,this.canvasPointermove.bind(this));Se(this,g,this.canvasPointerleave.bind(this));Se(this,b,this.canvasPointerup.bind(this));Se(this,l,this.canvasPointerdown.bind(this));Se(this,_,!1);Se(this,h,!1);Se(this,d,null);Se(this,c,null);Se(this,p,0);Se(this,m,0);Se(this,S,null);this.color=ne.color||null,this.thickness=ne.thickness||null,this.opacity=ne.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ne){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(D=>[D,ne.get(D)]))}static updateDefaultParams(ne,D){switch(ne){case n.AnnotationEditorParamsType.INK_THICKNESS:K._defaultThickness=D;break;case n.AnnotationEditorParamsType.INK_COLOR:K._defaultColor=D;break;case n.AnnotationEditorParamsType.INK_OPACITY:K._defaultOpacity=D/100;break}}updateParams(ne,D){switch(ne){case n.AnnotationEditorParamsType.INK_THICKNESS:ve(this,E,Sr).call(this,D);break;case n.AnnotationEditorParamsType.INK_COLOR:ve(this,E,Er).call(this,D);break;case n.AnnotationEditorParamsType.INK_OPACITY:ve(this,E,Ar).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,K._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,K._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(K._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||K._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||K._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??K._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ve(this,E,Ot).call(this),ve(this,E,Dt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ve(this,E,gt).call(this)),ve(this,E,yt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,oe(this,c).disconnect(),Ee(this,c,null),super.remove())}enableEditMode(){oe(this,_)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",oe(this,l)),this.canvas.addEventListener("pointerup",oe(this,b)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",oe(this,l)),this.canvas.removeEventListener("pointerup",oe(this,b)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){oe(this,_)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ee(this,_,!0),this.div.classList.add("disabled"),ve(this,E,yt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(ne){super.focusin(ne),this.enableEditMode()}canvasPointerdown(ne){ne.button!==0||!this.isInEditMode()||oe(this,_)||(this.setInForeground(),ne.type!=="mouse"&&this.div.focus(),ne.stopPropagation(),this.canvas.addEventListener("pointerleave",oe(this,g)),this.canvas.addEventListener("pointermove",oe(this,v)),ve(this,E,Cr).call(this,ne.offsetX,ne.offsetY))}canvasPointermove(ne){ne.stopPropagation(),ve(this,E,xr).call(this,ne.offsetX,ne.offsetY)}canvasPointerup(ne){ne.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ne.stopPropagation(),ve(this,E,Zt).call(this,ne),this.setInBackground())}canvasPointerleave(ne){ve(this,E,Zt).call(this,ne),this.setInBackground()}render(){if(this.div)return this.div;let ne,D;this.width&&(ne=this.x,D=this.y),super.render(),K._l10nPromise.get("editor_ink_aria_label").then(ae=>{var se;return(se=this.div)==null?void 0:se.setAttribute("aria-label",ae)});const[x,R,G,ie]=ve(this,E,Tr).call(this);if(this.setAt(x,R,0,0),this.setDims(G,ie),ve(this,E,Ot).call(this),this.width){const[ae,se]=this.parent.viewportBaseDimensions;this.setAt(ne*ae,D*se,this.width*ae,this.height*se),Ee(this,h,!0),ve(this,E,gt).call(this),this.setDims(this.width*ae,this.height*se),ve(this,E,ot).call(this),ve(this,E,Qt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ve(this,E,Dt).call(this),this.div}setDimensions(ne,D){const x=Math.round(ne),R=Math.round(D);if(oe(this,p)===x&&oe(this,m)===R)return;Ee(this,p,x),Ee(this,m,R),this.canvas.style.visibility="hidden",oe(this,u)&&Math.abs(oe(this,u)-ne/D)>.01&&(D=Math.ceil(ne/oe(this,u)),this.setDims(ne,D));const[G,ie]=this.parent.viewportBaseDimensions;this.width=ne/G,this.height=D/ie,oe(this,_)&&ve(this,E,Xt).call(this,ne,D),ve(this,E,gt).call(this),ve(this,E,ot).call(this),this.canvas.style.visibility="visible"}static deserialize(ne,D){var de,he;const x=super.deserialize(ne,D);x.thickness=ne.thickness,x.color=n.Util.makeHexColor(...ne.color),x.opacity=ne.opacity;const[R,G]=D.pageDimensions,ie=x.width*R,ae=x.height*G,se=D.scaleFactor,ue=ne.thickness/2;Ee(x,u,ie/ae),Ee(x,_,!0),Ee(x,p,Math.round(ie)),Ee(x,m,Math.round(ae));for(const{bezier:ge}of ne.paths){const be=[];x.paths.push(be);let Re=se*(ge[0]-ue),Pe=se*(ae-ge[1]-ue);for(let ye=2,Ce=ge.length;ye<Ce;ye+=6){const Ne=se*(ge[ye]-ue),Ye=se*(ae-ge[ye+1]-ue),He=se*(ge[ye+2]-ue),nt=se*(ae-ge[ye+3]-ue),me=se*(ge[ye+4]-ue),fe=se*(ae-ge[ye+5]-ue);be.push([[Re,Pe],[Ne,Ye],[He,nt],[me,fe]]),Re=me,Pe=fe}const ke=ve(this,U,Yt).call(this,be);x.bezierPath2D.push(ke)}const le=ve(de=x,E,Jt).call(de);return Ee(x,w,Math.max(a,le[2]-le[0])),Ee(x,y,Math.max(a,le[3]-le[1])),ve(he=x,E,Xt).call(he,ie,ae),x}serialize(){if(this.isEmpty())return null;const ne=this.getRect(0,0),D=this.rotation%180===0?ne[3]-ne[1]:ne[2]-ne[0],x=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:x,thickness:this.thickness,opacity:this.opacity,paths:ve(this,E,Rr).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,D),pageIndex:this.parent.pageIndex,rect:ne,rotation:this.rotation}}};u=new WeakMap,y=new WeakMap,w=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,l=new WeakMap,_=new WeakMap,h=new WeakMap,d=new WeakMap,c=new WeakMap,p=new WeakMap,m=new WeakMap,S=new WeakMap,E=new WeakSet,Sr=function(ne){const D=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=ne,ve(this,E,yt).call(this)},undo:()=>{this.thickness=D,ve(this,E,yt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Er=function(ne){const D=this.color;this.parent.addCommands({cmd:()=>{this.color=ne,ve(this,E,ot).call(this)},undo:()=>{this.color=D,ve(this,E,ot).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ar=function(ne){ne/=100;const D=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=ne,ve(this,E,ot).call(this)},undo:()=>{this.opacity=D,ve(this,E,ot).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Tr=function(){const{width:ne,height:D,rotation:x}=this.parent.viewport;switch(x){case 90:return[0,ne,ne,D];case 180:return[ne,D,ne,D];case 270:return[D,0,ne,D];default:return[0,0,ne,D]}},Kt=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,f.opacityToHex)(this.opacity)}`},Cr=function(ne,D){this.isEditing=!0,oe(this,h)||(Ee(this,h,!0),ve(this,E,gt).call(this),this.thickness||(this.thickness=K._defaultThickness),this.color||(this.color=K._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=K._defaultOpacity)),this.currentPath.push([ne,D]),Ee(this,d,null),ve(this,E,Kt).call(this),this.ctx.beginPath(),this.ctx.moveTo(ne,D),Ee(this,S,()=>{oe(this,S)&&(oe(this,d)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ve(this,E,ot).call(this),this.ctx.lineTo(...oe(this,d)),Ee(this,d,null),this.ctx.stroke()),window.requestAnimationFrame(oe(this,S)))}),window.requestAnimationFrame(oe(this,S))},xr=function(ne,D){const[x,R]=this.currentPath.at(-1);ne===x&&D===R||(this.currentPath.push([ne,D]),Ee(this,d,[ne,D]))},kr=function(ne,D){var ue;this.ctx.closePath(),Ee(this,S,null),ne=Math.min(Math.max(ne,0),this.canvas.width),D=Math.min(Math.max(D,0),this.canvas.height);const[x,R]=this.currentPath.at(-1);(ne!==x||D!==R)&&this.currentPath.push([ne,D]);let G;if(this.currentPath.length!==1)G=(0,s.fitCurve)(this.currentPath,30,null);else{const le=[ne,D];G=[[le,le.slice(),le.slice(),le]]}const ie=ve(ue=K,U,Yt).call(ue,G);this.currentPath.length=0;const ae=()=>{this.paths.push(G),this.bezierPath2D.push(ie),this.rebuild()},se=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ve(this,E,Ot).call(this),ve(this,E,Dt).call(this)),ve(this,E,yt).call(this))};this.parent.addCommands({cmd:ae,undo:se,mustExec:!0})},ot=function(){if(this.isEmpty()){ve(this,E,Nt).call(this);return}ve(this,E,Kt).call(this);const{canvas:ne,ctx:D}=this;D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,ne.width,ne.height),ve(this,E,Nt).call(this);for(const x of this.bezierPath2D)D.stroke(x)},Zt=function(ne){ve(this,E,kr).call(this,ne.offsetX,ne.offsetY),this.canvas.removeEventListener("pointerleave",oe(this,g)),this.canvas.removeEventListener("pointermove",oe(this,v)),this.parent.addToAnnotationStorage(this)},Ot=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",K._l10nPromise.get("editor_ink_canvas_aria_label").then(ne=>{var D;return(D=this.canvas)==null?void 0:D.setAttribute("aria-label",ne)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Dt=function(){Ee(this,c,new ResizeObserver(ne=>{const D=ne[0].contentRect;D.width&&D.height&&this.setDimensions(D.width,D.height)})),oe(this,c).observe(this.div)},gt=function(){if(!oe(this,h))return;const[ne,D]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*ne),this.canvas.height=Math.ceil(this.height*D),ve(this,E,Nt).call(this)},Xt=function(ne,D){const x=ve(this,E,Lt).call(this),R=(ne-x)/oe(this,w),G=(D-x)/oe(this,y);this.scaleFactor=Math.min(R,G)},Nt=function(){const ne=ve(this,E,Lt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ne,this.translationY*this.scaleFactor+ne)},U=new WeakSet,Yt=function(ne){const D=new Path2D;for(let x=0,R=ne.length;x<R;x++){const[G,ie,ae,se]=ne[x];x===0&&D.moveTo(...G),D.bezierCurveTo(ie[0],ie[1],ae[0],ae[1],se[0],se[1])}return D},Rr=function(ne,D,x,R){const ie=[],ae=this.thickness/2;let se,ue;for(const le of this.paths){se=[],ue=[];for(let de=0,he=le.length;de<he;de++){const[ge,be,Re,Pe]=le[de],ke=ne*(ge[0]+D)+ae,ye=R-ne*(ge[1]+x)-ae,Ce=ne*(be[0]+D)+ae,Ne=R-ne*(be[1]+x)-ae,Ye=ne*(Re[0]+D)+ae,He=R-ne*(Re[1]+x)-ae,nt=ne*(Pe[0]+D)+ae,me=R-ne*(Pe[1]+x)-ae;de===0&&(se.push(ke,ye),ue.push(ke,ye)),se.push(Ce,Ne,Ye,He,nt,me),ve(this,E,Ir).call(this,ke,ye,Ce,Ne,Ye,He,nt,me,4,ue)}ie.push({bezier:se,points:ue})}return ie},Ir=function(ne,D,x,R,G,ie,ae,se,ue,le){if(ve(this,E,Pr).call(this,ne,D,x,R,G,ie,ae,se)){le.push(ae,se);return}for(let de=1;de<ue-1;de++){const he=de/ue,ge=1-he;let be=he*ne+ge*x,Re=he*D+ge*R,Pe=he*x+ge*G,ke=he*R+ge*ie;const ye=he*G+ge*ae,Ce=he*ie+ge*se;be=he*be+ge*Pe,Re=he*Re+ge*ke,Pe=he*Pe+ge*ye,ke=he*ke+ge*Ce,be=he*be+ge*Pe,Re=he*Re+ge*ke,le.push(be,Re)}le.push(ae,se)},Pr=function(ne,D,x,R,G,ie,ae,se){const le=(3*x-2*ne-ae)**2,de=(3*R-2*D-se)**2,he=(3*G-ne-2*ae)**2,ge=(3*ie-D-2*se)**2;return Math.max(le,he)+Math.max(de,ge)<=10},Jt=function(){let ne=1/0,D=-1/0,x=1/0,R=-1/0;for(const G of this.paths)for(const[ie,ae,se,ue]of G){const le=n.Util.bezierBoundingBox(...ie,...ae,...se,...ue);ne=Math.min(ne,le[0]),x=Math.min(x,le[1]),D=Math.max(D,le[2]),R=Math.max(R,le[3])}return[ne,x,D,R]},Lt=function(){return oe(this,_)?Math.ceil(this.thickness*this.parent.scaleFactor):0},yt=function(ne=!1){if(this.isEmpty())return;if(!oe(this,_)){ve(this,E,ot).call(this);return}const D=ve(this,E,Jt).call(this),x=ve(this,E,Lt).call(this);Ee(this,w,Math.max(a,D[2]-D[0])),Ee(this,y,Math.max(a,D[3]-D[1]));const R=Math.ceil(x+oe(this,w)*this.scaleFactor),G=Math.ceil(x+oe(this,y)*this.scaleFactor),[ie,ae]=this.parent.viewportBaseDimensions;this.width=R/ie,this.height=G/ae,Ee(this,u,R/G),ve(this,E,Qt).call(this);const se=this.translationX,ue=this.translationY;this.translationX=-D[0],this.translationY=-D[1],ve(this,E,gt).call(this),ve(this,E,ot).call(this),Ee(this,p,R),Ee(this,m,G),this.setDims(R,G);const le=ne?x/this.scaleFactor/2:0;this.translate(se-this.translationX-le,ue-this.translationY-le)},Qt=function(){const{style:ne}=this.div;oe(this,u)>=1?(ne.minHeight=`${a}px`,ne.minWidth=`${Math.round(oe(this,u)*a)}px`):(ne.minWidth=`${a}px`,ne.minHeight=`${Math.round(a/oe(this,u))}px`)},Se(K,U),Ue(K,"_defaultColor",null),Ue(K,"_defaultOpacity",1),Ue(K,"_defaultThickness",1),Ue(K,"_l10nPromise"),Ue(K,"_type","ink");let o=K;e.InkEditor=o},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fitCurve=void 0;const n=r(26);e.fitCurve=n},t=>{function e(b,l,_){if(!Array.isArray(b))throw new TypeError("First argument should be an array");if(b.forEach(p=>{if(!Array.isArray(p)||p.some(m=>typeof m!="number")||p.length!==b[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),b=b.filter((p,m)=>m===0||!p.every((S,E)=>S===b[m-1][E])),b.length<2)return[];const h=b.length,d=w(b[1],b[0]),c=w(b[h-2],b[h-1]);return r(b,d,c,l,_)}function r(b,l,_,h,d){var p,m,S,E,T,A,P,H,O,q,C,j,V;if(b.length===2)return j=v.vectorLen(v.subtract(b[0],b[1]))/3,p=[b[0],v.addArrays(b[0],v.mulItems(l,j)),v.addArrays(b[1],v.mulItems(_,j)),b[1]],[p];if(m=a(b),[p,E,A]=n(b,m,m,l,_,d),E===0||E<h)return[p];if(E<h*h)for(S=m,T=E,P=A,V=0;V<20;V++){if(S=s(p,b,S),[p,E,A]=n(b,m,S,l,_,d),E<h)return[p];if(A===P){let N=E/T;if(N>.9999&&N<1.0001)break}T=E,P=A}return C=[],H=v.subtract(b[A-1],b[A+1]),H.every(N=>N===0)&&(H=v.subtract(b[A-1],b[A]),[H[0],H[1]]=[-H[1],H[0]]),O=v.normalize(H),q=v.mulItems(O,-1),C=C.concat(r(b.slice(0,A+1),l,O,h,d)),C=C.concat(r(b.slice(A),q,_,h,d)),C}function n(b,l,_,h,d,c){var p,m,S;return p=i(b,_,h,d),[m,S]=o(b,p,l),c&&c({bez:p,points:b,params:l,maxErr:m,maxPoint:S}),[p,m,S]}function i(b,l,_,h){var d,c,p,m,S,E,T,A,P,H,O,q,C,j,V,N,Y,X=b[0],J=b[b.length-1];for(d=[X,null,null,J],c=v.zeros_Xx2x2(l.length),C=0,j=l.length;C<j;C++)N=l[C],Y=1-N,p=c[C],p[0]=v.mulItems(_,3*N*(Y*Y)),p[1]=v.mulItems(h,3*Y*(N*N));for(m=[[0,0],[0,0]],S=[0,0],C=0,j=b.length;C<j;C++)N=l[C],p=c[C],m[0][0]+=v.dot(p[0],p[0]),m[0][1]+=v.dot(p[0],p[1]),m[1][0]+=v.dot(p[0],p[1]),m[1][1]+=v.dot(p[1],p[1]),V=v.subtract(b[C],g.q([X,X,J,J],N)),S[0]+=v.dot(p[0],V),S[1]+=v.dot(p[1],V);return E=m[0][0]*m[1][1]-m[1][0]*m[0][1],T=m[0][0]*S[1]-m[1][0]*S[0],A=S[0]*m[1][1]-S[1]*m[0][1],P=E===0?0:A/E,H=E===0?0:T/E,q=v.vectorLen(v.subtract(X,J)),O=1e-6*q,P<O||H<O?(d[1]=v.addArrays(X,v.mulItems(_,q/3)),d[2]=v.addArrays(J,v.mulItems(h,q/3))):(d[1]=v.addArrays(X,v.mulItems(_,P)),d[2]=v.addArrays(J,v.mulItems(h,H))),d}function s(b,l,_){return _.map((h,d)=>f(b,l[d],h))}function f(b,l,_){var h=v.subtract(g.q(b,_),l),d=g.qprime(b,_),c=v.mulMatrix(h,d),p=v.sum(v.squareItems(d))+2*v.mulMatrix(h,g.qprimeprime(b,_));return p===0?_:_-c/p}function a(b){var l=[],_,h,d;return b.forEach((c,p)=>{_=p?h+v.vectorLen(v.subtract(c,d)):0,l.push(_),h=_,d=c}),l=l.map(c=>c/h),l}function o(b,l,_){var h,d,c,p,m,S,E,T;d=0,c=Math.floor(b.length/2);const A=u(l,10);for(m=0,S=b.length;m<S;m++)E=b[m],T=y(l,_[m],A,10),p=v.subtract(g.q(l,T),E),h=p[0]*p[0]+p[1]*p[1],h>d&&(d=h,c=m);return[d,c]}var u=function(b,l){for(var _,h=[0],d=b[0],c=0,p=1;p<=l;p++)_=g.q(b,p/l),c+=v.vectorLen(v.subtract(_,d)),h.push(c),d=_;return h=h.map(m=>m/c),h};function y(b,l,_,h){if(l<0)return 0;if(l>1)return 1;for(var d,c,p,m,S,E=1;E<=h;E++)if(l<=_[E]){m=(E-1)/h,p=E/h,c=_[E-1],d=_[E],S=(l-c)/(d-c)*(p-m)+m;break}return S}function w(b,l){return v.normalize(v.subtract(b,l))}class v{static zeros_Xx2x2(l){for(var _=[];l--;)_.push([0,0]);return _}static mulItems(l,_){return l.map(h=>h*_)}static mulMatrix(l,_){return l.reduce((h,d,c)=>h+d*_[c],0)}static subtract(l,_){return l.map((h,d)=>h-_[d])}static addArrays(l,_){return l.map((h,d)=>h+_[d])}static addItems(l,_){return l.map(h=>h+_)}static sum(l){return l.reduce((_,h)=>_+h)}static dot(l,_){return v.mulMatrix(l,_)}static vectorLen(l){return Math.hypot(...l)}static divItems(l,_){return l.map(h=>h/_)}static squareItems(l){return l.map(_=>_*_)}static normalize(l){return this.divItems(l,this.vectorLen(l))}}class g{static q(l,_){var h=1-_,d=v.mulItems(l[0],h*h*h),c=v.mulItems(l[1],3*h*h*_),p=v.mulItems(l[2],3*h*_*_),m=v.mulItems(l[3],_*_*_);return v.addArrays(v.addArrays(d,c),v.addArrays(p,m))}static qprime(l,_){var h=1-_,d=v.mulItems(v.subtract(l[1],l[0]),3*h*h),c=v.mulItems(v.subtract(l[2],l[1]),6*h*_),p=v.mulItems(v.subtract(l[3],l[2]),3*_*_);return v.addArrays(v.addArrays(d,c),p)}static qprimeprime(l,_){return v.addArrays(v.mulItems(v.addArrays(v.subtract(l[2],v.mulItems(l[1],2)),l[0]),6*(1-_)),v.mulItems(v.addArrays(v.subtract(l[3],v.mulItems(l[2],2)),l[1]),6*_))}}t.exports=e,t.exports.fitCubic=r,t.exports.createTangent=w},(t,e,r)=>{var U,er,tr,rr;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var n=r(1),i=r(8),s=r(5),f=r(28),a=r(29);const o=1e3,u=9,y=new WeakSet;function w(I){return{width:I[2]-I[0],height:I[3]-I[1]}}class v{static create(k){switch(k.data.annotationType){case n.AnnotationType.LINK:return new b(k);case n.AnnotationType.TEXT:return new l(k);case n.AnnotationType.WIDGET:switch(k.data.fieldType){case"Tx":return new h(k);case"Btn":return k.data.radioButton?new c(k):k.data.checkBox?new d(k):new p(k);case"Ch":return new m(k)}return new _(k);case n.AnnotationType.POPUP:return new S(k);case n.AnnotationType.FREETEXT:return new T(k);case n.AnnotationType.LINE:return new A(k);case n.AnnotationType.SQUARE:return new P(k);case n.AnnotationType.CIRCLE:return new H(k);case n.AnnotationType.POLYLINE:return new O(k);case n.AnnotationType.CARET:return new C(k);case n.AnnotationType.INK:return new j(k);case n.AnnotationType.POLYGON:return new q(k);case n.AnnotationType.HIGHLIGHT:return new V(k);case n.AnnotationType.UNDERLINE:return new N(k);case n.AnnotationType.SQUIGGLY:return new Y(k);case n.AnnotationType.STRIKEOUT:return new X(k);case n.AnnotationType.STAMP:return new J(k);case n.AnnotationType.FILEATTACHMENT:return new Q(k);default:return new g(k)}}}class g{constructor(k,{isRenderable:B=!1,ignoreBorder:F=!1,createQuadrilaterals:K=!1}={}){this.isRenderable=B,this.data=k.data,this.layer=k.layer,this.page=k.page,this.viewport=k.viewport,this.linkService=k.linkService,this.downloadManager=k.downloadManager,this.imageResourcesPath=k.imageResourcesPath,this.renderForms=k.renderForms,this.svgFactory=k.svgFactory,this.annotationStorage=k.annotationStorage,this.enableScripting=k.enableScripting,this.hasJSActions=k.hasJSActions,this._fieldObjects=k.fieldObjects,this._mouseState=k.mouseState,B&&(this.container=this._createContainer(F)),K&&(this.quadrilaterals=this._createQuadrilaterals(F))}_createContainer(k=!1){const B=this.data,F=this.page,K=this.viewport,te=document.createElement("section"),{width:M,height:ne}=w(B.rect),[D,x,R,G]=K.viewBox,ie=R-D,ae=G-x;te.setAttribute("data-annotation-id",B.id);const se=n.Util.normalizeRect([B.rect[0],F.view[3]-B.rect[1]+F.view[1],B.rect[2],F.view[3]-B.rect[3]+F.view[1]]);if(!k&&B.borderStyle.width>0){te.style.borderWidth=`${B.borderStyle.width}px`;const le=B.borderStyle.horizontalCornerRadius,de=B.borderStyle.verticalCornerRadius;if(le>0||de>0){const ge=`calc(${le}px * var(--scale-factor)) / calc(${de}px * var(--scale-factor))`;te.style.borderRadius=ge}else if(this instanceof c){const ge=`calc(${M}px * var(--scale-factor)) / calc(${ne}px * var(--scale-factor))`;te.style.borderRadius=ge}switch(B.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:te.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:te.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:te.style.borderBottomStyle="solid";break}const he=B.borderColor||null;he?te.style.borderColor=n.Util.makeHexColor(he[0]|0,he[1]|0,he[2]|0):te.style.borderWidth=0}te.style.left=`${100*(se[0]-D)/ie}%`,te.style.top=`${100*(se[1]-x)/ae}%`;const{rotation:ue}=B;return B.hasOwnCanvas||ue===0?(te.style.width=`${100*M/ie}%`,te.style.height=`${100*ne/ae}%`):this.setRotation(ue,te),te}setRotation(k,B=this.container){const[F,K,te,M]=this.viewport.viewBox,ne=te-F,D=M-K,{width:x,height:R}=w(this.data.rect);let G,ie;k%180===0?(G=100*x/ne,ie=100*R/D):(G=100*R/ne,ie=100*x/D),B.style.width=`${G}%`,B.style.height=`${ie}%`,B.setAttribute("data-main-rotation",(360-k)%360)}get _commonActions(){const k=(B,F,K)=>{const te=K.detail[B];K.target.style[F]=f.ColorConverters[`${te[0]}_HTML`](te.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:B=>{const F=B.detail.display%2===1;this.container.style.visibility=F?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:F,print:B.detail.display===0||B.detail.display===3})},print:B=>{this.annotationStorage.setValue(this.data.id,{print:B.detail.print})},hidden:B=>{this.container.style.visibility=B.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:B.detail.hidden})},focus:B=>{setTimeout(()=>B.target.focus({preventScroll:!1}),0)},userName:B=>{B.target.title=B.detail.userName},readonly:B=>{B.detail.readonly?B.target.setAttribute("readonly",""):B.target.removeAttribute("readonly")},required:B=>{this._setRequired(B.target,B.detail.required)},bgColor:B=>{k("bgColor","backgroundColor",B)},fillColor:B=>{k("fillColor","backgroundColor",B)},fgColor:B=>{k("fgColor","color",B)},textColor:B=>{k("textColor","color",B)},borderColor:B=>{k("borderColor","borderColor",B)},strokeColor:B=>{k("strokeColor","borderColor",B)},rotation:B=>{const F=B.detail.rotation;this.setRotation(F),this.annotationStorage.setValue(this.data.id,{rotation:F})}})}_dispatchEventFromSandbox(k,B){const F=this._commonActions;for(const K of Object.keys(B.detail)){const te=k[K]||F[K];te&&te(B)}}_setDefaultPropertiesFromJS(k){if(!this.enableScripting)return;const B=this.annotationStorage.getRawValue(this.data.id);if(!B)return;const F=this._commonActions;for(const[K,te]of Object.entries(B)){const M=F[K];if(M){const ne={detail:{[K]:te},target:k};M(ne),delete B[K]}}}_createQuadrilaterals(k=!1){if(!this.data.quadPoints)return null;const B=[],F=this.data.rect;for(const K of this.data.quadPoints)this.data.rect=[K[2].x,K[2].y,K[1].x,K[1].y],B.push(this._createContainer(k));return this.data.rect=F,B}_createPopup(k,B){let F=this.container;this.quadrilaterals&&(k=k||this.quadrilaterals,F=this.quadrilaterals[0]),k||(k=document.createElement("div"),k.className="popupTriggerArea",F.append(k));const te=new E({container:F,trigger:k,color:B.color,titleObj:B.titleObj,modificationDate:B.modificationDate,contentsObj:B.contentsObj,richText:B.richText,hideWrapper:!0}).render();te.style.left="100%",F.append(te)}_renderQuadrilaterals(k){for(const B of this.quadrilaterals)B.className=k;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(k,B=null){const F=[];if(this._fieldObjects){const K=this._fieldObjects[k];if(K)for(const{page:te,id:M,exportValues:ne}of K){if(te===-1||M===B)continue;const D=typeof ne=="string"?ne:null,x=document.querySelector(`[data-element-id="${M}"]`);if(x&&!y.has(x)){(0,n.warn)(`_getElementsByName - element not allowed: ${M}`);continue}F.push({id:M,exportValue:D,domElement:x})}return F}for(const K of document.getElementsByName(k)){const{id:te,exportValue:M}=K;te!==B&&y.has(K)&&F.push({id:te,exportValue:M,domElement:K})}return F}static get platform(){const k=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:k.includes("Win"),isMac:k.includes("Mac")})}}class b extends g{constructor(k,B=null){super(k,{isRenderable:!0,ignoreBorder:!!(B!=null&&B.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=k.data.isTooltipOnly}render(){const{data:k,linkService:B}=this,F=document.createElement("a");F.setAttribute("data-element-id",k.id);let K=!1;return k.url?(B.addLinkAttributes(F,k.url,k.newWindow),K=!0):k.action?(this._bindNamedAction(F,k.action),K=!0):k.dest?(this._bindLink(F,k.dest),K=!0):(k.actions&&(k.actions.Action||k.actions["Mouse Up"]||k.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(F,k),K=!0),k.resetForm?(this._bindResetFormAction(F,k.resetForm),K=!0):this.isTooltipOnly&&!K&&(this._bindLink(F,""),K=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((te,M)=>{const ne=M===0?F:F.cloneNode();return te.append(ne),te}):(this.container.className="linkAnnotation",K&&this.container.append(F),this.container)}_bindLink(k,B){k.href=this.linkService.getDestinationHash(B),k.onclick=()=>(B&&this.linkService.goToDestination(B),!1),(B||B==="")&&(k.className="internalLink")}_bindNamedAction(k,B){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeNamedAction(B),!1),k.className="internalLink"}_bindJSAction(k,B){k.href=this.linkService.getAnchorUrl("");const F=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const K of Object.keys(B.actions)){const te=F.get(K);te&&(k[te]=()=>{var M;return(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B.id,name:K}}),!1})}k.onclick||(k.onclick=()=>!1),k.className="internalLink"}_bindResetFormAction(k,B){const F=k.onclick;if(F||(k.href=this.linkService.getAnchorUrl("")),k.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),F||(k.onclick=()=>!1);return}k.onclick=()=>{var R;F&&F();const{fields:K,refs:te,include:M}=B,ne=[];if(K.length!==0||te.length!==0){const G=new Set(te);for(const ie of K){const ae=this._fieldObjects[ie]||[];for(const{id:se}of ae)G.add(se)}for(const ie of Object.values(this._fieldObjects))for(const ae of ie)G.has(ae.id)===M&&ne.push(ae)}else for(const G of Object.values(this._fieldObjects))ne.push(...G);const D=this.annotationStorage,x=[];for(const G of ne){const{id:ie}=G;switch(x.push(ie),G.type){case"text":{const se=G.defaultValue||"";D.setValue(ie,{value:se});break}case"checkbox":case"radiobutton":{const se=G.defaultValue===G.exportValues;D.setValue(ie,{value:se});break}case"combobox":case"listbox":{const se=G.defaultValue||"";D.setValue(ie,{value:se});break}default:continue}const ae=document.querySelector(`[data-element-id="${ie}"]`);if(ae){if(!y.has(ae)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${ie}`);continue}}else continue;ae.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:x,name:"ResetForm"}})),!1}}}class l extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B})}render(){this.container.className="textAnnotation";const k=document.createElement("img");return k.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",k.alt="[{{type}} Annotation]",k.dataset.l10nId="text_annotation_type",k.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(k,this.data),this.container.append(k),this.container}}class _ extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(k){const{isWin:B,isMac:F}=g.platform;return B&&k.ctrlKey||F&&k.metaKey}_setEventListener(k,B,F,K){B.includes("mouse")?k.addEventListener(B,te=>{var M;(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:K(te),shift:te.shiftKey,modifier:this._getKeyModifier(te)}})}):k.addEventListener(B,te=>{var M;(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:F,value:K(te)}})})}_setEventListeners(k,B,F){var K;for(const[te,M]of B)(M==="Action"||(K=this.data.actions)!=null&&K[M])&&this._setEventListener(k,te,M,F)}_setBackgroundColor(k){const B=this.data.backgroundColor||null;k.style.backgroundColor=B===null?"transparent":n.Util.makeHexColor(B[0],B[1],B[2])}_setTextStyle(k){const B=["left","center","right"],{fontColor:F}=this.data.defaultAppearanceData,K=this.data.defaultAppearanceData.fontSize||u,te=k.style;let M;if(this.data.multiLine){const ne=Math.abs(this.data.rect[3]-this.data.rect[1]),D=Math.round(ne/(n.LINE_FACTOR*K))||1,x=ne/D;M=Math.min(K,Math.round(x/n.LINE_FACTOR))}else{const ne=Math.abs(this.data.rect[3]-this.data.rect[1]);M=Math.min(K,Math.round(ne/n.LINE_FACTOR))}te.fontSize=`calc(${M}px * var(--scale-factor))`,te.color=n.Util.makeHexColor(F[0],F[1],F[2]),this.data.textAlignment!==null&&(te.textAlign=B[this.data.textAlignment])}_setRequired(k,B){B?k.setAttribute("required",!0):k.removeAttribute("required"),k.setAttribute("aria-required",B)}}class h extends _{constructor(k){const B=k.renderForms||!k.data.hasAppearance&&!!k.data.fieldValue;super(k,{isRenderable:B})}setPropertyOnSiblings(k,B,F,K){const te=this.annotationStorage;for(const M of this._getElementsByName(k.name,k.id))M.domElement&&(M.domElement[B]=F),te.setValue(M.id,{[K]:F})}render(){var K;const k=this.annotationStorage,B=this.data.id;this.container.className="textWidgetAnnotation";let F=null;if(this.renderForms){const te=k.getValue(B,{value:this.data.fieldValue});let M=te.formattedValue||te.value||"";const ne=k.getValue(B,{charLimit:this.data.maxLen}).charLimit;ne&&M.length>ne&&(M=M.slice(0,ne));const D={userValue:M,formattedValue:null,valueOnFocus:""};this.data.multiLine?(F=document.createElement("textarea"),F.textContent=M,this.data.doNotScroll&&(F.style.overflowY="hidden")):(F=document.createElement("input"),F.type="text",F.setAttribute("value",M),this.data.doNotScroll&&(F.style.overflowX="hidden")),y.add(F),F.setAttribute("data-element-id",B),F.disabled=this.data.readOnly,F.name=this.data.fieldName,F.tabIndex=o,this._setRequired(F,this.data.required),ne&&(F.maxLength=ne),F.addEventListener("input",R=>{k.setValue(B,{value:R.target.value}),this.setPropertyOnSiblings(F,"value",R.target.value,"value")}),F.addEventListener("resetform",R=>{const G=this.data.defaultFieldValue??"";F.value=D.userValue=G,D.formattedValue=null});let x=R=>{const{formattedValue:G}=D;G!=null&&(R.target.value=G),R.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){F.addEventListener("focus",G=>{D.userValue&&(G.target.value=D.userValue),D.valueOnFocus=G.target.value}),F.addEventListener("updatefromsandbox",G=>{const ie={value(ae){D.userValue=ae.detail.value??"",k.setValue(B,{value:D.userValue.toString()}),ae.target.value=D.userValue},formattedValue(ae){const{formattedValue:se}=ae.detail;D.formattedValue=se,se!=null&&ae.target!==document.activeElement&&(ae.target.value=se),k.setValue(B,{formattedValue:se})},selRange(ae){ae.target.setSelectionRange(...ae.detail.selRange)},charLimit:ae=>{var de;const{charLimit:se}=ae.detail,{target:ue}=ae;if(se===0){ue.removeAttribute("maxLength");return}ue.setAttribute("maxLength",se);let le=D.userValue;!le||le.length<=se||(le=le.slice(0,se),ue.value=D.userValue=le,k.setValue(B,{value:le}),(de=this.linkService.eventBus)==null||de.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:le,willCommit:!0,commitKey:1,selStart:ue.selectionStart,selEnd:ue.selectionEnd}}))}};this._dispatchEventFromSandbox(ie,G)}),F.addEventListener("keydown",G=>{var se;let ie=-1;if(G.key==="Escape"?ie=0:G.key==="Enter"?ie=2:G.key==="Tab"&&(ie=3),ie===-1)return;const{value:ae}=G.target;D.valueOnFocus!==ae&&(D.userValue=ae,(se=this.linkService.eventBus)==null||se.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:ae,willCommit:!0,commitKey:ie,selStart:G.target.selectionStart,selEnd:G.target.selectionEnd}}))});const R=x;x=null,F.addEventListener("blur",G=>{var ae;const{value:ie}=G.target;D.userValue=ie,this._mouseState.isDown&&D.valueOnFocus!==ie&&((ae=this.linkService.eventBus)==null||ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:ie,willCommit:!0,commitKey:1,selStart:G.target.selectionStart,selEnd:G.target.selectionEnd}})),R(G)}),(K=this.data.actions)!=null&&K.Keystroke&&F.addEventListener("beforeinput",G=>{var ge;const{data:ie,target:ae}=G,{value:se,selectionStart:ue,selectionEnd:le}=ae;let de=ue,he=le;switch(G.inputType){case"deleteWordBackward":{const be=se.substring(0,ue).match(/\w*[^\w]*$/);be&&(de-=be[0].length);break}case"deleteWordForward":{const be=se.substring(ue).match(/^[^\w]*\w*/);be&&(he+=be[0].length);break}case"deleteContentBackward":ue===le&&(de-=1);break;case"deleteContentForward":ue===le&&(he+=1);break}G.preventDefault(),(ge=this.linkService.eventBus)==null||ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:se,change:ie||"",willCommit:!1,selStart:de,selEnd:he}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],G=>G.target.value)}if(x&&F.addEventListener("blur",x),this.data.comb){const G=(this.data.rect[2]-this.data.rect[0])/ne;F.classList.add("comb"),F.style.letterSpacing=`calc(${G}px * var(--scale-factor) - 1ch)`}}else F=document.createElement("div"),F.textContent=this.data.fieldValue,F.style.verticalAlign="middle",F.style.display="table-cell";return this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class d extends _{constructor(k){super(k,{isRenderable:k.renderForms})}render(){const k=this.annotationStorage,B=this.data,F=B.id;let K=k.getValue(F,{value:B.exportValue===B.fieldValue}).value;typeof K=="string"&&(K=K!=="Off",k.setValue(F,{value:K})),this.container.className="buttonWidgetAnnotation checkBox";const te=document.createElement("input");return y.add(te),te.setAttribute("data-element-id",F),te.disabled=B.readOnly,this._setRequired(te,this.data.required),te.type="checkbox",te.name=B.fieldName,K&&te.setAttribute("checked",!0),te.setAttribute("exportValue",B.exportValue),te.tabIndex=o,te.addEventListener("change",M=>{const{name:ne,checked:D}=M.target;for(const x of this._getElementsByName(ne,F)){const R=D&&x.exportValue===B.exportValue;x.domElement&&(x.domElement.checked=R),k.setValue(x.id,{value:R})}k.setValue(F,{value:D})}),te.addEventListener("resetform",M=>{const ne=B.defaultFieldValue||"Off";M.target.checked=ne===B.exportValue}),this.enableScripting&&this.hasJSActions&&(te.addEventListener("updatefromsandbox",M=>{const ne={value(D){D.target.checked=D.detail.value!=="Off",k.setValue(F,{value:D.target.checked})}};this._dispatchEventFromSandbox(ne,M)}),this._setEventListeners(te,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],M=>M.target.checked)),this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class c extends _{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const k=this.annotationStorage,B=this.data,F=B.id;let K=k.getValue(F,{value:B.fieldValue===B.buttonValue}).value;typeof K=="string"&&(K=K!==B.buttonValue,k.setValue(F,{value:K}));const te=document.createElement("input");if(y.add(te),te.setAttribute("data-element-id",F),te.disabled=B.readOnly,this._setRequired(te,this.data.required),te.type="radio",te.name=B.fieldName,K&&te.setAttribute("checked",!0),te.tabIndex=o,te.addEventListener("change",M=>{const{name:ne,checked:D}=M.target;for(const x of this._getElementsByName(ne,F))k.setValue(x.id,{value:!1});k.setValue(F,{value:D})}),te.addEventListener("resetform",M=>{const ne=B.defaultFieldValue;M.target.checked=ne!=null&&ne===B.buttonValue}),this.enableScripting&&this.hasJSActions){const M=B.buttonValue;te.addEventListener("updatefromsandbox",ne=>{const D={value:x=>{const R=M===x.detail.value;for(const G of this._getElementsByName(x.target.name)){const ie=R&&G.id===F;G.domElement&&(G.domElement.checked=ie),k.setValue(G.id,{value:ie})}}};this._dispatchEventFromSandbox(D,ne)}),this._setEventListeners(te,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ne=>ne.target.checked)}return this._setBackgroundColor(te),this._setDefaultPropertiesFromJS(te),this.container.append(te),this.container}}class p extends b{constructor(k){super(k,{ignoreBorder:k.data.hasAppearance})}render(){const k=super.render();k.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(k.title=this.data.alternativeText);const B=k.lastChild;return this.enableScripting&&this.hasJSActions&&B&&(this._setDefaultPropertiesFromJS(B),B.addEventListener("updatefromsandbox",F=>{this._dispatchEventFromSandbox({},F)})),k}}class m extends _{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const k=this.annotationStorage,B=this.data.id,F=k.getValue(B,{value:this.data.fieldValue}),K=document.createElement("select");y.add(K),K.setAttribute("data-element-id",B),K.disabled=this.data.readOnly,this._setRequired(K,this.data.required),K.name=this.data.fieldName,K.tabIndex=o;let te=this.data.combo&&this.data.options.length>0;this.data.combo||(K.size=this.data.options.length,this.data.multiSelect&&(K.multiple=!0)),K.addEventListener("resetform",x=>{const R=this.data.defaultFieldValue;for(const G of K.options)G.selected=G.value===R});for(const x of this.data.options){const R=document.createElement("option");R.textContent=x.displayValue,R.value=x.exportValue,F.value.includes(x.exportValue)&&(R.setAttribute("selected",!0),te=!1),K.append(R)}let M=null;if(te){const x=document.createElement("option");x.value=" ",x.setAttribute("hidden",!0),x.setAttribute("selected",!0),K.prepend(x),M=()=>{x.remove(),K.removeEventListener("input",M),M=null},K.addEventListener("input",M)}const ne=(x,R)=>{const G=R?"value":"textContent",ie=x.target.options;return x.target.multiple?Array.prototype.filter.call(ie,ae=>ae.selected).map(ae=>ae[G]):ie.selectedIndex===-1?null:ie[ie.selectedIndex][G]},D=x=>{const R=x.target.options;return Array.prototype.map.call(R,G=>({displayValue:G.textContent,exportValue:G.value}))};return this.enableScripting&&this.hasJSActions?(K.addEventListener("updatefromsandbox",x=>{const R={value(G){M==null||M();const ie=G.detail.value,ae=new Set(Array.isArray(ie)?ie:[ie]);for(const se of K.options)se.selected=ae.has(se.value);k.setValue(B,{value:ne(G,!0)})},multipleSelection(G){K.multiple=!0},remove(G){const ie=K.options,ae=G.detail.remove;ie[ae].selected=!1,K.remove(ae),ie.length>0&&Array.prototype.findIndex.call(ie,ue=>ue.selected)===-1&&(ie[0].selected=!0),k.setValue(B,{value:ne(G,!0),items:D(G)})},clear(G){for(;K.length!==0;)K.remove(0);k.setValue(B,{value:null,items:[]})},insert(G){const{index:ie,displayValue:ae,exportValue:se}=G.detail.insert,ue=K.children[ie],le=document.createElement("option");le.textContent=ae,le.value=se,ue?ue.before(le):K.append(le),k.setValue(B,{value:ne(G,!0),items:D(G)})},items(G){const{items:ie}=G.detail;for(;K.length!==0;)K.remove(0);for(const ae of ie){const{displayValue:se,exportValue:ue}=ae,le=document.createElement("option");le.textContent=se,le.value=ue,K.append(le)}K.options.length>0&&(K.options[0].selected=!0),k.setValue(B,{value:ne(G,!0),items:D(G)})},indices(G){const ie=new Set(G.detail.indices);for(const ae of G.target.options)ae.selected=ie.has(ae.index);k.setValue(B,{value:ne(G,!0)})},editable(G){G.target.disabled=!G.detail.editable}};this._dispatchEventFromSandbox(R,x)}),K.addEventListener("input",x=>{var ie;const R=ne(x,!0),G=ne(x,!1);k.setValue(B,{value:R}),(ie=this.linkService.eventBus)==null||ie.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:G,changeEx:R,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(K,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],x=>x.target.checked)):K.addEventListener("input",function(x){k.setValue(B,{value:ne(x,!0)})}),this.data.combo&&this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class S extends g{constructor(k){var F,K,te;const B=!!((F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B})}render(){const k=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",k.includes(this.data.parentType))return this.container;const B=`[data-annotation-id="${this.data.parentId}"]`,F=this.layer.querySelectorAll(B);if(F.length===0)return this.container;const K=new E({container:this.container,trigger:Array.from(F),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),te=this.page,M=n.Util.normalizeRect([this.data.parentRect[0],te.view[3]-this.data.parentRect[1]+te.view[1],this.data.parentRect[2],te.view[3]-this.data.parentRect[3]+te.view[1]]),ne=M[0]+this.data.parentRect[2]-this.data.parentRect[0],D=M[1],[x,R,G,ie]=this.viewport.viewBox,ae=G-x,se=ie-R;return this.container.style.left=`${100*(ne-x)/ae}%`,this.container.style.top=`${100*(D-R)/se}%`,this.container.append(K.render()),this.container}}class E{constructor(k){this.container=k.container,this.trigger=k.trigger,this.color=k.color,this.titleObj=k.titleObj,this.modificationDate=k.modificationDate,this.contentsObj=k.contentsObj,this.richText=k.richText,this.hideWrapper=k.hideWrapper||!1,this.pinned=!1}render(){var ne,D;const B=document.createElement("div");B.className="popupWrapper",this.hideElement=this.hideWrapper?B:this.container,this.hideElement.hidden=!0;const F=document.createElement("div");F.className="popup";const K=this.color;if(K){const x=.7*(255-K[0])+K[0],R=.7*(255-K[1])+K[1],G=.7*(255-K[2])+K[2];F.style.backgroundColor=n.Util.makeHexColor(x|0,R|0,G|0)}const te=document.createElement("h1");te.dir=this.titleObj.dir,te.textContent=this.titleObj.str,F.append(te);const M=i.PDFDateString.toDateObject(this.modificationDate);if(M){const x=document.createElement("span");x.className="popupDate",x.textContent="{{date}}, {{time}}",x.dataset.l10nId="annotation_date_string",x.dataset.l10nArgs=JSON.stringify({date:M.toLocaleDateString(),time:M.toLocaleTimeString()}),F.append(x)}if((ne=this.richText)!=null&&ne.str&&(!((D=this.contentsObj)!=null&&D.str)||this.contentsObj.str===this.richText.str))a.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:F}),F.lastChild.className="richText popupContent";else{const x=this._formatContents(this.contentsObj);F.append(x)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const x of this.trigger)x.addEventListener("click",this._toggle.bind(this)),x.addEventListener("mouseover",this._show.bind(this,!1)),x.addEventListener("mouseout",this._hide.bind(this,!1));return F.addEventListener("click",this._hide.bind(this,!0)),B.append(F),B}_formatContents({str:k,dir:B}){const F=document.createElement("p");F.className="popupContent",F.dir=B;const K=k.split(/(?:\r\n?|\n)/);for(let te=0,M=K.length;te<M;++te){const ne=K[te];F.append(document.createTextNode(ne)),te<M-1&&F.append(document.createElement("br"))}return F}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(k=!1){k&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(k=!0){k&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class T extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0}),this.textContent=k.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const k=document.createElement("div");k.className="annotationTextContent",k.setAttribute("role","comment");for(const B of this.textContent){const F=document.createElement("span");F.textContent=B,k.append(F)}this.container.append(k)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class A extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const k=this.data,{width:B,height:F}=w(k.rect),K=this.svgFactory.create(B,F,!0),te=this.svgFactory.createElement("svg:line");return te.setAttribute("x1",k.rect[2]-k.lineCoordinates[0]),te.setAttribute("y1",k.rect[3]-k.lineCoordinates[1]),te.setAttribute("x2",k.rect[2]-k.lineCoordinates[2]),te.setAttribute("y2",k.rect[3]-k.lineCoordinates[3]),te.setAttribute("stroke-width",k.borderStyle.width||1),te.setAttribute("stroke","transparent"),te.setAttribute("fill","transparent"),K.append(te),this.container.append(K),this._createPopup(te,k),this.container}}class P extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const k=this.data,{width:B,height:F}=w(k.rect),K=this.svgFactory.create(B,F,!0),te=k.borderStyle.width,M=this.svgFactory.createElement("svg:rect");return M.setAttribute("x",te/2),M.setAttribute("y",te/2),M.setAttribute("width",B-te),M.setAttribute("height",F-te),M.setAttribute("stroke-width",te||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),K.append(M),this.container.append(K),this._createPopup(M,k),this.container}}class H extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const k=this.data,{width:B,height:F}=w(k.rect),K=this.svgFactory.create(B,F,!0),te=k.borderStyle.width,M=this.svgFactory.createElement("svg:ellipse");return M.setAttribute("cx",B/2),M.setAttribute("cy",F/2),M.setAttribute("rx",B/2-te/2),M.setAttribute("ry",F/2-te/2),M.setAttribute("stroke-width",te||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),K.append(M),this.container.append(K),this._createPopup(M,k),this.container}}class O extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const k=this.data,{width:B,height:F}=w(k.rect),K=this.svgFactory.create(B,F,!0);let te=[];for(const ne of k.vertices){const D=ne.x-k.rect[0],x=k.rect[3]-ne.y;te.push(D+","+x)}te=te.join(" ");const M=this.svgFactory.createElement(this.svgElementName);return M.setAttribute("points",te),M.setAttribute("stroke-width",k.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),K.append(M),this.container.append(K),this._createPopup(M,k),this.container}}class q extends O{constructor(k){super(k),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class C extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class j extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const k=this.data,{width:B,height:F}=w(k.rect),K=this.svgFactory.create(B,F,!0);for(const te of k.inkLists){let M=[];for(const D of te){const x=D.x-k.rect[0],R=k.rect[3]-D.y;M.push(`${x},${R}`)}M=M.join(" ");const ne=this.svgFactory.createElement(this.svgElementName);ne.setAttribute("points",M),ne.setAttribute("stroke-width",k.borderStyle.width||1),ne.setAttribute("stroke","transparent"),ne.setAttribute("fill","transparent"),this._createPopup(ne,k),K.append(ne)}return this.container.append(K),this.container}}class V extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class N extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class Y extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class X extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class J extends g{constructor(k){var F,K,te;const B=!!(k.data.hasPopup||(F=k.data.titleObj)!=null&&F.str||(K=k.data.contentsObj)!=null&&K.str||(te=k.data.richText)!=null&&te.str);super(k,{isRenderable:B,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends g{constructor(k){var K;super(k,{isRenderable:!0});const{filename:B,content:F}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(B),this.content=F,(K=this.linkService.eventBus)==null||K.dispatch("fileattachmentannotation",{source:this,filename:B,content:F})}render(){var B,F;this.container.className="fileAttachmentAnnotation";const k=document.createElement("div");return k.className="popupTriggerArea",k.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((B=this.data.titleObj)!=null&&B.str||(F=this.data.contentsObj)!=null&&F.str||this.data.richText)&&this._createPopup(k,this.data),this.container.append(k),this.container}_download(){var k;(k=this.downloadManager)==null||k.openOrDownloadData(this.container,this.content,this.filename)}}const L=class L{static render(k){var ne,D;const{annotations:B,div:F,viewport:K,accessibilityManager:te}=k;ve(this,U,tr).call(this,F,K);let M=0;for(const x of B){if(x.annotationType!==n.AnnotationType.POPUP){const{width:G,height:ie}=w(x.rect);if(G<=0||ie<=0)continue}const R=v.create({data:x,layer:F,page:k.page,viewport:K,linkService:k.linkService,downloadManager:k.downloadManager,imageResourcesPath:k.imageResourcesPath||"",renderForms:k.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:k.annotationStorage||new s.AnnotationStorage,enableScripting:k.enableScripting,hasJSActions:k.hasJSActions,fieldObjects:k.fieldObjects,mouseState:k.mouseState||{isDown:!1}});if(R.isRenderable){const G=R.render();if(x.hidden&&(G.style.visibility="hidden"),Array.isArray(G))for(const ie of G)ie.style.zIndex=M++,ve(ne=L,U,er).call(ne,ie,x.id,F,te);else G.style.zIndex=M++,R instanceof S?F.prepend(G):ve(D=L,U,er).call(D,G,x.id,F,te)}}ve(this,U,rr).call(this,F,k.annotationCanvasMap)}static update(k){const{annotationCanvasMap:B,div:F,viewport:K}=k;ve(this,U,tr).call(this,F,K),ve(this,U,rr).call(this,F,B),F.hidden=!1}};U=new WeakSet,er=function(k,B,F,K){const te=k.firstChild||k;te.id=`${i.AnnotationPrefix}${B}`,F.append(k),K==null||K.moveElementInDOM(F,k,te,!1)},tr=function(k,{width:B,height:F,rotation:K}){const{style:te}=k,M=K%180!==0,ne=Math.floor(B)+"px",D=Math.floor(F)+"px";te.width=M?D:ne,te.height=M?ne:D,k.setAttribute("data-main-rotation",K)},rr=function(k,B){if(B){for(const[F,K]of B){const te=k.querySelector(`[data-annotation-id="${F}"]`);if(!te)continue;const{firstChild:M}=te;M?M.nodeName==="CANVAS"?M.replaceWith(K):M.before(K):te.append(K)}B.clear()}},Se(L,U);let W=L;e.AnnotationLayer=W},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function r(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([s,f,a,o]){return["G",1-Math.min(1,.3*s+.59*a+.11*f+o)]}static G_CMYK([s]){return["CMYK",0,0,0,1-s]}static G_RGB([s]){return["RGB",s,s,s]}static G_HTML([s]){const f=r(s);return`#${f}${f}${f}`}static RGB_G([s,f,a]){return["G",.3*s+.59*f+.11*a]}static RGB_HTML([s,f,a]){const o=r(s),u=r(f),y=r(a);return`#${o}${u}${y}`}static T_HTML(){return"#00000000"}static CMYK_RGB([s,f,a,o]){return["RGB",1-Math.min(1,s+o),1-Math.min(1,a+o),1-Math.min(1,f+o)]}static CMYK_HTML(s){const f=this.CMYK_RGB(s).slice(1);return this.RGB_HTML(f)}static RGB_CMYK([s,f,a]){const o=1-s,u=1-f,y=1-a,w=Math.min(o,u,y);return["CMYK",o,u,y,w]}}e.ColorConverters=n},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var n=r(20);class i{static setupStorage(f,a,o,u,y){const w=u.getValue(a,{value:null});switch(o.name){case"textarea":if(w.value!==null&&(f.textContent=w.value),y==="print")break;f.addEventListener("input",v=>{u.setValue(a,{value:v.target.value})});break;case"input":if(o.attributes.type==="radio"||o.attributes.type==="checkbox"){if(w.value===o.attributes.xfaOn?f.setAttribute("checked",!0):w.value===o.attributes.xfaOff&&f.removeAttribute("checked"),y==="print")break;f.addEventListener("change",v=>{u.setValue(a,{value:v.target.checked?v.target.getAttribute("xfaOn"):v.target.getAttribute("xfaOff")})})}else{if(w.value!==null&&f.setAttribute("value",w.value),y==="print")break;f.addEventListener("input",v=>{u.setValue(a,{value:v.target.value})})}break;case"select":if(w.value!==null)for(const v of o.children)v.attributes.value===w.value&&(v.attributes.selected=!0);f.addEventListener("input",v=>{const g=v.target.options,b=g.selectedIndex===-1?"":g[g.selectedIndex].value;u.setValue(a,{value:b})});break}}static setAttributes({html:f,element:a,storage:o=null,intent:u,linkService:y}){const{attributes:w}=a,v=f instanceof HTMLAnchorElement;w.type==="radio"&&(w.name=`${w.name}-${u}`);for(const[g,b]of Object.entries(w))if(b!=null)switch(g){case"class":b.length&&f.setAttribute(g,b.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",b);break;case"style":Object.assign(f.style,b);break;case"textContent":f.textContent=b;break;default:(!v||g!=="href"&&g!=="newWindow")&&f.setAttribute(g,b)}v&&y.addLinkAttributes(f,w.href,w.newWindow),o&&w.dataId&&this.setupStorage(f,w.dataId,a,o)}static render(f){var l;const a=f.annotationStorage,o=f.linkService,u=f.xfaHtml,y=f.intent||"display",w=document.createElement(u.name);u.attributes&&this.setAttributes({html:w,element:u,intent:y,linkService:o});const v=[[u,-1,w]],g=f.div;if(g.append(w),f.viewport){const _=`matrix(${f.viewport.transform.join(",")})`;g.style.transform=_}y!=="richText"&&g.setAttribute("class","xfaLayer xfaFont");const b=[];for(;v.length>0;){const[_,h,d]=v.at(-1);if(h+1===_.children.length){v.pop();continue}const c=_.children[++v.at(-1)[1]];if(c===null)continue;const{name:p}=c;if(p==="#text"){const S=document.createTextNode(c.value);b.push(S),d.append(S);continue}let m;if((l=c==null?void 0:c.attributes)!=null&&l.xmlns?m=document.createElementNS(c.attributes.xmlns,p):m=document.createElement(p),d.append(m),c.attributes&&this.setAttributes({html:m,element:c,storage:a,intent:y,linkService:o}),c.children&&c.children.length>0)v.push([c,-1,m]);else if(c.value){const S=document.createTextNode(c.value);n.XfaText.shouldBuildText(p)&&b.push(S),m.append(S)}}for(const _ of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:b}}static update(f){const a=`matrix(${f.viewport.transform.join(",")})`;f.div.style.transform=a,f.div.hidden=!1}}e.XfaLayer=i},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=d;var n=r(1),i=r(8);const s=1e5,f=30,a=.8,o=new Map,u=/^\s+$/g;function y(c,p){const m=o.get(c);if(m)return m;p.save(),p.font=`${f}px ${c}`;const S=p.measureText("");let E=S.fontBoundingBoxAscent,T=Math.abs(S.fontBoundingBoxDescent);if(E){p.restore();const P=E/(E+T);return o.set(c,P),P}p.strokeStyle="red",p.clearRect(0,0,f,f),p.strokeText("g",0,0);let A=p.getImageData(0,0,f,f).data;T=0;for(let P=A.length-1-3;P>=0;P-=4)if(A[P]>0){T=Math.ceil(P/4/f);break}p.clearRect(0,0,f,f),p.strokeText("A",0,f),A=p.getImageData(0,0,f,f).data,E=0;for(let P=0,H=A.length;P<H;P+=4)if(A[P]>0){E=f-Math.floor(P/4/f);break}if(p.restore(),E){const P=E/(E+T);return o.set(c,P),P}return o.set(c,a),a}function w(c,p,m,S){const E=document.createElement("span"),T=c._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:p.str!=="",hasEOL:p.hasEOL,fontSize:0};c._textDivs.push(E);const A=n.Util.transform(c._viewport.transform,p.transform);let P=Math.atan2(A[1],A[0]);const H=m[p.fontName];H.vertical&&(P+=Math.PI/2);const O=Math.hypot(A[2],A[3]),q=O*y(H.fontFamily,S);let C,j;P===0?(C=A[4],j=A[5]-q):(C=A[4]+q*Math.sin(P),j=A[5]-q*Math.cos(P)),E.style.left=`${C}px`,E.style.top=`${j}px`,E.style.fontSize=`${O}px`,E.style.fontFamily=H.fontFamily,T.fontSize=O,E.setAttribute("role","presentation"),E.textContent=p.str,E.dir=p.dir,c._fontInspectorEnabled&&(E.dataset.fontName=p.fontName),P!==0&&(T.angle=P*(180/Math.PI));let V=!1;if(p.str.length>1||c._enhanceTextSelection&&u.test(p.str))V=!0;else if(p.str!==" "&&p.transform[0]!==p.transform[3]){const N=Math.abs(p.transform[0]),Y=Math.abs(p.transform[3]);N!==Y&&Math.max(N,Y)/Math.min(N,Y)>1.5&&(V=!0)}if(V&&(H.vertical?T.canvasWidth=p.height*c._viewport.scale:T.canvasWidth=p.width*c._viewport.scale),c._textDivProperties.set(E,T),c._textContentStream&&c._layoutText(E),c._enhanceTextSelection&&T.hasText){let N=1,Y=0;P!==0&&(N=Math.cos(P),Y=Math.sin(P));const X=(H.vertical?p.height:p.width)*c._viewport.scale,J=O;let Q,W;P!==0?(Q=[N,Y,-Y,N,C,j],W=n.Util.getAxialAlignedBoundingBox([0,0,X,J],Q)):W=[C,j,C+X,j+J],c._bounds.push({left:W[0],top:W[1],right:W[2],bottom:W[3],div:E,size:[X,J],m:Q})}}function v(c){if(c._canceled)return;const p=c._textDivs,m=c._capability,S=p.length;if(S>s){c._renderingDone=!0,m.resolve();return}if(!c._textContentStream)for(let E=0;E<S;E++)c._layoutText(p[E]);c._renderingDone=!0,m.resolve()}function g(c,p,m){let S=0;for(let E=0;E<m;E++){const T=c[p++];T>0&&(S=S?Math.min(T,S):T)}return S}function b(c){const p=c._bounds,m=c._viewport,S=l(m.width,m.height,p);for(let E=0;E<S.length;E++){const T=p[E].div,A=c._textDivProperties.get(T);if(A.angle===0){A.paddingLeft=p[E].left-S[E].left,A.paddingTop=p[E].top-S[E].top,A.paddingRight=S[E].right-p[E].right,A.paddingBottom=S[E].bottom-p[E].bottom,c._textDivProperties.set(T,A);continue}const P=S[E],H=p[E],O=H.m,q=O[0],C=O[1],j=[[0,0],[0,H.size[1]],[H.size[0],0],H.size],V=new Float64Array(64);for(let Y=0,X=j.length;Y<X;Y++){const J=n.Util.applyTransform(j[Y],O);V[Y+0]=q&&(P.left-J[0])/q,V[Y+4]=C&&(P.top-J[1])/C,V[Y+8]=q&&(P.right-J[0])/q,V[Y+12]=C&&(P.bottom-J[1])/C,V[Y+16]=C&&(P.left-J[0])/-C,V[Y+20]=q&&(P.top-J[1])/q,V[Y+24]=C&&(P.right-J[0])/-C,V[Y+28]=q&&(P.bottom-J[1])/q,V[Y+32]=q&&(P.left-J[0])/-q,V[Y+36]=C&&(P.top-J[1])/-C,V[Y+40]=q&&(P.right-J[0])/-q,V[Y+44]=C&&(P.bottom-J[1])/-C,V[Y+48]=C&&(P.left-J[0])/C,V[Y+52]=q&&(P.top-J[1])/-q,V[Y+56]=C&&(P.right-J[0])/C,V[Y+60]=q&&(P.bottom-J[1])/-q}const N=1+Math.min(Math.abs(q),Math.abs(C));A.paddingLeft=g(V,32,16)/N,A.paddingTop=g(V,48,16)/N,A.paddingRight=g(V,0,16)/N,A.paddingBottom=g(V,16,16)/N,c._textDivProperties.set(T,A)}}function l(c,p,m){const S=m.map(function(T,A){return{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom,index:A,x1New:void 0,x2New:void 0}});_(c,S);const E=new Array(m.length);for(const T of S){const A=T.index;E[A]={left:T.x1New,top:0,right:T.x2New,bottom:0}}m.map(function(T,A){const P=E[A],H=S[A];H.x1=T.top,H.y1=c-P.right,H.x2=T.bottom,H.y2=c-P.left,H.index=A,H.x1New=void 0,H.x2New=void 0}),_(p,S);for(const T of S){const A=T.index;E[A].top=T.x1New,E[A].bottom=T.x2New}return E}function _(c,p){p.sort(function(E,T){return E.x1-T.x1||E.index-T.index});const S=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const E of p){let T=0;for(;T<S.length&&S[T].end<=E.y1;)T++;let A=S.length-1;for(;A>=0&&S[A].start>=E.y2;)A--;let P,H,O,q,C=-1/0;for(O=T;O<=A;O++){P=S[O],H=P.boundary;let N;H.x2>E.x1?N=H.index>E.index?H.x1New:E.x1:H.x2New===void 0?N=(H.x2+E.x1)/2:N=H.x2New,N>C&&(C=N)}for(E.x1New=C,O=T;O<=A;O++)P=S[O],H=P.boundary,H.x2New===void 0?H.x2>E.x1?H.index>E.index&&(H.x2New=H.x2):H.x2New=C:H.x2New>C&&(H.x2New=Math.max(C,H.x2));const j=[];let V=null;for(O=T;O<=A;O++){P=S[O],H=P.boundary;const N=H.x2>E.x2?H:E;V===N?j.at(-1).end=P.end:(j.push({start:P.start,end:P.end,boundary:N}),V=N)}for(S[T].start<E.y1&&(j[0].start=E.y1,j.unshift({start:S[T].start,end:E.y1,boundary:S[T].boundary})),E.y2<S[A].end&&(j.at(-1).end=E.y2,j.push({start:E.y2,end:S[A].end,boundary:S[A].boundary})),O=T;O<=A;O++){if(P=S[O],H=P.boundary,H.x2New!==void 0)continue;let N=!1;for(q=T-1;!N&&q>=0&&S[q].start>=H.y1;q--)N=S[q].boundary===H;for(q=A+1;!N&&q<S.length&&S[q].end<=H.y2;q++)N=S[q].boundary===H;for(q=0;!N&&q<j.length;q++)N=j[q].boundary===H;N||(H.x2New=C)}Array.prototype.splice.apply(S,[T,A-T+1,...j])}for(const E of S){const T=E.boundary;T.x2New===void 0&&(T.x2New=Math.max(c,T.x2))}}class h{constructor({textContent:p,textContentStream:m,container:S,viewport:E,textDivs:T,textContentItemsStr:A,enhanceTextSelection:P}){var H;P&&(0,i.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=p,this._textContentStream=m,this._container=S,this._document=S.ownerDocument,this._viewport=E,this._textDivs=T||[],this._textContentItemsStr=A||[],this._enhanceTextSelection=!!P,this._fontInspectorEnabled=!!((H=globalThis.FontInspector)!=null&&H.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(p,m){for(let S=0,E=p.length;S<E;S++){if(p[S].str===void 0){if(p[S].type==="beginMarkedContentProps"||p[S].type==="beginMarkedContent"){const T=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),p[S].id!==null&&this._container.setAttribute("id",`${p[S].id}`),T.append(this._container)}else p[S].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(p[S].str),w(this,p[S],m,this._layoutTextCtx)}}_layoutText(p){const m=this._textDivProperties.get(p);let S="";if(m.canvasWidth!==0&&m.hasText){const{fontFamily:E}=p.style,{fontSize:T}=m;(T!==this._layoutTextLastFontSize||E!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${T*this._devicePixelRatio}px ${E}`,this._layoutTextLastFontSize=T,this._layoutTextLastFontFamily=E);const{width:A}=this._layoutTextCtx.measureText(p.textContent);if(A>0){const P=this._devicePixelRatio*m.canvasWidth/A;this._enhanceTextSelection&&(m.scale=P),S=`scaleX(${P})`}}if(m.angle!==0&&(S=`rotate(${m.angle}deg) ${S}`),S.length>0&&(this._enhanceTextSelection&&(m.originalTransform=S),p.style.transform=S),m.hasText&&this._container.append(p),m.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this._container.append(E)}}_render(p=0){const m=(0,n.createPromiseCapability)();let S=Object.create(null);const E=this._document.createElement("canvas");if(E.height=E.width=f,this._layoutTextCtx=E.getContext("2d",{alpha:!1}),this._textContent){const T=this._textContent.items,A=this._textContent.styles;this._processItems(T,A),m.resolve()}else if(this._textContentStream){const T=()=>{this._reader.read().then(({value:A,done:P})=>{if(P){m.resolve();return}Object.assign(S,A.styles),this._processItems(A.items,S),T()},m.reject)};this._reader=this._textContentStream.getReader(),T()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');m.promise.then(()=>{S=null,p?this._renderTimer=setTimeout(()=>{v(this),this._renderTimer=null},p):v(this)},this._capability.reject)}expandTextDivs(p=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(b(this),this._bounds=null);const m=[],S=[];for(let E=0,T=this._textDivs.length;E<T;E++){const A=this._textDivs[E],P=this._textDivProperties.get(A);P.hasText&&(p?(m.length=0,S.length=0,P.originalTransform&&m.push(P.originalTransform),P.paddingTop>0?(S.push(`${P.paddingTop}px`),m.push(`translateY(${-P.paddingTop}px)`)):S.push(0),P.paddingRight>0?S.push(`${P.paddingRight/P.scale}px`):S.push(0),P.paddingBottom>0?S.push(`${P.paddingBottom}px`):S.push(0),P.paddingLeft>0?(S.push(`${P.paddingLeft/P.scale}px`),m.push(`translateX(${-P.paddingLeft/P.scale}px)`)):S.push(0),A.style.padding=S.join(" "),m.length&&(A.style.transform=m.join(" "))):(A.style.padding=null,A.style.transform=P.originalTransform))}}}e.TextLayerRenderTask=h;function d(c){const p=new h({textContent:c.textContent,textContentStream:c.textContentStream,container:c.container,viewport:c.viewport,textDivs:c.textDivs,textContentItemsStr:c.textContentItemsStr,enhanceTextSelection:c.enhanceTextSelection});return p._render(c.timeout),p}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var n=r(8),i=r(1),s=r(3);let f=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=f;{let l=function(m){let S=[];const E=[];for(const T of m){if(T.fn==="save"){S.push({fnId:92,fn:"group",items:[]}),E.push(S),S=S.at(-1).items;continue}T.fn==="restore"?S=E.pop():S.push(T)}return S},_=function(m){if(Number.isInteger(m))return m.toString();const S=m.toFixed(10);let E=S.length-1;if(S[E]!=="0")return S;do E--;while(S[E]==="0");return S.substring(0,S[E]==="."?E:E+1)},h=function(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0)return m[0]===1&&m[3]===1?"":`scale(${_(m[0])} ${_(m[3])})`;if(m[0]===m[3]&&m[1]===-m[2]){const S=Math.acos(m[0])*180/Math.PI;return`rotate(${_(S)})`}}else if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1)return`translate(${_(m[4])} ${_(m[5])})`;return`matrix(${_(m[0])} ${_(m[1])} ${_(m[2])} ${_(m[3])} ${_(m[4])} ${_(m[5])})`};const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",y=["butt","round","square"],w=["miter","round","bevel"],v=function(m,S="",E=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!E)return URL.createObjectURL(new Blob([m],{type:S}));const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A=`data:${S};base64,`;for(let P=0,H=m.length;P<H;P+=3){const O=m[P]&255,q=m[P+1]&255,C=m[P+2]&255,j=O>>2,V=(O&3)<<4|q>>4,N=P+1<H?(q&15)<<2|C>>6:64,Y=P+2<H?C&63:64;A+=T[j]+T[V]+T[N]+T[Y]}return A},g=function(){const m=new Uint8Array([137,80,78,71,13,10,26,10]),S=12,E=new Int32Array(256);for(let C=0;C<256;C++){let j=C;for(let V=0;V<8;V++)j&1?j=3988292384^j>>1&2147483647:j=j>>1&2147483647;E[C]=j}function T(C,j,V){let N=-1;for(let Y=j;Y<V;Y++){const X=(N^C[Y])&255,J=E[X];N=N>>>8^J}return N^-1}function A(C,j,V,N){let Y=N;const X=j.length;V[Y]=X>>24&255,V[Y+1]=X>>16&255,V[Y+2]=X>>8&255,V[Y+3]=X&255,Y+=4,V[Y]=C.charCodeAt(0)&255,V[Y+1]=C.charCodeAt(1)&255,V[Y+2]=C.charCodeAt(2)&255,V[Y+3]=C.charCodeAt(3)&255,Y+=4,V.set(j,Y),Y+=j.length;const J=T(V,N+4,Y);V[Y]=J>>24&255,V[Y+1]=J>>16&255,V[Y+2]=J>>8&255,V[Y+3]=J&255}function P(C,j,V){let N=1,Y=0;for(let X=j;X<V;++X)N=(N+(C[X]&255))%65521,Y=(Y+N)%65521;return Y<<16|N}function H(C){if(!s.isNodeJS)return O(C);try{let j;parseInt(process.versions.node)>=8?j=C:j=Buffer.from(C);const V=require$$5.deflateSync(j,{level:9});return V instanceof Uint8Array?V:new Uint8Array(V)}catch(j){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+j)}return O(C)}function O(C){let j=C.length;const V=65535,N=Math.ceil(j/V),Y=new Uint8Array(2+j+N*5+4);let X=0;Y[X++]=120,Y[X++]=156;let J=0;for(;j>V;)Y[X++]=0,Y[X++]=255,Y[X++]=255,Y[X++]=0,Y[X++]=0,Y.set(C.subarray(J,J+V),X),X+=V,J+=V,j-=V;Y[X++]=1,Y[X++]=j&255,Y[X++]=j>>8&255,Y[X++]=~j&65535&255,Y[X++]=(~j&65535)>>8&255,Y.set(C.subarray(J),X),X+=C.length-J;const Q=P(C,0,C.length);return Y[X++]=Q>>24&255,Y[X++]=Q>>16&255,Y[X++]=Q>>8&255,Y[X++]=Q&255,Y}function q(C,j,V,N){const Y=C.width,X=C.height;let J,Q,W;const U=C.data;switch(j){case i.ImageKind.GRAYSCALE_1BPP:Q=0,J=1,W=Y+7>>3;break;case i.ImageKind.RGB_24BPP:Q=2,J=8,W=Y*3;break;case i.ImageKind.RGBA_32BPP:Q=6,J=8,W=Y*4;break;default:throw new Error("invalid format")}const $=new Uint8Array((1+W)*X);let ee=0,Z=0;for(let K=0;K<X;++K)$[ee++]=0,$.set(U.subarray(Z,Z+W),ee),Z+=W,ee+=W;if(j===i.ImageKind.GRAYSCALE_1BPP&&N){ee=0;for(let K=0;K<X;K++){ee++;for(let te=0;te<W;te++)$[ee++]^=255}}const L=new Uint8Array([Y>>24&255,Y>>16&255,Y>>8&255,Y&255,X>>24&255,X>>16&255,X>>8&255,X&255,J,Q,0,0,0]),I=H($),k=m.length+S*3+L.length+I.length,B=new Uint8Array(k);let F=0;return B.set(m,F),F+=m.length,A("IHDR",L,B,F),F+=S+L.length,A("IDATA",I,B,F),F+=S+I.length,A("IEND",new Uint8Array(0),B,F),v(B,"image/png",V)}return function(j,V,N){const Y=j.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:j.kind;return q(j,Y,V,N)}}();class b{constructor(){this.fontSizeScale=1,this.fontWeight=a.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(S,E){this.x=S,this.y=E}}let d=0,c=0,p=0;e.SVGGraphics=f=class{constructor(m,S,E=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new b,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=m,this.objs=S,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!E,this._operatorIdMapping=[];for(const T in i.OPS)this._operatorIdMapping[i.OPS[T]]=T}save(){this.transformStack.push(this.transformMatrix);const m=this.current;this.extraStack.push(m),this.current=m.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(m){this.save(),this.executeOpTree(m),this.restore()}loadDependencies(m){const S=m.fnArray,E=m.argsArray;for(let T=0,A=S.length;T<A;T++)if(S[T]===i.OPS.dependency)for(const P of E[T]){const H=P.startsWith("g_")?this.commonObjs:this.objs,O=new Promise(q=>{H.get(P,q)});this.current.dependencies.push(O)}return Promise.all(this.current.dependencies)}transform(m,S,E,T,A,P){const H=[m,S,E,T,A,P];this.transformMatrix=i.Util.transform(this.transformMatrix,H),this.tgrp=null}getSVG(m,S){this.viewport=S;const E=this._initialize(S);return this.loadDependencies(m).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(m)),E))}convertOpList(m){const S=this._operatorIdMapping,E=m.argsArray,T=m.fnArray,A=[];for(let P=0,H=T.length;P<H;P++){const O=T[P];A.push({fnId:O,fn:S[O],args:E[P]})}return l(A)}executeOpTree(m){for(const S of m){const E=S.fn,T=S.fnId,A=S.args;switch(T|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(A);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(A[0],A[1]);break;case i.OPS.setFont:this.setFont(A);break;case i.OPS.showText:this.showText(A[0]);break;case i.OPS.showSpacedText:this.showText(A[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(A[0],A[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(A[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(A[0]);break;case i.OPS.setHScale:this.setHScale(A[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(A[0],A[1],A[2],A[3],A[4],A[5]);break;case i.OPS.setTextRise:this.setTextRise(A[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(A[0]);break;case i.OPS.setLineWidth:this.setLineWidth(A[0]);break;case i.OPS.setLineJoin:this.setLineJoin(A[0]);break;case i.OPS.setLineCap:this.setLineCap(A[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(A[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(A[0],A[1],A[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(A[0],A[1],A[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(A);break;case i.OPS.setFillColorN:this.setFillColorN(A);break;case i.OPS.shadingFill:this.shadingFill(A[0]);break;case i.OPS.setDash:this.setDash(A[0],A[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(A[0]);break;case i.OPS.setFlatness:this.setFlatness(A[0]);break;case i.OPS.setGState:this.setGState(A[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(A[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(A[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(A[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(A[0],A[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(A[0],A[1],A[2],A[3],A[4],A[5]);break;case i.OPS.constructPath:this.constructPath(A[0],A[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(S.items);break;default:(0,i.warn)(`Unimplemented operator ${E}`);break}}}setWordSpacing(m){this.current.wordSpacing=m}setCharSpacing(m){this.current.charSpacing=m}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(m,S,E,T,A,P){const H=this.current;H.textMatrix=H.lineMatrix=[m,S,E,T,A,P],H.textMatrixScale=Math.hypot(m,S),H.x=H.lineX=0,H.y=H.lineY=0,H.xcoords=[],H.ycoords=[],H.tspan=this.svgFactory.createElement("svg:tspan"),H.tspan.setAttributeNS(null,"font-family",H.fontFamily),H.tspan.setAttributeNS(null,"font-size",`${_(H.fontSize)}px`),H.tspan.setAttributeNS(null,"y",_(-H.y)),H.txtElement=this.svgFactory.createElement("svg:text"),H.txtElement.append(H.tspan)}beginText(){const m=this.current;m.x=m.lineX=0,m.y=m.lineY=0,m.textMatrix=i.IDENTITY_MATRIX,m.lineMatrix=i.IDENTITY_MATRIX,m.textMatrixScale=1,m.tspan=this.svgFactory.createElement("svg:tspan"),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtgrp=this.svgFactory.createElement("svg:g"),m.xcoords=[],m.ycoords=[]}moveText(m,S){const E=this.current;E.x=E.lineX+=m,E.y=E.lineY+=S,E.xcoords=[],E.ycoords=[],E.tspan=this.svgFactory.createElement("svg:tspan"),E.tspan.setAttributeNS(null,"font-family",E.fontFamily),E.tspan.setAttributeNS(null,"font-size",`${_(E.fontSize)}px`),E.tspan.setAttributeNS(null,"y",_(-E.y))}showText(m){const S=this.current,E=S.font,T=S.fontSize;if(T===0)return;const A=S.fontSizeScale,P=S.charSpacing,H=S.wordSpacing,O=S.fontDirection,q=S.textHScale*O,C=E.vertical,j=C?1:-1,V=E.defaultVMetrics,N=T*S.fontMatrix[0];let Y=0;for(const Q of m){if(Q===null){Y+=O*H;continue}else if(typeof Q=="number"){Y+=j*Q*T/1e3;continue}const W=(Q.isSpace?H:0)+P,U=Q.fontChar;let $,ee,Z=Q.width;if(C){let I;const k=Q.vmetric||V;I=Q.vmetric?k[1]:Z*.5,I=-I*N;const B=k[2]*N;Z=k?-k[0]:Z,$=I/A,ee=(Y+B)/A}else $=Y/A,ee=0;(Q.isInFont||E.missingFile)&&(S.xcoords.push(S.x+$),C&&S.ycoords.push(-S.y+ee),S.tspan.textContent+=U);let L;C?L=Z*N-W*O:L=Z*N+W*O,Y+=L}S.tspan.setAttributeNS(null,"x",S.xcoords.map(_).join(" ")),C?S.tspan.setAttributeNS(null,"y",S.ycoords.map(_).join(" ")):S.tspan.setAttributeNS(null,"y",_(-S.y)),C?S.y-=Y:S.x+=Y*q,S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${_(S.fontSize)}px`),S.fontStyle!==a.fontStyle&&S.tspan.setAttributeNS(null,"font-style",S.fontStyle),S.fontWeight!==a.fontWeight&&S.tspan.setAttributeNS(null,"font-weight",S.fontWeight);const X=S.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(X===i.TextRenderingMode.FILL||X===i.TextRenderingMode.FILL_STROKE?(S.fillColor!==a.fillColor&&S.tspan.setAttributeNS(null,"fill",S.fillColor),S.fillAlpha<1&&S.tspan.setAttributeNS(null,"fill-opacity",S.fillAlpha)):S.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?S.tspan.setAttributeNS(null,"fill","transparent"):S.tspan.setAttributeNS(null,"fill","none"),X===i.TextRenderingMode.STROKE||X===i.TextRenderingMode.FILL_STROKE){const Q=1/(S.textMatrixScale||1);this._setStrokeAttributes(S.tspan,Q)}let J=S.textMatrix;S.textRise!==0&&(J=J.slice(),J[5]+=S.textRise),S.txtElement.setAttributeNS(null,"transform",`${h(J)} scale(${_(q)}, -1)`),S.txtElement.setAttributeNS(o,"xml:space","preserve"),S.txtElement.append(S.tspan),S.txtgrp.append(S.txtElement),this._ensureTransformGroup().append(S.txtElement)}setLeadingMoveText(m,S){this.setLeading(-S),this.moveText(m,S)}addFontStyle(m){if(!m.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const S=v(m.data,m.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${m.loadedName}"; src: url(${S}); }
`}setFont(m){const S=this.current,E=this.commonObjs.get(m[0]);let T=m[1];S.font=E,this.embedFonts&&!E.missingFile&&!this.embeddedFonts[E.loadedName]&&(this.addFontStyle(E),this.embeddedFonts[E.loadedName]=E),S.fontMatrix=E.fontMatrix||i.FONT_IDENTITY_MATRIX;let A="normal";E.black?A="900":E.bold&&(A="bold");const P=E.italic?"italic":"normal";T<0?(T=-T,S.fontDirection=-1):S.fontDirection=1,S.fontSize=T,S.fontFamily=E.loadedName,S.fontWeight=A,S.fontStyle=P,S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"y",_(-S.y)),S.xcoords=[],S.ycoords=[]}endText(){var S;const m=this.current;m.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((S=m.txtElement)!=null&&S.hasChildNodes())&&(m.element=m.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(m){m>0&&(this.current.lineWidth=m)}setLineCap(m){this.current.lineCap=y[m]}setLineJoin(m){this.current.lineJoin=w[m]}setMiterLimit(m){this.current.miterLimit=m}setStrokeAlpha(m){this.current.strokeAlpha=m}setStrokeRGBColor(m,S,E){this.current.strokeColor=i.Util.makeHexColor(m,S,E)}setFillAlpha(m){this.current.fillAlpha=m}setFillRGBColor(m,S,E){this.current.fillColor=i.Util.makeHexColor(m,S,E),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(m){this.current.strokeColor=this._makeColorN_Pattern(m)}setFillColorN(m){this.current.fillColor=this._makeColorN_Pattern(m)}shadingFill(m){const S=this.viewport.width,E=this.viewport.height,T=i.Util.inverseTransform(this.transformMatrix),A=i.Util.applyTransform([0,0],T),P=i.Util.applyTransform([0,E],T),H=i.Util.applyTransform([S,0],T),O=i.Util.applyTransform([S,E],T),q=Math.min(A[0],P[0],H[0],O[0]),C=Math.min(A[1],P[1],H[1],O[1]),j=Math.max(A[0],P[0],H[0],O[0]),V=Math.max(A[1],P[1],H[1],O[1]),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x",q),N.setAttributeNS(null,"y",C),N.setAttributeNS(null,"width",j-q),N.setAttributeNS(null,"height",V-C),N.setAttributeNS(null,"fill",this._makeShadingPattern(m)),this.current.fillAlpha<1&&N.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(N)}_makeColorN_Pattern(m){return m[0]==="TilingPattern"?this._makeTilingPattern(m):this._makeShadingPattern(m)}_makeTilingPattern(m){const S=m[1],E=m[2],T=m[3]||i.IDENTITY_MATRIX,[A,P,H,O]=m[4],q=m[5],C=m[6],j=m[7],V=`shading${p++}`,[N,Y,X,J]=i.Util.normalizeRect([...i.Util.applyTransform([A,P],T),...i.Util.applyTransform([H,O],T)]),[Q,W]=i.Util.singularValueDecompose2dScale(T),U=q*Q,$=C*W,ee=this.svgFactory.createElement("svg:pattern");ee.setAttributeNS(null,"id",V),ee.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ee.setAttributeNS(null,"width",U),ee.setAttributeNS(null,"height",$),ee.setAttributeNS(null,"x",`${N}`),ee.setAttributeNS(null,"y",`${Y}`);const Z=this.svg,L=this.transformMatrix,I=this.current.fillColor,k=this.current.strokeColor,B=this.svgFactory.create(X-N,J-Y);if(this.svg=B,this.transformMatrix=T,j===2){const F=i.Util.makeHexColor(...S);this.current.fillColor=F,this.current.strokeColor=F}return this.executeOpTree(this.convertOpList(E)),this.svg=Z,this.transformMatrix=L,this.current.fillColor=I,this.current.strokeColor=k,ee.append(B.childNodes[0]),this.defs.append(ee),`url(#${V})`}_makeShadingPattern(m){switch(typeof m=="string"&&(m=this.objs.get(m)),m[0]){case"RadialAxial":const S=`shading${p++}`,E=m[3];let T;switch(m[1]){case"axial":const A=m[4],P=m[5];T=this.svgFactory.createElement("svg:linearGradient"),T.setAttributeNS(null,"id",S),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"x1",A[0]),T.setAttributeNS(null,"y1",A[1]),T.setAttributeNS(null,"x2",P[0]),T.setAttributeNS(null,"y2",P[1]);break;case"radial":const H=m[4],O=m[5],q=m[6],C=m[7];T=this.svgFactory.createElement("svg:radialGradient"),T.setAttributeNS(null,"id",S),T.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),T.setAttributeNS(null,"cx",O[0]),T.setAttributeNS(null,"cy",O[1]),T.setAttributeNS(null,"r",C),T.setAttributeNS(null,"fx",H[0]),T.setAttributeNS(null,"fy",H[1]),T.setAttributeNS(null,"fr",q);break;default:throw new Error(`Unknown RadialAxial type: ${m[1]}`)}for(const A of E){const P=this.svgFactory.createElement("svg:stop");P.setAttributeNS(null,"offset",A[0]),P.setAttributeNS(null,"stop-color",A[1]),T.append(P)}return this.defs.append(T),`url(#${S})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${m[0]}`)}}setDash(m,S){this.current.dashArray=m,this.current.dashPhase=S}constructPath(m,S){const E=this.current;let T=E.x,A=E.y,P=[],H=0;for(const O of m)switch(O|0){case i.OPS.rectangle:T=S[H++],A=S[H++];const q=S[H++],C=S[H++],j=T+q,V=A+C;P.push("M",_(T),_(A),"L",_(j),_(A),"L",_(j),_(V),"L",_(T),_(V),"Z");break;case i.OPS.moveTo:T=S[H++],A=S[H++],P.push("M",_(T),_(A));break;case i.OPS.lineTo:T=S[H++],A=S[H++],P.push("L",_(T),_(A));break;case i.OPS.curveTo:T=S[H+4],A=S[H+5],P.push("C",_(S[H]),_(S[H+1]),_(S[H+2]),_(S[H+3]),_(T),_(A)),H+=6;break;case i.OPS.curveTo2:P.push("C",_(T),_(A),_(S[H]),_(S[H+1]),_(S[H+2]),_(S[H+3])),T=S[H+2],A=S[H+3],H+=4;break;case i.OPS.curveTo3:T=S[H+2],A=S[H+3],P.push("C",_(S[H]),_(S[H+1]),_(T),_(A),_(T),_(A)),H+=4;break;case i.OPS.closePath:P.push("Z");break}P=P.join(" "),E.path&&m.length>0&&m[0]!==i.OPS.rectangle&&m[0]!==i.OPS.moveTo?P=E.path.getAttributeNS(null,"d")+P:(E.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(E.path)),E.path.setAttributeNS(null,"d",P),E.path.setAttributeNS(null,"fill","none"),E.element=E.path,E.setCurrentPoint(T,A)}endPath(){const m=this.current;if(m.path=null,!this.pendingClip)return;if(!m.element){this.pendingClip=null;return}const S=`clippath${d++}`,E=this.svgFactory.createElement("svg:clipPath");E.setAttributeNS(null,"id",S),E.setAttributeNS(null,"transform",h(this.transformMatrix));const T=m.element.cloneNode(!0);if(this.pendingClip==="evenodd"?T.setAttributeNS(null,"clip-rule","evenodd"):T.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,E.append(T),this.defs.append(E),m.activeClipUrl){m.clipGroup=null;for(const A of this.extraStack)A.clipGroup=null;E.setAttributeNS(null,"clip-path",m.activeClipUrl)}m.activeClipUrl=`url(#${S})`,this.tgrp=null}clip(m){this.pendingClip=m}closePath(){const m=this.current;if(m.path){const S=`${m.path.getAttributeNS(null,"d")}Z`;m.path.setAttributeNS(null,"d",S)}}setLeading(m){this.current.leading=-m}setTextRise(m){this.current.textRise=m}setTextRenderingMode(m){this.current.textRenderingMode=m}setHScale(m){this.current.textHScale=m/100}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(const[S,E]of m)switch(S){case"LW":this.setLineWidth(E);break;case"LC":this.setLineCap(E);break;case"LJ":this.setLineJoin(E);break;case"ML":this.setMiterLimit(E);break;case"D":this.setDash(E[0],E[1]);break;case"RI":this.setRenderingIntent(E);break;case"FL":this.setFlatness(E);break;case"Font":this.setFont(E);break;case"CA":this.setStrokeAlpha(E);break;case"ca":this.setFillAlpha(E);break;default:(0,i.warn)(`Unimplemented graphic state operator ${S}`);break}}fill(){const m=this.current;m.element&&(m.element.setAttributeNS(null,"fill",m.fillColor),m.element.setAttributeNS(null,"fill-opacity",m.fillAlpha),this.endPath())}stroke(){const m=this.current;m.element&&(this._setStrokeAttributes(m.element),m.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(m,S=1){const E=this.current;let T=E.dashArray;S!==1&&T.length>0&&(T=T.map(function(A){return S*A})),m.setAttributeNS(null,"stroke",E.strokeColor),m.setAttributeNS(null,"stroke-opacity",E.strokeAlpha),m.setAttributeNS(null,"stroke-miterlimit",_(E.miterLimit)),m.setAttributeNS(null,"stroke-linecap",E.lineCap),m.setAttributeNS(null,"stroke-linejoin",E.lineJoin),m.setAttributeNS(null,"stroke-width",_(S*E.lineWidth)+"px"),m.setAttributeNS(null,"stroke-dasharray",T.map(_).join(" ")),m.setAttributeNS(null,"stroke-dashoffset",_(S*E.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width","1px"),m.setAttributeNS(null,"height","1px"),m.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(m)}paintImageXObject(m){const S=m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m);if(!S){(0,i.warn)(`Dependent image with object ID ${m} is not ready yet`);return}this.paintInlineImageXObject(S)}paintInlineImageXObject(m,S){const E=m.width,T=m.height,A=g(m,this.forceDataSchema,!!S),P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",_(E)),P.setAttributeNS(null,"height",_(T)),this.current.element=P,this.clip("nonzero");const H=this.svgFactory.createElement("svg:image");H.setAttributeNS(u,"xlink:href",A),H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y",_(-T)),H.setAttributeNS(null,"width",_(E)+"px"),H.setAttributeNS(null,"height",_(T)+"px"),H.setAttributeNS(null,"transform",`scale(${_(1/E)} ${_(-1/T)})`),S?S.append(H):this._ensureTransformGroup().append(H)}paintImageMaskXObject(m){const S=this.current,E=m.width,T=m.height,A=S.fillColor;S.maskId=`mask${c++}`;const P=this.svgFactory.createElement("svg:mask");P.setAttributeNS(null,"id",S.maskId);const H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x","0"),H.setAttributeNS(null,"y","0"),H.setAttributeNS(null,"width",_(E)),H.setAttributeNS(null,"height",_(T)),H.setAttributeNS(null,"fill",A),H.setAttributeNS(null,"mask",`url(#${S.maskId})`),this.defs.append(P),this._ensureTransformGroup().append(H),this.paintInlineImageXObject(m,P)}paintFormXObjectBegin(m,S){if(Array.isArray(m)&&m.length===6&&this.transform(m[0],m[1],m[2],m[3],m[4],m[5]),S){const E=S[2]-S[0],T=S[3]-S[1],A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x",S[0]),A.setAttributeNS(null,"y",S[1]),A.setAttributeNS(null,"width",_(E)),A.setAttributeNS(null,"height",_(T)),this.current.element=A,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(m){const S=this.svgFactory.create(m.width,m.height),E=this.svgFactory.createElement("svg:defs");S.append(E),this.defs=E;const T=this.svgFactory.createElement("svg:g");return T.setAttributeNS(null,"transform",h(m.transform)),S.append(T),this.svg=T,S}_ensureClipGroup(){if(!this.current.clipGroup){const m=this.svgFactory.createElement("svg:g");m.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(m),this.current.clipGroup=m}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",h(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var n=r(1),i=r(33);const s=require$$5,f=require$$5,a=require$$5,o=require$$5,u=/^file:\/\/\/[a-zA-Z]:\//;function y(c){const p=o.parse(c);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(c)?o.parse(`file:///${c}`):(p.host||(p.protocol="file:"),p)}class w{constructor(p){this.source=p,this.url=y(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new h(this):new l(this),this._fullRequestReader}getRangeReader(p,m){if(m<=this._progressiveDataLength)return null;const S=this.isFsUrl?new d(this,p,m):new _(this,p,m);return this._rangeRequestReaders.push(S),S}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const m of this._rangeRequestReaders.slice(0))m.cancel(p)}}e.PDFNodeStream=w;class v{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const m=p.source;this._contentLength=m.length,this._loaded=0,this._filename=null,this._disableRange=m.disableRange||!1,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!m.disableStream,this._isRangeSupported=!m.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=p.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",m=>{this._error(m)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const m=p.source;this._isStreamingSupported=!m.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=p.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",m=>{this._error(m)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function b(c,p){return{protocol:c.protocol,auth:c.auth,host:c.hostname,port:c.port,path:c.path,method:"GET",headers:p}}class l extends v{constructor(p){super(p);const m=S=>{if(S.statusCode===404){const P=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=P,this._headersCapability.reject(P);return}this._headersCapability.resolve(),this._setReadableStream(S);const E=P=>this._readableStream.headers[P.toLowerCase()],{allowRangeRequests:T,suggestedLength:A}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=A||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(E)};this._request=null,this._url.protocol==="http:"?this._request=f.request(b(this._url,p.httpHeaders),m):this._request=a.request(b(this._url,p.httpHeaders),m),this._request.on("error",S=>{this._storedError=S,this._headersCapability.reject(S)}),this._request.end()}}class _ extends g{constructor(p,m,S){super(p),this._httpHeaders={};for(const T in p.httpHeaders){const A=p.httpHeaders[T];typeof A>"u"||(this._httpHeaders[T]=A)}this._httpHeaders.Range=`bytes=${m}-${S-1}`;const E=T=>{if(T.statusCode===404){const A=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=A;return}this._setReadableStream(T)};this._request=null,this._url.protocol==="http:"?this._request=f.request(b(this._url,this._httpHeaders),E):this._request=a.request(b(this._url,this._httpHeaders),E),this._request.on("error",T=>{this._storedError=T}),this._request.end()}}class h extends v{constructor(p){super(p);let m=decodeURIComponent(this._url.path);u.test(this._url.href)&&(m=m.replace(/^\//,"")),s.lstat(m,(S,E)=>{if(S){S.code==="ENOENT"&&(S=new n.MissingPDFException(`Missing PDF "${m}".`)),this._storedError=S,this._headersCapability.reject(S);return}this._contentLength=E.size,this._setReadableStream(s.createReadStream(m)),this._headersCapability.resolve()})}}class d extends g{constructor(p,m,S){super(p);let E=decodeURIComponent(this._url.path);u.test(this._url.href)&&(E=E.replace(/^\//,"")),this._setReadableStream(s.createReadStream(E,{start:m,end:S-1}))}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=o,e.extractFilenameFromHeader=a,e.validateRangeRequestCapabilities=f,e.validateResponseStatus=u;var n=r(1),i=r(34),s=r(8);function f({getResponseHeader:y,isHttp:w,rangeChunkSize:v,disableRange:g}){const b={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(y("Content-Length"),10);return!Number.isInteger(l)||(b.suggestedLength=l,l<=2*v)||g||!w||y("Accept-Ranges")!=="bytes"||(y("Content-Encoding")||"identity")!=="identity"||(b.allowRangeRequests=!0),b}function a(y){const w=y("Content-Disposition");if(w){let v=(0,i.getFilenameFromContentDispositionHeader)(w);if(v.includes("%"))try{v=decodeURIComponent(v)}catch{}if((0,s.isPdfFile)(v))return v}return null}function o(y,w){return y===404||y===0&&w.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+w+'".'):new n.UnexpectedResponseException(`Unexpected server response (${y}) while retrieving PDF "${w}".`,y)}function u(y){return y===200||y===206}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=i;var n=r(1);function i(s){let f=!0,a=o("filename\\*","i").exec(s);if(a){a=a[1];let l=v(a);return l=unescape(l),l=g(l),l=b(l),y(l)}if(a=w(s),a){const l=b(a);return y(l)}if(a=o("filename","i").exec(s),a){a=a[1];let l=v(a);return l=b(l),y(l)}function o(l,_){return new RegExp("(?:^|;)\\s*"+l+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',_)}function u(l,_){if(l){if(!/^[\x00-\xFF]+$/.test(_))return _;try{const h=new TextDecoder(l,{fatal:!0}),d=(0,n.stringToBytes)(_);_=h.decode(d),f=!1}catch{}}return _}function y(l){return f&&/[\x80-\xff]/.test(l)&&(l=u("utf-8",l),f&&(l=u("iso-8859-1",l))),l}function w(l){const _=[];let h;const d=o("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=d.exec(l))!==null;){let[,p,m,S]=h;if(p=parseInt(p,10),p in _){if(p===0)break;continue}_[p]=[m,S]}const c=[];for(let p=0;p<_.length&&p in _;++p){let[m,S]=_[p];S=v(S),m&&(S=unescape(S),p===0&&(S=g(S))),c.push(S)}return c.join("")}function v(l){if(l.startsWith('"')){const _=l.slice(1).split('\\"');for(let h=0;h<_.length;++h){const d=_[h].indexOf('"');d!==-1&&(_[h]=_[h].slice(0,d),_.length=h+1),_[h]=_[h].replace(/\\(.)/g,"$1")}l=_.join('"')}return l}function g(l){const _=l.indexOf("'");if(_===-1)return l;const h=l.slice(0,_),c=l.slice(_+1).replace(/^[^']*'/,"");return u(h,c)}function b(l){return!l.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(l)?l:l.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(_,h,d,c){if(d==="q"||d==="Q")return c=c.replace(/_/g," "),c=c.replace(/=([0-9a-fA-F]{2})/g,function(p,m){return String.fromCharCode(parseInt(m,16))}),u(h,c);try{c=atob(c)}catch{}return u(h,c)})}return""}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var n=r(1),i=r(33);const s=200,f=206;function a(v){const g=v.response;return typeof g!="string"?g:(0,n.stringToBytes)(g).buffer}class o{constructor(g,b={}){this.url=g,this.isHttp=/^https?:/i.test(g),this.httpHeaders=this.isHttp&&b.httpHeaders||Object.create(null),this.withCredentials=b.withCredentials||!1,this.getXhr=b.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(g,b,l){const _={begin:g,end:b};for(const h in l)_[h]=l[h];return this.request(_)}requestFull(g){return this.request(g)}request(g){const b=this.getXhr(),l=this.currXhrId++,_=this.pendingRequests[l]={xhr:b};b.open("GET",this.url),b.withCredentials=this.withCredentials;for(const h in this.httpHeaders){const d=this.httpHeaders[h];typeof d>"u"||b.setRequestHeader(h,d)}return this.isHttp&&"begin"in g&&"end"in g?(b.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),_.expectedStatus=f):_.expectedStatus=s,b.responseType="arraybuffer",g.onError&&(b.onerror=function(h){g.onError(b.status)}),b.onreadystatechange=this.onStateChange.bind(this,l),b.onprogress=this.onProgress.bind(this,l),_.onHeadersReceived=g.onHeadersReceived,_.onDone=g.onDone,_.onError=g.onError,_.onProgress=g.onProgress,b.send(null),l}onProgress(g,b){var _;const l=this.pendingRequests[g];l&&((_=l.onProgress)==null||_.call(l,b))}onStateChange(g,b){var p,m,S;const l=this.pendingRequests[g];if(!l)return;const _=l.xhr;if(_.readyState>=2&&l.onHeadersReceived&&(l.onHeadersReceived(),delete l.onHeadersReceived),_.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],_.status===0&&this.isHttp){(p=l.onError)==null||p.call(l,_.status);return}const h=_.status||s;if(!(h===s&&l.expectedStatus===f)&&h!==l.expectedStatus){(m=l.onError)==null||m.call(l,_.status);return}const c=a(_);if(h===f){const E=_.getResponseHeader("Content-Range"),T=/bytes (\d+)-(\d+)\/(\d+)/.exec(E);l.onDone({begin:parseInt(T[1],10),chunk:c})}else c?l.onDone({begin:0,chunk:c}):(S=l.onError)==null||S.call(l,_.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const b=this.pendingRequests[g].xhr;delete this.pendingRequests[g],b.abort()}}class u{constructor(g){this._source=g,this._manager=new o(g.url,{httpHeaders:g.httpHeaders,withCredentials:g.withCredentials}),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const b=this._rangeRequestReaders.indexOf(g);b>=0&&this._rangeRequestReaders.splice(b,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y(this._manager,this._source),this._fullRequestReader}getRangeReader(g,b){const l=new w(this._manager,g,b);return l.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(l),l}cancelAllRequests(g){var b;(b=this._fullRequestReader)==null||b.cancel(g);for(const l of this._rangeRequestReaders.slice(0))l.cancel(g)}}e.PDFNetworkStream=u;class y{constructor(g,b){this._manager=g;const l={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._fullRequestId=g.requestFull(l),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=b.disableRange||!1,this._contentLength=b.length,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,b=this._manager.getRequestXhr(g),l=d=>b.getResponseHeader(d),{allowRangeRequests:_,suggestedLength:h}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});_&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(l),this._isRangeSupported&&this._manager.abortRequest(g),this._headersReceivedCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=(0,i.createResponseStatusError)(g,this._url),this._headersReceivedCapability.reject(this._storedError);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var b;(b=this.onProgress)==null||b.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=(0,n.createPromiseCapability)();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersReceivedCapability.reject(g);for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class w{constructor(g,b,l){this._manager=g;const _={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._requestId=g.requestRange(b,l,_),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const b=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunk=b,this._done=!0;for(const l of this._requests)l.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError=(0,i.createResponseStatusError)(g,this._url);for(const b of this._requests)b.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var b;this.isStreamingSupported||(b=this.onProgress)==null||b.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const b=this._queuedChunk;return this._queuedChunk=null,{value:b,done:!1}}if(this._done)return{value:void 0,done:!0};const g=(0,n.createPromiseCapability)();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var n=r(1),i=r(33);function s(y,w,v){return{method:"GET",headers:y,signal:v.signal,mode:"cors",credentials:w?"include":"same-origin",redirect:"follow"}}function f(y){const w=new Headers;for(const v in y){const g=y[v];typeof g>"u"||w.append(v,g)}return w}class a{constructor(w){this.source=w,this.isHttp=/^https?:/i.test(w.url),this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new o(this),this._fullRequestReader}getRangeReader(w,v){if(v<=this._progressiveDataLength)return null;const g=new u(this,w,v);return this._rangeRequestReaders.push(g),g}cancelAllRequests(w){this._fullRequestReader&&this._fullRequestReader.cancel(w);for(const v of this._rangeRequestReaders.slice(0))v.cancel(w)}}e.PDFFetchStream=a;class o{constructor(w){this._stream=w,this._reader=null,this._loaded=0,this._filename=null;const v=w.source;this._withCredentials=v.withCredentials||!1,this._contentLength=v.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._headers=f(this._stream.httpHeaders);const g=v.url;fetch(g,s(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,i.validateResponseStatus)(b.status))throw(0,i.createResponseStatusError)(b.status,g);this._reader=b.body.getReader(),this._headersCapability.resolve();const l=d=>b.headers.get(d),{allowRangeRequests:_,suggestedLength:h}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=h||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:w,done:v}=await this._reader.read();return v?{value:w,done:v}:(this._loaded+=w.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){this._reader&&this._reader.cancel(w),this._abortController.abort()}}class u{constructor(w,v,g){this._stream=w,this._reader=null,this._loaded=0;const b=w.source;this._withCredentials=b.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!b.disableStream,this._abortController=new AbortController,this._headers=f(this._stream.httpHeaders),this._headers.append("Range",`bytes=${v}-${g-1}`);const l=b.url;fetch(l,s(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,i.validateResponseStatus)(_.status))throw(0,i.createResponseStatusError)(_.status,l);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:w,done:v}=await this._reader.read();return v?{value:w,done:v}:(this._loaded+=w.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(w).buffer,done:!1})}cancel(w){this._reader&&this._reader.cancel(w),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__w_pdfjs_require__),r.exports}var __webpack_exports__={};return(()=>{var t=__webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return i.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return f.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return a.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return y.SVGGraphics}}),Object.defineProperty(t,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return w.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(t,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r.version}});var e=__w_pdfjs_require__(1),r=__w_pdfjs_require__(4),n=__w_pdfjs_require__(8),i=__w_pdfjs_require__(22),s=__w_pdfjs_require__(7),f=__w_pdfjs_require__(27),a=__w_pdfjs_require__(15),o=__w_pdfjs_require__(3),u=__w_pdfjs_require__(30),y=__w_pdfjs_require__(31),w=__w_pdfjs_require__(29);if(o.isNodeJS){const{PDFNodeStream:v}=__w_pdfjs_require__(32);(0,r.setPDFNetworkStreamFactory)(g=>new v(g))}else{const{PDFNetworkStream:v}=__w_pdfjs_require__(35),{PDFFetchStream:g}=__w_pdfjs_require__(36);(0,r.setPDFNetworkStreamFactory)(b=>(0,n.isValidFetchUrl)(b.url)?new g(b):new v(b))}})(),__webpack_exports__})())}(pdf)),pdf.exports}var pdfExports=requirePdf(),papaparse_min$1={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var papaparse_min=papaparse_min$1.exports,hasRequiredPapaparse_min;function requirePapaparse_min(){return hasRequiredPapaparse_min||(hasRequiredPapaparse_min=1,function(t,e){((r,n)=>{t.exports=n()})(papaparse_min,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},i,s=!n.document&&!!n.postMessage,f=n.IS_PAPA_WORKER||!1,a={},o=0,u={};function y(T){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(A){var P=m(A);P.chunkSize=parseInt(P.chunkSize),A.step||A.chunk||(P.chunkSize=null),this._handle=new l(P),(this._handle.streamer=this)._config=P}).call(this,T),this.parseChunk=function(A,P){var H=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<H){let q=this._config.newline;q||(O=this._config.quoteChar||'"',q=this._handle.guessLineEndings(A,O)),A=[...A.split(q).slice(H)].join(q)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(A))!==void 0&&(A=O),this.isFirstChunk=!1,this._halted=!1;var H=this._partialLine+A,O=(this._partialLine="",this._handle.parse(H,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(A=O.meta.cursor,H=(this._finished||(this._partialLine=H.substring(A-this._baseIndex),this._baseIndex=A),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)n.postMessage({results:O,workerId:u.WORKER_ID,finished:H});else if(E(this._config.chunk)&&!P){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!H||!E(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),H||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(A){E(this._config.error)?this._config.error(A):f&&this._config.error&&n.postMessage({workerId:u.WORKER_ID,error:A,finished:!1})}}function w(T){var A;(T=T||{}).chunkSize||(T.chunkSize=u.RemoteChunkSize),y.call(this,T),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(A=new XMLHttpRequest,this._config.withCredentials&&(A.withCredentials=this._config.withCredentials),s||(A.onload=S(this._chunkLoaded,this),A.onerror=S(this._chunkError,this)),A.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var P,H=this._config.downloadRequestHeaders;for(P in H)A.setRequestHeader(P,H[P])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,A.setRequestHeader("Range","bytes="+this._start+"-"+O));try{A.send(this._config.downloadRequestBody)}catch(q){this._chunkError(q.message)}s&&A.status===0&&this._chunkError()}},this._chunkLoaded=function(){A.readyState===4&&(A.status<200||400<=A.status?this._chunkError():(this._start+=this._config.chunkSize||A.responseText.length,this._finished=!this._config.chunkSize||this._start>=(P=>(P=P.getResponseHeader("Content-Range"))!==null?parseInt(P.substring(P.lastIndexOf("/")+1)):-1)(A),this.parseChunk(A.responseText)))},this._chunkError=function(P){P=A.statusText||P,this._sendError(new Error(P))}}function v(T){(T=T||{}).chunkSize||(T.chunkSize=u.LocalChunkSize),y.call(this,T);var A,P,H=typeof FileReader<"u";this.stream=function(O){this._input=O,P=O.slice||O.webkitSlice||O.mozSlice,H?((A=new FileReader).onload=S(this._chunkLoaded,this),A.onerror=S(this._chunkError,this)):A=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,q=(this._config.chunkSize&&(q=Math.min(this._start+this._config.chunkSize,this._input.size),O=P.call(O,this._start,q)),A.readAsText(O,this._config.encoding));H||this._chunkLoaded({target:{result:q}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(A.error)}}function g(T){var A;y.call(this,T=T||{}),this.stream=function(P){return A=P,this._nextChunk()},this._nextChunk=function(){var P,H;if(!this._finished)return P=this._config.chunkSize,A=P?(H=A.substring(0,P),A.substring(P)):(H=A,""),this._finished=!A,this.parseChunk(H)}}function b(T){y.call(this,T=T||{});var A=[],P=!0,H=!1;this.pause=function(){y.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){y.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){H&&A.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),A.length?this.parseChunk(A.shift()):P=!0},this._streamData=S(function(O){try{A.push(typeof O=="string"?O:O.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(A.shift()))}catch(q){this._streamError(q)}},this),this._streamError=S(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=S(function(){this._streamCleanUp(),H=!0,this._streamData("")},this),this._streamCleanUp=S(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function l(T){var A,P,H,O,q=Math.pow(2,53),C=-q,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,N=this,Y=0,X=0,J=!1,Q=!1,W=[],U={data:[],errors:[],meta:{}};function $(I){return T.skipEmptyLines==="greedy"?I.join("").trim()==="":I.length===1&&I[0].length===0}function ee(){if(U&&H&&(L("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),H=!1),T.skipEmptyLines&&(U.data=U.data.filter(function(F){return!$(F)})),Z()){let F=function(K,te){E(T.transformHeader)&&(K=T.transformHeader(K,te)),W.push(K)};if(U)if(Array.isArray(U.data[0])){for(var I=0;Z()&&I<U.data.length;I++)U.data[I].forEach(F);U.data.splice(0,1)}else U.data.forEach(F)}function k(F,K){for(var te=T.header?{}:[],M=0;M<F.length;M++){var ne=M,D=F[M],D=((x,R)=>(G=>(T.dynamicTypingFunction&&T.dynamicTyping[G]===void 0&&(T.dynamicTyping[G]=T.dynamicTypingFunction(G)),(T.dynamicTyping[G]||T.dynamicTyping)===!0))(x)?R==="true"||R==="TRUE"||R!=="false"&&R!=="FALSE"&&((G=>{if(j.test(G)&&(G=parseFloat(G),C<G&&G<q))return 1})(R)?parseFloat(R):V.test(R)?new Date(R):R===""?null:R):R)(ne=T.header?M>=W.length?"__parsed_extra":W[M]:ne,D=T.transform?T.transform(D,ne):D);ne==="__parsed_extra"?(te[ne]=te[ne]||[],te[ne].push(D)):te[ne]=D}return T.header&&(M>W.length?L("FieldMismatch","TooManyFields","Too many fields: expected "+W.length+" fields but parsed "+M,X+K):M<W.length&&L("FieldMismatch","TooFewFields","Too few fields: expected "+W.length+" fields but parsed "+M,X+K)),te}var B;U&&(T.header||T.dynamicTyping||T.transform)&&(B=1,!U.data.length||Array.isArray(U.data[0])?(U.data=U.data.map(k),B=U.data.length):U.data=k(U.data,0),T.header&&U.meta&&(U.meta.fields=W),X+=B)}function Z(){return T.header&&W.length===0}function L(I,k,B,F){I={type:I,code:k,message:B},F!==void 0&&(I.row=F),U.errors.push(I)}E(T.step)&&(O=T.step,T.step=function(I){U=I,Z()?ee():(ee(),U.data.length!==0&&(Y+=I.data.length,T.preview&&Y>T.preview?P.abort():(U.data=U.data[0],O(U,N))))}),this.parse=function(I,k,B){var F=T.quoteChar||'"',F=(T.newline||(T.newline=this.guessLineEndings(I,F)),H=!1,T.delimiter?E(T.delimiter)&&(T.delimiter=T.delimiter(I),U.meta.delimiter=T.delimiter):((F=((K,te,M,ne,D)=>{var x,R,G,ie;D=D||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var ae=0;ae<D.length;ae++){for(var se,ue=D[ae],le=0,de=0,he=0,ge=(G=void 0,new h({comments:ne,delimiter:ue,newline:te,preview:10}).parse(K)),be=0;be<ge.data.length;be++)M&&$(ge.data[be])?he++:(se=ge.data[be].length,de+=se,G===void 0?G=se:0<se&&(le+=Math.abs(se-G),G=se));0<ge.data.length&&(de/=ge.data.length-he),(R===void 0||le<=R)&&(ie===void 0||ie<de)&&1.99<de&&(R=le,x=ue,ie=de)}return{successful:!!(T.delimiter=x),bestDelimiter:x}})(I,T.newline,T.skipEmptyLines,T.comments,T.delimitersToGuess)).successful?T.delimiter=F.bestDelimiter:(H=!0,T.delimiter=u.DefaultDelimiter),U.meta.delimiter=T.delimiter),m(T));return T.preview&&T.header&&F.preview++,A=I,P=new h(F),U=P.parse(A,k,B),ee(),J?{meta:{paused:!0}}:U||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,P.abort(),A=E(T.chunk)?"":A.substring(P.getCharIndex())},this.resume=function(){N.streamer._halted?(J=!1,N.streamer.parseChunk(A,!0)):setTimeout(N.resume,3)},this.aborted=function(){return Q},this.abort=function(){Q=!0,P.abort(),U.meta.aborted=!0,E(T.complete)&&T.complete(U),A=""},this.guessLineEndings=function(K,F){K=K.substring(0,1048576);var F=new RegExp(_(F)+"([^]*?)"+_(F),"gm"),B=(K=K.replace(F,"")).split("\r"),F=K.split(`
`),K=1<F.length&&F[0].length<B[0].length;if(B.length===1||K)return`
`;for(var te=0,M=0;M<B.length;M++)B[M][0]===`
`&&te++;return te>=B.length/2?`\r
`:"\r"}}function _(T){return T.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h(T){var A=(T=T||{}).delimiter,P=T.newline,H=T.comments,O=T.step,q=T.preview,C=T.fastMode,j=null,V=!1,N=T.quoteChar==null?'"':T.quoteChar,Y=N;if(T.escapeChar!==void 0&&(Y=T.escapeChar),(typeof A!="string"||-1<u.BAD_DELIMITERS.indexOf(A))&&(A=","),H===A)throw new Error("Comment character same as delimiter");H===!0?H="#":(typeof H!="string"||-1<u.BAD_DELIMITERS.indexOf(H))&&(H=!1),P!==`
`&&P!=="\r"&&P!==`\r
`&&(P=`
`);var X=0,J=!1;this.parse=function(Q,W,U){if(typeof Q!="string")throw new Error("Input must be a string");var $=Q.length,ee=A.length,Z=P.length,L=H.length,I=E(O),k=[],B=[],F=[],K=X=0;if(!Q)return le();if(C||C!==!1&&Q.indexOf(N)===-1){for(var te=Q.split(P),M=0;M<te.length;M++){if(F=te[M],X+=F.length,M!==te.length-1)X+=P.length;else if(U)return le();if(!H||F.substring(0,L)!==H){if(I){if(k=[],ie(F.split(A)),de(),J)return le()}else ie(F.split(A));if(q&&q<=M)return k=k.slice(0,q),le(!0)}}return le()}for(var ne=Q.indexOf(A,X),D=Q.indexOf(P,X),x=new RegExp(_(Y)+_(N),"g"),R=Q.indexOf(N,X);;)if(Q[X]===N)for(R=X,X++;;){if((R=Q.indexOf(N,R+1))===-1)return U||B.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:X}),se();if(R===$-1)return se(Q.substring(X,R).replace(x,N));if(N===Y&&Q[R+1]===Y)R++;else if(N===Y||R===0||Q[R-1]!==Y){ne!==-1&&ne<R+1&&(ne=Q.indexOf(A,R+1));var G=ae((D=D!==-1&&D<R+1?Q.indexOf(P,R+1):D)===-1?ne:Math.min(ne,D));if(Q.substr(R+1+G,ee)===A){F.push(Q.substring(X,R).replace(x,N)),Q[X=R+1+G+ee]!==N&&(R=Q.indexOf(N,X)),ne=Q.indexOf(A,X),D=Q.indexOf(P,X);break}if(G=ae(D),Q.substring(R+1+G,R+1+G+Z)===P){if(F.push(Q.substring(X,R).replace(x,N)),ue(R+1+G+Z),ne=Q.indexOf(A,X),R=Q.indexOf(N,X),I&&(de(),J))return le();if(q&&k.length>=q)return le(!0);break}B.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:X}),R++}}else if(H&&F.length===0&&Q.substring(X,X+L)===H){if(D===-1)return le();X=D+Z,D=Q.indexOf(P,X),ne=Q.indexOf(A,X)}else if(ne!==-1&&(ne<D||D===-1))F.push(Q.substring(X,ne)),X=ne+ee,ne=Q.indexOf(A,X);else{if(D===-1)break;if(F.push(Q.substring(X,D)),ue(D+Z),I&&(de(),J))return le();if(q&&k.length>=q)return le(!0)}return se();function ie(he){k.push(he),K=X}function ae(he){var ge=0;return ge=he!==-1&&(he=Q.substring(R+1,he))&&he.trim()===""?he.length:ge}function se(he){return U||(he===void 0&&(he=Q.substring(X)),F.push(he),X=$,ie(F),I&&de()),le()}function ue(he){X=he,ie(F),F=[],D=Q.indexOf(P,X)}function le(he){if(T.header&&!W&&k.length&&!V){var ge=k[0],be={},Re=new Set(ge);let Pe=!1;for(let ke=0;ke<ge.length;ke++){let ye=ge[ke];if(be[ye=E(T.transformHeader)?T.transformHeader(ye,ke):ye]){let Ce,Ne=be[ye];for(;Ce=ye+"_"+Ne,Ne++,Re.has(Ce););Re.add(Ce),ge[ke]=Ce,be[ye]++,Pe=!0,(j=j===null?{}:j)[Ce]=ye}else be[ye]=1,ge[ke]=ye;Re.add(ye)}Pe&&console.warn("Duplicate headers found and renamed."),V=!0}return{data:k,errors:B,meta:{delimiter:A,linebreak:P,aborted:J,truncated:!!he,cursor:K+(W||0),renamedHeaders:j}}}function de(){O(le()),k=[],B=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return X}}function d(T){var A=T.data,P=a[A.workerId],H=!1;if(A.error)P.userError(A.error,A.file);else if(A.results&&A.results.data){var O={abort:function(){H=!0,c(A.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:p,resume:p};if(E(P.userStep)){for(var q=0;q<A.results.data.length&&(P.userStep({data:A.results.data[q],errors:A.results.errors,meta:A.results.meta},O),!H);q++);delete A.results}else E(P.userChunk)&&(P.userChunk(A.results,O,A.file),delete A.results)}A.finished&&!H&&c(A.workerId,A.results)}function c(T,A){var P=a[T];E(P.userComplete)&&P.userComplete(A),P.terminate(),delete a[T]}function p(){throw new Error("Not implemented.")}function m(T){if(typeof T!="object"||T===null)return T;var A,P=Array.isArray(T)?[]:{};for(A in T)P[A]=m(T[A]);return P}function S(T,A){return function(){T.apply(A,arguments)}}function E(T){return typeof T=="function"}return u.parse=function(T,A){var P=(A=A||{}).dynamicTyping||!1;if(E(P)&&(A.dynamicTypingFunction=P,P={}),A.dynamicTyping=P,A.transform=!!E(A.transform)&&A.transform,!A.worker||!u.WORKERS_SUPPORTED)return P=null,u.NODE_STREAM_INPUT,typeof T=="string"?(T=(H=>H.charCodeAt(0)!==65279?H:H.slice(1))(T),P=new(A.download?w:g)(A)):T.readable===!0&&E(T.read)&&E(T.on)?P=new b(A):(n.File&&T instanceof File||T instanceof Object)&&(P=new v(A)),P.stream(T);(P=(()=>{var H;return!!u.WORKERS_SUPPORTED&&(H=(()=>{var O=n.URL||n.webkitURL||null,q=r.toString();return u.BLOB_URL||(u.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",q,")();"],{type:"text/javascript"})))})(),(H=new n.Worker(H)).onmessage=d,H.id=o++,a[H.id]=H)})()).userStep=A.step,P.userChunk=A.chunk,P.userComplete=A.complete,P.userError=A.error,A.step=E(A.step),A.chunk=E(A.chunk),A.complete=E(A.complete),A.error=E(A.error),delete A.worker,P.postMessage({input:T,config:A,workerId:P.id})},u.unparse=function(T,A){var P=!1,H=!0,O=",",q=`\r
`,C='"',j=C+C,V=!1,N=null,Y=!1,X=((()=>{if(typeof A=="object"){if(typeof A.delimiter!="string"||u.BAD_DELIMITERS.filter(function(W){return A.delimiter.indexOf(W)!==-1}).length||(O=A.delimiter),typeof A.quotes!="boolean"&&typeof A.quotes!="function"&&!Array.isArray(A.quotes)||(P=A.quotes),typeof A.skipEmptyLines!="boolean"&&typeof A.skipEmptyLines!="string"||(V=A.skipEmptyLines),typeof A.newline=="string"&&(q=A.newline),typeof A.quoteChar=="string"&&(C=A.quoteChar),typeof A.header=="boolean"&&(H=A.header),Array.isArray(A.columns)){if(A.columns.length===0)throw new Error("Option columns is empty");N=A.columns}A.escapeChar!==void 0&&(j=A.escapeChar+C),A.escapeFormulae instanceof RegExp?Y=A.escapeFormulae:typeof A.escapeFormulae=="boolean"&&A.escapeFormulae&&(Y=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(C),"g"));if(typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(T)){if(!T.length||Array.isArray(T[0]))return J(null,T,V);if(typeof T[0]=="object")return J(N||Object.keys(T[0]),T,V)}else if(typeof T=="object")return typeof T.data=="string"&&(T.data=JSON.parse(T.data)),Array.isArray(T.data)&&(T.fields||(T.fields=T.meta&&T.meta.fields||N),T.fields||(T.fields=Array.isArray(T.data[0])?T.fields:typeof T.data[0]=="object"?Object.keys(T.data[0]):[]),Array.isArray(T.data[0])||typeof T.data[0]=="object"||(T.data=[T.data])),J(T.fields||[],T.data||[],V);throw new Error("Unable to serialize unrecognized input");function J(W,U,$){var ee="",Z=(typeof W=="string"&&(W=JSON.parse(W)),typeof U=="string"&&(U=JSON.parse(U)),Array.isArray(W)&&0<W.length),L=!Array.isArray(U[0]);if(Z&&H){for(var I=0;I<W.length;I++)0<I&&(ee+=O),ee+=Q(W[I],I);0<U.length&&(ee+=q)}for(var k=0;k<U.length;k++){var B=(Z?W:U[k]).length,F=!1,K=Z?Object.keys(U[k]).length===0:U[k].length===0;if($&&!Z&&(F=$==="greedy"?U[k].join("").trim()==="":U[k].length===1&&U[k][0].length===0),$==="greedy"&&Z){for(var te=[],M=0;M<B;M++){var ne=L?W[M]:M;te.push(U[k][ne])}F=te.join("").trim()===""}if(!F){for(var D=0;D<B;D++){0<D&&!K&&(ee+=O);var x=Z&&L?W[D]:D;ee+=Q(U[k][x],D)}k<U.length-1&&(!$||0<B&&!K)&&(ee+=q)}}return ee}function Q(W,U){var $,ee;return W==null?"":W.constructor===Date?JSON.stringify(W).slice(1,25):(ee=!1,Y&&typeof W=="string"&&Y.test(W)&&(W="'"+W,ee=!0),$=W.toString().replace(X,j),(ee=ee||P===!0||typeof P=="function"&&P(W,U)||Array.isArray(P)&&P[U]||((Z,L)=>{for(var I=0;I<L.length;I++)if(-1<Z.indexOf(L[I]))return!0;return!1})($,u.BAD_DELIMITERS)||-1<$.indexOf(O)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?C+$+C:$)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!s&&!!n.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=h,u.ParserHandle=l,u.NetworkStreamer=w,u.FileStreamer=v,u.StringStreamer=g,u.ReadableStreamStreamer=b,n.jQuery&&((i=n.jQuery).fn.parse=function(T){var A=T.config||{},P=[];return this.each(function(q){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var C=0;C<this.files.length;C++)P.push({file:this.files[C],inputElem:this,instanceConfig:i.extend({},A)})}),H(),this;function H(){if(P.length===0)E(T.complete)&&T.complete();else{var q,C,j,V,N=P[0];if(E(T.before)){var Y=T.before(N.file,N.inputElem);if(typeof Y=="object"){if(Y.action==="abort")return q="AbortError",C=N.file,j=N.inputElem,V=Y.reason,void(E(T.error)&&T.error({name:q},C,j,V));if(Y.action==="skip")return void O();typeof Y.config=="object"&&(N.instanceConfig=i.extend(N.instanceConfig,Y.config))}else if(Y==="skip")return void O()}var X=N.instanceConfig.complete;N.instanceConfig.complete=function(J){E(X)&&X(J,N.file,N.inputElem),O()},u.parse(N.file,N.instanceConfig)}}function O(){P.splice(0,1),H()}}),f&&(n.onmessage=function(T){T=T.data,u.WORKER_ID===void 0&&T&&(u.WORKER_ID=T.workerId),typeof T.input=="string"?n.postMessage({workerId:u.WORKER_ID,results:u.parse(T.input,T.config),finished:!0}):(n.File&&T.input instanceof File||T.input instanceof Object)&&(T=u.parse(T.input,T.config))&&n.postMessage({workerId:u.WORKER_ID,results:T,finished:!0})}),(w.prototype=Object.create(y.prototype)).constructor=w,(v.prototype=Object.create(y.prototype)).constructor=v,(g.prototype=Object.create(g.prototype)).constructor=g,(b.prototype=Object.create(y.prototype)).constructor=b,u})}(papaparse_min$1)),papaparse_min$1.exports}var papaparse_minExports=requirePapaparse_min();const Papa=getDefaultExportFromCjs$2(papaparse_minExports);var SchemaType;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(SchemaType||(SchemaType={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ExecutableCodeLanguage;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(ExecutableCodeLanguage||(ExecutableCodeLanguage={}));var Outcome;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Outcome||(Outcome={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const POSSIBLE_ROLES=["user","model","function","system"];var HarmCategory;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmProbability;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var BlockReason;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(BlockReason||(BlockReason={}));var FinishReason;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(FinishReason||(FinishReason={}));var TaskType;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(TaskType||(TaskType={}));var FunctionCallingMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(FunctionCallingMode||(FunctionCallingMode={}));var DynamicRetrievalMode;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(DynamicRetrievalMode||(DynamicRetrievalMode={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAIError extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class GoogleGenerativeAIResponseError extends GoogleGenerativeAIError{constructor(e,r){super(e),this.response=r}}class GoogleGenerativeAIFetchError extends GoogleGenerativeAIError{constructor(e,r,n,i){super(e),this.status=r,this.statusText=n,this.errorDetails=i}}class GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_BASE_URL="https://generativelanguage.googleapis.com",DEFAULT_API_VERSION="v1beta",PACKAGE_VERSION="0.21.0",PACKAGE_LOG_HEADER="genai-js";var Task;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Task||(Task={}));class RequestUrl{constructor(e,r,n,i,s){this.model=e,this.task=r,this.apiKey=n,this.stream=i,this.requestOptions=s}toString(){var e,r;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||DEFAULT_API_VERSION;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||DEFAULT_BASE_URL}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function getClientHeaders(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`),e.join(" ")}async function getHeaders(t){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",getClientHeaders(t.requestOptions)),r.append("x-goog-api-key",t.apiKey);let n=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(i){throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${i.message}`)}for(const[i,s]of n.entries()){if(i==="x-goog-api-key")throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new GoogleGenerativeAIRequestInputError(`Header name ${i} can only be set using the apiClient field`);r.append(i,s)}}return r}async function constructModelRequest(t,e,r,n,i,s){const f=new RequestUrl(t,e,r,n,s);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},buildFetchOptions(s)),{method:"POST",headers:await getHeaders(f),body:i})}}async function makeModelRequest(t,e,r,n,i,s={},f=fetch){const{url:a,fetchOptions:o}=await constructModelRequest(t,e,r,n,i,s);return makeRequest(a,o,f)}async function makeRequest(t,e,r=fetch){let n;try{n=await r(t,e)}catch(i){handleResponseError(i,t)}return n.ok||await handleResponseNotOk(n,t),n}function handleResponseError(t,e){let r=t;throw t instanceof GoogleGenerativeAIFetchError||t instanceof GoogleGenerativeAIRequestInputError||(r=new GoogleGenerativeAIError(`Error fetching from ${e.toString()}: ${t.message}`),r.stack=t.stack),r}async function handleResponseNotOk(t,e){let r="",n;try{const i=await t.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`,n=i.error.details)}catch{}throw new GoogleGenerativeAIFetchError(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${r}`,t.status,t.statusText,n)}function buildFetchOptions(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const r=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>r.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function addHelpers(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return getText(t)}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),getFunctionCalls(t)[0]}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hadBadFinishReason(t.candidates[0]))throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(t)}`,t);return getFunctionCalls(t)}else if(t.promptFeedback)throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(t)}`,t)},t}function getText(t){var e,r,n,i;const s=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const f of(i=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)f.text&&s.push(f.text),f.executableCode&&s.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&s.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function getFunctionCalls(t){var e,r,n,i;const s=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const f of(i=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||i===void 0?void 0:i.parts)f.functionCall&&s.push(f.functionCall);if(s.length>0)return s}const badFinishReasons=[FinishReason.RECITATION,FinishReason.SAFETY,FinishReason.LANGUAGE];function hadBadFinishReason(t){return!!t.finishReason&&badFinishReasons.includes(t.finishReason)}function formatBlockErrorMessage(t){var e,r,n;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){const s=t.candidates[0];hadBadFinishReason(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},f("next"),f("throw"),f("return"),i[Symbol.asyncIterator]=function(){return this},i;function f(v){n[v]&&(i[v]=function(g){return new Promise(function(b,l){s.push([v,g,b,l])>1||a(v,g)})})}function a(v,g){try{o(n[v](g))}catch(b){w(s[0][3],b)}}function o(v){v.value instanceof __await?Promise.resolve(v.value.v).then(u,y):w(s[0][2],v)}function u(v){a("next",v)}function y(v){a("throw",v)}function w(v,g){v(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}typeof SuppressedError=="function"&&SuppressedError;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const responseLineRE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function processStream(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=getResponseStream(e),[n,i]=r.tee();return{stream:generateResponseSequence(n),response:getResponsePromise(i)}}async function getResponsePromise(t){const e=[],r=t.getReader();for(;;){const{done:n,value:i}=await r.read();if(n)return addHelpers(aggregateResponses(e));e.push(i)}}function generateResponseSequence(t){return __asyncGenerator(this,arguments,function*(){const r=t.getReader();for(;;){const{value:n,done:i}=yield __await(r.read());if(i)break;yield yield __await(addHelpers(n))}})}function getResponseStream(t){const e=t.getReader();return new ReadableStream({start(n){let i="";return s();function s(){return e.read().then(({value:f,done:a})=>{if(a){if(i.trim()){n.error(new GoogleGenerativeAIError("Failed to parse stream"));return}n.close();return}i+=f;let o=i.match(responseLineRE),u;for(;o;){try{u=JSON.parse(o[1])}catch{n.error(new GoogleGenerativeAIError(`Error parsing JSON response: "${o[1]}"`));return}n.enqueue(u),i=i.substring(o[0].length),o=i.match(responseLineRE)}return s()})}}})}function aggregateResponses(t){const e=t[t.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t){if(n.candidates)for(const i of n.candidates){const s=i.index;if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:i.index}),r.candidates[s].citationMetadata=i.citationMetadata,r.candidates[s].groundingMetadata=i.groundingMetadata,r.candidates[s].finishReason=i.finishReason,r.candidates[s].finishMessage=i.finishMessage,r.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){r.candidates[s].content||(r.candidates[s].content={role:i.content.role||"user",parts:[]});const f={};for(const a of i.content.parts)a.text&&(f.text=a.text),a.functionCall&&(f.functionCall=a.functionCall),a.executableCode&&(f.executableCode=a.executableCode),a.codeExecutionResult&&(f.codeExecutionResult=a.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),r.candidates[s].content.parts.push(f)}}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateContentStream(t,e,r,n){const i=await makeModelRequest(e,Task.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(r),n);return processStream(i)}async function generateContent(t,e,r,n){const s=await(await makeModelRequest(e,Task.GENERATE_CONTENT,t,!1,JSON.stringify(r),n)).json();return{response:addHelpers(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function formatSystemInstruction(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function formatNewContent(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const r of t)typeof r=="string"?e.push({text:r}):e.push(r);return assignRoleToPartsAndValidateSendMessageRequest(e)}function assignRoleToPartsAndValidateSendMessageRequest(t){const e={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,i=!1;for(const s of t)"functionResponse"in s?(r.parts.push(s),i=!0):(e.parts.push(s),n=!0);if(n&&i)throw new GoogleGenerativeAIError("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!i)throw new GoogleGenerativeAIError("No content is provided for sending chat message.");return n?e:r}function formatCountTokensInput(t,e){var r;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new GoogleGenerativeAIRequestInputError("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=t.contents}else if(i)n=Object.assign(Object.assign({},n),t.generateContentRequest);else{const s=formatNewContent(t);n.contents=[s]}return{generateContentRequest:n}}function formatGenerateContentInput(t){let e;return t.contents?e=t:e={contents:[formatNewContent(t)]},t.systemInstruction&&(e.systemInstruction=formatSystemInstruction(t.systemInstruction)),e}function formatEmbedContentInput(t){return typeof t=="string"||Array.isArray(t)?{content:formatNewContent(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_PART_FIELDS=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],VALID_PARTS_PER_ROLE={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function validateChatHistory(t){let e=!1;for(const r of t){const{role:n,parts:i}=r;if(!e&&n!=="user")throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${n}`);if(!POSSIBLE_ROLES.includes(n))throw new GoogleGenerativeAIError(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);if(!Array.isArray(i))throw new GoogleGenerativeAIError("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new GoogleGenerativeAIError("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of i)for(const o of VALID_PART_FIELDS)o in a&&(s[o]+=1);const f=VALID_PARTS_PER_ROLE[n];for(const a of VALID_PART_FIELDS)if(!f.includes(a)&&s[a]>0)throw new GoogleGenerativeAIError(`Content with role '${n}' can't contain '${a}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SILENT_ERROR="SILENT_ERROR";class ChatSession{constructor(e,r,n,i={}){this.model=r,this.params=n,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(validateChatHistory(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var n,i,s,f,a,o;await this._sendPromise;const u=formatNewContent(e),y={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(o=this.params)===null||o===void 0?void 0:o.cachedContent,contents:[...this._history,u]},w=Object.assign(Object.assign({},this._requestOptions),r);let v;return this._sendPromise=this._sendPromise.then(()=>generateContent(this._apiKey,this.model,y,w)).then(g=>{var b;if(g.response.candidates&&g.response.candidates.length>0){this._history.push(u);const l=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(l)}else{const l=formatBlockErrorMessage(g.response);l&&console.warn(`sendMessage() was unsuccessful. ${l}. Inspect response object for details.`)}v=g}),await this._sendPromise,v}async sendMessageStream(e,r={}){var n,i,s,f,a,o;await this._sendPromise;const u=formatNewContent(e),y={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(o=this.params)===null||o===void 0?void 0:o.cachedContent,contents:[...this._history,u]},w=Object.assign(Object.assign({},this._requestOptions),r),v=generateContentStream(this._apiKey,this.model,y,w);return this._sendPromise=this._sendPromise.then(()=>v).catch(g=>{throw new Error(SILENT_ERROR)}).then(g=>g.response).then(g=>{if(g.candidates&&g.candidates.length>0){this._history.push(u);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=formatBlockErrorMessage(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==SILENT_ERROR&&console.error(g)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function countTokens(t,e,r,n){return(await makeModelRequest(e,Task.COUNT_TOKENS,t,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function embedContent(t,e,r,n){return(await makeModelRequest(e,Task.EMBED_CONTENT,t,!1,JSON.stringify(r),n)).json()}async function batchEmbedContents(t,e,r,n){const i=r.requests.map(f=>Object.assign(Object.assign({},f),{model:e}));return(await makeModelRequest(e,Task.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GenerativeModel{constructor(e,r,n={}){this.apiKey=e,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=formatSystemInstruction(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var n;const i=formatGenerateContentInput(e),s=Object.assign(Object.assign({},this._requestOptions),r);return generateContent(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),s)}async generateContentStream(e,r={}){var n;const i=formatGenerateContentInput(e),s=Object.assign(Object.assign({},this._requestOptions),r);return generateContentStream(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},i),s)}startChat(e){var r;return new ChatSession(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const n=formatCountTokensInput(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),r);return countTokens(this.apiKey,this.model,n,i)}async embedContent(e,r={}){const n=formatEmbedContentInput(e),i=Object.assign(Object.assign({},this._requestOptions),r);return embedContent(this.apiKey,this.model,n,i)}async batchEmbedContents(e,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return batchEmbedContents(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleGenerativeAI{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new GoogleGenerativeAIError("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new GenerativeModel(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,n){if(!e.name)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `name` field.");if(!e.model)throw new GoogleGenerativeAIRequestInputError("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const f of i)if(r!=null&&r[f]&&e[f]&&(r==null?void 0:r[f])!==e[f]){if(f==="model"){const a=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,o=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===o)continue}throw new GoogleGenerativeAIRequestInputError(`Different value for "${f}" specified in modelParams (${r[f]}) and cachedContent (${e[f]})`)}const s=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new GenerativeModel(this.apiKey,s,n)}}var marker$3="vercel.ai.error",symbol$3=Symbol.for(marker$3),_a$3,_AISDKError$2=class Or extends Error{constructor({name:e,message:r,cause:n}){super(r),this[_a$3]=!0,this.name=e,this.cause=n}static isInstance(e){return Or.hasMarker(e,marker$3)}static hasMarker(e,r){const n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};_a$3=symbol$3;var AISDKError$2=_AISDKError$2,name$3="AI_APICallError",marker2$2=`vercel.ai.error.${name$3}`,symbol2$2=Symbol.for(marker2$2),_a2$2,APICallError$1=class extends AISDKError$2{constructor({message:e,url:r,requestBodyValues:n,statusCode:i,responseHeaders:s,responseBody:f,cause:a,isRetryable:o=i!=null&&(i===408||i===409||i===429||i>=500),data:u}){super({name:name$3,message:e,cause:a}),this[_a2$2]=!0,this.url=r,this.requestBodyValues=n,this.statusCode=i,this.responseHeaders=s,this.responseBody=f,this.isRetryable=o,this.data=u}static isInstance(e){return AISDKError$2.hasMarker(e,marker2$2)}};_a2$2=symbol2$2;var name2$1="AI_EmptyResponseBodyError",marker3=`vercel.ai.error.${name2$1}`,symbol3=Symbol.for(marker3),_a3,EmptyResponseBodyError=class extends AISDKError$2{constructor({message:t="Empty response body"}={}){super({name:name2$1,message:t}),this[_a3]=!0}static isInstance(t){return AISDKError$2.hasMarker(t,marker3)}};_a3=symbol3;function getErrorMessage$3(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var name3$2="AI_InvalidArgumentError",marker4$3=`vercel.ai.error.${name3$2}`,symbol4$3=Symbol.for(marker4$3),_a4$3,InvalidArgumentError$3=class extends AISDKError$2{constructor({message:e,cause:r,argument:n}){super({name:name3$2,message:e,cause:r}),this[_a4$3]=!0,this.argument=n}static isInstance(e){return AISDKError$2.hasMarker(e,marker4$3)}};_a4$3=symbol4$3;var name5$1="AI_InvalidResponseDataError",marker6$1=`vercel.ai.error.${name5$1}`,symbol6$1=Symbol.for(marker6$1),_a6$1,InvalidResponseDataError=class extends AISDKError$2{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:name5$1,message:e}),this[_a6$1]=!0,this.data=t}static isInstance(t){return AISDKError$2.hasMarker(t,marker6$1)}};_a6$1=symbol6$1;var name6$3="AI_JSONParseError",marker7$3=`vercel.ai.error.${name6$3}`,symbol7$3=Symbol.for(marker7$3),_a7$3,JSONParseError$2=class extends AISDKError$2{constructor({text:e,cause:r}){super({name:name6$3,message:`JSON parsing failed: Text: ${e}.
Error message: ${getErrorMessage$3(r)}`,cause:r}),this[_a7$3]=!0,this.text=e}static isInstance(e){return AISDKError$2.hasMarker(e,marker7$3)}};_a7$3=symbol7$3;var name7$1="AI_LoadAPIKeyError",marker8$1=`vercel.ai.error.${name7$1}`,symbol8$1=Symbol.for(marker8$1),_a8$1,LoadAPIKeyError=class extends AISDKError$2{constructor({message:t}){super({name:name7$1,message:t}),this[_a8$1]=!0}static isInstance(t){return AISDKError$2.hasMarker(t,marker8$1)}};_a8$1=symbol8$1;var name10$1="AI_NoSuchModelError",marker11$1=`vercel.ai.error.${name10$1}`,symbol11$1=Symbol.for(marker11$1),_a11$1,NoSuchModelError=class extends AISDKError$2{constructor({errorName:t=name10$1,modelId:e,modelType:r,message:n=`No such ${r}: ${e}`}){super({name:t,message:n}),this[_a11$1]=!0,this.modelId=e,this.modelType=r}static isInstance(t){return AISDKError$2.hasMarker(t,marker11$1)}};_a11$1=symbol11$1;var name12$3="AI_TypeValidationError",marker13$3=`vercel.ai.error.${name12$3}`,symbol13$3=Symbol.for(marker13$3),_a13$3,_TypeValidationError$2=class nr extends AISDKError$2{constructor({value:e,cause:r}){super({name:name12$3,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${getErrorMessage$3(r)}`,cause:r}),this[_a13$3]=!0,this.value=e}static isInstance(e){return AISDKError$2.hasMarker(e,marker13$3)}static wrap({value:e,cause:r}){return nr.isInstance(r)&&r.value===e?r:new nr({value:e,cause:r})}};_a13$3=symbol13$3;var TypeValidationError$2=_TypeValidationError$2,name13$1="AI_UnsupportedFunctionalityError",marker14=`vercel.ai.error.${name13$1}`,symbol14=Symbol.for(marker14),_a14,UnsupportedFunctionalityError=class extends AISDKError$2{constructor({functionality:t,message:e=`'${t}' functionality not supported.`}){super({name:name13$1,message:e}),this[_a14]=!0,this.functionality=t}static isInstance(t){return AISDKError$2.hasMarker(t,marker14)}};_a14=symbol14;let customAlphabet$1=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n};var secureJsonParse={exports:{}},hasRequiredSecureJsonParse;function requireSecureJsonParse(){if(hasRequiredSecureJsonParse)return secureJsonParse.exports;hasRequiredSecureJsonParse=1;const t=typeof Buffer<"u",e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,r=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function n(a,o,u){u==null&&o!==null&&typeof o=="object"&&(u=o,o=void 0),t&&Buffer.isBuffer(a)&&(a=a.toString()),a&&a.charCodeAt(0)===65279&&(a=a.slice(1));const y=JSON.parse(a,o);if(y===null||typeof y!="object")return y;const w=u&&u.protoAction||"error",v=u&&u.constructorAction||"error";if(w==="ignore"&&v==="ignore")return y;if(w!=="ignore"&&v!=="ignore"){if(e.test(a)===!1&&r.test(a)===!1)return y}else if(w!=="ignore"&&v==="ignore"){if(e.test(a)===!1)return y}else if(r.test(a)===!1)return y;return i(y,{protoAction:w,constructorAction:v,safe:u&&u.safe})}function i(a,{protoAction:o="error",constructorAction:u="error",safe:y}={}){let w=[a];for(;w.length;){const v=w;w=[];for(const g of v){if(o!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(y===!0)return null;if(o==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(y===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const b in g){const l=g[b];l&&typeof l=="object"&&w.push(l)}}}return a}function s(a,o,u){const y=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(a,o,u)}finally{Error.stackTraceLimit=y}}function f(a,o){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return n(a,o,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return secureJsonParse.exports=s,secureJsonParse.exports.default=s,secureJsonParse.exports.parse=s,secureJsonParse.exports.safeParse=f,secureJsonParse.exports.scan=i,secureJsonParse.exports}var secureJsonParseExports=requireSecureJsonParse();const SecureJSON=getDefaultExportFromCjs$2(secureJsonParseExports);var __defProp$3=Object.defineProperty,__defNormalProp$1=(t,e,r)=>e in t?__defProp$3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,__publicField$1=(t,e,r)=>__defNormalProp$1(t,typeof e!="symbol"?e+"":e,r);class ParseError extends Error{constructor(e,r){super(e),__publicField$1(this,"type"),__publicField$1(this,"field"),__publicField$1(this,"value"),__publicField$1(this,"line"),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function noop$1(t){}function createParser(t){const{onEvent:e=noop$1,onError:r=noop$1,onRetry:n=noop$1,onComment:i}=t;let s="",f=!0,a,o="",u="";function y(l){const _=f?l.replace(/^\xEF\xBB\xBF/,""):l,[h,d]=splitLines(`${s}${_}`);for(const c of h)w(c);s=d,f=!1}function w(l){if(l===""){g();return}if(l.startsWith(":")){i&&i(l.slice(l.startsWith(": ")?2:1));return}const _=l.indexOf(":");if(_!==-1){const h=l.slice(0,_),d=l[_+1]===" "?2:1,c=l.slice(_+d);v(h,c,l);return}v(l,"",l)}function v(l,_,h){switch(l){case"event":u=_;break;case"data":o=`${o}${_}
`;break;case"id":a=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?n(parseInt(_,10)):r(new ParseError(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:h}));break;default:r(new ParseError(`Unknown field "${l.length>20?`${l.slice(0,20)}…`:l}"`,{type:"unknown-field",field:l,value:_,line:h}));break}}function g(){o.length>0&&e({id:a,event:u||void 0,data:o.endsWith(`
`)?o.slice(0,-1):o}),a=void 0,o="",u=""}function b(l={}){s&&l.consume&&w(s),a=void 0,o="",u="",s=""}return{feed:y,reset:b}}function splitLines(t){const e=[];let r="";const n=t.length;for(let i=0;i<n;i++){const s=t[i];s==="\r"&&t[i+1]===`
`?(e.push(r),r="",i++):s==="\r"||s===`
`?(e.push(r),r=""):r+=s}return[e,r]}class EventSourceParserStream extends TransformStream{constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(s){i=createParser({onEvent:f=>{s.enqueue(f)},onError(f){e==="terminate"?s.error(f):typeof e=="function"&&e(f)},onRetry:r,onComment:n})},transform(s){i.feed(s)}})}}var define_process_env_default={};function combineHeaders(...t){return t.reduce((e,r)=>({...e,...r??{}}),{})}function extractResponseHeaders(t){const e={};return t.headers.forEach((r,n)=>{e[n]=r}),e}var createIdGenerator$2=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const i=customAlphabet$1(r,e);if(t==null)return i;if(r.includes(n))throw new InvalidArgumentError$3({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return s=>`${t}${n}${i(s)}`},generateId=createIdGenerator$2();function removeUndefinedEntries(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>r!=null))}function isAbortError$1(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function loadApiKey({apiKey:t,environmentVariableName:e,apiKeyParameterName:r="apiKey",description:n}){if(typeof t=="string")return t;if(t!=null)throw new LoadAPIKeyError({message:`${n} API key must be a string.`});if(typeof process>"u")throw new LoadAPIKeyError({message:`${n} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(t=define_process_env_default[e],t==null)throw new LoadAPIKeyError({message:`${n} API key is missing. Pass it using the '${r}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new LoadAPIKeyError({message:`${n} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var validatorSymbol$2=Symbol.for("vercel.ai.validator");function validator$2(t){return{[validatorSymbol$2]:!0,validate:t}}function isValidator$2(t){return typeof t=="object"&&t!==null&&validatorSymbol$2 in t&&t[validatorSymbol$2]===!0&&"validate"in t}function asValidator$2(t){return isValidator$2(t)?t:zodValidator$2(t)}function zodValidator$2(t){return validator$2(e=>{const r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function validateTypes({value:t,schema:e}){const r=safeValidateTypes$2({value:t,schema:e});if(!r.success)throw TypeValidationError$2.wrap({value:t,cause:r.error});return r.value}function safeValidateTypes$2({value:t,schema:e}){const r=asValidator$2(e);try{if(r.validate==null)return{success:!0,value:t};const n=r.validate(t);return n.success?n:{success:!1,error:TypeValidationError$2.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:TypeValidationError$2.wrap({value:t,cause:n})}}}function parseJSON({text:t,schema:e}){try{const r=SecureJSON.parse(t);return e==null?r:validateTypes({value:r,schema:e})}catch(r){throw JSONParseError$2.isInstance(r)||TypeValidationError$2.isInstance(r)?r:new JSONParseError$2({text:t,cause:r})}}function safeParseJSON$2({text:t,schema:e}){try{const r=SecureJSON.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};const n=safeValidateTypes$2({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:JSONParseError$2.isInstance(r)?r:new JSONParseError$2({text:t,cause:r})}}}function isParsableJson(t){try{return SecureJSON.parse(t),!0}catch{return!1}}var getOriginalFetch2=()=>globalThis.fetch,postJsonToApi=async({url:t,headers:e,body:r,failedResponseHandler:n,successfulResponseHandler:i,abortSignal:s,fetch:f})=>postToApi({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(r),values:r},failedResponseHandler:n,successfulResponseHandler:i,abortSignal:s,fetch:f}),postToApi=async({url:t,headers:e={},body:r,successfulResponseHandler:n,failedResponseHandler:i,abortSignal:s,fetch:f=getOriginalFetch2()})=>{try{const a=await f(t,{method:"POST",headers:removeUndefinedEntries(e),body:r.content,signal:s}),o=extractResponseHeaders(a);if(!a.ok){let u;try{u=await i({response:a,url:t,requestBodyValues:r.values})}catch(y){throw isAbortError$1(y)||APICallError$1.isInstance(y)?y:new APICallError$1({message:"Failed to process error response",cause:y,statusCode:a.status,url:t,responseHeaders:o,requestBodyValues:r.values})}throw u.value}try{return await n({response:a,url:t,requestBodyValues:r.values})}catch(u){throw u instanceof Error&&(isAbortError$1(u)||APICallError$1.isInstance(u))?u:new APICallError$1({message:"Failed to process successful response",cause:u,statusCode:a.status,url:t,responseHeaders:o,requestBodyValues:r.values})}}catch(a){if(isAbortError$1(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const o=a.cause;if(o!=null)throw new APICallError$1({message:`Cannot connect to API: ${o.message}`,cause:o,url:t,requestBodyValues:r.values,isRetryable:!0})}throw a}},createJsonErrorResponseHandler=({errorSchema:t,errorToMessage:e,isRetryable:r})=>async({response:n,url:i,requestBodyValues:s})=>{const f=await n.text(),a=extractResponseHeaders(n);if(f.trim()==="")return{responseHeaders:a,value:new APICallError$1({message:n.statusText,url:i,requestBodyValues:s,statusCode:n.status,responseHeaders:a,responseBody:f,isRetryable:r==null?void 0:r(n)})};try{const o=parseJSON({text:f,schema:t});return{responseHeaders:a,value:new APICallError$1({message:e(o),url:i,requestBodyValues:s,statusCode:n.status,responseHeaders:a,responseBody:f,data:o,isRetryable:r==null?void 0:r(n,o)})}}catch{return{responseHeaders:a,value:new APICallError$1({message:n.statusText,url:i,requestBodyValues:s,statusCode:n.status,responseHeaders:a,responseBody:f,isRetryable:r==null?void 0:r(n)})}}},createEventSourceResponseHandler=t=>async({response:e})=>{const r=extractResponseHeaders(e);if(e.body==null)throw new EmptyResponseBodyError({});return{responseHeaders:r,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new EventSourceParserStream).pipeThrough(new TransformStream({transform({data:n},i){n!=="[DONE]"&&i.enqueue(safeParseJSON$2({text:n,schema:t}))}}))}},createJsonResponseHandler=t=>async({response:e,url:r,requestBodyValues:n})=>{const i=await e.text(),s=safeParseJSON$2({text:i,schema:t}),f=extractResponseHeaders(e);if(!s.success)throw new APICallError$1({message:"Invalid JSON response",cause:s.error,statusCode:e.status,responseHeaders:f,responseBody:i,url:r,requestBodyValues:n});return{responseHeaders:f,value:s.value,rawValue:s.rawValue}},{btoa:btoa$2}=globalThis;function convertUint8ArrayToBase64$1(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return btoa$2(e)}function withoutTrailingSlash(t){return t==null?void 0:t.replace(/\/$/,"")}var util$1;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const s={};for(const f of i)s[f]=f;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),f={};for(const a of s)f[a]=i[a];return t.objectValues(f)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const f in i)Object.prototype.hasOwnProperty.call(i,f)&&s.push(f);return s},t.find=(i,s)=>{for(const f of i)if(s(f))return f},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(f=>typeof f=="string"?`'${f}'`:f).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(util$1||(util$1={}));var objectUtil;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(objectUtil||(objectUtil={}));const ZodParsedType=util$1.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=t=>{switch(typeof t){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(t)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(t)?ZodParsedType.array:t===null?ZodParsedType.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&t instanceof Map?ZodParsedType.map:typeof Set<"u"&&t instanceof Set?ZodParsedType.set:typeof Date<"u"&&t instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util$1.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(const f of s.issues)if(f.code==="invalid_union")f.unionErrors.map(i);else if(f.code==="invalid_return_type")i(f.returnTypeError);else if(f.code==="invalid_arguments")i(f.argumentsError);else if(f.path.length===0)n._errors.push(r(f));else{let a=n,o=0;for(;o<f.path.length;){const u=f.path[o];o===f.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(f))):a[u]=a[u]||{_errors:[]},a=a[u],o++}}};return i(this),n}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util$1.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ZodError.create=t=>new ZodError(t);const errorMap=(t,e)=>{let r;switch(t.code){case ZodIssueCode.invalid_type:t.received===ZodParsedType.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,util$1.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${util$1.joinValues(t.keys,", ")}`;break;case ZodIssueCode.invalid_union:r="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${util$1.joinValues(t.options)}`;break;case ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${util$1.joinValues(t.options)}, received '${t.received}'`;break;case ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case ZodIssueCode.invalid_date:r="Invalid date";break;case ZodIssueCode.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:util$1.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ZodIssueCode.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ZodIssueCode.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ZodIssueCode.custom:r="Invalid input";break;case ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ZodIssueCode.not_finite:r="Number must be finite";break;default:r=e.defaultError,util$1.assertNever(t)}return{message:r}};let overrideErrorMap=errorMap;function setErrorMap(t){overrideErrorMap=t}function getErrorMap(){return overrideErrorMap}const makeIssue=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],f={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const o=n.filter(u=>!!u).slice().reverse();for(const u of o)a=u(f,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},EMPTY_PATH=[];function addIssueToContext(t,e){const r=getErrorMap(),n=makeIssue({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===errorMap?void 0:errorMap].filter(i=>!!i)});t.common.issues.push(n)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return INVALID;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const i of r){const s=await i.key,f=await i.value;n.push({key:s,value:f})}return ParseStatus.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:s,value:f}=i;if(s.status==="aborted"||f.status==="aborted")return INVALID;s.status==="dirty"&&e.dirty(),f.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof f.value<"u"||i.alwaysSet)&&(n[s.value]=f.value)}return{status:e.value,value:n}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=t=>({status:"dirty",value:t}),OK=t=>({status:"valid",value:t}),isAborted=t=>t.status==="aborted",isDirty=t=>t.status==="dirty",isValid=t=>t.status==="valid",isAsync=t=>typeof Promise<"u"&&t instanceof Promise;function __classPrivateFieldGet(t,e,r,n){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function __classPrivateFieldSet(t,e,r,n,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(t,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ZodError(t.common.issues);return this._error=r,this._error}}};function processCreateParams(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(f,a)=>{var o,u;const{message:y}=t;return f.code==="invalid_enum_value"?{message:y??a.defaultError}:typeof a.data>"u"?{message:(o=y??n)!==null&&o!==void 0?o:a.defaultError}:f.code!=="invalid_type"?{message:a.defaultError}:{message:(u=y??r)!==null&&u!==void 0?u:a.defaultError}},description:i}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(isAsync(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},s=this._parseSync({data:e,path:i.path,parent:i});return handleResult(i,s)}"~validate"(e){var r,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return isValid(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((n=(r=s==null?void 0:s.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>isValid(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(isAsync(i)?i:Promise.resolve(i));return handleResult(n,s)}refine(e,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{const f=e(i),a=()=>s.addIssue({code:ZodIssueCode.custom,...n(i)});return typeof Promise<"u"&&f instanceof Promise?f.then(o=>o?!0:(a(),!1)):f?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:r,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:r,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex$1;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function timeRegex(t){return new RegExp(`^${timeRegexSource(t)}$`)}function datetimeRegex(t){let e=`${dateRegexSource}T${timeRegexSource(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(t,e){return!!((e==="v4"||!e)&&ipv4Regex.test(t)||(e==="v6"||!e)&&ipv6Regex.test(t))}function isValidJWT(t,e){if(!jwtRegex.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function isValidCidr(t,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(t)||(e==="v6"||!e)&&ipv6CidrRegex.test(t))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:s.parsedType}),INVALID}const n=new ParseStatus;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const f=e.data.length>s.value,a=e.data.length<s.value;(f||a)&&(i=this._getOrReturnCtx(e,i),f?addIssueToContext(i,{code:ZodIssueCode.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&addIssueToContext(i,{code:ZodIssueCode.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")emailRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"email",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")emojiRegex$1||(emojiRegex$1=new RegExp(_emojiRegex,"u")),emojiRegex$1.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"emoji",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")uuidRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"uuid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")nanoidRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")cuidRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"cuid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")cuid2Regex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")ulidRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"ulid",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"url",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"regex",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?datetimeRegex(s).test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?dateRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?timeRegex(s).test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?durationRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"duration",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?isValidIP(e.data,s.version)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"ip",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?isValidJWT(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"jwt",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?isValidCidr(e.data,s.version)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"cidr",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?base64Regex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"base64",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?base64urlRegex.test(e.data)||(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{validation:"base64url",code:ZodIssueCode.invalid_string,message:s.message}),n.dirty()):util$1.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(n)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...errorUtil.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(r)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ZodString.create=t=>{var e;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(t)})};function floatSafeRemainder(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),f=parseInt(e.toFixed(i).replace(".",""));return s%f/Math.pow(10,i)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:s.parsedType}),INVALID}let n;const i=new ParseStatus;for(const s of this._def.checks)s.kind==="int"?util$1.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?floatSafeRemainder(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_finite,message:s.message}),i.dirty()):util$1.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,errorUtil.toString(r))}setLimit(e,r,n,i){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:errorUtil.toString(i)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util$1.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}ZodNumber.create=t=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...processCreateParams(t)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let n;const i=new ParseStatus;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),addIssueToContext(n,{code:ZodIssueCode.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):util$1.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:r.parsedType}),INVALID}gte(e,r){return this.setLimit("min",e,!0,errorUtil.toString(r))}gt(e,r){return this.setLimit("min",e,!1,errorUtil.toString(r))}lte(e,r){return this.setLimit("max",e,!0,errorUtil.toString(r))}lt(e,r){return this.setLimit("max",e,!1,errorUtil.toString(r))}setLimit(e,r,n,i){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:errorUtil.toString(i)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ZodBigInt.create=t=>{var e;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...processCreateParams(t)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:n.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=t=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...processCreateParams(t)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:s.parsedType}),INVALID}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return addIssueToContext(s,{code:ZodIssueCode.invalid_date}),INVALID}const n=new ParseStatus;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),addIssueToContext(i,{code:ZodIssueCode.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):util$1.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}ZodDate.create=t=>new ZodDate({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(t)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:n.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=t=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(t)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:n.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=t=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(t)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:n.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=t=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(t)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=t=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(t)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=t=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(t)});class ZodNever extends ZodType{_parse(e){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:r.parsedType}),INVALID}}ZodNever.create=t=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(t)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:n.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=t=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(t)});class ZodArray extends ZodType{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(i.exactLength!==null){const f=r.data.length>i.exactLength.value,a=r.data.length<i.exactLength.value;(f||a)&&(addIssueToContext(r,{code:f?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:a?i.exactLength.value:void 0,maximum:f?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((f,a)=>i.type._parseAsync(new ParseInputLazyPath(r,f,r.path,a)))).then(f=>ParseStatus.mergeArray(n,f));const s=[...r.data].map((f,a)=>i.type._parseSync(new ParseInputLazyPath(r,f,r.path,a)));return ParseStatus.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(r)}})}max(e,r){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(r)}})}length(e,r){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(r)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(t,e)=>new ZodArray({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(t){if(t instanceof ZodObject){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...t._def,shape:()=>e})}else return t instanceof ZodArray?new ZodArray({...t._def,type:deepPartialify(t.element)}):t instanceof ZodOptional?ZodOptional.create(deepPartialify(t.unwrap())):t instanceof ZodNullable?ZodNullable.create(deepPartialify(t.unwrap())):t instanceof ZodTuple?ZodTuple.create(t.items.map(e=>deepPartialify(e))):t}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=util$1.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==ZodParsedType.object){const u=this._getOrReturnCtx(e);return addIssueToContext(u,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:u.parsedType}),INVALID}const{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:f}=this._getCached(),a=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const u in i.data)f.includes(u)||a.push(u);const o=[];for(const u of f){const y=s[u],w=i.data[u];o.push({key:{status:"valid",value:u},value:y._parse(new ParseInputLazyPath(i,w,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof ZodNever){const u=this._def.unknownKeys;if(u==="passthrough")for(const y of a)o.push({key:{status:"valid",value:y},value:{status:"valid",value:i.data[y]}});else if(u==="strict")a.length>0&&(addIssueToContext(i,{code:ZodIssueCode.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const y of a){const w=i.data[y];o.push({key:{status:"valid",value:y},value:u._parse(new ParseInputLazyPath(i,w,i.path,y)),alwaysSet:y in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const y of o){const w=await y.key,v=await y.value;u.push({key:w,value:v,alwaysSet:y.alwaysSet})}return u}).then(u=>ParseStatus.mergeObjectSync(n,u)):ParseStatus.mergeObjectSync(n,o)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,f,a;const o=(f=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&f!==void 0?f:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=errorUtil.errToObj(e).message)!==null&&a!==void 0?a:o}:{message:o}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const r={};return util$1.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new ZodObject({...this._def,shape:()=>r})}omit(e){const r={};return util$1.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new ZodObject({...this._def,shape:()=>r})}deepPartial(){return deepPartialify(this)}partial(e){const r={};return util$1.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new ZodObject({...this._def,shape:()=>r})}required(e){const r={};return util$1.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof ZodOptional;)s=s._def.innerType;r[n]=s}}),new ZodObject({...this._def,shape:()=>r})}keyof(){return createZodEnum(util$1.objectKeys(this.shape))}}ZodObject.create=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(t,e)=>new ZodObject({shape:t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const f=s.map(a=>new ZodError(a.ctx.common.issues));return addIssueToContext(r,{code:ZodIssueCode.invalid_union,unionErrors:f}),INVALID}if(r.common.async)return Promise.all(n.map(async s=>{const f={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:f}),ctx:f}})).then(i);{let s;const f=[];for(const o of n){const u={...r,common:{...r.common,issues:[]},parent:null},y=o._parseSync({data:r.data,path:r.path,parent:u});if(y.status==="valid")return y;y.status==="dirty"&&!s&&(s={result:y,ctx:u}),u.common.issues.length&&f.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;const a=f.map(o=>new ZodError(o));return addIssueToContext(r,{code:ZodIssueCode.invalid_union,unionErrors:a}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(t,e)=>new ZodUnion({options:t,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});const getDiscriminator=t=>t instanceof ZodLazy?getDiscriminator(t.schema):t instanceof ZodEffects?getDiscriminator(t.innerType()):t instanceof ZodLiteral?[t.value]:t instanceof ZodEnum?t.options:t instanceof ZodNativeEnum?util$1.objectValues(t.enum):t instanceof ZodDefault?getDiscriminator(t._def.innerType):t instanceof ZodUndefined?[void 0]:t instanceof ZodNull?[null]:t instanceof ZodOptional?[void 0,...getDiscriminator(t.unwrap())]:t instanceof ZodNullable?[null,...getDiscriminator(t.unwrap())]:t instanceof ZodBranded||t instanceof ZodReadonly?getDiscriminator(t.unwrap()):t instanceof ZodCatch?getDiscriminator(t._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.object)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:r.parsedType}),INVALID;const n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(addIssueToContext(r,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const i=new Map;for(const s of r){const f=getDiscriminator(s.shape[e]);if(!f.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of f){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...processCreateParams(n)})}}function mergeValues(t,e){const r=getParsedType(t),n=getParsedType(e);if(t===e)return{valid:!0,data:t};if(r===ZodParsedType.object&&n===ZodParsedType.object){const i=util$1.objectKeys(e),s=util$1.objectKeys(t).filter(a=>i.indexOf(a)!==-1),f={...t,...e};for(const a of s){const o=mergeValues(t[a],e[a]);if(!o.valid)return{valid:!1};f[a]=o.data}return{valid:!0,data:f}}else if(r===ZodParsedType.array&&n===ZodParsedType.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const f=t[s],a=e[s],o=mergeValues(f,a);if(!o.valid)return{valid:!1};i.push(o.data)}return{valid:!0,data:i}}else return r===ZodParsedType.date&&n===ZodParsedType.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(s,f)=>{if(isAborted(s)||isAborted(f))return INVALID;const a=mergeValues(s.value,f.value);return a.valid?((isDirty(s)||isDirty(f))&&r.dirty(),{status:r.value,value:a.data}):(addIssueToContext(n,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,f])=>i(s,f)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ZodIntersection.create=(t,e,r)=>new ZodIntersection({left:t,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.array)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:n.parsedType}),INVALID;if(n.data.length<this._def.items.length)return addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&n.data.length>this._def.items.length&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const s=[...n.data].map((f,a)=>{const o=this._def.items[a]||this._def.rest;return o?o._parse(new ParseInputLazyPath(n,f,n.path,a)):null}).filter(f=>!!f);return n.common.async?Promise.all(s).then(f=>ParseStatus.mergeArray(r,f)):ParseStatus.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:t,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.object)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:n.parsedType}),INVALID;const i=[],s=this._def.keyType,f=this._def.valueType;for(const a in n.data)i.push({key:s._parse(new ParseInputLazyPath(n,a,n.path,a)),value:f._parse(new ParseInputLazyPath(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?ParseStatus.mergeObjectAsync(r,i):ParseStatus.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ZodType?new ZodRecord({keyType:e,valueType:r,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(n)}):new ZodRecord({keyType:ZodString.create(),valueType:e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(r)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.map)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:n.parsedType}),INVALID;const i=this._def.keyType,s=this._def.valueType,f=[...n.data.entries()].map(([a,o],u)=>({key:i._parse(new ParseInputLazyPath(n,a,n.path,[u,"key"])),value:s._parse(new ParseInputLazyPath(n,o,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const o of f){const u=await o.key,y=await o.value;if(u.status==="aborted"||y.status==="aborted")return INVALID;(u.status==="dirty"||y.status==="dirty")&&r.dirty(),a.set(u.value,y.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const o of f){const u=o.key,y=o.value;if(u.status==="aborted"||y.status==="aborted")return INVALID;(u.status==="dirty"||y.status==="dirty")&&r.dirty(),a.set(u.value,y.value)}return{status:r.value,value:a}}}}ZodMap.create=(t,e,r)=>new ZodMap({valueType:e,keyType:t,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ZodParsedType.set)return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:n.parsedType}),INVALID;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(addIssueToContext(n,{code:ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(addIssueToContext(n,{code:ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const s=this._def.valueType;function f(o){const u=new Set;for(const y of o){if(y.status==="aborted")return INVALID;y.status==="dirty"&&r.dirty(),u.add(y.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((o,u)=>s._parse(new ParseInputLazyPath(n,o,n.path,u)));return n.common.async?Promise.all(a).then(o=>f(o)):f(a)}min(e,r){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(r)}})}max(e,r){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ZodSet.create=(t,e)=>new ZodSet({valueType:t,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.function)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:r.parsedType}),INVALID;function n(a,o){return makeIssue({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,getErrorMap(),errorMap].filter(u=>!!u),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:o}})}function i(a,o){return makeIssue({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,getErrorMap(),errorMap].filter(u=>!!u),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:o}})}const s={errorMap:r.common.contextualErrorMap},f=r.data;if(this._def.returns instanceof ZodPromise){const a=this;return OK(async function(...o){const u=new ZodError([]),y=await a._def.args.parseAsync(o,s).catch(g=>{throw u.addIssue(n(o,g)),u}),w=await Reflect.apply(f,this,y);return await a._def.returns._def.type.parseAsync(w,s).catch(g=>{throw u.addIssue(i(w,g)),u})})}else{const a=this;return OK(function(...o){const u=a._def.args.safeParse(o,s);if(!u.success)throw new ZodError([n(o,u.error)]);const y=Reflect.apply(f,this,u.data),w=a._def.returns.safeParse(y,s);if(!w.success)throw new ZodError([i(y,w.error)]);return w.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:r||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(n)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}ZodLazy.create=(t,e)=>new ZodLazy({getter:t,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(t,e)=>new ZodLiteral({value:t,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(t,e){return new ZodEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return addIssueToContext(r,{expected:util$1.joinValues(n),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:n}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return ZodEnum.create(e,{...this._def,...r})}exclude(e,r=this._def){return ZodEnum.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(e){const r=util$1.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ZodParsedType.string&&n.parsedType!==ZodParsedType.number){const i=util$1.objectValues(r);return addIssueToContext(n,{expected:util$1.joinValues(i),received:n.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util$1.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(e.data)){const i=util$1.objectValues(r);return addIssueToContext(n,{received:n.data,code:ZodIssueCode.invalid_enum_value,options:i}),INVALID}return OK(e.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(t,e)=>new ZodNativeEnum({values:t,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.promise&&r.common.async===!1)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:r.parsedType}),INVALID;const n=r.parsedType===ZodParsedType.promise?r.data:Promise.resolve(r.data);return OK(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ZodPromise.create=(t,e)=>new ZodPromise({type:t,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:f=>{addIssueToContext(n,f),f.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const f=i.transform(n.data,s);if(n.common.async)return Promise.resolve(f).then(async a=>{if(r.value==="aborted")return INVALID;const o=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return o.status==="aborted"?INVALID:o.status==="dirty"||r.value==="dirty"?DIRTY(o.value):o});{if(r.value==="aborted")return INVALID;const a=this._def.schema._parseSync({data:f,path:n.path,parent:n});return a.status==="aborted"?INVALID:a.status==="dirty"||r.value==="dirty"?DIRTY(a.value):a}}if(i.type==="refinement"){const f=a=>{const o=i.refinement(a,s);if(n.common.async)return Promise.resolve(o);if(o instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?INVALID:(a.status==="dirty"&&r.dirty(),f(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?INVALID:(a.status==="dirty"&&r.dirty(),f(a.value).then(()=>({status:r.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){const f=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!isValid(f))return f;const a=i.transform(f.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(f=>isValid(f)?Promise.resolve(i.transform(f.value,s)).then(a=>({status:r.value,value:a})):f);util$1.assertNever(i)}}ZodEffects.create=(t,e,r)=>new ZodEffects({schema:t,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(r)});ZodEffects.createWithPreprocess=(t,e,r)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:t},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(t,e)=>new ZodOptional({innerType:t,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(t,e)=>new ZodNullable({innerType:t,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ZodDefault.create=(t,e)=>new ZodDefault({innerType:t,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return isAsync(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(t,e)=>new ZodCatch({innerType:t,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const n=this._getOrReturnCtx(e);return addIssueToContext(n,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:n.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=t=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(t)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?INVALID:s.status==="dirty"?(r.dirty(),DIRTY(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?INVALID:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new ZodPipeline({in:e,out:r,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const r=this._def.innerType._parse(e),n=i=>(isValid(i)&&(i.value=Object.freeze(i.value)),i);return isAsync(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}ZodReadonly.create=(t,e)=>new ZodReadonly({innerType:t,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});function cleanParams(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function custom(t,e={},r){return t?ZodAny.create().superRefine((n,i)=>{var s,f;const a=t(n);if(a instanceof Promise)return a.then(o=>{var u,y;if(!o){const w=cleanParams(e,n),v=(y=(u=w.fatal)!==null&&u!==void 0?u:r)!==null&&y!==void 0?y:!0;i.addIssue({code:"custom",...w,fatal:v})}});if(!a){const o=cleanParams(e,n),u=(f=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...o,fatal:u})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(t,e={message:`Input not instance of ${t.name}`})=>custom(r=>r instanceof t,e),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:t=>ZodString.create({...t,coerce:!0}),number:t=>ZodNumber.create({...t,coerce:!0}),boolean:t=>ZodBoolean.create({...t,coerce:!0}),bigint:t=>ZodBigInt.create({...t,coerce:!0}),date:t=>ZodDate.create({...t,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid,isAsync,get util(){return util$1},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});function getOpenAIMetadata(t){var e,r;return(r=(e=t==null?void 0:t.providerMetadata)==null?void 0:e.openaiCompatible)!=null?r:{}}function convertToOpenAICompatibleChatMessages(t){const e=[];for(const{role:r,content:n,...i}of t){const s=getOpenAIMetadata({...i});switch(r){case"system":{e.push({role:"system",content:n,...s});break}case"user":{if(n.length===1&&n[0].type==="text"){e.push({role:"user",content:n[0].text,...getOpenAIMetadata(n[0])});break}e.push({role:"user",content:n.map(f=>{var a;const o=getOpenAIMetadata(f);switch(f.type){case"text":return{type:"text",text:f.text,...o};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(a=f.mimeType)!=null?a:"image/jpeg"};base64,${convertUint8ArrayToBase64$1(f.image)}`},...o};case"file":throw new UnsupportedFunctionalityError({functionality:"File content parts in user messages"})}}),...s});break}case"assistant":{let f="";const a=[];for(const o of n){const u=getOpenAIMetadata(o);switch(o.type){case"text":{f+=o.text;break}case"tool-call":{a.push({id:o.toolCallId,type:"function",function:{name:o.toolName,arguments:JSON.stringify(o.args)},...u});break}default:{const y=o;throw new Error(`Unsupported part: ${y}`)}}}e.push({role:"assistant",content:f,tool_calls:a.length>0?a:void 0,...s});break}case"tool":{for(const f of n){const a=getOpenAIMetadata(f);e.push({role:"tool",tool_call_id:f.toolCallId,content:JSON.stringify(f.result),...a})}break}default:{const f=r;throw new Error(`Unsupported role: ${f}`)}}}return e}function getResponseMetadata({id:t,model:e,created:r}){return{id:t??void 0,modelId:e??void 0,timestamp:r!=null?new Date(r*1e3):void 0}}function mapOpenAICompatibleFinishReason(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var openaiCompatibleErrorDataSchema=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),defaultOpenAICompatibleErrorStructure={errorSchema:openaiCompatibleErrorDataSchema,errorToMessage:t=>t.error.message};function prepareTools({mode:t,structuredOutputs:e}){var r;const n=(r=t.tools)!=null&&r.length?t.tools:void 0,i=[];if(n==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=t.toolChoice,f=[];for(const o of n)o.type==="provider-defined"?i.push({type:"unsupported-tool",tool:o}):f.push({type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}});if(s==null)return{tools:f,tool_choice:void 0,toolWarnings:i};const a=s.type;switch(a){case"auto":case"none":case"required":return{tools:f,tool_choice:a,toolWarnings:i};case"tool":return{tools:f,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const o=a;throw new UnsupportedFunctionalityError({functionality:`Unsupported tool choice type: ${o}`})}}}var OpenAICompatibleChatLanguageModel=class{constructor(t,e,r){this.specificationVersion="v1";var n,i;this.modelId=t,this.settings=e,this.config=r;const s=(n=r.errorStructure)!=null?n:defaultOpenAICompatibleErrorStructure;this.chunkSchema=createOpenAICompatibleChatChunkSchema(s.errorSchema),this.failedResponseHandler=createJsonErrorResponseHandler(s),this.supportsStructuredOutputs=(i=r.supportsStructuredOutputs)!=null?i:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:r,temperature:n,topP:i,topK:s,frequencyPenalty:f,presencePenalty:a,providerMetadata:o,stopSequences:u,responseFormat:y,seed:w}){var v,g;const b=t.type,l=[];s!=null&&l.push({type:"unsupported-setting",setting:"topK"}),(y==null?void 0:y.type)==="json"&&y.schema!=null&&!this.supportsStructuredOutputs&&l.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:r,temperature:n,top_p:i,frequency_penalty:f,presence_penalty:a,response_format:(y==null?void 0:y.type)==="json"?this.supportsStructuredOutputs===!0&&y.schema!=null?{type:"json_schema",json_schema:{schema:y.schema,name:(v=y.name)!=null?v:"response",description:y.description}}:{type:"json_object"}:void 0,stop:u,seed:w,...o==null?void 0:o[this.providerOptionsName],messages:convertToOpenAICompatibleChatMessages(e)};switch(b){case"regular":{const{tools:h,tool_choice:d,toolWarnings:c}=prepareTools({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:h,tool_choice:d},warnings:[...l,...c]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(g=t.name)!=null?g:"response",description:t.description}}:{type:"json_object"}},warnings:l};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:l};default:{const h=b;throw new Error(`Unsupported type: ${h}`)}}}async doGenerate(t){var e,r,n,i,s,f,a,o,u;const{args:y,warnings:w}=this.getArgs({...t}),v=JSON.stringify(y),{responseHeaders:g,value:b,rawValue:l}=await postJsonToApi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:combineHeaders(this.config.headers(),t.headers),body:y,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:createJsonResponseHandler(OpenAICompatibleChatResponseSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:_,...h}=y,d=b.choices[0],c=(r=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:r.call(e,{parsedBody:l});return{text:(n=d.message.content)!=null?n:void 0,reasoning:(i=d.message.reasoning_content)!=null?i:void 0,toolCalls:(s=d.message.tool_calls)==null?void 0:s.map(p=>{var m;return{toolCallType:"function",toolCallId:(m=p.id)!=null?m:generateId(),toolName:p.function.name,args:p.function.arguments}}),finishReason:mapOpenAICompatibleFinishReason(d.finish_reason),usage:{promptTokens:(a=(f=b.usage)==null?void 0:f.prompt_tokens)!=null?a:NaN,completionTokens:(u=(o=b.usage)==null?void 0:o.completion_tokens)!=null?u:NaN},...c&&{providerMetadata:c},rawCall:{rawPrompt:_,rawSettings:h},rawResponse:{headers:g},response:getResponseMetadata(b),warnings:w,request:{body:v}}}async doStream(t){var e;if(this.settings.simulateStreaming){const b=await this.doGenerate(t);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...b.response}),b.reasoning&&_.enqueue({type:"reasoning",textDelta:b.reasoning}),b.text&&_.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const h of b.toolCalls)_.enqueue({type:"tool-call",...h});_.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),_.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:r,warnings:n}=this.getArgs({...t}),i=JSON.stringify({...r,stream:!0}),s=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:f,value:a}=await postJsonToApi({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:combineHeaders(this.config.headers(),t.headers),body:{...r,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:createEventSourceResponseHandler(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:o,...u}=r,y=[];let w="unknown",v={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:a.pipeThrough(new TransformStream({transform(b,l){var _,h,d,c,p,m,S,E,T,A,P,H,O,q;if(!b.success){w="error",l.enqueue({type:"error",error:b.error});return}const C=b.value;if(s==null||s.processChunk(b.rawValue),"error"in C){w="error",l.enqueue({type:"error",error:C.error.message});return}g&&(g=!1,l.enqueue({type:"response-metadata",...getResponseMetadata(C)})),C.usage!=null&&(v={promptTokens:(_=C.usage.prompt_tokens)!=null?_:void 0,completionTokens:(h=C.usage.completion_tokens)!=null?h:void 0});const j=C.choices[0];if((j==null?void 0:j.finish_reason)!=null&&(w=mapOpenAICompatibleFinishReason(j.finish_reason)),(j==null?void 0:j.delta)==null)return;const V=j.delta;if(V.reasoning_content!=null&&l.enqueue({type:"reasoning",textDelta:V.reasoning_content}),V.content!=null&&l.enqueue({type:"text-delta",textDelta:V.content}),V.tool_calls!=null)for(const N of V.tool_calls){const Y=N.index;if(y[Y]==null){if(N.type!=="function")throw new InvalidResponseDataError({data:N,message:"Expected 'function' type."});if(N.id==null)throw new InvalidResponseDataError({data:N,message:"Expected 'id' to be a string."});if(((d=N.function)==null?void 0:d.name)==null)throw new InvalidResponseDataError({data:N,message:"Expected 'function.name' to be a string."});y[Y]={id:N.id,type:"function",function:{name:N.function.name,arguments:(c=N.function.arguments)!=null?c:""},hasFinished:!1};const J=y[Y];((p=J.function)==null?void 0:p.name)!=null&&((m=J.function)==null?void 0:m.arguments)!=null&&(J.function.arguments.length>0&&l.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),isParsableJson(J.function.arguments)&&(l.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(S=J.id)!=null?S:generateId(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const X=y[Y];X.hasFinished||(((E=N.function)==null?void 0:E.arguments)!=null&&(X.function.arguments+=(A=(T=N.function)==null?void 0:T.arguments)!=null?A:""),l.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:(P=N.function.arguments)!=null?P:""}),((H=X.function)==null?void 0:H.name)!=null&&((O=X.function)==null?void 0:O.arguments)!=null&&isParsableJson(X.function.arguments)&&(l.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(q=X.id)!=null?q:generateId(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0))}},flush(b){var l,_;const h=s==null?void 0:s.buildMetadata();b.enqueue({type:"finish",finishReason:w,usage:{promptTokens:(l=v.promptTokens)!=null?l:NaN,completionTokens:(_=v.completionTokens)!=null?_:NaN},...h&&{providerMetadata:h}})}})),rawCall:{rawPrompt:o,rawSettings:u},rawResponse:{headers:f},warnings:n,request:{body:i}}}},OpenAICompatibleChatResponseSchema=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),finish_reason:z.string().nullish()})),usage:z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish()}).nullish()}),createOpenAICompatibleChatChunkSchema=t=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").optional(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),finish_reason:z.string().nullish()})),usage:z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish()}).nullish()}),t]);z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()});z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()});var perplexityMetadataExtractor={extractMetadata:({parsedBody:t})=>{var e,r,n;const i=safeValidateTypes$2({value:t,schema:perplexityResponseSchema});return i.success?buildPerplexityMetadata((e=i.value.citations)!=null?e:void 0,(r=i.value.images)!=null?r:void 0,(n=i.value.usage)!=null?n:void 0):void 0},createStreamExtractor:()=>{let t,e,r;return{processChunk:n=>{var i,s,f;const a=safeValidateTypes$2({value:n,schema:perplexityStreamChunkSchema});a.success&&(t=(i=a.value.citations)!=null?i:t,e=(s=a.value.images)!=null?s:e,r=(f=a.value.usage)!=null?f:r)},buildMetadata:()=>buildPerplexityMetadata(t,e,r)}}},buildPerplexityMetadata=(t,e,r)=>{var n,i;return t||e||r?{perplexity:{...t&&{citations:t},...e&&{images:e.map(s=>({imageUrl:s.image_url,originUrl:s.origin_url,height:s.height,width:s.width}))},...r&&{usage:{citationTokens:(n=r.citation_tokens)!=null?n:NaN,numSearchQueries:(i=r.num_search_queries)!=null?i:NaN}}}}:void 0},perplexityCitationSchema=z.array(z.string()),perplexityImageSchema=z.object({image_url:z.string(),origin_url:z.string(),height:z.number(),width:z.number()}),perplexityUsageSchema=z.object({citation_tokens:z.number().nullish(),num_search_queries:z.number().nullish()}),perplexityResponseSchema=z.object({citations:perplexityCitationSchema.nullish(),images:z.array(perplexityImageSchema).nullish(),usage:perplexityUsageSchema.nullish()}),perplexityStreamChunkSchema=z.object({choices:z.array(z.object({finish_reason:z.string().nullish(),delta:z.object({role:z.string(),content:z.string()}).nullish()})).nullish(),citations:perplexityCitationSchema.nullish(),images:z.array(perplexityImageSchema).nullish(),usage:perplexityUsageSchema.nullish()}),perplexityErrorSchema=z.object({code:z.string(),error:z.string()}),perplexityErrorStructure={errorSchema:perplexityErrorSchema,errorToMessage:t=>t.error};function createPerplexity(t={}){var e;const r=withoutTrailingSlash((e=t.baseURL)!=null?e:"https://api.perplexity.ai"),n=()=>({Authorization:`Bearer ${loadApiKey({apiKey:t.apiKey,environmentVariableName:"PERPLEXITY_API_KEY",description:"Perplexity"})}`,...t.headers}),i=(f,a={})=>new OpenAICompatibleChatLanguageModel(f,a,{provider:"perplexity.chat",url:({path:o})=>`${r}${o}`,headers:n,fetch:t.fetch,defaultObjectGenerationMode:"json",errorStructure:perplexityErrorStructure,metadataExtractor:perplexityMetadataExtractor,supportsStructuredOutputs:!0}),s=(f,a)=>i(f,a);return s.languageModel=i,s.chat=i,s.textEmbeddingModel=f=>{throw new NoSuchModelError({modelId:f,modelType:"textEmbeddingModel"})},s}createPerplexity();var marker$2="vercel.ai.error",symbol$2=Symbol.for(marker$2),_a$2,_AISDKError$1=class Dr extends Error{constructor({name:e,message:r,cause:n}){super(r),this[_a$2]=!0,this.name=e,this.cause=n}static isInstance(e){return Dr.hasMarker(e,marker$2)}static hasMarker(e,r){const n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};_a$2=symbol$2;var AISDKError$1=_AISDKError$1,name$2="AI_APICallError",marker2$1=`vercel.ai.error.${name$2}`,symbol2$1=Symbol.for(marker2$1),_a2$1,APICallError=class extends AISDKError$1{constructor({message:t,url:e,requestBodyValues:r,statusCode:n,responseHeaders:i,responseBody:s,cause:f,isRetryable:a=n!=null&&(n===408||n===409||n===429||n>=500),data:o}){super({name:name$2,message:t,cause:f}),this[_a2$1]=!0,this.url=e,this.requestBodyValues=r,this.statusCode=n,this.responseHeaders=i,this.responseBody=s,this.isRetryable=a,this.data=o}static isInstance(t){return AISDKError$1.hasMarker(t,marker2$1)}};_a2$1=symbol2$1;function getErrorMessage$2(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var name3$1="AI_InvalidArgumentError",marker4$2=`vercel.ai.error.${name3$1}`,symbol4$2=Symbol.for(marker4$2),_a4$2,InvalidArgumentError$2=class extends AISDKError$1{constructor({message:e,cause:r,argument:n}){super({name:name3$1,message:e,cause:r}),this[_a4$2]=!0,this.argument=n}static isInstance(e){return AISDKError$1.hasMarker(e,marker4$2)}};_a4$2=symbol4$2;var name4$1="AI_InvalidPromptError",marker5$1=`vercel.ai.error.${name4$1}`,symbol5$1=Symbol.for(marker5$1),_a5$1,InvalidPromptError=class extends AISDKError$1{constructor({prompt:t,message:e,cause:r}){super({name:name4$1,message:`Invalid prompt: ${e}`,cause:r}),this[_a5$1]=!0,this.prompt=t}static isInstance(t){return AISDKError$1.hasMarker(t,marker5$1)}};_a5$1=symbol5$1;var name6$2="AI_JSONParseError",marker7$2=`vercel.ai.error.${name6$2}`,symbol7$2=Symbol.for(marker7$2),_a7$2,JSONParseError$1=class extends AISDKError$1{constructor({text:e,cause:r}){super({name:name6$2,message:`JSON parsing failed: Text: ${e}.
Error message: ${getErrorMessage$2(r)}`,cause:r}),this[_a7$2]=!0,this.text=e}static isInstance(e){return AISDKError$1.hasMarker(e,marker7$2)}};_a7$2=symbol7$2;var name12$2="AI_TypeValidationError",marker13$2=`vercel.ai.error.${name12$2}`,symbol13$2=Symbol.for(marker13$2),_a13$2,_TypeValidationError$1=class ir extends AISDKError$1{constructor({value:e,cause:r}){super({name:name12$2,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${getErrorMessage$2(r)}`,cause:r}),this[_a13$2]=!0,this.value=e}static isInstance(e){return AISDKError$1.hasMarker(e,marker13$2)}static wrap({value:e,cause:r}){return ir.isInstance(r)&&r.value===e?r:new ir({value:e,cause:r})}};_a13$2=symbol13$2;var TypeValidationError$1=_TypeValidationError$1;function convertAsyncIteratorToReadableStream(t){return new ReadableStream({async pull(e){try{const{value:r,done:n}=await t.next();n?e.close():e.enqueue(r)}catch(r){e.error(r)}},cancel(){}})}async function delay$1(t){return t==null?Promise.resolve():new Promise(e=>setTimeout(e,t))}var createIdGenerator$1=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const i=customAlphabet$1(r,e);if(t==null)return i;if(r.includes(n))throw new InvalidArgumentError$2({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return s=>`${t}${n}${i(s)}`};createIdGenerator$1();function getErrorMessage$1(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}function isAbortError(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}var validatorSymbol$1=Symbol.for("vercel.ai.validator");function validator$1(t){return{[validatorSymbol$1]:!0,validate:t}}function isValidator$1(t){return typeof t=="object"&&t!==null&&validatorSymbol$1 in t&&t[validatorSymbol$1]===!0&&"validate"in t}function asValidator$1(t){return isValidator$1(t)?t:zodValidator$1(t)}function zodValidator$1(t){return validator$1(e=>{const r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function safeValidateTypes$1({value:t,schema:e}){const r=asValidator$1(e);try{if(r.validate==null)return{success:!0,value:t};const n=r.validate(t);return n.success?n:{success:!1,error:TypeValidationError$1.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:TypeValidationError$1.wrap({value:t,cause:n})}}}function safeParseJSON$1({text:t,schema:e}){try{const r=SecureJSON.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};const n=safeValidateTypes$1({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:JSONParseError$1.isInstance(r)?r:new JSONParseError$1({text:t,cause:r})}}}var{btoa:btoa$1,atob:atob$1}=globalThis;function convertBase64ToUint8Array(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=atob$1(e);return Uint8Array.from(r,n=>n.codePointAt(0))}function convertUint8ArrayToBase64(t){let e="";for(let r=0;r<t.length;r++)e+=String.fromCodePoint(t[r]);return btoa$1(e)}var marker$1="vercel.ai.error",symbol$1=Symbol.for(marker$1),_a$1,_AISDKError=class Nr extends Error{constructor({name:e,message:r,cause:n}){super(r),this[_a$1]=!0,this.name=e,this.cause=n}static isInstance(e){return Nr.hasMarker(e,marker$1)}static hasMarker(e,r){const n=Symbol.for(r);return e!=null&&typeof e=="object"&&n in e&&typeof e[n]=="boolean"&&e[n]===!0}};_a$1=symbol$1;var AISDKError=_AISDKError;function getErrorMessage(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var name3="AI_InvalidArgumentError",marker4$1=`vercel.ai.error.${name3}`,symbol4$1=Symbol.for(marker4$1),_a4$1,InvalidArgumentError$1=class extends AISDKError{constructor({message:e,cause:r,argument:n}){super({name:name3,message:e,cause:r}),this[_a4$1]=!0,this.argument=n}static isInstance(e){return AISDKError.hasMarker(e,marker4$1)}};_a4$1=symbol4$1;var name6$1="AI_JSONParseError",marker7$1=`vercel.ai.error.${name6$1}`,symbol7$1=Symbol.for(marker7$1),_a7$1,JSONParseError=class extends AISDKError{constructor({text:t,cause:e}){super({name:name6$1,message:`JSON parsing failed: Text: ${t}.
Error message: ${getErrorMessage(e)}`,cause:e}),this[_a7$1]=!0,this.text=t}static isInstance(t){return AISDKError.hasMarker(t,marker7$1)}};_a7$1=symbol7$1;var name12$1="AI_TypeValidationError",marker13$1=`vercel.ai.error.${name12$1}`,symbol13$1=Symbol.for(marker13$1),_a13$1,_TypeValidationError=class sr extends AISDKError{constructor({value:e,cause:r}){super({name:name12$1,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${getErrorMessage(r)}`,cause:r}),this[_a13$1]=!0,this.value=e}static isInstance(e){return AISDKError.hasMarker(e,marker13$1)}static wrap({value:e,cause:r}){return sr.isInstance(r)&&r.value===e?r:new sr({value:e,cause:r})}};_a13$1=symbol13$1;var TypeValidationError=_TypeValidationError,createIdGenerator=({prefix:t,size:e=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const i=customAlphabet$1(r,e);if(t==null)return i;if(r.includes(n))throw new InvalidArgumentError$1({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return s=>`${t}${n}${i(s)}`};createIdGenerator();var validatorSymbol=Symbol.for("vercel.ai.validator");function validator(t){return{[validatorSymbol]:!0,validate:t}}function isValidator(t){return typeof t=="object"&&t!==null&&validatorSymbol in t&&t[validatorSymbol]===!0&&"validate"in t}function asValidator(t){return isValidator(t)?t:zodValidator(t)}function zodValidator(t){return validator(e=>{const r=t.safeParse(e);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}})}function safeValidateTypes({value:t,schema:e}){const r=asValidator(e);try{if(r.validate==null)return{success:!0,value:t};const n=r.validate(t);return n.success?n:{success:!1,error:TypeValidationError.wrap({value:t,cause:n.error})}}catch(n){return{success:!1,error:TypeValidationError.wrap({value:t,cause:n})}}}function safeParseJSON({text:t,schema:e}){try{const r=SecureJSON.parse(t);if(e==null)return{success:!0,value:r,rawValue:r};const n=safeValidateTypes({value:r,schema:e});return n.success?{...n,rawValue:r}:n}catch(r){return{success:!1,error:JSONParseError.isInstance(r)?r:new JSONParseError({text:t,cause:r})}}}const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions=t=>typeof t=="string"?{...defaultOptions,name:t}:{...defaultOptions,...t},getRefs=t=>{const e=getDefaultOptions(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function addErrorMessage(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function setResponseValueAndErrors(t,e,r,n,i){t[e]=r,addErrorMessage(t,e,n,i)}function parseAnyDef(){return{}}function parseArrayDef(t,e){var n,i,s;const r={type:"array"};return(n=t.type)!=null&&n._def&&((s=(i=t.type)==null?void 0:i._def)==null?void 0:s.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(r.items=parseDef(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&setResponseValueAndErrors(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&setResponseValueAndErrors(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(setResponseValueAndErrors(r,"minItems",t.exactLength.value,t.exactLength.message,e),setResponseValueAndErrors(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function parseBigintDef(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"minimum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"maximum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors(r,"maximum",n.value,n.message,e));break;case"multipleOf":setResponseValueAndErrors(r,"multipleOf",n.value,n.message,e);break}return r}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(t,e){return parseDef(t.type._def,e)}const parseCatchDef=(t,e)=>parseDef(t.innerType._def,e);function parseDateDef(t,e,r){const n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,s)=>parseDateDef(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(t,e)}}const integerDateParser=(t,e)=>{const r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(const n of t.checks)switch(n.kind){case"min":setResponseValueAndErrors(r,"minimum",n.value,n.message,e);break;case"max":setResponseValueAndErrors(r,"maximum",n.value,n.message,e);break}return r};function parseDefaultDef(t,e){return{...parseDef(t.innerType._def,e),default:t.defaultValue()}}function parseEffectsDef(t,e){return e.effectStrategy==="input"?parseDef(t.schema._def,e):{}}function parseEnumDef(t){return{type:"string",enum:Array.from(t.values)}}const isJsonSchema7AllOfType=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function parseIntersectionDef(t,e){const r=[parseDef(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),parseDef(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return r.forEach(s=>{if(isJsonSchema7AllOfType(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(n=void 0);else{let f=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:a,...o}=s;f=o}else n=void 0;i.push(f)}}),i.length?{allOf:i,...n}:void 0}function parseLiteralDef(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}let emojiRegex;const zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(emojiRegex===void 0&&(emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef(t,e){const r={type:"string"};if(t.checks)for(const n of t.checks)switch(n.kind){case"min":setResponseValueAndErrors(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":setResponseValueAndErrors(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":addFormat(r,"email",n.message,e);break;case"format:idn-email":addFormat(r,"idn-email",n.message,e);break;case"pattern:zod":addPattern(r,zodPatterns.email,n.message,e);break}break;case"url":addFormat(r,"uri",n.message,e);break;case"uuid":addFormat(r,"uuid",n.message,e);break;case"regex":addPattern(r,n.regex,n.message,e);break;case"cuid":addPattern(r,zodPatterns.cuid,n.message,e);break;case"cuid2":addPattern(r,zodPatterns.cuid2,n.message,e);break;case"startsWith":addPattern(r,RegExp(`^${escapeLiteralCheckValue(n.value,e)}`),n.message,e);break;case"endsWith":addPattern(r,RegExp(`${escapeLiteralCheckValue(n.value,e)}$`),n.message,e);break;case"datetime":addFormat(r,"date-time",n.message,e);break;case"date":addFormat(r,"date",n.message,e);break;case"time":addFormat(r,"time",n.message,e);break;case"duration":addFormat(r,"duration",n.message,e);break;case"length":setResponseValueAndErrors(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),setResponseValueAndErrors(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{addPattern(r,RegExp(escapeLiteralCheckValue(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&addFormat(r,"ipv4",n.message,e),n.version!=="v4"&&addFormat(r,"ipv6",n.message,e);break}case"base64url":addPattern(r,zodPatterns.base64url,n.message,e);break;case"jwt":addPattern(r,zodPatterns.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&addPattern(r,zodPatterns.ipv4Cidr,n.message,e),n.version!=="v4"&&addPattern(r,zodPatterns.ipv6Cidr,n.message,e);break}case"emoji":addPattern(r,zodPatterns.emoji(),n.message,e);break;case"ulid":{addPattern(r,zodPatterns.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{addFormat(r,"binary",n.message,e);break}case"contentEncoding:base64":{setResponseValueAndErrors(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{addPattern(r,zodPatterns.base64,n.message,e);break}}break}case"nanoid":addPattern(r,zodPatterns.nanoid,n.message,e)}return r}function escapeLiteralCheckValue(t,e){return e.patternStrategy==="escape"?escapeNonAlphaNumeric(t):t}const ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric(t){let e="";for(let r=0;r<t.length;r++)ALPHA_NUMERIC.has(t[r])||(e+="\\"),e+=t[r];return e}function addFormat(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):setResponseValueAndErrors(t,"format",e,r,n)}function addPattern(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:stringifyRegExpWithFlags(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):setResponseValueAndErrors(t,"pattern",stringifyRegExpWithFlags(e,n),r,n)}function stringifyRegExpWithFlags(t,e){var o;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source;let i="",s=!1,f=!1,a=!1;for(let u=0;u<n.length;u++){if(s){i+=n[u],s=!1;continue}if(r.i){if(f){if(n[u].match(/[a-z]/)){a?(i+=n[u],i+=`${n[u-2]}-${n[u]}`.toUpperCase(),a=!1):n[u+1]==="-"&&((o=n[u+2])!=null&&o.match(/[a-z]/))?(i+=n[u],a=!0):i+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){i+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(r.m){if(n[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[u]==="."){i+=f?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}i+=n[u],n[u]==="\\"?s=!0:f&&n[u]==="]"?f=!1:!f&&n[u]==="["&&(f=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function parseRecordDef(t,e){var n,i,s,f,a,o;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((u,y)=>({...u,[y]:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",y]})??{}}),{}),additionalProperties:!1};const r={type:"object",additionalProperties:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return r;if(((i=t.keyType)==null?void 0:i._def.typeName)===ZodFirstPartyTypeKind.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const{type:u,...y}=parseStringDef(t.keyType._def,e);return{...r,propertyNames:y}}else{if(((f=t.keyType)==null?void 0:f._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((a=t.keyType)==null?void 0:a._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&t.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&((o=t.keyType._def.type._def.checks)!=null&&o.length)){const{type:u,...y}=parseBrandedDef(t.keyType._def,e);return{...r,propertyNames:y}}}return r}function parseMapDef(t,e){if(e.mapStrategy==="record")return parseRecordDef(t,e);const r=parseDef(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function parseNativeEnumDef(t){const e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(n.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function parseNeverDef(){return{not:{}}}function parseNullDef(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(t,e){if(e.target==="openApi3")return asAnyOf(t,e);const r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in primitiveMappings&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((i,s)=>{const f=primitiveMappings[s._def.typeName];return f&&!i.includes(f)?[...i,f]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((i,s)=>{const f=typeof s._def.value;switch(f){case"string":case"number":case"boolean":return[...i,f];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){const i=n.filter((s,f,a)=>a.indexOf(s)===f);return{type:i.length>1?i:i[0],enum:r.reduce((s,f)=>s.includes(f._def.value)?s:[...s,f._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(s=>!n.includes(s))],[])};return asAnyOf(t,e)}const asAnyOf=(t,e)=>{const r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>parseDef(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function parseNullableDef(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:primitiveMappings[t.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function parseNumberDef(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",addErrorMessage(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"minimum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?setResponseValueAndErrors(r,"maximum",n.value,n.message,e):setResponseValueAndErrors(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors(r,"maximum",n.value,n.message,e));break;case"multipleOf":setResponseValueAndErrors(r,"multipleOf",n.value,n.message,e);break}return r}function decideAdditionalProperties(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":parseDef(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":parseDef(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function parseObjectDef(t,e){const r=e.target==="openAi",n={type:"object",...Object.entries(t.shape()).reduce((i,[s,f])=>{if(f===void 0||f._def===void 0)return i;let a=f.isOptional();a&&r&&(f instanceof ZodOptional&&(f=f._def.innerType),f.isNullable()||(f=f.nullable()),a=!1);const o=parseDef(f._def,{...e,currentPath:[...e.currentPath,"properties",s],propertyPath:[...e.currentPath,"properties",s]});return o===void 0?i:{properties:{...i.properties,[s]:o},required:a?i.required:[...i.required,s]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(t,e)};return n.required.length||delete n.required,n}const parseOptionalDef=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return parseDef(t.innerType._def,e);const r=parseDef(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},parsePipelineDef=(t,e)=>{if(e.pipeStrategy==="input")return parseDef(t.in._def,e);if(e.pipeStrategy==="output")return parseDef(t.out._def,e);const r=parseDef(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=parseDef(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function parsePromiseDef(t,e){return parseDef(t.type._def,e)}function parseSetDef(t,e){const n={type:"array",uniqueItems:!0,items:parseDef(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&setResponseValueAndErrors(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&setResponseValueAndErrors(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function parseTupleDef(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>parseDef(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:parseDef(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>parseDef(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(t,e)=>parseDef(t.innerType._def,e),selectParser=(t,e,r)=>{switch(e){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(t,r);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(t,r);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(t,r);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(t,r);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(t,r);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(r);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(t,r);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(t,r);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(t,r);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(t,r);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(t,r);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(t,r);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(t);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(t);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(t,r);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(t,r);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(t,r);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(t,r);case ZodFirstPartyTypeKind.ZodLazy:return()=>t.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(t,r);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(t,r);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(t,r);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(t,r);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(t,r);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(t,r);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(t,r);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:return;default:return(n=>{})()}};function parseDef(t,e,r=!1){var a;const n=e.seen.get(t);if(e.override){const o=(a=e.override)==null?void 0:a.call(e,t,e,n,r);if(o!==ignoreOverride)return o}if(n&&!r){const o=get$ref(n,e);if(o!==void 0)return o}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const s=selectParser(t,t.typeName,e),f=typeof s=="function"?parseDef(s(),e):s;if(f&&addMeta(t,e,f),e.postProcess){const o=e.postProcess(f,t,e);return i.jsonSchema=f,o}return i.jsonSchema=f,f}const get$ref=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:getRelativePath(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},getRelativePath=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},addMeta=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),zodToJsonSchema=(t,e)=>{const r=getRefs(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((o,[u,y])=>({...o,[u]:parseDef(y._def,{...r,currentPath:[...r.basePath,r.definitionPath,u]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=parseDef(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},f=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;f!==void 0&&(s.title=f);const a=i===void 0?n?{...s,[r.definitionPath]:n}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:s}};return r.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var textStreamPart={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},errorStreamPart={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},assistantMessageStreamPart={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},assistantControlDataStreamPart={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},dataMessageStreamPart={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},assistantStreamParts=[textStreamPart,errorStreamPart,assistantMessageStreamPart,assistantControlDataStreamPart,dataMessageStreamPart];textStreamPart.code+"",errorStreamPart.code+"",assistantMessageStreamPart.code+"",assistantControlDataStreamPart.code+"",dataMessageStreamPart.code+"";textStreamPart.name+"",textStreamPart.code,errorStreamPart.name+"",errorStreamPart.code,assistantMessageStreamPart.name+"",assistantMessageStreamPart.code,assistantControlDataStreamPart.name+"",assistantControlDataStreamPart.code,dataMessageStreamPart.name+"",dataMessageStreamPart.code;assistantStreamParts.map(t=>t.code);function fixJson(t){const e=["ROOT"];let r=-1,n=null;function i(o,u,y){switch(o){case'"':{r=u,e.pop(),e.push(y),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=u,n=u,e.pop(),e.push(y),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(y),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=u,e.pop(),e.push(y),e.push("INSIDE_NUMBER");break}case"{":{r=u,e.pop(),e.push(y),e.push("INSIDE_OBJECT_START");break}case"[":{r=u,e.pop(),e.push(y),e.push("INSIDE_ARRAY_START");break}}}function s(o,u){switch(o){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=u,e.pop();break}}}function f(o,u){switch(o){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=u,e.pop();break}}}for(let o=0;o<t.length;o++){const u=t[o];switch(e[e.length-1]){case"ROOT":i(u,o,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{r=o,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{i(u,o,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{s(u,o);break}case"INSIDE_STRING":{switch(u){case'"':{e.pop(),r=o;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:r=o}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{r=o,e.pop();break}default:{r=o,i(u,o,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=o,e.pop();break}default:{r=o;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{i(u,o,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),r=o;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=o;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&f(u,o),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(u,o);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&s(u,o);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&f(u,o);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const w=t.substring(n,o+1);!"false".startsWith(w)&&!"true".startsWith(w)&&!"null".startsWith(w)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?s(u,o):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&f(u,o)):r=o;break}}}let a=t.slice(0,r+1);for(let o=e.length-1;o>=0;o--)switch(e[o]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const y=t.substring(n,t.length);"true".startsWith(y)?a+="true".slice(y.length):"false".startsWith(y)?a+="false".slice(y.length):"null".startsWith(y)&&(a+="null".slice(y.length))}}return a}function parsePartialJson(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=safeParseJSON({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=safeParseJSON({text:fixJson(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var textStreamPart2={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},dataStreamPart={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},errorStreamPart2={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},messageAnnotationsStreamPart={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},toolCallStreamPart={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},toolResultStreamPart={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},toolCallStreamingStartStreamPart={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},toolCallDeltaStreamPart={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},finishMessageStreamPart={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},finishStepStreamPart={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},startStepStreamPart={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},reasoningStreamPart={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},sourcePart={code:"h",name:"source",parse:t=>{if(t==null||typeof t!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:t}}},redactedReasoningStreamPart={code:"i",name:"redacted_reasoning",parse:t=>{if(t==null||typeof t!="object"||!("data"in t)||typeof t.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:t.data}}}},reasoningSignatureStreamPart={code:"j",name:"reasoning_signature",parse:t=>{if(t==null||typeof t!="object"||!("signature"in t)||typeof t.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:t.signature}}}},dataStreamParts=[textStreamPart2,dataStreamPart,errorStreamPart2,messageAnnotationsStreamPart,toolCallStreamPart,toolResultStreamPart,toolCallStreamingStartStreamPart,toolCallDeltaStreamPart,finishMessageStreamPart,finishStepStreamPart,startStepStreamPart,reasoningStreamPart,sourcePart,redactedReasoningStreamPart,reasoningSignatureStreamPart];Object.fromEntries(dataStreamParts.map(t=>[t.code,t]));Object.fromEntries(dataStreamParts.map(t=>[t.name,t.code]));dataStreamParts.map(t=>t.code);function formatDataStreamPart(t,e){const r=dataStreamParts.find(n=>n.name===t);if(!r)throw new Error(`Invalid stream part type: ${t}`);return`${r.code}:${JSON.stringify(e)}
`}function zodSchema(t,e){var r;const n=(r=void 0)!=null?r:!1;return jsonSchema(zodToJsonSchema(t,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:i=>{const s=t.safeParse(i);return s.success?{success:!0,value:s.data}:{success:!1,error:s.error}}})}var schemaSymbol=Symbol.for("vercel.ai.schema");function jsonSchema(t,{validate:e}={}){return{[schemaSymbol]:!0,_type:void 0,[validatorSymbol]:!0,jsonSchema:t,validate:e}}function isSchema(t){return typeof t=="object"&&t!==null&&schemaSymbol in t&&t[schemaSymbol]===!0&&"jsonSchema"in t&&"validate"in t}function asSchema(t){return isSchema(t)?t:zodSchema(t)}var _globalThis=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},VERSION="1.9.0",re=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function _makeCompatibilityCheck(t){var e=new Set([t]),r=new Set,n=t.match(re);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(o){return o===t};function s(a){return r.add(a),!1}function f(a){return e.add(a),!0}return function(o){if(e.has(o))return!0;if(r.has(o))return!1;var u=o.match(re);if(!u)return s(o);var y={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return y.prerelease!=null||i.major!==y.major?s(o):i.major===0?i.minor===y.minor&&i.patch<=y.patch?f(o):s(o):i.minor<=y.minor?f(o):s(o)}}var isCompatible=_makeCompatibilityCheck(VERSION),major=VERSION.split(".")[0],GLOBAL_OPENTELEMETRY_API_KEY=Symbol.for("opentelemetry.js.api."+major),_global=_globalThis;function registerGlobal(t,e,r,n){var i;n===void 0&&(n=!1);var s=_global[GLOBAL_OPENTELEMETRY_API_KEY]=(i=_global[GLOBAL_OPENTELEMETRY_API_KEY])!==null&&i!==void 0?i:{version:VERSION};if(!n&&s[t]){var f=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(f.stack||f.message),!1}if(s.version!==VERSION){var f=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+VERSION);return r.error(f.stack||f.message),!1}return s[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+VERSION+"."),!0}function getGlobal(t){var e,r,n=(e=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||e===void 0?void 0:e.version;if(!(!n||!isCompatible(n)))return(r=_global[GLOBAL_OPENTELEMETRY_API_KEY])===null||r===void 0?void 0:r[t]}function unregisterGlobal(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+VERSION+".");var r=_global[GLOBAL_OPENTELEMETRY_API_KEY];r&&delete r[t]}var __read$3=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],f;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){f={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return s},__spreadArray$3=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},DiagComponentLogger=function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return logProxy("verbose",this._namespace,e)},t}();function logProxy(t,e,r){var n=getGlobal("diag");if(n)return r.unshift(e),n[t].apply(n,__spreadArray$3([],__read$3(r),!1))}var DiagLogLevel;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(DiagLogLevel||(DiagLogLevel={}));function createLogLevelDiagLogger(t,e){t<DiagLogLevel.NONE?t=DiagLogLevel.NONE:t>DiagLogLevel.ALL&&(t=DiagLogLevel.ALL),e=e||{};function r(n,i){var s=e[n];return typeof s=="function"&&t>=i?s.bind(e):function(){}}return{error:r("error",DiagLogLevel.ERROR),warn:r("warn",DiagLogLevel.WARN),info:r("info",DiagLogLevel.INFO),debug:r("debug",DiagLogLevel.DEBUG),verbose:r("verbose",DiagLogLevel.VERBOSE)}}var __read$2=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],f;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){f={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return s},__spreadArray$2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},API_NAME$2="diag",DiagAPI=function(){function t(){function e(i){return function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];var a=getGlobal("diag");if(a)return a[i].apply(a,__spreadArray$2([],__read$2(s),!1))}}var r=this,n=function(i,s){var f,a,o;if(s===void 0&&(s={logLevel:DiagLogLevel.INFO}),i===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((f=u.stack)!==null&&f!==void 0?f:u.message),!1}typeof s=="number"&&(s={logLevel:s});var y=getGlobal("diag"),w=createLogLevelDiagLogger((a=s.logLevel)!==null&&a!==void 0?a:DiagLogLevel.INFO,i);if(y&&!s.suppressOverrideMessage){var v=(o=new Error().stack)!==null&&o!==void 0?o:"<failed to generate stacktrace>";y.warn("Current logger will be overwritten from "+v),w.warn("Current logger will overwrite one already registered from "+v)}return registerGlobal("diag",w,r,!0)};r.setLogger=n,r.disable=function(){unregisterGlobal(API_NAME$2,r)},r.createComponentLogger=function(i){return new DiagComponentLogger(i)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();function createContextKey(t){return Symbol.for(t)}var BaseContext=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var s=new t(r._currentContext);return s._currentContext.set(n,i),s},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}(),ROOT_CONTEXT=new BaseContext,__read$1=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],f;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){f={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return s},__spreadArray$1=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},NoopContextManager=function(){function t(){}return t.prototype.active=function(){return ROOT_CONTEXT},t.prototype.with=function(e,r,n){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return r.call.apply(r,__spreadArray$1([n],__read$1(i),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),__read=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],f;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){f={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return s},__spreadArray=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},API_NAME$1="context",NOOP_CONTEXT_MANAGER=new NoopContextManager,ContextAPI=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return registerGlobal(API_NAME$1,e,DiagAPI.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,s=[],f=3;f<arguments.length;f++)s[f-3]=arguments[f];return(i=this._getContextManager()).with.apply(i,__spreadArray([e,r,n],__read(s),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return getGlobal(API_NAME$1)||NOOP_CONTEXT_MANAGER},t.prototype.disable=function(){this._getContextManager().disable(),unregisterGlobal(API_NAME$1,DiagAPI.instance())},t}(),TraceFlags;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(TraceFlags||(TraceFlags={}));var INVALID_SPANID="0000000000000000",INVALID_TRACEID="00000000000000000000000000000000",INVALID_SPAN_CONTEXT={traceId:INVALID_TRACEID,spanId:INVALID_SPANID,traceFlags:TraceFlags.NONE},NonRecordingSpan=function(){function t(e){e===void 0&&(e=INVALID_SPAN_CONTEXT),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}(),SPAN_KEY=createContextKey("OpenTelemetry Context Key SPAN");function getSpan(t){return t.getValue(SPAN_KEY)||void 0}function getActiveSpan(){return getSpan(ContextAPI.getInstance().active())}function setSpan(t,e){return t.setValue(SPAN_KEY,e)}function deleteSpan(t){return t.deleteValue(SPAN_KEY)}function setSpanContext(t,e){return setSpan(t,new NonRecordingSpan(e))}function getSpanContext(t){var e;return(e=getSpan(t))===null||e===void 0?void 0:e.spanContext()}var VALID_TRACEID_REGEX=/^([0-9a-f]{32})$/i,VALID_SPANID_REGEX=/^[0-9a-f]{16}$/i;function isValidTraceId(t){return VALID_TRACEID_REGEX.test(t)&&t!==INVALID_TRACEID}function isValidSpanId(t){return VALID_SPANID_REGEX.test(t)&&t!==INVALID_SPANID}function isSpanContextValid(t){return isValidTraceId(t.traceId)&&isValidSpanId(t.spanId)}function wrapSpanContext(t){return new NonRecordingSpan(t)}var contextApi=ContextAPI.getInstance(),NoopTracer=function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=contextApi.active());var i=!!(r!=null&&r.root);if(i)return new NonRecordingSpan;var s=n&&getSpanContext(n);return isSpanContext(s)&&isSpanContextValid(s)?new NonRecordingSpan(s):new NonRecordingSpan},t.prototype.startActiveSpan=function(e,r,n,i){var s,f,a;if(!(arguments.length<2)){arguments.length===2?a=r:arguments.length===3?(s=r,a=n):(s=r,f=n,a=i);var o=f??contextApi.active(),u=this.startSpan(e,s,o),y=setSpan(o,u);return contextApi.with(y,a,void 0,u)}},t}();function isSpanContext(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var NOOP_TRACER=new NoopTracer,ProxyTracer=function(){function t(e,r,n,i){this._provider=e,this.name=r,this.version=n,this.options=i}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,i){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):NOOP_TRACER},t}(),NoopTracerProvider=function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new NoopTracer},t}(),NOOP_TRACER_PROVIDER=new NoopTracerProvider,ProxyTracerProvider=function(){function t(){}return t.prototype.getTracer=function(e,r,n){var i;return(i=this.getDelegateTracer(e,r,n))!==null&&i!==void 0?i:new ProxyTracer(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:NOOP_TRACER_PROVIDER},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,r,n)},t}(),SpanStatusCode;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(SpanStatusCode||(SpanStatusCode={}));var API_NAME="trace",TraceAPI=function(){function t(){this._proxyTracerProvider=new ProxyTracerProvider,this.wrapSpanContext=wrapSpanContext,this.isSpanContextValid=isSpanContextValid,this.deleteSpan=deleteSpan,this.getSpan=getSpan,this.getActiveSpan=getActiveSpan,this.getSpanContext=getSpanContext,this.setSpan=setSpan,this.setSpanContext=setSpanContext}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=registerGlobal(API_NAME,this._proxyTracerProvider,DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return getGlobal(API_NAME)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){unregisterGlobal(API_NAME,DiagAPI.instance()),this._proxyTracerProvider=new ProxyTracerProvider},t}(),trace=TraceAPI.getInstance(),__defProp$2=Object.defineProperty,__export$1=(t,e)=>{for(var r in e)__defProp$2(t,r,{get:e[r],enumerable:!0})};function prepareResponseHeaders(t,{contentType:e,dataStreamVersion:r}){const n=new Headers(t??{});return n.has("Content-Type")||n.set("Content-Type",e),n.set("X-Vercel-AI-Data-Stream",r),n}var name$1="AI_InvalidArgumentError",marker=`vercel.ai.error.${name$1}`,symbol=Symbol.for(marker),_a,InvalidArgumentError=class extends AISDKError$1{constructor({parameter:t,value:e,message:r}){super({name:name$1,message:`Invalid argument for parameter ${t}: ${r}`}),this[_a]=!0,this.parameter=t,this.value=e}static isInstance(t){return AISDKError$1.hasMarker(t,marker)}};_a=symbol;var name2="AI_RetryError",marker2=`vercel.ai.error.${name2}`,symbol2=Symbol.for(marker2),_a2,RetryError=class extends AISDKError$1{constructor({message:t,reason:e,errors:r}){super({name:name2,message:t}),this[_a2]=!0,this.reason=e,this.errors=r,this.lastError=r[r.length-1]}static isInstance(t){return AISDKError$1.hasMarker(t,marker2)}};_a2=symbol2;var retryWithExponentialBackoff=({maxRetries:t=2,initialDelayInMs:e=2e3,backoffFactor:r=2}={})=>async n=>_retryWithExponentialBackoff(n,{maxRetries:t,delayInMs:e,backoffFactor:r});async function _retryWithExponentialBackoff(t,{maxRetries:e,delayInMs:r,backoffFactor:n},i=[]){try{return await t()}catch(s){if(isAbortError(s)||e===0)throw s;const f=getErrorMessage$1(s),a=[...i,s],o=a.length;if(o>e)throw new RetryError({message:`Failed after ${o} attempts. Last error: ${f}`,reason:"maxRetriesExceeded",errors:a});if(s instanceof Error&&APICallError.isInstance(s)&&s.isRetryable===!0&&o<=e)return await delay$1(r),_retryWithExponentialBackoff(t,{maxRetries:e,delayInMs:n*r,backoffFactor:n},a);throw o===1?s:new RetryError({message:`Failed after ${o} attempts with non-retryable error: '${f}'`,reason:"errorNotRetryable",errors:a})}}function prepareRetries({maxRetries:t}){if(t!=null){if(!Number.isInteger(t))throw new InvalidArgumentError({parameter:"maxRetries",value:t,message:"maxRetries must be an integer"});if(t<0)throw new InvalidArgumentError({parameter:"maxRetries",value:t,message:"maxRetries must be >= 0"})}const e=t??2;return{maxRetries:e,retry:retryWithExponentialBackoff({maxRetries:e})}}function assembleOperationName({operationId:t,telemetry:e}){return{"operation.name":`${t}${(e==null?void 0:e.functionId)!=null?` ${e.functionId}`:""}`,"resource.name":e==null?void 0:e.functionId,"ai.operationId":t,"ai.telemetry.functionId":e==null?void 0:e.functionId}}function getBaseTelemetryAttributes({model:t,settings:e,telemetry:r,headers:n}){var i;return{"ai.model.provider":t.provider,"ai.model.id":t.modelId,...Object.entries(e).reduce((s,[f,a])=>(s[`ai.settings.${f}`]=a,s),{}),...Object.entries((i=r==null?void 0:r.metadata)!=null?i:{}).reduce((s,[f,a])=>(s[`ai.telemetry.metadata.${f}`]=a,s),{}),...Object.entries(n??{}).reduce((s,[f,a])=>(a!==void 0&&(s[`ai.request.headers.${f}`]=a),s),{})}}var noopTracer={startSpan(){return noopSpan},startActiveSpan(t,e,r,n){if(typeof e=="function")return e(noopSpan);if(typeof r=="function")return r(noopSpan);if(typeof n=="function")return n(noopSpan)}},noopSpan={spanContext(){return noopSpanContext},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},noopSpanContext={traceId:"",spanId:"",traceFlags:0};function getTracer({isEnabled:t=!1,tracer:e}={}){return t?e||trace.getTracer("ai"):noopTracer}function recordSpan({name:t,tracer:e,attributes:r,fn:n,endWhenDone:i=!0}){return e.startActiveSpan(t,{attributes:r},async s=>{try{const f=await n(s);return i&&s.end(),f}catch(f){try{f instanceof Error?(s.recordException({name:f.name,message:f.message,stack:f.stack}),s.setStatus({code:SpanStatusCode.ERROR,message:f.message})):s.setStatus({code:SpanStatusCode.ERROR})}finally{s.end()}throw f}})}function selectTelemetryAttributes({telemetry:t,attributes:e}){return(t==null?void 0:t.isEnabled)!==!0?{}:Object.entries(e).reduce((r,[n,i])=>{if(i===void 0)return r;if(typeof i=="object"&&"input"in i&&typeof i.input=="function"){if((t==null?void 0:t.recordInputs)===!1)return r;const s=i.input();return s===void 0?r:{...r,[n]:s}}if(typeof i=="object"&&"output"in i&&typeof i.output=="function"){if((t==null?void 0:t.recordOutputs)===!1)return r;const s=i.output();return s===void 0?r:{...r,[n]:s}}return{...r,[n]:i}},{})}var name4="AI_NoObjectGeneratedError",marker4=`vercel.ai.error.${name4}`,symbol4=Symbol.for(marker4),_a4,NoObjectGeneratedError=class extends AISDKError$1{constructor({message:t="No object generated.",cause:e,text:r,response:n,usage:i}){super({name:name4,message:t,cause:e}),this[_a4]=!0,this.text=r,this.response=n,this.usage=i}static isInstance(t){return AISDKError$1.hasMarker(t,marker4)}};_a4=symbol4;var name5="AI_DownloadError",marker5=`vercel.ai.error.${name5}`,symbol5=Symbol.for(marker5),_a5,DownloadError=class extends AISDKError$1{constructor({url:t,statusCode:e,statusText:r,cause:n,message:i=n==null?`Failed to download ${t}: ${e} ${r}`:`Failed to download ${t}: ${n}`}){super({name:name5,message:i,cause:n}),this[_a5]=!0,this.url=t,this.statusCode=e,this.statusText=r}static isInstance(t){return AISDKError$1.hasMarker(t,marker5)}};_a5=symbol5;async function download({url:t,fetchImplementation:e=fetch}){var r;const n=t.toString();try{const i=await e(n);if(!i.ok)throw new DownloadError({url:n,statusCode:i.status,statusText:i.statusText});return{data:new Uint8Array(await i.arrayBuffer()),mimeType:(r=i.headers.get("content-type"))!=null?r:void 0}}catch(i){throw DownloadError.isInstance(i)?i:new DownloadError({url:n,cause:i})}}var mimeTypeSignatures=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}];function detectImageMimeType(t){for(const{bytes:e,mimeType:r}of mimeTypeSignatures)if(t.length>=e.length&&e.every((n,i)=>t[i]===n))return r}var name6="AI_InvalidDataContentError",marker6=`vercel.ai.error.${name6}`,symbol6=Symbol.for(marker6),_a6,InvalidDataContentError=class extends AISDKError$1{constructor({content:t,cause:e,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof t}.`}){super({name:name6,message:r,cause:e}),this[_a6]=!0,this.content=t}static isInstance(t){return AISDKError$1.hasMarker(t,marker6)}};_a6=symbol6;var dataContentSchema=z.union([z.string(),z.instanceof(Uint8Array),z.instanceof(ArrayBuffer),z.custom(t=>{var e,r;return(r=(e=globalThis.Buffer)==null?void 0:e.isBuffer(t))!=null?r:!1},{message:"Must be a Buffer"})]);function convertDataContentToBase64String(t){return typeof t=="string"?t:t instanceof ArrayBuffer?convertUint8ArrayToBase64(new Uint8Array(t)):convertUint8ArrayToBase64(t)}function convertDataContentToUint8Array(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")try{return convertBase64ToUint8Array(t)}catch(e){throw new InvalidDataContentError({message:"Invalid data content. Content string is not a base64-encoded media.",content:t,cause:e})}if(t instanceof ArrayBuffer)return new Uint8Array(t);throw new InvalidDataContentError({content:t})}function convertUint8ArrayToText(t){try{return new TextDecoder().decode(t)}catch{throw new Error("Error decoding Uint8Array to text")}}var name7="AI_InvalidMessageRoleError",marker7=`vercel.ai.error.${name7}`,symbol7=Symbol.for(marker7),_a7,InvalidMessageRoleError=class extends AISDKError$1{constructor({role:t,message:e=`Invalid message role: '${t}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:name7,message:e}),this[_a7]=!0,this.role=t}static isInstance(t){return AISDKError$1.hasMarker(t,marker7)}};_a7=symbol7;function splitDataUrl(t){try{const[e,r]=t.split(",");return{mimeType:e.split(";")[0].split(":")[1],base64Content:r}}catch{return{mimeType:void 0,base64Content:void 0}}}async function convertToLanguageModelPrompt({prompt:t,modelSupportsImageUrls:e=!0,modelSupportsUrl:r=()=>!1,downloadImplementation:n=download}){const i=await downloadAssets(t.messages,n,e,r);return[...t.system!=null?[{role:"system",content:t.system}]:[],...t.messages.map(s=>convertToLanguageModelMessage(s,i))]}function convertToLanguageModelMessage(t,e){var r,n,i,s,f,a;const o=t.role;switch(o){case"system":return{role:"system",content:t.content,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};case"user":return typeof t.content=="string"?{role:"user",content:[{type:"text",text:t.content}],providerMetadata:(n=t.providerOptions)!=null?n:t.experimental_providerMetadata}:{role:"user",content:t.content.map(u=>convertPartToLanguageModelPart(u,e)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"assistant":return typeof t.content=="string"?{role:"assistant",content:[{type:"text",text:t.content}],providerMetadata:(s=t.providerOptions)!=null?s:t.experimental_providerMetadata}:{role:"assistant",content:t.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{const{experimental_providerMetadata:y,providerOptions:w,...v}=u;return{...v,providerMetadata:w??y}}),providerMetadata:(f=t.providerOptions)!=null?f:t.experimental_providerMetadata};case"tool":return{role:"tool",content:t.content.map(u=>{var y;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(y=u.providerOptions)!=null?y:u.experimental_providerMetadata}}),providerMetadata:(a=t.providerOptions)!=null?a:t.experimental_providerMetadata};default:{const u=o;throw new InvalidMessageRoleError({role:u})}}}async function downloadAssets(t,e,r,n){const i=t.filter(f=>f.role==="user").map(f=>f.content).filter(f=>Array.isArray(f)).flat().filter(f=>f.type==="image"||f.type==="file").filter(f=>!(f.type==="image"&&r===!0)).map(f=>f.type==="image"?f.image:f.data).map(f=>typeof f=="string"&&(f.startsWith("http:")||f.startsWith("https:"))?new URL(f):f).filter(f=>f instanceof URL).filter(f=>!n(f)),s=await Promise.all(i.map(async f=>({url:f,data:await e({url:f})})));return Object.fromEntries(s.map(({url:f,data:a})=>[f.toString(),a]))}function convertPartToLanguageModelPart(t,e){var r,n,i,s;if(t.type==="text")return{type:"text",text:t.text,providerMetadata:(r=t.providerOptions)!=null?r:t.experimental_providerMetadata};let f=t.mimeType,a,o,u;const y=t.type;switch(y){case"image":a=t.image;break;case"file":a=t.data;break;default:throw new Error(`Unsupported part type: ${y}`)}try{o=typeof a=="string"?new URL(a):a}catch{o=a}if(o instanceof URL)if(o.protocol==="data:"){const{mimeType:w,base64Content:v}=splitDataUrl(o.toString());if(w==null||v==null)throw new Error(`Invalid data URL format in part ${y}`);f=w,u=convertDataContentToUint8Array(v)}else{const w=e[o.toString()];w?(u=w.data,f??(f=w.mimeType)):u=o}else u=convertDataContentToUint8Array(o);switch(y){case"image":return u instanceof Uint8Array&&(f=(n=detectImageMimeType(u))!=null?n:f),{type:"image",image:u,mimeType:f,providerMetadata:(i=t.providerOptions)!=null?i:t.experimental_providerMetadata};case"file":{if(f==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?convertDataContentToBase64String(u):u,mimeType:f,providerMetadata:(s=t.providerOptions)!=null?s:t.experimental_providerMetadata}}}}function prepareCallSettings({maxTokens:t,temperature:e,topP:r,topK:n,presencePenalty:i,frequencyPenalty:s,stopSequences:f,seed:a}){if(t!=null){if(!Number.isInteger(t))throw new InvalidArgumentError({parameter:"maxTokens",value:t,message:"maxTokens must be an integer"});if(t<1)throw new InvalidArgumentError({parameter:"maxTokens",value:t,message:"maxTokens must be >= 1"})}if(e!=null&&typeof e!="number")throw new InvalidArgumentError({parameter:"temperature",value:e,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new InvalidArgumentError({parameter:"topP",value:r,message:"topP must be a number"});if(n!=null&&typeof n!="number")throw new InvalidArgumentError({parameter:"topK",value:n,message:"topK must be a number"});if(i!=null&&typeof i!="number")throw new InvalidArgumentError({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(s!=null&&typeof s!="number")throw new InvalidArgumentError({parameter:"frequencyPenalty",value:s,message:"frequencyPenalty must be a number"});if(a!=null&&!Number.isInteger(a))throw new InvalidArgumentError({parameter:"seed",value:a,message:"seed must be an integer"});return{maxTokens:t,temperature:e??0,topP:r,topK:n,presencePenalty:i,frequencyPenalty:s,stopSequences:f!=null&&f.length>0?f:void 0,seed:a}}function attachmentsToParts(t){var e,r,n;const i=[];for(const s of t){let f;try{f=new URL(s.url)}catch{throw new Error(`Invalid URL: ${s.url}`)}switch(f.protocol){case"http:":case"https:":{if((e=s.contentType)!=null&&e.startsWith("image/"))i.push({type:"image",image:f});else{if(!s.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:f,mimeType:s.contentType})}break}case"data:":{let a,o,u;try{[a,o]=s.url.split(","),u=a.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${s.url}`)}if(u==null||o==null)throw new Error(`Invalid data URL format: ${s.url}`);if((r=s.contentType)!=null&&r.startsWith("image/"))i.push({type:"image",image:convertDataContentToUint8Array(o)});else if((n=s.contentType)!=null&&n.startsWith("text/"))i.push({type:"text",text:convertUint8ArrayToText(convertDataContentToUint8Array(o))});else{if(!s.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:o,mimeType:s.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${f.protocol}`)}}return i}var name8="AI_MessageConversionError",marker8=`vercel.ai.error.${name8}`,symbol8=Symbol.for(marker8),_a8,MessageConversionError=class extends AISDKError$1{constructor({originalMessage:t,message:e}){super({name:name8,message:e}),this[_a8]=!0,this.originalMessage=t}static isInstance(t){return AISDKError$1.hasMarker(t,marker8)}};_a8=symbol8;function convertToCoreMessages(t,e){var r,n;const i=(r=e==null?void 0:e.tools)!=null?r:{},s=[];for(let f=0;f<t.length;f++){const a=t[f],o=f===t.length-1,{role:u,content:y,experimental_attachments:w}=a;switch(u){case"system":{s.push({role:"system",content:y});break}case"user":{s.push({role:"user",content:w?[{type:"text",text:y},...attachmentsToParts(w)]:y});break}case"assistant":{if(a.parts!=null){let b=function(){const d=[];for(const p of h)switch(p.type){case"text":d.push({type:"text",text:p.text});break;case"reasoning":{for(const m of p.details)switch(m.type){case"text":d.push({type:"reasoning",text:m.text,signature:m.signature});break;case"redacted":d.push({type:"redacted-reasoning",data:m.data});break}break}case"tool-invocation":d.push({type:"tool-call",toolCallId:p.toolInvocation.toolCallId,toolName:p.toolInvocation.toolName,args:p.toolInvocation.args});break;default:{const m=p;throw new Error(`Unsupported part: ${m}`)}}s.push({role:"assistant",content:d});const c=h.filter(p=>p.type==="tool-invocation").map(p=>p.toolInvocation);c.length>0&&s.push({role:"tool",content:c.map(p=>{if(!("result"in p))throw new MessageConversionError({originalMessage:a,message:"ToolInvocation must have a result: "+JSON.stringify(p)});const{toolCallId:m,toolName:S,result:E}=p,T=i[S];return(T==null?void 0:T.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:m,toolName:S,result:T.experimental_toToolResultContent(E),experimental_content:T.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:m,toolName:S,result:E}})}),h=[],_=!1,l++},l=0,_=!1,h=[];for(const d of a.parts)switch(d.type){case"reasoning":h.push(d);break;case"text":{_&&b(),h.push(d);break}case"tool-invocation":{((n=d.toolInvocation.step)!=null?n:0)!==l&&b(),h.push(d),_=!0;break}}b();break}const v=a.toolInvocations;if(v==null||v.length===0){s.push({role:"assistant",content:y});break}const g=v.reduce((b,l)=>{var _;return Math.max(b,(_=l.step)!=null?_:0)},0);for(let b=0;b<=g;b++){const l=v.filter(_=>{var h;return((h=_.step)!=null?h:0)===b});l.length!==0&&(s.push({role:"assistant",content:[...o&&y&&b===0?[{type:"text",text:y}]:[],...l.map(({toolCallId:_,toolName:h,args:d})=>({type:"tool-call",toolCallId:_,toolName:h,args:d}))]}),s.push({role:"tool",content:l.map(_=>{if(!("result"in _))throw new MessageConversionError({originalMessage:a,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:h,toolName:d,result:c}=_,p=i[d];return(p==null?void 0:p.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:h,toolName:d,result:p.experimental_toToolResultContent(c),experimental_content:p.experimental_toToolResultContent(c)}:{type:"tool-result",toolCallId:h,toolName:d,result:c}})}))}y&&!o&&s.push({role:"assistant",content:y});break}case"data":break;default:{const v=u;throw new MessageConversionError({originalMessage:a,message:`Unsupported role: ${v}`})}}}return s}function detectPromptType(t){if(!Array.isArray(t))return"other";if(t.length===0)return"messages";const e=t.map(detectSingleMessageCharacteristics);return e.some(r=>r==="has-ui-specific-parts")?"ui-messages":e.every(r=>r==="has-core-specific-parts"||r==="message")?"messages":"other"}function detectSingleMessageCharacteristics(t){return typeof t=="object"&&t!==null&&(t.role==="function"||t.role==="data"||"toolInvocations"in t||"experimental_attachments"in t)?"has-ui-specific-parts":typeof t=="object"&&t!==null&&"content"in t&&(Array.isArray(t.content)||"experimental_providerMetadata"in t||"providerOptions"in t)?"has-core-specific-parts":typeof t=="object"&&t!==null&&"role"in t&&"content"in t&&typeof t.content=="string"&&["system","user","assistant","tool"].includes(t.role)?"message":"other"}var jsonValueSchema=z.lazy(()=>z.union([z.null(),z.string(),z.number(),z.boolean(),z.record(z.string(),jsonValueSchema),z.array(jsonValueSchema)])),providerMetadataSchema=z.record(z.string(),z.record(z.string(),jsonValueSchema)),toolResultContentSchema=z.array(z.union([z.object({type:z.literal("text"),text:z.string()}),z.object({type:z.literal("image"),data:z.string(),mimeType:z.string().optional()})])),textPartSchema=z.object({type:z.literal("text"),text:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),imagePartSchema=z.object({type:z.literal("image"),image:z.union([dataContentSchema,z.instanceof(URL)]),mimeType:z.string().optional(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),filePartSchema=z.object({type:z.literal("file"),data:z.union([dataContentSchema,z.instanceof(URL)]),mimeType:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),reasoningPartSchema=z.object({type:z.literal("reasoning"),text:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),redactedReasoningPartSchema=z.object({type:z.literal("redacted-reasoning"),data:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),toolCallPartSchema=z.object({type:z.literal("tool-call"),toolCallId:z.string(),toolName:z.string(),args:z.unknown(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),toolResultPartSchema=z.object({type:z.literal("tool-result"),toolCallId:z.string(),toolName:z.string(),result:z.unknown(),content:toolResultContentSchema.optional(),isError:z.boolean().optional(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreSystemMessageSchema=z.object({role:z.literal("system"),content:z.string(),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreUserMessageSchema=z.object({role:z.literal("user"),content:z.union([z.string(),z.array(z.union([textPartSchema,imagePartSchema,filePartSchema]))]),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreAssistantMessageSchema=z.object({role:z.literal("assistant"),content:z.union([z.string(),z.array(z.union([textPartSchema,reasoningPartSchema,redactedReasoningPartSchema,toolCallPartSchema]))]),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreToolMessageSchema=z.object({role:z.literal("tool"),content:z.array(toolResultPartSchema),providerOptions:providerMetadataSchema.optional(),experimental_providerMetadata:providerMetadataSchema.optional()}),coreMessageSchema=z.union([coreSystemMessageSchema,coreUserMessageSchema,coreAssistantMessageSchema,coreToolMessageSchema]);function standardizePrompt({prompt:t,tools:e}){if(t.prompt==null&&t.messages==null)throw new InvalidPromptError({prompt:t,message:"prompt or messages must be defined"});if(t.prompt!=null&&t.messages!=null)throw new InvalidPromptError({prompt:t,message:"prompt and messages cannot be defined at the same time"});if(t.system!=null&&typeof t.system!="string")throw new InvalidPromptError({prompt:t,message:"system must be a string"});if(t.prompt!=null){if(typeof t.prompt!="string")throw new InvalidPromptError({prompt:t,message:"prompt must be a string"});return{type:"prompt",system:t.system,messages:[{role:"user",content:t.prompt}]}}if(t.messages!=null){const r=detectPromptType(t.messages);if(r==="other")throw new InvalidPromptError({prompt:t,message:"messages must be an array of CoreMessage or UIMessage"});const n=r==="ui-messages"?convertToCoreMessages(t.messages,{tools:e}):t.messages,i=safeValidateTypes$1({value:n,schema:z.array(coreMessageSchema)});if(!i.success)throw new InvalidPromptError({prompt:t,message:"messages must be an array of CoreMessage or UIMessage",cause:i.error});return{type:"messages",messages:n,system:t.system}}throw new Error("unreachable")}function calculateLanguageModelUsage({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function addLanguageModelUsage(t,e){return{promptTokens:t.promptTokens+e.promptTokens,completionTokens:t.completionTokens+e.completionTokens,totalTokens:t.totalTokens+e.totalTokens}}var DEFAULT_SCHEMA_PREFIX="JSON schema:",DEFAULT_SCHEMA_SUFFIX="You MUST answer with a JSON object that matches the JSON schema above.",DEFAULT_GENERIC_SUFFIX="You MUST answer with JSON.";function injectJsonInstruction({prompt:t,schema:e,schemaPrefix:r=e!=null?DEFAULT_SCHEMA_PREFIX:void 0,schemaSuffix:n=e!=null?DEFAULT_SCHEMA_SUFFIX:DEFAULT_GENERIC_SUFFIX}){return[t!=null&&t.length>0?t:void 0,t!=null&&t.length>0?"":void 0,r,e!=null?JSON.stringify(e):void 0,n].filter(i=>i!=null).join(`
`)}createIdGenerator$1({prefix:"aiobj",size:24});createIdGenerator$1({prefix:"aiobj",size:24});var name9="AI_NoOutputSpecifiedError",marker9=`vercel.ai.error.${name9}`,symbol9=Symbol.for(marker9),_a9,NoOutputSpecifiedError=class extends AISDKError$1{constructor({message:t="No output specified."}={}){super({name:name9,message:t}),this[_a9]=!0}static isInstance(t){return AISDKError$1.hasMarker(t,marker9)}};_a9=symbol9;var name10="AI_ToolExecutionError",marker10=`vercel.ai.error.${name10}`,symbol10=Symbol.for(marker10),_a10,ToolExecutionError=class extends AISDKError$1{constructor({toolArgs:t,toolName:e,toolCallId:r,cause:n,message:i=`Error executing tool ${e}: ${getErrorMessage$2(n)}`}){super({name:name10,message:i,cause:n}),this[_a10]=!0,this.toolArgs=t,this.toolName=e,this.toolCallId=r}static isInstance(t){return AISDKError$1.hasMarker(t,marker10)}};_a10=symbol10;function isNonEmptyObject(t){return t!=null&&Object.keys(t).length>0}function prepareToolsAndToolChoice({tools:t,toolChoice:e,activeTools:r}){return isNonEmptyObject(t)?{tools:(r!=null?Object.entries(t).filter(([i])=>r.includes(i)):Object.entries(t)).map(([i,s])=>{const f=s.type;switch(f){case void 0:case"function":return{type:"function",name:i,description:s.description,parameters:asSchema(s.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:i,id:s.id,args:s.args};default:{const a=f;throw new Error(`Unsupported tool type: ${a}`)}}}),toolChoice:e==null?{type:"auto"}:typeof e=="string"?{type:e}:{type:"tool",toolName:e.toolName}}:{tools:void 0,toolChoice:void 0}}var lastWhitespaceRegexp=/^([\s\S]*?)(\s+)(\S*)$/;function splitOnLastWhitespace(t){const e=t.match(lastWhitespaceRegexp);return e?{prefix:e[1],whitespace:e[2],suffix:e[3]}:void 0}function removeTextAfterLastWhitespace(t){const e=splitOnLastWhitespace(t);return e?e.prefix+e.whitespace:t}var name11="AI_InvalidToolArgumentsError",marker11=`vercel.ai.error.${name11}`,symbol11=Symbol.for(marker11),_a11,InvalidToolArgumentsError=class extends AISDKError$1{constructor({toolArgs:t,toolName:e,cause:r,message:n=`Invalid arguments for tool ${e}: ${getErrorMessage$2(r)}`}){super({name:name11,message:n,cause:r}),this[_a11]=!0,this.toolArgs=t,this.toolName=e}static isInstance(t){return AISDKError$1.hasMarker(t,marker11)}};_a11=symbol11;var name12="AI_NoSuchToolError",marker12=`vercel.ai.error.${name12}`,symbol12=Symbol.for(marker12),_a12,NoSuchToolError=class extends AISDKError$1{constructor({toolName:t,availableTools:e=void 0,message:r=`Model tried to call unavailable tool '${t}'. ${e===void 0?"No tools are available.":`Available tools: ${e.join(", ")}.`}`}){super({name:name12,message:r}),this[_a12]=!0,this.toolName=t,this.availableTools=e}static isInstance(t){return AISDKError$1.hasMarker(t,marker12)}};_a12=symbol12;var name13="AI_ToolCallRepairError",marker13=`vercel.ai.error.${name13}`,symbol13=Symbol.for(marker13),_a13,ToolCallRepairError=class extends AISDKError$1{constructor({cause:t,originalError:e,message:r=`Error repairing tool call: ${getErrorMessage$2(t)}`}){super({name:name13,message:r,cause:t}),this[_a13]=!0,this.originalError=e}static isInstance(t){return AISDKError$1.hasMarker(t,marker13)}};_a13=symbol13;async function parseToolCall({toolCall:t,tools:e,repairToolCall:r,system:n,messages:i}){if(e==null)throw new NoSuchToolError({toolName:t.toolName});try{return await doParseToolCall({toolCall:t,tools:e})}catch(s){if(r==null||!(NoSuchToolError.isInstance(s)||InvalidToolArgumentsError.isInstance(s)))throw s;let f=null;try{f=await r({toolCall:t,tools:e,parameterSchema:({toolName:a})=>asSchema(e[a].parameters).jsonSchema,system:n,messages:i,error:s})}catch(a){throw new ToolCallRepairError({cause:a,originalError:s})}if(f==null)throw s;return await doParseToolCall({toolCall:f,tools:e})}}async function doParseToolCall({toolCall:t,tools:e}){const r=t.toolName,n=e[r];if(n==null)throw new NoSuchToolError({toolName:t.toolName,availableTools:Object.keys(e)});const i=asSchema(n.parameters),s=t.args.trim()===""?safeValidateTypes$1({value:{},schema:i}):safeParseJSON$1({text:t.args,schema:i});if(s.success===!1)throw new InvalidToolArgumentsError({toolName:r,toolArgs:t.args,cause:s.error});return{type:"tool-call",toolCallId:t.toolCallId,toolName:r,args:s.value}}function toResponseMessages({text:t="",reasoning:e,tools:r,toolCalls:n,toolResults:i,messageId:s,generateMessageId:f}){const a=[];return a.push({role:"assistant",content:[...e.map(o=>o.type==="text"?{...o,type:"reasoning"}:{...o,type:"redacted-reasoning"}),{type:"text",text:t},...n],id:s}),i.length>0&&a.push({role:"tool",id:f(),content:i.map(o=>{const u=r[o.toolName];return(u==null?void 0:u.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,result:u.experimental_toToolResultContent(o.result),experimental_content:u.experimental_toToolResultContent(o.result)}:{type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,result:o.result}})}),a}function asReasoningText(t){const e=t.filter(r=>r.type==="text").map(r=>r.text).join("");return e.length>0?e:void 0}var originalGenerateId3=createIdGenerator$1({prefix:"aitxt",size:24}),originalGenerateMessageId=createIdGenerator$1({prefix:"msg",size:24});async function generateText({model:t,tools:e,toolChoice:r,system:n,prompt:i,messages:s,maxRetries:f,abortSignal:a,headers:o,maxSteps:u=1,experimental_generateMessageId:y=originalGenerateMessageId,experimental_output:w,experimental_continueSteps:v=!1,experimental_telemetry:g,experimental_providerMetadata:b,providerOptions:l=b,experimental_activeTools:_,experimental_repairToolCall:h,_internal:{generateId:d=originalGenerateId3,currentDate:c=()=>new Date}={},onStepFinish:p,...m}){var S;if(u<1)throw new InvalidArgumentError({parameter:"maxSteps",value:u,message:"maxSteps must be at least 1"});const{maxRetries:E,retry:T}=prepareRetries({maxRetries:f}),A=getBaseTelemetryAttributes({model:t,telemetry:g,headers:o,settings:{...m,maxRetries:E}}),P=standardizePrompt({prompt:{system:(S=w==null?void 0:w.injectIntoSystemPrompt({system:n,model:t}))!=null?S:n,prompt:i,messages:s},tools:e}),H=getTracer(g);return recordSpan({name:"ai.generateText",attributes:selectTelemetryAttributes({telemetry:g,attributes:{...assembleOperationName({operationId:"ai.generateText",telemetry:g}),...A,"ai.prompt":{input:()=>JSON.stringify({system:n,prompt:i,messages:s})},"ai.settings.maxSteps":u}}),tracer:H,fn:async O=>{var q,C,j,V,N,Y,X,J,Q,W;const U={type:"regular",...prepareToolsAndToolChoice({tools:e,toolChoice:r,activeTools:_})},$=prepareCallSettings(m);let ee,Z=[],L=[],I=[],k=0;const B=[];let F="";const K=[],te=[];let M={completionTokens:0,promptTokens:0,totalTokens:0},ne="initial";do{const D=k===0?P.type:"messages",x=[...P.messages,...B],R=await convertToLanguageModelPrompt({prompt:{type:D,system:P.system,messages:x},modelSupportsImageUrls:t.supportsImageUrls,modelSupportsUrl:(q=t.supportsUrl)==null?void 0:q.bind(t)});ee=await T(()=>recordSpan({name:"ai.generateText.doGenerate",attributes:selectTelemetryAttributes({telemetry:g,attributes:{...assembleOperationName({operationId:"ai.generateText.doGenerate",telemetry:g}),...A,"ai.prompt.format":{input:()=>D},"ai.prompt.messages":{input:()=>JSON.stringify(R)},"ai.prompt.tools":{input:()=>{var de;return(de=U.tools)==null?void 0:de.map(he=>JSON.stringify(he))}},"ai.prompt.toolChoice":{input:()=>U.toolChoice!=null?JSON.stringify(U.toolChoice):void 0},"gen_ai.system":t.provider,"gen_ai.request.model":t.modelId,"gen_ai.request.frequency_penalty":m.frequencyPenalty,"gen_ai.request.max_tokens":m.maxTokens,"gen_ai.request.presence_penalty":m.presencePenalty,"gen_ai.request.stop_sequences":m.stopSequences,"gen_ai.request.temperature":m.temperature,"gen_ai.request.top_k":m.topK,"gen_ai.request.top_p":m.topP}}),tracer:H,fn:async de=>{var he,ge,be,Re,Pe,ke;const ye=await t.doGenerate({mode:U,...$,inputFormat:D,responseFormat:w==null?void 0:w.responseFormat({model:t}),prompt:R,providerMetadata:l,abortSignal:a,headers:o}),Ce={id:(ge=(he=ye.response)==null?void 0:he.id)!=null?ge:d(),timestamp:(Re=(be=ye.response)==null?void 0:be.timestamp)!=null?Re:c(),modelId:(ke=(Pe=ye.response)==null?void 0:Pe.modelId)!=null?ke:t.modelId};return de.setAttributes(selectTelemetryAttributes({telemetry:g,attributes:{"ai.response.finishReason":ye.finishReason,"ai.response.text":{output:()=>ye.text},"ai.response.toolCalls":{output:()=>JSON.stringify(ye.toolCalls)},"ai.response.id":Ce.id,"ai.response.model":Ce.modelId,"ai.response.timestamp":Ce.timestamp.toISOString(),"ai.usage.promptTokens":ye.usage.promptTokens,"ai.usage.completionTokens":ye.usage.completionTokens,"gen_ai.response.finish_reasons":[ye.finishReason],"gen_ai.response.id":Ce.id,"gen_ai.response.model":Ce.modelId,"gen_ai.usage.input_tokens":ye.usage.promptTokens,"gen_ai.usage.output_tokens":ye.usage.completionTokens}})),{...ye,response:Ce}}})),Z=await Promise.all(((C=ee.toolCalls)!=null?C:[]).map(de=>parseToolCall({toolCall:de,tools:e,repairToolCall:h,system:n,messages:x}))),L=e==null?[]:await executeTools({toolCalls:Z,tools:e,tracer:H,telemetry:g,messages:x,abortSignal:a});const G=calculateLanguageModelUsage(ee.usage);M=addLanguageModelUsage(M,G);let ie="done";++k<u&&(v&&ee.finishReason==="length"&&Z.length===0?ie="continue":Z.length>0&&L.length===Z.length&&(ie="tool-result"));const ae=(j=ee.text)!=null?j:"",se=ne==="continue"&&F.trimEnd()!==F?ae.trimStart():ae,ue=ie==="continue"?removeTextAfterLastWhitespace(se):se;if(F=ie==="continue"||ne==="continue"?F+ue:ue,I=asReasoningDetails(ee.reasoning),K.push(...(V=ee.sources)!=null?V:[]),ne==="continue"){const de=B[B.length-1];typeof de.content=="string"?de.content+=ue:de.content.push({text:ue,type:"text"})}else B.push(...toResponseMessages({text:F,reasoning:asReasoningDetails(ee.reasoning),tools:e??{},toolCalls:Z,toolResults:L,messageId:y(),generateMessageId:y}));const le={stepType:ne,text:ue,reasoning:asReasoningText(I),reasoningDetails:I,sources:(N=ee.sources)!=null?N:[],toolCalls:Z,toolResults:L,finishReason:ee.finishReason,usage:G,warnings:ee.warnings,logprobs:ee.logprobs,request:(Y=ee.request)!=null?Y:{},response:{...ee.response,headers:(X=ee.rawResponse)==null?void 0:X.headers,messages:structuredClone(B)},providerMetadata:ee.providerMetadata,experimental_providerMetadata:ee.providerMetadata,isContinued:ie==="continue"};te.push(le),await(p==null?void 0:p(le)),ne=ie}while(ne!=="done");return O.setAttributes(selectTelemetryAttributes({telemetry:g,attributes:{"ai.response.finishReason":ee.finishReason,"ai.response.text":{output:()=>ee.text},"ai.response.toolCalls":{output:()=>JSON.stringify(ee.toolCalls)},"ai.usage.promptTokens":ee.usage.promptTokens,"ai.usage.completionTokens":ee.usage.completionTokens}})),new DefaultGenerateTextResult({text:F,reasoning:asReasoningText(I),reasoningDetails:I,sources:K,outputResolver:()=>{if(w==null)throw new NoOutputSpecifiedError;return w.parseOutput({text:F},{response:ee.response,usage:M})},toolCalls:Z,toolResults:L,finishReason:ee.finishReason,usage:M,warnings:ee.warnings,request:(J=ee.request)!=null?J:{},response:{...ee.response,headers:(Q=ee.rawResponse)==null?void 0:Q.headers,body:(W=ee.rawResponse)==null?void 0:W.body,messages:B},logprobs:ee.logprobs,steps:te,providerMetadata:ee.providerMetadata})}})}async function executeTools({toolCalls:t,tools:e,tracer:r,telemetry:n,messages:i,abortSignal:s}){return(await Promise.all(t.map(async({toolCallId:a,toolName:o,args:u})=>{const y=e[o];if((y==null?void 0:y.execute)==null)return;const w=await recordSpan({name:"ai.toolCall",attributes:selectTelemetryAttributes({telemetry:n,attributes:{...assembleOperationName({operationId:"ai.toolCall",telemetry:n}),"ai.toolCall.name":o,"ai.toolCall.id":a,"ai.toolCall.args":{output:()=>JSON.stringify(u)}}}),tracer:r,fn:async v=>{try{const g=await y.execute(u,{toolCallId:a,messages:i,abortSignal:s});try{v.setAttributes(selectTelemetryAttributes({telemetry:n,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(g)}}}))}catch{}return g}catch(g){throw new ToolExecutionError({toolCallId:a,toolName:o,toolArgs:u,cause:g})}}});return{type:"tool-result",toolCallId:a,toolName:o,args:u,result:w}}))).filter(a=>a!=null)}var DefaultGenerateTextResult=class{constructor(t){this.text=t.text,this.reasoning=t.reasoning,this.reasoningDetails=t.reasoningDetails,this.toolCalls=t.toolCalls,this.toolResults=t.toolResults,this.finishReason=t.finishReason,this.usage=t.usage,this.warnings=t.warnings,this.request=t.request,this.response=t.response,this.steps=t.steps,this.experimental_providerMetadata=t.providerMetadata,this.providerMetadata=t.providerMetadata,this.logprobs=t.logprobs,this.outputResolver=t.outputResolver,this.sources=t.sources}get experimental_output(){return this.outputResolver()}};function asReasoningDetails(t){return t==null?[]:typeof t=="string"?[{type:"text",text:t}]:t}var output_exports={};__export$1(output_exports,{object:()=>object,text:()=>text});var text=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:t}){return t},parsePartial({text:t}){return{partial:t}},parseOutput({text:t}){return t}}),object=({schema:t})=>{const e=asSchema(t);return{type:"object",responseFormat:({model:r})=>({type:"json",schema:r.supportsStructuredOutputs?e.jsonSchema:void 0}),injectIntoSystemPrompt({system:r,model:n}){return n.supportsStructuredOutputs?r:injectJsonInstruction({prompt:r,schema:e.jsonSchema})},parsePartial({text:r}){const n=parsePartialJson(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{const i=n.state;throw new Error(`Unsupported parse state: ${i}`)}}},parseOutput({text:r},n){const i=safeParseJSON$1({text:r});if(!i.success)throw new NoObjectGeneratedError({message:"No object generated: could not parse the response.",cause:i.error,text:r,response:n.response,usage:n.usage});const s=safeValidateTypes$1({value:i.value,schema:e});if(!s.success)throw new NoObjectGeneratedError({message:"No object generated: response did not match schema.",cause:s.error,text:r,response:n.response,usage:n.usage});return s.value}}};function mergeStreams(t,e){const r=t.getReader(),n=e.getReader();let i,s,f=!1,a=!1;async function o(y){try{i==null&&(i=r.read());const w=await i;i=void 0,w.done?y.close():y.enqueue(w.value)}catch(w){y.error(w)}}async function u(y){try{s==null&&(s=n.read());const w=await s;s=void 0,w.done?y.close():y.enqueue(w.value)}catch(w){y.error(w)}}return new ReadableStream({async pull(y){try{if(f){await u(y);return}if(a){await o(y);return}i==null&&(i=r.read()),s==null&&(s=n.read());const{result:w,reader:v}=await Promise.race([i.then(g=>({result:g,reader:r})),s.then(g=>({result:g,reader:n}))]);w.done||y.enqueue(w.value),v===r?(i=void 0,w.done&&(await u(y),f=!0)):(s=void 0,w.done&&(a=!0,await o(y)))}catch(w){y.error(w)}},cancel(){r.cancel(),n.cancel()}})}createIdGenerator$1({prefix:"aitxt",size:24});createIdGenerator$1({prefix:"msg",size:24});var langchain_adapter_exports={};__export$1(langchain_adapter_exports,{mergeIntoDataStream:()=>mergeIntoDataStream,toDataStream:()=>toDataStream,toDataStreamResponse:()=>toDataStreamResponse});function createCallbacksTransformer(t={}){const e=new TextEncoder;let r="";return new TransformStream({async start(){t.onStart&&await t.onStart()},async transform(n,i){i.enqueue(e.encode(n)),r+=n,t.onToken&&await t.onToken(n),t.onText&&typeof n=="string"&&await t.onText(n)},async flush(){t.onCompletion&&await t.onCompletion(r),t.onFinal&&await t.onFinal(r)}})}function toDataStreamInternal(t,e){return t.pipeThrough(new TransformStream({transform:async(r,n)=>{var i;if(typeof r=="string"){n.enqueue(r);return}if("event"in r){r.event==="on_chat_model_stream"&&forwardAIMessageChunk((i=r.data)==null?void 0:i.chunk,n);return}forwardAIMessageChunk(r,n)}})).pipeThrough(createCallbacksTransformer(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,n)=>{n.enqueue(formatDataStreamPart("text",r))}}))}function toDataStream(t,e){return toDataStreamInternal(t,e).pipeThrough(new TextEncoderStream)}function toDataStreamResponse(t,e){var r;const n=toDataStreamInternal(t,e==null?void 0:e.callbacks).pipeThrough(new TextEncoderStream),i=e==null?void 0:e.data,s=e==null?void 0:e.init,f=i?mergeStreams(i.stream,n):n;return new Response(f,{status:(r=s==null?void 0:s.status)!=null?r:200,statusText:s==null?void 0:s.statusText,headers:prepareResponseHeaders(s==null?void 0:s.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function mergeIntoDataStream(t,e){e.dataStream.merge(toDataStreamInternal(t,e.callbacks))}function forwardAIMessageChunk(t,e){if(typeof t.content=="string")e.enqueue(t.content);else{const r=t.content;for(const n of r)n.type==="text"&&e.enqueue(n.text)}}var llamaindex_adapter_exports={};__export$1(llamaindex_adapter_exports,{mergeIntoDataStream:()=>mergeIntoDataStream2,toDataStream:()=>toDataStream2,toDataStreamResponse:()=>toDataStreamResponse2});function toDataStreamInternal2(t,e){const r=trimStartOfStream();return convertAsyncIteratorToReadableStream(t[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(n,i){i.enqueue(r(n.delta))}})).pipeThrough(createCallbacksTransformer(e)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,i)=>{i.enqueue(formatDataStreamPart("text",n))}}))}function toDataStream2(t,e){return toDataStreamInternal2(t,e).pipeThrough(new TextEncoderStream)}function toDataStreamResponse2(t,e={}){var r;const{init:n,data:i,callbacks:s}=e,f=toDataStreamInternal2(t,s).pipeThrough(new TextEncoderStream),a=i?mergeStreams(i.stream,f):f;return new Response(a,{status:(r=n==null?void 0:n.status)!=null?r:200,statusText:n==null?void 0:n.statusText,headers:prepareResponseHeaders(n==null?void 0:n.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function mergeIntoDataStream2(t,e){e.dataStream.merge(toDataStreamInternal2(t,e.callbacks))}function trimStartOfStream(){let t=!0;return e=>(t&&(e=e.trimStart(),e&&(t=!1)),e)}const LIBRARY_TASK_MAPPING={transformers:["audio-classification","automatic-speech-recognition","depth-estimation","document-question-answering","feature-extraction","fill-mask","image-classification","image-feature-extraction","image-segmentation","image-to-image","image-to-text","image-text-to-text","mask-generation","object-detection","question-answering","summarization","table-question-answering","text2text-generation","text-classification","text-generation","text-to-audio","text-to-speech","token-classification","translation","video-classification","visual-question-answering","zero-shot-classification","zero-shot-image-classification","zero-shot-object-detection"]},PIPELINE_DATA={"text-classification":{name:"Text Classification",subtasks:[{type:"acceptability-classification",name:"Acceptability Classification"},{type:"entity-linking-classification",name:"Entity Linking Classification"},{type:"fact-checking",name:"Fact Checking"},{type:"intent-classification",name:"Intent Classification"},{type:"language-identification",name:"Language Identification"},{type:"multi-class-classification",name:"Multi Class Classification"},{type:"multi-label-classification",name:"Multi Label Classification"},{type:"multi-input-text-classification",name:"Multi-input Text Classification"},{type:"natural-language-inference",name:"Natural Language Inference"},{type:"semantic-similarity-classification",name:"Semantic Similarity Classification"},{type:"sentiment-classification",name:"Sentiment Classification"},{type:"topic-classification",name:"Topic Classification"},{type:"semantic-similarity-scoring",name:"Semantic Similarity Scoring"},{type:"sentiment-scoring",name:"Sentiment Scoring"},{type:"sentiment-analysis",name:"Sentiment Analysis"},{type:"hate-speech-detection",name:"Hate Speech Detection"},{type:"text-scoring",name:"Text Scoring"}],modality:"nlp",color:"orange"},"token-classification":{name:"Token Classification",subtasks:[{type:"named-entity-recognition",name:"Named Entity Recognition"},{type:"part-of-speech",name:"Part of Speech"},{type:"parsing",name:"Parsing"},{type:"lemmatization",name:"Lemmatization"},{type:"word-sense-disambiguation",name:"Word Sense Disambiguation"},{type:"coreference-resolution",name:"Coreference-resolution"}],modality:"nlp",color:"blue"},"table-question-answering":{name:"Table Question Answering",modality:"nlp",color:"green"},"question-answering":{name:"Question Answering",subtasks:[{type:"extractive-qa",name:"Extractive QA"},{type:"open-domain-qa",name:"Open Domain QA"},{type:"closed-domain-qa",name:"Closed Domain QA"}],modality:"nlp",color:"blue"},"zero-shot-classification":{name:"Zero-Shot Classification",modality:"nlp",color:"yellow"},translation:{name:"Translation",modality:"nlp",color:"green"},summarization:{name:"Summarization",subtasks:[{type:"news-articles-summarization",name:"News Articles Summarization"},{type:"news-articles-headline-generation",name:"News Articles Headline Generation"}],modality:"nlp",color:"indigo"},"feature-extraction":{name:"Feature Extraction",modality:"nlp",color:"red"},"text-generation":{name:"Text Generation",subtasks:[{type:"dialogue-modeling",name:"Dialogue Modeling"},{type:"dialogue-generation",name:"Dialogue Generation"},{type:"conversational",name:"Conversational"},{type:"language-modeling",name:"Language Modeling"}],modality:"nlp",color:"indigo"},"text2text-generation":{name:"Text2Text Generation",subtasks:[{type:"text-simplification",name:"Text simplification"},{type:"explanation-generation",name:"Explanation Generation"},{type:"abstractive-qa",name:"Abstractive QA"},{type:"open-domain-abstractive-qa",name:"Open Domain Abstractive QA"},{type:"closed-domain-qa",name:"Closed Domain QA"},{type:"open-book-qa",name:"Open Book QA"},{type:"closed-book-qa",name:"Closed Book QA"}],modality:"nlp",color:"indigo"},"fill-mask":{name:"Fill-Mask",subtasks:[{type:"slot-filling",name:"Slot Filling"},{type:"masked-language-modeling",name:"Masked Language Modeling"}],modality:"nlp",color:"red"},"sentence-similarity":{name:"Sentence Similarity",modality:"nlp",color:"yellow"},"text-to-speech":{name:"Text-to-Speech",modality:"audio",color:"yellow"},"text-to-audio":{name:"Text-to-Audio",modality:"audio",color:"yellow"},"automatic-speech-recognition":{name:"Automatic Speech Recognition",modality:"audio",color:"yellow"},"audio-to-audio":{name:"Audio-to-Audio",modality:"audio",color:"blue"},"audio-classification":{name:"Audio Classification",subtasks:[{type:"keyword-spotting",name:"Keyword Spotting"},{type:"speaker-identification",name:"Speaker Identification"},{type:"audio-intent-classification",name:"Audio Intent Classification"},{type:"audio-emotion-recognition",name:"Audio Emotion Recognition"},{type:"audio-language-identification",name:"Audio Language Identification"}],modality:"audio",color:"green"},"audio-text-to-text":{name:"Audio-Text-to-Text",modality:"multimodal",color:"red",hideInDatasets:!0},"voice-activity-detection":{name:"Voice Activity Detection",modality:"audio",color:"red"},"depth-estimation":{name:"Depth Estimation",modality:"cv",color:"yellow"},"image-classification":{name:"Image Classification",subtasks:[{type:"multi-label-image-classification",name:"Multi Label Image Classification"},{type:"multi-class-image-classification",name:"Multi Class Image Classification"}],modality:"cv",color:"blue"},"object-detection":{name:"Object Detection",subtasks:[{type:"face-detection",name:"Face Detection"},{type:"vehicle-detection",name:"Vehicle Detection"}],modality:"cv",color:"yellow"},"image-segmentation":{name:"Image Segmentation",subtasks:[{type:"instance-segmentation",name:"Instance Segmentation"},{type:"semantic-segmentation",name:"Semantic Segmentation"},{type:"panoptic-segmentation",name:"Panoptic Segmentation"}],modality:"cv",color:"green"},"text-to-image":{name:"Text-to-Image",modality:"cv",color:"yellow"},"image-to-text":{name:"Image-to-Text",subtasks:[{type:"image-captioning",name:"Image Captioning"}],modality:"cv",color:"red"},"image-to-image":{name:"Image-to-Image",subtasks:[{type:"image-inpainting",name:"Image Inpainting"},{type:"image-colorization",name:"Image Colorization"},{type:"super-resolution",name:"Super Resolution"}],modality:"cv",color:"indigo"},"image-to-video":{name:"Image-to-Video",modality:"cv",color:"indigo"},"unconditional-image-generation":{name:"Unconditional Image Generation",modality:"cv",color:"green"},"video-classification":{name:"Video Classification",modality:"cv",color:"blue"},"reinforcement-learning":{name:"Reinforcement Learning",modality:"rl",color:"red"},robotics:{name:"Robotics",modality:"rl",subtasks:[{type:"grasping",name:"Grasping"},{type:"task-planning",name:"Task Planning"}],color:"blue"},"tabular-classification":{name:"Tabular Classification",modality:"tabular",subtasks:[{type:"tabular-multi-class-classification",name:"Tabular Multi Class Classification"},{type:"tabular-multi-label-classification",name:"Tabular Multi Label Classification"}],color:"blue"},"tabular-regression":{name:"Tabular Regression",modality:"tabular",subtasks:[{type:"tabular-single-column-regression",name:"Tabular Single Column Regression"}],color:"blue"},"tabular-to-text":{name:"Tabular to Text",modality:"tabular",subtasks:[{type:"rdf-to-text",name:"RDF to text"}],color:"blue",hideInModels:!0},"table-to-text":{name:"Table to Text",modality:"nlp",color:"blue",hideInModels:!0},"multiple-choice":{name:"Multiple Choice",subtasks:[{type:"multiple-choice-qa",name:"Multiple Choice QA"},{type:"multiple-choice-coreference-resolution",name:"Multiple Choice Coreference Resolution"}],modality:"nlp",color:"blue",hideInModels:!0},"text-retrieval":{name:"Text Retrieval",subtasks:[{type:"document-retrieval",name:"Document Retrieval"},{type:"utterance-retrieval",name:"Utterance Retrieval"},{type:"entity-linking-retrieval",name:"Entity Linking Retrieval"},{type:"fact-checking-retrieval",name:"Fact Checking Retrieval"}],modality:"nlp",color:"indigo",hideInModels:!0},"time-series-forecasting":{name:"Time Series Forecasting",modality:"tabular",subtasks:[{type:"univariate-time-series-forecasting",name:"Univariate Time Series Forecasting"},{type:"multivariate-time-series-forecasting",name:"Multivariate Time Series Forecasting"}],color:"blue"},"text-to-video":{name:"Text-to-Video",modality:"cv",color:"green"},"image-text-to-text":{name:"Image-Text-to-Text",modality:"multimodal",color:"red",hideInDatasets:!0},"visual-question-answering":{name:"Visual Question Answering",subtasks:[{type:"visual-question-answering",name:"Visual Question Answering"}],modality:"multimodal",color:"red"},"document-question-answering":{name:"Document Question Answering",subtasks:[{type:"document-question-answering",name:"Document Question Answering"}],modality:"multimodal",color:"blue",hideInDatasets:!0},"zero-shot-image-classification":{name:"Zero-Shot Image Classification",modality:"cv",color:"yellow"},"graph-ml":{name:"Graph Machine Learning",modality:"other",color:"green"},"mask-generation":{name:"Mask Generation",modality:"cv",color:"indigo"},"zero-shot-object-detection":{name:"Zero-Shot Object Detection",modality:"cv",color:"yellow"},"text-to-3d":{name:"Text-to-3D",modality:"cv",color:"yellow"},"image-to-3d":{name:"Image-to-3D",modality:"cv",color:"green"},"image-feature-extraction":{name:"Image Feature Extraction",modality:"cv",color:"indigo"},"video-text-to-text":{name:"Video-Text-to-Text",modality:"multimodal",color:"blue",hideInDatasets:!1},"keypoint-detection":{name:"Keypoint Detection",subtasks:[{type:"pose-estimation",name:"Pose Estimation"}],modality:"cv",color:"red",hideInDatasets:!0},"visual-document-retrieval":{name:"Visual Document Retrieval",modality:"multimodal",color:"yellow",hideInDatasets:!0},"any-to-any":{name:"Any-to-Any",modality:"multimodal",color:"yellow",hideInDatasets:!0},other:{name:"Other",modality:"other",color:"blue",hideInModels:!0,hideInDatasets:!0}},PIPELINE_TYPES=Object.keys(PIPELINE_DATA);Object.values(PIPELINE_DATA).flatMap(t=>"subtasks"in t?t.subtasks:[]).map(t=>t.type);new Set(PIPELINE_TYPES);const taskData$D={datasets:[{description:"A benchmark of 10 different audio tasks.",id:"s3prl/superb"},{description:"A dataset of YouTube clips and their sound categories.",id:"agkphysics/AudioSet"}],demo:{inputs:[{filename:"audio.wav",type:"audio"}],outputs:[{data:[{label:"Up",score:.2},{label:"Down",score:.8}],type:"chart"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"An easy-to-use model for command recognition.",id:"speechbrain/google_speech_command_xvector"},{description:"An emotion recognition model.",id:"ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition"},{description:"A language identification model.",id:"facebook/mms-lid-126"}],spaces:[{description:"An application that can classify music into different genre.",id:"kurianbenoy/audioclassification"}],summary:"Audio classification is the task of assigning a label or class to a given audio. It can be used for recognizing which command a user is giving or the emotion of a statement, as well as identifying a speaker.",widgetModels:["MIT/ast-finetuned-audioset-10-10-0.4593"],youtubeId:"KWwzcmG98Ds"},taskData$C={datasets:[{description:"512-element X-vector embeddings of speakers from CMU ARCTIC dataset.",id:"Matthijs/cmu-arctic-xvectors"}],demo:{inputs:[{filename:"input.wav",type:"audio"}],outputs:[{filename:"label-0.wav",type:"audio"},{filename:"label-1.wav",type:"audio"}]},metrics:[{description:"The Signal-to-Noise ratio is the relationship between the target signal level and the background noise level. It is calculated as the logarithm of the target signal divided by the background noise, in decibels.",id:"snri"},{description:"The Signal-to-Distortion ratio is the relationship between the target signal and the sum of noise, interference, and artifact errors",id:"sdri"}],models:[{description:"A speech enhancement model.",id:"ResembleAI/resemble-enhance"},{description:"A model that can change the voice in a speech recording.",id:"microsoft/speecht5_vc"}],spaces:[{description:"An application for speech separation.",id:"younver/speechbrain-speech-separation"},{description:"An application for audio style transfer.",id:"nakas/audio-diffusion_style_transfer"}],summary:"Audio-to-Audio is a family of tasks in which the input is an audio and the output is one or multiple generated audios. Some example tasks are speech enhancement and source separation.",widgetModels:["speechbrain/sepformer-wham"],youtubeId:"iohj7nCCYoM"},taskData$B={datasets:[{description:"31,175 hours of multilingual audio-text dataset in 108 languages.",id:"mozilla-foundation/common_voice_17_0"},{description:"Multilingual and diverse audio dataset with 101k hours of audio.",id:"amphion/Emilia-Dataset"},{description:"A dataset with 44.6k hours of English speaker data and 6k hours of other language speakers.",id:"parler-tts/mls_eng"},{description:"A multilingual audio dataset with 370K hours of audio.",id:"espnet/yodas"}],demo:{inputs:[{filename:"input.flac",type:"audio"}],outputs:[{label:"Transcript",content:"Going along slushy country roads and speaking to damp audiences in...",type:"text"}]},metrics:[{description:"",id:"wer"},{description:"",id:"cer"}],models:[{description:"A powerful ASR model by OpenAI.",id:"openai/whisper-large-v3"},{description:"A good generic speech model by MetaAI for fine-tuning.",id:"facebook/w2v-bert-2.0"},{description:"An end-to-end model that performs ASR and Speech Translation by MetaAI.",id:"facebook/seamless-m4t-v2-large"},{description:"A powerful multilingual ASR and Speech Translation model by Nvidia.",id:"nvidia/canary-1b"},{description:"Powerful speaker diarization model.",id:"pyannote/speaker-diarization-3.1"}],spaces:[{description:"A powerful general-purpose speech recognition application.",id:"hf-audio/whisper-large-v3"},{description:"Latest ASR model from Useful Sensors.",id:"mrfakename/Moonshinex"},{description:"A high quality speech and text translation model by Meta.",id:"facebook/seamless_m4t"},{description:"A powerful multilingual ASR and Speech Translation model by Nvidia",id:"nvidia/canary-1b"}],summary:"Automatic Speech Recognition (ASR), also known as Speech to Text (STT), is the task of transcribing a given audio to text. It has many applications, such as voice user interfaces.",widgetModels:["openai/whisper-large-v3"],youtubeId:"TksaY_FDgnk"},taskData$A={datasets:[{description:"Largest document understanding dataset.",id:"HuggingFaceM4/Docmatix"},{description:"Dataset from the 2020 DocVQA challenge. The documents are taken from the UCSF Industry Documents Library.",id:"eliolio/docvqa"}],demo:{inputs:[{label:"Question",content:"What is the idea behind the consumer relations efficiency team?",type:"text"},{filename:"document-question-answering-input.png",type:"img"}],outputs:[{label:"Answer",content:"Balance cost efficiency with quality customer service",type:"text"}]},metrics:[{description:"The evaluation metric for the DocVQA challenge is the Average Normalized Levenshtein Similarity (ANLS). This metric is flexible to character regognition errors and compares the predicted answer with the ground truth answer.",id:"anls"},{description:"Exact Match is a metric based on the strict character match of the predicted answer and the right answer. For answers predicted correctly, the Exact Match will be 1. Even if only one character is different, Exact Match will be 0",id:"exact-match"}],models:[{description:"A robust document question answering model.",id:"impira/layoutlm-document-qa"},{description:"A document question answering model specialized in invoices.",id:"impira/layoutlm-invoices"},{description:"A special model for OCR-free document question answering.",id:"microsoft/udop-large"},{description:"A powerful model for document question answering.",id:"google/pix2struct-docvqa-large"}],spaces:[{description:"A robust document question answering application.",id:"impira/docquery"},{description:"An application that can answer questions from invoices.",id:"impira/invoices"},{description:"An application to compare different document question answering models.",id:"merve/compare_docvqa_models"}],summary:"Document Question Answering (also known as Document Visual Question Answering) is the task of answering questions on document images. Document question answering models take a (document, question) pair as input and return an answer in natural language. Models usually rely on multi-modal features, combining text, position of words (bounding-boxes) and image.",widgetModels:["impira/layoutlm-invoices"],youtubeId:""},taskData$z={datasets:[{description:"Wikipedia dataset containing cleaned articles of all languages. Can be used to train `feature-extraction` models.",id:"wikipedia"}],demo:{inputs:[{label:"Input",content:"India, officially the Republic of India, is a country in South Asia.",type:"text"}],outputs:[{table:[["Dimension 1","Dimension 2","Dimension 3"],["2.583383083343506","2.757075071334839","0.9023529887199402"],["8.29393482208252","1.1071064472198486","2.03399395942688"],["-0.7754912972450256","-1.647324562072754","-0.6113331913948059"],["0.07087723910808563","1.5942802429199219","1.4610432386398315"]],type:"tabular"}]},metrics:[],models:[{description:"A powerful feature extraction model for natural language processing tasks.",id:"thenlper/gte-large"},{description:"A strong feature extraction model for retrieval.",id:"Alibaba-NLP/gte-Qwen1.5-7B-instruct"}],spaces:[{description:"A leaderboard to rank text feature extraction models based on a benchmark.",id:"mteb/leaderboard"},{description:"A leaderboard to rank best feature extraction models based on human feedback.",id:"mteb/arena"}],summary:"Feature extraction is the task of extracting features learnt in a model.",widgetModels:["facebook/bart-base"]},taskData$y={datasets:[{description:"A common dataset that is used to train models for many languages.",id:"wikipedia"},{description:"A large English dataset with text crawled from the web.",id:"c4"}],demo:{inputs:[{label:"Input",content:"The <mask> barked at me",type:"text"}],outputs:[{type:"chart",data:[{label:"wolf",score:.487},{label:"dog",score:.061},{label:"cat",score:.058},{label:"fox",score:.047},{label:"squirrel",score:.025}]}]},metrics:[{description:"Cross Entropy is a metric that calculates the difference between two probability distributions. Each probability distribution is the distribution of predicted words",id:"cross_entropy"},{description:"Perplexity is the exponential of the cross-entropy loss. It evaluates the probabilities assigned to the next word by the model. Lower perplexity indicates better performance",id:"perplexity"}],models:[{description:"State-of-the-art masked language model.",id:"answerdotai/ModernBERT-large"},{description:"A multilingual model trained on 100 languages.",id:"FacebookAI/xlm-roberta-base"}],spaces:[],summary:"Masked language modeling is the task of masking some of the words in a sentence and predicting which words should replace those masks. These models are useful when we want to get a statistical understanding of the language in which the model is trained in.",widgetModels:["distilroberta-base"],youtubeId:"mqElG5QJWUg"},taskData$x={datasets:[{description:"Benchmark dataset used for image classification with images that belong to 100 classes.",id:"cifar100"},{description:"Dataset consisting of images of garments.",id:"fashion_mnist"}],demo:{inputs:[{filename:"image-classification-input.jpeg",type:"img"}],outputs:[{type:"chart",data:[{label:"Egyptian cat",score:.514},{label:"Tabby cat",score:.193},{label:"Tiger cat",score:.068}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"A strong image classification model.",id:"google/vit-base-patch16-224"},{description:"A robust image classification model.",id:"facebook/deit-base-distilled-patch16-224"},{description:"A strong image classification model.",id:"facebook/convnext-large-224"}],spaces:[{description:"A leaderboard to evaluate different image classification models.",id:"timm/leaderboard"}],summary:"Image classification is the task of assigning a label or class to an entire image. Images are expected to have only one class for each image. Image classification models take an image as input and return a prediction about which class the image belongs to.",widgetModels:["google/vit-base-patch16-224"],youtubeId:"tjAIM7BOYhw"},taskData$w={datasets:[{description:"ImageNet-1K is a image classification dataset in which images are used to train image-feature-extraction models.",id:"imagenet-1k"}],demo:{inputs:[{filename:"mask-generation-input.png",type:"img"}],outputs:[{table:[["Dimension 1","Dimension 2","Dimension 3"],["0.21236686408519745","1.0919708013534546","0.8512550592422485"],["0.809657871723175","-0.18544459342956543","-0.7851548194885254"],["1.3103108406066895","-0.2479034662246704","-0.9107287526130676"],["1.8536205291748047","-0.36419737339019775","0.09717650711536407"]],type:"tabular"}]},metrics:[],models:[{description:"A powerful image feature extraction model.",id:"timm/vit_large_patch14_dinov2.lvd142m"},{description:"A strong image feature extraction model.",id:"nvidia/MambaVision-T-1K"},{description:"A robust image feature extraction model.",id:"facebook/dino-vitb16"},{description:"Cutting-edge image feature extraction model.",id:"apple/aimv2-large-patch14-336-distilled"},{description:"Strong image feature extraction model that can be used on images and documents.",id:"OpenGVLab/InternViT-6B-448px-V1-2"}],spaces:[{description:"A leaderboard to evaluate different image-feature-extraction models on classification performances",id:"timm/leaderboard"}],summary:"Image feature extraction is the task of extracting features learnt in a computer vision model.",widgetModels:[]},taskData$v={datasets:[{description:"Synthetic dataset, for image relighting",id:"VIDIT"},{description:"Multiple images of celebrities, used for facial expression translation",id:"huggan/CelebA-faces"},{description:"12M image-caption pairs.",id:"Spawning/PD12M"}],demo:{inputs:[{filename:"image-to-image-input.jpeg",type:"img"}],outputs:[{filename:"image-to-image-output.png",type:"img"}]},isPlaceholder:!1,metrics:[{description:"Peak Signal to Noise Ratio (PSNR) is an approximation of the human perception, considering the ratio of the absolute intensity with respect to the variations. Measured in dB, a high value indicates a high fidelity.",id:"PSNR"},{description:"Structural Similarity Index (SSIM) is a perceptual metric which compares the luminance, contrast and structure of two images. The values of SSIM range between -1 and 1, and higher values indicate closer resemblance to the original image.",id:"SSIM"},{description:"Inception Score (IS) is an analysis of the labels predicted by an image classification model when presented with a sample of the generated images.",id:"IS"}],models:[{description:"An image-to-image model to improve image resolution.",id:"fal/AuraSR-v2"},{description:"A model that increases the resolution of an image.",id:"keras-io/super-resolution"},{description:"A model for applying edits to images through image controls.",id:"Yuanshi/OminiControl"},{description:"A model that generates images based on segments in the input image and the text prompt.",id:"mfidabel/controlnet-segment-anything"},{description:"Strong model for inpainting and outpainting.",id:"black-forest-labs/FLUX.1-Fill-dev"},{description:"Strong model for image editing using depth maps.",id:"black-forest-labs/FLUX.1-Depth-dev-lora"}],spaces:[{description:"Image enhancer application for low light.",id:"keras-io/low-light-image-enhancement"},{description:"Style transfer application.",id:"keras-io/neural-style-transfer"},{description:"An application that generates images based on segment control.",id:"mfidabel/controlnet-segment-anything"},{description:"Image generation application that takes image control and text prompt.",id:"hysts/ControlNet"},{description:"Colorize any image using this app.",id:"ioclab/brightness-controlnet"},{description:"Edit images with instructions.",id:"timbrooks/instruct-pix2pix"}],summary:"Image-to-image is the task of transforming an input image through a variety of possible manipulations and enhancements, such as super-resolution, image inpainting, colorization, and more.",widgetModels:["stabilityai/stable-diffusion-2-inpainting"],youtubeId:""},taskData$u={datasets:[{description:"Dataset from 12M image-text of Reddit",id:"red_caps"},{description:"Dataset from 3.3M images of Google",id:"datasets/conceptual_captions"}],demo:{inputs:[{filename:"savanna.jpg",type:"img"}],outputs:[{label:"Detailed description",content:"a herd of giraffes and zebras grazing in a field",type:"text"}]},metrics:[],models:[{description:"A robust image captioning model.",id:"Salesforce/blip2-opt-2.7b"},{description:"A powerful and accurate image-to-text model that can also localize concepts in images.",id:"microsoft/kosmos-2-patch14-224"},{description:"A strong optical character recognition model.",id:"facebook/nougat-base"},{description:"A powerful model that lets you have a conversation with the image.",id:"llava-hf/llava-1.5-7b-hf"}],spaces:[{description:"An application that compares various image captioning models.",id:"nielsr/comparing-captioning-models"},{description:"A robust image captioning application.",id:"flax-community/image-captioning"},{description:"An application that transcribes handwritings into text.",id:"nielsr/TrOCR-handwritten"},{description:"An application that can caption images and answer questions about a given image.",id:"Salesforce/BLIP"},{description:"An application that can caption images and answer questions with a conversational agent.",id:"Salesforce/BLIP2"},{description:"An image captioning application that demonstrates the effect of noise on captions.",id:"johko/capdec-image-captioning"}],summary:"Image to text models output a text from a given image. Image captioning or optical character recognition can be considered as the most common applications of image to text.",widgetModels:["Salesforce/blip-image-captioning-large"],youtubeId:""},taskData$t={datasets:[{description:"Instructions composed of image and text.",id:"liuhaotian/LLaVA-Instruct-150K"},{description:"Collection of image-text pairs on scientific topics.",id:"DAMO-NLP-SG/multimodal_textbook"},{description:"A collection of datasets made for model fine-tuning.",id:"HuggingFaceM4/the_cauldron"},{description:"Screenshots of websites with their HTML/CSS codes.",id:"HuggingFaceM4/WebSight"}],demo:{inputs:[{filename:"image-text-to-text-input.png",type:"img"},{label:"Text Prompt",content:"Describe the position of the bee in detail.",type:"text"}],outputs:[{label:"Answer",content:"The bee is sitting on a pink flower, surrounded by other flowers. The bee is positioned in the center of the flower, with its head and front legs sticking out.",type:"text"}]},metrics:[],models:[{description:"Small and efficient yet powerful vision language model.",id:"HuggingFaceTB/SmolVLM-Instruct"},{description:"A screenshot understanding model used to control computers.",id:"microsoft/OmniParser-v2.0"},{description:"Cutting-edge vision language model.",id:"allenai/Molmo-7B-D-0924"},{description:"Small yet powerful model.",id:"vikhyatk/moondream2"},{description:"Strong image-text-to-text model.",id:"Qwen/Qwen2.5-VL-7B-Instruct"},{description:"Image-text-to-text model with agentic capabilities.",id:"microsoft/Magma-8B"},{description:"Strong image-text-to-text model focused on documents.",id:"allenai/olmOCR-7B-0225-preview"},{description:"Small yet strong image-text-to-text model.",id:"ibm-granite/granite-vision-3.2-2b"}],spaces:[{description:"Leaderboard to evaluate vision language models.",id:"opencompass/open_vlm_leaderboard"},{description:"Vision language models arena, where models are ranked by votes of users.",id:"WildVision/vision-arena"},{description:"Powerful vision-language model assistant.",id:"akhaliq/Molmo-7B-D-0924"},{description:"Powerful vision language assistant that can understand multiple images.",id:"HuggingFaceTB/SmolVLM2"},{description:"An application for chatting with an image-text-to-text model.",id:"GanymedeNil/Qwen2-VL-7B"},{description:"An application that parses screenshots into actions.",id:"showlab/ShowUI"},{description:"An application that detects gaze.",id:"moondream/gaze-demo"}],summary:"Image-text-to-text models take in an image and text prompt and output text. These models are also called vision-language models, or VLMs. The difference from image-to-text models is that these models take an additional text input, not restricting the model to certain use cases like image captioning, and may also be trained to accept a conversation as input.",widgetModels:["Qwen/Qwen2-VL-7B-Instruct"],youtubeId:"IoGaGfU1CIg"},taskData$s={datasets:[{description:"Scene segmentation dataset.",id:"scene_parse_150"}],demo:{inputs:[{filename:"image-segmentation-input.jpeg",type:"img"}],outputs:[{filename:"image-segmentation-output.png",type:"img"}]},metrics:[{description:"Average Precision (AP) is the Area Under the PR Curve (AUC-PR). It is calculated for each semantic class separately",id:"Average Precision"},{description:"Mean Average Precision (mAP) is the overall average of the AP values",id:"Mean Average Precision"},{description:"Intersection over Union (IoU) is the overlap of segmentation masks. Mean IoU is the average of the IoU of all semantic classes",id:"Mean Intersection over Union"},{description:"APα is the Average Precision at the IoU threshold of a α value, for example, AP50 and AP75",id:"APα"}],models:[{description:"Solid semantic segmentation model trained on ADE20k.",id:"openmmlab/upernet-convnext-small"},{description:"Background removal model.",id:"briaai/RMBG-1.4"},{description:"A multipurpose image segmentation model for high resolution images.",id:"ZhengPeng7/BiRefNet"},{description:"Powerful human-centric image segmentation model.",id:"facebook/sapiens-seg-1b"},{description:"Panoptic segmentation model trained on the COCO (common objects) dataset.",id:"facebook/mask2former-swin-large-coco-panoptic"}],spaces:[{description:"A semantic segmentation application that can predict unseen instances out of the box.",id:"facebook/ov-seg"},{description:"One of the strongest segmentation applications.",id:"jbrinkma/segment-anything"},{description:"A human-centric segmentation model.",id:"facebook/sapiens-pose"},{description:"An instance segmentation application to predict neuronal cell types from microscopy images.",id:"rashmi/sartorius-cell-instance-segmentation"},{description:"An application that segments videos.",id:"ArtGAN/Segment-Anything-Video"},{description:"An panoptic segmentation application built for outdoor environments.",id:"segments/panoptic-segment-anything"}],summary:"Image Segmentation divides an image into segments where each pixel in the image is mapped to an object. This task has multiple variants such as instance segmentation, panoptic segmentation and semantic segmentation.",widgetModels:["nvidia/segformer-b0-finetuned-ade-512-512"],youtubeId:"dKE8SIt9C-w"},taskData$r={datasets:[{description:"Widely used benchmark dataset for multiple Vision tasks.",id:"merve/coco2017"},{description:"Medical Imaging dataset of the Human Brain for segmentation and mask generating tasks",id:"rocky93/BraTS_segmentation"}],demo:{inputs:[{filename:"mask-generation-input.png",type:"img"}],outputs:[{filename:"mask-generation-output.png",type:"img"}]},metrics:[{description:"IoU is used to measure the overlap between predicted mask and the ground truth mask.",id:"Intersection over Union (IoU)"}],models:[{description:"Small yet powerful mask generation model.",id:"Zigeng/SlimSAM-uniform-50"},{description:"Very strong mask generation model.",id:"facebook/sam2-hiera-large"}],spaces:[{description:"An application that combines a mask generation model with a zero-shot object detection model for text-guided image segmentation.",id:"merve/OWLSAM2"},{description:"An application that compares the performance of a large and a small mask generation model.",id:"merve/slimsam"},{description:"An application based on an improved mask generation model.",id:"SkalskiP/segment-anything-model-2"},{description:"An application to remove objects from videos using mask generation models.",id:"SkalskiP/SAM_and_ProPainter"}],summary:"Mask generation is the task of generating masks that identify a specific object or region of interest in a given image. Masks are often used in segmentation tasks, where they provide a precise way to isolate the object of interest for further processing or analysis.",widgetModels:[],youtubeId:""},taskData$q={datasets:[{description:"Widely used benchmark dataset for multiple vision tasks.",id:"merve/coco2017"},{description:"Multi-task computer vision benchmark.",id:"merve/pascal-voc"}],demo:{inputs:[{filename:"object-detection-input.jpg",type:"img"}],outputs:[{filename:"object-detection-output.jpg",type:"img"}]},metrics:[{description:"The Average Precision (AP) metric is the Area Under the PR Curve (AUC-PR). It is calculated for each class separately",id:"Average Precision"},{description:"The Mean Average Precision (mAP) metric is the overall average of the AP values",id:"Mean Average Precision"},{description:"The APα metric is the Average Precision at the IoU threshold of a α value, for example, AP50 and AP75",id:"APα"}],models:[{description:"Solid object detection model pre-trained on the COCO 2017 dataset.",id:"facebook/detr-resnet-50"},{description:"Accurate object detection model.",id:"IDEA-Research/dab-detr-resnet-50"},{description:"Fast and accurate object detection model.",id:"PekingU/rtdetr_v2_r50vd"},{description:"Object detection model for low-lying objects.",id:"StephanST/WALDO30"}],spaces:[{description:"Leaderboard to compare various object detection models across several metrics.",id:"hf-vision/object_detection_leaderboard"},{description:"An application that contains various object detection models to try from.",id:"Gradio-Blocks/Object-Detection-With-DETR-and-YOLOS"},{description:"A cutting-edge object detection application.",id:"sunsmarterjieleaf/yolov12"},{description:"An object tracking, segmentation and inpainting application.",id:"VIPLab/Track-Anything"},{description:"Very fast object tracking application based on object detection.",id:"merve/RT-DETR-tracking-coco"}],summary:"Object Detection models allow users to identify objects of certain defined classes. Object detection models receive an image as input and output the images with bounding boxes and labels on detected objects.",widgetModels:["facebook/detr-resnet-50"],youtubeId:"WdAeKSOpxhw"},taskData$p={datasets:[{description:"NYU Depth V2 Dataset: Video dataset containing both RGB and depth sensor data.",id:"sayakpaul/nyu_depth_v2"},{description:"Monocular depth estimation benchmark based without noise and errors.",id:"depth-anything/DA-2K"}],demo:{inputs:[{filename:"depth-estimation-input.jpg",type:"img"}],outputs:[{filename:"depth-estimation-output.png",type:"img"}]},metrics:[],models:[{description:"Cutting-edge depth estimation model.",id:"depth-anything/Depth-Anything-V2-Large"},{description:"A strong monocular depth estimation model.",id:"jingheya/lotus-depth-g-v1-0"},{description:"A depth estimation model that predicts depth in videos.",id:"tencent/DepthCrafter"},{description:"A robust depth estimation model.",id:"apple/DepthPro-hf"}],spaces:[{description:"An application that predicts the depth of an image and then reconstruct the 3D model as voxels.",id:"radames/dpt-depth-estimation-3d-voxels"},{description:"An application for bleeding-edge depth estimation.",id:"akhaliq/depth-pro"},{description:"An application on cutting-edge depth estimation in videos.",id:"tencent/DepthCrafter"},{description:"A human-centric depth estimation application.",id:"facebook/sapiens-depth"}],summary:"Depth estimation is the task of predicting depth of the objects present in an image.",widgetModels:[""],youtubeId:""},taskData$o={datasets:[],demo:{inputs:[],outputs:[]},isPlaceholder:!0,metrics:[],models:[],spaces:[],summary:"",widgetModels:[],youtubeId:void 0,canonicalId:void 0},taskData$n={datasets:[{description:"A curation of widely used datasets for Data Driven Deep Reinforcement Learning (D4RL)",id:"edbeeching/decision_transformer_gym_replay"}],demo:{inputs:[{label:"State",content:"Red traffic light, pedestrians are about to pass.",type:"text"}],outputs:[{label:"Action",content:"Stop the car.",type:"text"},{label:"Next State",content:"Yellow light, pedestrians have crossed.",type:"text"}]},metrics:[{description:"Accumulated reward across all time steps discounted by a factor that ranges between 0 and 1 and determines how much the agent optimizes for future relative to immediate rewards. Measures how good is the policy ultimately found by a given algorithm considering uncertainty over the future.",id:"Discounted Total Reward"},{description:"Average return obtained after running the policy for a certain number of evaluation episodes. As opposed to total reward, mean reward considers how much reward a given algorithm receives while learning.",id:"Mean Reward"},{description:"Measures how good a given algorithm is after a predefined time. Some algorithms may be guaranteed to converge to optimal behavior across many time steps. However, an agent that reaches an acceptable level of optimality after a given time horizon may be preferable to one that ultimately reaches optimality but takes a long time.",id:"Level of Performance After Some Time"}],models:[{description:"A Reinforcement Learning model trained on expert data from the Gym Hopper environment",id:"edbeeching/decision-transformer-gym-hopper-expert"},{description:"A PPO agent playing seals/CartPole-v0 using the stable-baselines3 library and the RL Zoo.",id:"HumanCompatibleAI/ppo-seals-CartPole-v0"}],spaces:[{description:"An application for a cute puppy agent learning to catch a stick.",id:"ThomasSimonini/Huggy"},{description:"An application to play Snowball Fight with a reinforcement learning agent.",id:"ThomasSimonini/SnowballFight"}],summary:"Reinforcement learning is the computational approach of learning from action by interacting with an environment through trial and error and receiving rewards (negative or positive) as feedback",widgetModels:[],youtubeId:"q0BiUn5LiBc"},taskData$m={datasets:[{description:"A famous question answering dataset based on English articles from Wikipedia.",id:"squad_v2"},{description:"A dataset of aggregated anonymized actual queries issued to the Google search engine.",id:"natural_questions"}],demo:{inputs:[{label:"Question",content:"Which name is also used to describe the Amazon rainforest in English?",type:"text"},{label:"Context",content:"The Amazon rainforest, also known in English as Amazonia or the Amazon Jungle",type:"text"}],outputs:[{label:"Answer",content:"Amazonia",type:"text"}]},metrics:[{description:"Exact Match is a metric based on the strict character match of the predicted answer and the right answer. For answers predicted correctly, the Exact Match will be 1. Even if only one character is different, Exact Match will be 0",id:"exact-match"},{description:" The F1-Score metric is useful if we value both false positives and false negatives equally. The F1-Score is calculated on each word in the predicted sequence against the correct answer",id:"f1"}],models:[{description:"A robust baseline model for most question answering domains.",id:"deepset/roberta-base-squad2"},{description:"Small yet robust model that can answer questions.",id:"distilbert/distilbert-base-cased-distilled-squad"},{description:"A special model that can answer questions from tables.",id:"google/tapas-base-finetuned-wtq"}],spaces:[{description:"An application that can answer a long question from Wikipedia.",id:"deepset/wikipedia-assistant"}],summary:"Question Answering models can retrieve the answer to a question from a given text, which is useful for searching for an answer in a document. Some question answering models can generate answers without context!",widgetModels:["deepset/roberta-base-squad2"],youtubeId:"ajPx5LwJD-I"},taskData$l={datasets:[{description:"Bing queries with relevant passages from various web sources.",id:"ms_marco"}],demo:{inputs:[{label:"Source sentence",content:"Machine learning is so easy.",type:"text"},{label:"Sentences to compare to",content:"Deep learning is so straightforward.",type:"text"},{label:"",content:"This is so difficult, like rocket science.",type:"text"},{label:"",content:"I can't believe how much I struggled with this.",type:"text"}],outputs:[{type:"chart",data:[{label:"Deep learning is so straightforward.",score:.623},{label:"This is so difficult, like rocket science.",score:.413},{label:"I can't believe how much I struggled with this.",score:.256}]}]},metrics:[{description:"Reciprocal Rank is a measure used to rank the relevancy of documents given a set of documents. Reciprocal Rank is the reciprocal of the rank of the document retrieved, meaning, if the rank is 3, the Reciprocal Rank is 0.33. If the rank is 1, the Reciprocal Rank is 1",id:"Mean Reciprocal Rank"},{description:"The similarity of the embeddings is evaluated mainly on cosine similarity. It is calculated as the cosine of the angle between two vectors. It is particularly useful when your texts are not the same length",id:"Cosine Similarity"}],models:[{description:"This model works well for sentences and paragraphs and can be used for clustering/grouping and semantic searches.",id:"sentence-transformers/all-mpnet-base-v2"},{description:"A multilingual robust sentence similarity model.",id:"BAAI/bge-m3"},{description:"A robust sentence similarity model.",id:"HIT-TMG/KaLM-embedding-multilingual-mini-instruct-v1.5"}],spaces:[{description:"An application that leverages sentence similarity to answer questions from YouTube videos.",id:"Gradio-Blocks/Ask_Questions_To_YouTube_Videos"},{description:"An application that retrieves relevant PubMed abstracts for a given online article which can be used as further references.",id:"Gradio-Blocks/pubmed-abstract-retriever"},{description:"An application that leverages sentence similarity to summarize text.",id:"nickmuchi/article-text-summarizer"},{description:"A guide that explains how Sentence Transformers can be used for semantic search.",id:"sentence-transformers/Sentence_Transformers_for_semantic_search"}],summary:"Sentence Similarity is the task of determining how similar two texts are. Sentence similarity models convert input texts into vectors (embeddings) that capture semantic information and calculate how close (similar) they are between them. This task is particularly useful for information retrieval and clustering/grouping.",widgetModels:["BAAI/bge-small-en-v1.5"],youtubeId:"VCZq5AkbNEU"},taskData$k={canonicalId:"text2text-generation",datasets:[{description:"News articles in five different languages along with their summaries. Widely used for benchmarking multilingual summarization models.",id:"mlsum"},{description:"English conversations and their summaries. Useful for benchmarking conversational agents.",id:"samsum"}],demo:{inputs:[{label:"Input",content:"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building, and the tallest structure in Paris. Its base is square, measuring 125 metres (410 ft) on each side. It was the first structure to reach a height of 300 metres. Excluding transmitters, the Eiffel Tower is the second tallest free-standing structure in France after the Millau Viaduct.",type:"text"}],outputs:[{label:"Output",content:"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building. It was the first structure to reach a height of 300 metres.",type:"text"}]},metrics:[{description:"The generated sequence is compared against its summary, and the overlap of tokens are counted. ROUGE-N refers to overlap of N subsequent tokens, ROUGE-1 refers to overlap of single tokens and ROUGE-2 is the overlap of two subsequent tokens.",id:"rouge"}],models:[{description:"A strong summarization model trained on English news articles. Excels at generating factual summaries.",id:"facebook/bart-large-cnn"},{description:"A summarization model trained on medical articles.",id:"Falconsai/medical_summarization"}],spaces:[{description:"An application that can summarize long paragraphs.",id:"pszemraj/summarize-long-text"},{description:"A much needed summarization application for terms and conditions.",id:"ml6team/distilbart-tos-summarizer-tosdr"},{description:"An application that summarizes long documents.",id:"pszemraj/document-summarization"},{description:"An application that can detect errors in abstractive summarization.",id:"ml6team/post-processing-summarization"}],summary:"Summarization is the task of producing a shorter version of a document while preserving its important information. Some models can extract text from the original input, while other models can generate entirely new text.",widgetModels:["facebook/bart-large-cnn"],youtubeId:"yHnr5Dk2zCI"},taskData$j={datasets:[{description:"The WikiTableQuestions dataset is a large-scale dataset for the task of question answering on semi-structured tables.",id:"wikitablequestions"},{description:"WikiSQL is a dataset of 80654 hand-annotated examples of questions and SQL queries distributed across 24241 tables from Wikipedia.",id:"wikisql"}],demo:{inputs:[{table:[["Rank","Name","No.of reigns","Combined days"],["1","lou Thesz","3","3749"],["2","Ric Flair","8","3103"],["3","Harley Race","7","1799"]],type:"tabular"},{label:"Question",content:"What is the number of reigns for Harley Race?",type:"text"}],outputs:[{label:"Result",content:"7",type:"text"}]},metrics:[{description:"Checks whether the predicted answer(s) is the same as the ground-truth answer(s).",id:"Denotation Accuracy"}],models:[{description:"A table question answering model that is capable of neural SQL execution, i.e., employ TAPEX to execute a SQL query on a given table.",id:"microsoft/tapex-base"},{description:"A robust table question answering model.",id:"google/tapas-base-finetuned-wtq"}],spaces:[{description:"An application that answers questions based on table CSV files.",id:"katanaml/table-query"}],summary:"Table Question Answering (Table QA) is the answering a question about an information on a given table.",widgetModels:["google/tapas-base-finetuned-wtq"]},taskData$i={datasets:[{description:"A comprehensive curation of datasets covering all benchmarks.",id:"inria-soda/tabular-benchmark"}],demo:{inputs:[{table:[["Glucose","Blood Pressure ","Skin Thickness","Insulin","BMI"],["148","72","35","0","33.6"],["150","50","30","0","35.1"],["141","60","29","1","39.2"]],type:"tabular"}],outputs:[{table:[["Diabetes"],["1"],["1"],["0"]],type:"tabular"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"Breast cancer prediction model based on decision trees.",id:"scikit-learn/cancer-prediction-trees"}],spaces:[{description:"An application that can predict defective products on a production line.",id:"scikit-learn/tabular-playground"},{description:"An application that compares various tabular classification techniques on different datasets.",id:"scikit-learn/classification"}],summary:"Tabular classification is the task of classifying a target category (a group) based on set of attributes.",widgetModels:["scikit-learn/tabular-playground"],youtubeId:""},taskData$h={datasets:[{description:"A comprehensive curation of datasets covering all benchmarks.",id:"inria-soda/tabular-benchmark"}],demo:{inputs:[{table:[["Car Name","Horsepower","Weight"],["ford torino","140","3,449"],["amc hornet","97","2,774"],["toyota corolla","65","1,773"]],type:"tabular"}],outputs:[{table:[["MPG (miles per gallon)"],["17"],["18"],["31"]],type:"tabular"}]},metrics:[{description:"",id:"mse"},{description:"Coefficient of determination (or R-squared) is a measure of how well the model fits the data. Higher R-squared is considered a better fit.",id:"r-squared"}],models:[{description:"Fish weight prediction based on length measurements and species.",id:"scikit-learn/Fish-Weight"}],spaces:[{description:"An application that can predict weight of a fish based on set of attributes.",id:"scikit-learn/fish-weight-prediction"}],summary:"Tabular regression is the task of predicting a numerical value given a set of attributes.",widgetModels:["scikit-learn/Fish-Weight"],youtubeId:""},taskData$g={datasets:[{description:"RedCaps is a large-scale dataset of 12M image-text pairs collected from Reddit.",id:"red_caps"},{description:"Conceptual Captions is a dataset consisting of ~3.3M images annotated with captions.",id:"conceptual_captions"},{description:"12M image-caption pairs.",id:"Spawning/PD12M"}],demo:{inputs:[{label:"Input",content:"A city above clouds, pastel colors, Victorian style",type:"text"}],outputs:[{filename:"image.jpeg",type:"img"}]},metrics:[{description:"The Inception Score (IS) measure assesses diversity and meaningfulness. It uses a generated image sample to predict its label. A higher score signifies more diverse and meaningful images.",id:"IS"},{description:"The Fréchet Inception Distance (FID) calculates the distance between distributions between synthetic and real samples. A lower FID score indicates better similarity between the distributions of real and generated images.",id:"FID"},{description:"R-precision assesses how the generated image aligns with the provided text description. It uses the generated images as queries to retrieve relevant text descriptions. The top 'r' relevant descriptions are selected and used to calculate R-precision as r/R, where 'R' is the number of ground truth descriptions associated with the generated images. A higher R-precision value indicates a better model.",id:"R-Precision"}],models:[{description:"One of the most powerful image generation models that can generate realistic outputs.",id:"black-forest-labs/FLUX.1-dev"},{description:"A powerful yet fast image generation model.",id:"latent-consistency/lcm-lora-sdxl"},{description:"Text-to-image model for photorealistic generation.",id:"Kwai-Kolors/Kolors"},{description:"A powerful text-to-image model.",id:"stabilityai/stable-diffusion-3-medium-diffusers"}],spaces:[{description:"A powerful text-to-image application.",id:"stabilityai/stable-diffusion-3-medium"},{description:"A text-to-image application to generate comics.",id:"jbilcke-hf/ai-comic-factory"},{description:"An application to match multiple custom image generation models.",id:"multimodalart/flux-lora-lab"},{description:"A powerful yet very fast image generation application.",id:"latent-consistency/lcm-lora-for-sdxl"},{description:"A gallery to explore various text-to-image models.",id:"multimodalart/LoraTheExplorer"},{description:"An application for `text-to-image`, `image-to-image` and image inpainting.",id:"ArtGAN/Stable-Diffusion-ControlNet-WebUI"},{description:"An application to generate realistic images given photos of a person and a prompt.",id:"InstantX/InstantID"}],summary:"Text-to-image is the task of generating images from input text. These pipelines can also be used to modify and edit images based on text prompts.",widgetModels:["black-forest-labs/FLUX.1-dev"],youtubeId:""},taskData$f={canonicalId:"text-to-audio",datasets:[{description:"10K hours of multi-speaker English dataset.",id:"parler-tts/mls_eng_10k"},{description:"Multi-speaker English dataset.",id:"mythicinfinity/libritts_r"},{description:"Multi-lingual dataset.",id:"facebook/multilingual_librispeech"}],demo:{inputs:[{label:"Input",content:"I love audio models on the Hub!",type:"text"}],outputs:[{filename:"audio.wav",type:"audio"}]},metrics:[{description:"The Mel Cepstral Distortion (MCD) metric is used to calculate the quality of generated speech.",id:"mel cepstral distortion"}],models:[{description:"A prompt based, powerful TTS model.",id:"parler-tts/parler-tts-large-v1"},{description:"A powerful TTS model that supports English and Chinese.",id:"SWivid/F5-TTS"},{description:"A massively multi-lingual TTS model.",id:"fishaudio/fish-speech-1.5"},{description:"A powerful TTS model.",id:"OuteAI/OuteTTS-0.1-350M"},{description:"Small yet powerful TTS model.",id:"hexgrad/Kokoro-82M"}],spaces:[{description:"An application for generate high quality speech in different languages.",id:"hexgrad/Kokoro-TTS"},{description:"A multilingual text-to-speech application.",id:"fishaudio/fish-speech-1"},{description:"An application that generates speech in different styles in English and Chinese.",id:"mrfakename/E2-F5-TTS"},{description:"An application that synthesizes emotional speech for diverse speaker prompts.",id:"parler-tts/parler-tts-expresso"},{description:"An application that generates podcast episodes.",id:"ngxson/kokoro-podcast-generator"}],summary:"Text-to-Speech (TTS) is the task of generating natural sounding speech given text input. TTS models can be extended to have a single model that generates speech for multiple speakers and multiple languages.",widgetModels:["suno/bark"],youtubeId:"NW62DpzJ274"},taskData$e={datasets:[{description:"A widely used dataset useful to benchmark named entity recognition models.",id:"eriktks/conll2003"},{description:"A multilingual dataset of Wikipedia articles annotated for named entity recognition in over 150 different languages.",id:"unimelb-nlp/wikiann"}],demo:{inputs:[{label:"Input",content:"My name is Omar and I live in Zürich.",type:"text"}],outputs:[{text:"My name is Omar and I live in Zürich.",tokens:[{type:"PERSON",start:11,end:15},{type:"GPE",start:30,end:36}],type:"text-with-tokens"}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"A robust performance model to identify people, locations, organizations and names of miscellaneous entities.",id:"dslim/bert-base-NER"},{description:"A strong model to identify people, locations, organizations and names in multiple languages.",id:"FacebookAI/xlm-roberta-large-finetuned-conll03-english"},{description:"A token classification model specialized on medical entity recognition.",id:"blaze999/Medical-NER"},{description:"Flair models are typically the state of the art in named entity recognition tasks.",id:"flair/ner-english"}],spaces:[{description:"An application that can recognizes entities, extracts noun chunks and recognizes various linguistic features of each token.",id:"spacy/gradio_pipeline_visualizer"}],summary:"Token classification is a natural language understanding task in which a label is assigned to some tokens in a text. Some popular token classification subtasks are Named Entity Recognition (NER) and Part-of-Speech (PoS) tagging. NER models could be trained to identify specific entities in a text, such as dates, individuals and places; and PoS tagging would identify, for example, which words in a text are verbs, nouns, and punctuation marks.",widgetModels:["FacebookAI/xlm-roberta-large-finetuned-conll03-english"],youtubeId:"wVHdVlPScxA"},taskData$d={canonicalId:"text2text-generation",datasets:[{description:"A dataset of copyright-free books translated into 16 different languages.",id:"Helsinki-NLP/opus_books"},{description:"An example of translation between programming languages. This dataset consists of functions in Java and C#.",id:"google/code_x_glue_cc_code_to_code_trans"}],demo:{inputs:[{label:"Input",content:"My name is Omar and I live in Zürich.",type:"text"}],outputs:[{label:"Output",content:"Mein Name ist Omar und ich wohne in Zürich.",type:"text"}]},metrics:[{description:"BLEU score is calculated by counting the number of shared single or subsequent tokens between the generated sequence and the reference. Subsequent n tokens are called “n-grams”. Unigram refers to a single token while bi-gram refers to token pairs and n-grams refer to n subsequent tokens. The score ranges from 0 to 1, where 1 means the translation perfectly matched and 0 did not match at all",id:"bleu"},{description:"",id:"sacrebleu"}],models:[{description:"Very powerful model that can translate many languages between each other, especially low-resource languages.",id:"facebook/nllb-200-1.3B"},{description:"A general-purpose Transformer that can be used to translate from English to German, French, or Romanian.",id:"google-t5/t5-base"}],spaces:[{description:"An application that can translate between 100 languages.",id:"Iker/Translate-100-languages"},{description:"An application that can translate between many languages.",id:"Geonmo/nllb-translation-demo"}],summary:"Translation is the task of converting text from one language to another.",widgetModels:["facebook/mbart-large-50-many-to-many-mmt"],youtubeId:"1JvfrvZgi6c"},taskData$c={datasets:[{description:"A widely used dataset used to benchmark multiple variants of text classification.",id:"nyu-mll/glue"},{description:"A text classification dataset used to benchmark natural language inference models",id:"stanfordnlp/snli"}],demo:{inputs:[{label:"Input",content:"I love Hugging Face!",type:"text"}],outputs:[{type:"chart",data:[{label:"POSITIVE",score:.9},{label:"NEUTRAL",score:.1},{label:"NEGATIVE",score:0}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"The F1 metric is the harmonic mean of the precision and recall. It can be calculated as: F1 = 2 * (precision * recall) / (precision + recall)",id:"f1"}],models:[{description:"A robust model trained for sentiment analysis.",id:"distilbert/distilbert-base-uncased-finetuned-sst-2-english"},{description:"A sentiment analysis model specialized in financial sentiment.",id:"ProsusAI/finbert"},{description:"A sentiment analysis model specialized in analyzing tweets.",id:"cardiffnlp/twitter-roberta-base-sentiment-latest"},{description:"A model that can classify languages.",id:"papluca/xlm-roberta-base-language-detection"},{description:"A model that can classify text generation attacks.",id:"meta-llama/Prompt-Guard-86M"}],spaces:[{description:"An application that can classify financial sentiment.",id:"IoannisTr/Tech_Stocks_Trading_Assistant"},{description:"A dashboard that contains various text classification tasks.",id:"miesnerjacob/Multi-task-NLP"},{description:"An application that analyzes user reviews in healthcare.",id:"spacy/healthsea-demo"}],summary:"Text Classification is the task of assigning a label or class to a given text. Some use cases are sentiment analysis, natural language inference, and assessing grammatical correctness.",widgetModels:["distilbert/distilbert-base-uncased-finetuned-sst-2-english"],youtubeId:"leNG9fN9FQU"},taskData$b={datasets:[{description:"Multilingual dataset used to evaluate text generation models.",id:"CohereForAI/Global-MMLU"},{description:"High quality multilingual data used to train text-generation models.",id:"HuggingFaceFW/fineweb-2"},{description:"Truly open-source, curated and cleaned dialogue dataset.",id:"HuggingFaceH4/ultrachat_200k"},{description:"A reasoning dataset.",id:"open-r1/OpenThoughts-114k-math"},{description:"A multilingual instruction dataset with preference ratings on responses.",id:"allenai/tulu-3-sft-mixture"},{description:"A large synthetic dataset for alignment of text generation models.",id:"HuggingFaceTB/smoltalk"},{description:"A dataset made for training text generation models solving math questions.",id:"HuggingFaceTB/finemath"}],demo:{inputs:[{label:"Input",content:"Once upon a time,",type:"text"}],outputs:[{label:"Output",content:"Once upon a time, we knew that our ancestors were on the verge of extinction. The great explorers and poets of the Old World, from Alexander the Great to Chaucer, are dead and gone. A good many of our ancient explorers and poets have",type:"text"}]},metrics:[{description:"Cross Entropy is a metric that calculates the difference between two probability distributions. Each probability distribution is the distribution of predicted words",id:"Cross Entropy"},{description:"The Perplexity metric is the exponential of the cross-entropy loss. It evaluates the probabilities assigned to the next word by the model. Lower perplexity indicates better performance",id:"Perplexity"}],models:[{description:"A text-generation model trained to follow instructions.",id:"google/gemma-2-2b-it"},{description:"Smaller variant of one of the most powerful models.",id:"deepseek-ai/DeepSeek-R1-Distill-Qwen-1.5B"},{description:"Very powerful text generation model trained to follow instructions.",id:"meta-llama/Meta-Llama-3.1-8B-Instruct"},{description:"Powerful text generation model by Microsoft.",id:"microsoft/phi-4"},{description:"A very powerful model with reasoning capabilities.",id:"simplescaling/s1.1-32B"},{description:"Strong conversational model that supports very long instructions.",id:"Qwen/Qwen2.5-7B-Instruct-1M"},{description:"Text generation model used to write code.",id:"Qwen/Qwen2.5-Coder-32B-Instruct"},{description:"Powerful reasoning based open large language model.",id:"deepseek-ai/DeepSeek-R1"}],spaces:[{description:"A leaderboard to compare different open-source text generation models based on various benchmarks.",id:"open-llm-leaderboard/open_llm_leaderboard"},{description:"A leaderboard for comparing chain-of-thought performance of models.",id:"logikon/open_cot_leaderboard"},{description:"An text generation based application based on a very powerful LLaMA2 model.",id:"ysharma/Explore_llamav2_with_TGI"},{description:"An text generation based application to converse with Zephyr model.",id:"HuggingFaceH4/zephyr-chat"},{description:"A leaderboard that ranks text generation models based on blind votes from people.",id:"lmsys/chatbot-arena-leaderboard"},{description:"An chatbot to converse with a very powerful text generation model.",id:"mlabonne/phixtral-chat"}],summary:"Generating text is the task of generating new text given another text. These models can, for example, fill in incomplete text or paraphrase.",widgetModels:["mistralai/Mistral-Nemo-Instruct-2407"],youtubeId:"e9gNEAlsOvU"},taskData$a={datasets:[{description:"Microsoft Research Video to Text is a large-scale dataset for open domain video captioning",id:"iejMac/CLIP-MSR-VTT"},{description:"UCF101 Human Actions dataset consists of 13,320 video clips from YouTube, with 101 classes.",id:"quchenyuan/UCF101-ZIP"},{description:"A high-quality dataset for human action recognition in YouTube videos.",id:"nateraw/kinetics"},{description:"A dataset of video clips of humans performing pre-defined basic actions with everyday objects.",id:"HuggingFaceM4/something_something_v2"},{description:"This dataset consists of text-video pairs and contains noisy samples with irrelevant video descriptions",id:"HuggingFaceM4/webvid"},{description:"A dataset of short Flickr videos for the temporal localization of events with descriptions.",id:"iejMac/CLIP-DiDeMo"}],demo:{inputs:[{label:"Input",content:"Darth Vader is surfing on the waves.",type:"text"}],outputs:[{filename:"text-to-video-output.gif",type:"img"}]},metrics:[{description:"Inception Score uses an image classification model that predicts class labels and evaluates how distinct and diverse the images are. A higher score indicates better video generation.",id:"is"},{description:"Frechet Inception Distance uses an image classification model to obtain image embeddings. The metric compares mean and standard deviation of the embeddings of real and generated images. A smaller score indicates better video generation.",id:"fid"},{description:"Frechet Video Distance uses a model that captures coherence for changes in frames and the quality of each frame. A smaller score indicates better video generation.",id:"fvd"},{description:"CLIPSIM measures similarity between video frames and text using an image-text similarity model. A higher score indicates better video generation.",id:"clipsim"}],models:[{description:"A strong model for consistent video generation.",id:"tencent/HunyuanVideo"},{description:"A text-to-video model with high fidelity motion and strong prompt adherence.",id:"Lightricks/LTX-Video"},{description:"A text-to-video model focusing on physics-aware applications like robotics.",id:"nvidia/Cosmos-1.0-Diffusion-7B-Text2World"},{description:"A robust model for video generation.",id:"Wan-AI/Wan2.1-T2V-1.3B"}],spaces:[{description:"An application that generates video from text.",id:"VideoCrafter/VideoCrafter"},{description:"Consistent video generation application.",id:"Wan-AI/Wan2.1"},{description:"A cutting edge video generation application.",id:"Pyramid-Flow/pyramid-flow"}],summary:"Text-to-video models can be used in any application that requires generating consistent sequence of images from text. ",widgetModels:["Wan-AI/Wan2.1-T2V-14B"],youtubeId:void 0},taskData$9={datasets:[{description:"The CIFAR-100 dataset consists of 60000 32x32 colour images in 100 classes, with 600 images per class.",id:"cifar100"},{description:"Multiple images of celebrities, used for facial expression translation.",id:"CelebA"}],demo:{inputs:[{label:"Seed",content:"42",type:"text"},{label:"Number of images to generate:",content:"4",type:"text"}],outputs:[{filename:"unconditional-image-generation-output.jpeg",type:"img"}]},metrics:[{description:"The inception score (IS) evaluates the quality of generated images. It measures the diversity of the generated images (the model predictions are evenly distributed across all possible labels) and their 'distinction' or 'sharpness' (the model confidently predicts a single label for each image).",id:"Inception score (IS)"},{description:"The Fréchet Inception Distance (FID) evaluates the quality of images created by a generative model by calculating the distance between feature vectors for real and generated images.",id:"Frećhet Inception Distance (FID)"}],models:[{description:"High-quality image generation model trained on the CIFAR-10 dataset. It synthesizes images of the ten classes presented in the dataset using diffusion probabilistic models, a class of latent variable models inspired by considerations from nonequilibrium thermodynamics.",id:"google/ddpm-cifar10-32"},{description:"High-quality image generation model trained on the 256x256 CelebA-HQ dataset. It synthesizes images of faces using diffusion probabilistic models, a class of latent variable models inspired by considerations from nonequilibrium thermodynamics.",id:"google/ddpm-celebahq-256"}],spaces:[{description:"An application that can generate realistic faces.",id:"CompVis/celeba-latent-diffusion"}],summary:"Unconditional image generation is the task of generating images with no condition in any context (like a prompt text or another image). Once trained, the model will create images that resemble its training data distribution.",widgetModels:[""],youtubeId:""},taskData$8={datasets:[{description:"Benchmark dataset used for video classification with videos that belong to 400 classes.",id:"kinetics400"}],demo:{inputs:[{filename:"video-classification-input.gif",type:"img"}],outputs:[{type:"chart",data:[{label:"Playing Guitar",score:.514},{label:"Playing Tennis",score:.193},{label:"Cooking",score:.068}]}]},metrics:[{description:"",id:"accuracy"},{description:"",id:"recall"},{description:"",id:"precision"},{description:"",id:"f1"}],models:[{description:"Strong Video Classification model trained on the Kinetics 400 dataset.",id:"google/vivit-b-16x2-kinetics400"},{description:"Strong Video Classification model trained on the Kinetics 400 dataset.",id:"microsoft/xclip-base-patch32"}],spaces:[{description:"An application that classifies video at different timestamps.",id:"nateraw/lavila"},{description:"An application that classifies video.",id:"fcakyon/video-classification"}],summary:"Video classification is the task of assigning a label or class to an entire video. Videos are expected to have only one class for each video. Video classification models take a video as input and return a prediction about which class the video belongs to.",widgetModels:[],youtubeId:""},taskData$7={datasets:[{description:"A widely used dataset containing questions (with answers) about images.",id:"Graphcore/vqa"},{description:"A dataset to benchmark visual reasoning based on text in images.",id:"facebook/textvqa"}],demo:{inputs:[{filename:"elephant.jpeg",type:"img"},{label:"Question",content:"What is in this image?",type:"text"}],outputs:[{type:"chart",data:[{label:"elephant",score:.97},{label:"elephants",score:.06},{label:"animal",score:.003}]}]},isPlaceholder:!1,metrics:[{description:"",id:"accuracy"},{description:"Measures how much a predicted answer differs from the ground truth based on the difference in their semantic meaning.",id:"wu-palmer similarity"}],models:[{description:"A visual question answering model trained to convert charts and plots to text.",id:"google/deplot"},{description:"A visual question answering model trained for mathematical reasoning and chart derendering from images.",id:"google/matcha-base"},{description:"A strong visual question answering that answers questions from book covers.",id:"google/pix2struct-ocrvqa-large"}],spaces:[{description:"An application that compares visual question answering models across different tasks.",id:"merve/pix2struct"},{description:"An application that can answer questions based on images.",id:"nielsr/vilt-vqa"},{description:"An application that can caption images and answer questions about a given image. ",id:"Salesforce/BLIP"},{description:"An application that can caption images and answer questions about a given image. ",id:"vumichien/Img2Prompt"}],summary:"Visual Question Answering is the task of answering open-ended questions based on an image. They output natural language responses to natural language questions.",widgetModels:["dandelin/vilt-b32-finetuned-vqa"],youtubeId:""},taskData$6={datasets:[{description:"A widely used dataset used to benchmark multiple variants of text classification.",id:"nyu-mll/glue"},{description:"The Multi-Genre Natural Language Inference (MultiNLI) corpus is a crowd-sourced collection of 433k sentence pairs annotated with textual entailment information.",id:"nyu-mll/multi_nli"},{description:"FEVER is a publicly available dataset for fact extraction and verification against textual sources.",id:"fever/fever"}],demo:{inputs:[{label:"Text Input",content:"Dune is the best movie ever.",type:"text"},{label:"Candidate Labels",content:"CINEMA, ART, MUSIC",type:"text"}],outputs:[{type:"chart",data:[{label:"CINEMA",score:.9},{label:"ART",score:.1},{label:"MUSIC",score:0}]}]},metrics:[],models:[{description:"Powerful zero-shot text classification model.",id:"facebook/bart-large-mnli"},{description:"Cutting-edge zero-shot multilingual text classification model.",id:"MoritzLaurer/ModernBERT-large-zeroshot-v2.0"},{description:"Zero-shot text classification model that can be used for topic and sentiment classification.",id:"knowledgator/gliclass-modern-base-v2.0-init"}],spaces:[],summary:"Zero-shot text classification is a task in natural language processing where a model is trained on a set of labeled examples but is then able to classify new examples from previously unseen classes.",widgetModels:["facebook/bart-large-mnli"]},taskData$5={datasets:[{description:"",id:""}],demo:{inputs:[{filename:"image-classification-input.jpeg",type:"img"},{label:"Classes",content:"cat, dog, bird",type:"text"}],outputs:[{type:"chart",data:[{label:"Cat",score:.664},{label:"Dog",score:.329},{label:"Bird",score:.008}]}]},metrics:[{description:"Computes the number of times the correct label appears in top K labels predicted",id:"top-K accuracy"}],models:[{description:"Multilingual image classification model for 80 languages.",id:"visheratin/mexma-siglip"},{description:"Strong zero-shot image classification model.",id:"google/siglip2-base-patch16-224"},{description:"Robust zero-shot image classification model.",id:"intfloat/mmE5-mllama-11b-instruct"},{description:"Powerful zero-shot image classification model supporting 94 languages.",id:"jinaai/jina-clip-v2"},{description:"Strong image classification model for biomedical domain.",id:"microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"}],spaces:[{description:"An application that leverages zero-shot image classification to find best captions to generate an image. ",id:"pharma/CLIP-Interrogator"},{description:"An application to compare different zero-shot image classification models. ",id:"merve/compare_clip_siglip"}],summary:"Zero-shot image classification is the task of classifying previously unseen classes during training of a model.",widgetModels:["google/siglip-so400m-patch14-224"],youtubeId:""},taskData$4={datasets:[],demo:{inputs:[{filename:"zero-shot-object-detection-input.jpg",type:"img"},{label:"Classes",content:"cat, dog, bird",type:"text"}],outputs:[{filename:"zero-shot-object-detection-output.jpg",type:"img"}]},metrics:[{description:"The Average Precision (AP) metric is the Area Under the PR Curve (AUC-PR). It is calculated for each class separately",id:"Average Precision"},{description:"The Mean Average Precision (mAP) metric is the overall average of the AP values",id:"Mean Average Precision"},{description:"The APα metric is the Average Precision at the IoU threshold of a α value, for example, AP50 and AP75",id:"APα"}],models:[{description:"Solid zero-shot object detection model.",id:"IDEA-Research/grounding-dino-base"},{description:"Cutting-edge zero-shot object detection model.",id:"google/owlv2-base-patch16-ensemble"}],spaces:[{description:"A demo to try the state-of-the-art zero-shot object detection model, OWLv2.",id:"merve/owlv2"},{description:"A demo that combines a zero-shot object detection and mask generation model for zero-shot segmentation.",id:"merve/OWLSAM"}],summary:"Zero-shot object detection is a computer vision task to detect objects and their classes in images, without any prior training or knowledge of the classes. Zero-shot object detection models receive an image as input, as well as a list of candidate classes, and output the bounding boxes and labels where the objects have been detected.",widgetModels:[],youtubeId:""},taskData$3={datasets:[{description:"A large dataset of over 10 million 3D objects.",id:"allenai/objaverse-xl"},{description:"A dataset of isolated object images for evaluating image-to-3D models.",id:"dylanebert/iso3d"}],demo:{inputs:[{filename:"image-to-3d-image-input.png",type:"img"}],outputs:[{label:"Result",content:"image-to-3d-3d-output-filename.glb",type:"text"}]},metrics:[],models:[{description:"Fast image-to-3D mesh model by Tencent.",id:"TencentARC/InstantMesh"},{description:"Fast image-to-3D mesh model by StabilityAI",id:"stabilityai/TripoSR"},{description:"A scaled up image-to-3D mesh model derived from TripoSR.",id:"hwjiang/Real3D"},{description:"Consistent image-to-3d generation model.",id:"stabilityai/stable-point-aware-3d"}],spaces:[{description:"Leaderboard to evaluate image-to-3D models.",id:"dylanebert/3d-arena"},{description:"Image-to-3D demo with mesh outputs.",id:"TencentARC/InstantMesh"},{description:"Image-to-3D demo.",id:"stabilityai/stable-point-aware-3d"},{description:"Image-to-3D demo with mesh outputs.",id:"hwjiang/Real3D"},{description:"Image-to-3D demo with splat outputs.",id:"dylanebert/LGM-mini"}],summary:"Image-to-3D models take in image input and produce 3D output.",widgetModels:[],youtubeId:""},taskData$2={datasets:[{description:"A large dataset of over 10 million 3D objects.",id:"allenai/objaverse-xl"},{description:"Descriptive captions for 3D objects in Objaverse.",id:"tiange/Cap3D"}],demo:{inputs:[{label:"Prompt",content:"a cat statue",type:"text"}],outputs:[{label:"Result",content:"text-to-3d-3d-output-filename.glb",type:"text"}]},metrics:[],models:[{description:"Text-to-3D mesh model by OpenAI",id:"openai/shap-e"},{description:"Generative 3D gaussian splatting model.",id:"ashawkey/LGM"}],spaces:[{description:"Text-to-3D demo with mesh outputs.",id:"hysts/Shap-E"},{description:"Text/image-to-3D demo with splat outputs.",id:"ashawkey/LGM"}],summary:"Text-to-3D models take in text input and produce 3D output.",widgetModels:[],youtubeId:""},taskData$1={datasets:[{description:"A dataset of hand keypoints of over 500k examples.",id:"Vincent-luo/hagrid-mediapipe-hands"}],demo:{inputs:[{filename:"keypoint-detection-input.png",type:"img"}],outputs:[{filename:"keypoint-detection-output.png",type:"img"}]},metrics:[],models:[{description:"A robust keypoint detection model.",id:"magic-leap-community/superpoint"},{description:"A robust keypoint matching model.",id:"magic-leap-community/superglue_outdoor"},{description:"Strong keypoint detection model used to detect human pose.",id:"facebook/sapiens-pose-1b"},{description:"Powerful keypoint detection model used to detect human pose.",id:"usyd-community/vitpose-plus-base"}],spaces:[{description:"An application that detects hand keypoints in real-time.",id:"datasciencedojo/Hand-Keypoint-Detection-Realtime"},{description:"An application to try a universal keypoint detection model.",id:"merve/SuperPoint"}],summary:"Keypoint detection is the task of identifying meaningful distinctive points or features in an image.",widgetModels:[],youtubeId:""},taskData={datasets:[{description:"Multiple-choice questions and answers about videos.",id:"lmms-lab/Video-MME"},{description:"A dataset of instructions and question-answer pairs about videos.",id:"lmms-lab/VideoChatGPT"},{description:"Large video understanding dataset.",id:"HuggingFaceFV/finevideo"}],demo:{inputs:[{filename:"video-text-to-text-input.gif",type:"img"},{label:"Text Prompt",content:"What is happening in this video?",type:"text"}],outputs:[{label:"Answer",content:"The video shows a series of images showing a fountain with water jets and a variety of colorful flowers and butterflies in the background.",type:"text"}]},metrics:[],models:[{description:"A robust video-text-to-text model.",id:"Vision-CAIR/LongVU_Qwen2_7B"},{description:"Strong video-text-to-text model with reasoning capabilities.",id:"GoodiesHere/Apollo-LMMs-Apollo-7B-t32"},{description:"Strong video-text-to-text model.",id:"HuggingFaceTB/SmolVLM2-2.2B-Instruct"}],spaces:[{description:"An application to chat with a video-text-to-text model.",id:"llava-hf/video-llava"},{description:"A leaderboard for various video-text-to-text models.",id:"opencompass/openvlm_video_leaderboard"},{description:"An application to generate highlights from a video.",id:"HuggingFaceTB/SmolVLM2-HighlightGenerator"}],summary:"Video-text-to-text models take in a video and a text prompt and output text. These models are also called video-language models.",widgetModels:[""],youtubeId:""},TASKS_MODEL_LIBRARIES={"audio-classification":["speechbrain","transformers","transformers.js"],"audio-to-audio":["asteroid","fairseq","speechbrain"],"automatic-speech-recognition":["espnet","nemo","speechbrain","transformers","transformers.js"],"audio-text-to-text":[],"depth-estimation":["transformers","transformers.js"],"document-question-answering":["transformers","transformers.js"],"feature-extraction":["sentence-transformers","transformers","transformers.js"],"fill-mask":["transformers","transformers.js"],"graph-ml":["transformers"],"image-classification":["keras","timm","transformers","transformers.js"],"image-feature-extraction":["timm","transformers"],"image-segmentation":["transformers","transformers.js"],"image-text-to-text":["transformers"],"image-to-image":["diffusers","transformers","transformers.js"],"image-to-text":["transformers","transformers.js"],"image-to-video":["diffusers"],"keypoint-detection":["transformers"],"video-classification":["transformers"],"mask-generation":["transformers"],"multiple-choice":["transformers"],"object-detection":["transformers","transformers.js","ultralytics"],other:[],"question-answering":["adapter-transformers","allennlp","transformers","transformers.js"],robotics:[],"reinforcement-learning":["transformers","stable-baselines3","ml-agents","sample-factory"],"sentence-similarity":["sentence-transformers","spacy","transformers.js"],summarization:["transformers","transformers.js"],"table-question-answering":["transformers"],"table-to-text":["transformers"],"tabular-classification":["sklearn"],"tabular-regression":["sklearn"],"tabular-to-text":["transformers"],"text-classification":["adapter-transformers","setfit","spacy","transformers","transformers.js"],"text-generation":["transformers","transformers.js"],"text-retrieval":[],"text-to-image":["diffusers"],"text-to-speech":["espnet","tensorflowtts","transformers","transformers.js"],"text-to-audio":["transformers","transformers.js"],"text-to-video":["diffusers"],"text2text-generation":["transformers","transformers.js"],"time-series-forecasting":[],"token-classification":["adapter-transformers","flair","spacy","span-marker","stanza","transformers","transformers.js"],translation:["transformers","transformers.js"],"unconditional-image-generation":["diffusers"],"video-text-to-text":["transformers"],"visual-question-answering":["transformers","transformers.js"],"voice-activity-detection":[],"zero-shot-classification":["transformers","transformers.js"],"zero-shot-image-classification":["transformers","transformers.js"],"zero-shot-object-detection":["transformers","transformers.js"],"text-to-3d":["diffusers"],"image-to-3d":["diffusers"],"any-to-any":["transformers"],"visual-document-retrieval":["transformers"]};function getData(t,e=taskData$o){return{...e,id:t,label:PIPELINE_DATA[t].name,libraries:TASKS_MODEL_LIBRARIES[t]}}getData("any-to-any",taskData$o),getData("audio-classification",taskData$D),getData("audio-to-audio",taskData$C),getData("audio-text-to-text",taskData$o),getData("automatic-speech-recognition",taskData$B),getData("depth-estimation",taskData$p),getData("document-question-answering",taskData$A),getData("visual-document-retrieval",taskData$o),getData("feature-extraction",taskData$z),getData("fill-mask",taskData$y),getData("image-classification",taskData$x),getData("image-feature-extraction",taskData$w),getData("image-segmentation",taskData$s),getData("image-to-image",taskData$v),getData("image-text-to-text",taskData$t),getData("image-to-text",taskData$u),getData("keypoint-detection",taskData$1),getData("mask-generation",taskData$r),getData("object-detection",taskData$q),getData("video-classification",taskData$8),getData("question-answering",taskData$m),getData("reinforcement-learning",taskData$n),getData("sentence-similarity",taskData$l),getData("summarization",taskData$k),getData("table-question-answering",taskData$j),getData("tabular-classification",taskData$i),getData("tabular-regression",taskData$h),getData("text-classification",taskData$c),getData("text-generation",taskData$b),getData("text-to-image",taskData$g),getData("text-to-speech",taskData$f),getData("text-to-video",taskData$a),getData("token-classification",taskData$e),getData("translation",taskData$d),getData("unconditional-image-generation",taskData$9),getData("video-text-to-text",taskData),getData("visual-question-answering",taskData$7),getData("zero-shot-classification",taskData$6),getData("zero-shot-image-classification",taskData$5),getData("zero-shot-object-detection",taskData$4),getData("text-to-3d",taskData$2),getData("image-to-3d",taskData$3);const inputsZeroShotClassification=()=>'"Hi, I recently bought a device from your company but it is not working as advertised and I would like to get reimbursed!"',inputsTranslation=()=>'"Меня зовут Вольфганг и я живу в Берлине"',inputsSummarization=()=>'"The tower is 324 metres (1,063 ft) tall, about the same height as an 81-storey building, and the tallest structure in Paris. Its base is square, measuring 125 metres (410 ft) on each side. During its construction, the Eiffel Tower surpassed the Washington Monument to become the tallest man-made structure in the world, a title it held for 41 years until the Chrysler Building in New York City was finished in 1930. It was the first structure to reach a height of 300 metres. Due to the addition of a broadcasting aerial at the top of the tower in 1957, it is now taller than the Chrysler Building by 5.2 metres (17 ft). Excluding transmitters, the Eiffel Tower is the second tallest free-standing structure in France after the Millau Viaduct."',inputsTableQuestionAnswering=()=>`{
	"query": "How many stars does the transformers repository have?",
	"table": {
		"Repository": ["Transformers", "Datasets", "Tokenizers"],
		"Stars": ["36542", "4512", "3934"],
		"Contributors": ["651", "77", "34"],
		"Programming language": [
			"Python",
			"Python",
			"Rust, Python and NodeJS"
		]
	}
}`,inputsVisualQuestionAnswering=()=>`{
		"image": "cat.png",
		"question": "What is in this image?"
	}`,inputsQuestionAnswering=()=>`{
	"question": "What is my name?",
	"context": "My name is Clara and I live in Berkeley."
}`,inputsTextClassification=()=>'"I like you. I love you"',inputsTokenClassification=()=>'"My name is Sarah Jessica Parker but you can call me Jessica"',inputsTextGeneration=t=>t.tags.includes("conversational")?t.pipeline_tag==="text-generation"?[{role:"user",content:"What is the capital of France?"}]:[{role:"user",content:[{type:"text",text:"Describe this image in one sentence."},{type:"image_url",image_url:{url:"https://cdn.britannica.com/61/93061-050-99147DCE/Statue-of-Liberty-Island-New-York-Bay.jpg"}}]}]:'"Can you please let us know more details about your "',inputsText2TextGeneration=()=>'"The answer to the universe is"',inputsFillMask=t=>`"The answer to the universe is ${t.mask_token}."`,inputsSentenceSimilarity=()=>`{
	"source_sentence": "That is a happy person",
	"sentences": [
		"That is a happy dog",
		"That is a very happy person",
		"Today is a sunny day"
	]
}`,inputsFeatureExtraction=()=>'"Today is a sunny day and I will get some ice cream."',inputsImageClassification=()=>'"cats.jpg"',inputsImageToText=()=>'"cats.jpg"',inputsImageToImage=()=>`{
	"image": "cat.png",
	"prompt": "Turn the cat into a tiger."
}`,inputsImageSegmentation=()=>'"cats.jpg"',inputsObjectDetection=()=>'"cats.jpg"',inputsAudioToAudio=()=>'"sample1.flac"',inputsAudioClassification=()=>'"sample1.flac"',inputsTextToImage=()=>'"Astronaut riding a horse"',inputsTextToVideo=()=>'"A young man walking on the street"',inputsTextToSpeech=()=>'"The answer to the universe is 42"',inputsTextToAudio=()=>'"liquid drum and bass, atmospheric synths, airy sounds"',inputsAutomaticSpeechRecognition=()=>'"sample1.flac"',inputsTabularPrediction=()=>`'{"Height":[11.52,12.48],"Length1":[23.2,24.0],"Length2":[25.4,26.3],"Species": ["Bream","Bream"]}'`,inputsZeroShotImageClassification=()=>'"cats.jpg"',modelInputSnippets={"audio-to-audio":inputsAudioToAudio,"audio-classification":inputsAudioClassification,"automatic-speech-recognition":inputsAutomaticSpeechRecognition,"document-question-answering":inputsVisualQuestionAnswering,"feature-extraction":inputsFeatureExtraction,"fill-mask":inputsFillMask,"image-classification":inputsImageClassification,"image-to-text":inputsImageToText,"image-to-image":inputsImageToImage,"image-segmentation":inputsImageSegmentation,"object-detection":inputsObjectDetection,"question-answering":inputsQuestionAnswering,"sentence-similarity":inputsSentenceSimilarity,summarization:inputsSummarization,"table-question-answering":inputsTableQuestionAnswering,"tabular-regression":inputsTabularPrediction,"tabular-classification":inputsTabularPrediction,"text-classification":inputsTextClassification,"text-generation":inputsTextGeneration,"image-text-to-text":inputsTextGeneration,"text-to-image":inputsTextToImage,"text-to-video":inputsTextToVideo,"text-to-speech":inputsTextToSpeech,"text-to-audio":inputsTextToAudio,"text2text-generation":inputsText2TextGeneration,"token-classification":inputsTokenClassification,translation:inputsTranslation,"zero-shot-classification":inputsZeroShotClassification,"zero-shot-image-classification":inputsZeroShotImageClassification};function getModelInputSnippet(t,e=!1,r=!1){if(t.pipeline_tag){const n=modelInputSnippets[t.pipeline_tag];if(n){let i=n(t);if(typeof i=="string"&&(e&&(i=i.replace(/(?:(?:\r?\n|\r)\t*)|\t+/g," ")),r)){const s=/^"(.+)"$/s,f=i.match(s);i=f?f[1]:i}return i}}return"No input example has been defined for this model task."}function stringifyMessages(t,e){let r=JSON.stringify(t,null,"	");return e!=null&&e.indent&&(r=r.replaceAll(`
`,`
${e.indent}`)),e!=null&&e.attributeKeyQuotes||(r=r.replace(/"([^"]+)":/g,"$1:")),e!=null&&e.customContentEscaper&&(r=e.customContentEscaper(r)),r}function stringifyGenerationConfig(t,e){const r=e.attributeKeyQuotes?'"':"";return Object.entries(t).map(([n,i])=>`${r}${n}${r}${e.attributeValueConnector}${i},`).join(`${e.indent}`)}const TAG_CUSTOM_CODE="custom_code";function nameWithoutNamespace(t){const e=t.split("/");return e.length===1?e[0]:e[1]}const escapeStringForJson=t=>JSON.stringify(t).slice(1,-1),adapters=t=>{var e,r;return[`from adapters import AutoAdapterModel

model = AutoAdapterModel.from_pretrained("${(r=(e=t.config)==null?void 0:e.adapter_transformers)==null?void 0:r.model_name}")
model.load_adapter("${t.id}", set_active=True)`]},allennlpUnknown=t=>[`import allennlp_models
from allennlp.predictors.predictor import Predictor

predictor = Predictor.from_path("hf://${t.id}")`],allennlpQuestionAnswering=t=>[`import allennlp_models
from allennlp.predictors.predictor import Predictor

predictor = Predictor.from_path("hf://${t.id}")
predictor_input = {"passage": "My name is Wolfgang and I live in Berlin", "question": "Where do I live?"}
predictions = predictor.predict_json(predictor_input)`],allennlp=t=>t.tags.includes("question-answering")?allennlpQuestionAnswering(t):allennlpUnknown(t),asteroid=t=>[`from asteroid.models import BaseModel

model = BaseModel.from_pretrained("${t.id}")`],audioseal=t=>{const e=`# Watermark Generator
from audioseal import AudioSeal

model = AudioSeal.load_generator("${t.id}")
# pass a tensor (tensor_wav) of shape (batch, channels, samples) and a sample rate
wav, sr = tensor_wav, 16000
	
watermark = model.get_watermark(wav, sr)
watermarked_audio = wav + watermark`,r=`# Watermark Detector
from audioseal import AudioSeal

detector = AudioSeal.load_detector("${t.id}")
	
result, message = detector.detect_watermark(watermarked_audio, sr)`;return[e,r]};function get_base_diffusers_model(t){var e,r;return((r=(e=t.cardData)==null?void 0:e.base_model)==null?void 0:r.toString())??"fill-in-base-model"}function get_prompt_from_diffusers_model(t){var r,n,i;const e=((n=(r=t.widgetData)==null?void 0:r[0])==null?void 0:n.text)??((i=t.cardData)==null?void 0:i.instance_prompt);if(e)return escapeStringForJson(e)}const ben2=t=>[`import requests
from PIL import Image
from ben2 import AutoModel

url = "https://huggingface.co/datasets/mishig/sample_images/resolve/main/teapot.jpg"
image = Image.open(requests.get(url, stream=True).raw)

model = AutoModel.from_pretrained("${t.id}")
model.to("cuda").eval()
foreground = model.inference(image)
`],bertopic=t=>[`from bertopic import BERTopic

model = BERTopic.load("${t.id}")`],bm25s=t=>[`from bm25s.hf import BM25HF

retriever = BM25HF.load_from_hub("${t.id}")`],cxr_foundation=()=>[`# pip install git+https://github.com/Google-Health/cxr-foundation.git#subdirectory=python

# Load image as grayscale (Stillwaterising, CC0, via Wikimedia Commons)
import requests
from PIL import Image
from io import BytesIO
image_url = "https://upload.wikimedia.org/wikipedia/commons/c/c8/Chest_Xray_PA_3-8-2010.png"
img = Image.open(requests.get(image_url, headers={'User-Agent': 'Demo'}, stream=True).raw).convert('L')

# Run inference
from clientside.clients import make_hugging_face_client
cxr_client = make_hugging_face_client('cxr_model')
print(cxr_client.get_image_embeddings_from_images([img]))`],depth_anything_v2=t=>{let e,r,n;return e="<ENCODER>",r="<NUMBER_OF_FEATURES>",n="<OUT_CHANNELS>",t.id==="depth-anything/Depth-Anything-V2-Small"?(e="vits",r="64",n="[48, 96, 192, 384]"):t.id==="depth-anything/Depth-Anything-V2-Base"?(e="vitb",r="128",n="[96, 192, 384, 768]"):t.id==="depth-anything/Depth-Anything-V2-Large"&&(e="vitl",r="256",n="[256, 512, 1024, 1024"),[`
# Install from https://github.com/DepthAnything/Depth-Anything-V2

# Load the model and infer depth from an image
import cv2
import torch

from depth_anything_v2.dpt import DepthAnythingV2

# instantiate the model
model = DepthAnythingV2(encoder="${e}", features=${r}, out_channels=${n})

# load the weights
filepath = hf_hub_download(repo_id="${t.id}", filename="depth_anything_v2_${e}.pth", repo_type="model")
state_dict = torch.load(filepath, map_location="cpu")
model.load_state_dict(state_dict).eval()

raw_img = cv2.imread("your/image/path")
depth = model.infer_image(raw_img) # HxW raw depth map in numpy
    `]},depth_pro=t=>[`# Download checkpoint
pip install huggingface-hub
huggingface-cli download --local-dir checkpoints ${t.id}`,`import depth_pro

# Load model and preprocessing transform
model, transform = depth_pro.create_model_and_transforms()
model.eval()

# Load and preprocess an image.
image, _, f_px = depth_pro.load_rgb("example.png")
image = transform(image)

# Run inference.
prediction = model.infer(image, f_px=f_px)

# Results: 1. Depth in meters
depth = prediction["depth"]
# Results: 2. Focal length in pixels
focallength_px = prediction["focallength_px"]`],derm_foundation=()=>[`from huggingface_hub import from_pretrained_keras
import tensorflow as tf, requests

# Load and format input
IMAGE_URL = "https://storage.googleapis.com/dx-scin-public-data/dataset/images/3445096909671059178.png"
input_tensor = tf.train.Example(
    features=tf.train.Features(
        feature={
            "image/encoded": tf.train.Feature(
                bytes_list=tf.train.BytesList(value=[requests.get(IMAGE_URL, stream=True).content])
            )
        }
    )
).SerializeToString()

# Load model and run inference
loaded_model = from_pretrained_keras("google/derm-foundation")
infer = loaded_model.signatures["serving_default"]
print(infer(inputs=tf.constant([input_tensor])))`],diffusersDefaultPrompt="Astronaut in a jungle, cold color palette, muted colors, detailed, 8k",diffusers_default=t=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${t.id}")

prompt = "${get_prompt_from_diffusers_model(t)??diffusersDefaultPrompt}"
image = pipe(prompt).images[0]`],diffusers_controlnet=t=>[`from diffusers import ControlNetModel, StableDiffusionControlNetPipeline

controlnet = ControlNetModel.from_pretrained("${t.id}")
pipe = StableDiffusionControlNetPipeline.from_pretrained(
	"${get_base_diffusers_model(t)}", controlnet=controlnet
)`],diffusers_lora=t=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${get_base_diffusers_model(t)}")
pipe.load_lora_weights("${t.id}")

prompt = "${get_prompt_from_diffusers_model(t)??diffusersDefaultPrompt}"
image = pipe(prompt).images[0]`],diffusers_textual_inversion=t=>[`from diffusers import DiffusionPipeline

pipe = DiffusionPipeline.from_pretrained("${get_base_diffusers_model(t)}")
pipe.load_textual_inversion("${t.id}")`],diffusers=t=>t.tags.includes("controlnet")?diffusers_controlnet(t):t.tags.includes("lora")?diffusers_lora(t):t.tags.includes("textual_inversion")?diffusers_textual_inversion(t):diffusers_default(t),diffusionkit=t=>{const e=`# Pipeline for Stable Diffusion 3
from diffusionkit.mlx import DiffusionPipeline

pipeline = DiffusionPipeline(
	shift=3.0,
	use_t5=False,
	model_version=${t.id},
	low_memory_mode=True,
	a16=True,
	w16=True,
)`,r=`# Pipeline for Flux
from diffusionkit.mlx import FluxPipeline

pipeline = FluxPipeline(
  shift=1.0,
  model_version=${t.id},
  low_memory_mode=True,
  a16=True,
  w16=True,
)`,n=`# Image Generation
HEIGHT = 512
WIDTH = 512
NUM_STEPS = ${t.tags.includes("flux")?4:50}
CFG_WEIGHT = ${t.tags.includes("flux")?0:5}

image, _ = pipeline.generate_image(
  "a photo of a cat",
  cfg_weight=CFG_WEIGHT,
  num_steps=NUM_STEPS,
  latent_size=(HEIGHT // 8, WIDTH // 8),
)`;return[t.tags.includes("flux")?r:e,n]},cartesia_pytorch=t=>[`# pip install --no-binary :all: cartesia-pytorch
from cartesia_pytorch import ReneLMHeadModel
from transformers import AutoTokenizer

model = ReneLMHeadModel.from_pretrained("${t.id}")
tokenizer = AutoTokenizer.from_pretrained("allenai/OLMo-1B-hf")

in_message = ["Rene Descartes was"]
inputs = tokenizer(in_message, return_tensors="pt")

outputs = model.generate(inputs.input_ids, max_length=50, top_k=100, top_p=0.99)
out_message = tokenizer.batch_decode(outputs, skip_special_tokens=True)[0]

print(out_message)
)`],cartesia_mlx=t=>[`import mlx.core as mx
import cartesia_mlx as cmx

model = cmx.from_pretrained("${t.id}")
model.set_dtype(mx.float32)   

prompt = "Rene Descartes was"

for text in model.generate(
    prompt,
    max_tokens=500,
    eval_every_n=5,
    verbose=True,
    top_p=0.99,
    temperature=0.85,
):
    print(text, end="", flush=True)
`],edsnlp=t=>{const e=nameWithoutNamespace(t.id).replaceAll("-","_");return[`# Load it from the Hub directly
import edsnlp
nlp = edsnlp.load("${t.id}")
`,`# Or install it as a package
!pip install git+https://huggingface.co/${t.id}

# and import it as a module
import ${e}

nlp = ${e}.load()  # or edsnlp.load("${e}")
`]},espnetTTS=t=>[`from espnet2.bin.tts_inference import Text2Speech

model = Text2Speech.from_pretrained("${t.id}")

speech, *_ = model("text to generate speech from")`],espnetASR=t=>[`from espnet2.bin.asr_inference import Speech2Text

model = Speech2Text.from_pretrained(
  "${t.id}"
)

speech, rate = soundfile.read("speech.wav")
text, *_ = model(speech)[0]`],espnetUnknown=()=>["unknown model type (must be text-to-speech or automatic-speech-recognition)"],espnet=t=>t.tags.includes("text-to-speech")?espnetTTS(t):t.tags.includes("automatic-speech-recognition")?espnetASR(t):espnetUnknown(),fairseq=t=>[`from fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub

models, cfg, task = load_model_ensemble_and_task_from_hf_hub(
    "${t.id}"
)`],flair=t=>[`from flair.models import SequenceTagger

tagger = SequenceTagger.load("${t.id}")`],gliner=t=>[`from gliner import GLiNER

model = GLiNER.from_pretrained("${t.id}")`],htrflow=t=>[`# CLI usage
# see docs: https://ai-riksarkivet.github.io/htrflow/latest/getting_started/quick_start.html
htrflow pipeline <path/to/pipeline.yaml> <path/to/image>`,`# Python usage
from htrflow.pipeline.pipeline import Pipeline
from htrflow.pipeline.steps import Task
from htrflow.models.framework.model import ModelClass

pipeline = Pipeline(
    [
        Task(
            ModelClass, {"model": "${t.id}"}, {}
        ),
    ])`],keras=t=>[`# Available backend options are: "jax", "torch", "tensorflow".
import os
os.environ["KERAS_BACKEND"] = "jax"
	
import keras

model = keras.saving.load_model("hf://${t.id}")
`],_keras_hub_causal_lm=t=>`
import keras_hub

# Load CausalLM model (optional: use half precision for inference)
causal_lm = keras_hub.models.CausalLM.from_preset("hf://${t}", dtype="bfloat16")
causal_lm.compile(sampler="greedy")  # (optional) specify a sampler

# Generate text
causal_lm.generate("Keras: deep learning for", max_length=64)
`,_keras_hub_text_to_image=t=>`
import keras_hub

# Load TextToImage model (optional: use half precision for inference)
text_to_image = keras_hub.models.TextToImage.from_preset("hf://${t}", dtype="bfloat16")

# Generate images with a TextToImage model.
text_to_image.generate("Astronaut in a jungle")
`,_keras_hub_text_classifier=t=>`
import keras_hub

# Load TextClassifier model
text_classifier = keras_hub.models.TextClassifier.from_preset(
    "hf://${t}",
    num_classes=2,
)
# Fine-tune
text_classifier.fit(x=["Thilling adventure!", "Total snoozefest."], y=[1, 0])
# Classify text
text_classifier.predict(["Not my cup of tea."])
`,_keras_hub_image_classifier=t=>`
import keras_hub
import keras

# Load ImageClassifier model
image_classifier = keras_hub.models.ImageClassifier.from_preset(
    "hf://${t}",
    num_classes=2,
)
# Fine-tune
image_classifier.fit(
    x=keras.random.randint((32, 64, 64, 3), 0, 256),
    y=keras.random.randint((32, 1), 0, 2),
)
# Classify image
image_classifier.predict(keras.random.randint((1, 64, 64, 3), 0, 256))
`,_keras_hub_tasks_with_example={CausalLM:_keras_hub_causal_lm,TextToImage:_keras_hub_text_to_image,TextClassifier:_keras_hub_text_classifier,ImageClassifier:_keras_hub_image_classifier},_keras_hub_task_without_example=(t,e)=>`
import keras_hub

# Create a ${t} model
task = keras_hub.models.${t}.from_preset("hf://${e}")
`,_keras_hub_generic_backbone=t=>`
import keras_hub

# Create a Backbone model unspecialized for any task
backbone = keras_hub.models.Backbone.from_preset("hf://${t}")
`,keras_hub=t=>{var i,s;const e=t.id,r=((s=(i=t.config)==null?void 0:i.keras_hub)==null?void 0:s.tasks)??[],n=[];for(const[f,a]of Object.entries(_keras_hub_tasks_with_example))r.includes(f)&&n.push(a(e));for(const f of r)Object.keys(_keras_hub_tasks_with_example).includes(f)||n.push(_keras_hub_task_without_example(f,e));return n.push(_keras_hub_generic_backbone(e)),n},llama_cpp_python=t=>{const e=[`from llama_cpp import Llama

llm = Llama.from_pretrained(
	repo_id="${t.id}",
	filename="{{GGUF_FILE}}",
)
`];if(t.tags.includes("conversational")){const r=getModelInputSnippet(t);e.push(`llm.create_chat_completion(
	messages = ${stringifyMessages(r,{attributeKeyQuotes:!0,indent:"	"})}
)`)}else e.push(`output = llm(
	"Once upon a time,",
	max_tokens=512,
	echo=True
)
print(output)`);return e},tf_keras=t=>[`# Note: 'keras<3.x' or 'tf_keras' must be installed (legacy)
# See https://github.com/keras-team/tf-keras for more details.
from huggingface_hub import from_pretrained_keras

model = from_pretrained_keras("${t.id}")
`],mamba_ssm=t=>[`from mamba_ssm import MambaLMHeadModel

model = MambaLMHeadModel.from_pretrained("${t.id}")`],mars5_tts=t=>[`# Install from https://github.com/Camb-ai/MARS5-TTS

from inference import Mars5TTS
mars5 = Mars5TTS.from_pretrained("${t.id}")`],mesh_anything=()=>[`# Install from https://github.com/buaacyw/MeshAnything.git

from MeshAnything.models.meshanything import MeshAnything

# refer to https://github.com/buaacyw/MeshAnything/blob/main/main.py#L91 on how to define args
# and https://github.com/buaacyw/MeshAnything/blob/main/app.py regarding usage
model = MeshAnything(args)`],open_clip=t=>[`import open_clip

model, preprocess_train, preprocess_val = open_clip.create_model_and_transforms('hf-hub:${t.id}')
tokenizer = open_clip.get_tokenizer('hf-hub:${t.id}')`],paddlenlp=t=>{var e,r;if((r=(e=t.config)==null?void 0:e.architectures)!=null&&r[0]){const n=t.config.architectures[0];return[[`from paddlenlp.transformers import AutoTokenizer, ${n}`,"",`tokenizer = AutoTokenizer.from_pretrained("${t.id}", from_hf_hub=True)`,`model = ${n}.from_pretrained("${t.id}", from_hf_hub=True)`].join(`
`)]}else return[["# ⚠️ Type of model unknown","from paddlenlp.transformers import AutoTokenizer, AutoModel","",`tokenizer = AutoTokenizer.from_pretrained("${t.id}", from_hf_hub=True)`,`model = AutoModel.from_pretrained("${t.id}", from_hf_hub=True)`].join(`
`)]},pyannote_audio_pipeline=t=>[`from pyannote.audio import Pipeline
  
pipeline = Pipeline.from_pretrained("${t.id}")

# inference on the whole file
pipeline("file.wav")

# inference on an excerpt
from pyannote.core import Segment
excerpt = Segment(start=2.0, end=5.0)

from pyannote.audio import Audio
waveform, sample_rate = Audio().crop("file.wav", excerpt)
pipeline({"waveform": waveform, "sample_rate": sample_rate})`],pyannote_audio_model=t=>[`from pyannote.audio import Model, Inference

model = Model.from_pretrained("${t.id}")
inference = Inference(model)

# inference on the whole file
inference("file.wav")

# inference on an excerpt
from pyannote.core import Segment
excerpt = Segment(start=2.0, end=5.0)
inference.crop("file.wav", excerpt)`],pyannote_audio=t=>t.tags.includes("pyannote-audio-pipeline")?pyannote_audio_pipeline(t):pyannote_audio_model(t),relik=t=>[`from relik import Relik
 
relik = Relik.from_pretrained("${t.id}")`],tensorflowttsTextToMel=t=>[`from tensorflow_tts.inference import AutoProcessor, TFAutoModel

processor = AutoProcessor.from_pretrained("${t.id}")
model = TFAutoModel.from_pretrained("${t.id}")
`],tensorflowttsMelToWav=t=>[`from tensorflow_tts.inference import TFAutoModel

model = TFAutoModel.from_pretrained("${t.id}")
audios = model.inference(mels)
`],tensorflowttsUnknown=t=>[`from tensorflow_tts.inference import TFAutoModel

model = TFAutoModel.from_pretrained("${t.id}")
`],tensorflowtts=t=>t.tags.includes("text-to-mel")?tensorflowttsTextToMel(t):t.tags.includes("mel-to-wav")?tensorflowttsMelToWav(t):tensorflowttsUnknown(t),timm=t=>[`import timm

model = timm.create_model("hf_hub:${t.id}", pretrained=True)`],saelens=()=>[`# pip install sae-lens
from sae_lens import SAE

sae, cfg_dict, sparsity = SAE.from_pretrained(
    release = "RELEASE_ID", # e.g., "gpt2-small-res-jb". See other options in https://github.com/jbloomAus/SAELens/blob/main/sae_lens/pretrained_saes.yaml
    sae_id = "SAE_ID", # e.g., "blocks.8.hook_resid_pre". Won't always be a hook point
)`],seed_story=()=>[`# seed_story_cfg_path refers to 'https://github.com/TencentARC/SEED-Story/blob/master/configs/clm_models/agent_7b_sft.yaml'
# llm_cfg_path refers to 'https://github.com/TencentARC/SEED-Story/blob/master/configs/clm_models/llama2chat7b_lora.yaml'
from omegaconf import OmegaConf
import hydra

# load Llama2
llm_cfg = OmegaConf.load(llm_cfg_path)
llm = hydra.utils.instantiate(llm_cfg, torch_dtype="fp16")

# initialize seed_story
seed_story_cfg = OmegaConf.load(seed_story_cfg_path)
seed_story = hydra.utils.instantiate(seed_story_cfg, llm=llm) `],skopsPickle=(t,e)=>[`import joblib
from skops.hub_utils import download
download("${t.id}", "path_to_folder")
model = joblib.load(
	"${e}"
)
# only load pickle files from sources you trust
# read more about it here https://skops.readthedocs.io/en/stable/persistence.html`],skopsFormat=(t,e)=>[`from skops.hub_utils import download
from skops.io import load
download("${t.id}", "path_to_folder")
# make sure model file is in skops format
# if model is a pickle file, make sure it's from a source you trust
model = load("path_to_folder/${e}")`],skopsJobLib=t=>[`from huggingface_hub import hf_hub_download
import joblib
model = joblib.load(
	hf_hub_download("${t.id}", "sklearn_model.joblib")
)
# only load pickle files from sources you trust
# read more about it here https://skops.readthedocs.io/en/stable/persistence.html`],sklearn=t=>{var e,r,n,i,s;if(t.tags.includes("skops")){const f=(n=(r=(e=t.config)==null?void 0:e.sklearn)==null?void 0:r.model)==null?void 0:n.file,a=(s=(i=t.config)==null?void 0:i.sklearn)==null?void 0:s.model_format;return f?a==="pickle"?skopsPickle(t,f):skopsFormat(t,f):["# ⚠️ Model filename not specified in config.json"]}else return skopsJobLib(t)},stable_audio_tools=t=>[`import torch
import torchaudio
from einops import rearrange
from stable_audio_tools import get_pretrained_model
from stable_audio_tools.inference.generation import generate_diffusion_cond

device = "cuda" if torch.cuda.is_available() else "cpu"

# Download model
model, model_config = get_pretrained_model("${t.id}")
sample_rate = model_config["sample_rate"]
sample_size = model_config["sample_size"]

model = model.to(device)

# Set up text and timing conditioning
conditioning = [{
	"prompt": "128 BPM tech house drum loop",
}]

# Generate stereo audio
output = generate_diffusion_cond(
	model,
	conditioning=conditioning,
	sample_size=sample_size,
	device=device
)

# Rearrange audio batch to a single sequence
output = rearrange(output, "b d n -> d (b n)")

# Peak normalize, clip, convert to int16, and save to file
output = output.to(torch.float32).div(torch.max(torch.abs(output))).clamp(-1, 1).mul(32767).to(torch.int16).cpu()
torchaudio.save("output.wav", output, sample_rate)`],fastai=t=>[`from huggingface_hub import from_pretrained_fastai

learn = from_pretrained_fastai("${t.id}")`],sam2=t=>{const e=`# Use SAM2 with images
import torch
from sam2.sam2_image_predictor import SAM2ImagePredictor

predictor = SAM2ImagePredictor.from_pretrained(${t.id})

with torch.inference_mode(), torch.autocast("cuda", dtype=torch.bfloat16):
    predictor.set_image(<your_image>)
    masks, _, _ = predictor.predict(<input_prompts>)`,r=`# Use SAM2 with videos
import torch
from sam2.sam2_video_predictor import SAM2VideoPredictor
	
predictor = SAM2VideoPredictor.from_pretrained(${t.id})

with torch.inference_mode(), torch.autocast("cuda", dtype=torch.bfloat16):
    state = predictor.init_state(<your_video>)

    # add new prompts and instantly get the output on the same frame
    frame_idx, object_ids, masks = predictor.add_new_points(state, <your_prompts>):

    # propagate the prompts to get masklets throughout the video
    for frame_idx, object_ids, masks in predictor.propagate_in_video(state):
        ...`;return[e,r]},sampleFactory=t=>[`python -m sample_factory.huggingface.load_from_hub -r ${t.id} -d ./train_dir`];function get_widget_examples_from_st_model(t){var r;const e=(r=t.widgetData)==null?void 0:r[0];if(e)return[e.source_sentence,...e.sentences]}const sentenceTransformers=t=>{const e=t.tags.includes(TAG_CUSTOM_CODE)?", trust_remote_code=True":"",r=get_widget_examples_from_st_model(t)??["The weather is lovely today.","It's so sunny outside!","He drove to the stadium."];return[`from sentence_transformers import SentenceTransformer

model = SentenceTransformer("${t.id}"${e})

sentences = ${JSON.stringify(r,null,4)}
embeddings = model.encode(sentences)

similarities = model.similarity(embeddings, embeddings)
print(similarities.shape)
# [${r.length}, ${r.length}]`]},setfit=t=>[`from setfit import SetFitModel

model = SetFitModel.from_pretrained("${t.id}")`],spacy=t=>[`!pip install https://huggingface.co/${t.id}/resolve/main/${nameWithoutNamespace(t.id)}-any-py3-none-any.whl

# Using spacy.load().
import spacy
nlp = spacy.load("${nameWithoutNamespace(t.id)}")

# Importing as module.
import ${nameWithoutNamespace(t.id)}
nlp = ${nameWithoutNamespace(t.id)}.load()`],span_marker=t=>[`from span_marker import SpanMarkerModel

model = SpanMarkerModel.from_pretrained("${t.id}")`],stanza=t=>[`import stanza

stanza.download("${nameWithoutNamespace(t.id).replace("stanza-","")}")
nlp = stanza.Pipeline("${nameWithoutNamespace(t.id).replace("stanza-","")}")`],speechBrainMethod=t=>{switch(t){case"EncoderClassifier":return"classify_file";case"EncoderDecoderASR":case"EncoderASR":return"transcribe_file";case"SpectralMaskEnhancement":return"enhance_file";case"SepformerSeparation":return"separate_file";default:return}},speechbrain=t=>{var n,i;const e=(i=(n=t.config)==null?void 0:n.speechbrain)==null?void 0:i.speechbrain_interface;if(e===void 0)return["# interface not specified in config.json"];const r=speechBrainMethod(e);return r===void 0?["# interface in config.json invalid"]:[`from speechbrain.pretrained import ${e}
model = ${e}.from_hparams(
  "${t.id}"
)
model.${r}("file.wav")`]},terratorch=t=>[`from terratorch.registry import BACKBONE_REGISTRY

model = BACKBONE_REGISTRY.build("${t.id}")`],transformers=t=>{var i,s,f,a,o;const e=t.transformersInfo;if(!e)return["# ⚠️ Type of model unknown"];const r=t.tags.includes(TAG_CUSTOM_CODE)?", trust_remote_code=True":"";let n;if(e.processor){const u=e.processor==="AutoTokenizer"?"tokenizer":e.processor==="AutoFeatureExtractor"?"extractor":"processor";n=["# Load model directly",`from transformers import ${e.processor}, ${e.auto_model}`,"",`${u} = ${e.processor}.from_pretrained("${t.id}"`+r+")",`model = ${e.auto_model}.from_pretrained("${t.id}"`+r+")"].join(`
`)}else n=["# Load model directly",`from transformers import ${e.auto_model}`,`model = ${e.auto_model}.from_pretrained("${t.id}"`+r+")"].join(`
`);if(t.pipeline_tag&&((i=LIBRARY_TASK_MAPPING.transformers)!=null&&i.includes(t.pipeline_tag))){const u=["# Use a pipeline as a high-level helper","from transformers import pipeline",""];return t.tags.includes("conversational")&&((f=(s=t.config)==null?void 0:s.tokenizer_config)!=null&&f.chat_template)&&u.push("messages = [",'    {"role": "user", "content": "Who are you?"},',"]"),u.push(`pipe = pipeline("${t.pipeline_tag}", model="${t.id}"`+r+")"),t.tags.includes("conversational")&&((o=(a=t.config)==null?void 0:a.tokenizer_config)!=null&&o.chat_template)&&u.push("pipe(messages)"),[u.join(`
`),n]}return[n]},transformersJS=t=>{if(!t.pipeline_tag)return["// ⚠️ Unknown pipeline tag"];const e="@huggingface/transformers";return[`// npm i ${e}
import { pipeline } from '${e}';

// Allocate pipeline
const pipe = await pipeline('${t.pipeline_tag}', '${t.id}');`]},peftTask=t=>{switch(t){case"CAUSAL_LM":return"CausalLM";case"SEQ_2_SEQ_LM":return"Seq2SeqLM";case"TOKEN_CLS":return"TokenClassification";case"SEQ_CLS":return"SequenceClassification";default:return}},peft=t=>{var i;const{base_model_name_or_path:e,task_type:r}=((i=t.config)==null?void 0:i.peft)??{},n=peftTask(r);return n?e?[`from peft import PeftModel
from transformers import AutoModelFor${n}

base_model = AutoModelFor${n}.from_pretrained("${e}")
model = PeftModel.from_pretrained(base_model, "${t.id}")`]:["Base model is not found."]:["Task type is invalid."]},fasttext=t=>[`from huggingface_hub import hf_hub_download
import fasttext

model = fasttext.load_model(hf_hub_download("${t.id}", "model.bin"))`],stableBaselines3=t=>[`from huggingface_sb3 import load_from_hub
checkpoint = load_from_hub(
	repo_id="${t.id}",
	filename="{MODEL FILENAME}.zip",
)`],nemoDomainResolver=(t,e)=>{switch(t){case"ASR":return[`import nemo.collections.asr as nemo_asr
asr_model = nemo_asr.models.ASRModel.from_pretrained("${e.id}")

transcriptions = asr_model.transcribe(["file.wav"])`];default:return}},mlAgents=t=>[`mlagents-load-from-hf --repo-id="${t.id}" --local-dir="./download: string[]s"`],sentis=()=>[`string modelName = "[Your model name here].sentis";
Model model = ModelLoader.Load(Application.streamingAssetsPath + "/" + modelName);
IWorker engine = WorkerFactory.CreateWorker(BackendType.GPUCompute, model);
// Please see provided C# file for more details
`],sana=t=>[`
# Load the model and infer image from text
import torch
from app.sana_pipeline import SanaPipeline
from torchvision.utils import save_image

sana = SanaPipeline("configs/sana_config/1024ms/Sana_1600M_img1024.yaml")
sana.from_pretrained("hf://${t.id}")

image = sana(
    prompt='a cyberpunk cat with a neon sign that says "Sana"',
    height=1024,
    width=1024,
    guidance_scale=5.0,
    pag_guidance_scale=2.0,
    num_inference_steps=18,
) `],vfimamba=t=>[`from Trainer_finetune import Model

model = Model.from_pretrained("${t.id}")`],voicecraft=t=>[`from voicecraft import VoiceCraft

model = VoiceCraft.from_pretrained("${t.id}")`],chattts=()=>[`import ChatTTS
import torchaudio

chat = ChatTTS.Chat()
chat.load_models(compile=False) # Set to True for better performance

texts = ["PUT YOUR TEXT HERE",]

wavs = chat.infer(texts, )

torchaudio.save("output1.wav", torch.from_numpy(wavs[0]), 24000)`],ultralytics=t=>{const e=t.tags.find(i=>i.match(/^yolov\d+$/)),r=e?`YOLOv${e.slice(4)}`:"YOLOvXX";return[(e?"":`# Couldn't find a valid YOLO version tag.
# Replace XX with the correct version.
`)+`from ultralytics import ${r}

model = ${r}.from_pretrained("${t.id}")
source = 'http://images.cocodataset.org/val2017/000000039769.jpg'
model.predict(source=source, save=True)`]},birefnet=t=>[`# Option 1: use with transformers

from transformers import AutoModelForImageSegmentation
birefnet = AutoModelForImageSegmentation.from_pretrained("${t.id}", trust_remote_code=True)
`,`# Option 2: use with BiRefNet

# Install from https://github.com/ZhengPeng7/BiRefNet

from models.birefnet import BiRefNet
model = BiRefNet.from_pretrained("${t.id}")`],swarmformer=t=>[`from swarmformer import SwarmFormerModel

model = SwarmFormerModel.from_pretrained("${t.id}")
`],mlx=t=>[`pip install huggingface_hub hf_transfer

export HF_HUB_ENABLE_HF_TRANSFER=1
huggingface-cli download --local-dir ${nameWithoutNamespace(t.id)} ${t.id}`],mlxim=t=>[`from mlxim.model import create_model

model = create_model(${t.id})`],model2vec=t=>[`from model2vec import StaticModel

model = StaticModel.from_pretrained("${t.id}")`],nemo=t=>{let e;return t.tags.includes("automatic-speech-recognition")&&(e=nemoDomainResolver("ASR",t)),e??["# tag did not correspond to a valid NeMo domain."]},pxia=t=>[`from pxia import AutoModel

model = AutoModel.from_pretrained("${t.id}")`],pythae=t=>[`from pythae.models import AutoModel

model = AutoModel.load_from_hf_hub("${t.id}")`],musicgen=t=>[`from audiocraft.models import MusicGen

model = MusicGen.get_pretrained("${t.id}")

descriptions = ['happy rock', 'energetic EDM', 'sad jazz']
wav = model.generate(descriptions)  # generates 3 samples.`],magnet=t=>[`from audiocraft.models import MAGNeT
	
model = MAGNeT.get_pretrained("${t.id}")

descriptions = ['disco beat', 'energetic EDM', 'funky groove']
wav = model.generate(descriptions)  # generates 3 samples.`],audiogen=t=>[`from audiocraft.models import AudioGen
	
model = AudioGen.get_pretrained("${t.id}")
model.set_generation_params(duration=5)  # generate 5 seconds.
descriptions = ['dog barking', 'sirene of an emergency vehicle', 'footsteps in a corridor']
wav = model.generate(descriptions)  # generates 3 samples.`],anemoi=t=>[`from anemoi.inference.runners.default import DefaultRunner
from anemoi.inference.config import Configuration
# Create Configuration
config = Configuration(checkpoint = {"huggingface":{"repo_id":"${t.id}"}})
# Load Runner
runner = DefaultRunner(config)`],audiocraft=t=>t.tags.includes("musicgen")?musicgen(t):t.tags.includes("audiogen")?audiogen(t):t.tags.includes("magnet")?magnet(t):["# Type of model unknown."],whisperkit=()=>[`# Install CLI with Homebrew on macOS device
brew install whisperkit-cli

# View all available inference options
whisperkit-cli transcribe --help
	
# Download and run inference using whisper base model
whisperkit-cli transcribe --audio-path /path/to/audio.mp3

# Or use your preferred model variant
whisperkit-cli transcribe --model "large-v3" --model-prefix "distil" --audio-path /path/to/audio.mp3 --verbose`],threedtopia_xl=t=>[`from threedtopia_xl.models import threedtopia_xl

model = threedtopia_xl.from_pretrained("${t.id}")
model.generate(cond="path/to/image.png")`],MODEL_LIBRARIES_UI_ELEMENTS={"adapter-transformers":{prettyLabel:"Adapters",repoName:"adapters",repoUrl:"https://github.com/Adapter-Hub/adapters",docsUrl:"https://huggingface.co/docs/hub/adapters",snippets:adapters,filter:!0,countDownloads:'path:"adapter_config.json"'},allennlp:{prettyLabel:"AllenNLP",repoName:"AllenNLP",repoUrl:"https://github.com/allenai/allennlp",docsUrl:"https://huggingface.co/docs/hub/allennlp",snippets:allennlp,filter:!0},anemoi:{prettyLabel:"AnemoI",repoName:"AnemoI",repoUrl:"https://github.com/ecmwf/anemoi-inference",docsUrl:"https://anemoi-docs.readthedocs.io/en/latest/",filter:!1,countDownloads:'path_extension:"ckpt"',snippets:anemoi},asteroid:{prettyLabel:"Asteroid",repoName:"Asteroid",repoUrl:"https://github.com/asteroid-team/asteroid",docsUrl:"https://huggingface.co/docs/hub/asteroid",snippets:asteroid,filter:!0,countDownloads:'path:"pytorch_model.bin"'},audiocraft:{prettyLabel:"Audiocraft",repoName:"audiocraft",repoUrl:"https://github.com/facebookresearch/audiocraft",snippets:audiocraft,filter:!1,countDownloads:'path:"state_dict.bin"'},audioseal:{prettyLabel:"AudioSeal",repoName:"audioseal",repoUrl:"https://github.com/facebookresearch/audioseal",filter:!1,countDownloads:'path_extension:"pth"',snippets:audioseal},ben2:{prettyLabel:"BEN2",repoName:"BEN2",repoUrl:"https://github.com/PramaLLC/BEN2",snippets:ben2,filter:!1},bertopic:{prettyLabel:"BERTopic",repoName:"BERTopic",repoUrl:"https://github.com/MaartenGr/BERTopic",snippets:bertopic,filter:!0},big_vision:{prettyLabel:"Big Vision",repoName:"big_vision",repoUrl:"https://github.com/google-research/big_vision",filter:!1,countDownloads:'path_extension:"npz"'},birder:{prettyLabel:"Birder",repoName:"Birder",repoUrl:"https://gitlab.com/birder/birder",filter:!1,countDownloads:'path_extension:"pt"'},birefnet:{prettyLabel:"BiRefNet",repoName:"BiRefNet",repoUrl:"https://github.com/ZhengPeng7/BiRefNet",snippets:birefnet,filter:!1},bm25s:{prettyLabel:"BM25S",repoName:"bm25s",repoUrl:"https://github.com/xhluca/bm25s",snippets:bm25s,filter:!1,countDownloads:'path:"params.index.json"'},champ:{prettyLabel:"Champ",repoName:"Champ",repoUrl:"https://github.com/fudan-generative-vision/champ",countDownloads:'path:"champ/motion_module.pth"'},chat_tts:{prettyLabel:"ChatTTS",repoName:"ChatTTS",repoUrl:"https://github.com/2noise/ChatTTS.git",snippets:chattts,filter:!1,countDownloads:'path:"asset/GPT.pt"'},colpali:{prettyLabel:"ColPali",repoName:"ColPali",repoUrl:"https://github.com/ManuelFay/colpali",filter:!1,countDownloads:'path:"adapter_config.json"'},comet:{prettyLabel:"COMET",repoName:"COMET",repoUrl:"https://github.com/Unbabel/COMET/",countDownloads:'path:"hparams.yaml"'},cosmos:{prettyLabel:"Cosmos",repoName:"Cosmos",repoUrl:"https://github.com/NVIDIA/Cosmos",countDownloads:'path:"config.json" OR path_extension:"pt"'},"cxr-foundation":{prettyLabel:"CXR Foundation",repoName:"cxr-foundation",repoUrl:"https://github.com/google-health/cxr-foundation",snippets:cxr_foundation,filter:!1,countDownloads:'path:"precomputed_embeddings/embeddings.npz" OR path:"pax-elixr-b-text/saved_model.pb"'},deepforest:{prettyLabel:"DeepForest",repoName:"deepforest",docsUrl:"https://deepforest.readthedocs.io/en/latest/",repoUrl:"https://github.com/weecology/DeepForest"},"depth-anything-v2":{prettyLabel:"DepthAnythingV2",repoName:"Depth Anything V2",repoUrl:"https://github.com/DepthAnything/Depth-Anything-V2",snippets:depth_anything_v2,filter:!1,countDownloads:'path_extension:"pth"'},"depth-pro":{prettyLabel:"Depth Pro",repoName:"Depth Pro",repoUrl:"https://github.com/apple/ml-depth-pro",countDownloads:'path_extension:"pt"',snippets:depth_pro,filter:!1},"derm-foundation":{prettyLabel:"Derm Foundation",repoName:"derm-foundation",repoUrl:"https://github.com/google-health/derm-foundation",snippets:derm_foundation,filter:!1,countDownloads:'path:"scin_dataset_precomputed_embeddings.npz" OR path:"saved_model.pb"'},diffree:{prettyLabel:"Diffree",repoName:"Diffree",repoUrl:"https://github.com/OpenGVLab/Diffree",filter:!1,countDownloads:'path:"diffree-step=000010999.ckpt"'},diffusers:{prettyLabel:"Diffusers",repoName:"🤗/diffusers",repoUrl:"https://github.com/huggingface/diffusers",docsUrl:"https://huggingface.co/docs/hub/diffusers",snippets:diffusers,filter:!0},diffusionkit:{prettyLabel:"DiffusionKit",repoName:"DiffusionKit",repoUrl:"https://github.com/argmaxinc/DiffusionKit",snippets:diffusionkit},doctr:{prettyLabel:"docTR",repoName:"doctr",repoUrl:"https://github.com/mindee/doctr"},cartesia_pytorch:{prettyLabel:"Cartesia Pytorch",repoName:"Cartesia Pytorch",repoUrl:"https://github.com/cartesia-ai/cartesia_pytorch",snippets:cartesia_pytorch},cartesia_mlx:{prettyLabel:"Cartesia MLX",repoName:"Cartesia MLX",repoUrl:"https://github.com/cartesia-ai/cartesia_mlx",snippets:cartesia_mlx},clipscope:{prettyLabel:"clipscope",repoName:"clipscope",repoUrl:"https://github.com/Lewington-pitsos/clipscope",filter:!1,countDownloads:'path_extension:"pt"'},cosyvoice:{prettyLabel:"CosyVoice",repoName:"CosyVoice",repoUrl:"https://github.com/FunAudioLLM/CosyVoice",filter:!1,countDownloads:'path_extension:"onnx" OR path_extension:"pt"'},cotracker:{prettyLabel:"CoTracker",repoName:"CoTracker",repoUrl:"https://github.com/facebookresearch/co-tracker",filter:!1,countDownloads:'path_extension:"pth"'},edsnlp:{prettyLabel:"EDS-NLP",repoName:"edsnlp",repoUrl:"https://github.com/aphp/edsnlp",docsUrl:"https://aphp.github.io/edsnlp/latest/",filter:!1,snippets:edsnlp,countDownloads:'path_filename:"config" AND path_extension:"cfg"'},elm:{prettyLabel:"ELM",repoName:"elm",repoUrl:"https://github.com/slicex-ai/elm",filter:!1,countDownloads:'path_filename:"slicex_elm_config" AND path_extension:"json"'},espnet:{prettyLabel:"ESPnet",repoName:"ESPnet",repoUrl:"https://github.com/espnet/espnet",docsUrl:"https://huggingface.co/docs/hub/espnet",snippets:espnet,filter:!0},fairseq:{prettyLabel:"Fairseq",repoName:"fairseq",repoUrl:"https://github.com/pytorch/fairseq",snippets:fairseq,filter:!0},fastai:{prettyLabel:"fastai",repoName:"fastai",repoUrl:"https://github.com/fastai/fastai",docsUrl:"https://huggingface.co/docs/hub/fastai",snippets:fastai,filter:!0},fasttext:{prettyLabel:"fastText",repoName:"fastText",repoUrl:"https://fasttext.cc/",snippets:fasttext,filter:!0,countDownloads:'path_extension:"bin"'},flair:{prettyLabel:"Flair",repoName:"Flair",repoUrl:"https://github.com/flairNLP/flair",docsUrl:"https://huggingface.co/docs/hub/flair",snippets:flair,filter:!0,countDownloads:'path:"pytorch_model.bin"'},"gemma.cpp":{prettyLabel:"gemma.cpp",repoName:"gemma.cpp",repoUrl:"https://github.com/google/gemma.cpp",filter:!1,countDownloads:'path_extension:"sbs"'},gliner:{prettyLabel:"GLiNER",repoName:"GLiNER",repoUrl:"https://github.com/urchade/GLiNER",snippets:gliner,filter:!1,countDownloads:'path:"gliner_config.json"'},"glyph-byt5":{prettyLabel:"Glyph-ByT5",repoName:"Glyph-ByT5",repoUrl:"https://github.com/AIGText/Glyph-ByT5",filter:!1,countDownloads:'path:"checkpoints/byt5_model.pt"'},grok:{prettyLabel:"Grok",repoName:"Grok",repoUrl:"https://github.com/xai-org/grok-1",filter:!1,countDownloads:'path:"ckpt/tensor00000_000" OR path:"ckpt-0/tensor00000_000"'},hallo:{prettyLabel:"Hallo",repoName:"Hallo",repoUrl:"https://github.com/fudan-generative-vision/hallo",countDownloads:'path:"hallo/net.pth"'},hezar:{prettyLabel:"Hezar",repoName:"Hezar",repoUrl:"https://github.com/hezarai/hezar",docsUrl:"https://hezarai.github.io/hezar",countDownloads:'path:"model_config.yaml" OR path:"embedding/embedding_config.yaml"'},htrflow:{prettyLabel:"HTRflow",repoName:"HTRflow",repoUrl:"https://github.com/AI-Riksarkivet/htrflow",docsUrl:"https://ai-riksarkivet.github.io/htrflow",snippets:htrflow},"hunyuan-dit":{prettyLabel:"HunyuanDiT",repoName:"HunyuanDiT",repoUrl:"https://github.com/Tencent/HunyuanDiT",countDownloads:'path:"pytorch_model_ema.pt" OR path:"pytorch_model_distill.pt"'},"hunyuan3d-2":{prettyLabel:"Hunyuan3D-2",repoName:"Hunyuan3D-2",repoUrl:"https://github.com/Tencent/Hunyuan3D-2",countDownloads:'path_filename:"model_index" OR path_filename:"config"'},imstoucan:{prettyLabel:"IMS Toucan",repoName:"IMS-Toucan",repoUrl:"https://github.com/DigitalPhonetics/IMS-Toucan",countDownloads:'path:"embedding_gan.pt" OR path:"Vocoder.pt" OR path:"ToucanTTS.pt"'},keras:{prettyLabel:"Keras",repoName:"Keras",repoUrl:"https://github.com/keras-team/keras",docsUrl:"https://huggingface.co/docs/hub/keras",snippets:keras,filter:!0,countDownloads:'path:"config.json" OR path_extension:"keras"'},"tf-keras":{prettyLabel:"TF-Keras",repoName:"TF-Keras",repoUrl:"https://github.com/keras-team/tf-keras",docsUrl:"https://huggingface.co/docs/hub/tf-keras",snippets:tf_keras,countDownloads:'path:"saved_model.pb"'},"keras-hub":{prettyLabel:"KerasHub",repoName:"KerasHub",repoUrl:"https://github.com/keras-team/keras-hub",docsUrl:"https://keras.io/keras_hub/",snippets:keras_hub,filter:!0},k2:{prettyLabel:"K2",repoName:"k2",repoUrl:"https://github.com/k2-fsa/k2"},liveportrait:{prettyLabel:"LivePortrait",repoName:"LivePortrait",repoUrl:"https://github.com/KwaiVGI/LivePortrait",filter:!1,countDownloads:'path:"liveportrait/landmark.onnx"'},"llama-cpp-python":{prettyLabel:"llama-cpp-python",repoName:"llama-cpp-python",repoUrl:"https://github.com/abetlen/llama-cpp-python",snippets:llama_cpp_python},"mini-omni2":{prettyLabel:"Mini-Omni2",repoName:"Mini-Omni2",repoUrl:"https://github.com/gpt-omni/mini-omni2",countDownloads:'path:"model_config.yaml"'},mindspore:{prettyLabel:"MindSpore",repoName:"mindspore",repoUrl:"https://github.com/mindspore-ai/mindspore"},"mamba-ssm":{prettyLabel:"MambaSSM",repoName:"MambaSSM",repoUrl:"https://github.com/state-spaces/mamba",filter:!1,snippets:mamba_ssm},"mars5-tts":{prettyLabel:"MARS5-TTS",repoName:"MARS5-TTS",repoUrl:"https://github.com/Camb-ai/MARS5-TTS",filter:!1,countDownloads:'path:"mars5_ar.safetensors"',snippets:mars5_tts},"mesh-anything":{prettyLabel:"MeshAnything",repoName:"MeshAnything",repoUrl:"https://github.com/buaacyw/MeshAnything",filter:!1,countDownloads:'path:"MeshAnything_350m.pth"',snippets:mesh_anything},merlin:{prettyLabel:"Merlin",repoName:"Merlin",repoUrl:"https://github.com/StanfordMIMI/Merlin",filter:!1,countDownloads:'path_extension:"pt"'},medvae:{prettyLabel:"MedVAE",repoName:"MedVAE",repoUrl:"https://github.com/StanfordMIMI/MedVAE",filter:!1,countDownloads:'path_extension:"ckpt"'},mitie:{prettyLabel:"MITIE",repoName:"MITIE",repoUrl:"https://github.com/mit-nlp/MITIE",countDownloads:'path_filename:"total_word_feature_extractor"'},"ml-agents":{prettyLabel:"ml-agents",repoName:"ml-agents",repoUrl:"https://github.com/Unity-Technologies/ml-agents",docsUrl:"https://huggingface.co/docs/hub/ml-agents",snippets:mlAgents,filter:!0,countDownloads:'path_extension:"onnx"'},mlx:{prettyLabel:"MLX",repoName:"MLX",repoUrl:"https://github.com/ml-explore/mlx-examples/tree/main",snippets:mlx,filter:!0},"mlx-image":{prettyLabel:"mlx-image",repoName:"mlx-image",repoUrl:"https://github.com/riccardomusmeci/mlx-image",docsUrl:"https://huggingface.co/docs/hub/mlx-image",snippets:mlxim,filter:!1,countDownloads:'path:"model.safetensors"'},"mlc-llm":{prettyLabel:"MLC-LLM",repoName:"MLC-LLM",repoUrl:"https://github.com/mlc-ai/mlc-llm",docsUrl:"https://llm.mlc.ai/docs/",filter:!1,countDownloads:'path:"mlc-chat-config.json"'},model2vec:{prettyLabel:"Model2Vec",repoName:"model2vec",repoUrl:"https://github.com/MinishLab/model2vec",snippets:model2vec,filter:!1},moshi:{prettyLabel:"Moshi",repoName:"Moshi",repoUrl:"https://github.com/kyutai-labs/moshi",filter:!1,countDownloads:'path:"tokenizer-e351c8d8-checkpoint125.safetensors"'},nemo:{prettyLabel:"NeMo",repoName:"NeMo",repoUrl:"https://github.com/NVIDIA/NeMo",snippets:nemo,filter:!0,countDownloads:'path_extension:"nemo" OR path:"model_config.yaml"'},"open-oasis":{prettyLabel:"open-oasis",repoName:"open-oasis",repoUrl:"https://github.com/etched-ai/open-oasis",countDownloads:'path:"oasis500m.safetensors"'},open_clip:{prettyLabel:"OpenCLIP",repoName:"OpenCLIP",repoUrl:"https://github.com/mlfoundations/open_clip",snippets:open_clip,filter:!0,countDownloads:`path:"open_clip_model.safetensors"
			OR path:"model.safetensors"
			OR path:"open_clip_pytorch_model.bin"
			OR path:"pytorch_model.bin"`},paddlenlp:{prettyLabel:"paddlenlp",repoName:"PaddleNLP",repoUrl:"https://github.com/PaddlePaddle/PaddleNLP",docsUrl:"https://huggingface.co/docs/hub/paddlenlp",snippets:paddlenlp,filter:!0,countDownloads:'path:"model_config.json"'},peft:{prettyLabel:"PEFT",repoName:"PEFT",repoUrl:"https://github.com/huggingface/peft",snippets:peft,filter:!0,countDownloads:'path:"adapter_config.json"'},pxia:{prettyLabel:"pxia",repoName:"pxia",repoUrl:"https://github.com/not-lain/pxia",snippets:pxia,filter:!1},"pyannote-audio":{prettyLabel:"pyannote.audio",repoName:"pyannote-audio",repoUrl:"https://github.com/pyannote/pyannote-audio",snippets:pyannote_audio,filter:!0},"py-feat":{prettyLabel:"Py-Feat",repoName:"Py-Feat",repoUrl:"https://github.com/cosanlab/py-feat",docsUrl:"https://py-feat.org/",filter:!1},pythae:{prettyLabel:"pythae",repoName:"pythae",repoUrl:"https://github.com/clementchadebec/benchmark_VAE",snippets:pythae,filter:!1},recurrentgemma:{prettyLabel:"RecurrentGemma",repoName:"recurrentgemma",repoUrl:"https://github.com/google-deepmind/recurrentgemma",filter:!1,countDownloads:'path:"tokenizer.model"'},relik:{prettyLabel:"Relik",repoName:"Relik",repoUrl:"https://github.com/SapienzaNLP/relik",snippets:relik,filter:!1},refiners:{prettyLabel:"Refiners",repoName:"Refiners",repoUrl:"https://github.com/finegrain-ai/refiners",docsUrl:"https://refine.rs/",filter:!1,countDownloads:'path:"model.safetensors"'},reverb:{prettyLabel:"Reverb",repoName:"Reverb",repoUrl:"https://github.com/revdotcom/reverb",filter:!1},saelens:{prettyLabel:"SAELens",repoName:"SAELens",repoUrl:"https://github.com/jbloomAus/SAELens",snippets:saelens,filter:!1},sam2:{prettyLabel:"sam2",repoName:"sam2",repoUrl:"https://github.com/facebookresearch/segment-anything-2",filter:!1,snippets:sam2,countDownloads:'path_extension:"pt"'},"sample-factory":{prettyLabel:"sample-factory",repoName:"sample-factory",repoUrl:"https://github.com/alex-petrenko/sample-factory",docsUrl:"https://huggingface.co/docs/hub/sample-factory",snippets:sampleFactory,filter:!0,countDownloads:'path:"cfg.json"'},sapiens:{prettyLabel:"sapiens",repoName:"sapiens",repoUrl:"https://github.com/facebookresearch/sapiens",filter:!1,countDownloads:'path_extension:"pt2" OR path_extension:"pth" OR path_extension:"onnx"'},"sentence-transformers":{prettyLabel:"sentence-transformers",repoName:"sentence-transformers",repoUrl:"https://github.com/UKPLab/sentence-transformers",docsUrl:"https://huggingface.co/docs/hub/sentence-transformers",snippets:sentenceTransformers,filter:!0},setfit:{prettyLabel:"setfit",repoName:"setfit",repoUrl:"https://github.com/huggingface/setfit",docsUrl:"https://huggingface.co/docs/hub/setfit",snippets:setfit,filter:!0},sklearn:{prettyLabel:"Scikit-learn",repoName:"Scikit-learn",repoUrl:"https://github.com/scikit-learn/scikit-learn",snippets:sklearn,filter:!0,countDownloads:'path:"sklearn_model.joblib"'},spacy:{prettyLabel:"spaCy",repoName:"spaCy",repoUrl:"https://github.com/explosion/spaCy",docsUrl:"https://huggingface.co/docs/hub/spacy",snippets:spacy,filter:!0,countDownloads:'path_extension:"whl"'},"span-marker":{prettyLabel:"SpanMarker",repoName:"SpanMarkerNER",repoUrl:"https://github.com/tomaarsen/SpanMarkerNER",docsUrl:"https://huggingface.co/docs/hub/span_marker",snippets:span_marker,filter:!0},speechbrain:{prettyLabel:"speechbrain",repoName:"speechbrain",repoUrl:"https://github.com/speechbrain/speechbrain",docsUrl:"https://huggingface.co/docs/hub/speechbrain",snippets:speechbrain,filter:!0,countDownloads:'path:"hyperparams.yaml"'},"ssr-speech":{prettyLabel:"SSR-Speech",repoName:"SSR-Speech",repoUrl:"https://github.com/WangHelin1997/SSR-Speech",filter:!1,countDownloads:'path_extension:".pth"'},"stable-audio-tools":{prettyLabel:"Stable Audio Tools",repoName:"stable-audio-tools",repoUrl:"https://github.com/Stability-AI/stable-audio-tools.git",filter:!1,countDownloads:'path:"model.safetensors"',snippets:stable_audio_tools},"diffusion-single-file":{prettyLabel:"Diffusion Single File",repoName:"diffusion-single-file",repoUrl:"https://github.com/comfyanonymous/ComfyUI",filter:!1,countDownloads:'path_extension:"safetensors"'},"seed-story":{prettyLabel:"SEED-Story",repoName:"SEED-Story",repoUrl:"https://github.com/TencentARC/SEED-Story",filter:!1,countDownloads:'path:"cvlm_llama2_tokenizer/tokenizer.model"',snippets:seed_story},soloaudio:{prettyLabel:"SoloAudio",repoName:"SoloAudio",repoUrl:"https://github.com/WangHelin1997/SoloAudio",filter:!1,countDownloads:'path:"soloaudio_v2.pt"'},"stable-baselines3":{prettyLabel:"stable-baselines3",repoName:"stable-baselines3",repoUrl:"https://github.com/huggingface/huggingface_sb3",docsUrl:"https://huggingface.co/docs/hub/stable-baselines3",snippets:stableBaselines3,filter:!0,countDownloads:'path_extension:"zip"'},stanza:{prettyLabel:"Stanza",repoName:"stanza",repoUrl:"https://github.com/stanfordnlp/stanza",docsUrl:"https://huggingface.co/docs/hub/stanza",snippets:stanza,filter:!0,countDownloads:'path:"models/default.zip"'},swarmformer:{prettyLabel:"SwarmFormer",repoName:"SwarmFormer",repoUrl:"https://github.com/takara-ai/SwarmFormer",snippets:swarmformer,filter:!1},"f5-tts":{prettyLabel:"F5-TTS",repoName:"F5-TTS",repoUrl:"https://github.com/SWivid/F5-TTS",filter:!1,countDownloads:'path_extension:"safetensors" OR path_extension:"pt"'},genmo:{prettyLabel:"Genmo",repoName:"Genmo",repoUrl:"https://github.com/genmoai/models",filter:!1,countDownloads:'path:"vae_stats.json"'},tensorflowtts:{prettyLabel:"TensorFlowTTS",repoName:"TensorFlowTTS",repoUrl:"https://github.com/TensorSpeech/TensorFlowTTS",snippets:tensorflowtts},tabpfn:{prettyLabel:"TabPFN",repoName:"TabPFN",repoUrl:"https://github.com/PriorLabs/TabPFN"},terratorch:{prettyLabel:"TerraTorch",repoName:"TerraTorch",repoUrl:"https://github.com/IBM/terratorch",docsUrl:"https://ibm.github.io/terratorch/",filter:!1,countDownloads:'path_extension:"pt"',snippets:terratorch},"tic-clip":{prettyLabel:"TiC-CLIP",repoName:"TiC-CLIP",repoUrl:"https://github.com/apple/ml-tic-clip",filter:!1,countDownloads:'path_extension:"pt" AND path_prefix:"checkpoints/"'},timesfm:{prettyLabel:"TimesFM",repoName:"timesfm",repoUrl:"https://github.com/google-research/timesfm",filter:!1,countDownloads:'path:"checkpoints/checkpoint_1100000/state/checkpoint"'},timm:{prettyLabel:"timm",repoName:"pytorch-image-models",repoUrl:"https://github.com/rwightman/pytorch-image-models",docsUrl:"https://huggingface.co/docs/hub/timm",snippets:timm,filter:!0,countDownloads:'path:"pytorch_model.bin" OR path:"model.safetensors"'},transformers:{prettyLabel:"Transformers",repoName:"🤗/transformers",repoUrl:"https://github.com/huggingface/transformers",docsUrl:"https://huggingface.co/docs/hub/transformers",snippets:transformers,filter:!0},"transformers.js":{prettyLabel:"Transformers.js",repoName:"transformers.js",repoUrl:"https://github.com/huggingface/transformers.js",docsUrl:"https://huggingface.co/docs/hub/transformers-js",snippets:transformersJS,filter:!0},trellis:{prettyLabel:"Trellis",repoName:"Trellis",repoUrl:"https://github.com/microsoft/TRELLIS",countDownloads:'path_extension:"safetensors"'},ultralytics:{prettyLabel:"ultralytics",repoName:"ultralytics",repoUrl:"https://github.com/ultralytics/ultralytics",docsUrl:"https://github.com/ultralytics/ultralytics",filter:!1,countDownloads:'path_extension:"pt"',snippets:ultralytics},"unity-sentis":{prettyLabel:"unity-sentis",repoName:"unity-sentis",repoUrl:"https://github.com/Unity-Technologies/sentis-samples",snippets:sentis,filter:!0,countDownloads:'path_extension:"sentis"'},sana:{prettyLabel:"Sana",repoName:"Sana",repoUrl:"https://github.com/NVlabs/Sana",countDownloads:'path_extension:"pth"',snippets:sana},"vfi-mamba":{prettyLabel:"VFIMamba",repoName:"VFIMamba",repoUrl:"https://github.com/MCG-NJU/VFIMamba",countDownloads:'path_extension:"pkl"',snippets:vfimamba},voicecraft:{prettyLabel:"VoiceCraft",repoName:"VoiceCraft",repoUrl:"https://github.com/jasonppy/VoiceCraft",docsUrl:"https://github.com/jasonppy/VoiceCraft",snippets:voicecraft},wham:{prettyLabel:"WHAM",repoName:"wham",repoUrl:"https://huggingface.co/microsoft/wham",docsUrl:"https://huggingface.co/microsoft/wham/blob/main/README.md",countDownloads:'path_extension:"ckpt"'},whisperkit:{prettyLabel:"WhisperKit",repoName:"WhisperKit",repoUrl:"https://github.com/argmaxinc/WhisperKit",docsUrl:"https://github.com/argmaxinc/WhisperKit?tab=readme-ov-file#homebrew",snippets:whisperkit,countDownloads:'path_filename:"model" AND path_extension:"mil" AND _exists_:"path_prefix"'},yolov10:{prettyLabel:"YOLOv10",repoName:"YOLOv10",repoUrl:"https://github.com/THU-MIG/yolov10",docsUrl:"https://github.com/THU-MIG/yolov10",countDownloads:'path_extension:"pt" OR path_extension:"safetensors"',snippets:ultralytics},"3dtopia-xl":{prettyLabel:"3DTopia-XL",repoName:"3DTopia-XL",repoUrl:"https://github.com/3DTopia/3DTopia-XL",filter:!1,countDownloads:'path:"model_vae_fp16.pt"',snippets:threedtopia_xl}};Object.entries(MODEL_LIBRARIES_UI_ELEMENTS).filter(([t,e])=>e.filter).map(([t])=>t);var GGMLQuantizationType;(function(t){t[t.F32=0]="F32",t[t.F16=1]="F16",t[t.Q4_0=2]="Q4_0",t[t.Q4_1=3]="Q4_1",t[t.Q5_0=6]="Q5_0",t[t.Q5_1=7]="Q5_1",t[t.Q8_0=8]="Q8_0",t[t.Q8_1=9]="Q8_1",t[t.Q2_K=10]="Q2_K",t[t.Q3_K=11]="Q3_K",t[t.Q4_K=12]="Q4_K",t[t.Q5_K=13]="Q5_K",t[t.Q6_K=14]="Q6_K",t[t.Q8_K=15]="Q8_K",t[t.IQ2_XXS=16]="IQ2_XXS",t[t.IQ2_XS=17]="IQ2_XS",t[t.IQ3_XXS=18]="IQ3_XXS",t[t.IQ1_S=19]="IQ1_S",t[t.IQ4_NL=20]="IQ4_NL",t[t.IQ3_S=21]="IQ3_S",t[t.IQ2_S=22]="IQ2_S",t[t.IQ4_XS=23]="IQ4_XS",t[t.I8=24]="I8",t[t.I16=25]="I16",t[t.I32=26]="I32",t[t.I64=27]="I64",t[t.F64=28]="F64",t[t.IQ1_M=29]="IQ1_M",t[t.BF16=30]="BF16"})(GGMLQuantizationType||(GGMLQuantizationType={}));const ggufQuants=Object.values(GGMLQuantizationType).filter(t=>typeof t=="string");new RegExp(`(?<quant>${ggufQuants.join("|")})(_(?<sizeVariation>[A-Z]+))?`);const HF_HUB_INFERENCE_PROXY_TEMPLATE$1="https://router.huggingface.co/{{PROVIDER}}";function openAIbaseUrl(t){const e=HF_HUB_INFERENCE_PROXY_TEMPLATE$1.replace("{{PROVIDER}}",t);return t==="hf-inference"?`${e}/v1`:e}var __defProp$1=Object.defineProperty,__export=(t,e)=>{for(var r in e)__defProp$1(t,r,{get:e[r],enumerable:!0})},tasks_exports={};__export(tasks_exports,{audioClassification:()=>audioClassification,audioToAudio:()=>audioToAudio,automaticSpeechRecognition:()=>automaticSpeechRecognition,chatCompletion:()=>chatCompletion,chatCompletionStream:()=>chatCompletionStream,documentQuestionAnswering:()=>documentQuestionAnswering,featureExtraction:()=>featureExtraction,fillMask:()=>fillMask,imageClassification:()=>imageClassification,imageSegmentation:()=>imageSegmentation,imageToImage:()=>imageToImage,imageToText:()=>imageToText,objectDetection:()=>objectDetection,questionAnswering:()=>questionAnswering,request:()=>request$1,sentenceSimilarity:()=>sentenceSimilarity,streamingRequest:()=>streamingRequest,summarization:()=>summarization,tableQuestionAnswering:()=>tableQuestionAnswering,tabularClassification:()=>tabularClassification,tabularRegression:()=>tabularRegression,textClassification:()=>textClassification,textGeneration:()=>textGeneration,textGenerationStream:()=>textGenerationStream,textToImage:()=>textToImage,textToSpeech:()=>textToSpeech,textToVideo:()=>textToVideo,tokenClassification:()=>tokenClassification,translation:()=>translation,visualQuestionAnswering:()=>visualQuestionAnswering,zeroShotClassification:()=>zeroShotClassification,zeroShotImageClassification:()=>zeroShotImageClassification});var HF_HUB_URL="https://huggingface.co",HF_ROUTER_URL="https://router.huggingface.co",BLACK_FOREST_LABS_AI_API_BASE_URL="https://api.us1.bfl.ai/v1",makeBody=t=>t.args,makeHeaders=t=>t.authMethod==="provider-key"?{"X-Key":`${t.accessToken}`}:{Authorization:`Bearer ${t.accessToken}`},makeUrl=t=>`${t.baseUrl}/${t.model}`,BLACK_FOREST_LABS_CONFIG={baseUrl:BLACK_FOREST_LABS_AI_API_BASE_URL,makeBody,makeHeaders,makeUrl},CEREBRAS_API_BASE_URL="https://api.cerebras.ai",makeBody2=t=>({...t.args,model:t.model}),makeHeaders2=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl2=t=>`${t.baseUrl}/v1/chat/completions`,CEREBRAS_CONFIG={baseUrl:CEREBRAS_API_BASE_URL,makeBody:makeBody2,makeHeaders:makeHeaders2,makeUrl:makeUrl2},COHERE_API_BASE_URL="https://api.cohere.com",makeBody3=t=>({...t.args,model:t.model}),makeHeaders3=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl3=t=>`${t.baseUrl}/compatibility/v1/chat/completions`,COHERE_CONFIG={baseUrl:COHERE_API_BASE_URL,makeBody:makeBody3,makeHeaders:makeHeaders3,makeUrl:makeUrl3},FAL_AI_API_BASE_URL="https://fal.run",makeBody4=t=>t.args,makeHeaders4=t=>({Authorization:t.authMethod==="provider-key"?`Key ${t.accessToken}`:`Bearer ${t.accessToken}`}),makeUrl4=t=>`${t.baseUrl}/${t.model}`,FAL_AI_CONFIG={baseUrl:FAL_AI_API_BASE_URL,makeBody:makeBody4,makeHeaders:makeHeaders4,makeUrl:makeUrl4},FIREWORKS_AI_API_BASE_URL="https://api.fireworks.ai/inference",makeBody5=t=>({...t.args,...t.chatCompletion?{model:t.model}:void 0}),makeHeaders5=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl5=t=>t.task==="text-generation"&&t.chatCompletion?`${t.baseUrl}/v1/chat/completions`:t.baseUrl,FIREWORKS_AI_CONFIG={baseUrl:FIREWORKS_AI_API_BASE_URL,makeBody:makeBody5,makeHeaders:makeHeaders5,makeUrl:makeUrl5},makeBody6=t=>({...t.args,...t.chatCompletion?{model:t.model}:void 0}),makeHeaders6=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl6=t=>t.task&&["feature-extraction","sentence-similarity"].includes(t.task)?`${t.baseUrl}/pipeline/${t.task}/${t.model}`:t.task==="text-generation"&&t.chatCompletion?`${t.baseUrl}/models/${t.model}/v1/chat/completions`:`${t.baseUrl}/models/${t.model}`,HF_INFERENCE_CONFIG={baseUrl:`${HF_ROUTER_URL}/hf-inference`,makeBody:makeBody6,makeHeaders:makeHeaders6,makeUrl:makeUrl6},HYPERBOLIC_API_BASE_URL="https://api.hyperbolic.xyz",makeBody7=t=>({...t.args,...t.task==="text-to-image"?{model_name:t.model}:{model:t.model}}),makeHeaders7=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl7=t=>t.task==="text-to-image"?`${t.baseUrl}/v1/images/generations`:`${t.baseUrl}/v1/chat/completions`,HYPERBOLIC_CONFIG={baseUrl:HYPERBOLIC_API_BASE_URL,makeBody:makeBody7,makeHeaders:makeHeaders7,makeUrl:makeUrl7},NEBIUS_API_BASE_URL="https://api.studio.nebius.ai",makeBody8=t=>({...t.args,model:t.model}),makeHeaders8=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl8=t=>t.task==="text-to-image"?`${t.baseUrl}/v1/images/generations`:t.task==="text-generation"?t.chatCompletion?`${t.baseUrl}/v1/chat/completions`:`${t.baseUrl}/v1/completions`:t.baseUrl,NEBIUS_CONFIG={baseUrl:NEBIUS_API_BASE_URL,makeBody:makeBody8,makeHeaders:makeHeaders8,makeUrl:makeUrl8},NOVITA_API_BASE_URL="https://api.novita.ai/v3/openai",makeBody9=t=>({...t.args,...t.chatCompletion?{model:t.model}:void 0}),makeHeaders9=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl9=t=>t.task==="text-generation"?t.chatCompletion?`${t.baseUrl}/chat/completions`:`${t.baseUrl}/completions`:t.baseUrl,NOVITA_CONFIG={baseUrl:NOVITA_API_BASE_URL,makeBody:makeBody9,makeHeaders:makeHeaders9,makeUrl:makeUrl9},REPLICATE_API_BASE_URL="https://api.replicate.com",makeBody10=t=>({input:t.args,version:t.model.includes(":")?t.model.split(":")[1]:void 0}),makeHeaders10=t=>({Authorization:`Bearer ${t.accessToken}`,Prefer:"wait"}),makeUrl10=t=>t.model.includes(":")?`${t.baseUrl}/v1/predictions`:`${t.baseUrl}/v1/models/${t.model}/predictions`,REPLICATE_CONFIG={baseUrl:REPLICATE_API_BASE_URL,makeBody:makeBody10,makeHeaders:makeHeaders10,makeUrl:makeUrl10},SAMBANOVA_API_BASE_URL="https://api.sambanova.ai",makeBody11=t=>({...t.args,...t.chatCompletion?{model:t.model}:void 0}),makeHeaders11=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl11=t=>t.task==="text-generation"&&t.chatCompletion?`${t.baseUrl}/v1/chat/completions`:t.baseUrl,SAMBANOVA_CONFIG={baseUrl:SAMBANOVA_API_BASE_URL,makeBody:makeBody11,makeHeaders:makeHeaders11,makeUrl:makeUrl11},TOGETHER_API_BASE_URL="https://api.together.xyz",makeBody12=t=>({...t.args,model:t.model}),makeHeaders12=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl12=t=>t.task==="text-to-image"?`${t.baseUrl}/v1/images/generations`:t.task==="text-generation"?t.chatCompletion?`${t.baseUrl}/v1/chat/completions`:`${t.baseUrl}/v1/completions`:t.baseUrl,TOGETHER_CONFIG={baseUrl:TOGETHER_API_BASE_URL,makeBody:makeBody12,makeHeaders:makeHeaders12,makeUrl:makeUrl12},OPENAI_API_BASE_URL="https://api.openai.com",makeBody13=t=>{if(!t.chatCompletion)throw new Error("OpenAI only supports chat completions.");return{...t.args,model:t.model}},makeHeaders13=t=>({Authorization:`Bearer ${t.accessToken}`}),makeUrl13=t=>{if(!t.chatCompletion)throw new Error("OpenAI only supports chat completions.");return`${t.baseUrl}/v1/chat/completions`},OPENAI_CONFIG={baseUrl:OPENAI_API_BASE_URL,makeBody:makeBody13,makeHeaders:makeHeaders13,makeUrl:makeUrl13,clientSideRoutingOnly:!0};function isUrl(t){return/^http(s?):/.test(t)||t.startsWith("/")}var name="@huggingface/inference",version="3.5.1",HARDCODED_MODEL_ID_MAPPING={"black-forest-labs":{},cerebras:{},cohere:{},"fal-ai":{},"fireworks-ai":{},"hf-inference":{},hyperbolic:{},nebius:{},novita:{},openai:{},replicate:{},sambanova:{},together:{}},inferenceProviderMappingCache=new Map;async function getProviderModelId(t,e,r={}){var f,a;if(t.provider==="hf-inference")return t.model;if(!r.task)throw new Error("task must be specified when using a third-party provider");const n=r.task==="text-generation"&&r.chatCompletion?"conversational":r.task;if((f=HARDCODED_MODEL_ID_MAPPING[t.provider])!=null&&f[t.model])return HARDCODED_MODEL_ID_MAPPING[t.provider][t.model];let i;if(inferenceProviderMappingCache.has(t.model)?i=inferenceProviderMappingCache.get(t.model):i=await((r==null?void 0:r.fetch)??fetch)(`${HF_HUB_URL}/api/models/${t.model}?expand[]=inferenceProviderMapping`,{headers:(a=e.accessToken)!=null&&a.startsWith("hf_")?{Authorization:`Bearer ${e.accessToken}`}:{}}).then(o=>o.json()).then(o=>o.inferenceProviderMapping).catch(()=>null),!i)throw new Error(`We have not been able to find inference provider information for model ${t.model}.`);const s=i[t.provider];if(s){if(s.task!==n)throw new Error(`Model ${t.model} is not supported for task ${n} and provider ${t.provider}. Supported task: ${s.task}.`);return s.status==="staging"&&console.warn(`Model ${t.model} is in staging mode for provider ${t.provider}. Meant for test purposes only.`),s.providerId}throw new Error(`Model ${t.model} is not supported provider ${t.provider}.`)}var HF_HUB_INFERENCE_PROXY_TEMPLATE=`${HF_ROUTER_URL}/{{PROVIDER}}`,tasks=null,providerConfigs={"black-forest-labs":BLACK_FOREST_LABS_CONFIG,cerebras:CEREBRAS_CONFIG,cohere:COHERE_CONFIG,"fal-ai":FAL_AI_CONFIG,"fireworks-ai":FIREWORKS_AI_CONFIG,"hf-inference":HF_INFERENCE_CONFIG,hyperbolic:HYPERBOLIC_CONFIG,openai:OPENAI_CONFIG,nebius:NEBIUS_CONFIG,novita:NOVITA_CONFIG,replicate:REPLICATE_CONFIG,sambanova:SAMBANOVA_CONFIG,together:TOGETHER_CONFIG};async function makeRequestOptions(t,e){const{accessToken:r,endpointUrl:n,provider:i,model:s,...f}=t,a=i??"hf-inference",o=providerConfigs[a],{includeCredentials:u,task:y,chatCompletion:w,signal:v}=e??{};if(n&&a!=="hf-inference")throw new Error("Cannot use endpointUrl with a third-party provider.");if(s&&isUrl(s))throw new Error("Model URLs are no longer supported. Use endpointUrl instead.");if(!s&&!y)throw new Error("No model provided, and no task has been specified.");if(!o)throw new Error(`No provider config found for provider ${a}`);if(o.clientSideRoutingOnly&&!s)throw new Error(`Provider ${a} requires a model ID to be passed directly.`);const g=s??await loadDefaultModel(y),b=o.clientSideRoutingOnly?removeProviderPrefix(s,a):await getProviderModelId({model:g,provider:a},t,{task:y,chatCompletion:w,fetch:e==null?void 0:e.fetch}),l=(()=>{if(o.clientSideRoutingOnly){if(r&&r.startsWith("hf_"))throw new Error(`Provider ${a} is closed-source and does not support HF tokens.`);return"provider-key"}return r?r.startsWith("hf_")?"hf-token":"provider-key":u==="include"?"credentials-include":"none"})(),_=n?w?n+"/v1/chat/completions":n:o.makeUrl({baseUrl:l!=="provider-key"?HF_HUB_INFERENCE_PROXY_TEMPLATE.replace("{{PROVIDER}}",a):o.baseUrl,model:b,chatCompletion:w,task:y}),h="data"in t&&!!t.data,d=o.makeHeaders({accessToken:r,authMethod:l});h||(d["Content-Type"]="application/json");const p=[`${name}/${version}`,typeof navigator<"u"?navigator.userAgent:void 0].filter(T=>T!==void 0).join(" ");d["User-Agent"]=p;const m=h?t.data:JSON.stringify(o.makeBody({args:f,model:b,task:y,chatCompletion:w}));let S;typeof u=="string"?S=u:u===!0&&(S="include");const E={headers:d,method:"POST",body:m,...S?{credentials:S}:void 0,signal:v};return{url:_,info:E}}async function loadDefaultModel(t){tasks||(tasks=await loadTaskInfo());const e=tasks[t];if(((e==null?void 0:e.models.length)??0)<=0)throw new Error(`No default model defined for task ${t}, please define the model explicitly.`);return e.models[0].id}async function loadTaskInfo(){const t=await fetch(`${HF_HUB_URL}/api/tasks`);if(!t.ok)throw new Error("Failed to load tasks definitions from Hugging Face Hub.");return await t.json()}function removeProviderPrefix(t,e){if(!t.startsWith(`${e}/`))throw new Error(`Models from ${e} must be prefixed by "${e}/". Got "${t}".`);return t.slice(e.length+1)}async function request$1(t,e){var s;const{url:r,info:n}=await makeRequestOptions(t,e),i=await((e==null?void 0:e.fetch)??fetch)(r,n);if((e==null?void 0:e.retry_on_error)!==!1&&i.status===503)return request$1(t,e);if(!i.ok){const f=i.headers.get("Content-Type");if(["application/json","application/problem+json"].some(o=>f==null?void 0:f.startsWith(o))){const o=await i.json();throw[400,422,404,500].includes(i.status)&&(e!=null&&e.chatCompletion)?new Error(`Server ${t.model} does not seem to support chat completion. Error: ${JSON.stringify(o.error)}`):o.error||o.detail?new Error(JSON.stringify(o.error??o.detail)):new Error(o)}const a=f!=null&&f.startsWith("text/plain;")?await i.text():void 0;throw new Error(a??"An error occurred while fetching the blob")}return(s=i.headers.get("Content-Type"))!=null&&s.startsWith("application/json")?await i.json():await i.blob()}function getLines(t){let e,r,n,i=!1;return function(f){e===void 0?(e=f,r=0,n=-1):e=concat(e,f);const a=e.length;let o=0;for(;r<a;){i&&(e[r]===10&&(o=++r),i=!1);let u=-1;for(;r<a&&u===-1;++r)switch(e[r]){case 58:n===-1&&(n=r-o);break;case 13:i=!0;case 10:u=r;break}if(u===-1)break;t(e.subarray(o,u),n),o=r,n=-1}o===a?e=void 0:o!==0&&(e=e.subarray(o),r-=o)}}function getMessages(t,e,r){let n=newMessage();const i=new TextDecoder;return function(f,a){if(f.length===0)r==null||r(n),n=newMessage();else if(a>0){const o=i.decode(f.subarray(0,a)),u=a+(f[a+1]===32?2:1),y=i.decode(f.subarray(u));switch(o){case"data":n.data=n.data?n.data+`
`+y:y;break;case"event":n.event=y;break;case"id":t(n.id=y);break;case"retry":const w=parseInt(y,10);isNaN(w)||e(n.retry=w);break}}}}function concat(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function newMessage(){return{data:"",event:"",id:"",retry:void 0}}async function*streamingRequest(t,e){var u,y;const{url:r,info:n}=await makeRequestOptions({...t,stream:!0},e),i=await((e==null?void 0:e.fetch)??fetch)(r,n);if((e==null?void 0:e.retry_on_error)!==!1&&i.status===503)return yield*streamingRequest(t,e);if(!i.ok){if((u=i.headers.get("Content-Type"))!=null&&u.startsWith("application/json")){const w=await i.json();if([400,422,404,500].includes(i.status)&&(e!=null&&e.chatCompletion))throw new Error(`Server ${t.model} does not seem to support chat completion. Error: ${w.error}`);if(typeof w.error=="string")throw new Error(w.error);if(w.error&&"message"in w.error&&typeof w.error.message=="string")throw new Error(w.error.message)}throw new Error(`Server response contains error: ${i.status}`)}if(!((y=i.headers.get("content-type"))!=null&&y.startsWith("text/event-stream")))throw new Error("Server does not support event stream content type, it returned "+i.headers.get("content-type"));if(!i.body)return;const s=i.body.getReader();let f=[];const o=getLines(getMessages(()=>{},()=>{},w=>{f.push(w)}));try{for(;;){const{done:w,value:v}=await s.read();if(w)return;o(v);for(const g of f)if(g.data.length>0){if(g.data==="[DONE]")return;const b=JSON.parse(g.data);if(typeof b=="object"&&b!==null&&"error"in b){const l=typeof b.error=="string"?b.error:typeof b.error=="object"&&b.error&&"message"in b.error&&typeof b.error.message=="string"?b.error.message:JSON.stringify(b.error);throw new Error("Error forwarded from backend: "+l)}yield b}f=[]}}finally{s.releaseLock()}}var InferenceOutputError=class extends TypeError{constructor(t){super(`Invalid inference output: ${t}. Use the 'request' method with the same parameters to do a custom call with no type checking.`),this.name="InferenceOutputError"}};function pick(t,e){return Object.assign({},...e.map(r=>{if(t[r]!==void 0)return{[r]:t[r]}}))}function typedInclude(t,e){return t.includes(e)}function omit(t,e){const r=Array.isArray(e)?e:[e],n=Object.keys(t).filter(i=>!typedInclude(r,i));return pick(t,n)}function preparePayload(t){return"data"in t?t:{...omit(t,"inputs"),data:t.inputs}}async function audioClassification(t,e){const r=preparePayload(t),n=await request$1(r,{...e,task:"audio-classification"});if(!(Array.isArray(n)&&n.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return n}function base64FromBytes(t){if(globalThis.Buffer)return globalThis.Buffer.from(t).toString("base64");{const e=[];return t.forEach(r=>{e.push(String.fromCharCode(r))}),globalThis.btoa(e.join(""))}}async function automaticSpeechRecognition(t,e){const r=await buildPayload(t),n=await request$1(r,{...e,task:"automatic-speech-recognition"});if(!(typeof(n==null?void 0:n.text)=="string"))throw new InferenceOutputError("Expected {text: string}");return n}var FAL_AI_SUPPORTED_BLOB_TYPES=["audio/mpeg","audio/mp4","audio/wav","audio/x-wav"];async function buildPayload(t){if(t.provider==="fal-ai"){const e="data"in t&&t.data instanceof Blob?t.data:"inputs"in t?t.inputs:void 0,r=e==null?void 0:e.type;if(!r)throw new Error("Unable to determine the input's content-type. Make sure your are passing a Blob when using provider fal-ai.");if(!FAL_AI_SUPPORTED_BLOB_TYPES.includes(r))throw new Error(`Provider fal-ai does not support blob type ${r} - supported content types are: ${FAL_AI_SUPPORTED_BLOB_TYPES.join(", ")}`);const n=base64FromBytes(new Uint8Array(await e.arrayBuffer()));return{..."data"in t?omit(t,"data"):omit(t,"inputs"),audio_url:`data:${r};base64,${n}`}}else return preparePayload(t)}async function textToSpeech(t,e){const r=t.provider==="replicate"?{...omit(t,["inputs","parameters"]),...t.parameters,text:t.inputs}:t,n=await request$1(r,{...e,task:"text-to-speech"});if(n instanceof Blob)return n;if(n&&typeof n=="object"&&"output"in n){if(typeof n.output=="string")return await(await fetch(n.output)).blob();if(Array.isArray(n.output))return await(await fetch(n.output[0])).blob()}throw new InferenceOutputError("Expected Blob or object with output")}async function audioToAudio(t,e){const r=preparePayload(t),n=await request$1(r,{...e,task:"audio-to-audio"});return validateOutput(n)}function validateOutput(t){if(!Array.isArray(t))throw new InferenceOutputError("Expected Array");if(!t.every(e=>typeof e=="object"&&e&&"label"in e&&typeof e.label=="string"&&"content-type"in e&&typeof e["content-type"]=="string"&&"blob"in e&&typeof e.blob=="string"))throw new InferenceOutputError("Expected Array<{label: string, audio: Blob}>");return t}function preparePayload2(t){return"data"in t?t:{...omit(t,"inputs"),data:t.inputs}}async function imageClassification(t,e){const r=preparePayload2(t),n=await request$1(r,{...e,task:"image-classification"});if(!(Array.isArray(n)&&n.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return n}async function imageSegmentation(t,e){const r=preparePayload2(t),n=await request$1(r,{...e,task:"image-segmentation"});if(!(Array.isArray(n)&&n.every(s=>typeof s.label=="string"&&typeof s.mask=="string"&&typeof s.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, mask: string, score: number}>");return n}async function imageToText(t,e){var i;const r=preparePayload2(t),n=(i=await request$1(r,{...e,task:"image-to-text"}))==null?void 0:i[0];if(typeof(n==null?void 0:n.generated_text)!="string")throw new InferenceOutputError("Expected {generated_text: string}");return n}async function objectDetection(t,e){const r=preparePayload2(t),n=await request$1(r,{...e,task:"object-detection"});if(!(Array.isArray(n)&&n.every(s=>typeof s.label=="string"&&typeof s.score=="number"&&typeof s.box.xmin=="number"&&typeof s.box.ymin=="number"&&typeof s.box.xmax=="number"&&typeof s.box.ymax=="number")))throw new InferenceOutputError("Expected Array<{label:string; score:number; box:{xmin:number; ymin:number; xmax:number; ymax:number}}>");return n}function delay(t){return new Promise(e=>{setTimeout(()=>e(),t)})}function getResponseFormatArg(t){switch(t){case"fal-ai":return{sync_mode:!0};case"nebius":return{response_format:"b64_json"};case"replicate":return;case"together":return{response_format:"base64"};default:return}}async function textToImage(t,e){const r=!t.provider||t.provider==="hf-inference"||t.provider==="sambanova"?t:{...omit(t,["inputs","parameters"]),...t.parameters,...getResponseFormatArg(t.provider),prompt:t.inputs},n=await request$1(r,{...e,task:"text-to-image"});if(n&&typeof n=="object"){if(t.provider==="black-forest-labs"&&"polling_url"in n&&typeof n.polling_url=="string")return await pollBflResponse(n.polling_url,e==null?void 0:e.outputType);if(t.provider==="fal-ai"&&"images"in n&&Array.isArray(n.images)&&n.images[0].url)return(e==null?void 0:e.outputType)==="url"?n.images[0].url:await(await fetch(n.images[0].url)).blob();if(t.provider==="hyperbolic"&&"images"in n&&Array.isArray(n.images)&&n.images[0]&&typeof n.images[0].image=="string")return(e==null?void 0:e.outputType)==="url"?`data:image/jpeg;base64,${n.images[0].image}`:await(await fetch(`data:image/jpeg;base64,${n.images[0].image}`)).blob();if("data"in n&&Array.isArray(n.data)&&n.data[0].b64_json){const s=n.data[0].b64_json;return(e==null?void 0:e.outputType)==="url"?`data:image/jpeg;base64,${s}`:await(await fetch(`data:image/jpeg;base64,${s}`)).blob()}if("output"in n&&Array.isArray(n.output))return(e==null?void 0:e.outputType)==="url"?n.output[0]:await(await fetch(n.output[0])).blob()}if(!(n&&n instanceof Blob))throw new InferenceOutputError("Expected Blob");return(e==null?void 0:e.outputType)==="url"?`data:image/jpeg;base64,${await n.arrayBuffer().then(f=>Buffer.from(f).toString("base64"))}`:n}async function pollBflResponse(t,e){const r=new URL(t);for(let n=0;n<5;n++){await delay(1e3),console.debug(`Polling Black Forest Labs API for the result... ${n+1}/5`),r.searchParams.set("attempt",n.toString(10));const i=await fetch(r,{headers:{"Content-Type":"application/json"}});if(!i.ok)throw new InferenceOutputError("Failed to fetch result from black forest labs API");const s=await i.json();if(typeof s=="object"&&s&&"status"in s&&typeof s.status=="string"&&s.status==="Ready"&&"result"in s&&typeof s.result=="object"&&s.result&&"sample"in s.result&&typeof s.result.sample=="string")return e==="url"?s.result.sample:await(await fetch(s.result.sample)).blob()}throw new InferenceOutputError("Failed to fetch result from black forest labs API")}async function imageToImage(t,e){let r;t.parameters?r={...t,inputs:base64FromBytes(new Uint8Array(t.inputs instanceof ArrayBuffer?t.inputs:await t.inputs.arrayBuffer()))}:r={accessToken:t.accessToken,model:t.model,data:t.inputs};const n=await request$1(r,{...e,task:"image-to-image"});if(!(n&&n instanceof Blob))throw new InferenceOutputError("Expected Blob");return n}async function preparePayload3(t){return t.inputs instanceof Blob?{...t,inputs:{image:base64FromBytes(new Uint8Array(await t.inputs.arrayBuffer()))}}:{...t,inputs:{image:base64FromBytes(new Uint8Array(t.inputs.image instanceof ArrayBuffer?t.inputs.image:await t.inputs.image.arrayBuffer()))}}}async function zeroShotImageClassification(t,e){const r=await preparePayload3(t),n=await request$1(r,{...e,task:"zero-shot-image-classification"});if(!(Array.isArray(n)&&n.every(s=>typeof s.label=="string"&&typeof s.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return n}var SUPPORTED_PROVIDERS=["fal-ai","replicate"];async function textToVideo(t,e){if(!t.provider||!typedInclude(SUPPORTED_PROVIDERS,t.provider))throw new Error(`textToVideo inference is only supported for the following providers: ${SUPPORTED_PROVIDERS.join(", ")}`);const r=t.provider==="fal-ai"||t.provider==="replicate"?{...omit(t,["inputs","parameters"]),...t.parameters,prompt:t.inputs}:t,n=await request$1(r,{...e,task:"text-to-video"});if(t.provider==="fal-ai"){if(!(typeof n=="object"&&!!n&&"video"in n&&typeof n.video=="object"&&!!n.video&&"url"in n.video&&typeof n.video.url=="string"&&isUrl(n.video.url)))throw new InferenceOutputError("Expected { video: { url: string } }");return await(await fetch(n.video.url)).blob()}else{if(!(typeof n=="object"&&!!n&&"output"in n&&typeof n.output=="string"&&isUrl(n.output)))throw new InferenceOutputError("Expected { output: string }");return await(await fetch(n.output)).blob()}}async function featureExtraction(t,e){const r=await request$1(t,{...e,task:"feature-extraction"});let n=!0;const i=(s,f,a=0)=>a>f?!1:s.every(o=>Array.isArray(o))?s.every(o=>i(o,f,a+1)):s.every(o=>typeof o=="number");if(n=Array.isArray(r)&&i(r,3,0),!n)throw new InferenceOutputError("Expected Array<number[][][] | number[][] | number[] | number>");return r}async function fillMask(t,e){const r=await request$1(t,{...e,task:"fill-mask"});if(!(Array.isArray(r)&&r.every(i=>typeof i.score=="number"&&typeof i.sequence=="string"&&typeof i.token=="number"&&typeof i.token_str=="string")))throw new InferenceOutputError("Expected Array<{score: number, sequence: string, token: number, token_str: string}>");return r}async function questionAnswering(t,e){const r=await request$1(t,{...e,task:"question-answering"});if(!(Array.isArray(r)?r.every(i=>typeof i=="object"&&!!i&&typeof i.answer=="string"&&typeof i.end=="number"&&typeof i.score=="number"&&typeof i.start=="number"):typeof r=="object"&&!!r&&typeof r.answer=="string"&&typeof r.end=="number"&&typeof r.score=="number"&&typeof r.start=="number"))throw new InferenceOutputError("Expected Array<{answer: string, end: number, score: number, start: number}>");return Array.isArray(r)?r[0]:r}async function sentenceSimilarity(t,e){const r=await request$1(prepareInput(t),{...e,task:"sentence-similarity"});if(!(Array.isArray(r)&&r.every(i=>typeof i=="number")))throw new InferenceOutputError("Expected number[]");return r}function prepareInput(t){return{...omit(t,["inputs","parameters"]),inputs:{...omit(t.inputs,"sourceSentence")},parameters:{source_sentence:t.inputs.sourceSentence,...t.parameters}}}async function summarization(t,e){const r=await request$1(t,{...e,task:"summarization"});if(!(Array.isArray(r)&&r.every(i=>typeof(i==null?void 0:i.summary_text)=="string")))throw new InferenceOutputError("Expected Array<{summary_text: string}>");return r==null?void 0:r[0]}async function tableQuestionAnswering(t,e){const r=await request$1(t,{...e,task:"table-question-answering"});if(!(Array.isArray(r)?r.every(i=>validate(i)):validate(r)))throw new InferenceOutputError("Expected {aggregator: string, answer: string, cells: string[], coordinates: number[][]}");return Array.isArray(r)?r[0]:r}function validate(t){return typeof t=="object"&&!!t&&"aggregator"in t&&typeof t.aggregator=="string"&&"answer"in t&&typeof t.answer=="string"&&"cells"in t&&Array.isArray(t.cells)&&t.cells.every(e=>typeof e=="string")&&"coordinates"in t&&Array.isArray(t.coordinates)&&t.coordinates.every(e=>Array.isArray(e)&&e.every(r=>typeof r=="number"))}async function textClassification(t,e){var i;const r=(i=await request$1(t,{...e,task:"text-classification"}))==null?void 0:i[0];if(!(Array.isArray(r)&&r.every(s=>typeof(s==null?void 0:s.label)=="string"&&typeof s.score=="number")))throw new InferenceOutputError("Expected Array<{label: string, score: number}>");return r}function toArray$1(t){return Array.isArray(t)?t:[t]}async function textGeneration(t,e){if(t.provider==="together"){t.prompt=t.inputs;const r=await request$1(t,{...e,task:"text-generation"});if(!(typeof r=="object"&&"choices"in r&&Array.isArray(r==null?void 0:r.choices)&&typeof(r==null?void 0:r.model)=="string"))throw new InferenceOutputError("Expected ChatCompletionOutput");return{generated_text:r.choices[0].text}}else if(t.provider==="hyperbolic"){const r={messages:[{content:t.inputs,role:"user"}],...t.parameters?{max_tokens:t.parameters.max_new_tokens,...omit(t.parameters,"max_new_tokens")}:void 0,...omit(t,["inputs","parameters"])},n=await request$1(r,{...e,task:"text-generation"});if(!(typeof n=="object"&&"choices"in n&&Array.isArray(n==null?void 0:n.choices)&&typeof(n==null?void 0:n.model)=="string"))throw new InferenceOutputError("Expected ChatCompletionOutput");return{generated_text:n.choices[0].message.content}}else{const r=toArray$1(await request$1(t,{...e,task:"text-generation"}));if(!(Array.isArray(r)&&r.every(i=>"generated_text"in i&&typeof(i==null?void 0:i.generated_text)=="string")))throw new InferenceOutputError("Expected Array<{generated_text: string}>");return r==null?void 0:r[0]}}async function*textGenerationStream(t,e){yield*streamingRequest(t,{...e,task:"text-generation"})}async function tokenClassification(t,e){const r=toArray$1(await request$1(t,{...e,task:"token-classification"}));if(!(Array.isArray(r)&&r.every(i=>typeof i.end=="number"&&typeof i.entity_group=="string"&&typeof i.score=="number"&&typeof i.start=="number"&&typeof i.word=="string")))throw new InferenceOutputError("Expected Array<{end: number, entity_group: string, score: number, start: number, word: string}>");return r}async function translation(t,e){const r=await request$1(t,{...e,task:"translation"});if(!(Array.isArray(r)&&r.every(i=>typeof(i==null?void 0:i.translation_text)=="string")))throw new InferenceOutputError("Expected type Array<{translation_text: string}>");return(r==null?void 0:r.length)===1?r==null?void 0:r[0]:r}async function zeroShotClassification(t,e){const r=toArray$1(await request$1(t,{...e,task:"zero-shot-classification"}));if(!(Array.isArray(r)&&r.every(i=>Array.isArray(i.labels)&&i.labels.every(s=>typeof s=="string")&&Array.isArray(i.scores)&&i.scores.every(s=>typeof s=="number")&&typeof i.sequence=="string")))throw new InferenceOutputError("Expected Array<{labels: string[], scores: number[], sequence: string}>");return r}async function chatCompletion(t,e){const r=await request$1(t,{...e,task:"text-generation",chatCompletion:!0});if(!(typeof r=="object"&&Array.isArray(r==null?void 0:r.choices)&&typeof(r==null?void 0:r.created)=="number"&&typeof(r==null?void 0:r.id)=="string"&&typeof(r==null?void 0:r.model)=="string"&&(r.system_fingerprint===void 0||r.system_fingerprint===null||typeof r.system_fingerprint=="string")&&typeof(r==null?void 0:r.usage)=="object"))throw new InferenceOutputError("Expected ChatCompletionOutput");return r}async function*chatCompletionStream(t,e){yield*streamingRequest(t,{...e,task:"text-generation",chatCompletion:!0})}async function documentQuestionAnswering(t,e){const r={...t,inputs:{question:t.inputs.question,image:base64FromBytes(new Uint8Array(await t.inputs.image.arrayBuffer()))}},n=toArray$1(await request$1(r,{...e,task:"document-question-answering"}));if(!(Array.isArray(n)&&n.every(s=>typeof s=="object"&&!!s&&typeof(s==null?void 0:s.answer)=="string"&&(typeof s.end=="number"||typeof s.end>"u")&&(typeof s.score=="number"||typeof s.score>"u")&&(typeof s.start=="number"||typeof s.start>"u"))))throw new InferenceOutputError("Expected Array<{answer: string, end?: number, score?: number, start?: number}>");return n[0]}async function visualQuestionAnswering(t,e){const r={...t,inputs:{question:t.inputs.question,image:base64FromBytes(new Uint8Array(await t.inputs.image.arrayBuffer()))}},n=await request$1(r,{...e,task:"visual-question-answering"});if(!(Array.isArray(n)&&n.every(s=>typeof s=="object"&&!!s&&typeof(s==null?void 0:s.answer)=="string"&&typeof s.score=="number")))throw new InferenceOutputError("Expected Array<{answer: string, score: number}>");return n[0]}async function tabularRegression(t,e){const r=await request$1(t,{...e,task:"tabular-regression"});if(!(Array.isArray(r)&&r.every(i=>typeof i=="number")))throw new InferenceOutputError("Expected number[]");return r}async function tabularClassification(t,e){const r=await request$1(t,{...e,task:"tabular-classification"});if(!(Array.isArray(r)&&r.every(i=>typeof i=="number")))throw new InferenceOutputError("Expected number[]");return r}var HfInference=class{constructor(t="",e={}){Ue(this,"accessToken");Ue(this,"defaultOptions");this.accessToken=t,this.defaultOptions=e;for(const[r,n]of Object.entries(tasks_exports))Object.defineProperty(this,r,{enumerable:!1,value:(i,s)=>n({...i,accessToken:t},{...e,...s})})}endpoint(t){return new HfInferenceEndpoint(t,this.accessToken,this.defaultOptions)}},HfInferenceEndpoint=class{constructor(t,e="",r={}){for(const[n,i]of Object.entries(tasks_exports))Object.defineProperty(this,n,{enumerable:!1,value:(s,f)=>i({...s,accessToken:e,endpointUrl:t},{...r,...f})})}},snippets_exports={};__export(snippets_exports,{curl:()=>curl_exports,js:()=>js_exports,python:()=>python_exports});var curl_exports={};__export(curl_exports,{curlSnippets:()=>curlSnippets,getCurlInferenceSnippet:()=>getCurlInferenceSnippet,snippetBasic:()=>snippetBasic,snippetFile:()=>snippetFile,snippetTextGeneration:()=>snippetTextGeneration,snippetZeroShotClassification:()=>snippetZeroShotClassification});var snippetBasic=(t,e,r)=>r!=="hf-inference"?[]:[{client:"curl",content:`curl https://router.huggingface.co/hf-inference/models/${t.id} \\
	-X POST \\
	-d '{"inputs": ${getModelInputSnippet(t,!0)}}' \\
	-H 'Content-Type: application/json' \\
	-H 'Authorization: Bearer ${e||"{API_TOKEN}"}'`}],snippetTextGeneration=(t,e,r,n,i)=>{if(t.tags.includes("conversational")){const s=r==="hf-inference"?`https://router.huggingface.co/hf-inference/models/${t.id}/v1/chat/completions`:HF_HUB_INFERENCE_PROXY_TEMPLATE$1.replace("{{PROVIDER}}",r)+"/v1/chat/completions",f=n??t.id,a=(i==null?void 0:i.streaming)??!0,o=getModelInputSnippet(t),u=(i==null?void 0:i.messages)??o,y={...i!=null&&i.temperature?{temperature:i.temperature}:void 0,max_tokens:(i==null?void 0:i.max_tokens)??500,...i!=null&&i.top_p?{top_p:i.top_p}:void 0};return[{client:"curl",content:`curl '${s}' \\
-H 'Authorization: Bearer ${e||"{API_TOKEN}"}' \\
-H 'Content-Type: application/json' \\
--data '{
    "model": "${f}",
    "messages": ${stringifyMessages(u,{indent:"	",attributeKeyQuotes:!0,customContentEscaper:w=>w.replace(/'/g,"'\\''")})},
    ${stringifyGenerationConfig(y,{indent:`
    `,attributeKeyQuotes:!0,attributeValueConnector:": "})}
    "stream": ${!!a}
}'`}]}else return snippetBasic(t,e,r)},snippetZeroShotClassification=(t,e,r)=>r!=="hf-inference"?[]:[{client:"curl",content:`curl https://router.huggingface.co/hf-inference/models/${t.id} \\
	-X POST \\
	-d '{"inputs": ${getModelInputSnippet(t,!0)}, "parameters": {"candidate_labels": ["refund", "legal", "faq"]}}' \\
	-H 'Content-Type: application/json' \\
	-H 'Authorization: Bearer ${e||"{API_TOKEN}"}'`}],snippetFile=(t,e,r)=>r!=="hf-inference"?[]:[{client:"curl",content:`curl https://router.huggingface.co/hf-inference/models/${t.id} \\
	-X POST \\
	--data-binary '@${getModelInputSnippet(t,!0,!0)}' \\
	-H 'Authorization: Bearer ${e||"{API_TOKEN}"}'`}],curlSnippets={"text-classification":snippetBasic,"token-classification":snippetBasic,"table-question-answering":snippetBasic,"question-answering":snippetBasic,"zero-shot-classification":snippetZeroShotClassification,translation:snippetBasic,summarization:snippetBasic,"feature-extraction":snippetBasic,"text-generation":snippetTextGeneration,"image-text-to-text":snippetTextGeneration,"text2text-generation":snippetBasic,"fill-mask":snippetBasic,"sentence-similarity":snippetBasic,"automatic-speech-recognition":snippetFile,"text-to-image":snippetBasic,"text-to-speech":snippetBasic,"text-to-audio":snippetBasic,"audio-to-audio":snippetFile,"audio-classification":snippetFile,"image-classification":snippetFile,"image-to-text":snippetFile,"object-detection":snippetFile,"image-segmentation":snippetFile};function getCurlInferenceSnippet(t,e,r,n,i){var s;return t.pipeline_tag&&t.pipeline_tag in curlSnippets?((s=curlSnippets[t.pipeline_tag])==null?void 0:s.call(curlSnippets,t,e,r,n,i))??[]:[]}var python_exports={};__export(python_exports,{getPythonInferenceSnippet:()=>getPythonInferenceSnippet,pythonSnippets:()=>pythonSnippets,snippetBasic:()=>snippetBasic2,snippetConversational:()=>snippetConversational,snippetDocumentQuestionAnswering:()=>snippetDocumentQuestionAnswering,snippetFile:()=>snippetFile2,snippetTabular:()=>snippetTabular,snippetTextToAudio:()=>snippetTextToAudio,snippetTextToImage:()=>snippetTextToImage,snippetTextToVideo:()=>snippetTextToVideo,snippetZeroShotClassification:()=>snippetZeroShotClassification2,snippetZeroShotImageClassification:()=>snippetZeroShotImageClassification});var HFH_INFERENCE_CLIENT_METHODS={"audio-classification":"audio_classification","audio-to-audio":"audio_to_audio","automatic-speech-recognition":"automatic_speech_recognition","text-to-speech":"text_to_speech","image-classification":"image_classification","image-segmentation":"image_segmentation","image-to-image":"image_to_image","image-to-text":"image_to_text","object-detection":"object_detection","text-to-image":"text_to_image","text-to-video":"text_to_video","zero-shot-image-classification":"zero_shot_image_classification","document-question-answering":"document_question_answering","visual-question-answering":"visual_question_answering","feature-extraction":"feature_extraction","fill-mask":"fill_mask","question-answering":"question_answering","sentence-similarity":"sentence_similarity",summarization:"summarization","table-question-answering":"table_question_answering","text-classification":"text_classification","text-generation":"text_generation","token-classification":"token_classification",translation:"translation","zero-shot-classification":"zero_shot_classification","tabular-classification":"tabular_classification","tabular-regression":"tabular_regression"},snippetImportInferenceClient=(t,e)=>`from huggingface_hub import InferenceClient

client = InferenceClient(
	provider="${e}",
	api_key="${t||"{API_TOKEN}"}"
)`,snippetConversational=(t,e,r,n,i)=>{const s=(i==null?void 0:i.streaming)??!0,f=getModelInputSnippet(t),a=(i==null?void 0:i.messages)??f,o=stringifyMessages(a,{attributeKeyQuotes:!0}),u={...i!=null&&i.temperature?{temperature:i.temperature}:void 0,max_tokens:(i==null?void 0:i.max_tokens)??500,...i!=null&&i.top_p?{top_p:i.top_p}:void 0},y=stringifyGenerationConfig(u,{indent:`
	`,attributeValueConnector:"="});return s?[{client:"huggingface_hub",content:`${snippetImportInferenceClient(e,r)}

messages = ${o}

stream = client.chat.completions.create(
	model="${t.id}", 
	messages=messages, 
	${y}
	stream=True
)

for chunk in stream:
    print(chunk.choices[0].delta.content, end="")`},{client:"openai",content:`from openai import OpenAI

client = OpenAI(
	base_url="${openAIbaseUrl(r)}",
	api_key="${e||"{API_TOKEN}"}"
)

messages = ${o}

stream = client.chat.completions.create(
    model="${n??t.id}", 
	messages=messages, 
	${y}
	stream=True
)

for chunk in stream:
	print(chunk.choices[0].delta.content, end="")`}]:[{client:"huggingface_hub",content:`${snippetImportInferenceClient(e,r)}

messages = ${o}

completion = client.chat.completions.create(
    model="${t.id}", 
	messages=messages, 
	${y}
)

print(completion.choices[0].message)`},{client:"openai",content:`from openai import OpenAI

client = OpenAI(
	base_url="${openAIbaseUrl(r)}",
	api_key="${e||"{API_TOKEN}"}"
)

messages = ${o}

completion = client.chat.completions.create(
	model="${n??t.id}", 
	messages=messages, 
	${y}
)

print(completion.choices[0].message)`}]},snippetZeroShotClassification2=t=>[{client:"requests",content:`def query(payload):
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.json()

output = query({
    "inputs": ${getModelInputSnippet(t)},
    "parameters": {"candidate_labels": ["refund", "legal", "faq"]},
})`}],snippetZeroShotImageClassification=t=>[{client:"requests",content:`def query(data):
	with open(data["image_path"], "rb") as f:
		img = f.read()
	payload={
		"parameters": data["parameters"],
		"inputs": base64.b64encode(img).decode("utf-8")
	}
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.json()

output = query({
	"image_path": ${getModelInputSnippet(t)},
	"parameters": {"candidate_labels": ["cat", "dog", "llama"]},
})`}],snippetBasic2=(t,e,r)=>[...t.pipeline_tag&&t.pipeline_tag in HFH_INFERENCE_CLIENT_METHODS?[{client:"huggingface_hub",content:`${snippetImportInferenceClient(e,r)}

result = client.${HFH_INFERENCE_CLIENT_METHODS[t.pipeline_tag]}(
	model="${t.id}",
	inputs=${getModelInputSnippet(t)},
	provider="${r}",
)

print(result)
`}]:[],{client:"requests",content:`def query(payload):
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.json()
	
output = query({
	"inputs": ${getModelInputSnippet(t)},
})`}],snippetFile2=t=>[{client:"requests",content:`def query(filename):
	with open(filename, "rb") as f:
		data = f.read()
	response = requests.post(API_URL, headers=headers, data=data)
	return response.json()

output = query(${getModelInputSnippet(t)})`}],snippetTextToImage=(t,e,r,n)=>[{client:"huggingface_hub",content:`${snippetImportInferenceClient(e,r)}

# output is a PIL.Image object
image = client.text_to_image(
	${getModelInputSnippet(t)},
	model="${t.id}"
)`},...r==="fal-ai"?[{client:"fal-client",content:`import fal_client

result = fal_client.subscribe(
	"${n??t.id}",
	arguments={
		"prompt": ${getModelInputSnippet(t)},
	},
)
print(result)
`}]:[],...r==="hf-inference"?[{client:"requests",content:`def query(payload):
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.content

image_bytes = query({
	"inputs": ${getModelInputSnippet(t)},
})

# You can access the image with PIL.Image for example
import io
from PIL import Image
image = Image.open(io.BytesIO(image_bytes))`}]:[]],snippetTextToVideo=(t,e,r)=>["fal-ai","replicate"].includes(r)?[{client:"huggingface_hub",content:`${snippetImportInferenceClient(e,r)}

video = client.text_to_video(
	${getModelInputSnippet(t)},
	model="${t.id}"
)`}]:[],snippetTabular=t=>[{client:"requests",content:`def query(payload):
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.content

response = query({
	"inputs": {"data": ${getModelInputSnippet(t)}},
})`}],snippetTextToAudio=t=>t.library_name==="transformers"?[{client:"requests",content:`def query(payload):
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.content

audio_bytes = query({
	"inputs": ${getModelInputSnippet(t)},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio_bytes)`}]:[{client:"requests",content:`def query(payload):
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.json()
	
audio, sampling_rate = query({
	"inputs": ${getModelInputSnippet(t)},
})
# You can access the audio with IPython.display for example
from IPython.display import Audio
Audio(audio, rate=sampling_rate)`}],snippetDocumentQuestionAnswering=t=>[{client:"requests",content:`def query(payload):
	with open(payload["image"], "rb") as f:
		img = f.read()
		payload["image"] = base64.b64encode(img).decode("utf-8")  
	response = requests.post(API_URL, headers=headers, json=payload)
	return response.json()

output = query({
    "inputs": ${getModelInputSnippet(t)},
})`}],pythonSnippets={"text-classification":snippetBasic2,"token-classification":snippetBasic2,"table-question-answering":snippetBasic2,"question-answering":snippetBasic2,"zero-shot-classification":snippetZeroShotClassification2,translation:snippetBasic2,summarization:snippetBasic2,"feature-extraction":snippetBasic2,"text-generation":snippetBasic2,"text2text-generation":snippetBasic2,"image-text-to-text":snippetConversational,"fill-mask":snippetBasic2,"sentence-similarity":snippetBasic2,"automatic-speech-recognition":snippetFile2,"text-to-image":snippetTextToImage,"text-to-video":snippetTextToVideo,"text-to-speech":snippetTextToAudio,"text-to-audio":snippetTextToAudio,"audio-to-audio":snippetFile2,"audio-classification":snippetFile2,"image-classification":snippetFile2,"tabular-regression":snippetTabular,"tabular-classification":snippetTabular,"object-detection":snippetFile2,"image-segmentation":snippetFile2,"document-question-answering":snippetDocumentQuestionAnswering,"image-to-text":snippetFile2,"zero-shot-image-classification":snippetZeroShotImageClassification};function getPythonInferenceSnippet(t,e,r,n,i){var s;return t.tags.includes("conversational")?snippetConversational(t,e,r,n,i):(t.pipeline_tag&&t.pipeline_tag in pythonSnippets?((s=pythonSnippets[t.pipeline_tag])==null?void 0:s.call(pythonSnippets,t,e,r,n))??[]:[]).map(a=>({...a,content:a.client==="requests"?`import requests

API_URL = "${openAIbaseUrl(r)}"
headers = {"Authorization": ${e?`"Bearer ${e}"`:'f"Bearer {API_TOKEN}"'}}

${a.content}`:a.content}))}var js_exports={};__export(js_exports,{getJsInferenceSnippet:()=>getJsInferenceSnippet,jsSnippets:()=>jsSnippets,snippetAutomaticSpeechRecognition:()=>snippetAutomaticSpeechRecognition,snippetBasic:()=>snippetBasic3,snippetFile:()=>snippetFile3,snippetTextGeneration:()=>snippetTextGeneration2,snippetTextToAudio:()=>snippetTextToAudio2,snippetTextToImage:()=>snippetTextToImage2,snippetTextToVideo:()=>snippetTextToVideo2,snippetZeroShotClassification:()=>snippetZeroShotClassification3});var HFJS_METHODS={"text-classification":"textClassification","token-classification":"tokenClassification","table-question-answering":"tableQuestionAnswering","question-answering":"questionAnswering",translation:"translation",summarization:"summarization","feature-extraction":"featureExtraction","text-generation":"textGeneration","text2text-generation":"textGeneration","fill-mask":"fillMask","sentence-similarity":"sentenceSimilarity"},snippetBasic3=(t,e,r)=>[...t.pipeline_tag&&t.pipeline_tag in HFJS_METHODS?[{client:"huggingface.js",content:`import { HfInference } from "@huggingface/inference";

const client = new HfInference("${e||"{API_TOKEN}"}");

const output = await client.${HFJS_METHODS[t.pipeline_tag]}({
	model: "${t.id}",
	inputs: ${getModelInputSnippet(t)},
	provider: "${r}",
});

console.log(output);
`}]:[],{client:"fetch",content:`async function query(data) {
	const response = await fetch(
		"https://router.huggingface.co/hf-inference/models/${t.id}",
		{
			headers: {
				Authorization: "Bearer ${e||"{API_TOKEN}"}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.json();
	return result;
}

query({"inputs": ${getModelInputSnippet(t)}}).then((response) => {
	console.log(JSON.stringify(response));
});`}],snippetTextGeneration2=(t,e,r,n,i)=>{if(t.tags.includes("conversational")){const s=(i==null?void 0:i.streaming)??!0,f=getModelInputSnippet(t),a=(i==null?void 0:i.messages)??f,o=stringifyMessages(a,{indent:"	"}),u={...i!=null&&i.temperature?{temperature:i.temperature}:void 0,max_tokens:(i==null?void 0:i.max_tokens)??500,...i!=null&&i.top_p?{top_p:i.top_p}:void 0},y=stringifyGenerationConfig(u,{indent:`
	`,attributeValueConnector:": "});return s?[{client:"huggingface.js",content:`import { HfInference } from "@huggingface/inference";

const client = new HfInference("${e||"{API_TOKEN}"}");

let out = "";

const stream = client.chatCompletionStream({
	model: "${t.id}",
	messages: ${o},
	provider: "${r}",
	${y}
});

for await (const chunk of stream) {
	if (chunk.choices && chunk.choices.length > 0) {
		const newContent = chunk.choices[0].delta.content;
		out += newContent;
		console.log(newContent);
	}  
}`},{client:"openai",content:`import { OpenAI } from "openai";

const client = new OpenAI({
	baseURL: "${openAIbaseUrl(r)}",
	apiKey: "${e||"{API_TOKEN}"}"
});

let out = "";

const stream = await client.chat.completions.create({
	model: "${n??t.id}",
	messages: ${o},
	${y}
	stream: true,
});

for await (const chunk of stream) {
	if (chunk.choices && chunk.choices.length > 0) {
		const newContent = chunk.choices[0].delta.content;
		out += newContent;
		console.log(newContent);
	}  
}`}]:[{client:"huggingface.js",content:`import { HfInference } from "@huggingface/inference";

const client = new HfInference("${e||"{API_TOKEN}"}");

const chatCompletion = await client.chatCompletion({
	model: "${t.id}",
	messages: ${o},
	provider: "${r}",
	${y}
});

console.log(chatCompletion.choices[0].message);
`},{client:"openai",content:`import { OpenAI } from "openai";

const client = new OpenAI({
	baseURL: "${openAIbaseUrl(r)}",
	apiKey: "${e||"{API_TOKEN}"}"
});

const chatCompletion = await client.chat.completions.create({
	model: "${n??t.id}",
	messages: ${o},
	${y}
});

console.log(chatCompletion.choices[0].message);
`}]}else return snippetBasic3(t,e,r)},snippetZeroShotClassification3=(t,e)=>[{client:"fetch",content:`async function query(data) {
			const response = await fetch(
				"https://router.huggingface.co/hf-inference/models/${t.id}",
				{
					headers: {
						Authorization: "Bearer ${e||"{API_TOKEN}"}",
						"Content-Type": "application/json",
					},
					method: "POST",
					body: JSON.stringify(data),
				}
			);
			const result = await response.json();
			return result;
		}
		
		query({"inputs": ${getModelInputSnippet(t)}, "parameters": {"candidate_labels": ["refund", "legal", "faq"]}}).then((response) => {
			console.log(JSON.stringify(response));
		});`}],snippetTextToImage2=(t,e,r)=>[{client:"huggingface.js",content:`import { HfInference } from "@huggingface/inference";

const client = new HfInference("${e||"{API_TOKEN}"}");

const image = await client.textToImage({
	model: "${t.id}",
	inputs: ${getModelInputSnippet(t)},
	parameters: { num_inference_steps: 5 },
	provider: "${r}",
});
/// Use the generated image (it's a Blob)
`},...r==="hf-inference"?[{client:"fetch",content:`async function query(data) {
	const response = await fetch(
		"https://router.huggingface.co/hf-inference/models/${t.id}",
		{
			headers: {
				Authorization: "Bearer ${e||"{API_TOKEN}"}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: JSON.stringify(data),
		}
	);
	const result = await response.blob();
	return result;
}
query({"inputs": ${getModelInputSnippet(t)}}).then((response) => {
	// Use image
});`}]:[]],snippetTextToVideo2=(t,e,r)=>["fal-ai","replicate"].includes(r)?[{client:"huggingface.js",content:`import { HfInference } from "@huggingface/inference";

const client = new HfInference("${e||"{API_TOKEN}"}");

const video = await client.textToVideo({
	model: "${t.id}",
	provider: "${r}",
	inputs: ${getModelInputSnippet(t)},
	parameters: { num_inference_steps: 5 },
});
// Use the generated video (it's a Blob)
`}]:[],snippetTextToAudio2=(t,e,r)=>{if(r!=="hf-inference")return[];const n=`async function query(data) {
		const response = await fetch(
			"https://router.huggingface.co/hf-inference/models/${t.id}",
			{
				headers: {
					Authorization: "Bearer ${e||"{API_TOKEN}"}",
					"Content-Type": "application/json",
				},
				method: "POST",
				body: JSON.stringify(data),
			}
		);`;return t.library_name==="transformers"?[{client:"fetch",content:n+`
			const result = await response.blob();
			return result;
		}
		query({"inputs": ${getModelInputSnippet(t)}}).then((response) => {
			// Returns a byte object of the Audio wavform. Use it directly!
		});`}]:[{client:"fetch",content:n+`
			const result = await response.json();
			return result;
		}
		
		query({"inputs": ${getModelInputSnippet(t)}}).then((response) => {
			console.log(JSON.stringify(response));
		});`}]},snippetAutomaticSpeechRecognition=(t,e,r)=>[{client:"huggingface.js",content:`import { HfInference } from "@huggingface/inference";

const client = new HfInference("${e||"{API_TOKEN}"}");

const data = fs.readFileSync(${getModelInputSnippet(t)});

const output = await client.automaticSpeechRecognition({
	data,
	model: "${t.id}",
	provider: "${r}",
});

console.log(output);
`},...r==="hf-inference"?snippetFile3(t,e,r):[]],snippetFile3=(t,e,r)=>r!=="hf-inference"?[]:[{client:"fetch",content:`async function query(filename) {
	const data = fs.readFileSync(filename);
	const response = await fetch(
		"https://router.huggingface.co/hf-inference/models/${t.id}",
		{
			headers: {
				Authorization: "Bearer ${e||"{API_TOKEN}"}",
				"Content-Type": "application/json",
			},
			method: "POST",
			body: data,
		}
	);
	const result = await response.json();
	return result;
}

query(${getModelInputSnippet(t)}).then((response) => {
	console.log(JSON.stringify(response));
});`}],jsSnippets={"text-classification":snippetBasic3,"token-classification":snippetBasic3,"table-question-answering":snippetBasic3,"question-answering":snippetBasic3,"zero-shot-classification":snippetZeroShotClassification3,translation:snippetBasic3,summarization:snippetBasic3,"feature-extraction":snippetBasic3,"text-generation":snippetTextGeneration2,"image-text-to-text":snippetTextGeneration2,"text2text-generation":snippetBasic3,"fill-mask":snippetBasic3,"sentence-similarity":snippetBasic3,"automatic-speech-recognition":snippetAutomaticSpeechRecognition,"text-to-image":snippetTextToImage2,"text-to-video":snippetTextToVideo2,"text-to-speech":snippetTextToAudio2,"text-to-audio":snippetTextToAudio2,"audio-to-audio":snippetFile3,"audio-classification":snippetFile3,"image-classification":snippetFile3,"image-to-text":snippetFile3,"object-detection":snippetFile3,"image-segmentation":snippetFile3};function getJsInferenceSnippet(t,e,r,n,i){var s;return t.pipeline_tag&&t.pipeline_tag in jsSnippets?((s=jsSnippets[t.pipeline_tag])==null?void 0:s.call(jsSnippets,t,e,r,n,i))??[]:[]}const store$1={_origin:"https://api.emailjs.com"},init=(t,e="https://api.emailjs.com")=>{store$1._userID=t,store$1._origin=e},validateParams=(t,e,r)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class EmailJSResponseStatus{constructor(e){this.status=e.status,this.text=e.responseText}}const sendPost=(t,e,r={})=>new Promise((n,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:f})=>{const a=new EmailJSResponseStatus(f);a.status===200||a.text==="OK"?n(a):i(a)}),s.addEventListener("error",({target:f})=>{i(new EmailJSResponseStatus(f))}),s.open("POST",store$1._origin+t,!0),Object.keys(r).forEach(f=>{s.setRequestHeader(f,r[f])}),s.send(e)}),send=(t,e,r,n)=>{const i=n||store$1._userID;return validateParams(i,t,e),sendPost("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:t,template_id:e,template_params:r}),{"Content-type":"application/json"})},findHTMLForm=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},sendForm=(t,e,r,n)=>{const i=n||store$1._userID,s=findHTMLForm(r);validateParams(i,t,e);const f=new FormData(s);return f.append("lib_version","3.2.0"),f.append("service_id",t),f.append("template_id",e),f.append("user_id",i),sendPost("/api/v1.0/email/send-form",f)},emailjs={init,send,sendForm};var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,r)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,__spreadValues=(t,e)=>{for(var r in e||(e={}))__hasOwnProp.call(e,r)&&__defNormalProp(t,r,e[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(e))__propIsEnum.call(e,r)&&__defNormalProp(t,r,e[r]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__publicField=(t,e,r)=>__defNormalProp(t,typeof e!="symbol"?e+"":e,r),__async=(t,e,r)=>new Promise((n,i)=>{var s=o=>{try{a(r.next(o))}catch(u){i(u)}},f=o=>{try{a(r.throw(o))}catch(u){i(u)}},a=o=>o.done?n(o.value):Promise.resolve(o.value).then(s,f);a((r=r.apply(t,e)).next())});class BaseXmlComponent{constructor(e){__publicField(this,"rootKey"),this.rootKey=e}}const EMPTY_OBJECT=Object.seal({});class XmlComponent extends BaseXmlComponent{constructor(e){super(e),__publicField(this,"root"),this.root=new Array}prepForXml(e){var r;e.stack.push(this);const n=this.root.map(i=>i instanceof BaseXmlComponent?i.prepForXml(e):i).filter(i=>i!==void 0);return e.stack.pop(),{[this.rootKey]:n.length?n.length===1&&((r=n[0])!=null&&r._attr)?n[0]:n:EMPTY_OBJECT}}addChildElement(e){return this.root.push(e),this}}class IgnoreIfEmptyXmlComponent extends XmlComponent{prepForXml(e){const r=super.prepForXml(e);if(r&&(typeof r[this.rootKey]!="object"||Object.keys(r[this.rootKey]).length))return r}}class XmlAttributeComponent extends BaseXmlComponent{constructor(e){super("_attr"),__publicField(this,"xmlKeys"),this.root=e}prepForXml(e){const r={};return Object.entries(this.root).forEach(([n,i])=>{if(i!==void 0){const s=this.xmlKeys&&this.xmlKeys[n]||n;r[s]=i}}),{_attr:r}}}class NextAttributeComponent extends BaseXmlComponent{constructor(e){super("_attr"),this.root=e}prepForXml(e){return{_attr:Object.values(this.root).filter(({value:n})=>n!==void 0).reduce((n,{key:i,value:s})=>__spreadProps(__spreadValues({},n),{[i]:s}),{})}}}class Attributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val",color:"w:color",fill:"w:fill",space:"w:space",sz:"w:sz",type:"w:type",rsidR:"w:rsidR",rsidRPr:"w:rsidRPr",rsidSect:"w:rsidSect",w:"w:w",h:"w:h",top:"w:top",right:"w:right",bottom:"w:bottom",left:"w:left",header:"w:header",footer:"w:footer",gutter:"w:gutter",linePitch:"w:linePitch",pos:"w:pos"})}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sax={},events$2={exports:{}},hasRequiredEvents$1;function requireEvents$1(){if(hasRequiredEvents$1)return events$2.exports;hasRequiredEvents$1=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(m,S,E){return Function.prototype.apply.call(m,S,E)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:r=function(m){return Object.getOwnPropertyNames(m)};function n(p){console&&console.warn&&console.warn(p)}var i=Number.isNaN||function(m){return m!==m};function s(){s.init.call(this)}events$2.exports=s,events$2.exports.once=h,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var f=10;function a(p){if(typeof p!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(p){if(typeof p!="number"||p<0||i(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");f=p}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(m){if(typeof m!="number"||m<0||i(m))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+m+".");return this._maxListeners=m,this};function o(p){return p._maxListeners===void 0?s.defaultMaxListeners:p._maxListeners}s.prototype.getMaxListeners=function(){return o(this)},s.prototype.emit=function(m){for(var S=[],E=1;E<arguments.length;E++)S.push(arguments[E]);var T=m==="error",A=this._events;if(A!==void 0)T=T&&A.error===void 0;else if(!T)return!1;if(T){var P;if(S.length>0&&(P=S[0]),P instanceof Error)throw P;var H=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw H.context=P,H}var O=A[m];if(O===void 0)return!1;if(typeof O=="function")e(O,this,S);else for(var q=O.length,C=b(O,q),E=0;E<q;++E)e(C[E],this,S);return!0};function u(p,m,S,E){var T,A,P;if(a(S),A=p._events,A===void 0?(A=p._events=Object.create(null),p._eventsCount=0):(A.newListener!==void 0&&(p.emit("newListener",m,S.listener?S.listener:S),A=p._events),P=A[m]),P===void 0)P=A[m]=S,++p._eventsCount;else if(typeof P=="function"?P=A[m]=E?[S,P]:[P,S]:E?P.unshift(S):P.push(S),T=o(p),T>0&&P.length>T&&!P.warned){P.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(m)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=p,H.type=m,H.count=P.length,n(H)}return p}s.prototype.addListener=function(m,S){return u(this,m,S,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(m,S){return u(this,m,S,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(p,m,S){var E={fired:!1,wrapFn:void 0,target:p,type:m,listener:S},T=y.bind(E);return T.listener=S,E.wrapFn=T,T}s.prototype.once=function(m,S){return a(S),this.on(m,w(this,m,S)),this},s.prototype.prependOnceListener=function(m,S){return a(S),this.prependListener(m,w(this,m,S)),this},s.prototype.removeListener=function(m,S){var E,T,A,P,H;if(a(S),T=this._events,T===void 0)return this;if(E=T[m],E===void 0)return this;if(E===S||E.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete T[m],T.removeListener&&this.emit("removeListener",m,E.listener||S));else if(typeof E!="function"){for(A=-1,P=E.length-1;P>=0;P--)if(E[P]===S||E[P].listener===S){H=E[P].listener,A=P;break}if(A<0)return this;A===0?E.shift():l(E,A),E.length===1&&(T[m]=E[0]),T.removeListener!==void 0&&this.emit("removeListener",m,H||S)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(m){var S,E,T;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[m]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[m]),this;if(arguments.length===0){var A=Object.keys(E),P;for(T=0;T<A.length;++T)P=A[T],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=E[m],typeof S=="function")this.removeListener(m,S);else if(S!==void 0)for(T=S.length-1;T>=0;T--)this.removeListener(m,S[T]);return this};function v(p,m,S){var E=p._events;if(E===void 0)return[];var T=E[m];return T===void 0?[]:typeof T=="function"?S?[T.listener||T]:[T]:S?_(T):b(T,T.length)}s.prototype.listeners=function(m){return v(this,m,!0)},s.prototype.rawListeners=function(m){return v(this,m,!1)},s.listenerCount=function(p,m){return typeof p.listenerCount=="function"?p.listenerCount(m):g.call(p,m)},s.prototype.listenerCount=g;function g(p){var m=this._events;if(m!==void 0){var S=m[p];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function b(p,m){for(var S=new Array(m),E=0;E<m;++E)S[E]=p[E];return S}function l(p,m){for(;m+1<p.length;m++)p[m]=p[m+1];p.pop()}function _(p){for(var m=new Array(p.length),S=0;S<m.length;++S)m[S]=p[S].listener||p[S];return m}function h(p,m){return new Promise(function(S,E){function T(P){p.removeListener(m,A),E(P)}function A(){typeof p.removeListener=="function"&&p.removeListener("error",T),S([].slice.call(arguments))}c(p,m,A,{once:!0}),m!=="error"&&d(p,T,{once:!0})})}function d(p,m,S){typeof p.on=="function"&&c(p,"error",m,S)}function c(p,m,S,E){if(typeof p.on=="function")E.once?p.once(m,S):p.on(m,S);else if(typeof p.addEventListener=="function")p.addEventListener(m,function T(A){E.once&&p.removeEventListener(m,T),S(A)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof p)}return events$2.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),inherits_browser.exports}function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browser$1={exports:{}},process$1=browser$1.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}process$1.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];queue.push(new Item(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(t,e){this.fun=t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop(){}process$1.on=noop;process$1.addListener=noop;process$1.once=noop;process$1.off=noop;process$1.removeListener=noop;process$1.removeAllListeners=noop;process$1.emit=noop;process$1.prependListener=noop;process$1.prependOnceListener=noop;process$1.listeners=function(t){return[]};process$1.binding=function(t){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(t){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var browserExports=browser$1.exports;const process$1$1=getDefaultExportFromCjs(browserExports);var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents$1().EventEmitter),streamBrowser}var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=a,base64Js.toByteArray=u,base64Js.fromByteArray=v;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)t[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function f(g){var b=g.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=g.indexOf("=");l===-1&&(l=b);var _=l===b?0:4-l%4;return[l,_]}function a(g){var b=f(g),l=b[0],_=b[1];return(l+_)*3/4-_}function o(g,b,l){return(b+l)*3/4-l}function u(g){var b,l=f(g),_=l[0],h=l[1],d=new r(o(g,_,h)),c=0,p=h>0?_-4:_,m;for(m=0;m<p;m+=4)b=e[g.charCodeAt(m)]<<18|e[g.charCodeAt(m+1)]<<12|e[g.charCodeAt(m+2)]<<6|e[g.charCodeAt(m+3)],d[c++]=b>>16&255,d[c++]=b>>8&255,d[c++]=b&255;return h===2&&(b=e[g.charCodeAt(m)]<<2|e[g.charCodeAt(m+1)]>>4,d[c++]=b&255),h===1&&(b=e[g.charCodeAt(m)]<<10|e[g.charCodeAt(m+1)]<<4|e[g.charCodeAt(m+2)]>>2,d[c++]=b>>8&255,d[c++]=b&255),d}function y(g){return t[g>>18&63]+t[g>>12&63]+t[g>>6&63]+t[g&63]}function w(g,b,l){for(var _,h=[],d=b;d<l;d+=3)_=(g[d]<<16&16711680)+(g[d+1]<<8&65280)+(g[d+2]&255),h.push(y(_));return h.join("")}function v(g){for(var b,l=g.length,_=l%3,h=[],d=16383,c=0,p=l-_;c<p;c+=d)h.push(w(g,c,c+d>p?p:c+d));return _===1?(b=g[l-1],h.push(t[b>>2]+t[b<<4&63]+"==")):_===2&&(b=(g[l-2]<<8)+g[l-1],h.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),h.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(t,e,r,n,i){var s,f,a=i*8-n-1,o=(1<<a)-1,u=o>>1,y=-7,w=r?i-1:0,v=r?-1:1,g=t[e+w];for(w+=v,s=g&(1<<-y)-1,g>>=-y,y+=a;y>0;s=s*256+t[e+w],w+=v,y-=8);for(f=s&(1<<-y)-1,s>>=-y,y+=n;y>0;f=f*256+t[e+w],w+=v,y-=8);if(s===0)s=1-u;else{if(s===o)return f?NaN:(g?-1:1)*(1/0);f=f+Math.pow(2,n),s=s-u}return(g?-1:1)*f*Math.pow(2,s-n)},ieee754.write=function(t,e,r,n,i,s){var f,a,o,u=s*8-i-1,y=(1<<u)-1,w=y>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:s-1,b=n?1:-1,l=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,f=y):(f=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-f))<1&&(f--,o*=2),f+w>=1?e+=v/o:e+=v*Math.pow(2,1-w),e*o>=2&&(f++,o/=2),f+w>=y?(a=0,f=y):f+w>=1?(a=(e*o-1)*Math.pow(2,i),f=f+w):(a=e*Math.pow(2,w-1)*Math.pow(2,i),f=0));i>=8;t[r+g]=a&255,g+=b,a/=256,i-=8);for(f=f<<i|a,u+=i;u>0;t[r+g]=f&255,g+=b,f/=256,u-=8);t[r+g-b]|=l*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(t){var e=requireBase64Js(),r=requireIeee754(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=d,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var D=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(D,x),D.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function f(D){if(D>i)throw new RangeError('The value "'+D+'" is invalid for option "size"');var x=new Uint8Array(D);return Object.setPrototypeOf(x,a.prototype),x}function a(D,x,R){if(typeof D=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(D)}return o(D,x,R)}a.poolSize=8192;function o(D,x,R){if(typeof D=="string")return v(D,x);if(ArrayBuffer.isView(D))return b(D);if(D==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D);if(te(D,ArrayBuffer)||D&&te(D.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(te(D,SharedArrayBuffer)||D&&te(D.buffer,SharedArrayBuffer)))return l(D,x,R);if(typeof D=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var G=D.valueOf&&D.valueOf();if(G!=null&&G!==D)return a.from(G,x,R);var ie=_(D);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof D[Symbol.toPrimitive]=="function")return a.from(D[Symbol.toPrimitive]("string"),x,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}a.from=function(D,x,R){return o(D,x,R)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(D){if(typeof D!="number")throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function y(D,x,R){return u(D),D<=0?f(D):x!==void 0?typeof R=="string"?f(D).fill(x,R):f(D).fill(x):f(D)}a.alloc=function(D,x,R){return y(D,x,R)};function w(D){return u(D),f(D<0?0:h(D)|0)}a.allocUnsafe=function(D){return w(D)},a.allocUnsafeSlow=function(D){return w(D)};function v(D,x){if((typeof x!="string"||x==="")&&(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);var R=c(D,x)|0,G=f(R),ie=G.write(D,x);return ie!==R&&(G=G.slice(0,ie)),G}function g(D){for(var x=D.length<0?0:h(D.length)|0,R=f(x),G=0;G<x;G+=1)R[G]=D[G]&255;return R}function b(D){if(te(D,Uint8Array)){var x=new Uint8Array(D);return l(x.buffer,x.byteOffset,x.byteLength)}return g(D)}function l(D,x,R){if(x<0||D.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(D.byteLength<x+(R||0))throw new RangeError('"length" is outside of buffer bounds');var G;return x===void 0&&R===void 0?G=new Uint8Array(D):R===void 0?G=new Uint8Array(D,x):G=new Uint8Array(D,x,R),Object.setPrototypeOf(G,a.prototype),G}function _(D){if(a.isBuffer(D)){var x=h(D.length)|0,R=f(x);return R.length===0||D.copy(R,0,0,x),R}if(D.length!==void 0)return typeof D.length!="number"||M(D.length)?f(0):g(D);if(D.type==="Buffer"&&Array.isArray(D.data))return g(D.data)}function h(D){if(D>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return D|0}function d(D){return+D!=D&&(D=0),a.alloc(+D)}a.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==a.prototype},a.compare=function(x,R){if(te(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),te(R,Uint8Array)&&(R=a.from(R,R.offset,R.byteLength)),!a.isBuffer(x)||!a.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===R)return 0;for(var G=x.length,ie=R.length,ae=0,se=Math.min(G,ie);ae<se;++ae)if(x[ae]!==R[ae]){G=x[ae],ie=R[ae];break}return G<ie?-1:ie<G?1:0},a.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(x,R){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return a.alloc(0);var G;if(R===void 0)for(R=0,G=0;G<x.length;++G)R+=x[G].length;var ie=a.allocUnsafe(R),ae=0;for(G=0;G<x.length;++G){var se=x[G];if(te(se,Uint8Array))ae+se.length>ie.length?a.from(se).copy(ie,ae):Uint8Array.prototype.set.call(ie,se,ae);else if(a.isBuffer(se))se.copy(ie,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=se.length}return ie};function c(D,x){if(a.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||te(D,ArrayBuffer))return D.byteLength;if(typeof D!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);var R=D.length,G=arguments.length>2&&arguments[2]===!0;if(!G&&R===0)return 0;for(var ie=!1;;)switch(x){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return I(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return F(D).length;default:if(ie)return G?-1:I(D).length;x=(""+x).toLowerCase(),ie=!0}}a.byteLength=c;function p(D,x,R){var G=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,x>>>=0,R<=x))return"";for(D||(D="utf8");;)switch(D){case"hex":return X(this,x,R);case"utf8":case"utf-8":return C(this,x,R);case"ascii":return N(this,x,R);case"latin1":case"binary":return Y(this,x,R);case"base64":return q(this,x,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,x,R);default:if(G)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),G=!0}}a.prototype._isBuffer=!0;function m(D,x,R){var G=D[x];D[x]=D[R],D[R]=G}a.prototype.swap16=function(){var x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<x;R+=2)m(this,R,R+1);return this},a.prototype.swap32=function(){var x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<x;R+=4)m(this,R,R+3),m(this,R+1,R+2);return this},a.prototype.swap64=function(){var x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<x;R+=8)m(this,R,R+7),m(this,R+1,R+6),m(this,R+2,R+5),m(this,R+3,R+4);return this},a.prototype.toString=function(){var x=this.length;return x===0?"":arguments.length===0?C(this,0,x):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(x){if(!a.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:a.compare(this,x)===0},a.prototype.inspect=function(){var x="",R=t.INSPECT_MAX_BYTES;return x=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(x+=" ... "),"<Buffer "+x+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(x,R,G,ie,ae){if(te(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(R===void 0&&(R=0),G===void 0&&(G=x?x.length:0),ie===void 0&&(ie=0),ae===void 0&&(ae=this.length),R<0||G>x.length||ie<0||ae>this.length)throw new RangeError("out of range index");if(ie>=ae&&R>=G)return 0;if(ie>=ae)return-1;if(R>=G)return 1;if(R>>>=0,G>>>=0,ie>>>=0,ae>>>=0,this===x)return 0;for(var se=ae-ie,ue=G-R,le=Math.min(se,ue),de=this.slice(ie,ae),he=x.slice(R,G),ge=0;ge<le;++ge)if(de[ge]!==he[ge]){se=de[ge],ue=he[ge];break}return se<ue?-1:ue<se?1:0};function S(D,x,R,G,ie){if(D.length===0)return-1;if(typeof R=="string"?(G=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,M(R)&&(R=ie?0:D.length-1),R<0&&(R=D.length+R),R>=D.length){if(ie)return-1;R=D.length-1}else if(R<0)if(ie)R=0;else return-1;if(typeof x=="string"&&(x=a.from(x,G)),a.isBuffer(x))return x.length===0?-1:E(D,x,R,G,ie);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(D,x,R):Uint8Array.prototype.lastIndexOf.call(D,x,R):E(D,[x],R,G,ie);throw new TypeError("val must be string, number or Buffer")}function E(D,x,R,G,ie){var ae=1,se=D.length,ue=x.length;if(G!==void 0&&(G=String(G).toLowerCase(),G==="ucs2"||G==="ucs-2"||G==="utf16le"||G==="utf-16le")){if(D.length<2||x.length<2)return-1;ae=2,se/=2,ue/=2,R/=2}function le(Re,Pe){return ae===1?Re[Pe]:Re.readUInt16BE(Pe*ae)}var de;if(ie){var he=-1;for(de=R;de<se;de++)if(le(D,de)===le(x,he===-1?0:de-he)){if(he===-1&&(he=de),de-he+1===ue)return he*ae}else he!==-1&&(de-=de-he),he=-1}else for(R+ue>se&&(R=se-ue),de=R;de>=0;de--){for(var ge=!0,be=0;be<ue;be++)if(le(D,de+be)!==le(x,be)){ge=!1;break}if(ge)return de}return-1}a.prototype.includes=function(x,R,G){return this.indexOf(x,R,G)!==-1},a.prototype.indexOf=function(x,R,G){return S(this,x,R,G,!0)},a.prototype.lastIndexOf=function(x,R,G){return S(this,x,R,G,!1)};function T(D,x,R,G){R=Number(R)||0;var ie=D.length-R;G?(G=Number(G),G>ie&&(G=ie)):G=ie;var ae=x.length;G>ae/2&&(G=ae/2);for(var se=0;se<G;++se){var ue=parseInt(x.substr(se*2,2),16);if(M(ue))return se;D[R+se]=ue}return se}function A(D,x,R,G){return K(I(x,D.length-R),D,R,G)}function P(D,x,R,G){return K(k(x),D,R,G)}function H(D,x,R,G){return K(F(x),D,R,G)}function O(D,x,R,G){return K(B(x,D.length-R),D,R,G)}a.prototype.write=function(x,R,G,ie){if(R===void 0)ie="utf8",G=this.length,R=0;else if(G===void 0&&typeof R=="string")ie=R,G=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(G)?(G=G>>>0,ie===void 0&&(ie="utf8")):(ie=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ae=this.length-R;if((G===void 0||G>ae)&&(G=ae),x.length>0&&(G<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");for(var se=!1;;)switch(ie){case"hex":return T(this,x,R,G);case"utf8":case"utf-8":return A(this,x,R,G);case"ascii":case"latin1":case"binary":return P(this,x,R,G);case"base64":return H(this,x,R,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,x,R,G);default:if(se)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),se=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function q(D,x,R){return x===0&&R===D.length?e.fromByteArray(D):e.fromByteArray(D.slice(x,R))}function C(D,x,R){R=Math.min(D.length,R);for(var G=[],ie=x;ie<R;){var ae=D[ie],se=null,ue=ae>239?4:ae>223?3:ae>191?2:1;if(ie+ue<=R){var le,de,he,ge;switch(ue){case 1:ae<128&&(se=ae);break;case 2:le=D[ie+1],(le&192)===128&&(ge=(ae&31)<<6|le&63,ge>127&&(se=ge));break;case 3:le=D[ie+1],de=D[ie+2],(le&192)===128&&(de&192)===128&&(ge=(ae&15)<<12|(le&63)<<6|de&63,ge>2047&&(ge<55296||ge>57343)&&(se=ge));break;case 4:le=D[ie+1],de=D[ie+2],he=D[ie+3],(le&192)===128&&(de&192)===128&&(he&192)===128&&(ge=(ae&15)<<18|(le&63)<<12|(de&63)<<6|he&63,ge>65535&&ge<1114112&&(se=ge))}}se===null?(se=65533,ue=1):se>65535&&(se-=65536,G.push(se>>>10&1023|55296),se=56320|se&1023),G.push(se),ie+=ue}return V(G)}var j=4096;function V(D){var x=D.length;if(x<=j)return String.fromCharCode.apply(String,D);for(var R="",G=0;G<x;)R+=String.fromCharCode.apply(String,D.slice(G,G+=j));return R}function N(D,x,R){var G="";R=Math.min(D.length,R);for(var ie=x;ie<R;++ie)G+=String.fromCharCode(D[ie]&127);return G}function Y(D,x,R){var G="";R=Math.min(D.length,R);for(var ie=x;ie<R;++ie)G+=String.fromCharCode(D[ie]);return G}function X(D,x,R){var G=D.length;(!x||x<0)&&(x=0),(!R||R<0||R>G)&&(R=G);for(var ie="",ae=x;ae<R;++ae)ie+=ne[D[ae]];return ie}function J(D,x,R){for(var G=D.slice(x,R),ie="",ae=0;ae<G.length-1;ae+=2)ie+=String.fromCharCode(G[ae]+G[ae+1]*256);return ie}a.prototype.slice=function(x,R){var G=this.length;x=~~x,R=R===void 0?G:~~R,x<0?(x+=G,x<0&&(x=0)):x>G&&(x=G),R<0?(R+=G,R<0&&(R=0)):R>G&&(R=G),R<x&&(R=x);var ie=this.subarray(x,R);return Object.setPrototypeOf(ie,a.prototype),ie};function Q(D,x,R){if(D%1!==0||D<0)throw new RangeError("offset is not uint");if(D+x>R)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(x,R,G){x=x>>>0,R=R>>>0,G||Q(x,R,this.length);for(var ie=this[x],ae=1,se=0;++se<R&&(ae*=256);)ie+=this[x+se]*ae;return ie},a.prototype.readUintBE=a.prototype.readUIntBE=function(x,R,G){x=x>>>0,R=R>>>0,G||Q(x,R,this.length);for(var ie=this[x+--R],ae=1;R>0&&(ae*=256);)ie+=this[x+--R]*ae;return ie},a.prototype.readUint8=a.prototype.readUInt8=function(x,R){return x=x>>>0,R||Q(x,1,this.length),this[x]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(x,R){return x=x>>>0,R||Q(x,2,this.length),this[x]|this[x+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(x,R){return x=x>>>0,R||Q(x,2,this.length),this[x]<<8|this[x+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(x,R){return x=x>>>0,R||Q(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(x,R){return x=x>>>0,R||Q(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},a.prototype.readIntLE=function(x,R,G){x=x>>>0,R=R>>>0,G||Q(x,R,this.length);for(var ie=this[x],ae=1,se=0;++se<R&&(ae*=256);)ie+=this[x+se]*ae;return ae*=128,ie>=ae&&(ie-=Math.pow(2,8*R)),ie},a.prototype.readIntBE=function(x,R,G){x=x>>>0,R=R>>>0,G||Q(x,R,this.length);for(var ie=R,ae=1,se=this[x+--ie];ie>0&&(ae*=256);)se+=this[x+--ie]*ae;return ae*=128,se>=ae&&(se-=Math.pow(2,8*R)),se},a.prototype.readInt8=function(x,R){return x=x>>>0,R||Q(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},a.prototype.readInt16LE=function(x,R){x=x>>>0,R||Q(x,2,this.length);var G=this[x]|this[x+1]<<8;return G&32768?G|4294901760:G},a.prototype.readInt16BE=function(x,R){x=x>>>0,R||Q(x,2,this.length);var G=this[x+1]|this[x]<<8;return G&32768?G|4294901760:G},a.prototype.readInt32LE=function(x,R){return x=x>>>0,R||Q(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},a.prototype.readInt32BE=function(x,R){return x=x>>>0,R||Q(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},a.prototype.readFloatLE=function(x,R){return x=x>>>0,R||Q(x,4,this.length),r.read(this,x,!0,23,4)},a.prototype.readFloatBE=function(x,R){return x=x>>>0,R||Q(x,4,this.length),r.read(this,x,!1,23,4)},a.prototype.readDoubleLE=function(x,R){return x=x>>>0,R||Q(x,8,this.length),r.read(this,x,!0,52,8)},a.prototype.readDoubleBE=function(x,R){return x=x>>>0,R||Q(x,8,this.length),r.read(this,x,!1,52,8)};function W(D,x,R,G,ie,ae){if(!a.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>ie||x<ae)throw new RangeError('"value" argument is out of bounds');if(R+G>D.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(x,R,G,ie){if(x=+x,R=R>>>0,G=G>>>0,!ie){var ae=Math.pow(2,8*G)-1;W(this,x,R,G,ae,0)}var se=1,ue=0;for(this[R]=x&255;++ue<G&&(se*=256);)this[R+ue]=x/se&255;return R+G},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(x,R,G,ie){if(x=+x,R=R>>>0,G=G>>>0,!ie){var ae=Math.pow(2,8*G)-1;W(this,x,R,G,ae,0)}var se=G-1,ue=1;for(this[R+se]=x&255;--se>=0&&(ue*=256);)this[R+se]=x/ue&255;return R+G},a.prototype.writeUint8=a.prototype.writeUInt8=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,1,255,0),this[R]=x&255,R+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,2,65535,0),this[R]=x&255,this[R+1]=x>>>8,R+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,2,65535,0),this[R]=x>>>8,this[R+1]=x&255,R+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,4,4294967295,0),this[R+3]=x>>>24,this[R+2]=x>>>16,this[R+1]=x>>>8,this[R]=x&255,R+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,4,4294967295,0),this[R]=x>>>24,this[R+1]=x>>>16,this[R+2]=x>>>8,this[R+3]=x&255,R+4},a.prototype.writeIntLE=function(x,R,G,ie){if(x=+x,R=R>>>0,!ie){var ae=Math.pow(2,8*G-1);W(this,x,R,G,ae-1,-ae)}var se=0,ue=1,le=0;for(this[R]=x&255;++se<G&&(ue*=256);)x<0&&le===0&&this[R+se-1]!==0&&(le=1),this[R+se]=(x/ue>>0)-le&255;return R+G},a.prototype.writeIntBE=function(x,R,G,ie){if(x=+x,R=R>>>0,!ie){var ae=Math.pow(2,8*G-1);W(this,x,R,G,ae-1,-ae)}var se=G-1,ue=1,le=0;for(this[R+se]=x&255;--se>=0&&(ue*=256);)x<0&&le===0&&this[R+se+1]!==0&&(le=1),this[R+se]=(x/ue>>0)-le&255;return R+G},a.prototype.writeInt8=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,1,127,-128),x<0&&(x=255+x+1),this[R]=x&255,R+1},a.prototype.writeInt16LE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,2,32767,-32768),this[R]=x&255,this[R+1]=x>>>8,R+2},a.prototype.writeInt16BE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,2,32767,-32768),this[R]=x>>>8,this[R+1]=x&255,R+2},a.prototype.writeInt32LE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,4,2147483647,-2147483648),this[R]=x&255,this[R+1]=x>>>8,this[R+2]=x>>>16,this[R+3]=x>>>24,R+4},a.prototype.writeInt32BE=function(x,R,G){return x=+x,R=R>>>0,G||W(this,x,R,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[R]=x>>>24,this[R+1]=x>>>16,this[R+2]=x>>>8,this[R+3]=x&255,R+4};function U(D,x,R,G,ie,ae){if(R+G>D.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function $(D,x,R,G,ie){return x=+x,R=R>>>0,ie||U(D,x,R,4),r.write(D,x,R,G,23,4),R+4}a.prototype.writeFloatLE=function(x,R,G){return $(this,x,R,!0,G)},a.prototype.writeFloatBE=function(x,R,G){return $(this,x,R,!1,G)};function ee(D,x,R,G,ie){return x=+x,R=R>>>0,ie||U(D,x,R,8),r.write(D,x,R,G,52,8),R+8}a.prototype.writeDoubleLE=function(x,R,G){return ee(this,x,R,!0,G)},a.prototype.writeDoubleBE=function(x,R,G){return ee(this,x,R,!1,G)},a.prototype.copy=function(x,R,G,ie){if(!a.isBuffer(x))throw new TypeError("argument should be a Buffer");if(G||(G=0),!ie&&ie!==0&&(ie=this.length),R>=x.length&&(R=x.length),R||(R=0),ie>0&&ie<G&&(ie=G),ie===G||x.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),x.length-R<ie-G&&(ie=x.length-R+G);var ae=ie-G;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,G,ie):Uint8Array.prototype.set.call(x,this.subarray(G,ie),R),ae},a.prototype.fill=function(x,R,G,ie){if(typeof x=="string"){if(typeof R=="string"?(ie=R,R=0,G=this.length):typeof G=="string"&&(ie=G,G=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(x.length===1){var ae=x.charCodeAt(0);(ie==="utf8"&&ae<128||ie==="latin1")&&(x=ae)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(R<0||this.length<R||this.length<G)throw new RangeError("Out of range index");if(G<=R)return this;R=R>>>0,G=G===void 0?this.length:G>>>0,x||(x=0);var se;if(typeof x=="number")for(se=R;se<G;++se)this[se]=x;else{var ue=a.isBuffer(x)?x:a.from(x,ie),le=ue.length;if(le===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(se=0;se<G-R;++se)this[se+R]=ue[se%le]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function L(D){if(D=D.split("=")[0],D=D.trim().replace(Z,""),D.length<2)return"";for(;D.length%4!==0;)D=D+"=";return D}function I(D,x){x=x||1/0;for(var R,G=D.length,ie=null,ae=[],se=0;se<G;++se){if(R=D.charCodeAt(se),R>55295&&R<57344){if(!ie){if(R>56319){(x-=3)>-1&&ae.push(239,191,189);continue}else if(se+1===G){(x-=3)>-1&&ae.push(239,191,189);continue}ie=R;continue}if(R<56320){(x-=3)>-1&&ae.push(239,191,189),ie=R;continue}R=(ie-55296<<10|R-56320)+65536}else ie&&(x-=3)>-1&&ae.push(239,191,189);if(ie=null,R<128){if((x-=1)<0)break;ae.push(R)}else if(R<2048){if((x-=2)<0)break;ae.push(R>>6|192,R&63|128)}else if(R<65536){if((x-=3)<0)break;ae.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((x-=4)<0)break;ae.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return ae}function k(D){for(var x=[],R=0;R<D.length;++R)x.push(D.charCodeAt(R)&255);return x}function B(D,x){for(var R,G,ie,ae=[],se=0;se<D.length&&!((x-=2)<0);++se)R=D.charCodeAt(se),G=R>>8,ie=R%256,ae.push(ie),ae.push(G);return ae}function F(D){return e.toByteArray(L(D))}function K(D,x,R,G){for(var ie=0;ie<G&&!(ie+R>=x.length||ie>=D.length);++ie)x[ie+R]=D[ie];return ie}function te(D,x){return D instanceof x||D!=null&&D.constructor!=null&&D.constructor.name!=null&&D.constructor.name===x.name}function M(D){return D!==D}var ne=function(){for(var D="0123456789abcdef",x=new Array(256),R=0;R<16;++R)for(var G=R*16,ie=0;ie<16;++ie)x[G+ie]=D[R]+D[ie];return x}()}(buffer)),buffer}var util={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,r);if(f.value!==i||f.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var t={__proto__:null,foo:{}},e=Object;return hasProto=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof e)},hasProto}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,n="[object Function]",i=function(o,u){for(var y=[],w=0;w<o.length;w+=1)y[w]=o[w];for(var v=0;v<u.length;v+=1)y[v+o.length]=u[v];return y},s=function(o,u){for(var y=[],w=u,v=0;w<o.length;w+=1,v+=1)y[v]=o[w];return y},f=function(a,o){for(var u="",y=0;y<a.length;y+=1)u+=a[y],y+1<a.length&&(u+=o);return u};return implementation=function(o){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(t+u);for(var y=s(arguments,1),w,v=function(){if(this instanceof w){var h=u.apply(this,i(y,arguments));return Object(h)===h?h:this}return u.apply(o,i(y,arguments))},g=r(0,u.length-y.length),b=[],l=0;l<g;l++)b[l]="$"+l;if(w=Function("binder","return function ("+f(b,",")+"){ return binder.apply(this,arguments); }")(v),u.prototype){var _=function(){};_.prototype=u.prototype,w.prototype=new _,_.prototype=null}return w},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation();return functionBind=Function.prototype.bind||t,functionBind}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=requireFunctionBind();return hasown=r.call(t,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=requireEsErrors(),r=require_eval(),n=requireRange(),i=requireRef(),s=requireSyntax(),f=requireType(),a=requireUri(),o=Function,u=function(N){try{return o('"use strict"; return ('+N+").constructor;")()}catch{}},y=Object.getOwnPropertyDescriptor;if(y)try{y({},"")}catch{y=null}var w=function(){throw new f},v=y?function(){try{return arguments.callee,w}catch{try{return y(arguments,"callee").get}catch{return w}}}():w,g=requireHasSymbols()(),b=requireHasProto()(),l=Object.getPrototypeOf||(b?function(N){return N.__proto__}:null),_={},h=typeof Uint8Array>"u"||!l?t:l(Uint8Array),d={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":g&&l?l([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":r,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":_,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&l?l(l([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!l?t:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!l?t:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&l?l(""[Symbol.iterator]()):t,"%Symbol%":g?Symbol:t,"%SyntaxError%":s,"%ThrowTypeError%":v,"%TypedArray%":h,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet};if(l)try{null.error}catch(N){var c=l(l(N));d["%Error.prototype%"]=c}var p=function N(Y){var X;if(Y==="%AsyncFunction%")X=u("async function () {}");else if(Y==="%GeneratorFunction%")X=u("function* () {}");else if(Y==="%AsyncGeneratorFunction%")X=u("async function* () {}");else if(Y==="%AsyncGenerator%"){var J=N("%AsyncGeneratorFunction%");J&&(X=J.prototype)}else if(Y==="%AsyncIteratorPrototype%"){var Q=N("%AsyncGenerator%");Q&&l&&(X=l(Q.prototype))}return d[Y]=X,X},m={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S=requireFunctionBind(),E=requireHasown(),T=S.call(Function.call,Array.prototype.concat),A=S.call(Function.apply,Array.prototype.splice),P=S.call(Function.call,String.prototype.replace),H=S.call(Function.call,String.prototype.slice),O=S.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,C=/\\(\\)?/g,j=function(Y){var X=H(Y,0,1),J=H(Y,-1);if(X==="%"&&J!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&X!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var Q=[];return P(Y,q,function(W,U,$,ee){Q[Q.length]=$?P(ee,C,"$1"):U||W}),Q},V=function(Y,X){var J=Y,Q;if(E(m,J)&&(Q=m[J],J="%"+Q[0]+"%"),E(d,J)){var W=d[J];if(W===_&&(W=p(J)),typeof W>"u"&&!X)throw new f("intrinsic "+Y+" exists, but is not available. Please file an issue!");return{alias:Q,name:J,value:W}}throw new s("intrinsic "+Y+" does not exist!")};return getIntrinsic=function(Y,X){if(typeof Y!="string"||Y.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof X!="boolean")throw new f('"allowMissing" argument must be a boolean');if(O(/^%?[^%]*%?$/,Y)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var J=j(Y),Q=J.length>0?J[0]:"",W=V("%"+Q+"%",X),U=W.name,$=W.value,ee=!1,Z=W.alias;Z&&(Q=Z[0],A(J,T([0,1],Z)));for(var L=1,I=!0;L<J.length;L+=1){var k=J[L],B=H(k,0,1),F=H(k,-1);if((B==='"'||B==="'"||B==="`"||F==='"'||F==="'"||F==="`")&&B!==F)throw new s("property names with quotes must have matching quotes");if((k==="constructor"||!I)&&(ee=!0),Q+="."+k,U="%"+Q+"%",E(d,U))$=d[U];else if($!=null){if(!(k in $)){if(!X)throw new f("base intrinsic for "+Y+" exists, but the property is not available.");return}if(y&&L+1>=J.length){var K=y($,k);I=!!K,I&&"get"in K&&!("originalValue"in K.get)?$=K.get:$=$[k]}else I=E($,k),$=$[k];I&&!ee&&(d[U]=$)}}return $},getIntrinsic}var callBind={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=requireGetIntrinsic(),e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return esDefineProperty=e,esDefineProperty}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var t=requireGetIntrinsic(),e=t("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return gopd=e,gopd}var defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var t=requireEsDefineProperty(),e=requireSyntax(),r=requireType(),n=requireGopd();return defineDataProperty=function(s,f,a){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`obj` must be an object or a function`");if(typeof f!="string"&&typeof f!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,y=arguments.length>5?arguments[5]:null,w=arguments.length>6?arguments[6]:!1,v=!!n&&n(s,f);if(t)t(s,f,{configurable:y===null&&v?v.configurable:!y,enumerable:o===null&&v?v.enumerable:!o,value:a,writable:u===null&&v?v.writable:!u});else if(w||!o&&!u&&!y)s[f]=a;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var t=requireEsDefineProperty(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var t=requireGetIntrinsic(),e=requireDefineDataProperty(),r=requireHasPropertyDescriptors()(),n=requireGopd(),i=requireType(),s=t("%Math.floor%");return setFunctionLength=function(a,o){if(typeof a!="function")throw new i("`fn` is not a function");if(typeof o!="number"||o<0||o>4294967295||s(o)!==o)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],y=!0,w=!0;if("length"in a&&n){var v=n(a,"length");v&&!v.configurable&&(y=!1),v&&!v.writable&&(w=!1)}return(y||w||!u)&&(r?e(a,"length",o,!0,!0):e(a,"length",o)),a},setFunctionLength}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(t){var e=requireFunctionBind(),r=requireGetIntrinsic(),n=requireSetFunctionLength(),i=requireType(),s=r("%Function.prototype.apply%"),f=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(f,s),o=requireEsDefineProperty(),u=r("%Math.max%");t.exports=function(v){if(typeof v!="function")throw new i("a function is required");var g=a(e,f,arguments);return n(g,1+u(0,v.length-(arguments.length-1)),!0)};var y=function(){return a(e,s,arguments)};o?o(t.exports,"apply",{value:y}):t.exports.apply=y}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBind(),r=e(t("String.prototype.indexOf"));return callBound=function(i,s){var f=t(i,!!s);return typeof f=="function"&&r(i,".prototype.")>-1?e(f):f},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=requireShams()(),e=requireCallBound(),r=e("Object.prototype.toString"),n=function(a){return t&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:r(a)==="[object Arguments]"},i=function(a){return n(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&r(a)!=="[object Array]"&&r(a.callee)==="[object Function]"},s=function(){return n(arguments)}();return n.isLegacyArguments=i,isArguments=s?n:i,isArguments}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=Object.prototype.toString,e=Function.prototype.toString,r=/^\s*(?:function)?\*/,n=requireShams()(),i=Object.getPrototypeOf,s=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch{}},f;return isGeneratorFunction=function(o){if(typeof o!="function")return!1;if(r.test(e.call(o)))return!0;if(!n){var u=t.call(o);return u==="[object GeneratorFunction]"}if(!i)return!1;if(typeof f>"u"){var y=s();f=y?i(y):!1}return i(o)===f},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,r,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,r)}catch(d){d!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(c){try{var p=t.call(c);return i.test(p)}catch{return!1}},f=function(c){try{return s(c)?!1:(t.call(c),!0)}catch{return!1}},a=Object.prototype.toString,o="[object Object]",u="[object Function]",y="[object GeneratorFunction]",w="[object HTMLAllCollection]",v="[object HTML document.all class]",g="[object HTMLCollection]",b=typeof Symbol=="function"&&!!Symbol.toStringTag,l=!(0 in[,]),_=function(){return!1};if(typeof document=="object"){var h=document.all;a.call(h)===a.call(document.all)&&(_=function(c){if((l||!c)&&(typeof c>"u"||typeof c=="object"))try{var p=a.call(c);return(p===w||p===v||p===g||p===o)&&c("")==null}catch{}return!1})}return isCallable=e?function(c){if(_(c))return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;try{e(c,null,r)}catch(p){if(p!==n)return!1}return!s(c)&&f(c)}:function(c){if(_(c))return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(b)return f(c);if(s(c))return!1;var p=a.call(c);return p!==u&&p!==y&&!/^\[object HTML/.test(p)?!1:f(c)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=function(o,u,y){for(var w=0,v=o.length;w<v;w++)r.call(o,w)&&(y==null?u(o[w],w,o):u.call(y,o[w],w,o))},i=function(o,u,y){for(var w=0,v=o.length;w<v;w++)y==null?u(o.charAt(w),w,o):u.call(y,o.charAt(w),w,o)},s=function(o,u,y){for(var w in o)r.call(o,w)&&(y==null?u(o[w],w,o):u.call(y,o[w],w,o))},f=function(o,u,y){if(!t(u))throw new TypeError("iterator must be a function");var w;arguments.length>=3&&(w=y),e.call(o)==="[object Array]"?n(o,u,w):typeof o=="string"?i(o,u,w):s(o,u,w)};return forEach_1=f,forEach_1}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var n=[],i=0;i<t.length;i++)typeof e[t[i]]=="function"&&(n[n.length]=t[i]);return n},availableTypedArrays}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),r=requireCallBind(),n=requireCallBound(),i=requireGopd(),s=n("Object.prototype.toString"),f=requireShams()(),a=typeof globalThis>"u"?commonjsGlobal:globalThis,o=e(),u=n("String.prototype.slice"),y=Object.getPrototypeOf,w=n("Array.prototype.indexOf",!0)||function(_,h){for(var d=0;d<_.length;d+=1)if(_[d]===h)return d;return-1},v={__proto__:null};f&&i&&y?t(o,function(l){var _=new a[l];if(Symbol.toStringTag in _){var h=y(_),d=i(h,Symbol.toStringTag);if(!d){var c=y(h);d=i(c,Symbol.toStringTag)}v["$"+l]=r(d.get)}}):t(o,function(l){var _=new a[l],h=_.slice||_.set;h&&(v["$"+l]=r(h))});var g=function(_){var h=!1;return t(v,function(d,c){if(!h)try{"$"+d(_)===c&&(h=u(c,1))}catch{}}),h},b=function(_){var h=!1;return t(v,function(d,c){if(!h)try{d(_),h=u(c,1)}catch{}}),h};return whichTypedArray=function(_){if(!_||typeof _!="object")return!1;if(!f){var h=u(s(_),8,-1);return w(o,h)>-1?h:h!=="Object"?!1:b(_)}return i?g(_):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var t=requireWhichTypedArray();return isTypedArray=function(r){return!!t(r)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(t){var e=requireIsArguments(),r=requireIsGeneratorFunction(),n=requireWhichTypedArray(),i=requireIsTypedArray();function s(G){return G.call.bind(G)}var f=typeof BigInt<"u",a=typeof Symbol<"u",o=s(Object.prototype.toString),u=s(Number.prototype.valueOf),y=s(String.prototype.valueOf),w=s(Boolean.prototype.valueOf);if(f)var v=s(BigInt.prototype.valueOf);if(a)var g=s(Symbol.prototype.valueOf);function b(G,ie){if(typeof G!="object")return!1;try{return ie(G),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i;function l(G){return typeof Promise<"u"&&G instanceof Promise||G!==null&&typeof G=="object"&&typeof G.then=="function"&&typeof G.catch=="function"}t.isPromise=l;function _(G){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(G):i(G)||U(G)}t.isArrayBufferView=_;function h(G){return n(G)==="Uint8Array"}t.isUint8Array=h;function d(G){return n(G)==="Uint8ClampedArray"}t.isUint8ClampedArray=d;function c(G){return n(G)==="Uint16Array"}t.isUint16Array=c;function p(G){return n(G)==="Uint32Array"}t.isUint32Array=p;function m(G){return n(G)==="Int8Array"}t.isInt8Array=m;function S(G){return n(G)==="Int16Array"}t.isInt16Array=S;function E(G){return n(G)==="Int32Array"}t.isInt32Array=E;function T(G){return n(G)==="Float32Array"}t.isFloat32Array=T;function A(G){return n(G)==="Float64Array"}t.isFloat64Array=A;function P(G){return n(G)==="BigInt64Array"}t.isBigInt64Array=P;function H(G){return n(G)==="BigUint64Array"}t.isBigUint64Array=H;function O(G){return o(G)==="[object Map]"}O.working=typeof Map<"u"&&O(new Map);function q(G){return typeof Map>"u"?!1:O.working?O(G):G instanceof Map}t.isMap=q;function C(G){return o(G)==="[object Set]"}C.working=typeof Set<"u"&&C(new Set);function j(G){return typeof Set>"u"?!1:C.working?C(G):G instanceof Set}t.isSet=j;function V(G){return o(G)==="[object WeakMap]"}V.working=typeof WeakMap<"u"&&V(new WeakMap);function N(G){return typeof WeakMap>"u"?!1:V.working?V(G):G instanceof WeakMap}t.isWeakMap=N;function Y(G){return o(G)==="[object WeakSet]"}Y.working=typeof WeakSet<"u"&&Y(new WeakSet);function X(G){return Y(G)}t.isWeakSet=X;function J(G){return o(G)==="[object ArrayBuffer]"}J.working=typeof ArrayBuffer<"u"&&J(new ArrayBuffer);function Q(G){return typeof ArrayBuffer>"u"?!1:J.working?J(G):G instanceof ArrayBuffer}t.isArrayBuffer=Q;function W(G){return o(G)==="[object DataView]"}W.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&W(new DataView(new ArrayBuffer(1),0,1));function U(G){return typeof DataView>"u"?!1:W.working?W(G):G instanceof DataView}t.isDataView=U;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ee(G){return o(G)==="[object SharedArrayBuffer]"}function Z(G){return typeof $>"u"?!1:(typeof ee.working>"u"&&(ee.working=ee(new $)),ee.working?ee(G):G instanceof $)}t.isSharedArrayBuffer=Z;function L(G){return o(G)==="[object AsyncFunction]"}t.isAsyncFunction=L;function I(G){return o(G)==="[object Map Iterator]"}t.isMapIterator=I;function k(G){return o(G)==="[object Set Iterator]"}t.isSetIterator=k;function B(G){return o(G)==="[object Generator]"}t.isGeneratorObject=B;function F(G){return o(G)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=F;function K(G){return b(G,u)}t.isNumberObject=K;function te(G){return b(G,y)}t.isStringObject=te;function M(G){return b(G,w)}t.isBooleanObject=M;function ne(G){return f&&b(G,v)}t.isBigIntObject=ne;function D(G){return a&&b(G,g)}t.isSymbolObject=D;function x(G){return K(G)||te(G)||M(G)||ne(G)||D(G)}t.isBoxedPrimitive=x;function R(G){return typeof Uint8Array<"u"&&(Q(G)||Z(G))}t.isAnyArrayBuffer=R,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(G){Object.defineProperty(t,G,{enumerable:!1,value:function(){throw new Error(G+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(t){var e=Object.getOwnPropertyDescriptors||function(U){for(var $=Object.keys(U),ee={},Z=0;Z<$.length;Z++)ee[$[Z]]=Object.getOwnPropertyDescriptor(U,$[Z]);return ee},r=/%[sdj%]/g;t.format=function(W){if(!m(W)){for(var U=[],$=0;$<arguments.length;$++)U.push(f(arguments[$]));return U.join(" ")}for(var $=1,ee=arguments,Z=ee.length,L=String(W).replace(r,function(k){if(k==="%%")return"%";if($>=Z)return k;switch(k){case"%s":return String(ee[$++]);case"%d":return Number(ee[$++]);case"%j":try{return JSON.stringify(ee[$++])}catch{return"[Circular]"}default:return k}}),I=ee[$];$<Z;I=ee[++$])d(I)||!A(I)?L+=" "+I:L+=" "+f(I);return L},t.deprecate=function(W,U){if(typeof process$1$1<"u"&&process$1$1.noDeprecation===!0)return W;if(typeof process$1$1>"u")return function(){return t.deprecate(W,U).apply(this,arguments)};var $=!1;function ee(){if(!$){if(process$1$1.throwDeprecation)throw new Error(U);process$1$1.traceDeprecation?console.trace(U):console.error(U),$=!0}return W.apply(this,arguments)}return ee};var n={},i=/^$/;if(process$1$1.env.NODE_DEBUG){var s=process$1$1.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}t.debuglog=function(W){if(W=W.toUpperCase(),!n[W])if(i.test(W)){var U=process$1$1.pid;n[W]=function(){var $=t.format.apply(t,arguments);console.error("%s %d: %s",W,U,$)}}else n[W]=function(){};return n[W]};function f(W,U){var $={seen:[],stylize:o};return arguments.length>=3&&($.depth=arguments[2]),arguments.length>=4&&($.colors=arguments[3]),h(U)?$.showHidden=U:U&&t._extend($,U),E($.showHidden)&&($.showHidden=!1),E($.depth)&&($.depth=2),E($.colors)&&($.colors=!1),E($.customInspect)&&($.customInspect=!0),$.colors&&($.stylize=a),y($,W,$.depth)}t.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(W,U){var $=f.styles[U];return $?"\x1B["+f.colors[$][0]+"m"+W+"\x1B["+f.colors[$][1]+"m":W}function o(W,U){return W}function u(W){var U={};return W.forEach(function($,ee){U[$]=!0}),U}function y(W,U,$){if(W.customInspect&&U&&O(U.inspect)&&U.inspect!==t.inspect&&!(U.constructor&&U.constructor.prototype===U)){var ee=U.inspect($,W);return m(ee)||(ee=y(W,ee,$)),ee}var Z=w(W,U);if(Z)return Z;var L=Object.keys(U),I=u(L);if(W.showHidden&&(L=Object.getOwnPropertyNames(U)),H(U)&&(L.indexOf("message")>=0||L.indexOf("description")>=0))return v(U);if(L.length===0){if(O(U)){var k=U.name?": "+U.name:"";return W.stylize("[Function"+k+"]","special")}if(T(U))return W.stylize(RegExp.prototype.toString.call(U),"regexp");if(P(U))return W.stylize(Date.prototype.toString.call(U),"date");if(H(U))return v(U)}var B="",F=!1,K=["{","}"];if(_(U)&&(F=!0,K=["[","]"]),O(U)){var te=U.name?": "+U.name:"";B=" [Function"+te+"]"}if(T(U)&&(B=" "+RegExp.prototype.toString.call(U)),P(U)&&(B=" "+Date.prototype.toUTCString.call(U)),H(U)&&(B=" "+v(U)),L.length===0&&(!F||U.length==0))return K[0]+B+K[1];if($<0)return T(U)?W.stylize(RegExp.prototype.toString.call(U),"regexp"):W.stylize("[Object]","special");W.seen.push(U);var M;return F?M=g(W,U,$,I,L):M=L.map(function(ne){return b(W,U,$,I,ne,F)}),W.seen.pop(),l(M,B,K)}function w(W,U){if(E(U))return W.stylize("undefined","undefined");if(m(U)){var $="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return W.stylize($,"string")}if(p(U))return W.stylize(""+U,"number");if(h(U))return W.stylize(""+U,"boolean");if(d(U))return W.stylize("null","null")}function v(W){return"["+Error.prototype.toString.call(W)+"]"}function g(W,U,$,ee,Z){for(var L=[],I=0,k=U.length;I<k;++I)Y(U,String(I))?L.push(b(W,U,$,ee,String(I),!0)):L.push("");return Z.forEach(function(B){B.match(/^\d+$/)||L.push(b(W,U,$,ee,B,!0))}),L}function b(W,U,$,ee,Z,L){var I,k,B;if(B=Object.getOwnPropertyDescriptor(U,Z)||{value:U[Z]},B.get?B.set?k=W.stylize("[Getter/Setter]","special"):k=W.stylize("[Getter]","special"):B.set&&(k=W.stylize("[Setter]","special")),Y(ee,Z)||(I="["+Z+"]"),k||(W.seen.indexOf(B.value)<0?(d($)?k=y(W,B.value,null):k=y(W,B.value,$-1),k.indexOf(`
`)>-1&&(L?k=k.split(`
`).map(function(F){return"  "+F}).join(`
`).slice(2):k=`
`+k.split(`
`).map(function(F){return"   "+F}).join(`
`))):k=W.stylize("[Circular]","special")),E(I)){if(L&&Z.match(/^\d+$/))return k;I=JSON.stringify(""+Z),I.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(I=I.slice(1,-1),I=W.stylize(I,"name")):(I=I.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),I=W.stylize(I,"string"))}return I+": "+k}function l(W,U,$){var ee=W.reduce(function(Z,L){return L.indexOf(`
`)>=0,Z+L.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?$[0]+(U===""?"":U+`
 `)+" "+W.join(`,
  `)+" "+$[1]:$[0]+U+" "+W.join(", ")+" "+$[1]}t.types=requireTypes();function _(W){return Array.isArray(W)}t.isArray=_;function h(W){return typeof W=="boolean"}t.isBoolean=h;function d(W){return W===null}t.isNull=d;function c(W){return W==null}t.isNullOrUndefined=c;function p(W){return typeof W=="number"}t.isNumber=p;function m(W){return typeof W=="string"}t.isString=m;function S(W){return typeof W=="symbol"}t.isSymbol=S;function E(W){return W===void 0}t.isUndefined=E;function T(W){return A(W)&&C(W)==="[object RegExp]"}t.isRegExp=T,t.types.isRegExp=T;function A(W){return typeof W=="object"&&W!==null}t.isObject=A;function P(W){return A(W)&&C(W)==="[object Date]"}t.isDate=P,t.types.isDate=P;function H(W){return A(W)&&(C(W)==="[object Error]"||W instanceof Error)}t.isError=H,t.types.isNativeError=H;function O(W){return typeof W=="function"}t.isFunction=O;function q(W){return W===null||typeof W=="boolean"||typeof W=="number"||typeof W=="string"||typeof W=="symbol"||typeof W>"u"}t.isPrimitive=q,t.isBuffer=requireIsBufferBrowser();function C(W){return Object.prototype.toString.call(W)}function j(W){return W<10?"0"+W.toString(10):W.toString(10)}var V=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var W=new Date,U=[j(W.getHours()),j(W.getMinutes()),j(W.getSeconds())].join(":");return[W.getDate(),V[W.getMonth()],U].join(" ")}t.log=function(){console.log("%s - %s",N(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(W,U){if(!U||!A(U))return W;for(var $=Object.keys(U),ee=$.length;ee--;)W[$[ee]]=U[$[ee]];return W};function Y(W,U){return Object.prototype.hasOwnProperty.call(W,U)}var X=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(U){if(typeof U!="function")throw new TypeError('The "original" argument must be of type Function');if(X&&U[X]){var $=U[X];if(typeof $!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty($,X,{value:$,enumerable:!1,writable:!1,configurable:!0}),$}function $(){for(var ee,Z,L=new Promise(function(B,F){ee=B,Z=F}),I=[],k=0;k<arguments.length;k++)I.push(arguments[k]);I.push(function(B,F){B?Z(B):ee(F)});try{U.apply(this,I)}catch(B){Z(B)}return L}return Object.setPrototypeOf($,Object.getPrototypeOf(U)),X&&Object.defineProperty($,X,{value:$,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties($,e(U))},t.promisify.custom=X;function J(W,U){if(!W){var $=new Error("Promise was rejected with a falsy value");$.reason=W,W=$}return U(W)}function Q(W){if(typeof W!="function")throw new TypeError('The "original" argument must be of type Function');function U(){for(var $=[],ee=0;ee<arguments.length;ee++)$.push(arguments[ee]);var Z=$.pop();if(typeof Z!="function")throw new TypeError("The last argument must be of type Function");var L=this,I=function(){return Z.apply(L,arguments)};W.apply(this,$).then(function(k){process$1$1.nextTick(I.bind(null,null,k))},function(k){process$1$1.nextTick(J.bind(null,k,I))})}return Object.setPrototypeOf(U,Object.getPrototypeOf(W)),Object.defineProperties(U,e(W)),U}t.callbackify=Q}(util)),util}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(v,g){var b=Object.keys(v);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(v);g&&(l=l.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),b.push.apply(b,l)}return b}function e(v){for(var g=1;g<arguments.length;g++){var b=arguments[g]!=null?arguments[g]:{};g%2?t(Object(b),!0).forEach(function(l){r(v,l,b[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(b)):t(Object(b)).forEach(function(l){Object.defineProperty(v,l,Object.getOwnPropertyDescriptor(b,l))})}return v}function r(v,g,b){return g in v?Object.defineProperty(v,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[g]=b,v}function n(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function i(v,g){for(var b=0;b<g.length;b++){var l=g[b];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(v,l.key,l)}}function s(v,g,b){return g&&i(v.prototype,g),v}var f=requireBuffer(),a=f.Buffer,o=requireUtil(),u=o.inspect,y=u&&u.custom||"inspect";function w(v,g,b){a.prototype.copy.call(v,g,b)}return buffer_list=function(){function v(){n(this,v),this.head=null,this.tail=null,this.length=0}return s(v,[{key:"push",value:function(b){var l={data:b,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(b){var l={data:b,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(this.length!==0){var b=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,b}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(b){if(this.length===0)return"";for(var l=this.head,_=""+l.data;l=l.next;)_+=b+l.data;return _}},{key:"concat",value:function(b){if(this.length===0)return a.alloc(0);for(var l=a.allocUnsafe(b>>>0),_=this.head,h=0;_;)w(_.data,l,h),h+=_.data.length,_=_.next;return l}},{key:"consume",value:function(b,l){var _;return b<this.head.data.length?(_=this.head.data.slice(0,b),this.head.data=this.head.data.slice(b)):b===this.head.data.length?_=this.shift():_=l?this._getString(b):this._getBuffer(b),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(b){var l=this.head,_=1,h=l.data;for(b-=h.length;l=l.next;){var d=l.data,c=b>d.length?d.length:b;if(c===d.length?h+=d:h+=d.slice(0,b),b-=c,b===0){c===d.length?(++_,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=d.slice(c));break}++_}return this.length-=_,h}},{key:"_getBuffer",value:function(b){var l=a.allocUnsafe(b),_=this.head,h=1;for(_.data.copy(l),b-=_.data.length;_=_.next;){var d=_.data,c=b>d.length?d.length:b;if(d.copy(l,l.length-b,0,c),b-=c,b===0){c===d.length?(++h,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=d.slice(c));break}++h}return this.length-=h,l}},{key:y,value:function(b,l){return u(this,e({},l,{depth:0,customInspect:!1}))}}]),v}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function t(f,a){var o=this,u=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return u||y?(a?a(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1$1.nextTick(i,this,f)):process$1$1.nextTick(i,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(w){!a&&w?o._writableState?o._writableState.errorEmitted?process$1$1.nextTick(r,o):(o._writableState.errorEmitted=!0,process$1$1.nextTick(e,o,w)):process$1$1.nextTick(e,o,w):a?(process$1$1.nextTick(r,o),a(w)):process$1$1.nextTick(r,o)}),this)}function e(f,a){i(f,a),r(f)}function r(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(f,a){f.emit("error",a)}function s(f,a){var o=f._readableState,u=f._writableState;o&&o.autoDestroy||u&&u.autoDestroy?f.destroy(a):f.emit("error",a)}return destroy_1={destroy:t,undestroy:n,errorOrDestroy:s},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var e={};function r(a,o,u){u||(u=Error);function y(v,g,b){return typeof o=="string"?o:o(v,g,b)}var w=function(v){t(g,v);function g(b,l,_){return v.call(this,y(b,l,_))||this}return g}(u);w.prototype.name=u.name,w.prototype.code=a,e[a]=w}function n(a,o){if(Array.isArray(a)){var u=a.length;return a=a.map(function(y){return String(y)}),u>2?"one of ".concat(o," ").concat(a.slice(0,u-1).join(", "),", or ")+a[u-1]:u===2?"one of ".concat(o," ").concat(a[0]," or ").concat(a[1]):"of ".concat(o," ").concat(a[0])}else return"of ".concat(o," ").concat(String(a))}function i(a,o,u){return a.substr(0,o.length)===o}function s(a,o,u){return(u===void 0||u>a.length)&&(u=a.length),a.substring(u-o.length,u)===o}function f(a,o,u){return typeof u!="number"&&(u=0),u+o.length>a.length?!1:a.indexOf(o,u)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,o){return'The value "'+o+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,o,u){var y;typeof o=="string"&&i(o,"not ")?(y="must not be",o=o.replace(/^not /,"")):y="must be";var w;if(s(a," argument"))w="The ".concat(a," ").concat(y," ").concat(n(o,"type"));else{var v=f(a,".")?"property":"argument";w='The "'.concat(a,'" ').concat(v," ").concat(y," ").concat(n(o,"type"))}return w+=". Received type ".concat(typeof u),w},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function r(n,i,s,f){var a=e(i,f,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var o=f?s:"highWaterMark";throw new t(o,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return state={getHighWaterMark:r},state}var browser$2,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$2;hasRequiredBrowser=1,browser$2=t;function t(r,n){if(e("noDeprecation"))return r;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return r.apply(this,arguments)}return s}function e(r){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var n=commonjsGlobal.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return browser$2}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=T;function t(Z){var L=this;this.next=null,this.entry=null,this.finish=function(){ee(L,Z)}}var e;T.WritableState=S;var r={deprecate:requireBrowser()},n=requireStreamBrowser(),i=requireBuffer().Buffer,s=commonjsGlobal.Uint8Array||function(){};function f(Z){return i.from(Z)}function a(Z){return i.isBuffer(Z)||Z instanceof s}var o=requireDestroy(),u=requireState(),y=u.getHighWaterMark,w=requireErrorsBrowser().codes,v=w.ERR_INVALID_ARG_TYPE,g=w.ERR_METHOD_NOT_IMPLEMENTED,b=w.ERR_MULTIPLE_CALLBACK,l=w.ERR_STREAM_CANNOT_PIPE,_=w.ERR_STREAM_DESTROYED,h=w.ERR_STREAM_NULL_VALUES,d=w.ERR_STREAM_WRITE_AFTER_END,c=w.ERR_UNKNOWN_ENCODING,p=o.errorOrDestroy;requireInherits_browser()(T,n);function m(){}function S(Z,L,I){e=e||require_stream_duplex(),Z=Z||{},typeof I!="boolean"&&(I=L instanceof e),this.objectMode=!!Z.objectMode,I&&(this.objectMode=this.objectMode||!!Z.writableObjectMode),this.highWaterMark=y(this,Z,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=Z.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(B){V(L,B)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Z.emitClose!==!1,this.autoDestroy=!!Z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}S.prototype.getBuffer=function(){for(var L=this.bufferedRequest,I=[];L;)I.push(L),L=L.next;return I},function(){try{Object.defineProperty(S.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var E;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(L){return E.call(this,L)?!0:this!==T?!1:L&&L._writableState instanceof S}})):E=function(L){return L instanceof this};function T(Z){e=e||require_stream_duplex();var L=this instanceof e;if(!L&&!E.call(T,this))return new T(Z);this._writableState=new S(Z,this,L),this.writable=!0,Z&&(typeof Z.write=="function"&&(this._write=Z.write),typeof Z.writev=="function"&&(this._writev=Z.writev),typeof Z.destroy=="function"&&(this._destroy=Z.destroy),typeof Z.final=="function"&&(this._final=Z.final)),n.call(this)}T.prototype.pipe=function(){p(this,new l)};function A(Z,L){var I=new d;p(Z,I),process$1$1.nextTick(L,I)}function P(Z,L,I,k){var B;return I===null?B=new h:typeof I!="string"&&!L.objectMode&&(B=new v("chunk",["string","Buffer"],I)),B?(p(Z,B),process$1$1.nextTick(k,B),!1):!0}T.prototype.write=function(Z,L,I){var k=this._writableState,B=!1,F=!k.objectMode&&a(Z);return F&&!i.isBuffer(Z)&&(Z=f(Z)),typeof L=="function"&&(I=L,L=null),F?L="buffer":L||(L=k.defaultEncoding),typeof I!="function"&&(I=m),k.ending?A(this,I):(F||P(this,k,Z,I))&&(k.pendingcb++,B=O(this,k,F,Z,L,I)),B},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var Z=this._writableState;Z.corked&&(Z.corked--,!Z.writing&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&X(this,Z))},T.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new c(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function H(Z,L,I){return!Z.objectMode&&Z.decodeStrings!==!1&&typeof L=="string"&&(L=i.from(L,I)),L}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(Z,L,I,k,B,F){if(!I){var K=H(L,k,B);k!==K&&(I=!0,B="buffer",k=K)}var te=L.objectMode?1:k.length;L.length+=te;var M=L.length<L.highWaterMark;if(M||(L.needDrain=!0),L.writing||L.corked){var ne=L.lastBufferedRequest;L.lastBufferedRequest={chunk:k,encoding:B,isBuf:I,callback:F,next:null},ne?ne.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else q(Z,L,!1,te,k,B,F);return M}function q(Z,L,I,k,B,F,K){L.writelen=k,L.writecb=K,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new _("write")):I?Z._writev(B,L.onwrite):Z._write(B,F,L.onwrite),L.sync=!1}function C(Z,L,I,k,B){--L.pendingcb,I?(process$1$1.nextTick(B,k),process$1$1.nextTick(U,Z,L),Z._writableState.errorEmitted=!0,p(Z,k)):(B(k),Z._writableState.errorEmitted=!0,p(Z,k),U(Z,L))}function j(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}function V(Z,L){var I=Z._writableState,k=I.sync,B=I.writecb;if(typeof B!="function")throw new b;if(j(I),L)C(Z,I,k,L,B);else{var F=J(I)||Z.destroyed;!F&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&X(Z,I),k?process$1$1.nextTick(N,Z,I,F,B):N(Z,I,F,B)}}function N(Z,L,I,k){I||Y(Z,L),L.pendingcb--,k(),U(Z,L)}function Y(Z,L){L.length===0&&L.needDrain&&(L.needDrain=!1,Z.emit("drain"))}function X(Z,L){L.bufferProcessing=!0;var I=L.bufferedRequest;if(Z._writev&&I&&I.next){var k=L.bufferedRequestCount,B=new Array(k),F=L.corkedRequestsFree;F.entry=I;for(var K=0,te=!0;I;)B[K]=I,I.isBuf||(te=!1),I=I.next,K+=1;B.allBuffers=te,q(Z,L,!0,L.length,B,"",F.finish),L.pendingcb++,L.lastBufferedRequest=null,F.next?(L.corkedRequestsFree=F.next,F.next=null):L.corkedRequestsFree=new t(L),L.bufferedRequestCount=0}else{for(;I;){var M=I.chunk,ne=I.encoding,D=I.callback,x=L.objectMode?1:M.length;if(q(Z,L,!1,x,M,ne,D),I=I.next,L.bufferedRequestCount--,L.writing)break}I===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=I,L.bufferProcessing=!1}T.prototype._write=function(Z,L,I){I(new g("_write()"))},T.prototype._writev=null,T.prototype.end=function(Z,L,I){var k=this._writableState;return typeof Z=="function"?(I=Z,Z=null,L=null):typeof L=="function"&&(I=L,L=null),Z!=null&&this.write(Z,L),k.corked&&(k.corked=1,this.uncork()),k.ending||$(this,k,I),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function J(Z){return Z.ending&&Z.length===0&&Z.bufferedRequest===null&&!Z.finished&&!Z.writing}function Q(Z,L){Z._final(function(I){L.pendingcb--,I&&p(Z,I),L.prefinished=!0,Z.emit("prefinish"),U(Z,L)})}function W(Z,L){!L.prefinished&&!L.finalCalled&&(typeof Z._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,process$1$1.nextTick(Q,Z,L)):(L.prefinished=!0,Z.emit("prefinish")))}function U(Z,L){var I=J(L);if(I&&(W(Z,L),L.pendingcb===0&&(L.finished=!0,Z.emit("finish"),L.autoDestroy))){var k=Z._readableState;(!k||k.autoDestroy&&k.endEmitted)&&Z.destroy()}return I}function $(Z,L,I){L.ending=!0,U(Z,L),I&&(L.finished?process$1$1.nextTick(I):Z.once("finish",I)),L.ended=!0,Z.writable=!1}function ee(Z,L,I){var k=Z.entry;for(Z.entry=null;k;){var B=k.callback;L.pendingcb--,B(I),k=k.next}L.corkedRequestsFree.next=Z}return Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),T.prototype.destroy=o.destroy,T.prototype._undestroy=o.undestroy,T.prototype._destroy=function(Z,L){L(Z)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(u){var y=[];for(var w in u)y.push(w);return y};_stream_duplex=f;var e=require_stream_readable(),r=require_stream_writable();requireInherits_browser()(f,e);for(var n=t(r.prototype),i=0;i<n.length;i++){var s=n[i];f.prototype[s]||(f.prototype[s]=r.prototype[s])}function f(u){if(!(this instanceof f))return new f(u);e.call(this,u),r.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process$1$1.nextTick(o,this)}function o(u){u.end()}return Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),_stream_duplex}var string_decoder={},safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(t,e){var r=requireBuffer(),n=r.Buffer;function i(f,a){for(var o in f)a[o]=f[o]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(f,a,o){return n(f,a,o)}i(n,s),s.from=function(f,a,o){if(typeof f=="number")throw new TypeError("Argument must not be a number");return n(f,a,o)},s.alloc=function(f,a,o){if(typeof f!="number")throw new TypeError("Argument must be a number");var u=n(f);return a!==void 0?typeof o=="string"?u.fill(a,o):u.fill(a):u.fill(0),u},s.allocUnsafe=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return n(f)},s.allocUnsafeSlow=function(f){if(typeof f!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(f)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer().Buffer,e=t.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(h){if(!h)return"utf8";for(var d;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(d)return;h=(""+h).toLowerCase(),d=!0}}function n(h){var d=r(h);if(typeof d!="string"&&(t.isEncoding===e||!e(h)))throw new Error("Unknown encoding: "+h);return d||h}string_decoder.StringDecoder=i;function i(h){this.encoding=n(h);var d;switch(this.encoding){case"utf16le":this.text=w,this.end=v,d=4;break;case"utf8":this.fillLast=o,d=4;break;case"base64":this.text=g,this.end=b,d=3;break;default:this.write=l,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(d)}i.prototype.write=function(h){if(h.length===0)return"";var d,c;if(this.lastNeed){if(d=this.fillLast(h),d===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<h.length?d?d+this.text(h,c):this.text(h,c):d||""},i.prototype.end=y,i.prototype.text=u,i.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function s(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function f(h,d,c){var p=d.length-1;if(p<c)return 0;var m=s(d[p]);return m>=0?(m>0&&(h.lastNeed=m-1),m):--p<c||m===-2?0:(m=s(d[p]),m>=0?(m>0&&(h.lastNeed=m-2),m):--p<c||m===-2?0:(m=s(d[p]),m>=0?(m>0&&(m===2?m=0:h.lastNeed=m-3),m):0))}function a(h,d,c){if((d[0]&192)!==128)return h.lastNeed=0,"�";if(h.lastNeed>1&&d.length>1){if((d[1]&192)!==128)return h.lastNeed=1,"�";if(h.lastNeed>2&&d.length>2&&(d[2]&192)!==128)return h.lastNeed=2,"�"}}function o(h){var d=this.lastTotal-this.lastNeed,c=a(this,h);if(c!==void 0)return c;if(this.lastNeed<=h.length)return h.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,d,0,h.length),this.lastNeed-=h.length}function u(h,d){var c=f(this,h,d);if(!this.lastNeed)return h.toString("utf8",d);this.lastTotal=c;var p=h.length-(c-this.lastNeed);return h.copy(this.lastChar,0,p),h.toString("utf8",d,p)}function y(h){var d=h&&h.length?this.write(h):"";return this.lastNeed?d+"�":d}function w(h,d){if((h.length-d)%2===0){var c=h.toString("utf16le",d);if(c){var p=c.charCodeAt(c.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",d,h.length-1)}function v(h){var d=h&&h.length?this.write(h):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return d+this.lastChar.toString("utf16le",0,c)}return d}function g(h,d){var c=(h.length-d)%3;return c===0?h.toString("base64",d):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",d,h.length-c))}function b(h){var d=h&&h.length?this.write(h):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function l(h){return h.toString(this.encoding)}function _(h){return h&&h.length?this.write(h):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var f=!1;return function(){if(!f){f=!0;for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];s.apply(this,o)}}}function r(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,f,a){if(typeof f=="function")return i(s,null,f);f||(f={}),a=e(a||r);var o=f.readable||f.readable!==!1&&s.readable,u=f.writable||f.writable!==!1&&s.writable,y=function(){s.writable||v()},w=s._writableState&&s._writableState.finished,v=function(){u=!1,w=!0,o||a.call(s)},g=s._readableState&&s._readableState.endEmitted,b=function(){o=!1,g=!0,u||a.call(s)},l=function(c){a.call(s,c)},_=function(){var c;if(o&&!g)return(!s._readableState||!s._readableState.ended)&&(c=new t),a.call(s,c);if(u&&!w)return(!s._writableState||!s._writableState.ended)&&(c=new t),a.call(s,c)},h=function(){s.req.on("finish",v)};return n(s)?(s.on("complete",v),s.on("abort",_),s.req?h():s.on("request",h)):u&&!s._writableState&&(s.on("end",y),s.on("close",y)),s.on("end",b),s.on("finish",v),f.error!==!1&&s.on("error",l),s.on("close",_),function(){s.removeListener("complete",v),s.removeListener("abort",_),s.removeListener("request",h),s.req&&s.req.removeListener("finish",v),s.removeListener("end",y),s.removeListener("close",y),s.removeListener("finish",v),s.removeListener("end",b),s.removeListener("error",l),s.removeListener("close",_)}}return endOfStream=i,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(h,d,c){return d in h?Object.defineProperty(h,d,{value:c,enumerable:!0,configurable:!0,writable:!0}):h[d]=c,h}var r=requireEndOfStream(),n=Symbol("lastResolve"),i=Symbol("lastReject"),s=Symbol("error"),f=Symbol("ended"),a=Symbol("lastPromise"),o=Symbol("handlePromise"),u=Symbol("stream");function y(h,d){return{value:h,done:d}}function w(h){var d=h[n];if(d!==null){var c=h[u].read();c!==null&&(h[a]=null,h[n]=null,h[i]=null,d(y(c,!1)))}}function v(h){process$1$1.nextTick(w,h)}function g(h,d){return function(c,p){h.then(function(){if(d[f]){c(y(void 0,!0));return}d[o](c,p)},p)}}var b=Object.getPrototypeOf(function(){}),l=Object.setPrototypeOf((t={get stream(){return this[u]},next:function(){var d=this,c=this[s];if(c!==null)return Promise.reject(c);if(this[f])return Promise.resolve(y(void 0,!0));if(this[u].destroyed)return new Promise(function(E,T){process$1$1.nextTick(function(){d[s]?T(d[s]):E(y(void 0,!0))})});var p=this[a],m;if(p)m=new Promise(g(p,this));else{var S=this[u].read();if(S!==null)return Promise.resolve(y(S,!1));m=new Promise(this[o])}return this[a]=m,m}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var d=this;return new Promise(function(c,p){d[u].destroy(null,function(m){if(m){p(m);return}c(y(void 0,!0))})})}),t),b),_=function(d){var c,p=Object.create(l,(c={},e(c,u,{value:d,writable:!0}),e(c,n,{value:null,writable:!0}),e(c,i,{value:null,writable:!0}),e(c,s,{value:null,writable:!0}),e(c,f,{value:d._readableState.endEmitted,writable:!0}),e(c,o,{value:function(S,E){var T=p[u].read();T?(p[a]=null,p[n]=null,p[i]=null,S(y(T,!1))):(p[n]=S,p[i]=E)},writable:!0}),c));return p[a]=null,r(d,function(m){if(m&&m.code!=="ERR_STREAM_PREMATURE_CLOSE"){var S=p[i];S!==null&&(p[a]=null,p[n]=null,p[i]=null,S(m)),p[s]=m;return}var E=p[n];E!==null&&(p[a]=null,p[n]=null,p[i]=null,E(y(void 0,!0))),p[f]=!0}),d.on("readable",v.bind(null,p)),p};return async_iterator=_,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=A;var t;A.ReadableState=T,requireEvents$1().EventEmitter;var e=function(K,te){return K.listeners(te).length},r=requireStreamBrowser(),n=requireBuffer().Buffer,i=commonjsGlobal.Uint8Array||function(){};function s(F){return n.from(F)}function f(F){return n.isBuffer(F)||F instanceof i}var a=requireUtil(),o;a&&a.debuglog?o=a.debuglog("stream"):o=function(){};var u=requireBuffer_list(),y=requireDestroy(),w=requireState(),v=w.getHighWaterMark,g=requireErrorsBrowser().codes,b=g.ERR_INVALID_ARG_TYPE,l=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,h=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,d,c,p;requireInherits_browser()(A,r);var m=y.errorOrDestroy,S=["error","close","destroy","pause","resume"];function E(F,K,te){if(typeof F.prependListener=="function")return F.prependListener(K,te);!F._events||!F._events[K]?F.on(K,te):Array.isArray(F._events[K])?F._events[K].unshift(te):F._events[K]=[te,F._events[K]]}function T(F,K,te){t=t||require_stream_duplex(),F=F||{},typeof te!="boolean"&&(te=K instanceof t),this.objectMode=!!F.objectMode,te&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=v(this,F,"readableHighWaterMark",te),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(d||(d=requireString_decoder().StringDecoder),this.decoder=new d(F.encoding),this.encoding=F.encoding)}function A(F){if(t=t||require_stream_duplex(),!(this instanceof A))return new A(F);var K=this instanceof t;this._readableState=new T(F,this,K),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),r.call(this)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),A.prototype.destroy=y.destroy,A.prototype._undestroy=y.undestroy,A.prototype._destroy=function(F,K){K(F)},A.prototype.push=function(F,K){var te=this._readableState,M;return te.objectMode?M=!0:typeof F=="string"&&(K=K||te.defaultEncoding,K!==te.encoding&&(F=n.from(F,K),K=""),M=!0),P(this,F,K,!1,M)},A.prototype.unshift=function(F){return P(this,F,null,!0,!1)};function P(F,K,te,M,ne){o("readableAddChunk",K);var D=F._readableState;if(K===null)D.reading=!1,V(F,D);else{var x;if(ne||(x=O(D,K)),x)m(F,x);else if(D.objectMode||K&&K.length>0)if(typeof K!="string"&&!D.objectMode&&Object.getPrototypeOf(K)!==n.prototype&&(K=s(K)),M)D.endEmitted?m(F,new h):H(F,D,K,!0);else if(D.ended)m(F,new l);else{if(D.destroyed)return!1;D.reading=!1,D.decoder&&!te?(K=D.decoder.write(K),D.objectMode||K.length!==0?H(F,D,K,!1):X(F,D)):H(F,D,K,!1)}else M||(D.reading=!1,X(F,D))}return!D.ended&&(D.length<D.highWaterMark||D.length===0)}function H(F,K,te,M){K.flowing&&K.length===0&&!K.sync?(K.awaitDrain=0,F.emit("data",te)):(K.length+=K.objectMode?1:te.length,M?K.buffer.unshift(te):K.buffer.push(te),K.needReadable&&N(F)),X(F,K)}function O(F,K){var te;return!f(K)&&typeof K!="string"&&K!==void 0&&!F.objectMode&&(te=new b("chunk",["string","Buffer","Uint8Array"],K)),te}A.prototype.isPaused=function(){return this._readableState.flowing===!1},A.prototype.setEncoding=function(F){d||(d=requireString_decoder().StringDecoder);var K=new d(F);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;for(var te=this._readableState.buffer.head,M="";te!==null;)M+=K.write(te.data),te=te.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var q=1073741824;function C(F){return F>=q?F=q:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function j(F,K){return F<=0||K.length===0&&K.ended?0:K.objectMode?1:F!==F?K.flowing&&K.length?K.buffer.head.data.length:K.length:(F>K.highWaterMark&&(K.highWaterMark=C(F)),F<=K.length?F:K.ended?K.length:(K.needReadable=!0,0))}A.prototype.read=function(F){o("read",F),F=parseInt(F,10);var K=this._readableState,te=F;if(F!==0&&(K.emittedReadable=!1),F===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return o("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?I(this):N(this),null;if(F=j(F,K),F===0&&K.ended)return K.length===0&&I(this),null;var M=K.needReadable;o("need readable",M),(K.length===0||K.length-F<K.highWaterMark)&&(M=!0,o("length less than watermark",M)),K.ended||K.reading?(M=!1,o("reading or ended",M)):M&&(o("do read"),K.reading=!0,K.sync=!0,K.length===0&&(K.needReadable=!0),this._read(K.highWaterMark),K.sync=!1,K.reading||(F=j(te,K)));var ne;return F>0?ne=L(F,K):ne=null,ne===null?(K.needReadable=K.length<=K.highWaterMark,F=0):(K.length-=F,K.awaitDrain=0),K.length===0&&(K.ended||(K.needReadable=!0),te!==F&&K.ended&&I(this)),ne!==null&&this.emit("data",ne),ne};function V(F,K){if(o("onEofChunk"),!K.ended){if(K.decoder){var te=K.decoder.end();te&&te.length&&(K.buffer.push(te),K.length+=K.objectMode?1:te.length)}K.ended=!0,K.sync?N(F):(K.needReadable=!1,K.emittedReadable||(K.emittedReadable=!0,Y(F)))}}function N(F){var K=F._readableState;o("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(o("emitReadable",K.flowing),K.emittedReadable=!0,process$1$1.nextTick(Y,F))}function Y(F){var K=F._readableState;o("emitReadable_",K.destroyed,K.length,K.ended),!K.destroyed&&(K.length||K.ended)&&(F.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,Z(F)}function X(F,K){K.readingMore||(K.readingMore=!0,process$1$1.nextTick(J,F,K))}function J(F,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){var te=K.length;if(o("maybeReadMore read 0"),F.read(0),te===K.length)break}K.readingMore=!1}A.prototype._read=function(F){m(this,new _("_read()"))},A.prototype.pipe=function(F,K){var te=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=F;break;case 1:M.pipes=[M.pipes,F];break;default:M.pipes.push(F);break}M.pipesCount+=1,o("pipe count=%d opts=%j",M.pipesCount,K);var ne=(!K||K.end!==!1)&&F!==process$1$1.stdout&&F!==process$1$1.stderr,D=ne?R:he;M.endEmitted?process$1$1.nextTick(D):te.once("end",D),F.on("unpipe",x);function x(ge,be){o("onunpipe"),ge===te&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,ae())}function R(){o("onend"),F.end()}var G=Q(te);F.on("drain",G);var ie=!1;function ae(){o("cleanup"),F.removeListener("close",le),F.removeListener("finish",de),F.removeListener("drain",G),F.removeListener("error",ue),F.removeListener("unpipe",x),te.removeListener("end",R),te.removeListener("end",he),te.removeListener("data",se),ie=!0,M.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&G()}te.on("data",se);function se(ge){o("ondata");var be=F.write(ge);o("dest.write",be),be===!1&&((M.pipesCount===1&&M.pipes===F||M.pipesCount>1&&B(M.pipes,F)!==-1)&&!ie&&(o("false write response, pause",M.awaitDrain),M.awaitDrain++),te.pause())}function ue(ge){o("onerror",ge),he(),F.removeListener("error",ue),e(F,"error")===0&&m(F,ge)}E(F,"error",ue);function le(){F.removeListener("finish",de),he()}F.once("close",le);function de(){o("onfinish"),F.removeListener("close",le),he()}F.once("finish",de);function he(){o("unpipe"),te.unpipe(F)}return F.emit("pipe",te),M.flowing||(o("pipe resume"),te.resume()),F};function Q(F){return function(){var te=F._readableState;o("pipeOnDrain",te.awaitDrain),te.awaitDrain&&te.awaitDrain--,te.awaitDrain===0&&e(F,"data")&&(te.flowing=!0,Z(F))}}A.prototype.unpipe=function(F){var K=this._readableState,te={hasUnpiped:!1};if(K.pipesCount===0)return this;if(K.pipesCount===1)return F&&F!==K.pipes?this:(F||(F=K.pipes),K.pipes=null,K.pipesCount=0,K.flowing=!1,F&&F.emit("unpipe",this,te),this);if(!F){var M=K.pipes,ne=K.pipesCount;K.pipes=null,K.pipesCount=0,K.flowing=!1;for(var D=0;D<ne;D++)M[D].emit("unpipe",this,{hasUnpiped:!1});return this}var x=B(K.pipes,F);return x===-1?this:(K.pipes.splice(x,1),K.pipesCount-=1,K.pipesCount===1&&(K.pipes=K.pipes[0]),F.emit("unpipe",this,te),this)},A.prototype.on=function(F,K){var te=r.prototype.on.call(this,F,K),M=this._readableState;return F==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):F==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,o("on readable",M.length,M.reading),M.length?N(this):M.reading||process$1$1.nextTick(U,this)),te},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(F,K){var te=r.prototype.removeListener.call(this,F,K);return F==="readable"&&process$1$1.nextTick(W,this),te},A.prototype.removeAllListeners=function(F){var K=r.prototype.removeAllListeners.apply(this,arguments);return(F==="readable"||F===void 0)&&process$1$1.nextTick(W,this),K};function W(F){var K=F._readableState;K.readableListening=F.listenerCount("readable")>0,K.resumeScheduled&&!K.paused?K.flowing=!0:F.listenerCount("data")>0&&F.resume()}function U(F){o("readable nexttick read 0"),F.read(0)}A.prototype.resume=function(){var F=this._readableState;return F.flowing||(o("resume"),F.flowing=!F.readableListening,$(this,F)),F.paused=!1,this};function $(F,K){K.resumeScheduled||(K.resumeScheduled=!0,process$1$1.nextTick(ee,F,K))}function ee(F,K){o("resume",K.reading),K.reading||F.read(0),K.resumeScheduled=!1,F.emit("resume"),Z(F),K.flowing&&!K.reading&&F.read(0)}A.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Z(F){var K=F._readableState;for(o("flow",K.flowing);K.flowing&&F.read()!==null;);}A.prototype.wrap=function(F){var K=this,te=this._readableState,M=!1;F.on("end",function(){if(o("wrapped end"),te.decoder&&!te.ended){var x=te.decoder.end();x&&x.length&&K.push(x)}K.push(null)}),F.on("data",function(x){if(o("wrapped data"),te.decoder&&(x=te.decoder.write(x)),!(te.objectMode&&x==null)&&!(!te.objectMode&&(!x||!x.length))){var R=K.push(x);R||(M=!0,F.pause())}});for(var ne in F)this[ne]===void 0&&typeof F[ne]=="function"&&(this[ne]=function(R){return function(){return F[R].apply(F,arguments)}}(ne));for(var D=0;D<S.length;D++)F.on(S[D],this.emit.bind(this,S[D]));return this._read=function(x){o("wrapped _read",x),M&&(M=!1,F.resume())},this},typeof Symbol=="function"&&(A.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=requireAsync_iterator()),c(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(K){this._readableState&&(this._readableState.flowing=K)}}),A._fromList=L,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(F,K){if(K.length===0)return null;var te;return K.objectMode?te=K.buffer.shift():!F||F>=K.length?(K.decoder?te=K.buffer.join(""):K.buffer.length===1?te=K.buffer.first():te=K.buffer.concat(K.length),K.buffer.clear()):te=K.buffer.consume(F,K.decoder),te}function I(F){var K=F._readableState;o("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,process$1$1.nextTick(k,K,F))}function k(F,K){if(o("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,K.readable=!1,K.emit("end"),F.autoDestroy)){var te=K._writableState;(!te||te.autoDestroy&&te.finished)&&K.destroy()}}typeof Symbol=="function"&&(A.from=function(F,K){return p===void 0&&(p=requireFromBrowser()),p(A,F,K)});function B(F,K){for(var te=0,M=F.length;te<M;te++)if(F[te]===K)return te;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=a;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,s=require_stream_duplex();requireInherits_browser()(a,s);function f(y,w){var v=this._transformState;v.transforming=!1;var g=v.writecb;if(g===null)return this.emit("error",new r);v.writechunk=null,v.writecb=null,w!=null&&this.push(w),g(y);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function a(y){if(!(this instanceof a))return new a(y);s.call(this,y),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,y&&(typeof y.transform=="function"&&(this._transform=y.transform),typeof y.flush=="function"&&(this._flush=y.flush)),this.on("prefinish",o)}function o(){var y=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(w,v){u(y,w,v)}):u(this,null,null)}a.prototype.push=function(y,w){return this._transformState.needTransform=!1,s.prototype.push.call(this,y,w)},a.prototype._transform=function(y,w,v){v(new e("_transform()"))},a.prototype._write=function(y,w,v){var g=this._transformState;if(g.writecb=v,g.writechunk=y,g.writeencoding=w,!g.transforming){var b=this._readableState;(g.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(y){var w=this._transformState;w.writechunk!==null&&!w.transforming?(w.transforming=!0,this._transform(w.writechunk,w.writeencoding,w.afterTransform)):w.needTransform=!0},a.prototype._destroy=function(y,w){s.prototype._destroy.call(this,y,function(v){w(v)})};function u(y,w,v){if(w)return y.emit("error",w);if(v!=null&&y.push(v),y._writableState.length)throw new i;if(y._transformState.transforming)throw new n;return y.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=e;var t=require_stream_transform();requireInherits_browser()(e,t);function e(r){if(!(this instanceof e))return new e(r);t.call(this,r)}return e.prototype._transform=function(r,n,i){i(null,r)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(v){var g=!1;return function(){g||(g=!0,v.apply(void 0,arguments))}}var r=requireErrorsBrowser().codes,n=r.ERR_MISSING_ARGS,i=r.ERR_STREAM_DESTROYED;function s(v){if(v)throw v}function f(v){return v.setHeader&&typeof v.abort=="function"}function a(v,g,b,l){l=e(l);var _=!1;v.on("close",function(){_=!0}),t===void 0&&(t=requireEndOfStream()),t(v,{readable:g,writable:b},function(d){if(d)return l(d);_=!0,l()});var h=!1;return function(d){if(!_&&!h){if(h=!0,f(v))return v.abort();if(typeof v.destroy=="function")return v.destroy();l(d||new i("pipe"))}}}function o(v){v()}function u(v,g){return v.pipe(g)}function y(v){return!v.length||typeof v[v.length-1]!="function"?s:v.pop()}function w(){for(var v=arguments.length,g=new Array(v),b=0;b<v;b++)g[b]=arguments[b];var l=y(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new n("streams");var _,h=g.map(function(d,c){var p=c<g.length-1,m=c>0;return a(d,p,m,function(S){_||(_=S),S&&h.forEach(o),!p&&(h.forEach(o),l(_))})});return g.reduce(u)}return pipeline_1=w,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=r;var t=requireEvents$1().EventEmitter,e=requireInherits_browser();e(r,t),r.Readable=require_stream_readable(),r.Writable=require_stream_writable(),r.Duplex=require_stream_duplex(),r.Transform=require_stream_transform(),r.PassThrough=require_stream_passthrough(),r.finished=requireEndOfStream(),r.pipeline=requirePipeline(),r.Stream=r;function r(){t.call(this)}return r.prototype.pipe=function(n,i){var s=this;function f(g){n.writable&&n.write(g)===!1&&s.pause&&s.pause()}s.on("data",f);function a(){s.readable&&s.resume&&s.resume()}n.on("drain",a),!n._isStdio&&(!i||i.end!==!1)&&(s.on("end",u),s.on("close",y));var o=!1;function u(){o||(o=!0,n.end())}function y(){o||(o=!0,typeof n.destroy=="function"&&n.destroy())}function w(g){if(v(),t.listenerCount(this,"error")===0)throw g}s.on("error",w),n.on("error",w);function v(){s.removeListener("data",f),n.removeListener("drain",a),s.removeListener("end",u),s.removeListener("close",y),s.removeListener("error",w),n.removeListener("error",w),s.removeListener("end",v),s.removeListener("close",v),n.removeListener("close",v)}return s.on("end",v),s.on("close",v),n.on("close",v),n.emit("pipe",s),n},streamBrowserify}var hasRequiredSax;function requireSax(){return hasRequiredSax||(hasRequiredSax=1,function(t){(function(e){e.parser=function(L,I){return new n(L,I)},e.SAXParser=n,e.SAXStream=y,e.createStream=u,e.MAX_BUFFER_LENGTH=64*1024;var r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function n(L,I){if(!(this instanceof n))return new n(L,I);var k=this;s(k),k.q=k.c="",k.bufferCheckPosition=e.MAX_BUFFER_LENGTH,k.opt=I||{},k.opt.lowercase=k.opt.lowercase||k.opt.lowercasetags,k.looseCase=k.opt.lowercase?"toLowerCase":"toUpperCase",k.tags=[],k.closed=k.closedRoot=k.sawRoot=!1,k.tag=k.error=null,k.strict=!!L,k.noscript=!!(L||k.opt.noscript),k.state=A.BEGIN,k.strictEntities=k.opt.strictEntities,k.ENTITIES=k.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),k.attribList=[],k.opt.xmlns&&(k.ns=Object.create(l)),k.trackPosition=k.opt.position!==!1,k.trackPosition&&(k.position=k.line=k.column=0),H(k,"onready")}Object.create||(Object.create=function(L){function I(){}I.prototype=L;var k=new I;return k}),Object.keys||(Object.keys=function(L){var I=[];for(var k in L)L.hasOwnProperty(k)&&I.push(k);return I});function i(L){for(var I=Math.max(e.MAX_BUFFER_LENGTH,10),k=0,B=0,F=r.length;B<F;B++){var K=L[r[B]].length;if(K>I)switch(r[B]){case"textNode":q(L);break;case"cdata":O(L,"oncdata",L.cdata),L.cdata="";break;case"script":O(L,"onscript",L.script),L.script="";break;default:j(L,"Max buffer length exceeded: "+r[B])}k=Math.max(k,K)}var te=e.MAX_BUFFER_LENGTH-k;L.bufferCheckPosition=te+L.position}function s(L){for(var I=0,k=r.length;I<k;I++)L[r[I]]=""}function f(L){q(L),L.cdata!==""&&(O(L,"oncdata",L.cdata),L.cdata=""),L.script!==""&&(O(L,"onscript",L.script),L.script="")}n.prototype={end:function(){V(this)},write:Z,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){f(this)}};var a;try{a=requireStreamBrowserify().Stream}catch{a=function(){}}var o=e.EVENTS.filter(function(L){return L!=="error"&&L!=="end"});function u(L,I){return new y(L,I)}function y(L,I){if(!(this instanceof y))return new y(L,I);a.apply(this),this._parser=new n(L,I),this.writable=!0,this.readable=!0;var k=this;this._parser.onend=function(){k.emit("end")},this._parser.onerror=function(B){k.emit("error",B),k._parser.error=null},this._decoder=null,o.forEach(function(B){Object.defineProperty(k,"on"+B,{get:function(){return k._parser["on"+B]},set:function(F){if(!F)return k.removeAllListeners(B),k._parser["on"+B]=F,F;k.on(B,F)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(a.prototype,{constructor:{value:y}}),y.prototype.write=function(L){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(L)){if(!this._decoder){var I=requireString_decoder().StringDecoder;this._decoder=new I("utf8")}L=this._decoder.write(L)}return this._parser.write(L.toString()),this.emit("data",L),!0},y.prototype.end=function(L){return L&&L.length&&this.write(L),this._parser.end(),!0},y.prototype.on=function(L,I){var k=this;return!k._parser["on"+L]&&o.indexOf(L)!==-1&&(k._parser["on"+L]=function(){var B=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);B.splice(0,0,L),k.emit.apply(k,B)}),a.prototype.on.call(k,L,I)};var w="[CDATA[",v="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",l={xml:g,xmlns:b},_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,c=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(L){return L===" "||L===`
`||L==="\r"||L==="	"}function m(L){return L==='"'||L==="'"}function S(L){return L===">"||p(L)}function E(L,I){return L.test(I)}function T(L,I){return!E(L,I)}var A=0;e.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(L){var I=e.ENTITIES[L],k=typeof I=="number"?String.fromCharCode(I):I;e.ENTITIES[L]=k});for(var P in e.STATE)e.STATE[e.STATE[P]]=P;A=e.STATE;function H(L,I,k){L[I]&&L[I](k)}function O(L,I,k){L.textNode&&q(L),H(L,I,k)}function q(L){L.textNode=C(L.opt,L.textNode),L.textNode&&H(L,"ontext",L.textNode),L.textNode=""}function C(L,I){return L.trim&&(I=I.trim()),L.normalize&&(I=I.replace(/\s+/g," ")),I}function j(L,I){return q(L),L.trackPosition&&(I+=`
Line: `+L.line+`
Column: `+L.column+`
Char: `+L.c),I=new Error(I),L.error=I,H(L,"onerror",I),L}function V(L){return L.sawRoot&&!L.closedRoot&&N(L,"Unclosed root tag"),L.state!==A.BEGIN&&L.state!==A.BEGIN_WHITESPACE&&L.state!==A.TEXT&&j(L,"Unexpected end"),q(L),L.c="",L.closed=!0,H(L,"onend"),n.call(L,L.strict,L.opt),L}function N(L,I){if(typeof L!="object"||!(L instanceof n))throw new Error("bad call to strictFail");L.strict&&j(L,I)}function Y(L){L.strict||(L.tagName=L.tagName[L.looseCase]());var I=L.tags[L.tags.length-1]||L,k=L.tag={name:L.tagName,attributes:{}};L.opt.xmlns&&(k.ns=I.ns),L.attribList.length=0,O(L,"onopentagstart",k)}function X(L,I){var k=L.indexOf(":"),B=k<0?["",L]:L.split(":"),F=B[0],K=B[1];return I&&L==="xmlns"&&(F="xmlns",K=""),{prefix:F,local:K}}function J(L){if(L.strict||(L.attribName=L.attribName[L.looseCase]()),L.attribList.indexOf(L.attribName)!==-1||L.tag.attributes.hasOwnProperty(L.attribName)){L.attribName=L.attribValue="";return}if(L.opt.xmlns){var I=X(L.attribName,!0),k=I.prefix,B=I.local;if(k==="xmlns")if(B==="xml"&&L.attribValue!==g)N(L,"xml: prefix must be bound to "+g+`
Actual: `+L.attribValue);else if(B==="xmlns"&&L.attribValue!==b)N(L,"xmlns: prefix must be bound to "+b+`
Actual: `+L.attribValue);else{var F=L.tag,K=L.tags[L.tags.length-1]||L;F.ns===K.ns&&(F.ns=Object.create(K.ns)),F.ns[B]=L.attribValue}L.attribList.push([L.attribName,L.attribValue])}else L.tag.attributes[L.attribName]=L.attribValue,O(L,"onattribute",{name:L.attribName,value:L.attribValue});L.attribName=L.attribValue=""}function Q(L,I){if(L.opt.xmlns){var k=L.tag,B=X(L.tagName);k.prefix=B.prefix,k.local=B.local,k.uri=k.ns[B.prefix]||"",k.prefix&&!k.uri&&(N(L,"Unbound namespace prefix: "+JSON.stringify(L.tagName)),k.uri=B.prefix);var F=L.tags[L.tags.length-1]||L;k.ns&&F.ns!==k.ns&&Object.keys(k.ns).forEach(function(se){O(L,"onopennamespace",{prefix:se,uri:k.ns[se]})});for(var K=0,te=L.attribList.length;K<te;K++){var M=L.attribList[K],ne=M[0],D=M[1],x=X(ne,!0),R=x.prefix,G=x.local,ie=R===""?"":k.ns[R]||"",ae={name:ne,value:D,prefix:R,local:G,uri:ie};R&&R!=="xmlns"&&!ie&&(N(L,"Unbound namespace prefix: "+JSON.stringify(R)),ae.uri=R),L.tag.attributes[ne]=ae,O(L,"onattribute",ae)}L.attribList.length=0}L.tag.isSelfClosing=!!I,L.sawRoot=!0,L.tags.push(L.tag),O(L,"onopentag",L.tag),I||(!L.noscript&&L.tagName.toLowerCase()==="script"?L.state=A.SCRIPT:L.state=A.TEXT,L.tag=null,L.tagName=""),L.attribName=L.attribValue="",L.attribList.length=0}function W(L){if(!L.tagName){N(L,"Weird empty close tag."),L.textNode+="</>",L.state=A.TEXT;return}if(L.script){if(L.tagName!=="script"){L.script+="</"+L.tagName+">",L.tagName="",L.state=A.SCRIPT;return}O(L,"onscript",L.script),L.script=""}var I=L.tags.length,k=L.tagName;L.strict||(k=k[L.looseCase]());for(var B=k;I--;){var F=L.tags[I];if(F.name!==B)N(L,"Unexpected close tag");else break}if(I<0){N(L,"Unmatched closing tag: "+L.tagName),L.textNode+="</"+L.tagName+">",L.state=A.TEXT;return}L.tagName=k;for(var K=L.tags.length;K-- >I;){var te=L.tag=L.tags.pop();L.tagName=L.tag.name,O(L,"onclosetag",L.tagName);var M={};for(var ne in te.ns)M[ne]=te.ns[ne];var D=L.tags[L.tags.length-1]||L;L.opt.xmlns&&te.ns!==D.ns&&Object.keys(te.ns).forEach(function(x){var R=te.ns[x];O(L,"onclosenamespace",{prefix:x,uri:R})})}I===0&&(L.closedRoot=!0),L.tagName=L.attribValue=L.attribName="",L.attribList.length=0,L.state=A.TEXT}function U(L){var I=L.entity,k=I.toLowerCase(),B,F="";return L.ENTITIES[I]?L.ENTITIES[I]:L.ENTITIES[k]?L.ENTITIES[k]:(I=k,I.charAt(0)==="#"&&(I.charAt(1)==="x"?(I=I.slice(2),B=parseInt(I,16),F=B.toString(16)):(I=I.slice(1),B=parseInt(I,10),F=B.toString(10))),I=I.replace(/^0+/,""),isNaN(B)||F.toLowerCase()!==I?(N(L,"Invalid character entity"),"&"+L.entity+";"):String.fromCodePoint(B))}function $(L,I){I==="<"?(L.state=A.OPEN_WAKA,L.startTagPosition=L.position):p(I)||(N(L,"Non-whitespace before first tag."),L.textNode=I,L.state=A.TEXT)}function ee(L,I){var k="";return I<L.length&&(k=L.charAt(I)),k}function Z(L){var I=this;if(this.error)throw this.error;if(I.closed)return j(I,"Cannot write after close. Assign an onready handler.");if(L===null)return V(I);typeof L=="object"&&(L=L.toString());for(var k=0,B="";B=ee(L,k++),I.c=B,!!B;)switch(I.trackPosition&&(I.position++,B===`
`?(I.line++,I.column=0):I.column++),I.state){case A.BEGIN:if(I.state=A.BEGIN_WHITESPACE,B==="\uFEFF")continue;$(I,B);continue;case A.BEGIN_WHITESPACE:$(I,B);continue;case A.TEXT:if(I.sawRoot&&!I.closedRoot){for(var F=k-1;B&&B!=="<"&&B!=="&";)B=ee(L,k++),B&&I.trackPosition&&(I.position++,B===`
`?(I.line++,I.column=0):I.column++);I.textNode+=L.substring(F,k-1)}B==="<"&&!(I.sawRoot&&I.closedRoot&&!I.strict)?(I.state=A.OPEN_WAKA,I.startTagPosition=I.position):(!p(B)&&(!I.sawRoot||I.closedRoot)&&N(I,"Text data outside of root node."),B==="&"?I.state=A.TEXT_ENTITY:I.textNode+=B);continue;case A.SCRIPT:B==="<"?I.state=A.SCRIPT_ENDING:I.script+=B;continue;case A.SCRIPT_ENDING:B==="/"?I.state=A.CLOSE_TAG:(I.script+="<"+B,I.state=A.SCRIPT);continue;case A.OPEN_WAKA:if(B==="!")I.state=A.SGML_DECL,I.sgmlDecl="";else if(!p(B))if(E(_,B))I.state=A.OPEN_TAG,I.tagName=B;else if(B==="/")I.state=A.CLOSE_TAG,I.tagName="";else if(B==="?")I.state=A.PROC_INST,I.procInstName=I.procInstBody="";else{if(N(I,"Unencoded <"),I.startTagPosition+1<I.position){var K=I.position-I.startTagPosition;B=new Array(K).join(" ")+B}I.textNode+="<"+B,I.state=A.TEXT}continue;case A.SGML_DECL:(I.sgmlDecl+B).toUpperCase()===w?(O(I,"onopencdata"),I.state=A.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+B==="--"?(I.state=A.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+B).toUpperCase()===v?(I.state=A.DOCTYPE,(I.doctype||I.sawRoot)&&N(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):B===">"?(O(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=A.TEXT):(m(B)&&(I.state=A.SGML_DECL_QUOTED),I.sgmlDecl+=B);continue;case A.SGML_DECL_QUOTED:B===I.q&&(I.state=A.SGML_DECL,I.q=""),I.sgmlDecl+=B;continue;case A.DOCTYPE:B===">"?(I.state=A.TEXT,O(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=B,B==="["?I.state=A.DOCTYPE_DTD:m(B)&&(I.state=A.DOCTYPE_QUOTED,I.q=B));continue;case A.DOCTYPE_QUOTED:I.doctype+=B,B===I.q&&(I.q="",I.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:I.doctype+=B,B==="]"?I.state=A.DOCTYPE:m(B)&&(I.state=A.DOCTYPE_DTD_QUOTED,I.q=B);continue;case A.DOCTYPE_DTD_QUOTED:I.doctype+=B,B===I.q&&(I.state=A.DOCTYPE_DTD,I.q="");continue;case A.COMMENT:B==="-"?I.state=A.COMMENT_ENDING:I.comment+=B;continue;case A.COMMENT_ENDING:B==="-"?(I.state=A.COMMENT_ENDED,I.comment=C(I.opt,I.comment),I.comment&&O(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+B,I.state=A.COMMENT);continue;case A.COMMENT_ENDED:B!==">"?(N(I,"Malformed comment"),I.comment+="--"+B,I.state=A.COMMENT):I.state=A.TEXT;continue;case A.CDATA:B==="]"?I.state=A.CDATA_ENDING:I.cdata+=B;continue;case A.CDATA_ENDING:B==="]"?I.state=A.CDATA_ENDING_2:(I.cdata+="]"+B,I.state=A.CDATA);continue;case A.CDATA_ENDING_2:B===">"?(I.cdata&&O(I,"oncdata",I.cdata),O(I,"onclosecdata"),I.cdata="",I.state=A.TEXT):B==="]"?I.cdata+="]":(I.cdata+="]]"+B,I.state=A.CDATA);continue;case A.PROC_INST:B==="?"?I.state=A.PROC_INST_ENDING:p(B)?I.state=A.PROC_INST_BODY:I.procInstName+=B;continue;case A.PROC_INST_BODY:if(!I.procInstBody&&p(B))continue;B==="?"?I.state=A.PROC_INST_ENDING:I.procInstBody+=B;continue;case A.PROC_INST_ENDING:B===">"?(O(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=A.TEXT):(I.procInstBody+="?"+B,I.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:E(h,B)?I.tagName+=B:(Y(I),B===">"?Q(I):B==="/"?I.state=A.OPEN_TAG_SLASH:(p(B)||N(I,"Invalid character in tag name"),I.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:B===">"?(Q(I,!0),W(I)):(N(I,"Forward-slash in opening tag not followed by >"),I.state=A.ATTRIB);continue;case A.ATTRIB:if(p(B))continue;B===">"?Q(I):B==="/"?I.state=A.OPEN_TAG_SLASH:E(_,B)?(I.attribName=B,I.attribValue="",I.state=A.ATTRIB_NAME):N(I,"Invalid attribute name");continue;case A.ATTRIB_NAME:B==="="?I.state=A.ATTRIB_VALUE:B===">"?(N(I,"Attribute without value"),I.attribValue=I.attribName,J(I),Q(I)):p(B)?I.state=A.ATTRIB_NAME_SAW_WHITE:E(h,B)?I.attribName+=B:N(I,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if(B==="=")I.state=A.ATTRIB_VALUE;else{if(p(B))continue;N(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",O(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",B===">"?Q(I):E(_,B)?(I.attribName=B,I.state=A.ATTRIB_NAME):(N(I,"Invalid attribute name"),I.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(p(B))continue;m(B)?(I.q=B,I.state=A.ATTRIB_VALUE_QUOTED):(N(I,"Unquoted attribute value"),I.state=A.ATTRIB_VALUE_UNQUOTED,I.attribValue=B);continue;case A.ATTRIB_VALUE_QUOTED:if(B!==I.q){B==="&"?I.state=A.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=B;continue}J(I),I.q="",I.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:p(B)?I.state=A.ATTRIB:B===">"?Q(I):B==="/"?I.state=A.OPEN_TAG_SLASH:E(_,B)?(N(I,"No whitespace between attributes"),I.attribName=B,I.attribValue="",I.state=A.ATTRIB_NAME):N(I,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(!S(B)){B==="&"?I.state=A.ATTRIB_VALUE_ENTITY_U:I.attribValue+=B;continue}J(I),B===">"?Q(I):I.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(I.tagName)B===">"?W(I):E(h,B)?I.tagName+=B:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=A.SCRIPT):(p(B)||N(I,"Invalid tagname in closing tag"),I.state=A.CLOSE_TAG_SAW_WHITE);else{if(p(B))continue;T(_,B)?I.script?(I.script+="</"+B,I.state=A.SCRIPT):N(I,"Invalid tagname in closing tag."):I.tagName=B}continue;case A.CLOSE_TAG_SAW_WHITE:if(p(B))continue;B===">"?W(I):N(I,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var te,M;switch(I.state){case A.TEXT_ENTITY:te=A.TEXT,M="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:te=A.ATTRIB_VALUE_QUOTED,M="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:te=A.ATTRIB_VALUE_UNQUOTED,M="attribValue";break}B===";"?(I[M]+=U(I),I.entity="",I.state=te):E(I.entity.length?c:d,B)?I.entity+=B:(N(I,"Invalid character in entity name"),I[M]+="&"+I.entity+B,I.entity="",I.state=te);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&i(I),I}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var L=String.fromCharCode,I=Math.floor,k=function(){var B=16384,F=[],K,te,M=-1,ne=arguments.length;if(!ne)return"";for(var D="";++M<ne;){var x=Number(arguments[M]);if(!isFinite(x)||x<0||x>1114111||I(x)!==x)throw RangeError("Invalid code point: "+x);x<=65535?F.push(x):(x-=65536,K=(x>>10)+55296,te=x%1024+56320,F.push(K,te)),(M+1===ne||F.length>B)&&(D+=L.apply(null,F),F.length=0)}return D};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:k,configurable:!0,writable:!0}):String.fromCodePoint=k}()})(t)}(sax)),sax}var arrayHelper,hasRequiredArrayHelper;function requireArrayHelper(){return hasRequiredArrayHelper||(hasRequiredArrayHelper=1,arrayHelper={isArray:function(t){return Array.isArray?Array.isArray(t):Object.prototype.toString.call(t)==="[object Array]"}}),arrayHelper}var optionsHelper,hasRequiredOptionsHelper;function requireOptionsHelper(){if(hasRequiredOptionsHelper)return optionsHelper;hasRequiredOptionsHelper=1;var t=requireArrayHelper().isArray;return optionsHelper={copyOptions:function(e){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n},ensureFlagExists:function(e,r){(!(e in r)||typeof r[e]!="boolean")&&(r[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!t(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,r){(!(e+"Key"in r)||typeof r[e+"Key"]!="string")&&(r[e+"Key"]=r.compact?"_"+e:e)},checkFnExists:function(e,r){return e+"Fn"in r}},optionsHelper}var xml2js,hasRequiredXml2js;function requireXml2js(){if(hasRequiredXml2js)return xml2js;hasRequiredXml2js=1;var t=requireSax(),e=requireOptionsHelper(),r=requireArrayHelper().isArray,n,i;function s(h){return n=e.copyOptions(h),e.ensureFlagExists("ignoreDeclaration",n),e.ensureFlagExists("ignoreInstruction",n),e.ensureFlagExists("ignoreAttributes",n),e.ensureFlagExists("ignoreText",n),e.ensureFlagExists("ignoreComment",n),e.ensureFlagExists("ignoreCdata",n),e.ensureFlagExists("ignoreDoctype",n),e.ensureFlagExists("compact",n),e.ensureFlagExists("alwaysChildren",n),e.ensureFlagExists("addParent",n),e.ensureFlagExists("trim",n),e.ensureFlagExists("nativeType",n),e.ensureFlagExists("nativeTypeAttributes",n),e.ensureFlagExists("sanitize",n),e.ensureFlagExists("instructionHasAttributes",n),e.ensureFlagExists("captureSpacesBetweenElements",n),e.ensureAlwaysArrayExists(n),e.ensureKeyExists("declaration",n),e.ensureKeyExists("instruction",n),e.ensureKeyExists("attributes",n),e.ensureKeyExists("text",n),e.ensureKeyExists("comment",n),e.ensureKeyExists("cdata",n),e.ensureKeyExists("doctype",n),e.ensureKeyExists("type",n),e.ensureKeyExists("name",n),e.ensureKeyExists("elements",n),e.ensureKeyExists("parent",n),e.checkFnExists("doctype",n),e.checkFnExists("instruction",n),e.checkFnExists("cdata",n),e.checkFnExists("comment",n),e.checkFnExists("text",n),e.checkFnExists("instructionName",n),e.checkFnExists("elementName",n),e.checkFnExists("attributeName",n),e.checkFnExists("attributeValue",n),e.checkFnExists("attributes",n),n}function f(h){var d=Number(h);if(!isNaN(d))return d;var c=h.toLowerCase();return c==="true"?!0:c==="false"?!1:h}function a(h,d){var c;if(n.compact){if(!i[n[h+"Key"]]&&(r(n.alwaysArray)?n.alwaysArray.indexOf(n[h+"Key"])!==-1:n.alwaysArray)&&(i[n[h+"Key"]]=[]),i[n[h+"Key"]]&&!r(i[n[h+"Key"]])&&(i[n[h+"Key"]]=[i[n[h+"Key"]]]),h+"Fn"in n&&typeof d=="string"&&(d=n[h+"Fn"](d,i)),h==="instruction"&&("instructionFn"in n||"instructionNameFn"in n)){for(c in d)if(d.hasOwnProperty(c))if("instructionFn"in n)d[c]=n.instructionFn(d[c],c,i);else{var p=d[c];delete d[c],d[n.instructionNameFn(c,p,i)]=p}}r(i[n[h+"Key"]])?i[n[h+"Key"]].push(d):i[n[h+"Key"]]=d}else{i[n.elementsKey]||(i[n.elementsKey]=[]);var m={};if(m[n.typeKey]=h,h==="instruction"){for(c in d)if(d.hasOwnProperty(c))break;m[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(c,d,i):c,n.instructionHasAttributes?(m[n.attributesKey]=d[c][n.attributesKey],"instructionFn"in n&&(m[n.attributesKey]=n.instructionFn(m[n.attributesKey],c,i))):("instructionFn"in n&&(d[c]=n.instructionFn(d[c],c,i)),m[n.instructionKey]=d[c])}else h+"Fn"in n&&(d=n[h+"Fn"](d,i)),m[n[h+"Key"]]=d;n.addParent&&(m[n.parentKey]=i),i[n.elementsKey].push(m)}}function o(h){if("attributesFn"in n&&h&&(h=n.attributesFn(h,i)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&h){var d;for(d in h)if(h.hasOwnProperty(d)&&(n.trim&&(h[d]=h[d].trim()),n.nativeTypeAttributes&&(h[d]=f(h[d])),"attributeValueFn"in n&&(h[d]=n.attributeValueFn(h[d],d,i)),"attributeNameFn"in n)){var c=h[d];delete h[d],h[n.attributeNameFn(d,h[d],i)]=c}}return h}function u(h){var d={};if(h.body&&(h.name.toLowerCase()==="xml"||n.instructionHasAttributes)){for(var c=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,p;(p=c.exec(h.body))!==null;)d[p[1]]=p[2]||p[3]||p[4];d=o(d)}if(h.name.toLowerCase()==="xml"){if(n.ignoreDeclaration)return;i[n.declarationKey]={},Object.keys(d).length&&(i[n.declarationKey][n.attributesKey]=d),n.addParent&&(i[n.declarationKey][n.parentKey]=i)}else{if(n.ignoreInstruction)return;n.trim&&(h.body=h.body.trim());var m={};n.instructionHasAttributes&&Object.keys(d).length?(m[h.name]={},m[h.name][n.attributesKey]=d):m[h.name]=h.body,a("instruction",m)}}function y(h,d){var c;if(typeof h=="object"&&(d=h.attributes,h=h.name),d=o(d),"elementNameFn"in n&&(h=n.elementNameFn(h,i)),n.compact){if(c={},!n.ignoreAttributes&&d&&Object.keys(d).length){c[n.attributesKey]={};var p;for(p in d)d.hasOwnProperty(p)&&(c[n.attributesKey][p]=d[p])}!(h in i)&&(r(n.alwaysArray)?n.alwaysArray.indexOf(h)!==-1:n.alwaysArray)&&(i[h]=[]),i[h]&&!r(i[h])&&(i[h]=[i[h]]),r(i[h])?i[h].push(c):i[h]=c}else i[n.elementsKey]||(i[n.elementsKey]=[]),c={},c[n.typeKey]="element",c[n.nameKey]=h,!n.ignoreAttributes&&d&&Object.keys(d).length&&(c[n.attributesKey]=d),n.alwaysChildren&&(c[n.elementsKey]=[]),i[n.elementsKey].push(c);c[n.parentKey]=i,i=c}function w(h){n.ignoreText||!h.trim()&&!n.captureSpacesBetweenElements||(n.trim&&(h=h.trim()),n.nativeType&&(h=f(h)),n.sanitize&&(h=h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a("text",h))}function v(h){n.ignoreComment||(n.trim&&(h=h.trim()),a("comment",h))}function g(h){var d=i[n.parentKey];n.addParent||delete i[n.parentKey],i=d}function b(h){n.ignoreCdata||(n.trim&&(h=h.trim()),a("cdata",h))}function l(h){n.ignoreDoctype||(h=h.replace(/^ /,""),n.trim&&(h=h.trim()),a("doctype",h))}function _(h){h.note=h}return xml2js=function(h,d){var c=t.parser(!0,{}),p={};if(i=p,n=s(d),c.opt={strictEntities:!0},c.onopentag=y,c.ontext=w,c.oncomment=v,c.onclosetag=g,c.onerror=_,c.oncdata=b,c.ondoctype=l,c.onprocessinginstruction=u,c.write(h).close(),p[n.elementsKey]){var m=p[n.elementsKey];delete p[n.elementsKey],p[n.elementsKey]=m,delete p.text}return p},xml2js}var xml2json,hasRequiredXml2json;function requireXml2json(){if(hasRequiredXml2json)return xml2json;hasRequiredXml2json=1;var t=requireOptionsHelper(),e=requireXml2js();function r(n){var i=t.copyOptions(n);return t.ensureSpacesExists(i),i}return xml2json=function(n,i){var s,f,a,o;return s=r(i),f=e(n,s),o="compact"in s&&s.compact?"_parent":"parent","addParent"in s&&s.addParent?a=JSON.stringify(f,function(u,y){return u===o?"_":y},s.spaces):a=JSON.stringify(f,null,s.spaces),a.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},xml2json}var js2xml,hasRequiredJs2xml;function requireJs2xml(){if(hasRequiredJs2xml)return js2xml;hasRequiredJs2xml=1;var t=requireOptionsHelper(),e=requireArrayHelper().isArray,r,n;function i(c){var p=t.copyOptions(c);return t.ensureFlagExists("ignoreDeclaration",p),t.ensureFlagExists("ignoreInstruction",p),t.ensureFlagExists("ignoreAttributes",p),t.ensureFlagExists("ignoreText",p),t.ensureFlagExists("ignoreComment",p),t.ensureFlagExists("ignoreCdata",p),t.ensureFlagExists("ignoreDoctype",p),t.ensureFlagExists("compact",p),t.ensureFlagExists("indentText",p),t.ensureFlagExists("indentCdata",p),t.ensureFlagExists("indentAttributes",p),t.ensureFlagExists("indentInstruction",p),t.ensureFlagExists("fullTagEmptyElement",p),t.ensureFlagExists("noQuotesForNativeAttributes",p),t.ensureSpacesExists(p),typeof p.spaces=="number"&&(p.spaces=Array(p.spaces+1).join(" ")),t.ensureKeyExists("declaration",p),t.ensureKeyExists("instruction",p),t.ensureKeyExists("attributes",p),t.ensureKeyExists("text",p),t.ensureKeyExists("comment",p),t.ensureKeyExists("cdata",p),t.ensureKeyExists("doctype",p),t.ensureKeyExists("type",p),t.ensureKeyExists("name",p),t.ensureKeyExists("elements",p),t.checkFnExists("doctype",p),t.checkFnExists("instruction",p),t.checkFnExists("cdata",p),t.checkFnExists("comment",p),t.checkFnExists("text",p),t.checkFnExists("instructionName",p),t.checkFnExists("elementName",p),t.checkFnExists("attributeName",p),t.checkFnExists("attributeValue",p),t.checkFnExists("attributes",p),t.checkFnExists("fullTagEmptyElement",p),p}function s(c,p,m){return(!m&&c.spaces?`
`:"")+Array(p+1).join(c.spaces)}function f(c,p,m){if(p.ignoreAttributes)return"";"attributesFn"in p&&(c=p.attributesFn(c,n,r));var S,E,T,A,P=[];for(S in c)c.hasOwnProperty(S)&&c[S]!==null&&c[S]!==void 0&&(A=p.noQuotesForNativeAttributes&&typeof c[S]!="string"?"":'"',E=""+c[S],E=E.replace(/"/g,"&quot;"),T="attributeNameFn"in p?p.attributeNameFn(S,E,n,r):S,P.push(p.spaces&&p.indentAttributes?s(p,m+1,!1):" "),P.push(T+"="+A+("attributeValueFn"in p?p.attributeValueFn(E,S,n,r):E)+A));return c&&Object.keys(c).length&&p.spaces&&p.indentAttributes&&P.push(s(p,m,!1)),P.join("")}function a(c,p,m){return r=c,n="xml",p.ignoreDeclaration?"":"<?xml"+f(c[p.attributesKey],p,m)+"?>"}function o(c,p,m){if(p.ignoreInstruction)return"";var S;for(S in c)if(c.hasOwnProperty(S))break;var E="instructionNameFn"in p?p.instructionNameFn(S,c[S],n,r):S;if(typeof c[S]=="object")return r=c,n=E,"<?"+E+f(c[S][p.attributesKey],p,m)+"?>";var T=c[S]?c[S]:"";return"instructionFn"in p&&(T=p.instructionFn(T,S,n,r)),"<?"+E+(T?" "+T:"")+"?>"}function u(c,p){return p.ignoreComment?"":"<!--"+("commentFn"in p?p.commentFn(c,n,r):c)+"-->"}function y(c,p){return p.ignoreCdata?"":"<![CDATA["+("cdataFn"in p?p.cdataFn(c,n,r):c.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function w(c,p){return p.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in p?p.doctypeFn(c,n,r):c)+">"}function v(c,p){return p.ignoreText?"":(c=""+c,c=c.replace(/&amp;/g,"&"),c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in p?p.textFn(c,n,r):c)}function g(c,p){var m;if(c.elements&&c.elements.length)for(m=0;m<c.elements.length;++m)switch(c.elements[m][p.typeKey]){case"text":if(p.indentText)return!0;break;case"cdata":if(p.indentCdata)return!0;break;case"instruction":if(p.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function b(c,p,m){r=c,n=c.name;var S=[],E="elementNameFn"in p?p.elementNameFn(c.name,c):c.name;S.push("<"+E),c[p.attributesKey]&&S.push(f(c[p.attributesKey],p,m));var T=c[p.elementsKey]&&c[p.elementsKey].length||c[p.attributesKey]&&c[p.attributesKey]["xml:space"]==="preserve";return T||("fullTagEmptyElementFn"in p?T=p.fullTagEmptyElementFn(c.name,c):T=p.fullTagEmptyElement),T?(S.push(">"),c[p.elementsKey]&&c[p.elementsKey].length&&(S.push(l(c[p.elementsKey],p,m+1)),r=c,n=c.name),S.push(p.spaces&&g(c,p)?`
`+Array(m+1).join(p.spaces):""),S.push("</"+E+">")):S.push("/>"),S.join("")}function l(c,p,m,S){return c.reduce(function(E,T){var A=s(p,m,S&&!E);switch(T.type){case"element":return E+A+b(T,p,m);case"comment":return E+A+u(T[p.commentKey],p);case"doctype":return E+A+w(T[p.doctypeKey],p);case"cdata":return E+(p.indentCdata?A:"")+y(T[p.cdataKey],p);case"text":return E+(p.indentText?A:"")+v(T[p.textKey],p);case"instruction":var P={};return P[T[p.nameKey]]=T[p.attributesKey]?T:T[p.instructionKey],E+(p.indentInstruction?A:"")+o(P,p,m)}},"")}function _(c,p,m){var S;for(S in c)if(c.hasOwnProperty(S))switch(S){case p.parentKey:case p.attributesKey:break;case p.textKey:if(p.indentText||m)return!0;break;case p.cdataKey:if(p.indentCdata||m)return!0;break;case p.instructionKey:if(p.indentInstruction||m)return!0;break;case p.doctypeKey:case p.commentKey:return!0;default:return!0}return!1}function h(c,p,m,S,E){r=c,n=p;var T="elementNameFn"in m?m.elementNameFn(p,c):p;if(typeof c>"u"||c===null||c==="")return"fullTagEmptyElementFn"in m&&m.fullTagEmptyElementFn(p,c)||m.fullTagEmptyElement?"<"+T+"></"+T+">":"<"+T+"/>";var A=[];if(p){if(A.push("<"+T),typeof c!="object")return A.push(">"+v(c,m)+"</"+T+">"),A.join("");c[m.attributesKey]&&A.push(f(c[m.attributesKey],m,S));var P=_(c,m,!0)||c[m.attributesKey]&&c[m.attributesKey]["xml:space"]==="preserve";if(P||("fullTagEmptyElementFn"in m?P=m.fullTagEmptyElementFn(p,c):P=m.fullTagEmptyElement),P)A.push(">");else return A.push("/>"),A.join("")}return A.push(d(c,m,S+1,!1)),r=c,n=p,p&&A.push((E?s(m,S,!1):"")+"</"+T+">"),A.join("")}function d(c,p,m,S){var E,T,A,P=[];for(T in c)if(c.hasOwnProperty(T))for(A=e(c[T])?c[T]:[c[T]],E=0;E<A.length;++E){switch(T){case p.declarationKey:P.push(a(A[E],p,m));break;case p.instructionKey:P.push((p.indentInstruction?s(p,m,S):"")+o(A[E],p,m));break;case p.attributesKey:case p.parentKey:break;case p.textKey:P.push((p.indentText?s(p,m,S):"")+v(A[E],p));break;case p.cdataKey:P.push((p.indentCdata?s(p,m,S):"")+y(A[E],p));break;case p.doctypeKey:P.push(s(p,m,S)+w(A[E],p));break;case p.commentKey:P.push(s(p,m,S)+u(A[E],p));break;default:P.push(s(p,m,S)+h(A[E],T,p,m,_(A[E],p)))}S=S&&!P.length}return P.join("")}return js2xml=function(c,p){p=i(p);var m=[];return r=c,n="_root_",p.compact?m.push(d(c,p,0,!0)):(c[p.declarationKey]&&m.push(a(c[p.declarationKey],p,0)),c[p.elementsKey]&&c[p.elementsKey].length&&m.push(l(c[p.elementsKey],p,0,!m.length))),m.join("")},js2xml}var json2xml,hasRequiredJson2xml;function requireJson2xml(){if(hasRequiredJson2xml)return json2xml;hasRequiredJson2xml=1;var t=requireJs2xml();return json2xml=function(e,r){e instanceof Buffer&&(e=e.toString());var n=null;if(typeof e=="string")try{n=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else n=e;return t(n,r)},json2xml}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var t=requireXml2js(),e=requireXml2json(),r=requireJs2xml(),n=requireJson2xml();return lib={xml2js:t,xml2json:e,js2xml:r,json2xml:n},lib}var libExports=requireLib();const convertToXmlComponent=t=>{switch(t.type){case void 0:case"element":const e=new ImportedXmlComponent(t.name,t.attributes),r=t.elements||[];for(const n of r){const i=convertToXmlComponent(n);i!==void 0&&e.push(i)}return e;case"text":return t.text;default:return}};class ImportedXmlComponentAttributes extends XmlAttributeComponent{}class ImportedXmlComponent extends XmlComponent{static fromXmlString(e){const r=libExports.xml2js(e,{compact:!1});return convertToXmlComponent(r)}constructor(e,r){super(e),r&&this.root.push(new ImportedXmlComponentAttributes(r))}push(e){this.root.push(e)}}class ImportedRootElementAttributes extends XmlComponent{constructor(e){super(""),this._attr=e}prepForXml(e){return{_attr:this._attr}}}class InitializableXmlComponent extends XmlComponent{constructor(e,r){super(e),r&&(this.root=r.root)}}const decimalNumber=t=>{if(isNaN(t))throw new Error(`Invalid value '${t}' specified. Must be an integer.`);return Math.floor(t)},unsignedDecimalNumber=t=>{const e=decimalNumber(t);if(e<0)throw new Error(`Invalid value '${t}' specified. Must be a positive integer.`);return e},hexBinary=(t,e)=>{const r=e*2;if(t.length!==r||isNaN(+`0x${t}`))throw new Error(`Invalid hex value '${t}'. Expected ${r} digit hex value`);return t},uCharHexNumber=t=>hexBinary(t,1),universalMeasureValue=t=>{const e=t.slice(-2),r=t.substring(0,t.length-2);return`${Number(r)}${e}`},positiveUniversalMeasureValue=t=>{const e=universalMeasureValue(t);if(parseFloat(e)<0)throw new Error(`Invalid value '${e}' specified. Expected a positive number.`);return e},hexColorValue=t=>{if(t==="auto")return t;const e=t.charAt(0)==="#"?t.substring(1):t;return hexBinary(e,3)},signedTwipsMeasureValue=t=>typeof t=="string"?universalMeasureValue(t):decimalNumber(t),hpsMeasureValue=t=>typeof t=="string"?positiveUniversalMeasureValue(t):unsignedDecimalNumber(t),twipsMeasureValue=t=>typeof t=="string"?positiveUniversalMeasureValue(t):unsignedDecimalNumber(t),eighthPointMeasureValue=unsignedDecimalNumber,pointMeasureValue=unsignedDecimalNumber,dateTimeValue=t=>t.toISOString();class OnOffElement extends XmlComponent{constructor(e,r=!0){super(e),r!==!0&&this.root.push(new Attributes({val:r}))}}class HpsMeasureElement extends XmlComponent{constructor(e,r){super(e),this.root.push(new Attributes({val:hpsMeasureValue(r)}))}}class StringValueElement extends XmlComponent{constructor(e,r){super(e),this.root.push(new Attributes({val:r}))}}const createStringElement=(t,e)=>new BuilderElement({name:t,attributes:{value:{key:"w:val",value:e}}});class NumberValueElement extends XmlComponent{constructor(e,r){super(e),this.root.push(new Attributes({val:r}))}}class StringContainer extends XmlComponent{constructor(e,r){super(e),this.root.push(r)}}class BuilderElement extends XmlComponent{constructor({name:e,attributes:r,children:n}){super(e),r&&this.root.push(new NextAttributeComponent(r)),n&&this.root.push(...n)}}const AlignmentType={START:"start",LEFT:"left"};class AlignmentAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val"})}}class Alignment extends XmlComponent{constructor(e){super("w:jc"),this.root.push(new AlignmentAttributes({val:e}))}}class BorderElement extends XmlComponent{constructor(e,{color:r,size:n,space:i,style:s}){super(e),this.root.push(new BordersAttributes({style:s,color:r===void 0?void 0:hexColorValue(r),size:n===void 0?void 0:eighthPointMeasureValue(n),space:i===void 0?void 0:pointMeasureValue(i)}))}}class BordersAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{style:"w:val",color:"w:color",size:"w:sz",space:"w:space"})}}const BorderStyle={SINGLE:"single",NONE:"none"};class Border extends IgnoreIfEmptyXmlComponent{constructor(e){super("w:pBdr"),e.top&&this.root.push(new BorderElement("w:top",e.top)),e.bottom&&this.root.push(new BorderElement("w:bottom",e.bottom)),e.left&&this.root.push(new BorderElement("w:left",e.left)),e.right&&this.root.push(new BorderElement("w:right",e.right))}}class ThematicBreak extends XmlComponent{constructor(){super("w:pBdr");const e=new BorderElement("w:bottom",{color:"auto",space:1,style:BorderStyle.SINGLE,size:6});this.root.push(e)}}class Indent extends XmlComponent{constructor({start:e,end:r,left:n,right:i,hanging:s,firstLine:f}){super("w:ind"),this.root.push(new NextAttributeComponent({start:{key:"w:start",value:e===void 0?void 0:signedTwipsMeasureValue(e)},end:{key:"w:end",value:r===void 0?void 0:signedTwipsMeasureValue(r)},left:{key:"w:left",value:n===void 0?void 0:signedTwipsMeasureValue(n)},right:{key:"w:right",value:i===void 0?void 0:signedTwipsMeasureValue(i)},hanging:{key:"w:hanging",value:s===void 0?void 0:twipsMeasureValue(s)},firstLine:{key:"w:firstLine",value:f===void 0?void 0:twipsMeasureValue(f)}}))}}let Break$1=class extends XmlComponent{constructor(){super("w:br")}};const FieldCharacterType={BEGIN:"begin",END:"end",SEPARATE:"separate"};class FidCharAttrs extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{type:"w:fldCharType",dirty:"w:dirty"})}}class Begin extends XmlComponent{constructor(e){super("w:fldChar"),this.root.push(new FidCharAttrs({type:FieldCharacterType.BEGIN,dirty:e}))}}class Separate extends XmlComponent{constructor(e){super("w:fldChar"),this.root.push(new FidCharAttrs({type:FieldCharacterType.SEPARATE,dirty:e}))}}class End extends XmlComponent{constructor(e){super("w:fldChar"),this.root.push(new FidCharAttrs({type:FieldCharacterType.END,dirty:e}))}}const SpaceType={DEFAULT:"default",PRESERVE:"preserve"};class TextAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{space:"xml:space"})}}class Page extends XmlComponent{constructor(){super("w:instrText"),this.root.push(new TextAttributes({space:SpaceType.PRESERVE})),this.root.push("PAGE")}}class NumberOfPages extends XmlComponent{constructor(){super("w:instrText"),this.root.push(new TextAttributes({space:SpaceType.PRESERVE})),this.root.push("NUMPAGES")}}class NumberOfPagesSection extends XmlComponent{constructor(){super("w:instrText"),this.root.push(new TextAttributes({space:SpaceType.PRESERVE})),this.root.push("SECTIONPAGES")}}class CurrentSection extends XmlComponent{constructor(){super("w:instrText"),this.root.push(new TextAttributes({space:SpaceType.PRESERVE})),this.root.push("SECTION")}}class ShadingAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{fill:"w:fill",color:"w:color",type:"w:val"})}}class Shading extends XmlComponent{constructor({fill:e,color:r,type:n}){super("w:shd"),this.root.push(new ShadingAttributes({fill:e===void 0?void 0:hexColorValue(e),color:r===void 0?void 0:hexColorValue(r),type:n}))}}class ChangeAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{id:"w:id",author:"w:author",date:"w:date"})}}const EmphasisMarkType={DOT:"dot"};class BaseEmphasisMark extends XmlComponent{constructor(e){super("w:em"),this.root.push(new Attributes({val:e}))}}class EmphasisMark extends BaseEmphasisMark{constructor(e=EmphasisMarkType.DOT){super(e)}}class CharacterSpacing extends XmlComponent{constructor(e){super("w:spacing"),this.root.push(new Attributes({val:signedTwipsMeasureValue(e)}))}}class Color extends XmlComponent{constructor(e){super("w:color"),this.root.push(new Attributes({val:hexColorValue(e)}))}}class Highlight extends XmlComponent{constructor(e){super("w:highlight"),this.root.push(new Attributes({val:e}))}}class HighlightComplexScript extends XmlComponent{constructor(e){super("w:highlightCs"),this.root.push(new Attributes({val:e}))}}const createLanguageComponent=t=>new BuilderElement({name:"w:lang",attributes:{value:{key:"w:val",value:t.value},eastAsia:{key:"w:eastAsia",value:t.eastAsia},bidirectional:{key:"w:bidi",value:t.bidirectional}}});class RunFontAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{ascii:"w:ascii",cs:"w:cs",eastAsia:"w:eastAsia",hAnsi:"w:hAnsi",hint:"w:hint"})}}class RunFonts extends XmlComponent{constructor(e,r){if(super("w:rFonts"),typeof e=="string"){const n=e;this.root.push(new RunFontAttributes({ascii:n,cs:n,eastAsia:n,hAnsi:n,hint:r}))}else{const n=e;this.root.push(new RunFontAttributes(n))}}}let VerticalAlign$1=class extends XmlComponent{constructor(e){super("w:vertAlign"),this.root.push(new Attributes({val:e}))}};class SuperScript extends VerticalAlign$1{constructor(){super("superscript")}}class SubScript extends VerticalAlign$1{constructor(){super("subscript")}}const UnderlineType={SINGLE:"single"};class Underline extends XmlComponent{constructor(e=UnderlineType.SINGLE,r){super("w:u"),this.root.push(new Attributes({val:e,color:r===void 0?void 0:hexColorValue(r)}))}}class RunProperties extends IgnoreIfEmptyXmlComponent{constructor(e){var r,n;if(super("w:rPr"),!e)return;e.noProof!==void 0&&this.push(new OnOffElement("w:noProof",e.noProof)),e.bold!==void 0&&this.push(new OnOffElement("w:b",e.bold)),(e.boldComplexScript===void 0&&e.bold!==void 0||e.boldComplexScript)&&this.push(new OnOffElement("w:bCs",(r=e.boldComplexScript)!=null?r:e.bold)),e.italics!==void 0&&this.push(new OnOffElement("w:i",e.italics)),(e.italicsComplexScript===void 0&&e.italics!==void 0||e.italicsComplexScript)&&this.push(new OnOffElement("w:iCs",(n=e.italicsComplexScript)!=null?n:e.italics)),e.underline&&this.push(new Underline(e.underline.type,e.underline.color)),e.effect&&this.push(new StringValueElement("w:effect",e.effect)),e.emphasisMark&&this.push(new EmphasisMark(e.emphasisMark.type)),e.color&&this.push(new Color(e.color)),e.kern&&this.push(new HpsMeasureElement("w:kern",e.kern)),e.position&&this.push(new StringValueElement("w:position",e.position)),e.size!==void 0&&this.push(new HpsMeasureElement("w:sz",e.size));const i=e.sizeComplexScript===void 0||e.sizeComplexScript===!0?e.size:e.sizeComplexScript;i&&this.push(new HpsMeasureElement("w:szCs",i)),e.rightToLeft!==void 0&&this.push(new OnOffElement("w:rtl",e.rightToLeft)),e.smallCaps!==void 0?this.push(new OnOffElement("w:smallCaps",e.smallCaps)):e.allCaps!==void 0&&this.push(new OnOffElement("w:caps",e.allCaps)),e.strike!==void 0&&this.push(new OnOffElement("w:strike",e.strike)),e.doubleStrike!==void 0&&this.push(new OnOffElement("w:dstrike",e.doubleStrike)),e.subScript&&this.push(new SubScript),e.superScript&&this.push(new SuperScript),e.style&&this.push(new StringValueElement("w:rStyle",e.style)),e.font&&(typeof e.font=="string"?this.push(new RunFonts(e.font)):"name"in e.font?this.push(new RunFonts(e.font.name,e.font.hint)):this.push(new RunFonts(e.font))),e.highlight&&this.push(new Highlight(e.highlight));const s=e.highlightComplexScript===void 0||e.highlightComplexScript===!0?e.highlight:e.highlightComplexScript;s&&this.push(new HighlightComplexScript(s)),e.characterSpacing&&this.push(new CharacterSpacing(e.characterSpacing)),e.emboss!==void 0&&this.push(new OnOffElement("w:emboss",e.emboss)),e.imprint!==void 0&&this.push(new OnOffElement("w:imprint",e.imprint)),e.shading&&this.push(new Shading(e.shading)),e.revision&&this.push(new RunPropertiesChange(e.revision)),e.border&&this.push(new BorderElement("w:bdr",e.border)),e.snapToGrid!==void 0&&this.push(new OnOffElement("w:snapToGrid",e.snapToGrid)),e.vanish&&this.push(new OnOffElement("w:vanish",e.vanish)),e.specVanish&&this.push(new OnOffElement("w:specVanish",e.vanish)),e.scale!==void 0&&this.push(new NumberValueElement("w:w",e.scale)),e.language&&this.push(createLanguageComponent(e.language)),e.math&&this.push(new OnOffElement("w:oMath",e.math))}push(e){this.root.push(e)}}class RunPropertiesChange extends XmlComponent{constructor(e){super("w:rPrChange"),this.root.push(new ChangeAttributes({id:e.id,author:e.author,date:e.date})),this.addChildElement(new RunProperties(e))}}class Text extends XmlComponent{constructor(e){var r;super("w:t"),typeof e=="string"?(this.root.push(new TextAttributes({space:SpaceType.PRESERVE})),this.root.push(e)):(this.root.push(new TextAttributes({space:(r=e.space)!=null?r:SpaceType.DEFAULT})),this.root.push(e.text))}}const PageNumber={CURRENT:"CURRENT",TOTAL_PAGES:"TOTAL_PAGES",TOTAL_PAGES_IN_SECTION:"TOTAL_PAGES_IN_SECTION",CURRENT_SECTION:"SECTION"};class Run extends XmlComponent{constructor(e){if(super("w:r"),__publicField(this,"properties"),this.properties=new RunProperties(e),this.root.push(this.properties),e.break)for(let r=0;r<e.break;r++)this.root.push(new Break$1);if(e.children)for(const r of e.children){if(typeof r=="string"){switch(r){case PageNumber.CURRENT:this.root.push(new Begin),this.root.push(new Page),this.root.push(new Separate),this.root.push(new End);break;case PageNumber.TOTAL_PAGES:this.root.push(new Begin),this.root.push(new NumberOfPages),this.root.push(new Separate),this.root.push(new End);break;case PageNumber.TOTAL_PAGES_IN_SECTION:this.root.push(new Begin),this.root.push(new NumberOfPagesSection),this.root.push(new Separate),this.root.push(new End);break;case PageNumber.CURRENT_SECTION:this.root.push(new Begin),this.root.push(new CurrentSection),this.root.push(new Separate),this.root.push(new End);break;default:this.root.push(new Text(r));break}continue}this.root.push(r)}else e.text!==void 0&&this.root.push(new Text(e.text))}}class TextRun extends Run{constructor(e){super(typeof e=="string"?{text:e}:e)}}var hash$1={},utils$4={},minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},minimalisticAssert}var hasRequiredUtils$4;function requireUtils$4(){if(hasRequiredUtils$4)return utils$4;hasRequiredUtils$4=1;var t=requireMinimalisticAssert(),e=requireInherits_browser();utils$4.inherits=e;function r(O,q){return(O.charCodeAt(q)&64512)!==55296||q<0||q+1>=O.length?!1:(O.charCodeAt(q+1)&64512)===56320}function n(O,q){if(Array.isArray(O))return O.slice();if(!O)return[];var C=[];if(typeof O=="string")if(q){if(q==="hex")for(O=O.replace(/[^a-z0-9]+/ig,""),O.length%2!==0&&(O="0"+O),V=0;V<O.length;V+=2)C.push(parseInt(O[V]+O[V+1],16))}else for(var j=0,V=0;V<O.length;V++){var N=O.charCodeAt(V);N<128?C[j++]=N:N<2048?(C[j++]=N>>6|192,C[j++]=N&63|128):r(O,V)?(N=65536+((N&1023)<<10)+(O.charCodeAt(++V)&1023),C[j++]=N>>18|240,C[j++]=N>>12&63|128,C[j++]=N>>6&63|128,C[j++]=N&63|128):(C[j++]=N>>12|224,C[j++]=N>>6&63|128,C[j++]=N&63|128)}else for(V=0;V<O.length;V++)C[V]=O[V]|0;return C}utils$4.toArray=n;function i(O){for(var q="",C=0;C<O.length;C++)q+=a(O[C].toString(16));return q}utils$4.toHex=i;function s(O){var q=O>>>24|O>>>8&65280|O<<8&16711680|(O&255)<<24;return q>>>0}utils$4.htonl=s;function f(O,q){for(var C="",j=0;j<O.length;j++){var V=O[j];q==="little"&&(V=s(V)),C+=o(V.toString(16))}return C}utils$4.toHex32=f;function a(O){return O.length===1?"0"+O:O}utils$4.zero2=a;function o(O){return O.length===7?"0"+O:O.length===6?"00"+O:O.length===5?"000"+O:O.length===4?"0000"+O:O.length===3?"00000"+O:O.length===2?"000000"+O:O.length===1?"0000000"+O:O}utils$4.zero8=o;function u(O,q,C,j){var V=C-q;t(V%4===0);for(var N=new Array(V/4),Y=0,X=q;Y<N.length;Y++,X+=4){var J;j==="big"?J=O[X]<<24|O[X+1]<<16|O[X+2]<<8|O[X+3]:J=O[X+3]<<24|O[X+2]<<16|O[X+1]<<8|O[X],N[Y]=J>>>0}return N}utils$4.join32=u;function y(O,q){for(var C=new Array(O.length*4),j=0,V=0;j<O.length;j++,V+=4){var N=O[j];q==="big"?(C[V]=N>>>24,C[V+1]=N>>>16&255,C[V+2]=N>>>8&255,C[V+3]=N&255):(C[V+3]=N>>>24,C[V+2]=N>>>16&255,C[V+1]=N>>>8&255,C[V]=N&255)}return C}utils$4.split32=y;function w(O,q){return O>>>q|O<<32-q}utils$4.rotr32=w;function v(O,q){return O<<q|O>>>32-q}utils$4.rotl32=v;function g(O,q){return O+q>>>0}utils$4.sum32=g;function b(O,q,C){return O+q+C>>>0}utils$4.sum32_3=b;function l(O,q,C,j){return O+q+C+j>>>0}utils$4.sum32_4=l;function _(O,q,C,j,V){return O+q+C+j+V>>>0}utils$4.sum32_5=_;function h(O,q,C,j){var V=O[q],N=O[q+1],Y=j+N>>>0,X=(Y<j?1:0)+C+V;O[q]=X>>>0,O[q+1]=Y}utils$4.sum64=h;function d(O,q,C,j){var V=q+j>>>0,N=(V<q?1:0)+O+C;return N>>>0}utils$4.sum64_hi=d;function c(O,q,C,j){var V=q+j;return V>>>0}utils$4.sum64_lo=c;function p(O,q,C,j,V,N,Y,X){var J=0,Q=q;Q=Q+j>>>0,J+=Q<q?1:0,Q=Q+N>>>0,J+=Q<N?1:0,Q=Q+X>>>0,J+=Q<X?1:0;var W=O+C+V+Y+J;return W>>>0}utils$4.sum64_4_hi=p;function m(O,q,C,j,V,N,Y,X){var J=q+j+N+X;return J>>>0}utils$4.sum64_4_lo=m;function S(O,q,C,j,V,N,Y,X,J,Q){var W=0,U=q;U=U+j>>>0,W+=U<q?1:0,U=U+N>>>0,W+=U<N?1:0,U=U+X>>>0,W+=U<X?1:0,U=U+Q>>>0,W+=U<Q?1:0;var $=O+C+V+Y+J+W;return $>>>0}utils$4.sum64_5_hi=S;function E(O,q,C,j,V,N,Y,X,J,Q){var W=q+j+N+X+Q;return W>>>0}utils$4.sum64_5_lo=E;function T(O,q,C){var j=q<<32-C|O>>>C;return j>>>0}utils$4.rotr64_hi=T;function A(O,q,C){var j=O<<32-C|q>>>C;return j>>>0}utils$4.rotr64_lo=A;function P(O,q,C){return O>>>C}utils$4.shr64_hi=P;function H(O,q,C){var j=O<<32-C|q>>>C;return j>>>0}return utils$4.shr64_lo=H,utils$4}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var t=requireUtils$4(),e=requireMinimalisticAssert();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var f=i.length%this._delta8;this.pending=i.slice(i.length-f,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-f,this.endian);for(var a=0;a<i.length;a+=this._delta32)this._update(i,a,a+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,f=s-(i+this.padLength)%s,a=new Array(f+this.padLength);a[0]=128;for(var o=1;o<f;o++)a[o]=0;if(i<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)a[o++]=0;a[o++]=0,a[o++]=0,a[o++]=0,a[o++]=0,a[o++]=i>>>24&255,a[o++]=i>>>16&255,a[o++]=i>>>8&255,a[o++]=i&255}else for(a[o++]=i&255,a[o++]=i>>>8&255,a[o++]=i>>>16&255,a[o++]=i>>>24&255,a[o++]=0,a[o++]=0,a[o++]=0,a[o++]=0,u=8;u<this.padLength;u++)a[o++]=0;return a},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var t=requireUtils$4(),e=t.rotr32;function r(y,w,v,g){if(y===0)return n(w,v,g);if(y===1||y===3)return s(w,v,g);if(y===2)return i(w,v,g)}common.ft_1=r;function n(y,w,v){return y&w^~y&v}common.ch32=n;function i(y,w,v){return y&w^y&v^w&v}common.maj32=i;function s(y,w,v){return y^w^v}common.p32=s;function f(y){return e(y,2)^e(y,13)^e(y,22)}common.s0_256=f;function a(y){return e(y,6)^e(y,11)^e(y,25)}common.s1_256=a;function o(y){return e(y,7)^e(y,18)^y>>>3}common.g0_256=o;function u(y){return e(y,17)^e(y,19)^y>>>10}return common.g1_256=u,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var t=requireUtils$4(),e=requireCommon$1(),r=requireCommon(),n=t.rotl32,i=t.sum32,s=t.sum32_5,f=r.ft_1,a=e.BlockHash,o=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(u,a),_1=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(w,v){for(var g=this.W,b=0;b<16;b++)g[b]=w[v+b];for(;b<g.length;b++)g[b]=n(g[b-3]^g[b-8]^g[b-14]^g[b-16],1);var l=this.h[0],_=this.h[1],h=this.h[2],d=this.h[3],c=this.h[4];for(b=0;b<g.length;b++){var p=~~(b/20),m=s(n(l,5),f(p,_,h,d),c,g[b],o[p]);c=d,d=h,h=n(_,30),_=l,l=m}this.h[0]=i(this.h[0],l),this.h[1]=i(this.h[1],_),this.h[2]=i(this.h[2],h),this.h[3]=i(this.h[3],d),this.h[4]=i(this.h[4],c)},u.prototype._digest=function(w){return w==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var t=requireUtils$4(),e=requireCommon$1(),r=requireCommon(),n=requireMinimalisticAssert(),i=t.sum32,s=t.sum32_4,f=t.sum32_5,a=r.ch32,o=r.maj32,u=r.s0_256,y=r.s1_256,w=r.g0_256,v=r.g1_256,g=e.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function l(){if(!(this instanceof l))return new l;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}return t.inherits(l,g),_256=l,l.blockSize=512,l.outSize=256,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(h,d){for(var c=this.W,p=0;p<16;p++)c[p]=h[d+p];for(;p<c.length;p++)c[p]=s(v(c[p-2]),c[p-7],w(c[p-15]),c[p-16]);var m=this.h[0],S=this.h[1],E=this.h[2],T=this.h[3],A=this.h[4],P=this.h[5],H=this.h[6],O=this.h[7];for(n(this.k.length===c.length),p=0;p<c.length;p++){var q=f(O,y(A),a(A,P,H),this.k[p],c[p]),C=i(u(m),o(m,S,E));O=H,H=P,P=A,A=i(T,q),T=E,E=S,S=m,m=i(q,C)}this.h[0]=i(this.h[0],m),this.h[1]=i(this.h[1],S),this.h[2]=i(this.h[2],E),this.h[3]=i(this.h[3],T),this.h[4]=i(this.h[4],A),this.h[5]=i(this.h[5],P),this.h[6]=i(this.h[6],H),this.h[7]=i(this.h[7],O)},l.prototype._digest=function(h){return h==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var t=requireUtils$4(),e=require_256();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),_224=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var t=requireUtils$4(),e=requireCommon$1(),r=requireMinimalisticAssert(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,f=t.shr64_lo,a=t.sum64,o=t.sum64_hi,u=t.sum64_lo,y=t.sum64_4_hi,w=t.sum64_4_lo,v=t.sum64_5_hi,g=t.sum64_5_lo,b=e.BlockHash,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=l,this.W=new Array(160)}t.inherits(_,b),_512=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(C,j){for(var V=this.W,N=0;N<32;N++)V[N]=C[j+N];for(;N<V.length;N+=2){var Y=H(V[N-4],V[N-3]),X=O(V[N-4],V[N-3]),J=V[N-14],Q=V[N-13],W=A(V[N-30],V[N-29]),U=P(V[N-30],V[N-29]),$=V[N-32],ee=V[N-31];V[N]=y(Y,X,J,Q,W,U,$,ee),V[N+1]=w(Y,X,J,Q,W,U,$,ee)}},_.prototype._update=function(C,j){this._prepareBlock(C,j);var V=this.W,N=this.h[0],Y=this.h[1],X=this.h[2],J=this.h[3],Q=this.h[4],W=this.h[5],U=this.h[6],$=this.h[7],ee=this.h[8],Z=this.h[9],L=this.h[10],I=this.h[11],k=this.h[12],B=this.h[13],F=this.h[14],K=this.h[15];r(this.k.length===V.length);for(var te=0;te<V.length;te+=2){var M=F,ne=K,D=E(ee,Z),x=T(ee,Z),R=h(ee,Z,L,I,k),G=d(ee,Z,L,I,k,B),ie=this.k[te],ae=this.k[te+1],se=V[te],ue=V[te+1],le=v(M,ne,D,x,R,G,ie,ae,se,ue),de=g(M,ne,D,x,R,G,ie,ae,se,ue);M=m(N,Y),ne=S(N,Y),D=c(N,Y,X,J,Q),x=p(N,Y,X,J,Q,W);var he=o(M,ne,D,x),ge=u(M,ne,D,x);F=k,K=B,k=L,B=I,L=ee,I=Z,ee=o(U,$,le,de),Z=u($,$,le,de),U=Q,$=W,Q=X,W=J,X=N,J=Y,N=o(le,de,he,ge),Y=u(le,de,he,ge)}a(this.h,0,N,Y),a(this.h,2,X,J),a(this.h,4,Q,W),a(this.h,6,U,$),a(this.h,8,ee,Z),a(this.h,10,L,I),a(this.h,12,k,B),a(this.h,14,F,K)},_.prototype._digest=function(C){return C==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function h(q,C,j,V,N){var Y=q&j^~q&N;return Y<0&&(Y+=4294967296),Y}function d(q,C,j,V,N,Y){var X=C&V^~C&Y;return X<0&&(X+=4294967296),X}function c(q,C,j,V,N){var Y=q&j^q&N^j&N;return Y<0&&(Y+=4294967296),Y}function p(q,C,j,V,N,Y){var X=C&V^C&Y^V&Y;return X<0&&(X+=4294967296),X}function m(q,C){var j=n(q,C,28),V=n(C,q,2),N=n(C,q,7),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function S(q,C){var j=i(q,C,28),V=i(C,q,2),N=i(C,q,7),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function E(q,C){var j=n(q,C,14),V=n(q,C,18),N=n(C,q,9),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function T(q,C){var j=i(q,C,14),V=i(q,C,18),N=i(C,q,9),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function A(q,C){var j=n(q,C,1),V=n(q,C,8),N=s(q,C,7),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function P(q,C){var j=i(q,C,1),V=i(q,C,8),N=f(q,C,7),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function H(q,C){var j=n(q,C,19),V=n(C,q,29),N=s(q,C,6),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}function O(q,C){var j=i(q,C,19),V=i(C,q,29),N=f(q,C,6),Y=j^V^N;return Y<0&&(Y+=4294967296),Y}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var t=requireUtils$4(),e=require_512();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),_384=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var t=requireUtils$4(),e=requireCommon$1(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,f=e.BlockHash;function a(){if(!(this instanceof a))return new a;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(a,f),ripemd.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(_,h){for(var d=this.h[0],c=this.h[1],p=this.h[2],m=this.h[3],S=this.h[4],E=d,T=c,A=p,P=m,H=S,O=0;O<80;O++){var q=n(r(s(d,o(O,c,p,m),_[w[O]+h],u(O)),g[O]),S);d=S,S=m,m=r(p,10),p=c,c=q,q=n(r(s(E,o(79-O,T,A,P),_[v[O]+h],y(O)),b[O]),H),E=H,H=P,P=r(A,10),A=T,T=q}q=i(this.h[1],p,P),this.h[1]=i(this.h[2],m,H),this.h[2]=i(this.h[3],S,E),this.h[3]=i(this.h[4],d,T),this.h[4]=i(this.h[0],c,A),this.h[0]=q},a.prototype._digest=function(_){return _==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function o(l,_,h,d){return l<=15?_^h^d:l<=31?_&h|~_&d:l<=47?(_|~h)^d:l<=63?_&d|h&~d:_^(h|~d)}function u(l){return l<=15?0:l<=31?1518500249:l<=47?1859775393:l<=63?2400959708:2840853838}function y(l){return l<=15?1352829926:l<=31?1548603684:l<=47?1836072691:l<=63?2053994217:0}var w=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var t=requireUtils$4(),e=requireMinimalisticAssert();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return hmac=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(t){var e=t;e.utils=requireUtils$4(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hash$1)),hash$1}requireHash();let urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",customAlphabet=(t,e=21)=>(r=e)=>{let n="",i=r|0;for(;i--;)n+=t[Math.random()*t.length|0];return n},nanoid=(t=21)=>{let e="",r=t|0;for(;r--;)e+=urlAlphabet[Math.random()*64|0];return e};const convertInchesToTwip=t=>Math.floor(t*72*20),uniqueNumericIdCreator=(t=0)=>{let e=t;return()=>++e},abstractNumUniqueNumericIdGen=()=>uniqueNumericIdCreator(),concreteNumUniqueNumericIdGen=()=>uniqueNumericIdCreator(1),bookmarkUniqueNumericIdGen=()=>uniqueNumericIdCreator(),uniqueId=()=>nanoid().toLowerCase(),generateUuidPart=t=>customAlphabet("1234567890abcdef",t)(),uniqueUuid=()=>`${generateUuidPart(8)}-${generateUuidPart(4)}-${generateUuidPart(4)}-${generateUuidPart(4)}-${generateUuidPart(12)}`;class RelationshipsAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{xmlns:"xmlns"})}}class RelationshipAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{id:"Id",type:"Type",target:"Target",targetMode:"TargetMode"})}}const TargetModeType={EXTERNAL:"External"};class Relationship extends XmlComponent{constructor(e,r,n,i){super("Relationship"),this.root.push(new RelationshipAttributes({id:e,type:r,target:n,targetMode:i}))}}class Relationships extends XmlComponent{constructor(){super("Relationships"),this.root.push(new RelationshipsAttributes({xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}))}createRelationship(e,r,n,i){const s=new Relationship(`rId${e}`,r,n,i);return this.root.push(s),s}get RelationshipCount(){return this.root.length-1}}class CommentAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{id:"w:id",initials:"w:initials",author:"w:author",date:"w:date"})}}class RootCommentsAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{"xmlns:cx":"xmlns:cx","xmlns:cx1":"xmlns:cx1","xmlns:cx2":"xmlns:cx2","xmlns:cx3":"xmlns:cx3","xmlns:cx4":"xmlns:cx4","xmlns:cx5":"xmlns:cx5","xmlns:cx6":"xmlns:cx6","xmlns:cx7":"xmlns:cx7","xmlns:cx8":"xmlns:cx8","xmlns:mc":"xmlns:mc","xmlns:aink":"xmlns:aink","xmlns:am3d":"xmlns:am3d","xmlns:o":"xmlns:o","xmlns:r":"xmlns:r","xmlns:m":"xmlns:m","xmlns:v":"xmlns:v","xmlns:wp14":"xmlns:wp14","xmlns:wp":"xmlns:wp","xmlns:w10":"xmlns:w10","xmlns:w":"xmlns:w","xmlns:w14":"xmlns:w14","xmlns:w15":"xmlns:w15","xmlns:w16cex":"xmlns:w16cex","xmlns:w16cid":"xmlns:w16cid","xmlns:w16":"xmlns:w16","xmlns:w16sdtdh":"xmlns:w16sdtdh","xmlns:w16se":"xmlns:w16se","xmlns:wpg":"xmlns:wpg","xmlns:wpi":"xmlns:wpi","xmlns:wne":"xmlns:wne","xmlns:wps":"xmlns:wps"})}}class Comment extends XmlComponent{constructor({id:e,initials:r,author:n,date:i=new Date,children:s}){super("w:comment"),this.root.push(new CommentAttributes({id:e,initials:r,author:n,date:i.toISOString()}));for(const f of s)this.root.push(f)}}class Comments extends XmlComponent{constructor({children:e}){super("w:comments"),__publicField(this,"relationships"),this.root.push(new RootCommentsAttributes({"xmlns:cx":"http://schemas.microsoft.com/office/drawing/2014/chartex","xmlns:cx1":"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex","xmlns:cx2":"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex","xmlns:cx3":"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex","xmlns:cx4":"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex","xmlns:cx5":"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex","xmlns:cx6":"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex","xmlns:cx7":"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex","xmlns:cx8":"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:aink":"http://schemas.microsoft.com/office/drawing/2016/ink","xmlns:am3d":"http://schemas.microsoft.com/office/drawing/2017/model3d","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:m":"http://schemas.openxmlformats.org/officeDocument/2006/math","xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:wp14":"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing","xmlns:wp":"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing","xmlns:w10":"urn:schemas-microsoft-com:office:word","xmlns:w":"http://schemas.openxmlformats.org/wordprocessingml/2006/main","xmlns:w14":"http://schemas.microsoft.com/office/word/2010/wordml","xmlns:w15":"http://schemas.microsoft.com/office/word/2012/wordml","xmlns:w16cex":"http://schemas.microsoft.com/office/word/2018/wordml/cex","xmlns:w16cid":"http://schemas.microsoft.com/office/word/2016/wordml/cid","xmlns:w16":"http://schemas.microsoft.com/office/word/2018/wordml","xmlns:w16sdtdh":"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash","xmlns:w16se":"http://schemas.microsoft.com/office/word/2015/wordml/symex","xmlns:wpg":"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup","xmlns:wpi":"http://schemas.microsoft.com/office/word/2010/wordprocessingInk","xmlns:wne":"http://schemas.microsoft.com/office/word/2006/wordml","xmlns:wps":"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}));for(const r of e)this.root.push(new Comment(r));this.relationships=new Relationships}get Relationships(){return this.relationships}}class PageBreakBefore extends XmlComponent{constructor(){super("w:pageBreakBefore")}}const LineRuleType={AUTO:"auto"};class SpacingAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{after:"w:after",before:"w:before",line:"w:line",lineRule:"w:lineRule",beforeAutoSpacing:"w:beforeAutospacing",afterAutoSpacing:"w:afterAutospacing"})}}class Spacing extends XmlComponent{constructor(e){super("w:spacing"),this.root.push(new SpacingAttributes(e))}}let Style$1=class extends XmlComponent{constructor(e){super("w:pStyle"),this.root.push(new Attributes({val:e}))}};class TabStop extends XmlComponent{constructor(e){super("w:tabs");for(const r of e)this.root.push(new TabStopItem(r))}}const TabStopType={LEFT:"left",RIGHT:"right"};class TabAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val",pos:"w:pos",leader:"w:leader"})}}class TabStopItem extends XmlComponent{constructor({type:e,position:r,leader:n}){super("w:tab"),this.root.push(new TabAttributes({val:e,pos:r,leader:n}))}}class NumberProperties extends XmlComponent{constructor(e,r){super("w:numPr"),this.root.push(new IndentLevel(r)),this.root.push(new NumberId(e))}}class IndentLevel extends XmlComponent{constructor(e){if(super("w:ilvl"),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new Attributes({val:e}))}}class NumberId extends XmlComponent{constructor(e){super("w:numId"),this.root.push(new Attributes({val:typeof e=="string"?`{${e}}`:e}))}}class FileChild extends XmlComponent{constructor(){super(...arguments),__publicField(this,"fileChild",Symbol())}}class HyperlinkAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{id:"r:id",history:"w:history",anchor:"w:anchor"})}}class ConcreteHyperlink extends XmlComponent{constructor(e,r,n){super("w:hyperlink"),__publicField(this,"linkId"),this.linkId=r;const i={history:1,anchor:n||void 0,id:n?void 0:`rId${this.linkId}`},s=new HyperlinkAttributes(i);this.root.push(s),e.forEach(f=>{this.root.push(f)})}}class ExternalHyperlink extends XmlComponent{constructor(e){super("w:externalHyperlink"),this.options=e}}class BookmarkStartAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{id:"w:id",name:"w:name"})}}class BookmarkEndAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{id:"w:id"})}}class Bookmark{constructor(e){__publicField(this,"bookmarkUniqueNumericId",bookmarkUniqueNumericIdGen()),__publicField(this,"start"),__publicField(this,"children"),__publicField(this,"end");const r=this.bookmarkUniqueNumericId();this.start=new BookmarkStart(e.id,r),this.children=e.children,this.end=new BookmarkEnd(r)}}class BookmarkStart extends XmlComponent{constructor(e,r){super("w:bookmarkStart");const n=new BookmarkStartAttributes({name:e,id:r});this.root.push(n)}}class BookmarkEnd extends XmlComponent{constructor(e){super("w:bookmarkEnd");const r=new BookmarkEndAttributes({id:e});this.root.push(r)}}class OutlineLevel extends XmlComponent{constructor(e){super("w:outlineLvl"),this.level=e,this.root.push(new Attributes({val:e}))}}class VerticalAlignAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{verticalAlign:"w:val"})}}class VerticalAlignElement extends XmlComponent{constructor(e){super("w:vAlign"),this.root.push(new VerticalAlignAttributes({verticalAlign:e}))}}class Columns extends XmlComponent{constructor({space:e,count:r,separate:n,equalWidth:i,children:s}){super("w:cols"),this.root.push(new NextAttributeComponent({space:{key:"w:space",value:e===void 0?void 0:twipsMeasureValue(e)},count:{key:"w:num",value:r===void 0?void 0:decimalNumber(r)},separate:{key:"w:sep",value:n},equalWidth:{key:"w:equalWidth",value:i}})),!i&&s&&s.forEach(f=>this.addChildElement(f))}}const createDocumentGrid=({type:t,linePitch:e,charSpace:r})=>new BuilderElement({name:"w:docGrid",attributes:{type:{key:"w:type",value:t},linePitch:{key:"w:linePitch",value:decimalNumber(e)},charSpace:{key:"w:charSpace",value:r?decimalNumber(r):void 0}}}),HeaderFooterReferenceType={DEFAULT:"default",FIRST:"first",EVEN:"even"};class FooterReferenceAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{type:"w:type",id:"r:id"})}}const HeaderFooterType={HEADER:"w:headerReference",FOOTER:"w:footerReference"};class HeaderFooterReference extends XmlComponent{constructor(e,r){super(e),this.root.push(new FooterReferenceAttributes({type:r.type||HeaderFooterReferenceType.DEFAULT,id:`rId${r.id}`}))}}const createLineNumberType=({countBy:t,start:e,restart:r,distance:n})=>new BuilderElement({name:"w:lnNumType",attributes:{countBy:{key:"w:countBy",value:t===void 0?void 0:decimalNumber(t)},start:{key:"w:start",value:e===void 0?void 0:decimalNumber(e)},restart:{key:"w:restart",value:r},distance:{key:"w:distance",value:n===void 0?void 0:twipsMeasureValue(n)}}});class PageBordersAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{display:"w:display",offsetFrom:"w:offsetFrom",zOrder:"w:zOrder"})}}class PageBorders extends IgnoreIfEmptyXmlComponent{constructor(e){if(super("w:pgBorders"),!e)return this;e.pageBorders?this.root.push(new PageBordersAttributes({display:e.pageBorders.display,offsetFrom:e.pageBorders.offsetFrom,zOrder:e.pageBorders.zOrder})):this.root.push(new PageBordersAttributes({})),e.pageBorderTop&&this.root.push(new BorderElement("w:top",e.pageBorderTop)),e.pageBorderLeft&&this.root.push(new BorderElement("w:left",e.pageBorderLeft)),e.pageBorderBottom&&this.root.push(new BorderElement("w:bottom",e.pageBorderBottom)),e.pageBorderRight&&this.root.push(new BorderElement("w:right",e.pageBorderRight))}}class PageMargin extends XmlComponent{constructor(e,r,n,i,s,f,a){super("w:pgMar"),this.root.push(new NextAttributeComponent({top:{key:"w:top",value:signedTwipsMeasureValue(e)},right:{key:"w:right",value:twipsMeasureValue(r)},bottom:{key:"w:bottom",value:signedTwipsMeasureValue(n)},left:{key:"w:left",value:twipsMeasureValue(i)},header:{key:"w:header",value:twipsMeasureValue(s)},footer:{key:"w:footer",value:twipsMeasureValue(f)},gutter:{key:"w:gutter",value:twipsMeasureValue(a)}}))}}class PageNumberTypeAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{start:"w:start",formatType:"w:fmt",separator:"w:chapSep"})}}class PageNumberType extends XmlComponent{constructor({start:e,formatType:r,separator:n}){super("w:pgNumType"),this.root.push(new PageNumberTypeAttributes({start:e===void 0?void 0:decimalNumber(e),formatType:r,separator:n}))}}const PageOrientation={PORTRAIT:"portrait",LANDSCAPE:"landscape"},createPageSize=({width:t,height:e,orientation:r,code:n})=>{const i=twipsMeasureValue(t),s=twipsMeasureValue(e);return new BuilderElement({name:"w:pgSz",attributes:{width:{key:"w:w",value:r===PageOrientation.LANDSCAPE?s:i},height:{key:"w:h",value:r===PageOrientation.LANDSCAPE?i:s},orientation:{key:"w:orient",value:r},code:{key:"w:code",value:n}}})};class PageTextDirectionAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val"})}}class PageTextDirection extends XmlComponent{constructor(e){super("w:textDirection"),this.root.push(new PageTextDirectionAttributes({val:e}))}}class SectionTypeAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val"})}}class Type extends XmlComponent{constructor(e){super("w:type"),this.root.push(new SectionTypeAttributes({val:e}))}}const sectionMarginDefaults={TOP:1440,RIGHT:1440,BOTTOM:1440,LEFT:1440,HEADER:708,FOOTER:708,GUTTER:0},sectionPageSizeDefaults={WIDTH:11906,HEIGHT:16838,ORIENTATION:PageOrientation.PORTRAIT};class SectionProperties extends XmlComponent{constructor({page:{size:{width:e=sectionPageSizeDefaults.WIDTH,height:r=sectionPageSizeDefaults.HEIGHT,orientation:n=sectionPageSizeDefaults.ORIENTATION}={},margin:{top:i=sectionMarginDefaults.TOP,right:s=sectionMarginDefaults.RIGHT,bottom:f=sectionMarginDefaults.BOTTOM,left:a=sectionMarginDefaults.LEFT,header:o=sectionMarginDefaults.HEADER,footer:u=sectionMarginDefaults.FOOTER,gutter:y=sectionMarginDefaults.GUTTER}={},pageNumbers:w={},borders:v,textDirection:g}={},grid:{linePitch:b=360,charSpace:l,type:_}={},headerWrapperGroup:h={},footerWrapperGroup:d={},lineNumbers:c,titlePage:p,verticalAlign:m,column:S,type:E}={}){super("w:sectPr"),this.addHeaderFooterGroup(HeaderFooterType.HEADER,h),this.addHeaderFooterGroup(HeaderFooterType.FOOTER,d),E&&this.root.push(new Type(E)),this.root.push(createPageSize({width:e,height:r,orientation:n})),this.root.push(new PageMargin(i,s,f,a,o,u,y)),v&&this.root.push(new PageBorders(v)),c&&this.root.push(createLineNumberType(c)),this.root.push(new PageNumberType(w)),S&&this.root.push(new Columns(S)),m&&this.root.push(new VerticalAlignElement(m)),p!==void 0&&this.root.push(new OnOffElement("w:titlePg",p)),g&&this.root.push(new PageTextDirection(g)),this.root.push(createDocumentGrid({linePitch:b,charSpace:l,type:_}))}addHeaderFooterGroup(e,r){r.default&&this.root.push(new HeaderFooterReference(e,{type:HeaderFooterReferenceType.DEFAULT,id:r.default.View.ReferenceId})),r.first&&this.root.push(new HeaderFooterReference(e,{type:HeaderFooterReferenceType.FIRST,id:r.first.View.ReferenceId})),r.even&&this.root.push(new HeaderFooterReference(e,{type:HeaderFooterReferenceType.EVEN,id:r.even.View.ReferenceId}))}}class Body extends XmlComponent{constructor(){super("w:body"),__publicField(this,"sections",[])}addSection(e){const r=this.sections.pop();this.root.push(this.createSectionParagraph(r)),this.sections.push(new SectionProperties(e))}prepForXml(e){return this.sections.length===1&&(this.root.splice(0,1),this.root.push(this.sections.pop())),super.prepForXml(e)}push(e){this.root.push(e)}createSectionParagraph(e){const r=new Paragraph({}),n=new ParagraphProperties({});return n.push(e),r.addChildElement(n),r}}const DocumentAttributeNamespaces={wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",aink:"http://schemas.microsoft.com/office/drawing/2016/ink",am3d:"http://schemas.microsoft.com/office/drawing/2017/model3d",w16cex:"http://schemas.microsoft.com/office/word/2018/wordml/cex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16:"http://schemas.microsoft.com/office/word/2018/wordml",w16sdtdh:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"};class DocumentAttributes extends XmlAttributeComponent{constructor(e,r){super(__spreadValues({Ignorable:r},Object.fromEntries(e.map(n=>[n,DocumentAttributeNamespaces[n]])))),__publicField(this,"xmlKeys",__spreadValues({Ignorable:"mc:Ignorable"},Object.fromEntries(Object.keys(DocumentAttributeNamespaces).map(n=>[n,`xmlns:${n}`]))))}}class DocumentBackgroundAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{color:"w:color",themeColor:"w:themeColor",themeShade:"w:themeShade",themeTint:"w:themeTint"})}}class DocumentBackground extends XmlComponent{constructor(e){super("w:background"),this.root.push(new DocumentBackgroundAttributes({color:e.color===void 0?void 0:hexColorValue(e.color),themeColor:e.themeColor,themeShade:e.themeShade===void 0?void 0:uCharHexNumber(e.themeShade),themeTint:e.themeTint===void 0?void 0:uCharHexNumber(e.themeTint)}))}}class Document extends XmlComponent{constructor(e){super("w:document"),__publicField(this,"body"),this.root.push(new DocumentAttributes(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps","cx","cx1","cx2","cx3","cx4","cx5","cx6","cx7","cx8","aink","am3d","w16cex","w16cid","w16","w16sdtdh","w16se"],"w14 w15 wp14")),this.body=new Body,e.background&&this.root.push(new DocumentBackground(e.background)),this.root.push(this.body)}add(e){return this.body.push(e),this}get Body(){return this.body}}class DocumentWrapper{constructor(e){__publicField(this,"document"),__publicField(this,"relationships"),this.document=new Document(e),this.relationships=new Relationships}get View(){return this.document}get Relationships(){return this.relationships}}class WordWrapAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val"})}}class WordWrap extends XmlComponent{constructor(){super("w:wordWrap"),this.root.push(new WordWrapAttributes({val:0}))}}const createFrameProperties=t=>{var e,r;return new BuilderElement({name:"w:framePr",attributes:{anchorLock:{key:"w:anchorLock",value:t.anchorLock},dropCap:{key:"w:dropCap",value:t.dropCap},width:{key:"w:w",value:t.width},height:{key:"w:h",value:t.height},x:{key:"w:x",value:t.position?t.position.x:void 0},y:{key:"w:y",value:t.position?t.position.y:void 0},anchorHorizontal:{key:"w:hAnchor",value:t.anchor.horizontal},anchorVertical:{key:"w:vAnchor",value:t.anchor.vertical},spaceHorizontal:{key:"w:hSpace",value:(e=t.space)==null?void 0:e.horizontal},spaceVertical:{key:"w:vSpace",value:(r=t.space)==null?void 0:r.vertical},rule:{key:"w:hRule",value:t.rule},alignmentX:{key:"w:xAlign",value:t.alignment?t.alignment.x:void 0},alignmentY:{key:"w:yAlign",value:t.alignment?t.alignment.y:void 0},lines:{key:"w:lines",value:t.lines},wrap:{key:"w:wrap",value:t.wrap}}})};class ParagraphProperties extends IgnoreIfEmptyXmlComponent{constructor(e){var r,n;if(super("w:pPr"),__publicField(this,"numberingReferences",[]),!e)return this;e.heading&&this.push(new Style$1(e.heading)),e.bullet&&this.push(new Style$1("ListParagraph")),e.numbering&&!e.style&&!e.heading&&(e.numbering.custom||this.push(new Style$1("ListParagraph"))),e.style&&this.push(new Style$1(e.style)),e.keepNext!==void 0&&this.push(new OnOffElement("w:keepNext",e.keepNext)),e.keepLines!==void 0&&this.push(new OnOffElement("w:keepLines",e.keepLines)),e.pageBreakBefore&&this.push(new PageBreakBefore),e.frame&&this.push(createFrameProperties(e.frame)),e.widowControl!==void 0&&this.push(new OnOffElement("w:widowControl",e.widowControl)),e.bullet&&this.push(new NumberProperties(1,e.bullet.level)),e.numbering?(this.numberingReferences.push({reference:e.numbering.reference,instance:(r=e.numbering.instance)!=null?r:0}),this.push(new NumberProperties(`${e.numbering.reference}-${(n=e.numbering.instance)!=null?n:0}`,e.numbering.level))):e.numbering===!1&&this.push(new NumberProperties(0,0)),e.border&&this.push(new Border(e.border)),e.thematicBreak&&this.push(new ThematicBreak),e.shading&&this.push(new Shading(e.shading)),e.wordWrap&&this.push(new WordWrap),e.overflowPunctuation&&this.push(new OnOffElement("w:overflowPunct",e.overflowPunctuation));const i=[...e.rightTabStop!==void 0?[{type:TabStopType.RIGHT,position:e.rightTabStop}]:[],...e.tabStops?e.tabStops:[],...e.leftTabStop!==void 0?[{type:TabStopType.LEFT,position:e.leftTabStop}]:[]];i.length>0&&this.push(new TabStop(i)),e.bidirectional!==void 0&&this.push(new OnOffElement("w:bidi",e.bidirectional)),e.spacing&&this.push(new Spacing(e.spacing)),e.indent&&this.push(new Indent(e.indent)),e.contextualSpacing!==void 0&&this.push(new OnOffElement("w:contextualSpacing",e.contextualSpacing)),e.alignment&&this.push(new Alignment(e.alignment)),e.outlineLevel!==void 0&&this.push(new OutlineLevel(e.outlineLevel)),e.suppressLineNumbers!==void 0&&this.push(new OnOffElement("w:suppressLineNumbers",e.suppressLineNumbers)),e.autoSpaceEastAsianText!==void 0&&this.push(new OnOffElement("w:autoSpaceDN",e.autoSpaceEastAsianText)),e.run&&this.push(new RunProperties(e.run))}push(e){this.root.push(e)}prepForXml(e){if(e.viewWrapper instanceof DocumentWrapper)for(const r of this.numberingReferences)e.file.Numbering.createConcreteNumberingInstance(r.reference,r.instance);return super.prepForXml(e)}}class Paragraph extends FileChild{constructor(e){if(super("w:p"),__publicField(this,"properties"),typeof e=="string")return this.properties=new ParagraphProperties({}),this.root.push(this.properties),this.root.push(new TextRun(e)),this;if(this.properties=new ParagraphProperties(e),this.root.push(this.properties),e.text&&this.root.push(new TextRun(e.text)),e.children)for(const r of e.children){if(r instanceof Bookmark){this.root.push(r.start);for(const n of r.children)this.root.push(n);this.root.push(r.end);continue}this.root.push(r)}}prepForXml(e){for(const r of this.root)if(r instanceof ExternalHyperlink){const n=this.root.indexOf(r),i=new ConcreteHyperlink(r.options.children,uniqueId());e.viewWrapper.Relationships.createRelationship(i.linkId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",r.options.link,TargetModeType.EXTERNAL),this.root[n]=i}return super.prepForXml(e)}addRunToFront(e){return this.root.splice(1,0,e),this}}const NONE_BORDER={style:BorderStyle.NONE,size:0,color:"auto"},DEFAULT_BORDER={style:BorderStyle.SINGLE,size:4,color:"auto"};class TableBorders extends XmlComponent{constructor(e){super("w:tblBorders"),e.top?this.root.push(new BorderElement("w:top",e.top)):this.root.push(new BorderElement("w:top",DEFAULT_BORDER)),e.left?this.root.push(new BorderElement("w:left",e.left)):this.root.push(new BorderElement("w:left",DEFAULT_BORDER)),e.bottom?this.root.push(new BorderElement("w:bottom",e.bottom)):this.root.push(new BorderElement("w:bottom",DEFAULT_BORDER)),e.right?this.root.push(new BorderElement("w:right",e.right)):this.root.push(new BorderElement("w:right",DEFAULT_BORDER)),e.insideHorizontal?this.root.push(new BorderElement("w:insideH",e.insideHorizontal)):this.root.push(new BorderElement("w:insideH",DEFAULT_BORDER)),e.insideVertical?this.root.push(new BorderElement("w:insideV",e.insideVertical)):this.root.push(new BorderElement("w:insideV",DEFAULT_BORDER))}}__publicField(TableBorders,"NONE",{top:NONE_BORDER,bottom:NONE_BORDER,left:NONE_BORDER,right:NONE_BORDER,insideHorizontal:NONE_BORDER,insideVertical:NONE_BORDER});class AppPropertiesAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class AppProperties extends XmlComponent{constructor(){super("Properties"),this.root.push(new AppPropertiesAttributes({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"}))}}class ContentTypeAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{xmlns:"xmlns"})}}class DefaultAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{contentType:"ContentType",extension:"Extension"})}}class Default extends XmlComponent{constructor(e,r){super("Default"),this.root.push(new DefaultAttributes({contentType:e,extension:r}))}}class OverrideAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{contentType:"ContentType",partName:"PartName"})}}class Override extends XmlComponent{constructor(e,r){super("Override"),this.root.push(new OverrideAttributes({contentType:e,partName:r}))}}class ContentTypes extends XmlComponent{constructor(){super("Types"),this.root.push(new ContentTypeAttributes({xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"})),this.root.push(new Default("image/png","png")),this.root.push(new Default("image/jpeg","jpeg")),this.root.push(new Default("image/jpeg","jpg")),this.root.push(new Default("image/bmp","bmp")),this.root.push(new Default("image/gif","gif")),this.root.push(new Default("image/svg+xml","svg")),this.root.push(new Default("application/vnd.openxmlformats-package.relationships+xml","rels")),this.root.push(new Default("application/xml","xml")),this.root.push(new Default("application/vnd.openxmlformats-officedocument.obfuscatedFont","odttf")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml","/word/document.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml","/word/styles.xml")),this.root.push(new Override("application/vnd.openxmlformats-package.core-properties+xml","/docProps/core.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.custom-properties+xml","/docProps/custom.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.extended-properties+xml","/docProps/app.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml","/word/numbering.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml","/word/footnotes.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml","/word/settings.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml","/word/comments.xml")),this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml","/word/fontTable.xml"))}addFooter(e){this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml",`/word/footer${e}.xml`))}addHeader(e){this.root.push(new Override("application/vnd.openxmlformats-officedocument.wordprocessingml.header+xml",`/word/header${e}.xml`))}}class CoreProperties extends XmlComponent{constructor(e){super("cp:coreProperties"),this.root.push(new DocumentAttributes(["cp","dc","dcterms","dcmitype","xsi"])),e.title&&this.root.push(new StringContainer("dc:title",e.title)),e.subject&&this.root.push(new StringContainer("dc:subject",e.subject)),e.creator&&this.root.push(new StringContainer("dc:creator",e.creator)),e.keywords&&this.root.push(new StringContainer("cp:keywords",e.keywords)),e.description&&this.root.push(new StringContainer("dc:description",e.description)),e.lastModifiedBy&&this.root.push(new StringContainer("cp:lastModifiedBy",e.lastModifiedBy)),e.revision&&this.root.push(new StringContainer("cp:revision",String(e.revision))),this.root.push(new TimestampElement("dcterms:created")),this.root.push(new TimestampElement("dcterms:modified"))}}class TimestampElementProperties extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{type:"xsi:type"})}}class TimestampElement extends XmlComponent{constructor(e){super(e),this.root.push(new TimestampElementProperties({type:"dcterms:W3CDTF"})),this.root.push(dateTimeValue(new Date))}}class CustomPropertiesAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{xmlns:"xmlns",vt:"xmlns:vt"})}}class CustomPropertyAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{fmtid:"fmtid",pid:"pid",name:"name"})}}class CustomProperty extends XmlComponent{constructor(e,r){super("property"),this.root.push(new CustomPropertyAttributes({fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:e.toString(),name:r.name})),this.root.push(new CustomPropertyValue(r.value))}}class CustomPropertyValue extends XmlComponent{constructor(e){super("vt:lpwstr"),this.root.push(e)}}class CustomProperties extends XmlComponent{constructor(e){super("Properties"),__publicField(this,"nextId"),__publicField(this,"properties",[]),this.root.push(new CustomPropertiesAttributes({xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"})),this.nextId=2;for(const r of e)this.addCustomProperty(r)}prepForXml(e){return this.properties.forEach(r=>this.root.push(r)),super.prepForXml(e)}addCustomProperty(e){this.properties.push(new CustomProperty(this.nextId++,e))}}const createFontRelationship=({id:t,fontKey:e,subsetted:r},n)=>new BuilderElement({name:n,attributes:__spreadValues({id:{key:"r:id",value:t}},e?{fontKey:{key:"w:fontKey",value:`{${e}}`}}:{}),children:[...r?[new OnOffElement("w:subsetted",r)]:[]]}),createFont=({name:t,altName:e,panose1:r,charset:n,family:i,notTrueType:s,pitch:f,sig:a,embedRegular:o,embedBold:u,embedItalic:y,embedBoldItalic:w})=>new BuilderElement({name:"w:font",attributes:{name:{key:"w:name",value:t}},children:[...e?[createStringElement("w:altName",e)]:[],...r?[createStringElement("w:panose1",r)]:[],...n?[createStringElement("w:charset",n)]:[],createStringElement("w:family",i),...s?[new OnOffElement("w:notTrueType",s)]:[],createStringElement("w:pitch",f),...a?[new BuilderElement({name:"w:sig",attributes:{usb0:{key:"w:usb0",value:a.usb0},usb1:{key:"w:usb1",value:a.usb1},usb2:{key:"w:usb2",value:a.usb2},usb3:{key:"w:usb3",value:a.usb3},csb0:{key:"w:csb0",value:a.csb0},csb1:{key:"w:csb1",value:a.csb1}}})]:[],...o?[createFontRelationship(o,"w:embedRegular")]:[],...u?[createFontRelationship(u,"w:embedBold")]:[],...y?[createFontRelationship(y,"w:embedItalic")]:[],...w?[createFontRelationship(w,"w:embedBoldItalic")]:[]]}),createRegularFont=({name:t,index:e,fontKey:r,characterSet:n})=>createFont({name:t,sig:{usb0:"E0002AFF",usb1:"C000247B",usb2:"00000009",usb3:"00000000",csb0:"000001FF",csb1:"00000000"},charset:n,family:"auto",pitch:"variable",embedRegular:{fontKey:r,id:`rId${e}`}}),createFontTable=t=>new BuilderElement({name:"w:fonts",attributes:{mc:{key:"xmlns:mc",value:"http://schemas.openxmlformats.org/markup-compatibility/2006"},r:{key:"xmlns:r",value:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"},w:{key:"xmlns:w",value:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},w14:{key:"xmlns:w14",value:"http://schemas.microsoft.com/office/word/2010/wordml"},w15:{key:"xmlns:w15",value:"http://schemas.microsoft.com/office/word/2012/wordml"},w16cex:{key:"xmlns:w16cex",value:"http://schemas.microsoft.com/office/word/2018/wordml/cex"},w16cid:{key:"xmlns:w16cid",value:"http://schemas.microsoft.com/office/word/2016/wordml/cid"},w16:{key:"xmlns:w16",value:"http://schemas.microsoft.com/office/word/2018/wordml"},w16sdtdh:{key:"xmlns:w16sdtdh",value:"http://schemas.microsoft.com/office/word/2020/wordml/sdtdatahash"},w16se:{key:"xmlns:w16se",value:"http://schemas.microsoft.com/office/word/2015/wordml/symex"},Ignorable:{key:"mc:Ignorable",value:"w14 w15 w16se w16cid w16 w16cex w16sdtdh"}},children:t.map((e,r)=>createRegularFont({name:e.name,index:r+1,fontKey:e.fontKey}))});class FontWrapper{constructor(e){__publicField(this,"fontTable"),__publicField(this,"relationships"),__publicField(this,"fontOptionsWithKey",[]),this.options=e,this.fontOptionsWithKey=e.map(r=>__spreadProps(__spreadValues({},r),{fontKey:uniqueUuid()})),this.fontTable=createFontTable(this.fontOptionsWithKey),this.relationships=new Relationships;for(let r=0;r<e.length;r++)this.relationships.createRelationship(r+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/font",`fonts/${e[r].name}.odttf`)}get View(){return this.fontTable}get Relationships(){return this.relationships}}class FooterAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type"})}}let Footer$1=class extends InitializableXmlComponent{constructor(e,r){super("w:ftr",r),__publicField(this,"refId"),this.refId=e,r||this.root.push(new FooterAttributes({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class FooterWrapper{constructor(e,r,n){__publicField(this,"footer"),__publicField(this,"relationships"),this.media=e,this.footer=new Footer$1(r,n),this.relationships=new Relationships}add(e){this.footer.add(e)}addChildElement(e){this.footer.addChildElement(e)}get View(){return this.footer}get Relationships(){return this.relationships}get Media(){return this.media}}class FootnoteAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{type:"w:type",id:"w:id"})}}class FootnoteRef extends XmlComponent{constructor(){super("w:footnoteRef")}}class FootnoteRefRun extends Run{constructor(){super({style:"FootnoteReference"}),this.root.push(new FootnoteRef)}}const FootnoteType={SEPERATOR:"separator",CONTINUATION_SEPERATOR:"continuationSeparator"};class Footnote extends XmlComponent{constructor(e){super("w:footnote"),this.root.push(new FootnoteAttributes({type:e.type,id:e.id}));for(let r=0;r<e.children.length;r++){const n=e.children[r];r===0&&n.addRunToFront(new FootnoteRefRun),this.root.push(n)}}}class ContinuationSeperator extends XmlComponent{constructor(){super("w:continuationSeparator")}}class ContinuationSeperatorRun extends Run{constructor(){super({}),this.root.push(new ContinuationSeperator)}}class Seperator extends XmlComponent{constructor(){super("w:separator")}}class SeperatorRun extends Run{constructor(){super({}),this.root.push(new Seperator)}}class FootnotesAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class FootNotes extends XmlComponent{constructor(){super("w:footnotes"),this.root.push(new FootnotesAttributes({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"}));const e=new Footnote({id:-1,type:FootnoteType.SEPERATOR,children:[new Paragraph({spacing:{after:0,line:240,lineRule:LineRuleType.AUTO},children:[new SeperatorRun]})]});this.root.push(e);const r=new Footnote({id:0,type:FootnoteType.CONTINUATION_SEPERATOR,children:[new Paragraph({spacing:{after:0,line:240,lineRule:LineRuleType.AUTO},children:[new ContinuationSeperatorRun]})]});this.root.push(r)}createFootNote(e,r){const n=new Footnote({id:e,children:r});this.root.push(n)}}class FootnotesWrapper{constructor(){__publicField(this,"footnotess"),__publicField(this,"relationships"),this.footnotess=new FootNotes,this.relationships=new Relationships}get View(){return this.footnotess}get Relationships(){return this.relationships}}class HeaderAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",cp:"xmlns:cp",dc:"xmlns:dc",dcterms:"xmlns:dcterms",dcmitype:"xmlns:dcmitype",xsi:"xmlns:xsi",type:"xsi:type",cx:"xmlns:cx",cx1:"xmlns:cx1",cx2:"xmlns:cx2",cx3:"xmlns:cx3",cx4:"xmlns:cx4",cx5:"xmlns:cx5",cx6:"xmlns:cx6",cx7:"xmlns:cx7",cx8:"xmlns:cx8",w16cid:"xmlns:w16cid",w16se:"xmlns:w16se"})}}let Header$1=class extends InitializableXmlComponent{constructor(e,r){super("w:hdr",r),__publicField(this,"refId"),this.refId=e,r||this.root.push(new HeaderAttributes({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",cx:"http://schemas.microsoft.com/office/drawing/2014/chartex",cx1:"http://schemas.microsoft.com/office/drawing/2015/9/8/chartex",cx2:"http://schemas.microsoft.com/office/drawing/2015/10/21/chartex",cx3:"http://schemas.microsoft.com/office/drawing/2016/5/9/chartex",cx4:"http://schemas.microsoft.com/office/drawing/2016/5/10/chartex",cx5:"http://schemas.microsoft.com/office/drawing/2016/5/11/chartex",cx6:"http://schemas.microsoft.com/office/drawing/2016/5/12/chartex",cx7:"http://schemas.microsoft.com/office/drawing/2016/5/13/chartex",cx8:"http://schemas.microsoft.com/office/drawing/2016/5/14/chartex",w16cid:"http://schemas.microsoft.com/office/word/2016/wordml/cid",w16se:"http://schemas.microsoft.com/office/word/2015/wordml/symex"}))}get ReferenceId(){return this.refId}add(e){this.root.push(e)}};class HeaderWrapper{constructor(e,r,n){__publicField(this,"header"),__publicField(this,"relationships"),this.media=e,this.header=new Header$1(r,n),this.relationships=new Relationships}add(e){return this.header.add(e),this}addChildElement(e){this.header.addChildElement(e)}get View(){return this.header}get Relationships(){return this.relationships}get Media(){return this.media}}class Media{constructor(){__publicField(this,"map"),this.map=new Map}addImage(e,r){this.map.set(e,r)}get Array(){return Array.from(this.map.values())}}const LevelFormat={BULLET:"bullet"};class LevelAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{ilvl:"w:ilvl",tentative:"w15:tentative"})}}class NumberFormat extends XmlComponent{constructor(e){super("w:numFmt"),this.root.push(new Attributes({val:e}))}}class LevelText extends XmlComponent{constructor(e){super("w:lvlText"),this.root.push(new Attributes({val:e}))}}class LevelJc extends XmlComponent{constructor(e){super("w:lvlJc"),this.root.push(new Attributes({val:e}))}}class Suffix extends XmlComponent{constructor(e){super("w:suff"),this.root.push(new Attributes({val:e}))}}class IsLegalNumberingStyle extends XmlComponent{constructor(){super("w:isLgl")}}class LevelBase extends XmlComponent{constructor({level:e,format:r,text:n,alignment:i=AlignmentType.START,start:s=1,style:f,suffix:a,isLegalNumberingStyle:o}){if(super("w:lvl"),__publicField(this,"paragraphProperties"),__publicField(this,"runProperties"),this.root.push(new NumberValueElement("w:start",decimalNumber(s))),r&&this.root.push(new NumberFormat(r)),a&&this.root.push(new Suffix(a)),o&&this.root.push(new IsLegalNumberingStyle),n&&this.root.push(new LevelText(n)),this.root.push(new LevelJc(i)),this.paragraphProperties=new ParagraphProperties(f&&f.paragraph),this.runProperties=new RunProperties(f&&f.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties),e>9)throw new Error("Level cannot be greater than 9. Read more here: https://answers.microsoft.com/en-us/msoffice/forum/all/does-word-support-more-than-9-list-levels/d130fdcd-1781-446d-8c84-c6c79124e4d7");this.root.push(new LevelAttributes({ilvl:decimalNumber(e),tentative:1}))}}class Level extends LevelBase{}class MultiLevelType extends XmlComponent{constructor(e){super("w:multiLevelType"),this.root.push(new Attributes({val:e}))}}class AbstractNumberingAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{abstractNumId:"w:abstractNumId",restartNumberingAfterBreak:"w15:restartNumberingAfterBreak"})}}class AbstractNumbering extends XmlComponent{constructor(e,r){super("w:abstractNum"),__publicField(this,"id"),this.root.push(new AbstractNumberingAttributes({abstractNumId:decimalNumber(e),restartNumberingAfterBreak:0})),this.root.push(new MultiLevelType("hybridMultilevel")),this.id=e;for(const n of r)this.root.push(new Level(n))}}class AbstractNumId extends XmlComponent{constructor(e){super("w:abstractNumId"),this.root.push(new Attributes({val:e}))}}class NumAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{numId:"w:numId"})}}class ConcreteNumbering extends XmlComponent{constructor(e){if(super("w:num"),__publicField(this,"numId"),__publicField(this,"reference"),__publicField(this,"instance"),this.numId=e.numId,this.reference=e.reference,this.instance=e.instance,this.root.push(new NumAttributes({numId:decimalNumber(e.numId)})),this.root.push(new AbstractNumId(decimalNumber(e.abstractNumId))),e.overrideLevels&&e.overrideLevels.length)for(const r of e.overrideLevels)this.root.push(new LevelOverride(r.num,r.start))}}class LevelOverrideAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{ilvl:"w:ilvl"})}}class LevelOverride extends XmlComponent{constructor(e,r){super("w:lvlOverride"),this.root.push(new LevelOverrideAttributes({ilvl:e})),r!==void 0&&this.root.push(new StartOverride(r))}}class StartOverrideAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val"})}}class StartOverride extends XmlComponent{constructor(e){super("w:startOverride"),this.root.push(new StartOverrideAttributes({val:e}))}}class Numbering extends XmlComponent{constructor(e){super("w:numbering"),__publicField(this,"abstractNumberingMap",new Map),__publicField(this,"concreteNumberingMap",new Map),__publicField(this,"referenceConfigMap",new Map),__publicField(this,"abstractNumUniqueNumericId",abstractNumUniqueNumericIdGen()),__publicField(this,"concreteNumUniqueNumericId",concreteNumUniqueNumericIdGen()),this.root.push(new DocumentAttributes(["wpc","mc","o","r","m","v","wp14","wp","w10","w","w14","w15","wpg","wpi","wne","wps"],"w14 w15 wp14"));const r=new AbstractNumbering(this.abstractNumUniqueNumericId(),[{level:0,format:LevelFormat.BULLET,text:"●",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:convertInchesToTwip(.5),hanging:convertInchesToTwip(.25)}}}},{level:1,format:LevelFormat.BULLET,text:"○",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:convertInchesToTwip(1),hanging:convertInchesToTwip(.25)}}}},{level:2,format:LevelFormat.BULLET,text:"■",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:2160,hanging:convertInchesToTwip(.25)}}}},{level:3,format:LevelFormat.BULLET,text:"●",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:2880,hanging:convertInchesToTwip(.25)}}}},{level:4,format:LevelFormat.BULLET,text:"○",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:3600,hanging:convertInchesToTwip(.25)}}}},{level:5,format:LevelFormat.BULLET,text:"■",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:4320,hanging:convertInchesToTwip(.25)}}}},{level:6,format:LevelFormat.BULLET,text:"●",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:5040,hanging:convertInchesToTwip(.25)}}}},{level:7,format:LevelFormat.BULLET,text:"●",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:5760,hanging:convertInchesToTwip(.25)}}}},{level:8,format:LevelFormat.BULLET,text:"●",alignment:AlignmentType.LEFT,style:{paragraph:{indent:{left:6480,hanging:convertInchesToTwip(.25)}}}}]);this.concreteNumberingMap.set("default-bullet-numbering",new ConcreteNumbering({numId:1,abstractNumId:r.id,reference:"default-bullet-numbering",instance:0,overrideLevels:[{num:0,start:1}]})),this.abstractNumberingMap.set("default-bullet-numbering",r);for(const n of e.config)this.abstractNumberingMap.set(n.reference,new AbstractNumbering(this.abstractNumUniqueNumericId(),n.levels)),this.referenceConfigMap.set(n.reference,n.levels)}prepForXml(e){for(const r of this.abstractNumberingMap.values())this.root.push(r);for(const r of this.concreteNumberingMap.values())this.root.push(r);return super.prepForXml(e)}createConcreteNumberingInstance(e,r){const n=this.abstractNumberingMap.get(e);if(!n)return;const i=`${e}-${r}`;if(this.concreteNumberingMap.has(i))return;const s=this.referenceConfigMap.get(e),f=s&&s[0].start,a={numId:this.concreteNumUniqueNumericId(),abstractNumId:n.id,reference:e,instance:r,overrideLevels:[f&&Number.isInteger(f)?{num:0,start:f}:{num:0,start:1}]};this.concreteNumberingMap.set(i,new ConcreteNumbering(a))}get ConcreteNumbering(){return Array.from(this.concreteNumberingMap.values())}get ReferenceConfig(){return Array.from(this.referenceConfigMap.values())}}class CompatibilitySettingAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{version:"w:val",name:"w:name",uri:"w:uri"})}}class CompatibilitySetting extends XmlComponent{constructor(e){super("w:compatSetting"),this.root.push(new CompatibilitySettingAttributes({version:e,uri:"http://schemas.microsoft.com/office/word",name:"compatibilityMode"}))}}class Compatibility extends XmlComponent{constructor(e){super("w:compat"),e.version&&this.root.push(new CompatibilitySetting(e.version)),e.useSingleBorderforContiguousCells&&this.root.push(new OnOffElement("w:useSingleBorderforContiguousCells",e.useSingleBorderforContiguousCells)),e.wordPerfectJustification&&this.root.push(new OnOffElement("w:wpJustification",e.wordPerfectJustification)),e.noTabStopForHangingIndent&&this.root.push(new OnOffElement("w:noTabHangInd",e.noTabStopForHangingIndent)),e.noLeading&&this.root.push(new OnOffElement("w:noLeading",e.noLeading)),e.spaceForUnderline&&this.root.push(new OnOffElement("w:spaceForUL",e.spaceForUnderline)),e.noColumnBalance&&this.root.push(new OnOffElement("w:noColumnBalance",e.noColumnBalance)),e.balanceSingleByteDoubleByteWidth&&this.root.push(new OnOffElement("w:balanceSingleByteDoubleByteWidth",e.balanceSingleByteDoubleByteWidth)),e.noExtraLineSpacing&&this.root.push(new OnOffElement("w:noExtraLineSpacing",e.noExtraLineSpacing)),e.doNotLeaveBackslashAlone&&this.root.push(new OnOffElement("w:doNotLeaveBackslashAlone",e.doNotLeaveBackslashAlone)),e.underlineTrailingSpaces&&this.root.push(new OnOffElement("w:ulTrailSpace",e.underlineTrailingSpaces)),e.doNotExpandShiftReturn&&this.root.push(new OnOffElement("w:doNotExpandShiftReturn",e.doNotExpandShiftReturn)),e.spacingInWholePoints&&this.root.push(new OnOffElement("w:spacingInWholePoints",e.spacingInWholePoints)),e.lineWrapLikeWord6&&this.root.push(new OnOffElement("w:lineWrapLikeWord6",e.lineWrapLikeWord6)),e.printBodyTextBeforeHeader&&this.root.push(new OnOffElement("w:printBodyTextBeforeHeader",e.printBodyTextBeforeHeader)),e.printColorsBlack&&this.root.push(new OnOffElement("w:printColBlack",e.printColorsBlack)),e.spaceWidth&&this.root.push(new OnOffElement("w:wpSpaceWidth",e.spaceWidth)),e.showBreaksInFrames&&this.root.push(new OnOffElement("w:showBreaksInFrames",e.showBreaksInFrames)),e.subFontBySize&&this.root.push(new OnOffElement("w:subFontBySize",e.subFontBySize)),e.suppressBottomSpacing&&this.root.push(new OnOffElement("w:suppressBottomSpacing",e.suppressBottomSpacing)),e.suppressTopSpacing&&this.root.push(new OnOffElement("w:suppressTopSpacing",e.suppressTopSpacing)),e.suppressSpacingAtTopOfPage&&this.root.push(new OnOffElement("w:suppressSpacingAtTopOfPage",e.suppressSpacingAtTopOfPage)),e.suppressTopSpacingWP&&this.root.push(new OnOffElement("w:suppressTopSpacingWP",e.suppressTopSpacingWP)),e.suppressSpBfAfterPgBrk&&this.root.push(new OnOffElement("w:suppressSpBfAfterPgBrk",e.suppressSpBfAfterPgBrk)),e.swapBordersFacingPages&&this.root.push(new OnOffElement("w:swapBordersFacingPages",e.swapBordersFacingPages)),e.convertMailMergeEsc&&this.root.push(new OnOffElement("w:convMailMergeEsc",e.convertMailMergeEsc)),e.truncateFontHeightsLikeWP6&&this.root.push(new OnOffElement("w:truncateFontHeightsLikeWP6",e.truncateFontHeightsLikeWP6)),e.macWordSmallCaps&&this.root.push(new OnOffElement("w:mwSmallCaps",e.macWordSmallCaps)),e.usePrinterMetrics&&this.root.push(new OnOffElement("w:usePrinterMetrics",e.usePrinterMetrics)),e.doNotSuppressParagraphBorders&&this.root.push(new OnOffElement("w:doNotSuppressParagraphBorders",e.doNotSuppressParagraphBorders)),e.wrapTrailSpaces&&this.root.push(new OnOffElement("w:wrapTrailSpaces",e.wrapTrailSpaces)),e.footnoteLayoutLikeWW8&&this.root.push(new OnOffElement("w:footnoteLayoutLikeWW8",e.footnoteLayoutLikeWW8)),e.shapeLayoutLikeWW8&&this.root.push(new OnOffElement("w:shapeLayoutLikeWW8",e.shapeLayoutLikeWW8)),e.alignTablesRowByRow&&this.root.push(new OnOffElement("w:alignTablesRowByRow",e.alignTablesRowByRow)),e.forgetLastTabAlignment&&this.root.push(new OnOffElement("w:forgetLastTabAlignment",e.forgetLastTabAlignment)),e.adjustLineHeightInTable&&this.root.push(new OnOffElement("w:adjustLineHeightInTable",e.adjustLineHeightInTable)),e.autoSpaceLikeWord95&&this.root.push(new OnOffElement("w:autoSpaceLikeWord95",e.autoSpaceLikeWord95)),e.noSpaceRaiseLower&&this.root.push(new OnOffElement("w:noSpaceRaiseLower",e.noSpaceRaiseLower)),e.doNotUseHTMLParagraphAutoSpacing&&this.root.push(new OnOffElement("w:doNotUseHTMLParagraphAutoSpacing",e.doNotUseHTMLParagraphAutoSpacing)),e.layoutRawTableWidth&&this.root.push(new OnOffElement("w:layoutRawTableWidth",e.layoutRawTableWidth)),e.layoutTableRowsApart&&this.root.push(new OnOffElement("w:layoutTableRowsApart",e.layoutTableRowsApart)),e.useWord97LineBreakRules&&this.root.push(new OnOffElement("w:useWord97LineBreakRules",e.useWord97LineBreakRules)),e.doNotBreakWrappedTables&&this.root.push(new OnOffElement("w:doNotBreakWrappedTables",e.doNotBreakWrappedTables)),e.doNotSnapToGridInCell&&this.root.push(new OnOffElement("w:doNotSnapToGridInCell",e.doNotSnapToGridInCell)),e.selectFieldWithFirstOrLastCharacter&&this.root.push(new OnOffElement("w:selectFldWithFirstOrLastChar",e.selectFieldWithFirstOrLastCharacter)),e.applyBreakingRules&&this.root.push(new OnOffElement("w:applyBreakingRules",e.applyBreakingRules)),e.doNotWrapTextWithPunctuation&&this.root.push(new OnOffElement("w:doNotWrapTextWithPunct",e.doNotWrapTextWithPunctuation)),e.doNotUseEastAsianBreakRules&&this.root.push(new OnOffElement("w:doNotUseEastAsianBreakRules",e.doNotUseEastAsianBreakRules)),e.useWord2002TableStyleRules&&this.root.push(new OnOffElement("w:useWord2002TableStyleRules",e.useWord2002TableStyleRules)),e.growAutofit&&this.root.push(new OnOffElement("w:growAutofit",e.growAutofit)),e.useFELayout&&this.root.push(new OnOffElement("w:useFELayout",e.useFELayout)),e.useNormalStyleForList&&this.root.push(new OnOffElement("w:useNormalStyleForList",e.useNormalStyleForList)),e.doNotUseIndentAsNumberingTabStop&&this.root.push(new OnOffElement("w:doNotUseIndentAsNumberingTabStop",e.doNotUseIndentAsNumberingTabStop)),e.useAlternateEastAsianLineBreakRules&&this.root.push(new OnOffElement("w:useAltKinsokuLineBreakRules",e.useAlternateEastAsianLineBreakRules)),e.allowSpaceOfSameStyleInTable&&this.root.push(new OnOffElement("w:allowSpaceOfSameStyleInTable",e.allowSpaceOfSameStyleInTable)),e.doNotSuppressIndentation&&this.root.push(new OnOffElement("w:doNotSuppressIndentation",e.doNotSuppressIndentation)),e.doNotAutofitConstrainedTables&&this.root.push(new OnOffElement("w:doNotAutofitConstrainedTables",e.doNotAutofitConstrainedTables)),e.autofitToFirstFixedWidthCell&&this.root.push(new OnOffElement("w:autofitToFirstFixedWidthCell",e.autofitToFirstFixedWidthCell)),e.underlineTabInNumberingList&&this.root.push(new OnOffElement("w:underlineTabInNumList",e.underlineTabInNumberingList)),e.displayHangulFixedWidth&&this.root.push(new OnOffElement("w:displayHangulFixedWidth",e.displayHangulFixedWidth)),e.splitPgBreakAndParaMark&&this.root.push(new OnOffElement("w:splitPgBreakAndParaMark",e.splitPgBreakAndParaMark)),e.doNotVerticallyAlignCellWithSp&&this.root.push(new OnOffElement("w:doNotVertAlignCellWithSp",e.doNotVerticallyAlignCellWithSp)),e.doNotBreakConstrainedForcedTable&&this.root.push(new OnOffElement("w:doNotBreakConstrainedForcedTable",e.doNotBreakConstrainedForcedTable)),e.ignoreVerticalAlignmentInTextboxes&&this.root.push(new OnOffElement("w:doNotVertAlignInTxbx",e.ignoreVerticalAlignmentInTextboxes)),e.useAnsiKerningPairs&&this.root.push(new OnOffElement("w:useAnsiKerningPairs",e.useAnsiKerningPairs)),e.cachedColumnBalance&&this.root.push(new OnOffElement("w:cachedColBalance",e.cachedColumnBalance))}}class SettingsAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{wpc:"xmlns:wpc",mc:"xmlns:mc",o:"xmlns:o",r:"xmlns:r",m:"xmlns:m",v:"xmlns:v",wp14:"xmlns:wp14",wp:"xmlns:wp",w10:"xmlns:w10",w:"xmlns:w",w14:"xmlns:w14",w15:"xmlns:w15",wpg:"xmlns:wpg",wpi:"xmlns:wpi",wne:"xmlns:wne",wps:"xmlns:wps",Ignorable:"mc:Ignorable"})}}class Settings extends XmlComponent{constructor(e){var r,n,i,s,f,a,o,u;super("w:settings"),this.root.push(new SettingsAttributes({wpc:"http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas",mc:"http://schemas.openxmlformats.org/markup-compatibility/2006",o:"urn:schemas-microsoft-com:office:office",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",m:"http://schemas.openxmlformats.org/officeDocument/2006/math",v:"urn:schemas-microsoft-com:vml",wp14:"http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing",wp:"http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing",w10:"urn:schemas-microsoft-com:office:word",w:"http://schemas.openxmlformats.org/wordprocessingml/2006/main",w14:"http://schemas.microsoft.com/office/word/2010/wordml",w15:"http://schemas.microsoft.com/office/word/2012/wordml",wpg:"http://schemas.microsoft.com/office/word/2010/wordprocessingGroup",wpi:"http://schemas.microsoft.com/office/word/2010/wordprocessingInk",wne:"http://schemas.microsoft.com/office/word/2006/wordml",wps:"http://schemas.microsoft.com/office/word/2010/wordprocessingShape",Ignorable:"w14 w15 wp14"})),this.root.push(new OnOffElement("w:displayBackgroundShape",!0)),e.trackRevisions!==void 0&&this.root.push(new OnOffElement("w:trackRevisions",e.trackRevisions)),e.evenAndOddHeaders!==void 0&&this.root.push(new OnOffElement("w:evenAndOddHeaders",e.evenAndOddHeaders)),e.updateFields!==void 0&&this.root.push(new OnOffElement("w:updateFields",e.updateFields)),e.defaultTabStop!==void 0&&this.root.push(new NumberValueElement("w:defaultTabStop",e.defaultTabStop)),((r=e.hyphenation)==null?void 0:r.autoHyphenation)!==void 0&&this.root.push(new OnOffElement("w:autoHyphenation",e.hyphenation.autoHyphenation)),((n=e.hyphenation)==null?void 0:n.hyphenationZone)!==void 0&&this.root.push(new NumberValueElement("w:hyphenationZone",e.hyphenation.hyphenationZone)),((i=e.hyphenation)==null?void 0:i.consecutiveHyphenLimit)!==void 0&&this.root.push(new NumberValueElement("w:consecutiveHyphenLimit",e.hyphenation.consecutiveHyphenLimit)),((s=e.hyphenation)==null?void 0:s.doNotHyphenateCaps)!==void 0&&this.root.push(new OnOffElement("w:doNotHyphenateCaps",e.hyphenation.doNotHyphenateCaps)),this.root.push(new Compatibility(__spreadProps(__spreadValues({},(f=e.compatibility)!=null?f:{}),{version:(u=(o=(a=e.compatibility)==null?void 0:a.version)!=null?o:e.compatibilityModeVersion)!=null?u:15})))}}class ComponentAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{val:"w:val"})}}class Name extends XmlComponent{constructor(e){super("w:name"),this.root.push(new ComponentAttributes({val:e}))}}class UiPriority extends XmlComponent{constructor(e){super("w:uiPriority"),this.root.push(new ComponentAttributes({val:decimalNumber(e)}))}}class StyleAttributes extends XmlAttributeComponent{constructor(){super(...arguments),__publicField(this,"xmlKeys",{type:"w:type",styleId:"w:styleId",default:"w:default",customStyle:"w:customStyle"})}}class Style2 extends XmlComponent{constructor(e,r){super("w:style"),this.root.push(new StyleAttributes(e)),r.name&&this.root.push(new Name(r.name)),r.basedOn&&this.root.push(new StringValueElement("w:basedOn",r.basedOn)),r.next&&this.root.push(new StringValueElement("w:next",r.next)),r.link&&this.root.push(new StringValueElement("w:link",r.link)),r.uiPriority!==void 0&&this.root.push(new UiPriority(r.uiPriority)),r.semiHidden!==void 0&&this.root.push(new OnOffElement("w:semiHidden",r.semiHidden)),r.unhideWhenUsed!==void 0&&this.root.push(new OnOffElement("w:unhideWhenUsed",r.unhideWhenUsed)),r.quickFormat!==void 0&&this.root.push(new OnOffElement("w:qFormat",r.quickFormat))}}class StyleForParagraph extends Style2{constructor(e){super({type:"paragraph",styleId:e.id},e),__publicField(this,"paragraphProperties"),__publicField(this,"runProperties"),this.paragraphProperties=new ParagraphProperties(e.paragraph),this.runProperties=new RunProperties(e.run),this.root.push(this.paragraphProperties),this.root.push(this.runProperties)}}class StyleForCharacter extends Style2{constructor(e){super({type:"character",styleId:e.id},__spreadValues({uiPriority:99,unhideWhenUsed:!0},e)),__publicField(this,"runProperties"),this.runProperties=new RunProperties(e.run),this.root.push(this.runProperties)}}class HeadingStyle extends StyleForParagraph{constructor(e){super(__spreadValues({basedOn:"Normal",next:"Normal",quickFormat:!0},e))}}class TitleStyle extends HeadingStyle{constructor(e){super(__spreadValues({id:"Title",name:"Title"},e))}}class Heading1Style extends HeadingStyle{constructor(e){super(__spreadValues({id:"Heading1",name:"Heading 1"},e))}}class Heading2Style extends HeadingStyle{constructor(e){super(__spreadValues({id:"Heading2",name:"Heading 2"},e))}}class Heading3Style extends HeadingStyle{constructor(e){super(__spreadValues({id:"Heading3",name:"Heading 3"},e))}}class Heading4Style extends HeadingStyle{constructor(e){super(__spreadValues({id:"Heading4",name:"Heading 4"},e))}}class Heading5Style extends HeadingStyle{constructor(e){super(__spreadValues({id:"Heading5",name:"Heading 5"},e))}}class Heading6Style extends HeadingStyle{constructor(e){super(__spreadValues({id:"Heading6",name:"Heading 6"},e))}}class StrongStyle extends HeadingStyle{constructor(e){super(__spreadValues({id:"Strong",name:"Strong"},e))}}class ListParagraph extends StyleForParagraph{constructor(e){super(__spreadValues({id:"ListParagraph",name:"List Paragraph",basedOn:"Normal",quickFormat:!0},e))}}class FootnoteText extends StyleForParagraph{constructor(e){super(__spreadValues({id:"FootnoteText",name:"footnote text",link:"FootnoteTextChar",basedOn:"Normal",uiPriority:99,semiHidden:!0,unhideWhenUsed:!0,paragraph:{spacing:{after:0,line:240,lineRule:LineRuleType.AUTO}},run:{size:20}},e))}}class FootnoteReferenceStyle extends StyleForCharacter{constructor(e){super(__spreadValues({id:"FootnoteReference",name:"footnote reference",basedOn:"DefaultParagraphFont",semiHidden:!0,run:{superScript:!0}},e))}}class FootnoteTextChar extends StyleForCharacter{constructor(e){super(__spreadValues({id:"FootnoteTextChar",name:"Footnote Text Char",basedOn:"DefaultParagraphFont",link:"FootnoteText",semiHidden:!0,run:{size:20}},e))}}class HyperlinkStyle extends StyleForCharacter{constructor(e){super(__spreadValues({id:"Hyperlink",name:"Hyperlink",basedOn:"DefaultParagraphFont",run:{color:"0563C1",underline:{type:UnderlineType.SINGLE}}},e))}}class Styles extends XmlComponent{constructor(e){if(super("w:styles"),e.initialStyles&&this.root.push(e.initialStyles),e.importedStyles)for(const r of e.importedStyles)this.root.push(r);if(e.paragraphStyles)for(const r of e.paragraphStyles)this.root.push(new StyleForParagraph(r));if(e.characterStyles)for(const r of e.characterStyles)this.root.push(new StyleForCharacter(r))}}class ParagraphPropertiesDefaults extends XmlComponent{constructor(e){super("w:pPrDefault"),this.root.push(new ParagraphProperties(e))}}class RunPropertiesDefaults extends XmlComponent{constructor(e){super("w:rPrDefault"),this.root.push(new RunProperties(e))}}class DocumentDefaults extends XmlComponent{constructor(e){super("w:docDefaults"),__publicField(this,"runPropertiesDefaults"),__publicField(this,"paragraphPropertiesDefaults"),this.runPropertiesDefaults=new RunPropertiesDefaults(e.run),this.paragraphPropertiesDefaults=new ParagraphPropertiesDefaults(e.paragraph),this.root.push(this.runPropertiesDefaults),this.root.push(this.paragraphPropertiesDefaults)}}class ExternalStylesFactory{newInstance(e){const r=libExports.xml2js(e,{compact:!1});let n;for(const f of r.elements||[])f.name==="w:styles"&&(n=f);if(n===void 0)throw new Error("can not find styles element");const i=n.elements||[];return new Styles({initialStyles:new ImportedRootElementAttributes(n.attributes),importedStyles:i.map(f=>convertToXmlComponent(f))})}}class DefaultStylesFactory{newInstance(e={}){var r;return{initialStyles:new DocumentAttributes(["mc","r","w","w14","w15"],"w14 w15"),importedStyles:[new DocumentDefaults((r=e.document)!=null?r:{}),new TitleStyle(__spreadValues({run:{size:56}},e.title)),new Heading1Style(__spreadValues({run:{color:"2E74B5",size:32}},e.heading1)),new Heading2Style(__spreadValues({run:{color:"2E74B5",size:26}},e.heading2)),new Heading3Style(__spreadValues({run:{color:"1F4D78",size:24}},e.heading3)),new Heading4Style(__spreadValues({run:{color:"2E74B5",italics:!0}},e.heading4)),new Heading5Style(__spreadValues({run:{color:"2E74B5"}},e.heading5)),new Heading6Style(__spreadValues({run:{color:"1F4D78"}},e.heading6)),new StrongStyle(__spreadValues({run:{bold:!0}},e.strong)),new ListParagraph(e.listParagraph||{}),new HyperlinkStyle(e.hyperlink||{}),new FootnoteReferenceStyle(e.footnoteReference||{}),new FootnoteText(e.footnoteText||{}),new FootnoteTextChar(e.footnoteTextChar||{})]}}}let File$1=class{constructor(e){__publicField(this,"currentRelationshipId",1),__publicField(this,"documentWrapper"),__publicField(this,"headers",[]),__publicField(this,"footers",[]),__publicField(this,"coreProperties"),__publicField(this,"numbering"),__publicField(this,"media"),__publicField(this,"fileRelationships"),__publicField(this,"footnotesWrapper"),__publicField(this,"settings"),__publicField(this,"contentTypes"),__publicField(this,"customProperties"),__publicField(this,"appProperties"),__publicField(this,"styles"),__publicField(this,"comments"),__publicField(this,"fontWrapper");var r,n,i,s,f,a,o,u,y,w,v,g;if(this.coreProperties=new CoreProperties(__spreadProps(__spreadValues({},e),{creator:(r=e.creator)!=null?r:"Un-named",revision:(n=e.revision)!=null?n:1,lastModifiedBy:(i=e.lastModifiedBy)!=null?i:"Un-named"})),this.numbering=new Numbering(e.numbering?e.numbering:{config:[]}),this.comments=new Comments((s=e.comments)!=null?s:{children:[]}),this.fileRelationships=new Relationships,this.customProperties=new CustomProperties((f=e.customProperties)!=null?f:[]),this.appProperties=new AppProperties,this.footnotesWrapper=new FootnotesWrapper,this.contentTypes=new ContentTypes,this.documentWrapper=new DocumentWrapper({background:e.background}),this.settings=new Settings({compatibilityModeVersion:e.compatabilityModeVersion,compatibility:e.compatibility,evenAndOddHeaders:!!e.evenAndOddHeaderAndFooters,trackRevisions:(a=e.features)==null?void 0:a.trackRevisions,updateFields:(o=e.features)==null?void 0:o.updateFields,defaultTabStop:e.defaultTabStop,hyphenation:{autoHyphenation:(u=e.hyphenation)==null?void 0:u.autoHyphenation,hyphenationZone:(y=e.hyphenation)==null?void 0:y.hyphenationZone,consecutiveHyphenLimit:(w=e.hyphenation)==null?void 0:w.consecutiveHyphenLimit,doNotHyphenateCaps:(v=e.hyphenation)==null?void 0:v.doNotHyphenateCaps}}),this.media=new Media,e.externalStyles!==void 0){const b=new ExternalStylesFactory;this.styles=b.newInstance(e.externalStyles)}else if(e.styles){const l=new DefaultStylesFactory().newInstance(e.styles.default);this.styles=new Styles(__spreadValues(__spreadValues({},l),e.styles))}else{const b=new DefaultStylesFactory;this.styles=new Styles(b.newInstance())}this.addDefaultRelationships();for(const b of e.sections)this.addSection(b);if(e.footnotes)for(const b in e.footnotes)this.footnotesWrapper.View.createFootNote(parseFloat(b),e.footnotes[b].children);this.fontWrapper=new FontWrapper((g=e.fonts)!=null?g:[])}addSection({headers:e={},footers:r={},children:n,properties:i}){this.documentWrapper.View.Body.addSection(__spreadProps(__spreadValues({},i),{headerWrapperGroup:{default:e.default?this.createHeader(e.default):void 0,first:e.first?this.createHeader(e.first):void 0,even:e.even?this.createHeader(e.even):void 0},footerWrapperGroup:{default:r.default?this.createFooter(r.default):void 0,first:r.first?this.createFooter(r.first):void 0,even:r.even?this.createFooter(r.even):void 0}}));for(const s of n)this.documentWrapper.View.add(s)}createHeader(e){const r=new HeaderWrapper(this.media,this.currentRelationshipId++);for(const n of e.options.children)r.add(n);return this.addHeaderToDocument(r),r}createFooter(e){const r=new FooterWrapper(this.media,this.currentRelationshipId++);for(const n of e.options.children)r.add(n);return this.addFooterToDocument(r),r}addHeaderToDocument(e,r=HeaderFooterReferenceType.DEFAULT){this.headers.push({header:e,type:r}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",`header${this.headers.length}.xml`),this.contentTypes.addHeader(this.headers.length)}addFooterToDocument(e,r=HeaderFooterReferenceType.DEFAULT){this.footers.push({footer:e,type:r}),this.documentWrapper.Relationships.createRelationship(e.View.ReferenceId,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",`footer${this.footers.length}.xml`),this.contentTypes.addFooter(this.footers.length)}addDefaultRelationships(){this.fileRelationships.createRelationship(1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument","word/document.xml"),this.fileRelationships.createRelationship(2,"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties","docProps/core.xml"),this.fileRelationships.createRelationship(3,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties","docProps/app.xml"),this.fileRelationships.createRelationship(4,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties","docProps/custom.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles","styles.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering","numbering.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes","footnotes.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings","settings.xml"),this.documentWrapper.Relationships.createRelationship(this.currentRelationshipId++,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments","comments.xml")}get Document(){return this.documentWrapper}get Styles(){return this.styles}get CoreProperties(){return this.coreProperties}get Numbering(){return this.numbering}get Media(){return this.media}get FileRelationships(){return this.fileRelationships}get Headers(){return this.headers.map(e=>e.header)}get Footers(){return this.footers.map(e=>e.footer)}get ContentTypes(){return this.contentTypes}get CustomProperties(){return this.customProperties}get AppProperties(){return this.appProperties}get FootNotes(){return this.footnotesWrapper}get Settings(){return this.settings}get Comments(){return this.comments}get FontTable(){return this.fontWrapper}};var streamBrowserifyExports=requireStreamBrowserify();function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}},hasRequiredJszip_min;function requireJszip_min(){return hasRequiredJszip_min||(hasRequiredJszip_min=1,function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function f(u,y){if(!i[u]){if(!n[u]){var w=typeof commonjsRequire=="function"&&commonjsRequire;if(!y&&w)return w(u,!0);if(a)return a(u,!0);var v=new Error("Cannot find module '"+u+"'");throw v.code="MODULE_NOT_FOUND",v}var g=i[u]={exports:{}};n[u][0].call(g.exports,function(b){var l=n[u][1][b];return f(l||b)},g,g.exports,r,n,i,s)}return i[u].exports}for(var a=typeof commonjsRequire=="function"&&commonjsRequire,o=0;o<s.length;o++)f(s[o]);return f}({1:[function(r,n,i){var s=r("./utils"),f=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(o){for(var u,y,w,v,g,b,l,_=[],h=0,d=o.length,c=d,p=s.getTypeOf(o)!=="string";h<o.length;)c=d-h,w=p?(u=o[h++],y=h<d?o[h++]:0,h<d?o[h++]:0):(u=o.charCodeAt(h++),y=h<d?o.charCodeAt(h++):0,h<d?o.charCodeAt(h++):0),v=u>>2,g=(3&u)<<4|y>>4,b=1<c?(15&y)<<2|w>>6:64,l=2<c?63&w:64,_.push(a.charAt(v)+a.charAt(g)+a.charAt(b)+a.charAt(l));return _.join("")},i.decode=function(o){var u,y,w,v,g,b,l=0,_=0,h="data:";if(o.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,c=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===a.charAt(64)&&c--,o.charAt(o.length-2)===a.charAt(64)&&c--,c%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=f.uint8array?new Uint8Array(0|c):new Array(0|c);l<o.length;)u=a.indexOf(o.charAt(l++))<<2|(v=a.indexOf(o.charAt(l++)))>>4,y=(15&v)<<4|(g=a.indexOf(o.charAt(l++)))>>2,w=(3&g)<<6|(b=a.indexOf(o.charAt(l++))),d[_++]=u,g!==64&&(d[_++]=y),b!==64&&(d[_++]=w);return d}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),f=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),o=r("./stream/DataLengthProbe");function u(y,w,v,g,b){this.compressedSize=y,this.uncompressedSize=w,this.crc32=v,this.compression=g,this.compressedContent=b}u.prototype={getContentWorker:function(){var y=new f(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),w=this;return y.on("end",function(){if(this.streamInfo.data_length!==w.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new f(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(y,w,v){return y.pipe(new a).pipe(new o("uncompressedSize")).pipe(w.compressWorker(v)).pipe(new o("compressedSize")).withStreamInfo("compression",w)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),f=function(){for(var a,o=[],u=0;u<256;u++){a=u;for(var y=0;y<8;y++)a=1&a?3988292384^a>>>1:a>>>1;o[u]=a}return o}();n.exports=function(a,o){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,y,w,v){var g=f,b=v+w;u^=-1;for(var l=v;l<b;l++)u=u>>>8^g[255&(u^y[l])];return-1^u}(0|o,a,a.length,0):function(u,y,w,v){var g=f,b=v+w;u^=-1;for(var l=v;l<b;l++)u=u>>>8^g[255&(u^y.charCodeAt(l))];return-1^u}(0|o,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=r("pako"),a=r("./utils"),o=r("./stream/GenericWorker"),u=s?"uint8array":"array";function y(w,v){o.call(this,"FlateWorker/"+w),this._pako=null,this._pakoAction=w,this._pakoOptions=v,this.meta={}}i.magic="\b\0",a.inherits(y,o),y.prototype.processChunk=function(w){this.meta=w.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,w.data),!1)},y.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var w=this;this._pako.onData=function(v){w.push({data:v,meta:w.meta})}},i.compressWorker=function(w){return new y("Deflate",w)},i.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(g,b){var l,_="";for(l=0;l<b;l++)_+=String.fromCharCode(255&g),g>>>=8;return _}function f(g,b,l,_,h,d){var c,p,m=g.file,S=g.compression,E=d!==u.utf8encode,T=a.transformTo("string",d(m.name)),A=a.transformTo("string",u.utf8encode(m.name)),P=m.comment,H=a.transformTo("string",d(P)),O=a.transformTo("string",u.utf8encode(P)),q=A.length!==m.name.length,C=O.length!==P.length,j="",V="",N="",Y=m.dir,X=m.date,J={crc32:0,compressedSize:0,uncompressedSize:0};b&&!l||(J.crc32=g.crc32,J.compressedSize=g.compressedSize,J.uncompressedSize=g.uncompressedSize);var Q=0;b&&(Q|=8),E||!q&&!C||(Q|=2048);var W=0,U=0;Y&&(W|=16),h==="UNIX"?(U=798,W|=function(ee,Z){var L=ee;return ee||(L=Z?16893:33204),(65535&L)<<16}(m.unixPermissions,Y)):(U=20,W|=function(ee){return 63&(ee||0)}(m.dosPermissions)),c=X.getUTCHours(),c<<=6,c|=X.getUTCMinutes(),c<<=5,c|=X.getUTCSeconds()/2,p=X.getUTCFullYear()-1980,p<<=4,p|=X.getUTCMonth()+1,p<<=5,p|=X.getUTCDate(),q&&(V=s(1,1)+s(y(T),4)+A,j+="up"+s(V.length,2)+V),C&&(N=s(1,1)+s(y(H),4)+O,j+="uc"+s(N.length,2)+N);var $="";return $+=`
\0`,$+=s(Q,2),$+=S.magic,$+=s(c,2),$+=s(p,2),$+=s(J.crc32,4),$+=s(J.compressedSize,4),$+=s(J.uncompressedSize,4),$+=s(T.length,2),$+=s(j.length,2),{fileRecord:w.LOCAL_FILE_HEADER+$+T+j,dirRecord:w.CENTRAL_FILE_HEADER+s(U,2)+$+s(H.length,2)+"\0\0\0\0"+s(W,4)+s(_,4)+T+j+H}}var a=r("../utils"),o=r("../stream/GenericWorker"),u=r("../utf8"),y=r("../crc32"),w=r("../signature");function v(g,b,l,_){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=l,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(v,o),v.prototype.push=function(g){var b=g.meta.percent||0,l=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,o.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:l?(b+100*(l-_-1))/l:100}}))},v.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var b=this.streamFiles&&!g.file.dir;if(b){var l=f(g,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(g){this.accumulate=!1;var b=this.streamFiles&&!g.file.dir,l=f(g,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),b)this.push({data:function(_){return w.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var g=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var l=this.bytesWritten-g,_=function(h,d,c,p,m){var S=a.transformTo("string",m(p));return w.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(h,2)+s(h,2)+s(d,4)+s(c,4)+s(S.length,2)+S}(this.dirRecords.length,l,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(g){this._sources.push(g);var b=this;return g.on("data",function(l){b.processChunk(l)}),g.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),g.on("error",function(l){b.error(l)}),this},v.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},v.prototype.error=function(g){var b=this._sources;if(!o.prototype.error.call(this,g))return!1;for(var l=0;l<b.length;l++)try{b[l].error(g)}catch{}return!0},v.prototype.lock=function(){o.prototype.lock.call(this);for(var g=this._sources,b=0;b<g.length;b++)g[b].lock()},n.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),f=r("./ZipFileWorker");i.generateWorker=function(a,o,u){var y=new f(o.streamFiles,u,o.platform,o.encodeFileName),w=0;try{a.forEach(function(v,g){w++;var b=function(d,c){var p=d||c,m=s[p];if(!m)throw new Error(p+" is not a valid compression method !");return m}(g.options.compression,o.compression),l=g.options.compressionOptions||o.compressionOptions||{},_=g.dir,h=g.date;g._compressWorker(b,l).withStreamInfo("file",{name:v,dir:_,date:h,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(y)}),y.entriesCount=w}catch(v){y.error(v)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new s;for(var a in this)typeof this[a]!="function"&&(f[a]=this[a]);return f}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(f,a){return new s().loadAsync(f,a)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),f=r("./external"),a=r("./utf8"),o=r("./zipEntries"),u=r("./stream/Crc32Probe"),y=r("./nodejsUtils");function w(v){return new f.Promise(function(g,b){var l=v.decompressed.getContentWorker().pipe(new u);l.on("error",function(_){b(_)}).on("end",function(){l.streamInfo.crc32!==v.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}n.exports=function(v,g){var b=this;return g=s.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),y.isNode&&y.isStream(v)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",v,!0,g.optimizedBinaryString,g.base64).then(function(l){var _=new o(g);return _.load(l),_}).then(function(l){var _=[f.Promise.resolve(l)],h=l.files;if(g.checkCRC32)for(var d=0;d<h.length;d++)_.push(w(h[d]));return f.Promise.all(_)}).then(function(l){for(var _=l.shift(),h=_.files,d=0;d<h.length;d++){var c=h[d],p=c.fileNameStr,m=s.resolve(c.fileNameStr);b.file(m,c.decompressed,{binary:!0,optimizedBinaryString:!0,date:c.date,dir:c.dir,comment:c.fileCommentStr.length?c.fileCommentStr:null,unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions,createFolders:g.createFolders}),c.dir||(b.file(m).unsafeOriginalName=p)}return _.zipComment.length&&(b.comment=_.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),f=r("../stream/GenericWorker");function a(o,u){f.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,f),a.prototype._bindStream=function(o){var u=this;(this._stream=o).pause(),o.on("data",function(y){u.push({data:y,meta:{percent:0}})}).on("error",function(y){u.isPaused?this.generatedError=y:u.error(y)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function f(a,o,u){s.call(this,o),this._helper=a;var y=this;a.on("data",function(w,v){y.push(w)||y._helper.pause(),u&&u(v)}).on("error",function(w){y.emit("error",w)}).on("end",function(){y.push(null)})}r("../utils").inherits(f,s),f.prototype._read=function(){this._helper.resume()},n.exports=f},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,f);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,f)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var f=new Buffer(s);return f.fill(0),f},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(m,S,E){var T,A=a.getTypeOf(S),P=a.extend(E||{},y);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(m=h(m)),P.createFolders&&(T=_(m))&&d.call(this,T,!0);var H=A==="string"&&P.binary===!1&&P.base64===!1;E&&E.binary!==void 0||(P.binary=!H),(S instanceof w&&S.uncompressedSize===0||P.dir||!S||S.length===0)&&(P.base64=!1,P.binary=!0,S="",P.compression="STORE",A="string");var O=null;O=S instanceof w||S instanceof o?S:b.isNode&&b.isStream(S)?new l(m,S):a.prepareContent(m,S,P.binary,P.optimizedBinaryString,P.base64);var q=new v(m,O,P);this.files[m]=q}var f=r("./utf8"),a=r("./utils"),o=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),y=r("./defaults"),w=r("./compressedObject"),v=r("./zipObject"),g=r("./generate"),b=r("./nodejsUtils"),l=r("./nodejs/NodejsStreamInputAdapter"),_=function(m){m.slice(-1)==="/"&&(m=m.substring(0,m.length-1));var S=m.lastIndexOf("/");return 0<S?m.substring(0,S):""},h=function(m){return m.slice(-1)!=="/"&&(m+="/"),m},d=function(m,S){return S=S!==void 0?S:y.createFolders,m=h(m),this.files[m]||s.call(this,m,null,{dir:!0,createFolders:S}),this.files[m]};function c(m){return Object.prototype.toString.call(m)==="[object RegExp]"}var p={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(m){var S,E,T;for(S in this.files)T=this.files[S],(E=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&m(E,T)},filter:function(m){var S=[];return this.forEach(function(E,T){m(E,T)&&S.push(T)}),S},file:function(m,S,E){if(arguments.length!==1)return m=this.root+m,s.call(this,m,S,E),this;if(c(m)){var T=m;return this.filter(function(P,H){return!H.dir&&T.test(P)})}var A=this.files[this.root+m];return A&&!A.dir?A:null},folder:function(m){if(!m)return this;if(c(m))return this.filter(function(A,P){return P.dir&&m.test(A)});var S=this.root+m,E=d.call(this,S),T=this.clone();return T.root=E.name,T},remove:function(m){m=this.root+m;var S=this.files[m];if(S||(m.slice(-1)!=="/"&&(m+="/"),S=this.files[m]),S&&!S.dir)delete this.files[m];else for(var E=this.filter(function(A,P){return P.name.slice(0,m.length)===m}),T=0;T<E.length;T++)delete this.files[E[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(m){var S,E={};try{if((E=a.extend(m||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");a.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var T=E.comment||this.comment||"";S=g.generateWorker(this,E,T)}catch(A){(S=new o("error")).error(A)}return new u(S,E.type||"string",E.mimeType)},generateAsync:function(m,S){return this.generateInternalStream(m).accumulate(S)},generateNodeStream:function(m,S){return(m=m||{}).type||(m.type="nodebuffer"),this.generateInternalStream(m).toNodejsStream(S)}};n.exports=p},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function f(a){s.call(this,a);for(var o=0;o<this.data.length;o++)a[o]=255&a[o]}r("../utils").inherits(f,s),f.prototype.byteAt=function(a){return this.data[this.zero+a]},f.prototype.lastIndexOfSignature=function(a){for(var o=a.charCodeAt(0),u=a.charCodeAt(1),y=a.charCodeAt(2),w=a.charCodeAt(3),v=this.length-4;0<=v;--v)if(this.data[v]===o&&this.data[v+1]===u&&this.data[v+2]===y&&this.data[v+3]===w)return v-this.zero;return-1},f.prototype.readAndCheckSignature=function(a){var o=a.charCodeAt(0),u=a.charCodeAt(1),y=a.charCodeAt(2),w=a.charCodeAt(3),v=this.readData(4);return o===v[0]&&u===v[1]&&y===v[2]&&w===v[3]},f.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},n.exports=f},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function f(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var o,u=0;for(this.checkOffset(a),o=this.index+a-1;o>=this.index;o--)u=(u<<8)+this.byteAt(o);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=f},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function f(a){s.call(this,a)}r("../utils").inherits(f,s),f.prototype.readData=function(a){this.checkOffset(a);var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},n.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function f(a){s.call(this,a)}r("../utils").inherits(f,s),f.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},f.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},f.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},f.prototype.readData=function(a){this.checkOffset(a);var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},n.exports=f},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function f(a){s.call(this,a)}r("../utils").inherits(f,s),f.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},n.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),f=r("../support"),a=r("./ArrayReader"),o=r("./StringReader"),u=r("./NodeBufferReader"),y=r("./Uint8ArrayReader");n.exports=function(w){var v=s.getTypeOf(w);return s.checkSupport(v),v!=="string"||f.uint8array?v==="nodebuffer"?new u(w):f.uint8array?new y(s.transformTo("uint8array",w)):new a(s.transformTo("array",w)):new o(w)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),f=r("../utils");function a(o){s.call(this,"ConvertWorker to "+o),this.destType=o}f.inherits(a,s),a.prototype.processChunk=function(o){this.push({data:f.transformTo(this.destType,o.data),meta:o.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),f=r("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,s),a.prototype.processChunk=function(o){this.streamInfo.crc32=f(o.data,this.streamInfo.crc32||0),this.push(o)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),f=r("./GenericWorker");function a(o){f.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}s.inherits(a,f),a.prototype.processChunk=function(o){if(o){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+o.data.length}f.prototype.processChunk.call(this,o)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),f=r("./GenericWorker");function a(o){f.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(y){u.dataIsReady=!0,u.data=y,u.max=y&&y.length||0,u.type=s.getTypeOf(y),u.isPaused||u._tickAndRepeat()},function(y){u.error(y)})}s.inherits(a,f),a.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,u);break;case"uint8array":o=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":o=this.data.slice(this.index,u)}return this.index=u,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,a){return this._listeners[f].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,a){if(this._listeners[f])for(var o=0;o<this._listeners[f].length;o++)this._listeners[f][o].call(this,a)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var a=this;return f.on("data",function(o){a.processChunk(o)}),f.on("end",function(){a.end()}),f.on("error",function(o){a.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,a){return this.extraStreamInfo[f]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),f=r("./ConvertWorker"),a=r("./GenericWorker"),o=r("../base64"),u=r("../support"),y=r("../external"),w=null;if(u.nodestream)try{w=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function v(b,l){return new y.Promise(function(_,h){var d=[],c=b._internalType,p=b._outputType,m=b._mimeType;b.on("data",function(S,E){d.push(S),l&&l(E)}).on("error",function(S){d=[],h(S)}).on("end",function(){try{var S=function(E,T,A){switch(E){case"blob":return s.newBlob(s.transformTo("arraybuffer",T),A);case"base64":return o.encode(T);default:return s.transformTo(E,T)}}(p,function(E,T){var A,P=0,H=null,O=0;for(A=0;A<T.length;A++)O+=T[A].length;switch(E){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(H=new Uint8Array(O),A=0;A<T.length;A++)H.set(T[A],P),P+=T[A].length;return H;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+E+"'")}}(c,d),m);_(S)}catch(E){h(E)}d=[]}).resume()})}function g(b,l,_){var h=l;switch(l){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=l,this._mimeType=_,s.checkSupport(h),this._worker=b.pipe(new f(h)),b.lock()}catch(d){this._worker=new a("error"),this._worker.error(d)}}g.prototype={accumulate:function(b){return v(this,b)},on:function(b,l){var _=this;return b==="data"?this._worker.on(b,function(h){l.call(_,h.data,h.meta)}):this._worker.on(b,function(){s.delay(l,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new w(this,{objectMode:this._outputType!=="nodebuffer"},b)}},n.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(s),i.blob=f.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),f=r("./support"),a=r("./nodejsUtils"),o=r("./stream/GenericWorker"),u=new Array(256),y=0;y<256;y++)u[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;u[254]=u[254]=1;function w(){o.call(this,"utf-8 decode"),this.leftOver=null}function v(){o.call(this,"utf-8 encode")}i.utf8encode=function(g){return f.nodebuffer?a.newBufferFrom(g,"utf-8"):function(b){var l,_,h,d,c,p=b.length,m=0;for(d=0;d<p;d++)(64512&(_=b.charCodeAt(d)))==55296&&d+1<p&&(64512&(h=b.charCodeAt(d+1)))==56320&&(_=65536+(_-55296<<10)+(h-56320),d++),m+=_<128?1:_<2048?2:_<65536?3:4;for(l=f.uint8array?new Uint8Array(m):new Array(m),d=c=0;c<m;d++)(64512&(_=b.charCodeAt(d)))==55296&&d+1<p&&(64512&(h=b.charCodeAt(d+1)))==56320&&(_=65536+(_-55296<<10)+(h-56320),d++),_<128?l[c++]=_:(_<2048?l[c++]=192|_>>>6:(_<65536?l[c++]=224|_>>>12:(l[c++]=240|_>>>18,l[c++]=128|_>>>12&63),l[c++]=128|_>>>6&63),l[c++]=128|63&_);return l}(g)},i.utf8decode=function(g){return f.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):function(b){var l,_,h,d,c=b.length,p=new Array(2*c);for(l=_=0;l<c;)if((h=b[l++])<128)p[_++]=h;else if(4<(d=u[h]))p[_++]=65533,l+=d-1;else{for(h&=d===2?31:d===3?15:7;1<d&&l<c;)h=h<<6|63&b[l++],d--;1<d?p[_++]=65533:h<65536?p[_++]=h:(h-=65536,p[_++]=55296|h>>10&1023,p[_++]=56320|1023&h)}return p.length!==_&&(p.subarray?p=p.subarray(0,_):p.length=_),s.applyFromCharCode(p)}(g=s.transformTo(f.uint8array?"uint8array":"array",g))},s.inherits(w,o),w.prototype.processChunk=function(g){var b=s.transformTo(f.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var l=b;(b=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),b.set(l,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var _=function(d,c){var p;for((c=c||d.length)>d.length&&(c=d.length),p=c-1;0<=p&&(192&d[p])==128;)p--;return p<0||p===0?c:p+u[d[p]]>c?p:c}(b),h=b;_!==b.length&&(f.uint8array?(h=b.subarray(0,_),this.leftOver=b.subarray(_,b.length)):(h=b.slice(0,_),this.leftOver=b.slice(_,b.length))),this.push({data:i.utf8decode(h),meta:g.meta})},w.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=w,s.inherits(v,o),v.prototype.processChunk=function(g){this.push({data:i.utf8encode(g.data),meta:g.meta})},i.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),f=r("./base64"),a=r("./nodejsUtils"),o=r("./external");function u(l){return l}function y(l,_){for(var h=0;h<l.length;++h)_[h]=255&l.charCodeAt(h);return _}r("setimmediate"),i.newBlob=function(l,_){i.checkSupport("blob");try{return new Blob([l],{type:_})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(l),h.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var w={stringifyByChunk:function(l,_,h){var d=[],c=0,p=l.length;if(p<=h)return String.fromCharCode.apply(null,l);for(;c<p;)_==="array"||_==="nodebuffer"?d.push(String.fromCharCode.apply(null,l.slice(c,Math.min(c+h,p)))):d.push(String.fromCharCode.apply(null,l.subarray(c,Math.min(c+h,p)))),c+=h;return d.join("")},stringifyByChar:function(l){for(var _="",h=0;h<l.length;h++)_+=String.fromCharCode(l[h]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function v(l){var _=65536,h=i.getTypeOf(l),d=!0;if(h==="uint8array"?d=w.applyCanBeUsed.uint8array:h==="nodebuffer"&&(d=w.applyCanBeUsed.nodebuffer),d)for(;1<_;)try{return w.stringifyByChunk(l,h,_)}catch{_=Math.floor(_/2)}return w.stringifyByChar(l)}function g(l,_){for(var h=0;h<l.length;h++)_[h]=l[h];return _}i.applyFromCharCode=v;var b={};b.string={string:u,array:function(l){return y(l,new Array(l.length))},arraybuffer:function(l){return b.string.uint8array(l).buffer},uint8array:function(l){return y(l,new Uint8Array(l.length))},nodebuffer:function(l){return y(l,a.allocBuffer(l.length))}},b.array={string:v,array:u,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return a.newBufferFrom(l)}},b.arraybuffer={string:function(l){return v(new Uint8Array(l))},array:function(l){return g(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:u,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return a.newBufferFrom(new Uint8Array(l))}},b.uint8array={string:v,array:function(l){return g(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:u,nodebuffer:function(l){return a.newBufferFrom(l)}},b.nodebuffer={string:v,array:function(l){return g(l,new Array(l.length))},arraybuffer:function(l){return b.nodebuffer.uint8array(l).buffer},uint8array:function(l){return g(l,new Uint8Array(l.length))},nodebuffer:u},i.transformTo=function(l,_){if(_=_||"",!l)return _;i.checkSupport(l);var h=i.getTypeOf(_);return b[h][l](_)},i.resolve=function(l){for(var _=l.split("/"),h=[],d=0;d<_.length;d++){var c=_[d];c==="."||c===""&&d!==0&&d!==_.length-1||(c===".."?h.pop():h.push(c))}return h.join("/")},i.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(l)?"nodebuffer":s.uint8array&&l instanceof Uint8Array?"uint8array":s.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(l){if(!s[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(l){var _,h,d="";for(h=0;h<(l||"").length;h++)d+="\\x"+((_=l.charCodeAt(h))<16?"0":"")+_.toString(16).toUpperCase();return d},i.delay=function(l,_,h){setImmediate(function(){l.apply(h||null,_||[])})},i.inherits=function(l,_){function h(){}h.prototype=_.prototype,l.prototype=new h},i.extend=function(){var l,_,h={};for(l=0;l<arguments.length;l++)for(_ in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],_)&&h[_]===void 0&&(h[_]=arguments[l][_]);return h},i.prepareContent=function(l,_,h,d,c){return o.Promise.resolve(_).then(function(p){return s.blob&&(p instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(p))!==-1)&&typeof FileReader<"u"?new o.Promise(function(m,S){var E=new FileReader;E.onload=function(T){m(T.target.result)},E.onerror=function(T){S(T.target.error)},E.readAsArrayBuffer(p)}):p}).then(function(p){var m=i.getTypeOf(p);return m?(m==="arraybuffer"?p=i.transformTo("uint8array",p):m==="string"&&(c?p=f.decode(p):h&&d!==!0&&(p=function(S){return y(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))}(p))),p):o.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),f=r("./utils"),a=r("./signature"),o=r("./zipEntry"),u=r("./support");function y(w){this.files=[],this.loadOptions=w}y.prototype={checkSignature:function(w){if(!this.reader.readAndCheckSignature(w)){this.reader.index-=4;var v=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(v)+", expected "+f.pretty(w)+")")}},isSignature:function(w,v){var g=this.reader.index;this.reader.setIndex(w);var b=this.reader.readString(4)===v;return this.reader.setIndex(g),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var w=this.reader.readData(this.zipCommentLength),v=u.uint8array?"uint8array":"array",g=f.transformTo(v,w);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var w,v,g,b=this.zip64EndOfCentralSize-44;0<b;)w=this.reader.readInt(2),v=this.reader.readInt(4),g=this.reader.readData(v),this.zip64ExtensibleData[w]={id:w,length:v,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var w,v;for(w=0;w<this.files.length;w++)v=this.files[w],this.reader.setIndex(v.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),v.readLocalPart(this.reader),v.handleUTF8(),v.processAttributes()},readCentralDir:function(){var w;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(w=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(w);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var w=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(w<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(w);var v=w;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(w=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(w),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var b=v-g;if(0<b)this.isSignature(v,a.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(w){this.reader=s(w)},load:function(w){this.prepareReader(w),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),f=r("./utils"),a=r("./compressedObject"),o=r("./crc32"),u=r("./utf8"),y=r("./compressions"),w=r("./support");function v(g,b){this.options=g,this.loadOptions=b}v.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var b,l;if(g.skip(22),this.fileNameLength=g.readInt(2),l=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=function(_){for(var h in y)if(Object.prototype.hasOwnProperty.call(y,h)&&y[h].magic===_)return y[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,b,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var b=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(b),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=s(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var b,l,_,h=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<h;)b=g.readInt(2),l=g.readInt(2),_=g.readData(l),this.extraFields[b]={id:b,length:l,value:_};g.setIndex(h)},handleUTF8:function(){var g=w.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var l=f.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var h=f.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var b=s(g.value);return b.readInt(1)!==1||o(this.fileName)!==b.readInt(4)?null:u.utf8decode(b.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var b=s(g.value);return b.readInt(1)!==1||o(this.fileComment)!==b.readInt(4)?null:u.utf8decode(b.readData(g.length-5))}return null}},n.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(b,l,_){this.name=b,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=l,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var f=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),o=r("./utf8"),u=r("./compressedObject"),y=r("./stream/GenericWorker");s.prototype={internalStream:function(b){var l=null,_="string";try{if(!b)throw new Error("No output type specified.");var h=(_=b.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),l=this._decompressWorker();var d=!this._dataBinary;d&&!h&&(l=l.pipe(new o.Utf8EncodeWorker)),!d&&h&&(l=l.pipe(new o.Utf8DecodeWorker))}catch(c){(l=new y("error")).error(c)}return new f(l,_,"")},async:function(b,l){return this.internalStream(b).accumulate(l)},nodeStream:function(b,l){return this.internalStream(b||"nodebuffer").toNodejsStream(l)},_compressWorker:function(b,l){if(this._data instanceof u&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new o.Utf8EncodeWorker)),u.createWorkerFrom(_,b,l)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof y?this._data:new a(this._data)}};for(var w=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],v=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<w.length;g++)s.prototype[w[g]]=v;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var f,a,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var u=0,y=new o(b),w=s.document.createTextNode("");y.observe(w,{characterData:!0}),f=function(){w.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)f="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var l=s.document.createElement("script");l.onreadystatechange=function(){b(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},s.document.documentElement.appendChild(l)}:function(){setTimeout(b,0)};else{var v=new s.MessageChannel;v.port1.onmessage=b,f=function(){v.port2.postMessage(0)}}var g=[];function b(){var l,_;a=!0;for(var h=g.length;h;){for(_=g,g=[],l=-1;++l<h;)_[l]();h=g.length}a=!1}n.exports=function(l){g.push(l)!==1||a||f()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function f(){}var a={},o=["REJECTED"],u=["FULFILLED"],y=["PENDING"];function w(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,h!==f&&l(this,h)}function v(h,d,c){this.promise=h,typeof d=="function"&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled),typeof c=="function"&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(h,d,c){s(function(){var p;try{p=d(c)}catch(m){return a.reject(h,m)}p===h?a.reject(h,new TypeError("Cannot resolve promise with itself")):a.resolve(h,p)})}function b(h){var d=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof d=="function")return function(){d.apply(h,arguments)}}function l(h,d){var c=!1;function p(E){c||(c=!0,a.reject(h,E))}function m(E){c||(c=!0,a.resolve(h,E))}var S=_(function(){d(m,p)});S.status==="error"&&p(S.value)}function _(h,d){var c={};try{c.value=h(d),c.status="success"}catch(p){c.status="error",c.value=p}return c}(n.exports=w).prototype.finally=function(h){if(typeof h!="function")return this;var d=this.constructor;return this.then(function(c){return d.resolve(h()).then(function(){return c})},function(c){return d.resolve(h()).then(function(){throw c})})},w.prototype.catch=function(h){return this.then(null,h)},w.prototype.then=function(h,d){if(typeof h!="function"&&this.state===u||typeof d!="function"&&this.state===o)return this;var c=new this.constructor(f);return this.state!==y?g(c,this.state===u?h:d,this.outcome):this.queue.push(new v(c,h,d)),c},v.prototype.callFulfilled=function(h){a.resolve(this.promise,h)},v.prototype.otherCallFulfilled=function(h){g(this.promise,this.onFulfilled,h)},v.prototype.callRejected=function(h){a.reject(this.promise,h)},v.prototype.otherCallRejected=function(h){g(this.promise,this.onRejected,h)},a.resolve=function(h,d){var c=_(b,d);if(c.status==="error")return a.reject(h,c.value);var p=c.value;if(p)l(h,p);else{h.state=u,h.outcome=d;for(var m=-1,S=h.queue.length;++m<S;)h.queue[m].callFulfilled(d)}return h},a.reject=function(h,d){h.state=o,h.outcome=d;for(var c=-1,p=h.queue.length;++c<p;)h.queue[c].callRejected(d);return h},w.resolve=function(h){return h instanceof this?h:a.resolve(new this(f),h)},w.reject=function(h){var d=new this(f);return a.reject(d,h)},w.all=function(h){var d=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var c=h.length,p=!1;if(!c)return this.resolve([]);for(var m=new Array(c),S=0,E=-1,T=new this(f);++E<c;)A(h[E],E);return T;function A(P,H){d.resolve(P).then(function(O){m[H]=O,++S!==c||p||(p=!0,a.resolve(T,m))},function(O){p||(p=!0,a.reject(T,O))})}},w.race=function(h){var d=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var c=h.length,p=!1;if(!c)return this.resolve([]);for(var m=-1,S=new this(f);++m<c;)E=h[m],d.resolve(E).then(function(T){p||(p=!0,a.resolve(S,T))},function(T){p||(p=!0,a.reject(S,T))});var E;return S}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),f=r("./utils/common"),a=r("./utils/strings"),o=r("./zlib/messages"),u=r("./zlib/zstream"),y=Object.prototype.toString,w=0,v=-1,g=0,b=8;function l(h){if(!(this instanceof l))return new l(h);this.options=f.assign({level:v,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},h||{});var d=this.options;d.raw&&0<d.windowBits?d.windowBits=-d.windowBits:d.gzip&&0<d.windowBits&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var c=s.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(c!==w)throw new Error(o[c]);if(d.header&&s.deflateSetHeader(this.strm,d.header),d.dictionary){var p;if(p=typeof d.dictionary=="string"?a.string2buf(d.dictionary):y.call(d.dictionary)==="[object ArrayBuffer]"?new Uint8Array(d.dictionary):d.dictionary,(c=s.deflateSetDictionary(this.strm,p))!==w)throw new Error(o[c]);this._dict_set=!0}}function _(h,d){var c=new l(d);if(c.push(h,!0),c.err)throw c.msg||o[c.err];return c.result}l.prototype.push=function(h,d){var c,p,m=this.strm,S=this.options.chunkSize;if(this.ended)return!1;p=d===~~d?d:d===!0?4:0,typeof h=="string"?m.input=a.string2buf(h):y.call(h)==="[object ArrayBuffer]"?m.input=new Uint8Array(h):m.input=h,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new f.Buf8(S),m.next_out=0,m.avail_out=S),(c=s.deflate(m,p))!==1&&c!==w)return this.onEnd(c),!(this.ended=!0);m.avail_out!==0&&(m.avail_in!==0||p!==4&&p!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(f.shrinkBuf(m.output,m.next_out))):this.onData(f.shrinkBuf(m.output,m.next_out)))}while((0<m.avail_in||m.avail_out===0)&&c!==1);return p===4?(c=s.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===w):p!==2||(this.onEnd(w),!(m.avail_out=0))},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===w&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},i.Deflate=l,i.deflate=_,i.deflateRaw=function(h,d){return(d=d||{}).raw=!0,_(h,d)},i.gzip=function(h,d){return(d=d||{}).gzip=!0,_(h,d)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),f=r("./utils/common"),a=r("./utils/strings"),o=r("./zlib/constants"),u=r("./zlib/messages"),y=r("./zlib/zstream"),w=r("./zlib/gzheader"),v=Object.prototype.toString;function g(l){if(!(this instanceof g))return new g(l);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},l||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||l&&l.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var h=s.inflateInit2(this.strm,_.windowBits);if(h!==o.Z_OK)throw new Error(u[h]);this.header=new w,s.inflateGetHeader(this.strm,this.header)}function b(l,_){var h=new g(_);if(h.push(l,!0),h.err)throw h.msg||u[h.err];return h.result}g.prototype.push=function(l,_){var h,d,c,p,m,S,E=this.strm,T=this.options.chunkSize,A=this.options.dictionary,P=!1;if(this.ended)return!1;d=_===~~_?_:_===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof l=="string"?E.input=a.binstring2buf(l):v.call(l)==="[object ArrayBuffer]"?E.input=new Uint8Array(l):E.input=l,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new f.Buf8(T),E.next_out=0,E.avail_out=T),(h=s.inflate(E,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&A&&(S=typeof A=="string"?a.string2buf(A):v.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,h=s.inflateSetDictionary(this.strm,S)),h===o.Z_BUF_ERROR&&P===!0&&(h=o.Z_OK,P=!1),h!==o.Z_STREAM_END&&h!==o.Z_OK)return this.onEnd(h),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&h!==o.Z_STREAM_END&&(E.avail_in!==0||d!==o.Z_FINISH&&d!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(c=a.utf8border(E.output,E.next_out),p=E.next_out-c,m=a.buf2string(E.output,c),E.next_out=p,E.avail_out=T-p,p&&f.arraySet(E.output,E.output,c,p,0),this.onData(m)):this.onData(f.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(P=!0)}while((0<E.avail_in||E.avail_out===0)&&h!==o.Z_STREAM_END);return h===o.Z_STREAM_END&&(d=o.Z_FINISH),d===o.Z_FINISH?(h=s.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===o.Z_OK):d!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(E.avail_out=0))},g.prototype.onData=function(l){this.chunks.push(l)},g.prototype.onEnd=function(l){l===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},i.Inflate=g,i.inflate=b,i.inflateRaw=function(l,_){return(_=_||{}).raw=!0,b(l,_)},i.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(o){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var y=u.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var w in y)y.hasOwnProperty(w)&&(o[w]=y[w])}}return o},i.shrinkBuf=function(o,u){return o.length===u?o:o.subarray?o.subarray(0,u):(o.length=u,o)};var f={arraySet:function(o,u,y,w,v){if(u.subarray&&o.subarray)o.set(u.subarray(y,y+w),v);else for(var g=0;g<w;g++)o[v+g]=u[y+g]},flattenChunks:function(o){var u,y,w,v,g,b;for(u=w=0,y=o.length;u<y;u++)w+=o[u].length;for(b=new Uint8Array(w),u=v=0,y=o.length;u<y;u++)g=o[u],b.set(g,v),v+=g.length;return b}},a={arraySet:function(o,u,y,w,v){for(var g=0;g<w;g++)o[v+g]=u[y+g]},flattenChunks:function(o){return[].concat.apply([],o)}};i.setTyped=function(o){o?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,f)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),f=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var o=new s.Buf8(256),u=0;u<256;u++)o[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function y(w,v){if(v<65537&&(w.subarray&&a||!w.subarray&&f))return String.fromCharCode.apply(null,s.shrinkBuf(w,v));for(var g="",b=0;b<v;b++)g+=String.fromCharCode(w[b]);return g}o[254]=o[254]=1,i.string2buf=function(w){var v,g,b,l,_,h=w.length,d=0;for(l=0;l<h;l++)(64512&(g=w.charCodeAt(l)))==55296&&l+1<h&&(64512&(b=w.charCodeAt(l+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),l++),d+=g<128?1:g<2048?2:g<65536?3:4;for(v=new s.Buf8(d),l=_=0;_<d;l++)(64512&(g=w.charCodeAt(l)))==55296&&l+1<h&&(64512&(b=w.charCodeAt(l+1)))==56320&&(g=65536+(g-55296<<10)+(b-56320),l++),g<128?v[_++]=g:(g<2048?v[_++]=192|g>>>6:(g<65536?v[_++]=224|g>>>12:(v[_++]=240|g>>>18,v[_++]=128|g>>>12&63),v[_++]=128|g>>>6&63),v[_++]=128|63&g);return v},i.buf2binstring=function(w){return y(w,w.length)},i.binstring2buf=function(w){for(var v=new s.Buf8(w.length),g=0,b=v.length;g<b;g++)v[g]=w.charCodeAt(g);return v},i.buf2string=function(w,v){var g,b,l,_,h=v||w.length,d=new Array(2*h);for(g=b=0;g<h;)if((l=w[g++])<128)d[b++]=l;else if(4<(_=o[l]))d[b++]=65533,g+=_-1;else{for(l&=_===2?31:_===3?15:7;1<_&&g<h;)l=l<<6|63&w[g++],_--;1<_?d[b++]=65533:l<65536?d[b++]=l:(l-=65536,d[b++]=55296|l>>10&1023,d[b++]=56320|1023&l)}return y(d,b)},i.utf8border=function(w,v){var g;for((v=v||w.length)>w.length&&(v=w.length),g=v-1;0<=g&&(192&w[g])==128;)g--;return g<0||g===0?v:g+o[w[g]]>v?g:v}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,f,a,o){for(var u=65535&s|0,y=s>>>16&65535|0,w=0;a!==0;){for(a-=w=2e3<a?2e3:a;y=y+(u=u+f[o++]|0)|0,--w;);u%=65521,y%=65521}return u|y<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var f,a=[],o=0;o<256;o++){f=o;for(var u=0;u<8;u++)f=1&f?3988292384^f>>>1:f>>>1;a[o]=f}return a}();n.exports=function(f,a,o,u){var y=s,w=u+o;f^=-1;for(var v=u;v<w;v++)f=f>>>8^y[255&(f^a[v])];return-1^f}},{}],46:[function(r,n,i){var s,f=r("../utils/common"),a=r("./trees"),o=r("./adler32"),u=r("./crc32"),y=r("./messages"),w=0,v=4,g=0,b=-2,l=-1,_=4,h=2,d=8,c=9,p=286,m=30,S=19,E=2*p+1,T=15,A=3,P=258,H=P+A+1,O=42,q=113,C=1,j=2,V=3,N=4;function Y(M,ne){return M.msg=y[ne],ne}function X(M){return(M<<1)-(4<M?9:0)}function J(M){for(var ne=M.length;0<=--ne;)M[ne]=0}function Q(M){var ne=M.state,D=ne.pending;D>M.avail_out&&(D=M.avail_out),D!==0&&(f.arraySet(M.output,ne.pending_buf,ne.pending_out,D,M.next_out),M.next_out+=D,ne.pending_out+=D,M.total_out+=D,M.avail_out-=D,ne.pending-=D,ne.pending===0&&(ne.pending_out=0))}function W(M,ne){a._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,ne),M.block_start=M.strstart,Q(M.strm)}function U(M,ne){M.pending_buf[M.pending++]=ne}function $(M,ne){M.pending_buf[M.pending++]=ne>>>8&255,M.pending_buf[M.pending++]=255&ne}function ee(M,ne){var D,x,R=M.max_chain_length,G=M.strstart,ie=M.prev_length,ae=M.nice_match,se=M.strstart>M.w_size-H?M.strstart-(M.w_size-H):0,ue=M.window,le=M.w_mask,de=M.prev,he=M.strstart+P,ge=ue[G+ie-1],be=ue[G+ie];M.prev_length>=M.good_match&&(R>>=2),ae>M.lookahead&&(ae=M.lookahead);do if(ue[(D=ne)+ie]===be&&ue[D+ie-1]===ge&&ue[D]===ue[G]&&ue[++D]===ue[G+1]){G+=2,D++;do;while(ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&ue[++G]===ue[++D]&&G<he);if(x=P-(he-G),G=he-P,ie<x){if(M.match_start=ne,ae<=(ie=x))break;ge=ue[G+ie-1],be=ue[G+ie]}}while((ne=de[ne&le])>se&&--R!=0);return ie<=M.lookahead?ie:M.lookahead}function Z(M){var ne,D,x,R,G,ie,ae,se,ue,le,de=M.w_size;do{if(R=M.window_size-M.lookahead-M.strstart,M.strstart>=de+(de-H)){for(f.arraySet(M.window,M.window,de,de,0),M.match_start-=de,M.strstart-=de,M.block_start-=de,ne=D=M.hash_size;x=M.head[--ne],M.head[ne]=de<=x?x-de:0,--D;);for(ne=D=de;x=M.prev[--ne],M.prev[ne]=de<=x?x-de:0,--D;);R+=de}if(M.strm.avail_in===0)break;if(ie=M.strm,ae=M.window,se=M.strstart+M.lookahead,ue=R,le=void 0,le=ie.avail_in,ue<le&&(le=ue),D=le===0?0:(ie.avail_in-=le,f.arraySet(ae,ie.input,ie.next_in,le,se),ie.state.wrap===1?ie.adler=o(ie.adler,ae,le,se):ie.state.wrap===2&&(ie.adler=u(ie.adler,ae,le,se)),ie.next_in+=le,ie.total_in+=le,le),M.lookahead+=D,M.lookahead+M.insert>=A)for(G=M.strstart-M.insert,M.ins_h=M.window[G],M.ins_h=(M.ins_h<<M.hash_shift^M.window[G+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[G+A-1])&M.hash_mask,M.prev[G&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=G,G++,M.insert--,!(M.lookahead+M.insert<A)););}while(M.lookahead<H&&M.strm.avail_in!==0)}function L(M,ne){for(var D,x;;){if(M.lookahead<H){if(Z(M),M.lookahead<H&&ne===w)return C;if(M.lookahead===0)break}if(D=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,D=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),D!==0&&M.strstart-D<=M.w_size-H&&(M.match_length=ee(M,D)),M.match_length>=A)if(x=a._tr_tally(M,M.strstart-M.match_start,M.match_length-A),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=A){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,D=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else x=a._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(x&&(W(M,!1),M.strm.avail_out===0))return C}return M.insert=M.strstart<A-1?M.strstart:A-1,ne===v?(W(M,!0),M.strm.avail_out===0?V:N):M.last_lit&&(W(M,!1),M.strm.avail_out===0)?C:j}function I(M,ne){for(var D,x,R;;){if(M.lookahead<H){if(Z(M),M.lookahead<H&&ne===w)return C;if(M.lookahead===0)break}if(D=0,M.lookahead>=A&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,D=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=A-1,D!==0&&M.prev_length<M.max_lazy_match&&M.strstart-D<=M.w_size-H&&(M.match_length=ee(M,D),M.match_length<=5&&(M.strategy===1||M.match_length===A&&4096<M.strstart-M.match_start)&&(M.match_length=A-1)),M.prev_length>=A&&M.match_length<=M.prev_length){for(R=M.strstart+M.lookahead-A,x=a._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-A),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=R&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+A-1])&M.hash_mask,D=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=A-1,M.strstart++,x&&(W(M,!1),M.strm.avail_out===0))return C}else if(M.match_available){if((x=a._tr_tally(M,0,M.window[M.strstart-1]))&&W(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return C}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(x=a._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<A-1?M.strstart:A-1,ne===v?(W(M,!0),M.strm.avail_out===0?V:N):M.last_lit&&(W(M,!1),M.strm.avail_out===0)?C:j}function k(M,ne,D,x,R){this.good_length=M,this.max_lazy=ne,this.nice_length=D,this.max_chain=x,this.func=R}function B(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=d,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*E),this.dyn_dtree=new f.Buf16(2*(2*m+1)),this.bl_tree=new f.Buf16(2*(2*S+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(T+1),this.heap=new f.Buf16(2*p+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*p+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function F(M){var ne;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=h,(ne=M.state).pending=0,ne.pending_out=0,ne.wrap<0&&(ne.wrap=-ne.wrap),ne.status=ne.wrap?O:q,M.adler=ne.wrap===2?0:1,ne.last_flush=w,a._tr_init(ne),g):Y(M,b)}function K(M){var ne=F(M);return ne===g&&function(D){D.window_size=2*D.w_size,J(D.head),D.max_lazy_match=s[D.level].max_lazy,D.good_match=s[D.level].good_length,D.nice_match=s[D.level].nice_length,D.max_chain_length=s[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=A-1,D.match_available=0,D.ins_h=0}(M.state),ne}function te(M,ne,D,x,R,G){if(!M)return b;var ie=1;if(ne===l&&(ne=6),x<0?(ie=0,x=-x):15<x&&(ie=2,x-=16),R<1||c<R||D!==d||x<8||15<x||ne<0||9<ne||G<0||_<G)return Y(M,b);x===8&&(x=9);var ae=new B;return(M.state=ae).strm=M,ae.wrap=ie,ae.gzhead=null,ae.w_bits=x,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=R+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+A-1)/A),ae.window=new f.Buf8(2*ae.w_size),ae.head=new f.Buf16(ae.hash_size),ae.prev=new f.Buf16(ae.w_size),ae.lit_bufsize=1<<R+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new f.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=ne,ae.strategy=G,ae.method=D,K(M)}s=[new k(0,0,0,0,function(M,ne){var D=65535;for(D>M.pending_buf_size-5&&(D=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Z(M),M.lookahead===0&&ne===w)return C;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var x=M.block_start+D;if((M.strstart===0||M.strstart>=x)&&(M.lookahead=M.strstart-x,M.strstart=x,W(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-H&&(W(M,!1),M.strm.avail_out===0))return C}return M.insert=0,ne===v?(W(M,!0),M.strm.avail_out===0?V:N):(M.strstart>M.block_start&&(W(M,!1),M.strm.avail_out),C)}),new k(4,4,8,4,L),new k(4,5,16,8,L),new k(4,6,32,32,L),new k(4,4,16,16,I),new k(8,16,32,32,I),new k(8,16,128,128,I),new k(8,32,128,256,I),new k(32,128,258,1024,I),new k(32,258,258,4096,I)],i.deflateInit=function(M,ne){return te(M,ne,d,15,8,0)},i.deflateInit2=te,i.deflateReset=K,i.deflateResetKeep=F,i.deflateSetHeader=function(M,ne){return M&&M.state?M.state.wrap!==2?b:(M.state.gzhead=ne,g):b},i.deflate=function(M,ne){var D,x,R,G;if(!M||!M.state||5<ne||ne<0)return M?Y(M,b):b;if(x=M.state,!M.output||!M.input&&M.avail_in!==0||x.status===666&&ne!==v)return Y(M,M.avail_out===0?-5:b);if(x.strm=M,D=x.last_flush,x.last_flush=ne,x.status===O)if(x.wrap===2)M.adler=0,U(x,31),U(x,139),U(x,8),x.gzhead?(U(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),U(x,255&x.gzhead.time),U(x,x.gzhead.time>>8&255),U(x,x.gzhead.time>>16&255),U(x,x.gzhead.time>>24&255),U(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),U(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(U(x,255&x.gzhead.extra.length),U(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(M.adler=u(M.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(U(x,0),U(x,0),U(x,0),U(x,0),U(x,0),U(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),U(x,3),x.status=q);else{var ie=d+(x.w_bits-8<<4)<<8;ie|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(ie|=32),ie+=31-ie%31,x.status=q,$(x,ie),x.strstart!==0&&($(x,M.adler>>>16),$(x,65535&M.adler)),M.adler=1}if(x.status===69)if(x.gzhead.extra){for(R=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>R&&(M.adler=u(M.adler,x.pending_buf,x.pending-R,R)),Q(M),R=x.pending,x.pending!==x.pending_buf_size));)U(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>R&&(M.adler=u(M.adler,x.pending_buf,x.pending-R,R)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){R=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>R&&(M.adler=u(M.adler,x.pending_buf,x.pending-R,R)),Q(M),R=x.pending,x.pending===x.pending_buf_size)){G=1;break}G=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,U(x,G)}while(G!==0);x.gzhead.hcrc&&x.pending>R&&(M.adler=u(M.adler,x.pending_buf,x.pending-R,R)),G===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){R=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>R&&(M.adler=u(M.adler,x.pending_buf,x.pending-R,R)),Q(M),R=x.pending,x.pending===x.pending_buf_size)){G=1;break}G=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,U(x,G)}while(G!==0);x.gzhead.hcrc&&x.pending>R&&(M.adler=u(M.adler,x.pending_buf,x.pending-R,R)),G===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&Q(M),x.pending+2<=x.pending_buf_size&&(U(x,255&M.adler),U(x,M.adler>>8&255),M.adler=0,x.status=q)):x.status=q),x.pending!==0){if(Q(M),M.avail_out===0)return x.last_flush=-1,g}else if(M.avail_in===0&&X(ne)<=X(D)&&ne!==v)return Y(M,-5);if(x.status===666&&M.avail_in!==0)return Y(M,-5);if(M.avail_in!==0||x.lookahead!==0||ne!==w&&x.status!==666){var ae=x.strategy===2?function(se,ue){for(var le;;){if(se.lookahead===0&&(Z(se),se.lookahead===0)){if(ue===w)return C;break}if(se.match_length=0,le=a._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,le&&(W(se,!1),se.strm.avail_out===0))return C}return se.insert=0,ue===v?(W(se,!0),se.strm.avail_out===0?V:N):se.last_lit&&(W(se,!1),se.strm.avail_out===0)?C:j}(x,ne):x.strategy===3?function(se,ue){for(var le,de,he,ge,be=se.window;;){if(se.lookahead<=P){if(Z(se),se.lookahead<=P&&ue===w)return C;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=A&&0<se.strstart&&(de=be[he=se.strstart-1])===be[++he]&&de===be[++he]&&de===be[++he]){ge=se.strstart+P;do;while(de===be[++he]&&de===be[++he]&&de===be[++he]&&de===be[++he]&&de===be[++he]&&de===be[++he]&&de===be[++he]&&de===be[++he]&&he<ge);se.match_length=P-(ge-he),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=A?(le=a._tr_tally(se,1,se.match_length-A),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(le=a._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),le&&(W(se,!1),se.strm.avail_out===0))return C}return se.insert=0,ue===v?(W(se,!0),se.strm.avail_out===0?V:N):se.last_lit&&(W(se,!1),se.strm.avail_out===0)?C:j}(x,ne):s[x.level].func(x,ne);if(ae!==V&&ae!==N||(x.status=666),ae===C||ae===V)return M.avail_out===0&&(x.last_flush=-1),g;if(ae===j&&(ne===1?a._tr_align(x):ne!==5&&(a._tr_stored_block(x,0,0,!1),ne===3&&(J(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),Q(M),M.avail_out===0))return x.last_flush=-1,g}return ne!==v?g:x.wrap<=0?1:(x.wrap===2?(U(x,255&M.adler),U(x,M.adler>>8&255),U(x,M.adler>>16&255),U(x,M.adler>>24&255),U(x,255&M.total_in),U(x,M.total_in>>8&255),U(x,M.total_in>>16&255),U(x,M.total_in>>24&255)):($(x,M.adler>>>16),$(x,65535&M.adler)),Q(M),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?g:1)},i.deflateEnd=function(M){var ne;return M&&M.state?(ne=M.state.status)!==O&&ne!==69&&ne!==73&&ne!==91&&ne!==103&&ne!==q&&ne!==666?Y(M,b):(M.state=null,ne===q?Y(M,-3):g):b},i.deflateSetDictionary=function(M,ne){var D,x,R,G,ie,ae,se,ue,le=ne.length;if(!M||!M.state||(G=(D=M.state).wrap)===2||G===1&&D.status!==O||D.lookahead)return b;for(G===1&&(M.adler=o(M.adler,ne,le,0)),D.wrap=0,le>=D.w_size&&(G===0&&(J(D.head),D.strstart=0,D.block_start=0,D.insert=0),ue=new f.Buf8(D.w_size),f.arraySet(ue,ne,le-D.w_size,D.w_size,0),ne=ue,le=D.w_size),ie=M.avail_in,ae=M.next_in,se=M.input,M.avail_in=le,M.next_in=0,M.input=ne,Z(D);D.lookahead>=A;){for(x=D.strstart,R=D.lookahead-(A-1);D.ins_h=(D.ins_h<<D.hash_shift^D.window[x+A-1])&D.hash_mask,D.prev[x&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=x,x++,--R;);D.strstart=x,D.lookahead=A-1,Z(D)}return D.strstart+=D.lookahead,D.block_start=D.strstart,D.insert=D.lookahead,D.lookahead=0,D.match_length=D.prev_length=A-1,D.match_available=0,M.next_in=ae,M.input=se,M.avail_in=ie,D.wrap=G,g},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,f){var a,o,u,y,w,v,g,b,l,_,h,d,c,p,m,S,E,T,A,P,H,O,q,C,j;a=s.state,o=s.next_in,C=s.input,u=o+(s.avail_in-5),y=s.next_out,j=s.output,w=y-(f-s.avail_out),v=y+(s.avail_out-257),g=a.dmax,b=a.wsize,l=a.whave,_=a.wnext,h=a.window,d=a.hold,c=a.bits,p=a.lencode,m=a.distcode,S=(1<<a.lenbits)-1,E=(1<<a.distbits)-1;e:do{c<15&&(d+=C[o++]<<c,c+=8,d+=C[o++]<<c,c+=8),T=p[d&S];t:for(;;){if(d>>>=A=T>>>24,c-=A,(A=T>>>16&255)===0)j[y++]=65535&T;else{if(!(16&A)){if((64&A)==0){T=p[(65535&T)+(d&(1<<A)-1)];continue t}if(32&A){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}P=65535&T,(A&=15)&&(c<A&&(d+=C[o++]<<c,c+=8),P+=d&(1<<A)-1,d>>>=A,c-=A),c<15&&(d+=C[o++]<<c,c+=8,d+=C[o++]<<c,c+=8),T=m[d&E];r:for(;;){if(d>>>=A=T>>>24,c-=A,!(16&(A=T>>>16&255))){if((64&A)==0){T=m[(65535&T)+(d&(1<<A)-1)];continue r}s.msg="invalid distance code",a.mode=30;break e}if(H=65535&T,c<(A&=15)&&(d+=C[o++]<<c,(c+=8)<A&&(d+=C[o++]<<c,c+=8)),g<(H+=d&(1<<A)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(d>>>=A,c-=A,(A=y-w)<H){if(l<(A=H-A)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(q=h,(O=0)===_){if(O+=b-A,A<P){for(P-=A;j[y++]=h[O++],--A;);O=y-H,q=j}}else if(_<A){if(O+=b+_-A,(A-=_)<P){for(P-=A;j[y++]=h[O++],--A;);if(O=0,_<P){for(P-=A=_;j[y++]=h[O++],--A;);O=y-H,q=j}}}else if(O+=_-A,A<P){for(P-=A;j[y++]=h[O++],--A;);O=y-H,q=j}for(;2<P;)j[y++]=q[O++],j[y++]=q[O++],j[y++]=q[O++],P-=3;P&&(j[y++]=q[O++],1<P&&(j[y++]=q[O++]))}else{for(O=y-H;j[y++]=j[O++],j[y++]=j[O++],j[y++]=j[O++],2<(P-=3););P&&(j[y++]=j[O++],1<P&&(j[y++]=j[O++]))}break}}break}}while(o<u&&y<v);o-=P=c>>3,d&=(1<<(c-=P<<3))-1,s.next_in=o,s.next_out=y,s.avail_in=o<u?u-o+5:5-(o-u),s.avail_out=y<v?v-y+257:257-(y-v),a.hold=d,a.bits=c}},{}],49:[function(r,n,i){var s=r("../utils/common"),f=r("./adler32"),a=r("./crc32"),o=r("./inffast"),u=r("./inftrees"),y=1,w=2,v=0,g=-2,b=1,l=852,_=592;function h(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function d(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(O){var q;return O&&O.state?(q=O.state,O.total_in=O.total_out=q.total=0,O.msg="",q.wrap&&(O.adler=1&q.wrap),q.mode=b,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new s.Buf32(l),q.distcode=q.distdyn=new s.Buf32(_),q.sane=1,q.back=-1,v):g}function p(O){var q;return O&&O.state?((q=O.state).wsize=0,q.whave=0,q.wnext=0,c(O)):g}function m(O,q){var C,j;return O&&O.state?(j=O.state,q<0?(C=0,q=-q):(C=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?g:(j.window!==null&&j.wbits!==q&&(j.window=null),j.wrap=C,j.wbits=q,p(O))):g}function S(O,q){var C,j;return O?(j=new d,(O.state=j).window=null,(C=m(O,q))!==v&&(O.state=null),C):g}var E,T,A=!0;function P(O){if(A){var q;for(E=new s.Buf32(512),T=new s.Buf32(32),q=0;q<144;)O.lens[q++]=8;for(;q<256;)O.lens[q++]=9;for(;q<280;)O.lens[q++]=7;for(;q<288;)O.lens[q++]=8;for(u(y,O.lens,0,288,E,0,O.work,{bits:9}),q=0;q<32;)O.lens[q++]=5;u(w,O.lens,0,32,T,0,O.work,{bits:5}),A=!1}O.lencode=E,O.lenbits=9,O.distcode=T,O.distbits=5}function H(O,q,C,j){var V,N=O.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new s.Buf8(N.wsize)),j>=N.wsize?(s.arraySet(N.window,q,C-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(j<(V=N.wsize-N.wnext)&&(V=j),s.arraySet(N.window,q,C-j,V,N.wnext),(j-=V)?(s.arraySet(N.window,q,C-j,j,0),N.wnext=j,N.whave=N.wsize):(N.wnext+=V,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=V))),0}i.inflateReset=p,i.inflateReset2=m,i.inflateResetKeep=c,i.inflateInit=function(O){return S(O,15)},i.inflateInit2=S,i.inflate=function(O,q){var C,j,V,N,Y,X,J,Q,W,U,$,ee,Z,L,I,k,B,F,K,te,M,ne,D,x,R=0,G=new s.Buf8(4),ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return g;(C=O.state).mode===12&&(C.mode=13),Y=O.next_out,V=O.output,J=O.avail_out,N=O.next_in,j=O.input,X=O.avail_in,Q=C.hold,W=C.bits,U=X,$=J,ne=v;e:for(;;)switch(C.mode){case b:if(C.wrap===0){C.mode=13;break}for(;W<16;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(2&C.wrap&&Q===35615){G[C.check=0]=255&Q,G[1]=Q>>>8&255,C.check=a(C.check,G,2,0),W=Q=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&Q)<<8)+(Q>>8))%31){O.msg="incorrect header check",C.mode=30;break}if((15&Q)!=8){O.msg="unknown compression method",C.mode=30;break}if(W-=4,M=8+(15&(Q>>>=4)),C.wbits===0)C.wbits=M;else if(M>C.wbits){O.msg="invalid window size",C.mode=30;break}C.dmax=1<<M,O.adler=C.check=1,C.mode=512&Q?10:12,W=Q=0;break;case 2:for(;W<16;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(C.flags=Q,(255&C.flags)!=8){O.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){O.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=Q>>8&1),512&C.flags&&(G[0]=255&Q,G[1]=Q>>>8&255,C.check=a(C.check,G,2,0)),W=Q=0,C.mode=3;case 3:for(;W<32;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}C.head&&(C.head.time=Q),512&C.flags&&(G[0]=255&Q,G[1]=Q>>>8&255,G[2]=Q>>>16&255,G[3]=Q>>>24&255,C.check=a(C.check,G,4,0)),W=Q=0,C.mode=4;case 4:for(;W<16;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}C.head&&(C.head.xflags=255&Q,C.head.os=Q>>8),512&C.flags&&(G[0]=255&Q,G[1]=Q>>>8&255,C.check=a(C.check,G,2,0)),W=Q=0,C.mode=5;case 5:if(1024&C.flags){for(;W<16;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}C.length=Q,C.head&&(C.head.extra_len=Q),512&C.flags&&(G[0]=255&Q,G[1]=Q>>>8&255,C.check=a(C.check,G,2,0)),W=Q=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(X<(ee=C.length)&&(ee=X),ee&&(C.head&&(M=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),s.arraySet(C.head.extra,j,N,ee,M)),512&C.flags&&(C.check=a(C.check,j,ee,N)),X-=ee,N+=ee,C.length-=ee),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(X===0)break e;for(ee=0;M=j[N+ee++],C.head&&M&&C.length<65536&&(C.head.name+=String.fromCharCode(M)),M&&ee<X;);if(512&C.flags&&(C.check=a(C.check,j,ee,N)),X-=ee,N+=ee,M)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(X===0)break e;for(ee=0;M=j[N+ee++],C.head&&M&&C.length<65536&&(C.head.comment+=String.fromCharCode(M)),M&&ee<X;);if(512&C.flags&&(C.check=a(C.check,j,ee,N)),X-=ee,N+=ee,M)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;W<16;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(Q!==(65535&C.check)){O.msg="header crc mismatch",C.mode=30;break}W=Q=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),O.adler=C.check=0,C.mode=12;break;case 10:for(;W<32;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}O.adler=C.check=h(Q),W=Q=0,C.mode=11;case 11:if(C.havedict===0)return O.next_out=Y,O.avail_out=J,O.next_in=N,O.avail_in=X,C.hold=Q,C.bits=W,2;O.adler=C.check=1,C.mode=12;case 12:if(q===5||q===6)break e;case 13:if(C.last){Q>>>=7&W,W-=7&W,C.mode=27;break}for(;W<3;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}switch(C.last=1&Q,W-=1,3&(Q>>>=1)){case 0:C.mode=14;break;case 1:if(P(C),C.mode=20,q!==6)break;Q>>>=2,W-=2;break e;case 2:C.mode=17;break;case 3:O.msg="invalid block type",C.mode=30}Q>>>=2,W-=2;break;case 14:for(Q>>>=7&W,W-=7&W;W<32;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if((65535&Q)!=(Q>>>16^65535)){O.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&Q,W=Q=0,C.mode=15,q===6)break e;case 15:C.mode=16;case 16:if(ee=C.length){if(X<ee&&(ee=X),J<ee&&(ee=J),ee===0)break e;s.arraySet(V,j,N,ee,Y),X-=ee,N+=ee,J-=ee,Y+=ee,C.length-=ee;break}C.mode=12;break;case 17:for(;W<14;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(C.nlen=257+(31&Q),Q>>>=5,W-=5,C.ndist=1+(31&Q),Q>>>=5,W-=5,C.ncode=4+(15&Q),Q>>>=4,W-=4,286<C.nlen||30<C.ndist){O.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;W<3;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}C.lens[ie[C.have++]]=7&Q,Q>>>=3,W-=3}for(;C.have<19;)C.lens[ie[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,D={bits:C.lenbits},ne=u(0,C.lens,0,19,C.lencode,0,C.work,D),C.lenbits=D.bits,ne){O.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;k=(R=C.lencode[Q&(1<<C.lenbits)-1])>>>16&255,B=65535&R,!((I=R>>>24)<=W);){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(B<16)Q>>>=I,W-=I,C.lens[C.have++]=B;else{if(B===16){for(x=I+2;W<x;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(Q>>>=I,W-=I,C.have===0){O.msg="invalid bit length repeat",C.mode=30;break}M=C.lens[C.have-1],ee=3+(3&Q),Q>>>=2,W-=2}else if(B===17){for(x=I+3;W<x;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}W-=I,M=0,ee=3+(7&(Q>>>=I)),Q>>>=3,W-=3}else{for(x=I+7;W<x;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}W-=I,M=0,ee=11+(127&(Q>>>=I)),Q>>>=7,W-=7}if(C.have+ee>C.nlen+C.ndist){O.msg="invalid bit length repeat",C.mode=30;break}for(;ee--;)C.lens[C.have++]=M}}if(C.mode===30)break;if(C.lens[256]===0){O.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,D={bits:C.lenbits},ne=u(y,C.lens,0,C.nlen,C.lencode,0,C.work,D),C.lenbits=D.bits,ne){O.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,D={bits:C.distbits},ne=u(w,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,D),C.distbits=D.bits,ne){O.msg="invalid distances set",C.mode=30;break}if(C.mode=20,q===6)break e;case 20:C.mode=21;case 21:if(6<=X&&258<=J){O.next_out=Y,O.avail_out=J,O.next_in=N,O.avail_in=X,C.hold=Q,C.bits=W,o(O,$),Y=O.next_out,V=O.output,J=O.avail_out,N=O.next_in,j=O.input,X=O.avail_in,Q=C.hold,W=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;k=(R=C.lencode[Q&(1<<C.lenbits)-1])>>>16&255,B=65535&R,!((I=R>>>24)<=W);){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(k&&(240&k)==0){for(F=I,K=k,te=B;k=(R=C.lencode[te+((Q&(1<<F+K)-1)>>F)])>>>16&255,B=65535&R,!(F+(I=R>>>24)<=W);){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}Q>>>=F,W-=F,C.back+=F}if(Q>>>=I,W-=I,C.back+=I,C.length=B,k===0){C.mode=26;break}if(32&k){C.back=-1,C.mode=12;break}if(64&k){O.msg="invalid literal/length code",C.mode=30;break}C.extra=15&k,C.mode=22;case 22:if(C.extra){for(x=C.extra;W<x;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}C.length+=Q&(1<<C.extra)-1,Q>>>=C.extra,W-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;k=(R=C.distcode[Q&(1<<C.distbits)-1])>>>16&255,B=65535&R,!((I=R>>>24)<=W);){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if((240&k)==0){for(F=I,K=k,te=B;k=(R=C.distcode[te+((Q&(1<<F+K)-1)>>F)])>>>16&255,B=65535&R,!(F+(I=R>>>24)<=W);){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}Q>>>=F,W-=F,C.back+=F}if(Q>>>=I,W-=I,C.back+=I,64&k){O.msg="invalid distance code",C.mode=30;break}C.offset=B,C.extra=15&k,C.mode=24;case 24:if(C.extra){for(x=C.extra;W<x;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}C.offset+=Q&(1<<C.extra)-1,Q>>>=C.extra,W-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){O.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(J===0)break e;if(ee=$-J,C.offset>ee){if((ee=C.offset-ee)>C.whave&&C.sane){O.msg="invalid distance too far back",C.mode=30;break}Z=ee>C.wnext?(ee-=C.wnext,C.wsize-ee):C.wnext-ee,ee>C.length&&(ee=C.length),L=C.window}else L=V,Z=Y-C.offset,ee=C.length;for(J<ee&&(ee=J),J-=ee,C.length-=ee;V[Y++]=L[Z++],--ee;);C.length===0&&(C.mode=21);break;case 26:if(J===0)break e;V[Y++]=C.length,J--,C.mode=21;break;case 27:if(C.wrap){for(;W<32;){if(X===0)break e;X--,Q|=j[N++]<<W,W+=8}if($-=J,O.total_out+=$,C.total+=$,$&&(O.adler=C.check=C.flags?a(C.check,V,$,Y-$):f(C.check,V,$,Y-$)),$=J,(C.flags?Q:h(Q))!==C.check){O.msg="incorrect data check",C.mode=30;break}W=Q=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;W<32;){if(X===0)break e;X--,Q+=j[N++]<<W,W+=8}if(Q!==(4294967295&C.total)){O.msg="incorrect length check",C.mode=30;break}W=Q=0}C.mode=29;case 29:ne=1;break e;case 30:ne=-3;break e;case 31:return-4;case 32:default:return g}return O.next_out=Y,O.avail_out=J,O.next_in=N,O.avail_in=X,C.hold=Q,C.bits=W,(C.wsize||$!==O.avail_out&&C.mode<30&&(C.mode<27||q!==4))&&H(O,O.output,O.next_out,$-O.avail_out)?(C.mode=31,-4):(U-=O.avail_in,$-=O.avail_out,O.total_in+=U,O.total_out+=$,C.total+=$,C.wrap&&$&&(O.adler=C.check=C.flags?a(C.check,V,$,O.next_out-$):f(C.check,V,$,O.next_out-$)),O.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(U==0&&$===0||q===4)&&ne===v&&(ne=-5),ne)},i.inflateEnd=function(O){if(!O||!O.state)return g;var q=O.state;return q.window&&(q.window=null),O.state=null,v},i.inflateGetHeader=function(O,q){var C;return O&&O.state?(2&(C=O.state).wrap)==0?g:((C.head=q).done=!1,v):g},i.inflateSetDictionary=function(O,q){var C,j=q.length;return O&&O.state?(C=O.state).wrap!==0&&C.mode!==11?g:C.mode===11&&f(1,q,j,0)!==C.check?-3:H(O,q,j,j)?(C.mode=31,-4):(C.havedict=1,v):g},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(y,w,v,g,b,l,_,h){var d,c,p,m,S,E,T,A,P,H=h.bits,O=0,q=0,C=0,j=0,V=0,N=0,Y=0,X=0,J=0,Q=0,W=null,U=0,$=new s.Buf16(16),ee=new s.Buf16(16),Z=null,L=0;for(O=0;O<=15;O++)$[O]=0;for(q=0;q<g;q++)$[w[v+q]]++;for(V=H,j=15;1<=j&&$[j]===0;j--);if(j<V&&(V=j),j===0)return b[l++]=20971520,b[l++]=20971520,h.bits=1,0;for(C=1;C<j&&$[C]===0;C++);for(V<C&&(V=C),O=X=1;O<=15;O++)if(X<<=1,(X-=$[O])<0)return-1;if(0<X&&(y===0||j!==1))return-1;for(ee[1]=0,O=1;O<15;O++)ee[O+1]=ee[O]+$[O];for(q=0;q<g;q++)w[v+q]!==0&&(_[ee[w[v+q]]++]=q);if(E=y===0?(W=Z=_,19):y===1?(W=f,U-=257,Z=a,L-=257,256):(W=o,Z=u,-1),O=C,S=l,Y=q=Q=0,p=-1,m=(J=1<<(N=V))-1,y===1&&852<J||y===2&&592<J)return 1;for(;;){for(T=O-Y,P=_[q]<E?(A=0,_[q]):_[q]>E?(A=Z[L+_[q]],W[U+_[q]]):(A=96,0),d=1<<O-Y,C=c=1<<N;b[S+(Q>>Y)+(c-=d)]=T<<24|A<<16|P|0,c!==0;);for(d=1<<O-1;Q&d;)d>>=1;if(d!==0?(Q&=d-1,Q+=d):Q=0,q++,--$[O]==0){if(O===j)break;O=w[v+_[q]]}if(V<O&&(Q&m)!==p){for(Y===0&&(Y=V),S+=C,X=1<<(N=O-Y);N+Y<j&&!((X-=$[N+Y])<=0);)N++,X<<=1;if(J+=1<<N,y===1&&852<J||y===2&&592<J)return 1;b[p=Q&m]=V<<24|N<<16|S-l|0}}return Q!==0&&(b[S+Q]=O-Y<<24|64<<16|0),h.bits=V,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),f=0,a=1;function o(R){for(var G=R.length;0<=--G;)R[G]=0}var u=0,y=29,w=256,v=w+1+y,g=30,b=19,l=2*v+1,_=15,h=16,d=7,c=256,p=16,m=17,S=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(v+2));o(H);var O=new Array(2*g);o(O);var q=new Array(512);o(q);var C=new Array(256);o(C);var j=new Array(y);o(j);var V,N,Y,X=new Array(g);function J(R,G,ie,ae,se){this.static_tree=R,this.extra_bits=G,this.extra_base=ie,this.elems=ae,this.max_length=se,this.has_stree=R&&R.length}function Q(R,G){this.dyn_tree=R,this.max_code=0,this.stat_desc=G}function W(R){return R<256?q[R]:q[256+(R>>>7)]}function U(R,G){R.pending_buf[R.pending++]=255&G,R.pending_buf[R.pending++]=G>>>8&255}function $(R,G,ie){R.bi_valid>h-ie?(R.bi_buf|=G<<R.bi_valid&65535,U(R,R.bi_buf),R.bi_buf=G>>h-R.bi_valid,R.bi_valid+=ie-h):(R.bi_buf|=G<<R.bi_valid&65535,R.bi_valid+=ie)}function ee(R,G,ie){$(R,ie[2*G],ie[2*G+1])}function Z(R,G){for(var ie=0;ie|=1&R,R>>>=1,ie<<=1,0<--G;);return ie>>>1}function L(R,G,ie){var ae,se,ue=new Array(_+1),le=0;for(ae=1;ae<=_;ae++)ue[ae]=le=le+ie[ae-1]<<1;for(se=0;se<=G;se++){var de=R[2*se+1];de!==0&&(R[2*se]=Z(ue[de]++,de))}}function I(R){var G;for(G=0;G<v;G++)R.dyn_ltree[2*G]=0;for(G=0;G<g;G++)R.dyn_dtree[2*G]=0;for(G=0;G<b;G++)R.bl_tree[2*G]=0;R.dyn_ltree[2*c]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function k(R){8<R.bi_valid?U(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function B(R,G,ie,ae){var se=2*G,ue=2*ie;return R[se]<R[ue]||R[se]===R[ue]&&ae[G]<=ae[ie]}function F(R,G,ie){for(var ae=R.heap[ie],se=ie<<1;se<=R.heap_len&&(se<R.heap_len&&B(G,R.heap[se+1],R.heap[se],R.depth)&&se++,!B(G,ae,R.heap[se],R.depth));)R.heap[ie]=R.heap[se],ie=se,se<<=1;R.heap[ie]=ae}function K(R,G,ie){var ae,se,ue,le,de=0;if(R.last_lit!==0)for(;ae=R.pending_buf[R.d_buf+2*de]<<8|R.pending_buf[R.d_buf+2*de+1],se=R.pending_buf[R.l_buf+de],de++,ae===0?ee(R,se,G):(ee(R,(ue=C[se])+w+1,G),(le=E[ue])!==0&&$(R,se-=j[ue],le),ee(R,ue=W(--ae),ie),(le=T[ue])!==0&&$(R,ae-=X[ue],le)),de<R.last_lit;);ee(R,c,G)}function te(R,G){var ie,ae,se,ue=G.dyn_tree,le=G.stat_desc.static_tree,de=G.stat_desc.has_stree,he=G.stat_desc.elems,ge=-1;for(R.heap_len=0,R.heap_max=l,ie=0;ie<he;ie++)ue[2*ie]!==0?(R.heap[++R.heap_len]=ge=ie,R.depth[ie]=0):ue[2*ie+1]=0;for(;R.heap_len<2;)ue[2*(se=R.heap[++R.heap_len]=ge<2?++ge:0)]=1,R.depth[se]=0,R.opt_len--,de&&(R.static_len-=le[2*se+1]);for(G.max_code=ge,ie=R.heap_len>>1;1<=ie;ie--)F(R,ue,ie);for(se=he;ie=R.heap[1],R.heap[1]=R.heap[R.heap_len--],F(R,ue,1),ae=R.heap[1],R.heap[--R.heap_max]=ie,R.heap[--R.heap_max]=ae,ue[2*se]=ue[2*ie]+ue[2*ae],R.depth[se]=(R.depth[ie]>=R.depth[ae]?R.depth[ie]:R.depth[ae])+1,ue[2*ie+1]=ue[2*ae+1]=se,R.heap[1]=se++,F(R,ue,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(be,Re){var Pe,ke,ye,Ce,Ne,Ye,He=Re.dyn_tree,nt=Re.max_code,me=Re.stat_desc.static_tree,fe=Re.stat_desc.has_stree,pe=Re.stat_desc.extra_bits,Te=Re.stat_desc.extra_base,Ie=Re.stat_desc.max_length,Me=0;for(Ce=0;Ce<=_;Ce++)be.bl_count[Ce]=0;for(He[2*be.heap[be.heap_max]+1]=0,Pe=be.heap_max+1;Pe<l;Pe++)Ie<(Ce=He[2*He[2*(ke=be.heap[Pe])+1]+1]+1)&&(Ce=Ie,Me++),He[2*ke+1]=Ce,nt<ke||(be.bl_count[Ce]++,Ne=0,Te<=ke&&(Ne=pe[ke-Te]),Ye=He[2*ke],be.opt_len+=Ye*(Ce+Ne),fe&&(be.static_len+=Ye*(me[2*ke+1]+Ne)));if(Me!==0){do{for(Ce=Ie-1;be.bl_count[Ce]===0;)Ce--;be.bl_count[Ce]--,be.bl_count[Ce+1]+=2,be.bl_count[Ie]--,Me-=2}while(0<Me);for(Ce=Ie;Ce!==0;Ce--)for(ke=be.bl_count[Ce];ke!==0;)nt<(ye=be.heap[--Pe])||(He[2*ye+1]!==Ce&&(be.opt_len+=(Ce-He[2*ye+1])*He[2*ye],He[2*ye+1]=Ce),ke--)}}(R,G),L(ue,ge,R.bl_count)}function M(R,G,ie){var ae,se,ue=-1,le=G[1],de=0,he=7,ge=4;for(le===0&&(he=138,ge=3),G[2*(ie+1)+1]=65535,ae=0;ae<=ie;ae++)se=le,le=G[2*(ae+1)+1],++de<he&&se===le||(de<ge?R.bl_tree[2*se]+=de:se!==0?(se!==ue&&R.bl_tree[2*se]++,R.bl_tree[2*p]++):de<=10?R.bl_tree[2*m]++:R.bl_tree[2*S]++,ue=se,ge=(de=0)===le?(he=138,3):se===le?(he=6,3):(he=7,4))}function ne(R,G,ie){var ae,se,ue=-1,le=G[1],de=0,he=7,ge=4;for(le===0&&(he=138,ge=3),ae=0;ae<=ie;ae++)if(se=le,le=G[2*(ae+1)+1],!(++de<he&&se===le)){if(de<ge)for(;ee(R,se,R.bl_tree),--de!=0;);else se!==0?(se!==ue&&(ee(R,se,R.bl_tree),de--),ee(R,p,R.bl_tree),$(R,de-3,2)):de<=10?(ee(R,m,R.bl_tree),$(R,de-3,3)):(ee(R,S,R.bl_tree),$(R,de-11,7));ue=se,ge=(de=0)===le?(he=138,3):se===le?(he=6,3):(he=7,4)}}o(X);var D=!1;function x(R,G,ie,ae){$(R,(u<<1)+(ae?1:0),3),function(se,ue,le,de){k(se),U(se,le),U(se,~le),s.arraySet(se.pending_buf,se.window,ue,le,se.pending),se.pending+=le}(R,G,ie)}i._tr_init=function(R){D||(function(){var G,ie,ae,se,ue,le=new Array(_+1);for(se=ae=0;se<y-1;se++)for(j[se]=ae,G=0;G<1<<E[se];G++)C[ae++]=se;for(C[ae-1]=se,se=ue=0;se<16;se++)for(X[se]=ue,G=0;G<1<<T[se];G++)q[ue++]=se;for(ue>>=7;se<g;se++)for(X[se]=ue<<7,G=0;G<1<<T[se]-7;G++)q[256+ue++]=se;for(ie=0;ie<=_;ie++)le[ie]=0;for(G=0;G<=143;)H[2*G+1]=8,G++,le[8]++;for(;G<=255;)H[2*G+1]=9,G++,le[9]++;for(;G<=279;)H[2*G+1]=7,G++,le[7]++;for(;G<=287;)H[2*G+1]=8,G++,le[8]++;for(L(H,v+1,le),G=0;G<g;G++)O[2*G+1]=5,O[2*G]=Z(G,5);V=new J(H,E,w+1,v,_),N=new J(O,T,0,g,_),Y=new J(new Array(0),A,0,b,d)}(),D=!0),R.l_desc=new Q(R.dyn_ltree,V),R.d_desc=new Q(R.dyn_dtree,N),R.bl_desc=new Q(R.bl_tree,Y),R.bi_buf=0,R.bi_valid=0,I(R)},i._tr_stored_block=x,i._tr_flush_block=function(R,G,ie,ae){var se,ue,le=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(de){var he,ge=4093624447;for(he=0;he<=31;he++,ge>>>=1)if(1&ge&&de.dyn_ltree[2*he]!==0)return f;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return a;for(he=32;he<w;he++)if(de.dyn_ltree[2*he]!==0)return a;return f}(R)),te(R,R.l_desc),te(R,R.d_desc),le=function(de){var he;for(M(de,de.dyn_ltree,de.l_desc.max_code),M(de,de.dyn_dtree,de.d_desc.max_code),te(de,de.bl_desc),he=b-1;3<=he&&de.bl_tree[2*P[he]+1]===0;he--);return de.opt_len+=3*(he+1)+5+5+4,he}(R),se=R.opt_len+3+7>>>3,(ue=R.static_len+3+7>>>3)<=se&&(se=ue)):se=ue=ie+5,ie+4<=se&&G!==-1?x(R,G,ie,ae):R.strategy===4||ue===se?($(R,2+(ae?1:0),3),K(R,H,O)):($(R,4+(ae?1:0),3),function(de,he,ge,be){var Re;for($(de,he-257,5),$(de,ge-1,5),$(de,be-4,4),Re=0;Re<be;Re++)$(de,de.bl_tree[2*P[Re]+1],3);ne(de,de.dyn_ltree,he-1),ne(de,de.dyn_dtree,ge-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,le+1),K(R,R.dyn_ltree,R.dyn_dtree)),I(R),ae&&k(R)},i._tr_tally=function(R,G,ie){return R.pending_buf[R.d_buf+2*R.last_lit]=G>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&G,R.pending_buf[R.l_buf+R.last_lit]=255&ie,R.last_lit++,G===0?R.dyn_ltree[2*ie]++:(R.matches++,G--,R.dyn_ltree[2*(C[ie]+w+1)]++,R.dyn_dtree[2*W(G)]++),R.last_lit===R.lit_bufsize-1},i._tr_align=function(R){$(R,2,3),ee(R,c,H),function(G){G.bi_valid===16?(U(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(f,a){if(!f.setImmediate){var o,u,y,w,v=1,g={},b=!1,l=f.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(f);_=_&&_.setTimeout?_:f,o={}.toString.call(f.process)==="[object process]"?function(p){process$1$1.nextTick(function(){d(p)})}:function(){if(f.postMessage&&!f.importScripts){var p=!0,m=f.onmessage;return f.onmessage=function(){p=!1},f.postMessage("","*"),f.onmessage=m,p}}()?(w="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",c,!1):f.attachEvent("onmessage",c),function(p){f.postMessage(w+p,"*")}):f.MessageChannel?((y=new MessageChannel).port1.onmessage=function(p){d(p.data)},function(p){y.port2.postMessage(p)}):l&&"onreadystatechange"in l.createElement("script")?(u=l.documentElement,function(p){var m=l.createElement("script");m.onreadystatechange=function(){d(p),m.onreadystatechange=null,u.removeChild(m),m=null},u.appendChild(m)}):function(p){setTimeout(d,0,p)},_.setImmediate=function(p){typeof p!="function"&&(p=new Function(""+p));for(var m=new Array(arguments.length-1),S=0;S<m.length;S++)m[S]=arguments[S+1];var E={callback:p,args:m};return g[v]=E,o(v),v++},_.clearImmediate=h}function h(p){delete g[p]}function d(p){if(b)setTimeout(d,0,p);else{var m=g[p];if(m){b=!0;try{(function(S){var E=S.callback,T=S.args;switch(T.length){case 0:E();break;case 1:E(T[0]);break;case 2:E(T[0],T[1]);break;case 3:E(T[0],T[1],T[2]);break;default:E.apply(a,T)}})(m)}finally{h(p),b=!1}}}}function c(p){p.source===f&&typeof p.data=="string"&&p.data.indexOf(w)===0&&d(+p.data.slice(w.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(jszip_min)),jszip_min.exports}var jszip_minExports=requireJszip_min();const JSZip=getDefaultExportFromCjs$1(jszip_minExports);var xml$1={exports:{}},escapeForXML_1,hasRequiredEscapeForXML;function requireEscapeForXML(){if(hasRequiredEscapeForXML)return escapeForXML_1;hasRequiredEscapeForXML=1;var t={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function e(r){return r&&r.replace?r.replace(/([&"<>'])/g,function(n,i){return t[i]}):r}return escapeForXML_1=e,escapeForXML_1}var hasRequiredXml;function requireXml(){if(hasRequiredXml)return xml$1.exports;hasRequiredXml=1;var t=requireEscapeForXML(),e=requireStreamBrowserify().Stream,r="    ";function n(u,y){typeof y!="object"&&(y={indent:y});var w=y.stream?new e:null,v="",g=!1,b=y.indent?y.indent===!0?r:y.indent:"",l=!0;function _(m){l?process$1$1.nextTick(m):m()}function h(m,S){if(S!==void 0&&(v+=S),m&&!g&&(w=w||new e,g=!0),m&&g){var E=v;_(function(){w.emit("data",E)}),v=""}}function d(m,S){a(h,f(m,b,b?1:0),S)}function c(){if(w){var m=v;_(function(){w.emit("data",m),w.emit("end"),w.readable=!1,w.emit("close")})}}function p(m){var S=m.encoding||"UTF-8",E={version:"1.0",encoding:S};m.standalone&&(E.standalone=m.standalone),d({"?xml":{_attr:E}}),v=v.replace("/>","?>")}return _(function(){l=!1}),y.declaration&&p(y.declaration),u&&u.forEach?u.forEach(function(m,S){var E;S+1===u.length&&(E=c),d(m,E)}):d(u,c),w?(w.readable=!0,w):v}function i(){var u=Array.prototype.slice.call(arguments),y={_elem:f(u)};return y.push=function(w){if(!this.append)throw new Error("not assigned to a parent!");var v=this,g=this._elem.indent;a(this.append,f(w,g,this._elem.icount+(g?1:0)),function(){v.append(!0)})},y.close=function(w){w!==void 0&&this.push(w),this.end&&this.end()},y}function s(u,y){return new Array(y||0).join(u||"")}function f(u,y,w){w=w||0;var v=s(y,w),g,b=u,l=!1;if(typeof u=="object"){var _=Object.keys(u);if(g=_[0],b=u[g],b&&b._elem)return b._elem.name=g,b._elem.icount=w,b._elem.indent=y,b._elem.indents=v,b._elem.interrupt=b,b._elem}var h=[],d=[],c;function p(m){var S=Object.keys(m);S.forEach(function(E){h.push(o(E,m[E]))})}switch(typeof b){case"object":if(b===null)break;b._attr&&p(b._attr),b._cdata&&d.push(("<![CDATA["+b._cdata).replace(/\]\]>/g,"]]]]><![CDATA[>")+"]]>"),b.forEach&&(c=!1,d.push(""),b.forEach(function(m){if(typeof m=="object"){var S=Object.keys(m)[0];S=="_attr"?p(m._attr):d.push(f(m,y,w+1))}else d.pop(),c=!0,d.push(t(m))}),c||d.push(""));break;default:d.push(t(b))}return{name:g,interrupt:l,attributes:h,content:d,icount:w,indents:v,indent:y}}function a(u,y,w){if(typeof y!="object")return u(!1,y);var v=y.interrupt?1:y.content.length;function g(){for(;y.content.length;){var l=y.content.shift();if(l!==void 0){if(b(l))return;a(u,l)}}u(!1,(v>1?y.indents:"")+(y.name?"</"+y.name+">":"")+(y.indent&&!w?`
`:"")),w&&w()}function b(l){return l.interrupt?(l.interrupt.append=u,l.interrupt.end=g,l.interrupt=!1,u(!0),!0):!1}if(u(!1,y.indents+(y.name?"<"+y.name:"")+(y.attributes.length?" "+y.attributes.join(" "):"")+(v?y.name?">":"":y.name?"/>":"")+(y.indent&&v>1?`
`:"")),!v)return u(!1,y.indent?`
`:"");b(y)||g()}function o(u,y){return u+'="'+t(y)+'"'}return xml$1.exports=n,xml$1.exports.element=xml$1.exports.Element=i,xml$1.exports}var xmlExports=requireXml();const xml=getDefaultExportFromCjs$1(xmlExports),obfuscatedStartOffset=0,obfuscatedEndOffset=32,guidSize=32,obfuscate=(t,e)=>{const r=e.replace(/-/g,"");if(r.length!==guidSize)throw new Error(`Error: Cannot extract GUID from font filename: ${e}`);const i=r.replace(/(..)/g,"$1 ").trim().split(" ").map(o=>parseInt(o,16));i.reverse();const f=t.slice(obfuscatedStartOffset,obfuscatedEndOffset).map((o,u)=>o^i[u%i.length]),a=new Uint8Array(obfuscatedStartOffset+f.length+Math.max(0,t.length-obfuscatedEndOffset));return a.set(t.slice(0,obfuscatedStartOffset)),a.set(f,obfuscatedStartOffset),a.set(t.slice(obfuscatedEndOffset),obfuscatedStartOffset+f.length),a};class Formatter{format(e,r={stack:[]}){const n=e.prepForXml(r);if(n)return n;throw Error("XMLComponent did not format correctly")}}class ImageReplacer{replace(e,r,n){let i=e;return r.forEach((s,f)=>{i=i.replace(new RegExp(`{${s.fileName}}`,"g"),(n+f).toString())}),i}getMediaData(e,r){return r.Array.filter(n=>e.search(`{${n.fileName}}`)>0)}}class NumberingReplacer{replace(e,r){let n=e;for(const i of r)n=n.replace(new RegExp(`{${i.reference}-${i.instance}}`,"g"),i.numId.toString());return n}}class Compiler{constructor(){__publicField(this,"formatter"),__publicField(this,"imageReplacer"),__publicField(this,"numberingReplacer"),this.formatter=new Formatter,this.imageReplacer=new ImageReplacer,this.numberingReplacer=new NumberingReplacer}compile(e,r,n=[]){const i=new JSZip,s=this.xmlifyFile(e,r),f=new Map(Object.entries(s));for(const[,a]of f)if(Array.isArray(a))for(const o of a)i.file(o.path,o.data);else i.file(a.path,a.data);for(const a of n)i.file(a.path,a.data);for(const a of e.Media.Array)a.type!=="svg"?i.file(`word/media/${a.fileName}`,a.data):(i.file(`word/media/${a.fileName}`,a.data),i.file(`word/media/${a.fallback.fileName}`,a.fallback.data));for(const{data:a,name:o,fontKey:u}of e.FontTable.fontOptionsWithKey){const[y]=o.split(".");i.file(`word/fonts/${y}.odttf`,obfuscate(a,u))}return i}xmlifyFile(e,r){const n=e.Document.Relationships.RelationshipCount+1,i=xml(this.formatter.format(e.Document.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),s=e.Comments.Relationships.RelationshipCount+1,f=xml(this.formatter.format(e.Comments,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),a=this.imageReplacer.getMediaData(i,e.Media),o=this.imageReplacer.getMediaData(f,e.Media);return{Relationships:{data:(a.forEach((u,y)=>{e.Document.Relationships.createRelationship(n+y,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${u.fileName}`)}),e.Document.Relationships.createRelationship(e.Document.Relationships.RelationshipCount+1,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable","fontTable.xml"),xml(this.formatter.format(e.Document.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/document.xml.rels"},Document:{data:(()=>{const u=this.imageReplacer.replace(i,a,n);return this.numberingReplacer.replace(u,e.Numbering.ConcreteNumbering)})(),path:"word/document.xml"},Styles:{data:(()=>{const u=xml(this.formatter.format(e.Styles,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}});return this.numberingReplacer.replace(u,e.Numbering.ConcreteNumbering)})(),path:"word/styles.xml"},Properties:{data:xml(this.formatter.format(e.CoreProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/core.xml"},Numbering:{data:xml(this.formatter.format(e.Numbering,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/numbering.xml"},FileRelationships:{data:xml(this.formatter.format(e.FileRelationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"_rels/.rels"},HeaderRelationships:e.Headers.map((u,y)=>{const w=xml(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(w,e.Media).forEach((g,b)=>{u.Relationships.createRelationship(b,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${g.fileName}`)}),{data:xml(this.formatter.format(u.Relationships,{viewWrapper:u,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/header${y+1}.xml.rels`}}),FooterRelationships:e.Footers.map((u,y)=>{const w=xml(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}});return this.imageReplacer.getMediaData(w,e.Media).forEach((g,b)=>{u.Relationships.createRelationship(b,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${g.fileName}`)}),{data:xml(this.formatter.format(u.Relationships,{viewWrapper:u,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:`word/_rels/footer${y+1}.xml.rels`}}),Headers:e.Headers.map((u,y)=>{const w=xml(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),v=this.imageReplacer.getMediaData(w,e.Media),g=this.imageReplacer.replace(w,v,0);return{data:this.numberingReplacer.replace(g,e.Numbering.ConcreteNumbering),path:`word/header${y+1}.xml`}}),Footers:e.Footers.map((u,y)=>{const w=xml(this.formatter.format(u.View,{viewWrapper:u,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),v=this.imageReplacer.getMediaData(w,e.Media),g=this.imageReplacer.replace(w,v,0);return{data:this.numberingReplacer.replace(g,e.Numbering.ConcreteNumbering),path:`word/footer${y+1}.xml`}}),ContentTypes:{data:xml(this.formatter.format(e.ContentTypes,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"[Content_Types].xml"},CustomProperties:{data:xml(this.formatter.format(e.CustomProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/custom.xml"},AppProperties:{data:xml(this.formatter.format(e.AppProperties,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"docProps/app.xml"},FootNotes:{data:xml(this.formatter.format(e.FootNotes.View,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/footnotes.xml"},FootNotesRelationships:{data:xml(this.formatter.format(e.FootNotes.Relationships,{viewWrapper:e.FootNotes,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/footnotes.xml.rels"},Settings:{data:xml(this.formatter.format(e.Settings,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/settings.xml"},Comments:{data:(()=>{const u=this.imageReplacer.replace(f,o,s);return this.numberingReplacer.replace(u,e.Numbering.ConcreteNumbering)})(),path:"word/comments.xml"},CommentsRelationships:{data:(o.forEach((u,y)=>{e.Comments.Relationships.createRelationship(s+y,"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",`media/${u.fileName}`)}),xml(this.formatter.format(e.Comments.Relationships,{viewWrapper:{View:e.Comments,Relationships:e.Comments.Relationships},file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}})),path:"word/_rels/comments.xml.rels"},FontTable:{data:xml(this.formatter.format(e.FontTable.View,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{standalone:"yes",encoding:"UTF-8"}}),path:"word/fontTable.xml"},FontTableRelationships:{data:xml(this.formatter.format(e.FontTable.Relationships,{viewWrapper:e.Document,file:e,stack:[]}),{indent:r,declaration:{encoding:"UTF-8"}}),path:"word/_rels/fontTable.xml.rels"}}}}const PrettifyType={WITH_2_BLANKS:"  "},convertPrettifyType=t=>t===!0?PrettifyType.WITH_2_BLANKS:t===!1?void 0:t,_Packer=class vt{static pack(e,r,n){return __async(this,arguments,function*(i,s,f,a=[]){return this.compiler.compile(i,convertPrettifyType(f),a).generateAsync({type:s,mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"})})}static toString(e,r,n=[]){return vt.pack(e,"string",r,n)}static toBuffer(e,r,n=[]){return vt.pack(e,"nodebuffer",r,n)}static toBase64String(e,r,n=[]){return vt.pack(e,"base64",r,n)}static toBlob(e,r,n=[]){return vt.pack(e,"blob",r,n)}static toArrayBuffer(e,r,n=[]){return vt.pack(e,"arraybuffer",r,n)}static toStream(e,r,n=[]){const i=new streamBrowserifyExports.Stream;return this.compiler.compile(e,convertPrettifyType(r),n).generateAsync({type:"nodebuffer",mimeType:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",compression:"DEFLATE"}).then(f=>{i.emit("data",f),i.emit("end")}),i}};__publicField(_Packer,"compiler",new Compiler);let Packer=_Packer;var FileSaver_min$1={exports:{}},FileSaver_min=FileSaver_min$1.exports,hasRequiredFileSaver_min;function requireFileSaver_min(){return hasRequiredFileSaver_min||(hasRequiredFileSaver_min=1,function(t,e){(function(r,n){n()})(FileSaver_min,function(){function r(u,y){return typeof y>"u"?y={autoBom:!1}:typeof y!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function n(u,y,w){var v=new XMLHttpRequest;v.open("GET",u),v.responseType="blob",v.onload=function(){o(v.response,y,w)},v.onerror=function(){console.error("could not download file")},v.send()}function i(u){var y=new XMLHttpRequest;y.open("HEAD",u,!1);try{y.send()}catch{}return 200<=y.status&&299>=y.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(y)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal$1=="object"&&commonjsGlobal$1.global===commonjsGlobal$1?commonjsGlobal$1:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,y,w){var v=f.URL||f.webkitURL,g=document.createElement("a");y=y||u.name||"download",g.download=y,g.rel="noopener",typeof u=="string"?(g.href=u,g.origin===location.origin?s(g):i(g.href)?n(u,y,w):s(g,g.target="_blank")):(g.href=v.createObjectURL(u),setTimeout(function(){v.revokeObjectURL(g.href)},4e4),setTimeout(function(){s(g)},0))}:"msSaveOrOpenBlob"in navigator?function(u,y,w){if(y=y||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(r(u,w),y);else if(i(u))n(u,y,w);else{var v=document.createElement("a");v.href=u,v.target="_blank",setTimeout(function(){s(v)})}}:function(u,y,w,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof u=="string")return n(u,y,w);var g=u.type==="application/octet-stream",b=/constructor/i.test(f.HTMLElement)||f.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||g&&b||a)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var c=_.result;c=l?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=c:location=c,v=null},_.readAsDataURL(u)}else{var h=f.URL||f.webkitURL,d=h.createObjectURL(u);v?v.location=d:location.href=d,v=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});f.saveAs=o.saveAs=o,t.exports=o})}(FileSaver_min$1)),FileSaver_min$1.exports}var FileSaver_minExports=requireFileSaver_min();function isObject$2(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function extend$2(t,e){t===void 0&&(t={}),e===void 0&&(e={});const r=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>r.indexOf(n)<0).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:isObject$2(e[n])&&isObject$2(t[n])&&Object.keys(e[n]).length>0&&extend$2(t[n],e[n])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const t=typeof document<"u"?document:{};return extend$2(t,ssrDocument),t}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function t(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function getWindow(){const t=typeof window<"u"?window:{};return extend$2(t,ssrWindow),t}function classesToTokens(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function deleteProps(t){const e=t;Object.keys(e).forEach(r=>{try{e[r]=null}catch{}try{delete e[r]}catch{}})}function nextTick(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function now(){return Date.now()}function getComputedStyle$1(t){const e=getWindow();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}function getTranslate(t,e){e===void 0&&(e="x");const r=getWindow();let n,i,s;const f=getComputedStyle$1(t);return r.WebKitCSSMatrix?(i=f.transform||f.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new r.WebKitCSSMatrix(i==="none"?"":i)):(s=f.MozTransform||f.OTransform||f.MsTransform||f.msTransform||f.transform||f.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=s.toString().split(",")),e==="x"&&(r.WebKitCSSMatrix?i=s.m41:n.length===16?i=parseFloat(n[12]):i=parseFloat(n[4])),e==="y"&&(r.WebKitCSSMatrix?i=s.m42:n.length===16?i=parseFloat(n[13]):i=parseFloat(n[5])),i||0}function isObject$1(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function isNode(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function extend$1(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let r=1;r<arguments.length;r+=1){const n=r<0||arguments.length<=r?void 0:arguments[r];if(n!=null&&!isNode(n)){const i=Object.keys(Object(n)).filter(s=>e.indexOf(s)<0);for(let s=0,f=i.length;s<f;s+=1){const a=i[s],o=Object.getOwnPropertyDescriptor(n,a);o!==void 0&&o.enumerable&&(isObject$1(t[a])&&isObject$1(n[a])?n[a].__swiper__?t[a]=n[a]:extend$1(t[a],n[a]):!isObject$1(t[a])&&isObject$1(n[a])?(t[a]={},n[a].__swiper__?t[a]=n[a]:extend$1(t[a],n[a])):t[a]=n[a])}}}return t}function setCSSProperty(t,e,r){t.style.setProperty(e,r)}function animateCSSModeScroll(t){let{swiper:e,targetPosition:r,side:n}=t;const i=getWindow(),s=-e.translate;let f=null,a;const o=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const u=r>s?"next":"prev",y=(v,g)=>u==="next"&&v>=g||u==="prev"&&v<=g,w=()=>{a=new Date().getTime(),f===null&&(f=a);const v=Math.max(Math.min((a-f)/o,1),0),g=.5-Math.cos(v*Math.PI)/2;let b=s+g*(r-s);if(y(b,r)&&(b=r),e.wrapperEl.scrollTo({[n]:b}),y(b,r)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:b})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(w)};w()}function elementChildren(t,e){e===void 0&&(e="");const r=getWindow(),n=[...t.children];return r.HTMLSlotElement&&t instanceof HTMLSlotElement&&n.push(...t.assignedElements()),e?n.filter(i=>i.matches(e)):n}function elementIsChildOfSlot(t,e){const r=[e];for(;r.length>0;){const n=r.shift();if(t===n)return!0;r.push(...n.children,...n.shadowRoot?n.shadowRoot.children:[],...n.assignedElements?n.assignedElements():[])}}function elementIsChildOf(t,e){const r=getWindow();let n=e.contains(t);return!n&&r.HTMLSlotElement&&e instanceof HTMLSlotElement&&(n=[...e.assignedElements()].includes(t),n||(n=elementIsChildOfSlot(t,e))),n}function showWarning(t){try{console.warn(t);return}catch{}}function createElement(t,e){e===void 0&&(e=[]);const r=document.createElement(t);return r.classList.add(...Array.isArray(e)?e:classesToTokens(e)),r}function elementOffset(t){const e=getWindow(),r=getDocument(),n=t.getBoundingClientRect(),i=r.body,s=t.clientTop||i.clientTop||0,f=t.clientLeft||i.clientLeft||0,a=t===e?e.scrollY:t.scrollTop,o=t===e?e.scrollX:t.scrollLeft;return{top:n.top+a-s,left:n.left+o-f}}function elementPrevAll(t,e){const r=[];for(;t.previousElementSibling;){const n=t.previousElementSibling;e?n.matches(e)&&r.push(n):r.push(n),t=n}return r}function elementNextAll(t,e){const r=[];for(;t.nextElementSibling;){const n=t.nextElementSibling;e?n.matches(e)&&r.push(n):r.push(n),t=n}return r}function elementStyle(t,e){return getWindow().getComputedStyle(t,null).getPropertyValue(e)}function elementIndex(t){let e=t,r;if(e){for(r=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(r+=1);return r}}function elementParents(t,e){const r=[];let n=t.parentElement;for(;n;)e?n.matches(e)&&r.push(n):r.push(n),n=n.parentElement;return r}function elementOuterSize(t,e,r){const n=getWindow();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function makeElementsArray(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}let support;function calcSupport(){const t=getWindow(),e=getDocument();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(t){let{userAgent:e}=t===void 0?{}:t;const r=getSupport(),n=getWindow(),i=n.navigator.platform,s=e||n.navigator.userAgent,f={ios:!1,android:!1},a=n.screen.width,o=n.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let y=s.match(/(iPad).*OS\s([\d_]+)/);const w=s.match(/(iPod)(.*OS\s([\d_]+))?/),v=!y&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=i==="Win32";let b=i==="MacIntel";const l=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!y&&b&&r.touch&&l.indexOf(`${a}x${o}`)>=0&&(y=s.match(/(Version)\/([\d.]+)/),y||(y=[0,1,"13_0_0"]),b=!1),u&&!g&&(f.os="android",f.android=!0),(y||v||w)&&(f.os="ios",f.ios=!0),f}function getDevice(t){return t===void 0&&(t={}),deviceCached||(deviceCached=calcDevice(t)),deviceCached}let browser;function calcBrowser(){const t=getWindow(),e=getDevice();let r=!1;function n(){const a=t.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(n()){const a=String(t.navigator.userAgent);if(a.includes("Version/")){const[o,u]=a.split("Version/")[1].split(" ")[0].split(".").map(y=>Number(y));r=o<16||o===16&&u<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),s=n(),f=s||i&&e.ios;return{isSafari:r||s,needPerspectiveFix:r,need3dFix:f,isWebView:i}}function getBrowser(){return browser||(browser=calcBrowser()),browser}function Resize(t){let{swiper:e,on:r,emit:n}=t;const i=getWindow();let s=null,f=null;const a=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},o=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(w=>{f=i.requestAnimationFrame(()=>{const{width:v,height:g}=e;let b=v,l=g;w.forEach(_=>{let{contentBoxSize:h,contentRect:d,target:c}=_;c&&c!==e.el||(b=d?d.width:(h[0]||h).inlineSize,l=d?d.height:(h[0]||h).blockSize)}),(b!==v||l!==g)&&a()})}),s.observe(e.el))},u=()=>{f&&i.cancelAnimationFrame(f),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},y=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};r("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){o();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",y)}),r("destroy",()=>{u(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",y)})}function Observer(t){let{swiper:e,extendParams:r,on:n,emit:i}=t;const s=[],f=getWindow(),a=function(y,w){w===void 0&&(w={});const v=f.MutationObserver||f.WebkitMutationObserver,g=new v(b=>{if(e.__preventObserver__)return;if(b.length===1){i("observerUpdate",b[0]);return}const l=function(){i("observerUpdate",b[0])};f.requestAnimationFrame?f.requestAnimationFrame(l):f.setTimeout(l,0)});g.observe(y,{attributes:typeof w.attributes>"u"?!0:w.attributes,childList:e.isElement||(typeof w.childList>"u"?!0:w).childList,characterData:typeof w.characterData>"u"?!0:w.characterData}),s.push(g)},o=()=>{if(e.params.observer){if(e.params.observeParents){const y=elementParents(e.hostEl);for(let w=0;w<y.length;w+=1)a(y[w])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},u=()=>{s.forEach(y=>{y.disconnect()}),s.splice(0,s.length)};r({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",o),n("destroy",u)}var eventsEmitter={on(t,e,r){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const i=r?"unshift":"push";return t.split(" ").forEach(s=>{n.eventsListeners[s]||(n.eventsListeners[s]=[]),n.eventsListeners[s][i](e)}),n},once(t,e,r){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;function i(){n.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,f=new Array(s),a=0;a<s;a++)f[a]=arguments[a];e.apply(n,f)}return i.__emitterProxy=e,n.on(t,i,r)},onAny(t,e){const r=this;if(!r.eventsListeners||r.destroyed||typeof t!="function")return r;const n=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[n](t),r},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||t.split(" ").forEach(n=>{typeof e>"u"?r.eventsListeners[n]=[]:r.eventsListeners[n]&&r.eventsListeners[n].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&r.eventsListeners[n].splice(s,1)})}),r},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,r,n;for(var i=arguments.length,s=new Array(i),f=0;f<i;f++)s[f]=arguments[f];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],r=s.slice(1,s.length),n=t):(e=s[0].events,r=s[0].data,n=s[0].context||t),r.unshift(n),(Array.isArray(e)?e:e.split(" ")).forEach(o=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(n,[o,...r])}),t.eventsListeners&&t.eventsListeners[o]&&t.eventsListeners[o].forEach(u=>{u.apply(n,r)})}),t}};function updateSize(){const t=this;let e,r;const n=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=n.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?r=t.params.height:r=n.clientHeight,!(e===0&&t.isHorizontal()||r===0&&t.isVertical())&&(e=e-parseInt(elementStyle(n,"padding-left")||0,10)-parseInt(elementStyle(n,"padding-right")||0,10),r=r-parseInt(elementStyle(n,"padding-top")||0,10)-parseInt(elementStyle(n,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))}function updateSlides(){const t=this;function e(P,H){return parseFloat(P.getPropertyValue(t.getDirectionLabel(H))||0)}const r=t.params,{wrapperEl:n,slidesEl:i,size:s,rtlTranslate:f,wrongRTL:a}=t,o=t.virtual&&r.virtual.enabled,u=o?t.virtual.slides.length:t.slides.length,y=elementChildren(i,`.${t.params.slideClass}, swiper-slide`),w=o?t.virtual.slides.length:y.length;let v=[];const g=[],b=[];let l=r.slidesOffsetBefore;typeof l=="function"&&(l=r.slidesOffsetBefore.call(t));let _=r.slidesOffsetAfter;typeof _=="function"&&(_=r.slidesOffsetAfter.call(t));const h=t.snapGrid.length,d=t.slidesGrid.length;let c=r.spaceBetween,p=-l,m=0,S=0;if(typeof s>"u")return;typeof c=="string"&&c.indexOf("%")>=0?c=parseFloat(c.replace("%",""))/100*s:typeof c=="string"&&(c=parseFloat(c)),t.virtualSize=-c,y.forEach(P=>{f?P.style.marginLeft="":P.style.marginRight="",P.style.marginBottom="",P.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(setCSSProperty(n,"--swiper-centered-offset-before",""),setCSSProperty(n,"--swiper-centered-offset-after",""));const E=r.grid&&r.grid.rows>1&&t.grid;E?t.grid.initSlides(y):t.grid&&t.grid.unsetSlides();let T;const A=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(P=>typeof r.breakpoints[P].slidesPerView<"u").length>0;for(let P=0;P<w;P+=1){T=0;let H;if(y[P]&&(H=y[P]),E&&t.grid.updateSlide(P,H,y),!(y[P]&&elementStyle(H,"display")==="none")){if(r.slidesPerView==="auto"){A&&(y[P].style[t.getDirectionLabel("width")]="");const O=getComputedStyle(H),q=H.style.transform,C=H.style.webkitTransform;if(q&&(H.style.transform="none"),C&&(H.style.webkitTransform="none"),r.roundLengths)T=t.isHorizontal()?elementOuterSize(H,"width"):elementOuterSize(H,"height");else{const j=e(O,"width"),V=e(O,"padding-left"),N=e(O,"padding-right"),Y=e(O,"margin-left"),X=e(O,"margin-right"),J=O.getPropertyValue("box-sizing");if(J&&J==="border-box")T=j+Y+X;else{const{clientWidth:Q,offsetWidth:W}=H;T=j+V+N+Y+X+(W-Q)}}q&&(H.style.transform=q),C&&(H.style.webkitTransform=C),r.roundLengths&&(T=Math.floor(T))}else T=(s-(r.slidesPerView-1)*c)/r.slidesPerView,r.roundLengths&&(T=Math.floor(T)),y[P]&&(y[P].style[t.getDirectionLabel("width")]=`${T}px`);y[P]&&(y[P].swiperSlideSize=T),b.push(T),r.centeredSlides?(p=p+T/2+m/2+c,m===0&&P!==0&&(p=p-s/2-c),P===0&&(p=p-s/2-c),Math.abs(p)<1/1e3&&(p=0),r.roundLengths&&(p=Math.floor(p)),S%r.slidesPerGroup===0&&v.push(p),g.push(p)):(r.roundLengths&&(p=Math.floor(p)),(S-Math.min(t.params.slidesPerGroupSkip,S))%t.params.slidesPerGroup===0&&v.push(p),g.push(p),p=p+T+c),t.virtualSize+=T+c,m=T,S+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+_,f&&a&&(r.effect==="slide"||r.effect==="coverflow")&&(n.style.width=`${t.virtualSize+c}px`),r.setWrapperSize&&(n.style[t.getDirectionLabel("width")]=`${t.virtualSize+c}px`),E&&t.grid.updateWrapperSize(T,v),!r.centeredSlides){const P=[];for(let H=0;H<v.length;H+=1){let O=v[H];r.roundLengths&&(O=Math.floor(O)),v[H]<=t.virtualSize-s&&P.push(O)}v=P,Math.floor(t.virtualSize-s)-Math.floor(v[v.length-1])>1&&v.push(t.virtualSize-s)}if(o&&r.loop){const P=b[0]+c;if(r.slidesPerGroup>1){const H=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),O=P*r.slidesPerGroup;for(let q=0;q<H;q+=1)v.push(v[v.length-1]+O)}for(let H=0;H<t.virtual.slidesBefore+t.virtual.slidesAfter;H+=1)r.slidesPerGroup===1&&v.push(v[v.length-1]+P),g.push(g[g.length-1]+P),t.virtualSize+=P}if(v.length===0&&(v=[0]),c!==0){const P=t.isHorizontal()&&f?"marginLeft":t.getDirectionLabel("marginRight");y.filter((H,O)=>!r.cssMode||r.loop?!0:O!==y.length-1).forEach(H=>{H.style[P]=`${c}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let P=0;b.forEach(O=>{P+=O+(c||0)}),P-=c;const H=P>s?P-s:0;v=v.map(O=>O<=0?-l:O>H?H+_:O)}if(r.centerInsufficientSlides){let P=0;b.forEach(O=>{P+=O+(c||0)}),P-=c;const H=(r.slidesOffsetBefore||0)+(r.slidesOffsetAfter||0);if(P+H<s){const O=(s-P-H)/2;v.forEach((q,C)=>{v[C]=q-O}),g.forEach((q,C)=>{g[C]=q+O})}}if(Object.assign(t,{slides:y,snapGrid:v,slidesGrid:g,slidesSizesGrid:b}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){setCSSProperty(n,"--swiper-centered-offset-before",`${-v[0]}px`),setCSSProperty(n,"--swiper-centered-offset-after",`${t.size/2-b[b.length-1]/2}px`);const P=-t.snapGrid[0],H=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(O=>O+P),t.slidesGrid=t.slidesGrid.map(O=>O+H)}if(w!==u&&t.emit("slidesLengthChange"),v.length!==h&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),g.length!==d&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!o&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const P=`${r.containerModifierClass}backface-hidden`,H=t.el.classList.contains(P);w<=r.maxBackfaceHiddenSlides?H||t.el.classList.add(P):H&&t.el.classList.remove(P)}}function updateAutoHeight(t){const e=this,r=[],n=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const f=a=>n?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{r.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!n)break;r.push(f(a))}else r.push(f(e.activeIndex));for(s=0;s<r.length;s+=1)if(typeof r[s]<"u"){const a=r[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function updateSlidesOffset(){const t=this,e=t.slides,r=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let n=0;n<e.length;n+=1)e[n].swiperSlideOffset=(t.isHorizontal()?e[n].offsetLeft:e[n].offsetTop)-r-t.cssOverflowAdjustment()}const toggleSlideClasses$1=(t,e,r)=>{e&&!t.classList.contains(r)?t.classList.add(r):!e&&t.classList.contains(r)&&t.classList.remove(r)};function updateSlidesProgress(t){t===void 0&&(t=this&&this.translate||0);const e=this,r=e.params,{slides:n,rtlTranslate:i,snapGrid:s}=e;if(n.length===0)return;typeof n[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let f=-t;i&&(f=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=r.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let o=0;o<n.length;o+=1){const u=n[o];let y=u.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(y-=n[0].swiperSlideOffset);const w=(f+(r.centeredSlides?e.minTranslate():0)-y)/(u.swiperSlideSize+a),v=(f-s[0]+(r.centeredSlides?e.minTranslate():0)-y)/(u.swiperSlideSize+a),g=-(f-y),b=g+e.slidesSizesGrid[o],l=g>=0&&g<=e.size-e.slidesSizesGrid[o],_=g>=0&&g<e.size-1||b>1&&b<=e.size||g<=0&&b>=e.size;_&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(o)),toggleSlideClasses$1(u,_,r.slideVisibleClass),toggleSlideClasses$1(u,l,r.slideFullyVisibleClass),u.progress=i?-w:w,u.originalProgress=i?-v:v}}function updateProgress(t){const e=this;if(typeof t>"u"){const y=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*y||0}const r=e.params,n=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:f,progressLoop:a}=e;const o=s,u=f;if(n===0)i=0,s=!0,f=!0;else{i=(t-e.minTranslate())/n;const y=Math.abs(t-e.minTranslate())<1,w=Math.abs(t-e.maxTranslate())<1;s=y||i<=0,f=w||i>=1,y&&(i=0),w&&(i=1)}if(r.loop){const y=e.getSlideIndexByData(0),w=e.getSlideIndexByData(e.slides.length-1),v=e.slidesGrid[y],g=e.slidesGrid[w],b=e.slidesGrid[e.slidesGrid.length-1],l=Math.abs(t);l>=v?a=(l-v)/b:a=(l+b-g)/b,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:f}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),s&&!o&&e.emit("reachBeginning toEdge"),f&&!u&&e.emit("reachEnd toEdge"),(o&&!s||u&&!f)&&e.emit("fromEdge"),e.emit("progress",i)}const toggleSlideClasses=(t,e,r)=>{e&&!t.classList.contains(r)?t.classList.add(r):!e&&t.classList.contains(r)&&t.classList.remove(r)};function updateSlidesClasses(){const t=this,{slides:e,params:r,slidesEl:n,activeIndex:i}=t,s=t.virtual&&r.virtual.enabled,f=t.grid&&r.grid&&r.grid.rows>1,a=w=>elementChildren(n,`.${r.slideClass}${w}, swiper-slide${w}`)[0];let o,u,y;if(s)if(r.loop){let w=i-t.virtual.slidesBefore;w<0&&(w=t.virtual.slides.length+w),w>=t.virtual.slides.length&&(w-=t.virtual.slides.length),o=a(`[data-swiper-slide-index="${w}"]`)}else o=a(`[data-swiper-slide-index="${i}"]`);else f?(o=e.find(w=>w.column===i),y=e.find(w=>w.column===i+1),u=e.find(w=>w.column===i-1)):o=e[i];o&&(f||(y=elementNextAll(o,`.${r.slideClass}, swiper-slide`)[0],r.loop&&!y&&(y=e[0]),u=elementPrevAll(o,`.${r.slideClass}, swiper-slide`)[0],r.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(w=>{toggleSlideClasses(w,w===o,r.slideActiveClass),toggleSlideClasses(w,w===y,r.slideNextClass),toggleSlideClasses(w,w===u,r.slidePrevClass)}),t.emitSlidesClasses()}const processLazyPreloader=(t,e)=>{if(!t||t.destroyed||!t.params)return;const r=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,n=e.closest(r());if(n){let i=n.querySelector(`.${t.params.lazyPreloaderClass}`);!i&&t.isElement&&(n.shadowRoot?i=n.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{n.shadowRoot&&(i=n.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},unlazy=(t,e)=>{if(!t.slides[e])return;const r=t.slides[e].querySelector('[loading="lazy"]');r&&r.removeAttribute("loading")},preload=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const r=t.slides.length;if(!r||!e||e<0)return;e=Math.min(e,r);const n=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),i=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const f=i,a=[f-e];a.push(...Array.from({length:e}).map((o,u)=>f+n+u)),t.slides.forEach((o,u)=>{a.includes(o.column)&&unlazy(t,u)});return}const s=i+n-1;if(t.params.rewind||t.params.loop)for(let f=i-e;f<=s+e;f+=1){const a=(f%r+r)%r;(a<i||a>s)&&unlazy(t,a)}else for(let f=Math.max(i-e,0);f<=Math.min(s+e,r-1);f+=1)f!==i&&(f>s||f<i)&&unlazy(t,f)};function getActiveIndexByTranslate(t){const{slidesGrid:e,params:r}=t,n=t.rtlTranslate?t.translate:-t.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?n>=e[s]&&n<e[s+1]-(e[s+1]-e[s])/2?i=s:n>=e[s]&&n<e[s+1]&&(i=s+1):n>=e[s]&&(i=s);return r.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function updateActiveIndex(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{snapGrid:n,params:i,activeIndex:s,realIndex:f,snapIndex:a}=e;let o=t,u;const y=g=>{let b=g-e.virtual.slidesBefore;return b<0&&(b=e.virtual.slides.length+b),b>=e.virtual.slides.length&&(b-=e.virtual.slides.length),b};if(typeof o>"u"&&(o=getActiveIndexByTranslate(e)),n.indexOf(r)>=0)u=n.indexOf(r);else{const g=Math.min(i.slidesPerGroupSkip,o);u=g+Math.floor((o-g)/i.slidesPerGroup)}if(u>=n.length&&(u=n.length-1),o===s&&!e.params.loop){u!==a&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(o===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=y(o);return}const w=e.grid&&i.grid&&i.grid.rows>1;let v;if(e.virtual&&i.virtual.enabled&&i.loop)v=y(o);else if(w){const g=e.slides.find(l=>l.column===o);let b=parseInt(g.getAttribute("data-swiper-slide-index"),10);Number.isNaN(b)&&(b=Math.max(e.slides.indexOf(g),0)),v=Math.floor(b/i.grid.rows)}else if(e.slides[o]){const g=e.slides[o].getAttribute("data-swiper-slide-index");g?v=parseInt(g,10):v=o}else v=o;Object.assign(e,{previousSnapIndex:a,snapIndex:u,previousRealIndex:f,realIndex:v,previousIndex:s,activeIndex:o}),e.initialized&&preload(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(f!==v&&e.emit("realIndexChange"),e.emit("slideChange"))}function updateClickedSlide(t,e){const r=this,n=r.params;let i=t.closest(`.${n.slideClass}, swiper-slide`);!i&&r.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(a=>{!i&&a.matches&&a.matches(`.${n.slideClass}, swiper-slide`)&&(i=a)});let s=!1,f;if(i){for(let a=0;a<r.slides.length;a+=1)if(r.slides[a]===i){s=!0,f=a;break}}if(i&&s)r.clickedSlide=i,r.virtual&&r.params.virtual.enabled?r.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):r.clickedIndex=f;else{r.clickedSlide=void 0,r.clickedIndex=void 0;return}n.slideToClickedSlide&&r.clickedIndex!==void 0&&r.clickedIndex!==r.activeIndex&&r.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:r,rtlTranslate:n,translate:i,wrapperEl:s}=e;if(r.virtualTranslate)return n?-i:i;if(r.cssMode)return i;let f=getTranslate(s,t);return f+=e.cssOverflowAdjustment(),n&&(f=-f),f||0}function setTranslate(t,e){const r=this,{rtlTranslate:n,params:i,wrapperEl:s,progress:f}=r;let a=0,o=0;const u=0;r.isHorizontal()?a=n?-t:t:o=t,i.roundLengths&&(a=Math.floor(a),o=Math.floor(o)),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?a:o,i.cssMode?s[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-a:-o:i.virtualTranslate||(r.isHorizontal()?a-=r.cssOverflowAdjustment():o-=r.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${o}px, ${u}px)`);let y;const w=r.maxTranslate()-r.minTranslate();w===0?y=0:y=(t-r.minTranslate())/w,y!==f&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(t,e,r,n,i){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),r===void 0&&(r=!0),n===void 0&&(n=!0);const s=this,{params:f,wrapperEl:a}=s;if(s.animating&&f.preventInteractionOnTransition)return!1;const o=s.minTranslate(),u=s.maxTranslate();let y;if(n&&t>o?y=o:n&&t<u?y=u:y=t,s.updateProgress(y),f.cssMode){const w=s.isHorizontal();if(e===0)a[w?"scrollLeft":"scrollTop"]=-y;else{if(!s.support.smoothScroll)return animateCSSModeScroll({swiper:s,targetPosition:-y,side:w?"left":"top"}),!0;a.scrollTo({[w?"left":"top"]:-y,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(y),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(y),r&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(v){!s||s.destroyed||v.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,r&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(t,e){const r=this;r.params.cssMode||(r.wrapperEl.style.transitionDuration=`${t}ms`,r.wrapperEl.style.transitionDelay=t===0?"0ms":""),r.emit("setTransition",t,e)}function transitionEmit(t){let{swiper:e,runCallbacks:r,direction:n,step:i}=t;const{activeIndex:s,previousIndex:f}=e;let a=n;if(a||(s>f?a="next":s<f?a="prev":a="reset"),e.emit(`transition${i}`),r&&s!==f){if(a==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),a==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function transitionStart(t,e){t===void 0&&(t=!0);const r=this,{params:n}=r;n.cssMode||(n.autoHeight&&r.updateAutoHeight(),transitionEmit({swiper:r,runCallbacks:t,direction:e,step:"Start"}))}function transitionEnd(t,e){t===void 0&&(t=!0);const r=this,{params:n}=r;r.animating=!1,!n.cssMode&&(r.setTransition(0),transitionEmit({swiper:r,runCallbacks:t,direction:e,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(t,e,r,n,i){t===void 0&&(t=0),r===void 0&&(r=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;let f=t;f<0&&(f=0);const{params:a,snapGrid:o,slidesGrid:u,previousIndex:y,activeIndex:w,rtlTranslate:v,wrapperEl:g,enabled:b}=s;if(!b&&!n&&!i||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const l=Math.min(s.params.slidesPerGroupSkip,f);let _=l+Math.floor((f-l)/s.params.slidesPerGroup);_>=o.length&&(_=o.length-1);const h=-o[_];if(a.normalizeSlideIndex)for(let E=0;E<u.length;E+=1){const T=-Math.floor(h*100),A=Math.floor(u[E]*100),P=Math.floor(u[E+1]*100);typeof u[E+1]<"u"?T>=A&&T<P-(P-A)/2?f=E:T>=A&&T<P&&(f=E+1):T>=A&&(f=E)}if(s.initialized&&f!==w&&(!s.allowSlideNext&&(v?h>s.translate&&h>s.minTranslate():h<s.translate&&h<s.minTranslate())||!s.allowSlidePrev&&h>s.translate&&h>s.maxTranslate()&&(w||0)!==f))return!1;f!==(y||0)&&r&&s.emit("beforeSlideChangeStart"),s.updateProgress(h);let d;f>w?d="next":f<w?d="prev":d="reset";const c=s.virtual&&s.params.virtual.enabled;if(!(c&&i)&&(v&&-h===s.translate||!v&&h===s.translate))return s.updateActiveIndex(f),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(h),d!=="reset"&&(s.transitionStart(r,d),s.transitionEnd(r,d)),!1;if(a.cssMode){const E=s.isHorizontal(),T=v?h:-h;if(e===0)c&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),c&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{g[E?"scrollLeft":"scrollTop"]=T})):g[E?"scrollLeft":"scrollTop"]=T,c&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return animateCSSModeScroll({swiper:s,targetPosition:T,side:E?"left":"top"}),!0;g.scrollTo({[E?"left":"top"]:T,behavior:"smooth"})}return!0}const S=getBrowser().isSafari;return c&&!i&&S&&s.isElement&&s.virtual.update(!1,!1,f),s.setTransition(e),s.setTranslate(h),s.updateActiveIndex(f),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,n),s.transitionStart(r,d),e===0?s.transitionEnd(r,d):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(T){!s||s.destroyed||T.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(r,d))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(t,e,r,n){t===void 0&&(t=0),r===void 0&&(r=!0),typeof t=="string"&&(t=parseInt(t,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const s=i.grid&&i.params.grid&&i.params.grid.rows>1;let f=t;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)f=f+i.virtual.slidesBefore;else{let a;if(s){const v=f*i.params.grid.rows;a=i.slides.find(g=>g.getAttribute("data-swiper-slide-index")*1===v).column}else a=i.getSlideIndexByData(f);const o=s?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:u}=i.params;let y=i.params.slidesPerView;y==="auto"?y=i.slidesPerViewDynamic():(y=Math.ceil(parseFloat(i.params.slidesPerView,10)),u&&y%2===0&&(y=y+1));let w=o-a<y;if(u&&(w=w||a<Math.ceil(y/2)),n&&u&&i.params.slidesPerView!=="auto"&&!s&&(w=!1),w){const v=u?a<i.activeIndex?"prev":"next":a-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:v,slideTo:!0,activeSlideIndex:v==="next"?a+1:a-o+1,slideRealIndex:v==="next"?i.realIndex:void 0})}if(s){const v=f*i.params.grid.rows;f=i.slides.find(g=>g.getAttribute("data-swiper-slide-index")*1===v).column}else f=i.getSlideIndexByData(f)}return requestAnimationFrame(()=>{i.slideTo(f,e,r,n)}),i}function slideNext(t,e,r){e===void 0&&(e=!0);const n=this,{enabled:i,params:s,animating:f}=n;if(!i||n.destroyed)return n;typeof t>"u"&&(t=n.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(n.slidesPerViewDynamic("current",!0),1));const o=n.activeIndex<s.slidesPerGroupSkip?1:a,u=n.virtual&&s.virtual.enabled;if(s.loop){if(f&&!u&&s.loopPreventsSliding)return!1;if(n.loopFix({direction:"next"}),n._clientLeft=n.wrapperEl.clientLeft,n.activeIndex===n.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{n.slideTo(n.activeIndex+o,t,e,r)}),!0}return s.rewind&&n.isEnd?n.slideTo(0,t,e,r):n.slideTo(n.activeIndex+o,t,e,r)}function slidePrev(t,e,r){e===void 0&&(e=!0);const n=this,{params:i,snapGrid:s,slidesGrid:f,rtlTranslate:a,enabled:o,animating:u}=n;if(!o||n.destroyed)return n;typeof t>"u"&&(t=n.params.speed);const y=n.virtual&&i.virtual.enabled;if(i.loop){if(u&&!y&&i.loopPreventsSliding)return!1;n.loopFix({direction:"prev"}),n._clientLeft=n.wrapperEl.clientLeft}const w=a?n.translate:-n.translate;function v(d){return d<0?-Math.floor(Math.abs(d)):Math.floor(d)}const g=v(w),b=s.map(d=>v(d)),l=i.freeMode&&i.freeMode.enabled;let _=s[b.indexOf(g)-1];if(typeof _>"u"&&(i.cssMode||l)){let d;s.forEach((c,p)=>{g>=c&&(d=p)}),typeof d<"u"&&(_=l?s[d]:s[d>0?d-1:d])}let h=0;if(typeof _<"u"&&(h=f.indexOf(_),h<0&&(h=n.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(h=h-n.slidesPerViewDynamic("previous",!0)+1,h=Math.max(h,0))),i.rewind&&n.isBeginning){const d=n.params.virtual&&n.params.virtual.enabled&&n.virtual?n.virtual.slides.length-1:n.slides.length-1;return n.slideTo(d,t,e,r)}else if(i.loop&&n.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{n.slideTo(h,t,e,r)}),!0;return n.slideTo(h,t,e,r)}function slideReset(t,e,r){e===void 0&&(e=!0);const n=this;if(!n.destroyed)return typeof t>"u"&&(t=n.params.speed),n.slideTo(n.activeIndex,t,e,r)}function slideToClosest(t,e,r,n){e===void 0&&(e=!0),n===void 0&&(n=.5);const i=this;if(i.destroyed)return;typeof t>"u"&&(t=i.params.speed);let s=i.activeIndex;const f=Math.min(i.params.slidesPerGroupSkip,s),a=f+Math.floor((s-f)/i.params.slidesPerGroup),o=i.rtlTranslate?i.translate:-i.translate;if(o>=i.snapGrid[a]){const u=i.snapGrid[a],y=i.snapGrid[a+1];o-u>(y-u)*n&&(s+=i.params.slidesPerGroup)}else{const u=i.snapGrid[a-1],y=i.snapGrid[a];o-u<=(y-u)*n&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,r)}function slideToClickedSlide(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:r}=t,n=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;const f=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-n/2||i>t.slides.length-t.loopedSlides+n/2?(t.loopFix(),i=t.getSlideIndex(elementChildren(r,`${f}[data-swiper-slide-index="${s}"]`)[0]),nextTick(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-n?(t.loopFix(),i=t.getSlideIndex(elementChildren(r,`${f}[data-swiper-slide-index="${s}"]`)[0]),nextTick(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(t){const e=this,{params:r,slidesEl:n}=e;if(!r.loop||e.virtual&&e.params.virtual.enabled)return;const i=()=>{elementChildren(n,`.${r.slideClass}, swiper-slide`).forEach((w,v)=>{w.setAttribute("data-swiper-slide-index",v)})},s=e.grid&&r.grid&&r.grid.rows>1,f=r.slidesPerGroup*(s?r.grid.rows:1),a=e.slides.length%f!==0,o=s&&e.slides.length%r.grid.rows!==0,u=y=>{for(let w=0;w<y;w+=1){const v=e.isElement?createElement("swiper-slide",[r.slideBlankClass]):createElement("div",[r.slideClass,r.slideBlankClass]);e.slidesEl.append(v)}};if(a){if(r.loopAddBlankSlides){const y=f-e.slides.length%f;u(y),e.recalcSlides(),e.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(o){if(r.loopAddBlankSlides){const y=r.grid.rows-e.slides.length%r.grid.rows;u(y),e.recalcSlides(),e.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();e.loopFix({slideRealIndex:t,direction:r.centeredSlides?void 0:"next"})}function loopFix(t){let{slideRealIndex:e,slideTo:r=!0,direction:n,setTranslate:i,activeSlideIndex:s,byController:f,byMousewheel:a}=t===void 0?{}:t;const o=this;if(!o.params.loop)return;o.emit("beforeLoopFix");const{slides:u,allowSlidePrev:y,allowSlideNext:w,slidesEl:v,params:g}=o,{centeredSlides:b}=g;if(o.allowSlidePrev=!0,o.allowSlideNext=!0,o.virtual&&g.virtual.enabled){r&&(!g.centeredSlides&&o.snapIndex===0?o.slideTo(o.virtual.slides.length,0,!1,!0):g.centeredSlides&&o.snapIndex<g.slidesPerView?o.slideTo(o.virtual.slides.length+o.snapIndex,0,!1,!0):o.snapIndex===o.snapGrid.length-1&&o.slideTo(o.virtual.slidesBefore,0,!1,!0)),o.allowSlidePrev=y,o.allowSlideNext=w,o.emit("loopFix");return}let l=g.slidesPerView;l==="auto"?l=o.slidesPerViewDynamic():(l=Math.ceil(parseFloat(g.slidesPerView,10)),b&&l%2===0&&(l=l+1));const _=g.slidesPerGroupAuto?l:g.slidesPerGroup;let h=_;h%_!==0&&(h+=_-h%_),h+=g.loopAdditionalSlides,o.loopedSlides=h;const d=o.grid&&g.grid&&g.grid.rows>1;u.length<l+h?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):d&&g.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const c=[],p=[];let m=o.activeIndex;typeof s>"u"?s=o.getSlideIndex(u.find(q=>q.classList.contains(g.slideActiveClass))):m=s;const S=n==="next"||!n,E=n==="prev"||!n;let T=0,A=0;const P=d?Math.ceil(u.length/g.grid.rows):u.length,O=(d?u[s].column:s)+(b&&typeof i>"u"?-l/2+.5:0);if(O<h){T=Math.max(h-O,_);for(let q=0;q<h-O;q+=1){const C=q-Math.floor(q/P)*P;if(d){const j=P-C-1;for(let V=u.length-1;V>=0;V-=1)u[V].column===j&&c.push(V)}else c.push(P-C-1)}}else if(O+l>P-h){A=Math.max(O-(P-h*2),_);for(let q=0;q<A;q+=1){const C=q-Math.floor(q/P)*P;d?u.forEach((j,V)=>{j.column===C&&p.push(V)}):p.push(C)}}if(o.__preventObserver__=!0,requestAnimationFrame(()=>{o.__preventObserver__=!1}),E&&c.forEach(q=>{u[q].swiperLoopMoveDOM=!0,v.prepend(u[q]),u[q].swiperLoopMoveDOM=!1}),S&&p.forEach(q=>{u[q].swiperLoopMoveDOM=!0,v.append(u[q]),u[q].swiperLoopMoveDOM=!1}),o.recalcSlides(),g.slidesPerView==="auto"?o.updateSlides():d&&(c.length>0&&E||p.length>0&&S)&&o.slides.forEach((q,C)=>{o.grid.updateSlide(C,q,o.slides)}),g.watchSlidesProgress&&o.updateSlidesOffset(),r){if(c.length>0&&E){if(typeof e>"u"){const q=o.slidesGrid[m],j=o.slidesGrid[m+T]-q;a?o.setTranslate(o.translate-j):(o.slideTo(m+Math.ceil(T),0,!1,!0),i&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-j,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-j))}else if(i){const q=d?c.length/g.grid.rows:c.length;o.slideTo(o.activeIndex+q,0,!1,!0),o.touchEventsData.currentTranslate=o.translate}}else if(p.length>0&&S)if(typeof e>"u"){const q=o.slidesGrid[m],j=o.slidesGrid[m-A]-q;a?o.setTranslate(o.translate-j):(o.slideTo(m-A,0,!1,!0),i&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-j,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-j))}else{const q=d?p.length/g.grid.rows:p.length;o.slideTo(o.activeIndex-q,0,!1,!0)}}if(o.allowSlidePrev=y,o.allowSlideNext=w,o.controller&&o.controller.control&&!f){const q={slideRealIndex:e,direction:n,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(o.controller.control)?o.controller.control.forEach(C=>{!C.destroyed&&C.params.loop&&C.loopFix({...q,slideTo:C.params.slidesPerView===g.slidesPerView?r:!1})}):o.controller.control instanceof o.constructor&&o.controller.control.params.loop&&o.controller.control.loopFix({...q,slideTo:o.controller.control.params.slidesPerView===g.slidesPerView?r:!1})}o.emit("loopFix")}function loopDestroy(){const t=this,{params:e,slidesEl:r}=t;if(!e.loop||!r||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const n=[];t.slides.forEach(i=>{const s=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;n[s]=i}),t.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),n.forEach(i=>{r.append(i)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),r.style.cursor="move",r.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function unsetGrabCursor(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(t,e){e===void 0&&(e=this);function r(n){if(!n||n===getDocument()||n===getWindow())return null;n.assignedSlot&&(n=n.assignedSlot);const i=n.closest(t);return!i&&!n.getRootNode?null:i||r(n.getRootNode().host)}return r(e)}function preventEdgeSwipe(t,e,r){const n=getWindow(),{params:i}=t,s=i.edgeSwipeDetection,f=i.edgeSwipeThreshold;return s&&(r<=f||r>=n.innerWidth-f)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function onTouchStart(t){const e=this,r=getDocument();let n=t;n.originalEvent&&(n=n.originalEvent);const i=e.touchEventsData;if(n.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==n.pointerId)return;i.pointerId=n.pointerId}else n.type==="touchstart"&&n.targetTouches.length===1&&(i.touchId=n.targetTouches[0].identifier);if(n.type==="touchstart"){preventEdgeSwipe(e,n,n.targetTouches[0].pageX);return}const{params:s,touches:f,enabled:a}=e;if(!a||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let o=n.target;if(s.touchEventsTarget==="wrapper"&&!elementIsChildOf(o,e.wrapperEl)||"which"in n&&n.which===3||"button"in n&&n.button>0||i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",y=n.composedPath?n.composedPath():n.path;u&&n.target&&n.target.shadowRoot&&y&&(o=y[0]);const w=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,v=!!(n.target&&n.target.shadowRoot);if(s.noSwiping&&(v?closestElement(w,o):o.closest(w))){e.allowClick=!0;return}if(s.swipeHandler&&!o.closest(s.swipeHandler))return;f.currentX=n.pageX,f.currentY=n.pageY;const g=f.currentX,b=f.currentY;if(!preventEdgeSwipe(e,n,g))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),f.startX=g,f.startY=b,i.touchStartTime=now(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let l=!0;o.matches(i.focusableElements)&&(l=!1,o.nodeName==="SELECT"&&(i.isTouched=!1)),r.activeElement&&r.activeElement.matches(i.focusableElements)&&r.activeElement!==o&&(n.pointerType==="mouse"||n.pointerType!=="mouse"&&!o.matches(i.focusableElements))&&r.activeElement.blur();const _=l&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||_)&&!o.isContentEditable&&n.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",n)}function onTouchMove(t){const e=getDocument(),r=this,n=r.touchEventsData,{params:i,touches:s,rtlTranslate:f,enabled:a}=r;if(!a||!i.simulateTouch&&t.pointerType==="mouse")return;let o=t;if(o.originalEvent&&(o=o.originalEvent),o.type==="pointermove"&&(n.touchId!==null||o.pointerId!==n.pointerId))return;let u;if(o.type==="touchmove"){if(u=[...o.changedTouches].find(m=>m.identifier===n.touchId),!u||u.identifier!==n.touchId)return}else u=o;if(!n.isTouched){n.startMoving&&n.isScrolling&&r.emit("touchMoveOpposite",o);return}const y=u.pageX,w=u.pageY;if(o.preventedByNestedSwiper){s.startX=y,s.startY=w;return}if(!r.allowTouchMove){o.target.matches(n.focusableElements)||(r.allowClick=!1),n.isTouched&&(Object.assign(s,{startX:y,startY:w,currentX:y,currentY:w}),n.touchStartTime=now());return}if(i.touchReleaseOnEdges&&!i.loop){if(r.isVertical()){if(w<s.startY&&r.translate<=r.maxTranslate()||w>s.startY&&r.translate>=r.minTranslate()){n.isTouched=!1,n.isMoved=!1;return}}else if(y<s.startX&&r.translate<=r.maxTranslate()||y>s.startX&&r.translate>=r.minTranslate())return}if(e.activeElement&&e.activeElement.matches(n.focusableElements)&&e.activeElement!==o.target&&o.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&o.target===e.activeElement&&o.target.matches(n.focusableElements)){n.isMoved=!0,r.allowClick=!1;return}n.allowTouchCallbacks&&r.emit("touchMove",o),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=y,s.currentY=w;const v=s.currentX-s.startX,g=s.currentY-s.startY;if(r.params.threshold&&Math.sqrt(v**2+g**2)<r.params.threshold)return;if(typeof n.isScrolling>"u"){let m;r.isHorizontal()&&s.currentY===s.startY||r.isVertical()&&s.currentX===s.startX?n.isScrolling=!1:v*v+g*g>=25&&(m=Math.atan2(Math.abs(g),Math.abs(v))*180/Math.PI,n.isScrolling=r.isHorizontal()?m>i.touchAngle:90-m>i.touchAngle)}if(n.isScrolling&&r.emit("touchMoveOpposite",o),typeof n.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(n.startMoving=!0),n.isScrolling||o.type==="touchmove"&&n.preventTouchMoveFromPointerMove){n.isTouched=!1;return}if(!n.startMoving)return;r.allowClick=!1,!i.cssMode&&o.cancelable&&o.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&o.stopPropagation();let b=r.isHorizontal()?v:g,l=r.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(b=Math.abs(b)*(f?1:-1),l=Math.abs(l)*(f?1:-1)),s.diff=b,b*=i.touchRatio,f&&(b=-b,l=-l);const _=r.touchesDirection;r.swipeDirection=b>0?"prev":"next",r.touchesDirection=l>0?"prev":"next";const h=r.params.loop&&!i.cssMode,d=r.touchesDirection==="next"&&r.allowSlideNext||r.touchesDirection==="prev"&&r.allowSlidePrev;if(!n.isMoved){if(h&&d&&r.loopFix({direction:r.swipeDirection}),n.startTranslate=r.getTranslate(),r.setTransition(0),r.animating){const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});r.wrapperEl.dispatchEvent(m)}n.allowMomentumBounce=!1,i.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",o)}if(new Date().getTime(),i._loopSwapReset!==!1&&n.isMoved&&n.allowThresholdMove&&_!==r.touchesDirection&&h&&d&&Math.abs(b)>=1){Object.assign(s,{startX:y,startY:w,currentX:y,currentY:w,startTranslate:n.currentTranslate}),n.loopSwapReset=!0,n.startTranslate=n.currentTranslate;return}r.emit("sliderMove",o),n.isMoved=!0,n.currentTranslate=b+n.startTranslate;let c=!0,p=i.resistanceRatio;if(i.touchReleaseOnEdges&&(p=0),b>0?(h&&d&&n.allowThresholdMove&&n.currentTranslate>(i.centeredSlides?r.minTranslate()-r.slidesSizesGrid[r.activeIndex+1]-(i.slidesPerView!=="auto"&&r.slides.length-i.slidesPerView>=2?r.slidesSizesGrid[r.activeIndex+1]+r.params.spaceBetween:0)-r.params.spaceBetween:r.minTranslate())&&r.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),n.currentTranslate>r.minTranslate()&&(c=!1,i.resistance&&(n.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+n.startTranslate+b)**p))):b<0&&(h&&d&&n.allowThresholdMove&&n.currentTranslate<(i.centeredSlides?r.maxTranslate()+r.slidesSizesGrid[r.slidesSizesGrid.length-1]+r.params.spaceBetween+(i.slidesPerView!=="auto"&&r.slides.length-i.slidesPerView>=2?r.slidesSizesGrid[r.slidesSizesGrid.length-1]+r.params.spaceBetween:0):r.maxTranslate())&&r.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:r.slides.length-(i.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),n.currentTranslate<r.maxTranslate()&&(c=!1,i.resistance&&(n.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-n.startTranslate-b)**p))),c&&(o.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(n.currentTranslate=n.startTranslate),i.threshold>0)if(Math.abs(b)>i.threshold||n.allowThresholdMove){if(!n.allowThresholdMove){n.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,n.currentTranslate=n.startTranslate,s.diff=r.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{n.currentTranslate=n.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&r.freeMode||i.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(n.currentTranslate),r.setTranslate(n.currentTranslate))}function onTouchEnd(t){const e=this,r=e.touchEventsData;let n=t;n.originalEvent&&(n=n.originalEvent);let i;if(n.type==="touchend"||n.type==="touchcancel"){if(i=[...n.changedTouches].find(m=>m.identifier===r.touchId),!i||i.identifier!==r.touchId)return}else{if(r.touchId!==null||n.pointerId!==r.pointerId)return;i=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;r.pointerId=null,r.touchId=null;const{params:f,touches:a,rtlTranslate:o,slidesGrid:u,enabled:y}=e;if(!y||!f.simulateTouch&&n.pointerType==="mouse")return;if(r.allowTouchCallbacks&&e.emit("touchEnd",n),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&f.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}f.grabCursor&&r.isMoved&&r.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const w=now(),v=w-r.touchStartTime;if(e.allowClick){const m=n.path||n.composedPath&&n.composedPath();e.updateClickedSlide(m&&m[0]||n.target,m),e.emit("tap click",n),v<300&&w-r.lastClickTime<300&&e.emit("doubleTap doubleClick",n)}if(r.lastClickTime=now(),nextTick(()=>{e.destroyed||(e.allowClick=!0)}),!r.isTouched||!r.isMoved||!e.swipeDirection||a.diff===0&&!r.loopSwapReset||r.currentTranslate===r.startTranslate&&!r.loopSwapReset){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let g;if(f.followFinger?g=o?e.translate:-e.translate:g=-r.currentTranslate,f.cssMode)return;if(f.freeMode&&f.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:g});return}const b=g>=-e.maxTranslate()&&!e.params.loop;let l=0,_=e.slidesSizesGrid[0];for(let m=0;m<u.length;m+=m<f.slidesPerGroupSkip?1:f.slidesPerGroup){const S=m<f.slidesPerGroupSkip-1?1:f.slidesPerGroup;typeof u[m+S]<"u"?(b||g>=u[m]&&g<u[m+S])&&(l=m,_=u[m+S]-u[m]):(b||g>=u[m])&&(l=m,_=u[u.length-1]-u[u.length-2])}let h=null,d=null;f.rewind&&(e.isBeginning?d=f.virtual&&f.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(h=0));const c=(g-u[l])/_,p=l<f.slidesPerGroupSkip-1?1:f.slidesPerGroup;if(v>f.longSwipesMs){if(!f.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(c>=f.longSwipesRatio?e.slideTo(f.rewind&&e.isEnd?h:l+p):e.slideTo(l)),e.swipeDirection==="prev"&&(c>1-f.longSwipesRatio?e.slideTo(l+p):d!==null&&c<0&&Math.abs(c)>f.longSwipesRatio?e.slideTo(d):e.slideTo(l))}else{if(!f.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(n.target===e.navigation.nextEl||n.target===e.navigation.prevEl)?n.target===e.navigation.nextEl?e.slideTo(l+p):e.slideTo(l):(e.swipeDirection==="next"&&e.slideTo(h!==null?h:l+p),e.swipeDirection==="prev"&&e.slideTo(d!==null?d:l))}}function onResize(){const t=this,{params:e,el:r}=t;if(r&&r.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:i,snapGrid:s}=t,f=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=f&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!f?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=n,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function onClick(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function onScroll(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:n}=t;if(!n)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function onLoad(t){const e=this;processLazyPreloader(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function onDocumentTouchStart(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const events$1=(t,e)=>{const r=getDocument(),{params:n,el:i,wrapperEl:s,device:f}=t,a=!!n.nested,o=e==="on"?"addEventListener":"removeEventListener",u=e;!i||typeof i=="string"||(r[o]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:a}),i[o]("touchstart",t.onTouchStart,{passive:!1}),i[o]("pointerdown",t.onTouchStart,{passive:!1}),r[o]("touchmove",t.onTouchMove,{passive:!1,capture:a}),r[o]("pointermove",t.onTouchMove,{passive:!1,capture:a}),r[o]("touchend",t.onTouchEnd,{passive:!0}),r[o]("pointerup",t.onTouchEnd,{passive:!0}),r[o]("pointercancel",t.onTouchEnd,{passive:!0}),r[o]("touchcancel",t.onTouchEnd,{passive:!0}),r[o]("pointerout",t.onTouchEnd,{passive:!0}),r[o]("pointerleave",t.onTouchEnd,{passive:!0}),r[o]("contextmenu",t.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&i[o]("click",t.onClick,!0),n.cssMode&&s[o]("scroll",t.onScroll),n.updateOnWindowResize?t[u](f.ios||f.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):t[u]("observerUpdate",onResize,!0),i[o]("load",t.onLoad,{capture:!0}))};function attachEvents(){const t=this,{params:e}=t;t.onTouchStart=onTouchStart.bind(t),t.onTouchMove=onTouchMove.bind(t),t.onTouchEnd=onTouchEnd.bind(t),t.onDocumentTouchStart=onDocumentTouchStart.bind(t),e.cssMode&&(t.onScroll=onScroll.bind(t)),t.onClick=onClick.bind(t),t.onLoad=onLoad.bind(t),events$1(t,"on")}function detachEvents(){events$1(this,"off")}var events$1$1={attachEvents,detachEvents};const isGridEnabled=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function setBreakpoint(){const t=this,{realIndex:e,initialized:r,params:n,el:i}=t,s=n.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const f=getDocument(),a=n.breakpointsBase==="window"||!n.breakpointsBase?n.breakpointsBase:"container",o=["window","container"].includes(n.breakpointsBase)||!n.breakpointsBase?t.el:f.querySelector(n.breakpointsBase),u=t.getBreakpoint(s,a,o);if(!u||t.currentBreakpoint===u)return;const w=(u in s?s[u]:void 0)||t.originalParams,v=isGridEnabled(t,n),g=isGridEnabled(t,w),b=t.params.grabCursor,l=w.grabCursor,_=n.enabled;v&&!g?(i.classList.remove(`${n.containerModifierClass}grid`,`${n.containerModifierClass}grid-column`),t.emitContainerClasses()):!v&&g&&(i.classList.add(`${n.containerModifierClass}grid`),(w.grid.fill&&w.grid.fill==="column"||!w.grid.fill&&n.grid.fill==="column")&&i.classList.add(`${n.containerModifierClass}grid-column`),t.emitContainerClasses()),b&&!l?t.unsetGrabCursor():!b&&l&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(S=>{if(typeof w[S]>"u")return;const E=n[S]&&n[S].enabled,T=w[S]&&w[S].enabled;E&&!T&&t[S].disable(),!E&&T&&t[S].enable()});const h=w.direction&&w.direction!==n.direction,d=n.loop&&(w.slidesPerView!==n.slidesPerView||h),c=n.loop;h&&r&&t.changeDirection(),extend$1(t.params,w);const p=t.params.enabled,m=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),_&&!p?t.disable():!_&&p&&t.enable(),t.currentBreakpoint=u,t.emit("_beforeBreakpoint",w),r&&(d?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!c&&m?(t.loopCreate(e),t.updateSlides()):c&&!m&&t.loopDestroy()),t.emit("breakpoint",w)}function getBreakpoint(t,e,r){if(e===void 0&&(e="window"),!t||e==="container"&&!r)return;let n=!1;const i=getWindow(),s=e==="window"?i.innerHeight:r.clientHeight,f=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const o=parseFloat(a.substr(1));return{value:s*o,point:a}}return{value:a,point:a}});f.sort((a,o)=>parseInt(a.value,10)-parseInt(o.value,10));for(let a=0;a<f.length;a+=1){const{point:o,value:u}=f[a];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(n=o):u<=r.clientWidth&&(n=o)}return n||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(t,e){const r=[];return t.forEach(n=>{typeof n=="object"?Object.keys(n).forEach(i=>{n[i]&&r.push(e+i)}):typeof n=="string"&&r.push(e+n)}),r}function addClasses(){const t=this,{classNames:e,params:r,rtl:n,el:i,device:s}=t,f=prepareClasses(["initialized",r.direction,{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:n},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);e.push(...f),i.classList.add(...e),t.emitContainerClasses()}function removeClasses(){const t=this,{el:e,classNames:r}=t;!e||typeof e=="string"||(e.classList.remove(...r),t.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:n}=r;if(n){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+n*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;r.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),r.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(t,e){return function(n){n===void 0&&(n={});const i=Object.keys(n)[0],s=n[i];if(typeof s!="object"||s===null){extend$1(e,n);return}if(t[i]===!0&&(t[i]={enabled:!0}),i==="navigation"&&t[i]&&t[i].enabled&&!t[i].prevEl&&!t[i].nextEl&&(t[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&t[i]&&t[i].enabled&&!t[i].el&&(t[i].auto=!0),!(i in t&&"enabled"in s)){extend$1(e,n);return}typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),extend$1(e,n)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class ct{constructor(){let e,r;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?r=i[0]:[e,r]=i,r||(r={}),r=extend$1({},r),e&&!r.el&&(r.el=e);const f=getDocument();if(r.el&&typeof r.el=="string"&&f.querySelectorAll(r.el).length>1){const y=[];return f.querySelectorAll(r.el).forEach(w=>{const v=extend$1({},r,{el:w});y.push(new ct(v))}),y}const a=this;a.__swiper__=!0,a.support=getSupport(),a.device=getDevice({userAgent:r.userAgent}),a.browser=getBrowser(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],r.modules&&Array.isArray(r.modules)&&a.modules.push(...r.modules);const o={};a.modules.forEach(y=>{y({params:r,swiper:a,extendParams:moduleExtendParams(r,o),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const u=extend$1({},defaults,o);return a.params=extend$1({},u,extendedDefaults,r),a.originalParams=extend$1({},a.params),a.passedParams=extend$1({},r),a.params&&a.params.on&&Object.keys(a.params.on).forEach(y=>{a.on(y,a.params.on[y])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:r,params:n}=this,i=elementChildren(r,`.${n.slideClass}, swiper-slide`),s=elementIndex(i[0]);return elementIndex(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(r=>r.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:r,params:n}=e;e.slides=elementChildren(r,`.${n.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,r){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),f=(n.maxTranslate()-i)*e+i;n.translateTo(f,typeof r>"u"?0:r),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=e.el.className.split(" ").filter(n=>n.indexOf("swiper")===0||n.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",r.join(" "))}getSlideClasses(e){const r=this;return r.destroyed?"":e.className.split(" ").filter(n=>n.indexOf("swiper-slide")===0||n.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const r=[];e.slides.forEach(n=>{const i=e.getSlideClasses(n);r.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)}),e.emit("_slideClasses",r)}slidesPerViewDynamic(e,r){e===void 0&&(e="current"),r===void 0&&(r=!1);const n=this,{params:i,slides:s,slidesGrid:f,slidesSizesGrid:a,size:o,activeIndex:u}=n;let y=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let w=s[u]?Math.ceil(s[u].swiperSlideSize):0,v;for(let g=u+1;g<s.length;g+=1)s[g]&&!v&&(w+=Math.ceil(s[g].swiperSlideSize),y+=1,w>o&&(v=!0));for(let g=u-1;g>=0;g-=1)s[g]&&!v&&(w+=s[g].swiperSlideSize,y+=1,w>o&&(v=!0))}else if(e==="current")for(let w=u+1;w<s.length;w+=1)(r?f[w]+a[w]-f[u]<o:f[w]-f[u]<o)&&(y+=1);else for(let w=u-1;w>=0;w-=1)f[u]-f[w]<o&&(y+=1);return y}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:r,params:n}=e;n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(f=>{f.complete&&processLazyPreloader(e,f)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const f=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(f,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(n.freeMode&&n.freeMode.enabled&&!n.cssMode)i(),n.autoHeight&&e.updateAutoHeight();else{if((n.slidesPerView==="auto"||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const f=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(f.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||i()}n.watchOverflow&&r!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,r){r===void 0&&(r=!0);const n=this,i=n.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(n.el.classList.remove(`${n.params.containerModifierClass}${i}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),n.emit("changeDirection"),r&&n.update()),n}changeLanguageDirection(e){const r=this;r.rtl&&e==="rtl"||!r.rtl&&e==="ltr"||(r.rtl=e==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.el.classList.add(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.el.classList.remove(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(e){const r=this;if(r.mounted)return!0;let n=e||r.params.el;if(typeof n=="string"&&(n=document.querySelector(n)),!n)return!1;n.swiper=r,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===r.params.swiperElementNodeName.toUpperCase()&&(r.isElement=!0);const i=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let f=n&&n.shadowRoot&&n.shadowRoot.querySelector?n.shadowRoot.querySelector(i()):elementChildren(n,i())[0];return!f&&r.params.createElements&&(f=createElement("div",r.params.wrapperClass),n.append(f),elementChildren(n,`.${r.params.slideClass}`).forEach(a=>{f.append(a)})),Object.assign(r,{el:n,wrapperEl:f,slidesEl:r.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:f,hostEl:r.isElement?n.parentNode.host:n,mounted:!0,rtl:n.dir.toLowerCase()==="rtl"||elementStyle(n,"direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(n.dir.toLowerCase()==="rtl"||elementStyle(n,"direction")==="rtl"),wrongRTL:elementStyle(f,"display")==="-webkit-box"}),!0}init(e){const r=this;if(r.initialized||r.mount(e)===!1)return r;r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.loop&&r.virtual&&r.params.virtual.enabled?r.slideTo(r.params.initialSlide+r.virtual.slidesBefore,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.params.loop&&r.loopCreate(),r.attachEvents();const i=[...r.el.querySelectorAll('[loading="lazy"]')];return r.isElement&&i.push(...r.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(s=>{s.complete?processLazyPreloader(r,s):s.addEventListener("load",f=>{processLazyPreloader(r,f.target)})}),preload(r),r.initialized=!0,preload(r),r.emit("init"),r.emit("afterInit"),r}destroy(e,r){e===void 0&&(e=!0),r===void 0&&(r=!0);const n=this,{params:i,el:s,wrapperEl:f,slides:a}=n;return typeof n.params>"u"||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),r&&(n.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),f&&f.removeAttribute("style"),a&&a.length&&a.forEach(o=>{o.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),o.removeAttribute("style"),o.removeAttribute("data-swiper-slide-index")})),n.emit("destroy"),Object.keys(n.eventsListeners).forEach(o=>{n.off(o)}),e!==!1&&(n.el&&typeof n.el!="string"&&(n.el.swiper=null),deleteProps(n)),n.destroyed=!0),null}static extendDefaults(e){extend$1(extendedDefaults,e)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(e){ct.prototype.__modules__||(ct.prototype.__modules__=[]);const r=ct.prototype.__modules__;typeof e=="function"&&r.indexOf(e)<0&&r.push(e)}static use(e){return Array.isArray(e)?(e.forEach(r=>ct.installModule(r)),ct):(ct.installModule(e),ct)}};Object.keys(prototypes).forEach(t=>{Object.keys(prototypes[t]).forEach(e=>{Swiper$1.prototype[e]=prototypes[t][e]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function extend(t,e){const r=["__proto__","constructor","prototype"];Object.keys(e).filter(n=>r.indexOf(n)<0).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:isObject(e[n])&&isObject(t[n])&&Object.keys(e[n]).length>0?e[n].__swiper__?t[n]=e[n]:extend(t[n],e[n]):t[n]=e[n]})}function needsNavigation(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function needsPagination(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function needsScrollbar(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function uniqueClasses(t){t===void 0&&(t="");const e=t.split(" ").map(n=>n.trim()).filter(n=>!!n),r=[];return e.forEach(n=>{r.indexOf(n)<0&&r.push(n)}),r.join(" ")}function wrapperClass(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function updateSwiper(t){let{swiper:e,slides:r,passedParams:n,changedParams:i,nextEl:s,prevEl:f,scrollbarEl:a,paginationEl:o}=t;const u=i.filter(A=>A!=="children"&&A!=="direction"&&A!=="wrapperClass"),{params:y,pagination:w,navigation:v,scrollbar:g,virtual:b,thumbs:l}=e;let _,h,d,c,p,m,S,E;i.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&y.thumbs&&(!y.thumbs.swiper||y.thumbs.swiper.destroyed)&&(_=!0),i.includes("controller")&&n.controller&&n.controller.control&&y.controller&&!y.controller.control&&(h=!0),i.includes("pagination")&&n.pagination&&(n.pagination.el||o)&&(y.pagination||y.pagination===!1)&&w&&!w.el&&(d=!0),i.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(y.scrollbar||y.scrollbar===!1)&&g&&!g.el&&(c=!0),i.includes("navigation")&&n.navigation&&(n.navigation.prevEl||f)&&(n.navigation.nextEl||s)&&(y.navigation||y.navigation===!1)&&v&&!v.prevEl&&!v.nextEl&&(p=!0);const T=A=>{e[A]&&(e[A].destroy(),A==="navigation"?(e.isElement&&(e[A].prevEl.remove(),e[A].nextEl.remove()),y[A].prevEl=void 0,y[A].nextEl=void 0,e[A].prevEl=void 0,e[A].nextEl=void 0):(e.isElement&&e[A].el.remove(),y[A].el=void 0,e[A].el=void 0))};i.includes("loop")&&e.isElement&&(y.loop&&!n.loop?m=!0:!y.loop&&n.loop?S=!0:E=!0),u.forEach(A=>{if(isObject(y[A])&&isObject(n[A]))Object.assign(y[A],n[A]),(A==="navigation"||A==="pagination"||A==="scrollbar")&&"enabled"in n[A]&&!n[A].enabled&&T(A);else{const P=n[A];(P===!0||P===!1)&&(A==="navigation"||A==="pagination"||A==="scrollbar")?P===!1&&T(A):y[A]=n[A]}}),u.includes("controller")&&!h&&e.controller&&e.controller.control&&y.controller&&y.controller.control&&(e.controller.control=y.controller.control),i.includes("children")&&r&&b&&y.virtual.enabled?(b.slides=r,b.update(!0)):i.includes("virtual")&&b&&y.virtual.enabled&&(r&&(b.slides=r),b.update(!0)),i.includes("children")&&r&&y.loop&&(E=!0),_&&l.init()&&l.update(!0),h&&(e.controller.control=y.controller.control),d&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-pagination"),o.part.add("pagination"),e.el.appendChild(o)),o&&(y.pagination.el=o),w.init(),w.render(),w.update()),c&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(y.scrollbar.el=a),g.init(),g.updateSize(),g.setTranslate()),p&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!f||typeof f=="string")&&(f=document.createElement("div"),f.classList.add("swiper-button-prev"),f.innerHTML=e.hostEl.constructor.prevButtonSvg,f.part.add("button-prev"),e.el.appendChild(f))),s&&(y.navigation.nextEl=s),f&&(y.navigation.prevEl=f),v.init(),v.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=n.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=n.allowSlidePrev),i.includes("direction")&&e.changeDirection(n.direction,!1),(m||E)&&e.loopDestroy(),(S||E)&&e.loopCreate(),e.update()}function getParams(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const r={on:{}},n={},i={};extend(r,defaults),r._emitClasses=!0,r.init=!1;const s={},f=paramsList.map(o=>o.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(o=>{typeof t[o]>"u"||(f.indexOf(o)>=0?isObject(t[o])?(r[o]={},i[o]={},extend(r[o],t[o]),extend(i[o],t[o])):(r[o]=t[o],i[o]=t[o]):o.search(/on[A-Z]/)===0&&typeof t[o]=="function"?e?n[`${o[2].toLowerCase()}${o.substr(3)}`]=t[o]:r.on[`${o[2].toLowerCase()}${o.substr(3)}`]=t[o]:s[o]=t[o])}),["navigation","pagination","scrollbar"].forEach(o=>{r[o]===!0&&(r[o]={}),r[o]===!1&&delete r[o]}),{params:r,passedParams:i,rest:s,events:n}}function mountSwiper(t,e){let{el:r,nextEl:n,prevEl:i,paginationEl:s,scrollbarEl:f,swiper:a}=t;needsNavigation(e)&&n&&i&&(a.params.navigation.nextEl=n,a.originalParams.navigation.nextEl=n,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),needsPagination(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),needsScrollbar(e)&&f&&(a.params.scrollbar.el=f,a.originalParams.scrollbar.el=f),a.init(r)}function getChangedParams(t,e,r,n,i){const s=[];if(!e)return s;const f=o=>{s.indexOf(o)<0&&s.push(o)};if(r&&n){const o=n.map(i),u=r.map(i);o.join("")!==u.join("")&&f("children"),n.length!==r.length&&f("children")}return paramsList.filter(o=>o[0]==="_").map(o=>o.replace(/_/,"")).forEach(o=>{if(o in t&&o in e)if(isObject(t[o])&&isObject(e[o])){const u=Object.keys(t[o]),y=Object.keys(e[o]);u.length!==y.length?f(o):(u.forEach(w=>{t[o][w]!==e[o][w]&&f(o)}),y.forEach(w=>{t[o][w]!==e[o][w]&&f(o)}))}else t[o]!==e[o]&&f(o)}),s}const updateOnVirtualData=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_extends$1.apply(this,arguments)}function isChildSwiperSlide(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function processChildren(t){const e=[];return React.Children.toArray(t).forEach(r=>{isChildSwiperSlide(r)?e.push(r):r.props&&r.props.children&&processChildren(r.props.children).forEach(n=>e.push(n))}),e}function getChildren(t){const e=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(t).forEach(n=>{if(isChildSwiperSlide(n))e.push(n);else if(n.props&&n.props.slot&&r[n.props.slot])r[n.props.slot].push(n);else if(n.props&&n.props.children){const i=processChildren(n.props.children);i.length>0?i.forEach(s=>e.push(s)):r["container-end"].push(n)}else r["container-end"].push(n)}),{slides:e,slots:r}}function renderVirtual(t,e,r){if(!r)return null;const n=y=>{let w=y;return y<0?w=e.length+y:w>=e.length&&(w=w-e.length),w},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`},{from:s,to:f}=r,a=t.params.loop?-e.length:0,o=t.params.loop?e.length*2:e.length,u=[];for(let y=a;y<o;y+=1)y>=s&&y<=f&&u.push(e[n(y)]);return u.map((y,w)=>React.cloneElement(y,{swiper:t,style:i,key:y.props.virtualIndex||y.key||`slide-${w}`}))}function useIsomorphicLayoutEffect(t,e){return typeof window>"u"?reactExports.useEffect(t,e):reactExports.useLayoutEffect(t,e)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(t,e){let{className:r,tag:n="div",wrapperTag:i="div",children:s,onSwiper:f,...a}=t===void 0?{}:t,o=!1;const[u,y]=reactExports.useState("swiper"),[w,v]=reactExports.useState(null),[g,b]=reactExports.useState(!1),l=reactExports.useRef(!1),_=reactExports.useRef(null),h=reactExports.useRef(null),d=reactExports.useRef(null),c=reactExports.useRef(null),p=reactExports.useRef(null),m=reactExports.useRef(null),S=reactExports.useRef(null),E=reactExports.useRef(null),{params:T,passedParams:A,rest:P,events:H}=getParams(a),{slides:O,slots:q}=getChildren(s),C=()=>{b(!g)};Object.assign(T.on,{_containerClasses(X,J){y(J)}});const j=()=>{Object.assign(T.on,H),o=!0;const X={...T};if(delete X.wrapperClass,h.current=new Swiper$1(X),h.current.virtual&&h.current.params.virtual.enabled){h.current.virtual.slides=O;const J={cache:!1,slides:O,renderExternal:v,renderExternalUpdate:!1};extend(h.current.params.virtual,J),extend(h.current.originalParams.virtual,J)}};_.current||j(),h.current&&h.current.on("_beforeBreakpoint",C);const V=()=>{o||!H||!h.current||Object.keys(H).forEach(X=>{h.current.on(X,H[X])})},N=()=>{!H||!h.current||Object.keys(H).forEach(X=>{h.current.off(X,H[X])})};reactExports.useEffect(()=>()=>{h.current&&h.current.off("_beforeBreakpoint",C)}),reactExports.useEffect(()=>{!l.current&&h.current&&(h.current.emitSlidesClasses(),l.current=!0)}),useIsomorphicLayoutEffect(()=>{if(e&&(e.current=_.current),!!_.current)return h.current.destroyed&&j(),mountSwiper({el:_.current,nextEl:p.current,prevEl:m.current,paginationEl:S.current,scrollbarEl:E.current,swiper:h.current},T),f&&!h.current.destroyed&&f(h.current),()=>{h.current&&!h.current.destroyed&&h.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect(()=>{V();const X=getChangedParams(A,d.current,O,c.current,J=>J.key);return d.current=A,c.current=O,X.length&&h.current&&!h.current.destroyed&&updateSwiper({swiper:h.current,slides:O,passedParams:A,changedParams:X,nextEl:p.current,prevEl:m.current,scrollbarEl:E.current,paginationEl:S.current}),()=>{N()}}),useIsomorphicLayoutEffect(()=>{updateOnVirtualData(h.current)},[w]);function Y(){return T.virtual?renderVirtual(h.current,O,w):O.map((X,J)=>React.cloneElement(X,{swiper:h.current,swiperSlideIndex:J}))}return React.createElement(n,_extends$1({ref:_,className:uniqueClasses(`${u}${r?` ${r}`:""}`)},P),React.createElement(SwiperContext.Provider,{value:h.current},q["container-start"],React.createElement(i,{className:wrapperClass(T.wrapperClass)},q["wrapper-start"],Y(),q["wrapper-end"]),needsNavigation(T)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:m,className:"swiper-button-prev"}),React.createElement("div",{ref:p,className:"swiper-button-next"})),needsScrollbar(T)&&React.createElement("div",{ref:E,className:"swiper-scrollbar"}),needsPagination(T)&&React.createElement("div",{ref:S,className:"swiper-pagination"}),q["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(t,e){let{tag:r="div",children:n,className:i="",swiper:s,zoom:f,lazy:a,virtualIndex:o,swiperSlideIndex:u,...y}=t===void 0?{}:t;const w=reactExports.useRef(null),[v,g]=reactExports.useState("swiper-slide"),[b,l]=reactExports.useState(!1);function _(p,m,S){m===w.current&&g(S)}useIsomorphicLayoutEffect(()=>{if(typeof u<"u"&&(w.current.swiperSlideIndex=u),e&&(e.current=w.current),!(!w.current||!s)){if(s.destroyed){v!=="swiper-slide"&&g("swiper-slide");return}return s.on("_slideClass",_),()=>{s&&s.off("_slideClass",_)}}}),useIsomorphicLayoutEffect(()=>{s&&w.current&&!s.destroyed&&g(s.getSlideClasses(w.current))},[s]);const h={isActive:v.indexOf("swiper-slide-active")>=0,isVisible:v.indexOf("swiper-slide-visible")>=0,isPrev:v.indexOf("swiper-slide-prev")>=0,isNext:v.indexOf("swiper-slide-next")>=0},d=()=>typeof n=="function"?n(h):n,c=()=>{l(!0)};return React.createElement(r,_extends$1({ref:w,className:uniqueClasses(`${v}${i?` ${i}`:""}`),"data-swiper-slide-index":o,onLoad:c},y),f&&React.createElement(SwiperSlideContext.Provider,{value:h},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof f=="number"?f:void 0},d(),a&&!b&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!f&&React.createElement(SwiperSlideContext.Provider,{value:h},d(),a&&!b&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";var es={exports:{}},interopRequireDefault={exports:{}},hasRequiredInteropRequireDefault;function requireInteropRequireDefault(){return hasRequiredInteropRequireDefault||(hasRequiredInteropRequireDefault=1,function(t){function e(r){return r&&r.__esModule?r:{default:r}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(interopRequireDefault)),interopRequireDefault.exports}var _extends={exports:{}},hasRequired_extends;function require_extends(){return hasRequired_extends||(hasRequired_extends=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)({}).hasOwnProperty.call(i,s)&&(r[s]=i[s])}return r},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(_extends)),_extends.exports}var defineProperty={exports:{}},toPropertyKey={exports:{}},_typeof={exports:{}},hasRequired_typeof;function require_typeof(){return hasRequired_typeof||(hasRequired_typeof=1,function(t){function e(r){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(_typeof)),_typeof.exports}var toPrimitive={exports:{}},hasRequiredToPrimitive;function requireToPrimitive(){return hasRequiredToPrimitive||(hasRequiredToPrimitive=1,function(t){var e=require_typeof().default;function r(n,i){if(e(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var f=s.call(n,i||"default");if(e(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(toPrimitive)),toPrimitive.exports}var hasRequiredToPropertyKey;function requireToPropertyKey(){return hasRequiredToPropertyKey||(hasRequiredToPropertyKey=1,function(t){var e=require_typeof().default,r=requireToPrimitive();function n(i){var s=r(i,"string");return e(s)=="symbol"?s:s+""}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(toPropertyKey)),toPropertyKey.exports}var hasRequiredDefineProperty;function requireDefineProperty(){return hasRequiredDefineProperty||(hasRequiredDefineProperty=1,function(t){var e=requireToPropertyKey();function r(n,i,s){return(i=e(i))in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(defineProperty)),defineProperty.exports}var classCallCheck={exports:{}},hasRequiredClassCallCheck;function requireClassCallCheck(){return hasRequiredClassCallCheck||(hasRequiredClassCallCheck=1,function(t){function e(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(classCallCheck)),classCallCheck.exports}var createClass={exports:{}},hasRequiredCreateClass;function requireCreateClass(){return hasRequiredCreateClass||(hasRequiredCreateClass=1,function(t){var e=requireToPropertyKey();function r(i,s){for(var f=0;f<s.length;f++){var a=s[f];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,e(a.key),a)}}function n(i,s,f){return s&&r(i.prototype,s),f&&r(i,f),Object.defineProperty(i,"prototype",{writable:!1}),i}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(createClass)),createClass.exports}var backendlessRequest$1={exports:{}},backendlessRequest=backendlessRequest$1.exports,hasRequiredBackendlessRequest;function requireBackendlessRequest(){return hasRequiredBackendlessRequest||(hasRequiredBackendlessRequest=1,function(t,e){(function(n,i){t.exports=i()})(typeof self<"u"?self:backendlessRequest,function(){return function(r){var n={};function i(s){if(n[s])return n[s].exports;var f=n[s]={i:s,l:!1,exports:{}};return r[s].call(f.exports,f,f.exports,i),f.l=!0,f.exports}return i.m=r,i.c=n,i.d=function(s,f,a){i.o(s,f)||Object.defineProperty(s,f,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var f=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(f,"a",f),f},i.o=function(s,f){return Object.prototype.hasOwnProperty.call(s,f)},i.p="",i(i.s=3)}([function(r,n,i){(function(s){Object.defineProperty(n,"__esModule",{value:!0}),n.castArray=void 0,n.ensureEncoding=l,n.getFormData=u,n.isStream=n.isObject=n.isNodeJS=n.isFormData=n.isBrowser=void 0,n.normalizeTrailingSlashInPath=_,n.setFormData=y;function f(h){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},f(h)}n.castArray=function(d){return Array.isArray(d)?d:[d]},n.isObject=function(d){return d!=null&&f(d)==="object"},n.isFormData=function(d){if(!d)return!1;var c=u();return d instanceof c?!0:d&&d.constructor&&d.constructor.toString().trim().indexOf("function FormData")===0},n.isStream=function(d){var c=i(6);return d instanceof c.Stream};var a=n.isNodeJS=function(){return typeof s<"u"&&s.versions!=null&&s.versions.node!=null};n.isBrowser=function(){return typeof window<"u"&&typeof window.document<"u"};var o=null;function u(){return o||(a()||typeof FormData>"u"?i(7):FormData)}function y(h){o=h}var w=["%40","%3A","%2F","%23"];function v(h,d){var c=d[0];if(c){var p=h.split(c).map(function(m){return v(m,d.slice(1))});return p.join(c)}return encodeURI(h)}function g(h){return h===decodeURI(h)?v(h,[].concat(w)):h}function b(h){return h.split("/").map(g).join("/")}function l(h){try{var d=new URL(h);return d.origin+b(_(h,d))+d.search}catch{return b(h)}}function _(h,d){var c=d.pathname;h.includes("?")&&(h=h.split("?")[0]);var p=h.endsWith("/");return!p&&c.endsWith("/")?c.slice(0,-1):c}}).call(n,i(5))},function(r,n){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(r,n,i){function s(J){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},s(J)}Object.defineProperty(n,"__esModule",{value:!0}),n.Request=void 0;var f=i(12),a=g(i(13)),o=v(i(14)),u=i(0),y=i(15);function w(J){if(typeof WeakMap!="function")return null;var Q=new WeakMap,W=new WeakMap;return(w=function($){return $?W:Q})(J)}function v(J,Q){if(J&&J.__esModule)return J;if(J===null||s(J)!=="object"&&typeof J!="function")return{default:J};var W=w(Q);if(W&&W.has(J))return W.get(J);var U={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in J)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(J,ee)){var Z=$?Object.getOwnPropertyDescriptor(J,ee):null;Z&&(Z.get||Z.set)?Object.defineProperty(U,ee,Z):U[ee]=J[ee]}return U.default=J,W&&W.set(J,U),U}function g(J){return J&&J.__esModule?J:{default:J}}function b(J,Q){var W=Object.keys(J);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(J);Q&&(U=U.filter(function($){return Object.getOwnPropertyDescriptor(J,$).enumerable})),W.push.apply(W,U)}return W}function l(J){for(var Q=1;Q<arguments.length;Q++){var W=arguments[Q]!=null?arguments[Q]:{};Q%2?b(Object(W),!0).forEach(function(U){_(J,U,W[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(J,Object.getOwnPropertyDescriptors(W)):b(Object(W)).forEach(function(U){Object.defineProperty(J,U,Object.getOwnPropertyDescriptor(W,U))})}return J}function _(J,Q,W){return Q=p(Q),Q in J?Object.defineProperty(J,Q,{value:W,enumerable:!0,configurable:!0,writable:!0}):J[Q]=W,J}function h(J,Q){if(!(J instanceof Q))throw new TypeError("Cannot call a class as a function")}function d(J,Q){for(var W=0;W<Q.length;W++){var U=Q[W];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(J,p(U.key),U)}}function c(J,Q,W){return Q&&d(J.prototype,Q),Object.defineProperty(J,"prototype",{writable:!1}),J}function p(J){var Q=m(J,"string");return s(Q)==="symbol"?Q:String(Q)}function m(J,Q){if(s(J)!=="object"||J===null)return J;var W=J[Symbol.toPrimitive];if(W!==void 0){var U=W.call(J,Q);if(s(U)!=="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(J)}function S(J,Q){if(typeof Q!="function"&&Q!==null)throw new TypeError("Super expression must either be null or a function");J.prototype=Object.create(Q&&Q.prototype,{constructor:{value:J,writable:!0,configurable:!0}}),Object.defineProperty(J,"prototype",{writable:!1}),Q&&E(J,Q)}function E(J,Q){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,$){return U.__proto__=$,U},E(J,Q)}function T(J){var Q=H();return function(){var U=O(J),$;if(Q){var ee=O(this).constructor;$=Reflect.construct(U,arguments,ee)}else $=U.apply(this,arguments);return A(this,$)}}function A(J,Q){if(Q&&(s(Q)==="object"||typeof Q=="function"))return Q;if(Q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(J)}function P(J){if(J===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(J){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(W){return W.__proto__||Object.getPrototypeOf(W)},O(J)}var q="Content-Type",C="request",j="response",V="error",N="done";n.Request=function(J){S(W,J);var Q=T(W);function W(U,$,ee){var Z;return h(this,W),Z=Q.call(this),Z.method=$,Z.path=(0,u.ensureEncoding)(U),Z.body=ee,Z.tags=void 0,Z.unwrap=!0,Z.cacheTTL=0,Z.headers={},Z.queryParams={},Z.encoding="utf8",Z.timeout=0,Z.withCredentials=null,Z}return c(W,[{key:"set",value:function($,ee){if((0,u.isObject)($))for(var Z in $)this.set(Z,$[Z]);else typeof ee<"u"&&(this.headers[$]=ee);return this}},{key:"cacheTags",value:function(){for(var $=arguments.length,ee=new Array($),Z=0;Z<$;Z++)ee[Z]=arguments[Z];return this.tags=ee,this}},{key:"query",value:function($){return Object.assign(this.queryParams,$),this}},{key:"form",value:function($){if($){var ee=W.FormData;if($ instanceof ee)this.body=$;else{var Z=new ee,L=function(B){B&&(0,u.castArray)($[B]).forEach(function(F){F&&F.hasOwnProperty("value")&&F.hasOwnProperty("options")?Z.append(B,F.value,F.options):Z.append(B,F)})};for(var I in $)L(I);this.body=Z}}return this}},{key:"useCache",value:function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15e3;return this.cacheTTL=$,this}},{key:"resetCache",value:function($){return $&&this.tags&&f.cache.deleteByTags(this.tags),this}},{key:"type",value:function($){return this.set(q,$),this}},{key:"unwrapBody",value:function($){return this.unwrap=$,this}},{key:"setEncoding",value:function($){return this.encoding=$,this}},{key:"setWithCredentials",value:function($){return this.withCredentials=$,this}},{key:"setTimeout",value:function($){return this.timeout=$,this}},{key:"send",value:function($){var ee=this;this.emit(C,this);var Z=this.path,L=o.stringify(this.queryParams);if(L&&(Z+="?"+L),this.cacheTTL){var I=f.cache.get(Z);if(I!==void 0)return Promise.resolve(I)}var k=this.headers[q];if(!k&&(0,u.isObject)($)&&!(0,u.isFormData)($)&&this.type("application/json"),$){var B=this.headers[q]==="application/json";$=B&&typeof $!="string"?JSON.stringify($):$}var F=function(x){return ee.unwrap?x.body:x},K=function(x){return ee.cacheTTL&&f.cache.set(Z,x,ee.tags,ee.cacheTTL),x},te=function(x){return ee.tags&&ee.method!=="get"&&f.cache.deleteByTags(ee.tags),x};W.verbose&&console.log(this.method.toUpperCase(),decodeURIComponent(Z),$,this.headers);var M=typeof this.withCredentials=="boolean"?this.withCredentials:W.withCredentials,ne=W.send(Z,this.method.toUpperCase(),this.headers,$,this.encoding,this.timeout,M).then(Y).then(X).then(F).then(K).then(te);return ne.then(function(D){ee.emit(j,D),ee.emit(N,null,D)}).catch(function(D){ee.emit(V,D),ee.emit(N,D)}),ne}},{key:"then",value:function($,ee){return this.promise=this.promise||this.send(this.body),this.promise.then($,ee)}},{key:"catch",value:function($){return this.promise=this.promise||this.send(this.body),this.promise.catch($)}}]),W}(a.default);function Y(J){try{return l(l({},J),{},{body:JSON.parse(J.body)})}catch{return J}}function X(J){if(J.status>=200&&J.status<300)return J;throw new y.ResponseError(J)}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=i(4),f=i(11),a=i(2),o=i(0);Object.defineProperty(a.Request,"FormData",{get:function(){return(0,o.getFormData)()},set:function(y){(0,o.setFormData)(y)}}),a.Request.XMLHttpRequest=typeof XMLHttpRequest<"u"?XMLHttpRequest:void 0,a.Request.send=function(u,y,w,v,g,b,l){var _=typeof a.Request.XMLHttpRequest<"u"?f.sendXmlHttpRequest:s.sendNodeAPIRequest;return _(u,y,w,v,g,b,l)},a.Request.verbose=!1,a.Request.withCredentials=!1,a.Request.methods=["get","post","put","patch","delete"],a.Request.methods.forEach(function(u){a.Request[u]=function(y,w){return new a.Request(y,u,w)}}),n=r.exports=a.Request,n.default=a.Request},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sendNodeAPIRequest=f;var s=i(0);function f(a,o,u,y,w,v,g){return new Promise(function(b,l){var _=i(8).parse(a),h=(0,s.isFormData)(y)&&y,d=_.protocol==="https:",c={host:_.hostname,port:_.port||(d?443:80),path:(0,s.normalizeTrailingSlashInPath)(a,_)+(_.search||""),method:o,headers:u,timeout:v};typeof g=="boolean"&&(c.withCredentials=g);var p=function(){var E=i(1).Buffer,T=i(d?9:10),A=T.request(c,function(P){var H=[],O=[],q=0,C="",j=P.statusCode,V=P.statusMessage,N=P.headers;P.on("data",function(Y){E.isBuffer(Y)?Y.length&&(q+=Y.length,O.push(Y)):H.push(Y)}),P.on("end",function(){q?(C=E.concat(O,q),w!=null&&(C=C.toString(w))):H.length&&(C=H.join()),b({status:j,statusText:V,headers:N,body:C})}),P.on("error",l)});if(A.on("error",l),A.on("timeout",function(){A.destroy(new Error("Connection aborted due to timeout"))}),y){if((0,s.isStream)(y)){y.pipe(A);return}A.write(y)}A.end()};if(h)Object.assign(c.headers,h.getHeaders()),h.getLength(function(S,E){!S&&!isNaN(E)&&(c.headers["content-length"]=E),p()});else{if(y&&!c.headers["content-length"]){var m=i(1).Buffer;c.headers["content-length"]=m.byteLength(y)}p()}})}},function(r,n){var i=r.exports={},s,f;function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=a}catch{s=a}try{typeof clearTimeout=="function"?f=clearTimeout:f=o}catch{f=o}})();function u(c){if(s===setTimeout)return setTimeout(c,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(c,0);try{return s(c,0)}catch{try{return s.call(null,c,0)}catch{return s.call(this,c,0)}}}function y(c){if(f===clearTimeout)return clearTimeout(c);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(c);try{return f(c)}catch{try{return f.call(null,c)}catch{return f.call(this,c)}}}var w=[],v=!1,g,b=-1;function l(){!v||!g||(v=!1,g.length?w=g.concat(w):b=-1,w.length&&_())}function _(){if(!v){var c=u(l);v=!0;for(var p=w.length;p;){for(g=w,w=[];++b<p;)g&&g[b].run();b=-1,p=w.length}g=null,v=!1,y(c)}}i.nextTick=function(c){var p=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)p[m-1]=arguments[m];w.push(new h(c,p)),w.length===1&&!v&&u(_)};function h(c,p){this.fun=c,this.array=p}h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function d(){}i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(c){return[]},i.binding=function(c){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(c){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(r,n){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(r,n){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(r,n){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(r,n){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(r,n){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.sendXmlHttpRequest=f;var s=i(2);function f(o,u,y,w,v,g,b){return new Promise(function(_,h){var d=new s.Request.XMLHttpRequest;d.timeout=g,v||(d.responseType="arraybuffer"),d.open(u.toUpperCase(),o,!0),typeof b=="boolean"&&(d.withCredentials=b),d.onload=function(){var p=a(d.getAllResponseHeaders()),m=d,S=m.status,E=m.statusText,T={status:S,statusText:E,headers:p};v==="utf8"?T.body=d.response||d.responseText:d.response&&(T.body=new Uint8Array(d.response)),_(T),d=null},d.onerror=function(){h(new Error("Network Error")),d=null},d.ontimeout=function(){h(new Error("Connection aborted due to timeout")),d=null},Object.keys(y).forEach(function(c){d.setRequestHeader(c,y[c])}),d.send(w)})}function a(o){var u={};return o&&o.split(`
`).forEach(function(y){var w=y.indexOf(":"),v=y.substr(0,w).trim(),g=y.substr(w+1).trim();v&&(u[v]=u[v]?u[v]+", "+g:g)}),u}},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.cache=void 0;function s(T){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},s(T)}function f(T,A){return u(T)||o(T,A)||w(T,A)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(T,A){var P=T==null?null:typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(P!=null){var H,O,q,C,j=[],V=!0,N=!1;try{if(q=(P=P.call(T)).next,A===0){if(Object(P)!==P)return;V=!1}else for(;!(V=(H=q.call(P)).done)&&(j.push(H.value),j.length!==A);V=!0);}catch(Y){N=!0,O=Y}finally{try{if(!V&&P.return!=null&&(C=P.return(),Object(C)!==C))return}finally{if(N)throw O}}return j}}function u(T){if(Array.isArray(T))return T}function y(T,A){var P=typeof Symbol<"u"&&T[Symbol.iterator]||T["@@iterator"];if(!P){if(Array.isArray(T)||(P=w(T))||A){P&&(T=P);var H=0,O=function(){};return{s:O,n:function(){return H>=T.length?{done:!0}:{done:!1,value:T[H++]}},e:function(N){throw N},f:O}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q=!0,C=!1,j;return{s:function(){P=P.call(T)},n:function(){var N=P.next();return q=N.done,N},e:function(N){C=!0,j=N},f:function(){try{!q&&P.return!=null&&P.return()}finally{if(C)throw j}}}}function w(T,A){if(T){if(typeof T=="string")return v(T,A);var P=Object.prototype.toString.call(T).slice(8,-1);if(P==="Object"&&T.constructor&&(P=T.constructor.name),P==="Map"||P==="Set")return Array.from(T);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return v(T,A)}}function v(T,A){(A==null||A>T.length)&&(A=T.length);for(var P=0,H=new Array(A);P<A;P++)H[P]=T[P];return H}function g(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function b(T,A){for(var P=0;P<A.length;P++){var H=A[P];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(T,_(H.key),H)}}function l(T,A,P){return A&&b(T.prototype,A),Object.defineProperty(T,"prototype",{writable:!1}),T}function _(T){var A=h(T,"string");return s(A)==="symbol"?A:String(A)}function h(T,A){if(s(T)!=="object"||T===null)return T;var P=T[Symbol.toPrimitive];if(P!==void 0){var H=P.call(T,A);if(s(H)!=="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(T)}var d=function(A,P,H){return{value:A,tags:P,ttl:H}},c=function(){return new Date().getTime()},p=function(A,P){var H=A==P;return!H&&A instanceof RegExp&&(H=A.test(P)),!H&&P instanceof RegExp&&(H=P.test(A)),H},m=function(A,P){return!!A.find(function(H){return P.find(function(O){return p(H,O)})})},S=function(){function T(A){g(this,T),this.setFlushInterval(A),this.map=new Map}return l(T,[{key:"setFlushInterval",value:function(P){this.flushInterval=P,this.flushTimer&&(clearInterval(this.flushTimer),delete this.flushTimer)}},{key:"get",value:function(P){var H=this.map.get(P);if(H){if(H.ttl>c())return H.value;this.map.delete(P)}}},{key:"set",value:function(P,H,O,q){this.map.set(P,d(H,O,c()+q)),this.flushInterval&&!this.flushTimer&&(this.flushTimer=setInterval(this.flush.bind(this),this.flushInterval),this.flushTimer.unref&&this.flushTimer.unref())}},{key:"delete",value:function(P){this.map.delete(P)}},{key:"deleteAll",value:function(){var P=y(this.map),H;try{for(P.s();!(H=P.n()).done;){var O=f(H.value,1),q=O[0];this.delete(q)}}catch(C){P.e(C)}finally{P.f()}}},{key:"deleteByTags",value:function(P){var H=y(this.map),O;try{for(H.s();!(O=H.n()).done;){var q=f(O.value,2),C=q[0],j=q[1];j.tags&&m(P,j.tags)&&this.delete(C)}}catch(V){H.e(V)}finally{H.f()}}},{key:"flush",value:function(){var P=c(),H=y(this.map),O;try{for(H.s();!(O=H.n()).done;){var q=f(O.value,2),C=q[0],j=q[1];j.ttl<P&&this.delete(C)}}catch(V){H.e(V)}finally{H.f()}}}]),T}(),E=6e4;n.cache=new S(E)},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function s(w){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(w)}function f(w,v){if(!(w instanceof v))throw new TypeError("Cannot call a class as a function")}function a(w,v){for(var g=0;g<v.length;g++){var b=v[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(w,u(b.key),b)}}function o(w,v,g){return v&&a(w.prototype,v),Object.defineProperty(w,"prototype",{writable:!1}),w}function u(w){var v=y(w,"string");return s(v)==="symbol"?v:String(v)}function y(w,v){if(s(w)!=="object"||w===null)return w;var g=w[Symbol.toPrimitive];if(g!==void 0){var b=g.call(w,v);if(s(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)}n.default=function(){function w(){f(this,w),this.events={}}return o(w,[{key:"on",value:function(g,b){return this.events[g]=this.events[g]||[],this.events[g].push(b),this}},{key:"off",value:function(g,b){return g?this.events[g]&&(b?this.events[g]=this.events[g].filter(function(l){return l!==b}):delete this.events[g]):this.events={},this}},{key:"emit",value:function(g){for(var b=arguments.length,l=new Array(b>1?b-1:0),_=1;_<b;_++)l[_-1]=arguments[_];this.events[g]&&this.events[g].forEach(function(h){return h.apply(void 0,l)})}}]),w}()},function(r,n,i){Object.defineProperty(n,"__esModule",{value:!0}),n.stringify=void 0;var s=i(0);n.stringify=function(a){var o=[];return Object.keys(a).forEach(function(u){var y=a[u];y!==void 0&&(0,s.castArray)(y).forEach(function(w){o.push("".concat(encodeURIComponent(u),"=").concat(encodeURIComponent(w)))})}),o.join("&")}},function(r,n,i){function s(c){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},s(c)}Object.defineProperty(n,"__esModule",{value:!0}),n.ResponseError=void 0;function f(c,p,m){return Object.defineProperty(c,"prototype",{writable:!1}),c}function a(c,p){if(!(c instanceof p))throw new TypeError("Cannot call a class as a function")}function o(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(p&&p.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),p&&_(c,p)}function u(c){var p=b();return function(){var S=h(c),E;if(p){var T=h(this).constructor;E=Reflect.construct(S,arguments,T)}else E=S.apply(this,arguments);return y(this,E)}}function y(c,p){if(p&&(s(p)==="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(c)}function w(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function v(c){var p=typeof Map=="function"?new Map:void 0;return v=function(S){if(S===null||!l(S))return S;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(typeof p<"u"){if(p.has(S))return p.get(S);p.set(S,E)}function E(){return g(S,arguments,h(this).constructor)}return E.prototype=Object.create(S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_(E,S)},v(c)}function g(c,p,m){return b()?g=Reflect.construct.bind():g=function(E,T,A){var P=[null];P.push.apply(P,T);var H=Function.bind.apply(E,P),O=new H;return A&&_(O,A.prototype),O},g.apply(null,arguments)}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(c){return Function.toString.call(c).indexOf("[native code]")!==-1}function _(c,p){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,E){return S.__proto__=E,S},_(c,p)}function h(c){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},h(c)}n.ResponseError=function(c){o(m,c);var p=u(m);function m(S){var E;a(this,m),E=p.call(this);var T=d(S);return E.message=T.message||T,E.code=T.code,E.status=S.status,E.headers=S.headers,E.body=S.body,E}return f(m)}(v(Error));function d(c){return c.status===502?"No connection with server":c.body||"Status Code ".concat(c.status," (").concat(c.statusText,")")}}])})}(backendlessRequest$1)),backendlessRequest$1.exports}var request={},hasRequiredRequest;function requireRequest(){return hasRequiredRequest||(hasRequiredRequest=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireDefineProperty()),n=e(requireClassCallCheck()),i=e(requireCreateClass()),s=e(requireBackendlessRequest());function f(y,w){var v=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);w&&(g=g.filter(function(b){return Object.getOwnPropertyDescriptor(y,b).enumerable})),v.push.apply(v,g)}return v}function a(y){for(var w=1;w<arguments.length;w++){var v=arguments[w]!=null?arguments[w]:{};w%2?f(Object(v),!0).forEach(function(g){(0,r.default)(y,g,v[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(v)):f(Object(v)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(v,g))})}return y}var o={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH"},u=function(){function y(w){(0,n.default)(this,y),this.app=w,this.Methods=o}return(0,i.default)(y,[{key:"send",value:function(v){s.default.verbose=!!this.app.debugMode,s.default.XMLHttpRequest=this.app.XMLHttpRequest;var g=v.method.toLowerCase(),b=v.headers||{},l=this.app.getCurrentUserToken();return l&&(b["user-token"]=l),v.queryString&&(v.url="".concat(v.url,"?").concat(v.queryString)),s.default[g](v.url,v.data).set(b).query(v.query).form(v.form)}},{key:"get",value:function(v){return this.send(a(a({},v),{},{method:o.GET}))}},{key:"post",value:function(v){return this.send(a(a({},v),{},{method:o.POST}))}},{key:"put",value:function(v){return this.send(a(a({},v),{},{method:o.PUT}))}},{key:"delete",value:function(v){return this.send(a(a({},v),{},{method:o.DELETE}))}}]),y}();t.default=u}(request)),request}var urls={},hasRequiredUrls;function requireUrls(){return hasRequiredUrls||(hasRequiredUrls=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function s(f){(0,r.default)(this,s),this.app=f}return(0,n.default)(s,[{key:"root",value:function(){return this.app.appPath}},{key:"appInfo",value:function(){return"".concat(this.root(),"/info")}},{key:"automation",value:function(){return"".concat(this.app.automationPath,"/automation")}},{key:"automationFlow",value:function(){return"".concat(this.automation(),"/flow")}},{key:"automationFlowExecutionContext",value:function(a){return"".concat(this.automation(),"/flow/execution-context/").concat(a)}},{key:"automationFlowTrigger",value:function(){return"".concat(this.automationFlow(),"/trigger")}},{key:"blServices",value:function(){return"".concat(this.root(),"/services")}},{key:"blServiceMethod",value:function(a,o){return"".concat(this.blServices(),"/").concat(a,"/").concat(o)}},{key:"blEvent",value:function(a){return"".concat(this.root(),"/servercode/events/").concat(a)}},{key:"logging",value:function(){return"".concat(this.root(),"/log")}},{key:"loggingLevels",value:function(){return"".concat(this.logging(),"/logger")}},{key:"cache",value:function(){return"".concat(this.root(),"/cache")}},{key:"cacheItem",value:function(a){return"".concat(this.cache(),"/").concat(a)}},{key:"cacheItemExpireIn",value:function(a){return"".concat(this.cacheItem(a),"/expireIn")}},{key:"cacheItemExpireAt",value:function(a){return"".concat(this.cacheItem(a),"/expireAt")}},{key:"cacheItemCheck",value:function(a){return"".concat(this.cacheItem(a),"/check")}},{key:"counters",value:function(){return"".concat(this.root(),"/counters")}},{key:"countersList",value:function(a){return"".concat(this.counters(),"/").concat(a||"*","/list")}},{key:"counter",value:function(a){return"".concat(this.counters(),"/").concat(a)}},{key:"counterAddAndGet",value:function(a){return"".concat(this.counter(a),"/incrementby/get")}},{key:"counterGetAndAdd",value:function(a){return"".concat(this.counter(a),"/get/incrementby")}},{key:"counterIncrementAndGet",value:function(a){return"".concat(this.counter(a),"/increment/get")}},{key:"counterDecrementAndGet",value:function(a){return"".concat(this.counter(a),"/decrement/get")}},{key:"counterGetAndDecrement",value:function(a){return"".concat(this.counter(a),"/get/decrement")}},{key:"counterGetAndIncrement",value:function(a){return"".concat(this.counter(a),"/get/increment")}},{key:"counterCompareAndSet",value:function(a){return"".concat(this.counter(a),"/get/compareandset")}},{key:"counterReset",value:function(a){return"".concat(this.counter(a),"/reset")}},{key:"data",value:function(){return"".concat(this.root(),"/data")}},{key:"dataGrouping",value:function(a){return"".concat(this.data(),"/data-grouping/").concat(a)}},{key:"dataTable",value:function(a){return"".concat(this.data(),"/").concat(a)}},{key:"dataTableUpsert",value:function(a){return"".concat(this.data(),"/").concat(a,"/upsert")}},{key:"dataTableDeepSave",value:function(a){return"".concat(this.data(),"/").concat(a,"/deep-save")}},{key:"dataTableFind",value:function(a){return"".concat(this.dataTable(a),"/find")}},{key:"dataTablePrimaryKey",value:function(a){return"".concat(this.dataTable(a),"/pk")}},{key:"dataTableObject",value:function(a,o){return"".concat(this.dataTable(a),"/").concat(encodeURIComponent(o))}},{key:"dataTableObjectRelation",value:function(a,o,u){return"".concat(this.dataTableObject(a,o),"/").concat(u)}},{key:"dataTableCount",value:function(a){return"".concat(this.dataTable(a),"/count")}},{key:"dataTableProps",value:function(a){return"".concat(this.dataTable(a),"/properties")}},{key:"dataBulkTable",value:function(a){return"".concat(this.data(),"/bulk/").concat(a)}},{key:"dataBulkTableUpsert",value:function(a){return"".concat(this.data(),"/bulkupsert/").concat(a)}},{key:"dataBulkTableDelete",value:function(a){return"".concat(this.dataBulkTable(a),"/delete")}},{key:"dataObjectPermission",value:function(a,o,u){return"".concat(this.dataTable(a),"/permissions/").concat(o,"/").concat(u)}},{key:"dataTableNameById",value:function(a){return"".concat(this.data(),"/").concat(a,"/table-name")}},{key:"transactions",value:function(){return"".concat(this.root(),"/transaction/unit-of-work")}},{key:"dataHives",value:function(){return"".concat(this.root(),"/hive")}},{key:"dataHive",value:function(a){return"".concat(this.dataHives(),"/").concat(a)}},{key:"hiveStore",value:function(a,o){return"".concat(this.dataHive(a),"/").concat(o)}},{key:"messaging",value:function(){return"".concat(this.root(),"/messaging")}},{key:"messagingPush",value:function(){return"".concat(this.messaging(),"/push")}},{key:"messagingPushTemplates",value:function(a){return"".concat(this.messaging(),"/pushtemplates/").concat(a)}},{key:"messagingPushWithTemplate",value:function(a){return"".concat(this.messagingPush(),"/").concat(a)}},{key:"messagingEmail",value:function(){return"".concat(this.messaging(),"/email")}},{key:"messagingChannel",value:function(a){return"".concat(this.messaging(),"/").concat(a)}},{key:"messagingChannels",value:function(){return"".concat(this.messaging(),"/channels")}},{key:"messagingChannelName",value:function(a){return"".concat(this.messagingChannels(),"/").concat(a)}},{key:"messagingMessage",value:function(a){return"".concat(this.messaging(),"/").concat(a)}},{key:"messagingRegistrations",value:function(){return"".concat(this.messaging(),"/registrations")}},{key:"messagingRegistrationDevice",value:function(a){return"".concat(this.messagingRegistrations(),"/").concat(a)}},{key:"emailTemplate",value:function(){return"".concat(this.root(),"/emailtemplate")}},{key:"emailTemplateSend",value:function(){return"".concat(this.emailTemplate(),"/send")}},{key:"commerce",value:function(){return"".concat(this.root(),"/commerce/googleplay")}},{key:"commerceValidate",value:function(a,o,u){return"".concat(this.commerce(),"/validate/").concat(a,"/inapp/").concat(o,"/purchases/").concat(u)}},{key:"commerceSubCancel",value:function(a,o,u){return"".concat(this.commerce(),"/").concat(a,"/subscription/").concat(o,"/purchases/").concat(u,"/cancel")}},{key:"commerceSubStatus",value:function(a,o,u){return"".concat(this.commerce(),"/").concat(a,"/subscription/").concat(o,"/purchases/").concat(u)}},{key:"files",value:function(){return"".concat(this.root(),"/files")}},{key:"filePath",value:function(a){return"".concat(this.files(),"/").concat(a)}},{key:"directoryPath",value:function(a){return"".concat(this.files(),"/").concat(a,"/")}},{key:"fileCopy",value:function(){return"".concat(this.files(),"/copy")}},{key:"fileMove",value:function(){return"".concat(this.files(),"/move")}},{key:"fileRename",value:function(){return"".concat(this.files(),"/rename")}},{key:"filePermissions",value:function(){return"".concat(this.files(),"/permissions")}},{key:"filePermission",value:function(a,o){return"".concat(this.filePermissions(),"/").concat(a,"/").concat(encodeURIComponent(o))}},{key:"fileBinaryPath",value:function(a){return"".concat(this.files(),"/binary/").concat(a)}},{key:"fileAppendPath",value:function(a){return"".concat(this.files(),"/append/").concat(a)}},{key:"fileAppendBinaryPath",value:function(a){return"".concat(this.files(),"/append/binary/").concat(a)}},{key:"users",value:function(){return"".concat(this.root(),"/users")}},{key:"userObject",value:function(a){return"".concat(this.users(),"/").concat(a)}},{key:"userRegister",value:function(){return"".concat(this.users(),"/register")}},{key:"userLogin",value:function(){return"".concat(this.users(),"/login")}},{key:"userLogout",value:function(){return"".concat(this.users(),"/logout")}},{key:"userRoles",value:function(a){return"".concat(this.users(),"/userroles").concat(a?"/".concat(a):"")}},{key:"usersRole",value:function(a){return"".concat(this.users(),"/role/").concat(a)}},{key:"userRoleOperation",value:function(a){return"".concat(this.users(),"/").concat(a)}},{key:"userClassProps",value:function(){return"".concat(this.users(),"/userclassprops")}},{key:"userRestorePassword",value:function(a){return"".concat(this.users(),"/restorepassword/").concat(encodeURIComponent(a))}},{key:"userTokenCheck",value:function(a){return"".concat(this.users(),"/isvalidusertoken/").concat(a)}},{key:"userVerifyPassowrd",value:function(){return"".concat(this.users(),"/verifypassowrd")}},{key:"userResendConfirmation",value:function(a){return"".concat(this.users(),"/resendconfirmation/").concat(a)}},{key:"userCreateConfirmationURL",value:function(a){return"".concat(this.users(),"/createEmailConfirmationURL/").concat(a)}},{key:"userSocial",value:function(){return"".concat(this.users(),"/social")}},{key:"userSocialOAuth",value:function(a){return"".concat(this.userSocial(),"/oauth/").concat(a.toLowerCase(),"/request_url")}},{key:"userSocialLogin",value:function(a){return"".concat(this.userSocial(),"/").concat(a.toLowerCase(),"/sdk/login")}},{key:"userOAuthLogin",value:function(a){return"".concat(this.userSocial(),"/").concat(a.toLowerCase(),"/login")}},{key:"userAuthorizationURL",value:function(a){return"".concat(this.users(),"/oauth/").concat(a.toLowerCase(),"/request_url")}},{key:"guestLogin",value:function(){return"".concat(this.users(),"/register/guest")}},{key:"userStatus",value:function(a){return"".concat(this.userObject(a),"/status")}},{key:"management",value:function(){return"".concat(this.root(),"/management")}},{key:"managementData",value:function(){return"".concat(this.management(),"/data")}},{key:"managementDataTable",value:function(){return"".concat(this.managementData(),"/table")}}]),s}();t.default=i}(urls)),urls}var utils$3={},hasRequiredUtils$3;function requireUtils$3(){return hasRequiredUtils$3||(hasRequiredUtils$3=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(require_typeof()),n={isBrowser:i(),isLocalStorageSupported:s(),globalScope:(typeof self>"u"?"undefined":(0,r.default)(self))==="object"&&self.self===self&&self||(typeof commonjsGlobal$1>"u"?"undefined":(0,r.default)(commonjsGlobal$1))==="object"&&commonjsGlobal$1.global===commonjsGlobal$1&&commonjsGlobal$1,castArray:function(o){return Array.isArray(o)?o:typeof o>"u"?[]:[o]},isCustomClassInstance:function(o){return!o||(0,r.default)(o)!=="object"||Array.isArray(o)?!1:o.constructor!==Object},getClassName:function(o){if(o&&o.className)return o.className;if(typeof o=="function"&&o.name)return o.name;if(o&&(0,r.default)(o)==="object"&&!Array.isArray(o)){if(o.___class)return o.___class;if(o.constructor!==Object)return n.getClassName(o.constructor)}return null},uuid:function(){var o=function(){return Math.random().toString(16).slice(-4).toUpperCase()},u=function(){return"".concat(o()).concat(o())},y=function(){return"".concat(o()).concat(o()).concat(o())};return"".concat(u(),"-").concat(o(),"-").concat(o(),"-").concat(o(),"-").concat(y())},isObject:function(o){return o!=null&&o.constructor.name==="Object"}};function i(){return(typeof self>"u"?"undefined":(0,r.default)(self))==="object"&&self.self===self&&(typeof window>"u"?"undefined":(0,r.default)(window))==="object"&&window===self}function s(){try{if(i()&&window.localStorage)return localStorage.setItem("localStorageTest",!0),localStorage.removeItem("localStorageTest"),!0}catch{}return!1}var f=n;t.default=f}(utils$3)),utils$3}var expression={},hasRequiredExpression;function requireExpression(){return hasRequiredExpression||(hasRequiredExpression=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function s(f){if((0,r.default)(this,s),!f||typeof f!="string")throw new Error("The Backendless.Expression class can be initialized with non empty string value only");this.value=f}return(0,n.default)(s,[{key:"toJSON",value:function(){return{___class:"BackendlessExpression",value:this.value}}}]),s}();t.default=i}(expression)),expression}var logging={},regeneratorRuntime$1={exports:{}},hasRequiredRegeneratorRuntime;function requireRegeneratorRuntime(){return hasRequiredRegeneratorRuntime||(hasRequiredRegeneratorRuntime=1,function(t){var e=require_typeof().default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var n,i={},s=Object.prototype,f=s.hasOwnProperty,a=Object.defineProperty||function(X,J,Q){X[J]=Q.value},o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",y=o.asyncIterator||"@@asyncIterator",w=o.toStringTag||"@@toStringTag";function v(X,J,Q){return Object.defineProperty(X,J,{value:Q,enumerable:!0,configurable:!0,writable:!0}),X[J]}try{v({},"")}catch{v=function(Q,W,U){return Q[W]=U}}function g(X,J,Q,W){var U=J&&J.prototype instanceof p?J:p,$=Object.create(U.prototype),ee=new N(W||[]);return a($,"_invoke",{value:q(X,Q,ee)}),$}function b(X,J,Q){try{return{type:"normal",arg:X.call(J,Q)}}catch(W){return{type:"throw",arg:W}}}i.wrap=g;var l="suspendedStart",_="suspendedYield",h="executing",d="completed",c={};function p(){}function m(){}function S(){}var E={};v(E,u,function(){return this});var T=Object.getPrototypeOf,A=T&&T(T(Y([])));A&&A!==s&&f.call(A,u)&&(E=A);var P=S.prototype=p.prototype=Object.create(E);function H(X){["next","throw","return"].forEach(function(J){v(X,J,function(Q){return this._invoke(J,Q)})})}function O(X,J){function Q(U,$,ee,Z){var L=b(X[U],X,$);if(L.type!=="throw"){var I=L.arg,k=I.value;return k&&e(k)=="object"&&f.call(k,"__await")?J.resolve(k.__await).then(function(B){Q("next",B,ee,Z)},function(B){Q("throw",B,ee,Z)}):J.resolve(k).then(function(B){I.value=B,ee(I)},function(B){return Q("throw",B,ee,Z)})}Z(L.arg)}var W;a(this,"_invoke",{value:function($,ee){function Z(){return new J(function(L,I){Q($,ee,L,I)})}return W=W?W.then(Z,Z):Z()}})}function q(X,J,Q){var W=l;return function(U,$){if(W===h)throw Error("Generator is already running");if(W===d){if(U==="throw")throw $;return{value:n,done:!0}}for(Q.method=U,Q.arg=$;;){var ee=Q.delegate;if(ee){var Z=C(ee,Q);if(Z){if(Z===c)continue;return Z}}if(Q.method==="next")Q.sent=Q._sent=Q.arg;else if(Q.method==="throw"){if(W===l)throw W=d,Q.arg;Q.dispatchException(Q.arg)}else Q.method==="return"&&Q.abrupt("return",Q.arg);W=h;var L=b(X,J,Q);if(L.type==="normal"){if(W=Q.done?d:_,L.arg===c)continue;return{value:L.arg,done:Q.done}}L.type==="throw"&&(W=d,Q.method="throw",Q.arg=L.arg)}}}function C(X,J){var Q=J.method,W=X.iterator[Q];if(W===n)return J.delegate=null,Q==="throw"&&X.iterator.return&&(J.method="return",J.arg=n,C(X,J),J.method==="throw")||Q!=="return"&&(J.method="throw",J.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),c;var U=b(W,X.iterator,J.arg);if(U.type==="throw")return J.method="throw",J.arg=U.arg,J.delegate=null,c;var $=U.arg;return $?$.done?(J[X.resultName]=$.value,J.next=X.nextLoc,J.method!=="return"&&(J.method="next",J.arg=n),J.delegate=null,c):$:(J.method="throw",J.arg=new TypeError("iterator result is not an object"),J.delegate=null,c)}function j(X){var J={tryLoc:X[0]};1 in X&&(J.catchLoc=X[1]),2 in X&&(J.finallyLoc=X[2],J.afterLoc=X[3]),this.tryEntries.push(J)}function V(X){var J=X.completion||{};J.type="normal",delete J.arg,X.completion=J}function N(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(j,this),this.reset(!0)}function Y(X){if(X||X===""){var J=X[u];if(J)return J.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var Q=-1,W=function U(){for(;++Q<X.length;)if(f.call(X,Q))return U.value=X[Q],U.done=!1,U;return U.value=n,U.done=!0,U};return W.next=W}}throw new TypeError(e(X)+" is not iterable")}return m.prototype=S,a(P,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:m,configurable:!0}),m.displayName=v(S,w,"GeneratorFunction"),i.isGeneratorFunction=function(X){var J=typeof X=="function"&&X.constructor;return!!J&&(J===m||(J.displayName||J.name)==="GeneratorFunction")},i.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,S):(X.__proto__=S,v(X,w,"GeneratorFunction")),X.prototype=Object.create(P),X},i.awrap=function(X){return{__await:X}},H(O.prototype),v(O.prototype,y,function(){return this}),i.AsyncIterator=O,i.async=function(X,J,Q,W,U){U===void 0&&(U=Promise);var $=new O(g(X,J,Q,W),U);return i.isGeneratorFunction(J)?$:$.next().then(function(ee){return ee.done?ee.value:$.next()})},H(P),v(P,w,"Generator"),v(P,u,function(){return this}),v(P,"toString",function(){return"[object Generator]"}),i.keys=function(X){var J=Object(X),Q=[];for(var W in J)Q.push(W);return Q.reverse(),function U(){for(;Q.length;){var $=Q.pop();if($ in J)return U.value=$,U.done=!1,U}return U.done=!0,U}},i.values=Y,N.prototype={constructor:N,reset:function(J){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(V),!J)for(var Q in this)Q.charAt(0)==="t"&&f.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=n)},stop:function(){this.done=!0;var J=this.tryEntries[0].completion;if(J.type==="throw")throw J.arg;return this.rval},dispatchException:function(J){if(this.done)throw J;var Q=this;function W(I,k){return ee.type="throw",ee.arg=J,Q.next=I,k&&(Q.method="next",Q.arg=n),!!k}for(var U=this.tryEntries.length-1;U>=0;--U){var $=this.tryEntries[U],ee=$.completion;if($.tryLoc==="root")return W("end");if($.tryLoc<=this.prev){var Z=f.call($,"catchLoc"),L=f.call($,"finallyLoc");if(Z&&L){if(this.prev<$.catchLoc)return W($.catchLoc,!0);if(this.prev<$.finallyLoc)return W($.finallyLoc)}else if(Z){if(this.prev<$.catchLoc)return W($.catchLoc,!0)}else{if(!L)throw Error("try statement without catch or finally");if(this.prev<$.finallyLoc)return W($.finallyLoc)}}}},abrupt:function(J,Q){for(var W=this.tryEntries.length-1;W>=0;--W){var U=this.tryEntries[W];if(U.tryLoc<=this.prev&&f.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var $=U;break}}$&&(J==="break"||J==="continue")&&$.tryLoc<=Q&&Q<=$.finallyLoc&&($=null);var ee=$?$.completion:{};return ee.type=J,ee.arg=Q,$?(this.method="next",this.next=$.finallyLoc,c):this.complete(ee)},complete:function(J,Q){if(J.type==="throw")throw J.arg;return J.type==="break"||J.type==="continue"?this.next=J.arg:J.type==="return"?(this.rval=this.arg=J.arg,this.method="return",this.next="end"):J.type==="normal"&&Q&&(this.next=Q),c},finish:function(J){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var W=this.tryEntries[Q];if(W.finallyLoc===J)return this.complete(W.completion,W.afterLoc),V(W),c}},catch:function(J){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var W=this.tryEntries[Q];if(W.tryLoc===J){var U=W.completion;if(U.type==="throw"){var $=U.arg;V(W)}return $}}throw Error("illegal catch attempt")},delegateYield:function(J,Q,W){return this.delegate={iterator:Y(J),resultName:Q,nextLoc:W},this.method==="next"&&(this.arg=n),c}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(regeneratorRuntime$1)),regeneratorRuntime$1.exports}var regenerator,hasRequiredRegenerator;function requireRegenerator(){if(hasRequiredRegenerator)return regenerator;hasRequiredRegenerator=1;var t=requireRegeneratorRuntime()();regenerator=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}return regenerator}var toConsumableArray={exports:{}},arrayWithoutHoles={exports:{}},arrayLikeToArray={exports:{}},hasRequiredArrayLikeToArray;function requireArrayLikeToArray(){return hasRequiredArrayLikeToArray||(hasRequiredArrayLikeToArray=1,function(t){function e(r,n){(n==null||n>r.length)&&(n=r.length);for(var i=0,s=Array(n);i<n;i++)s[i]=r[i];return s}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(arrayLikeToArray)),arrayLikeToArray.exports}var hasRequiredArrayWithoutHoles;function requireArrayWithoutHoles(){return hasRequiredArrayWithoutHoles||(hasRequiredArrayWithoutHoles=1,function(t){var e=requireArrayLikeToArray();function r(n){if(Array.isArray(n))return e(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(arrayWithoutHoles)),arrayWithoutHoles.exports}var iterableToArray={exports:{}},hasRequiredIterableToArray;function requireIterableToArray(){return hasRequiredIterableToArray||(hasRequiredIterableToArray=1,function(t){function e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(iterableToArray)),iterableToArray.exports}var unsupportedIterableToArray={exports:{}},hasRequiredUnsupportedIterableToArray;function requireUnsupportedIterableToArray(){return hasRequiredUnsupportedIterableToArray||(hasRequiredUnsupportedIterableToArray=1,function(t){var e=requireArrayLikeToArray();function r(n,i){if(n){if(typeof n=="string")return e(n,i);var s={}.toString.call(n).slice(8,-1);return s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set"?Array.from(n):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(n,i):void 0}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(unsupportedIterableToArray)),unsupportedIterableToArray.exports}var nonIterableSpread={exports:{}},hasRequiredNonIterableSpread;function requireNonIterableSpread(){return hasRequiredNonIterableSpread||(hasRequiredNonIterableSpread=1,function(t){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(nonIterableSpread)),nonIterableSpread.exports}var hasRequiredToConsumableArray;function requireToConsumableArray(){return hasRequiredToConsumableArray||(hasRequiredToConsumableArray=1,function(t){var e=requireArrayWithoutHoles(),r=requireIterableToArray(),n=requireUnsupportedIterableToArray(),i=requireNonIterableSpread();function s(f){return e(f)||r(f)||n(f)||i()}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}(toConsumableArray)),toConsumableArray.exports}var asyncToGenerator={exports:{}},hasRequiredAsyncToGenerator;function requireAsyncToGenerator(){return hasRequiredAsyncToGenerator||(hasRequiredAsyncToGenerator=1,function(t){function e(n,i,s,f,a,o,u){try{var y=n[o](u),w=y.value}catch(v){return void s(v)}y.done?i(w):Promise.resolve(w).then(f,a)}function r(n){return function(){var i=this,s=arguments;return new Promise(function(f,a){var o=n.apply(i,s);function u(w){e(o,f,a,u,y,"next",w)}function y(w){e(o,f,a,u,y,"throw",w)}u(void 0)})}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(asyncToGenerator)),asyncToGenerator.exports}var logger={},hasRequiredLogger;function requireLogger(){return hasRequiredLogger||(hasRequiredLogger=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i={off:0,fatal:1,error:2,warn:3,info:4,debug:5,trace:6,all:6},s=function(){function f(a,o){(0,r.default)(this,f),this.name=a,this.logging=o}return(0,n.default)(f,[{key:"debug",value:function(o){return this.log("DEBUG",o)}},{key:"info",value:function(o){return this.log("INFO",o)}},{key:"warn",value:function(o,u){return this.log("WARN",o,u)}},{key:"error",value:function(o,u){return this.log("ERROR",o,u)}},{key:"fatal",value:function(o,u){return this.log("FATAL",o,u)}},{key:"trace",value:function(o){return this.log("TRACE",o)}},{key:"log",value:function(o,u,y){if(this.min(o))return this.logging.push(this.name,o,u,y)}},{key:"min",value:function(o){o=o.toLowerCase();var u=this.logging.globalLevel,y=this.logging.levels[this.name];return u&&i[u.toLowerCase()]<i[o]?!1:y?i[y.toLowerCase()]>=i[o]:!0}}]),f}();t.default=s}(logger)),logger}var hasRequiredLogging;function requireLogging(){return hasRequiredLogging||(hasRequiredLogging=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireToConsumableArray()),i=e(requireAsyncToGenerator()),s=e(requireClassCallCheck()),f=e(requireCreateClass()),a=e(requireLogger()),o="Global logger",u=function(){function w(v){(0,s.default)(this,w),this.app=v,this.reset(),v.loggingConfig&&this.setConfig(v.loggingConfig)}return(0,f.default)(w,[{key:"setConfig",value:function(g){g.levels&&(this.levels=g.levels),g.globalLevel&&(this.globalLevel=g.globalLevel),g.loadLevels&&this.loadLoggingLevels()}},{key:"reset",value:function(){this.levels={},this.globalLevel="all",this.loggers={},this.messages=[],this.numOfMessages=10,this.timeFrequency=1,this.messagesLimit=1e3}},{key:"loadLoggingLevels",value:function(){var g=this;this.app.appInfoPromise().then(function(b){var l=b.loggers,_={};l.forEach(function(d){_[d.name]=d.level});var h=_[o];g.setConfig({loggers:_,globalLevel:h})}).catch(function(b){console.error("Could not load logging levels: ",b)})}},{key:"getLogger",value:function(g){if(!g||typeof g!="string")throw new Error("Logger Name must be provided and must be a string.");return this.loggers[g]||(this.loggers[g]=new a.default(g,this)),this.loggers[g]}},{key:"flush",value:function(){var v=(0,i.default)(r.default.mark(function b(){var l=this,_;return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return!this.flushRequest&&this.messages.length&&(this.stopFlushInterval(),_=(0,n.default)(this.messages),this.messages=[],this.flushRequest=this.app.request.put({url:this.app.urls.logging(),data:_}).catch(function(c){throw l.messages=[].concat((0,n.default)(_),(0,n.default)(l.messages)),l.checkMessagesLimit(),c}).finally(function(){return delete l.flushRequest})),d.abrupt("return",this.flushRequest);case 2:case"end":return d.stop()}},b,this)}));function g(){return v.apply(this,arguments)}return g}()},{key:"push",value:function(g,b,l,_){this.messages.push({logger:g,message:y(l),exception:_,"log-level":b,timestamp:Date.now()}),this.checkMessagesLen()}},{key:"checkMessagesLen",value:function(){var g=this;this.checkMessagesLenTimer&&clearTimeout(this.checkMessagesLenTimer),this.checkMessagesLenTimer=setTimeout(function(){g.messages.length>=g.numOfMessages?g.flush():g.startFlushInterval()},0)}},{key:"checkMessagesLimit",value:function(){this.messages.length>this.messagesLimit&&(this.messages=this.messages.slice(this.messages.length-this.messagesLimit))}},{key:"startFlushInterval",value:function(){var g=this;this.flushInterval||(this.flushInterval=setTimeout(function(){return g.flush()},this.timeFrequency*1e3))}},{key:"stopFlushInterval",value:function(){this.flushInterval&&(clearTimeout(this.flushInterval),delete this.flushInterval)}},{key:"setLogReportingPolicy",value:function(g,b){b!==void 0&&this.timeFrequency!==b&&this.stopFlushInterval(),g>this.messagesLimit&&(this.messagesLimit=g),this.numOfMessages=g,this.timeFrequency=b,this.checkMessagesLen()}},{key:"setMessagesLimit",value:function(g){this.messagesLimit=g,this.checkMessagesLimit()}}]),w}();t.default=u;function y(w){return typeof w=="string"?w:typeof w>"u"?"undefined":typeof w=="function"?Object.prototype.toString.call(w):JSON.stringify(w)}}(logging)),logging}var counters={},counter={},hasRequiredCounter;function requireCounter(){return hasRequiredCounter||(hasRequiredCounter=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function s(f,a){if((0,r.default)(this,s),!f||typeof f!="string")throw new Error("Counter Name must be non empty String");this.name=f,this.counters=a}return(0,n.default)(s,[{key:"incrementAndGet",value:function(){return this.counters.incrementAndGet(this.name)}},{key:"getAndIncrement",value:function(){return this.counters.getAndIncrement(this.name)}},{key:"decrementAndGet",value:function(){return this.counters.decrementAndGet(this.name)}},{key:"getAndDecrement",value:function(){return this.counters.getAndDecrement(this.name)}},{key:"reset",value:function(){return this.counters.reset(this.name)}},{key:"get",value:function(){return this.counters.get(this.name)}},{key:"addAndGet",value:function(a){return this.counters.addAndGet(this.name,a)}},{key:"getAndAdd",value:function(a){return this.counters.getAndAdd(this.name,a)}},{key:"compareAndSet",value:function(a,o){return this.counters.compareAndSet(this.name,a,o)}}]),s}();t.default=i}(counter)),counter}var hasRequiredCounters;function requireCounters(){return hasRequiredCounters||(hasRequiredCounters=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=e(requireCounter()),a=function(){function o(u){(0,i.default)(this,o),this.app=u}return(0,s.default)(o,[{key:"of",value:function(y){return new f.default(y,this)}},{key:"list",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(v!=null&&typeof v!="string")){b.next=2;break}throw new Error("Counters Pattern can be a string only");case 2:return b.abrupt("return",this.app.request.get({url:this.app.urls.countersList(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"incrementAndGet",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.put({url:this.app.urls.counterIncrementAndGet(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"getAndIncrement",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.put({url:this.app.urls.counterGetAndIncrement(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"decrementAndGet",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.put({url:this.app.urls.counterDecrementAndGet(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"getAndDecrement",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.put({url:this.app.urls.counterGetAndDecrement(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"reset",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.put({url:this.app.urls.counterReset(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"get",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.get({url:this.app.urls.counter(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"addAndGet",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:if(typeof g=="number"){l.next=4;break}throw new Error("Counter Value must be a number.");case 4:return l.abrupt("return",this.app.request.put({url:this.app.urls.counterAddAndGet(v),query:{value:g}}));case 5:case"end":return l.stop()}},w,this)}));function y(w,v){return u.apply(this,arguments)}return y}()},{key:"getAndAdd",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:if(typeof g=="number"){l.next=4;break}throw new Error("Counter Value must be a number.");case 4:return l.abrupt("return",this.app.request.put({url:this.app.urls.counterGetAndAdd(v),query:{value:g}}));case 5:case"end":return l.stop()}},w,this)}));function y(w,v){return u.apply(this,arguments)}return y}()},{key:"compareAndSet",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(!v||typeof v!="string")){_.next=2;break}throw new Error("Counter Name must be provided and must be a string.");case 2:if(typeof g=="number"){_.next=4;break}throw new Error("Counter Expected Value must be a number.");case 4:if(typeof b=="number"){_.next=6;break}throw new Error("Counter Updated Value must be a number.");case 6:return _.abrupt("return",this.app.request.put({url:this.app.urls.counterCompareAndSet(v),query:{expected:g,updatedvalue:b}}));case 7:case"end":return _.stop()}},w,this)}));function y(w,v,g){return u.apply(this,arguments)}return y}()}]),o}();t.default=a}(counters)),counters}var cache={},hasRequiredCache;function requireCache(){return hasRequiredCache||(hasRequiredCache=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=e(requireUtils$3()),a=function(){function o(u){(0,i.default)(this,o),this.app=u,this.parsers={}}return(0,s.default)(o,[{key:"setObjectFactory",value:function(y,w){this.parsers[y]=w}},{key:"parseItem",value:function(y){var w=y&&y.___class;if(w){var v=this.parsers[w];v&&(y=new v(y))}return y}},{key:"stringifyItem",value:function(y){return f.default.isCustomClassInstance(y)&&(y.___class=y.___class||f.default.getClassName(y)),JSON.stringify(y)}},{key:"put",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(!v||typeof v!="string")){_.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:if(!(b&&(typeof b!="number"||b<0))){_.next=4;break}throw new Error("Cache TimeToLive must be a positive number.");case 4:return _.abrupt("return",this.app.request.put({url:this.app.urls.cacheItem(v),query:{timeout:b},headers:{"Content-Type":"application/json"},data:this.stringifyItem(g)}));case 5:case"end":return _.stop()}},w,this)}));function y(w,v,g){return u.apply(this,arguments)}return y}()},{key:"get",value:function(){var u=(0,n.default)(r.default.mark(function w(v){var g=this;return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:return l.abrupt("return",this.app.request.get({url:this.app.urls.cacheItem(v)}).then(function(_){return g.parseItem(_)}));case 3:case"end":return l.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"remove",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.delete({url:this.app.urls.cacheItem(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"contains",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:return b.abrupt("return",this.app.request.get({url:this.app.urls.cacheItemCheck(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"expireIn",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:if(!(typeof g!="number"||g<=0)){l.next=4;break}throw new Error("Cache Expiration must be provided and must be a number of seconds.");case 4:return l.abrupt("return",this.app.request.put({url:this.app.urls.cacheItemExpireIn(v),query:{timeout:g},data:{}}));case 5:case"end":return l.stop()}},w,this)}));function y(w,v){return u.apply(this,arguments)}return y}()},{key:"expireAt",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error("Cache Key must be provided and must be a string.");case 2:if(!(g instanceof Date)){l.next=6;break}g=g.getTime(),l.next=8;break;case 6:if(!(typeof g!="number"||g<=0)){l.next=8;break}throw new Error("Cache Expiration must be provided and must be a timestamp or an instance of Date.");case 8:return l.abrupt("return",this.app.request.put({url:this.app.urls.cacheItemExpireAt(v),query:{timestamp:g},data:{}}));case 9:case"end":return l.stop()}},w,this)}));function y(w,v){return u.apply(this,arguments)}return y}()}]),o}();t.default=a}(cache)),cache}var commerce={},hasRequiredCommerce;function requireCommerce(){return hasRequiredCommerce||(hasRequiredCommerce=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=function(){function a(o){(0,i.default)(this,a),this.app=o}return(0,s.default)(a,[{key:"validatePlayPurchase",value:function(){var o=(0,n.default)(r.default.mark(function y(w,v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!w||typeof w!="string")){l.next=2;break}throw new Error("Package Name must be provided and must be a string.");case 2:if(!(!v||typeof v!="string")){l.next=4;break}throw new Error("Product Id must be provided and must be a string.");case 4:if(!(!g||typeof g!="string")){l.next=6;break}throw new Error("Token must be provided and must be a string.");case 6:return l.abrupt("return",this.app.request.get({url:this.app.urls.commerceValidate(w,v,g)}));case 7:case"end":return l.stop()}},y,this)}));function u(y,w,v){return o.apply(this,arguments)}return u}()},{key:"cancelPlaySubscription",value:function(){var o=(0,n.default)(r.default.mark(function y(w,v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!w||typeof w!="string")){l.next=2;break}throw new Error("Package Name must be provided and must be a string.");case 2:if(!(!v||typeof v!="string")){l.next=4;break}throw new Error("Subscription Id must be provided and must be a string.");case 4:if(!(!g||typeof g!="string")){l.next=6;break}throw new Error("Token must be provided and must be a string.");case 6:return l.abrupt("return",this.app.request.post({url:this.app.urls.commerceSubCancel(w,v,g)}));case 7:case"end":return l.stop()}},y,this)}));function u(y,w,v){return o.apply(this,arguments)}return u}()},{key:"getPlaySubscriptionStatus",value:function(){var o=(0,n.default)(r.default.mark(function y(w,v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!w||typeof w!="string")){l.next=2;break}throw new Error("Package Name must be provided and must be a string.");case 2:if(!(!v||typeof v!="string")){l.next=4;break}throw new Error("Subscription Id must be provided and must be a string.");case 4:if(!(!g||typeof g!="string")){l.next=6;break}throw new Error("Token must be provided and must be a string.");case 6:return l.abrupt("return",this.app.request.get({url:this.app.urls.commerceSubStatus(w,v,g)}));case 7:case"end":return l.stop()}},y,this)}));function u(y,w,v){return o.apply(this,arguments)}return u}()}]),a}();t.default=f}(commerce)),commerce}var users={},utils$2={},hasRequiredUtils$2;function requireUtils$2(){if(hasRequiredUtils$2)return utils$2;hasRequiredUtils$2=1,Object.defineProperty(utils$2,"__esModule",{value:!0}),utils$2.UsersUtils=void 0;var t={getClientUserLocale:function(){if(!(typeof navigator>"u")){var r="";return navigator.languages&&navigator.languages.length?r=navigator.languages[0]:r=navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"",r.slice(0,2).toLowerCase()}}};return utils$2.UsersUtils=t,utils$2}var user={},hasRequiredUser;function requireUser(){return hasRequiredUser||(hasRequiredUser=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function s(f){var a=this;(0,r.default)(this,s),f=f||{},Object.keys(f).map(function(o){a[o]=f[o]}),this.___class=s.className}return(0,n.default)(s,null,[{key:"className",get:function(){return"Users"}}]),s}();t.default=i,i.prototype.___class=i.className}(user)),user}var roles={},dataQueryBuilder={},hasRequiredDataQueryBuilder;function requireDataQueryBuilder(){return hasRequiredDataQueryBuilder||(hasRequiredDataQueryBuilder=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PAGING_DEFAULTS=void 0;var r=e(requireDefineProperty()),n=e(requireClassCallCheck()),i=e(requireCreateClass()),s=e(requireUtils$3());function f(w,v){var g=Object.keys(w);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(w);v&&(b=b.filter(function(l){return Object.getOwnPropertyDescriptor(w,l).enumerable})),g.push.apply(g,b)}return g}function a(w){for(var v=1;v<arguments.length;v++){var g=arguments[v]!=null?arguments[v]:{};v%2?f(Object(g),!0).forEach(function(b){(0,r.default)(w,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(g)):f(Object(g)).forEach(function(b){Object.defineProperty(w,b,Object.getOwnPropertyDescriptor(g,b))})}return w}var o={pageSize:10,offset:0};t.PAGING_DEFAULTS=o;var u=function(){function w(){(0,n.default)(this,w),this.offset=o.offset,this.pageSize=o.pageSize,this.sortBy=null,this.groupBy=null,this.properties=null,this.excludeProps=null,this.whereClause=null,this.havingClause=null,this.relations=null,this.relationsDepth=null,this.relationsPageSize=null,this.distinct=!1}return(0,i.default)(w,[{key:"setPageSize",value:function(g){if(g<=0)throw new Error("Page size must be a positive value.");return this.pageSize=g,this}},{key:"getPageSize",value:function(){return this.pageSize}},{key:"setOffset",value:function(g){if(g<0)throw new Error("Offset cannot have a negative value.");return this.offset=g,this}},{key:"getOffset",value:function(){return this.offset}},{key:"prepareNextPage",value:function(){return this.setOffset(this.offset+this.pageSize),this}},{key:"preparePreviousPage",value:function(){return this.setOffset(Math.max(this.offset-this.pageSize,0)),this}},{key:"getProperties",value:function(){return this.properties}},{key:"setProperties",value:function(g){return this.properties=s.default.castArray(g),this}},{key:"addProperty",value:function(g){return this.properties=this.properties||[],this.properties.push(g),this}},{key:"addProperties",value:function(){for(var g=this,b=arguments.length,l=new Array(b),_=0;_<b;_++)l[_]=arguments[_];return l.forEach(function(h){s.default.castArray(h).forEach(function(d){return g.addProperty(d)})}),this}},{key:"addAllProperties",value:function(){return this.addProperty("*"),this}},{key:"excludeProperty",value:function(g){return this.excludeProps=this.excludeProps||[],this.excludeProps.push(g),this}},{key:"excludeProperties",value:function(){for(var g=this,b=arguments.length,l=new Array(b),_=0;_<b;_++)l[_]=arguments[_];return l.forEach(function(h){s.default.castArray(h).forEach(function(d){return g.excludeProperty(d)})}),this}},{key:"getExcludeProperties",value:function(){return this.excludeProps}},{key:"getWhereClause",value:function(){return this.whereClause}},{key:"setWhereClause",value:function(g){return this.whereClause=g,this}},{key:"getHavingClause",value:function(){return this.havingClause}},{key:"setHavingClause",value:function(g){return this.havingClause=g,this}},{key:"getSortBy",value:function(){return this.sortBy}},{key:"setSortBy",value:function(g){return this.sortBy=s.default.castArray(g),this}},{key:"getGroupBy",value:function(){return this.groupBy}},{key:"setGroupBy",value:function(g){return this.groupBy=s.default.castArray(g),this}},{key:"getRelated",value:function(){return this.relations}},{key:"setRelated",value:function(g){return this.relations=s.default.castArray(g),this}},{key:"addRelated",value:function(g){return this.relations=(this.relations||[]).concat(g),this}},{key:"setRelationsDepth",value:function(g){return this.relationsDepth=g,this}},{key:"getRelationsDepth",value:function(){return this.relationsDepth}},{key:"setRelationsPageSize",value:function(g){return this.relationsPageSize=g,this}},{key:"getRelationsPageSize",value:function(){return this.relationsPageSize}},{key:"setDistinct",value:function(g){return this.distinct=!!g,this}},{key:"getDistinct",value:function(){return this.distinct}},{key:"setFileReferencePrefix",value:function(g){return this.fileReferencePrefix=g,this}},{key:"getFileReferencePrefix",value:function(){return this.fileReferencePrefix}},{key:"toJSON",value:function(){return{pageSize:this.pageSize,offset:this.offset,properties:this.properties,excludeProps:this.excludeProps,where:this.whereClause,having:this.havingClause,sortBy:this.sortBy,groupBy:this.groupBy,relations:this.relations,relationsDepth:this.relationsDepth,relationsPageSize:this.relationsPageSize,distinct:this.distinct,fileReferencePrefix:this.fileReferencePrefix}}}],[{key:"create",value:function(){return new this}},{key:"toRequestBody",value:function(g){var b=g instanceof w?g.toJSON():g?a({},g):{};return Object.keys(b).forEach(function(l){Array.isArray(b[l])?l!=="groupPath"&&(b[l]=b[l].join(",")):b[l]==null&&delete b[l]}),b.properties&&(b.props=b.properties,delete b.properties),b.relations&&(b.loadRelations=b.relations,delete b.relations),b}},{key:"toQueryString",value:function(g){if(g){g instanceof w&&(g=g.toJSON());var b=[];return g.pageSize>0&&b.push("pageSize=".concat(g.pageSize)),g.offset>0&&b.push("offset=".concat(g.offset)),Array.isArray(g.properties)&&g.properties.length&&g.properties.map(function(l){b.push("property=".concat(encodeURIComponent(l)))}),Array.isArray(g.excludeProps)&&g.excludeProps.length&&b.push("excludeProps=".concat(y(g.excludeProps))),g.where&&b.push("where=".concat(encodeURIComponent(g.where))),g.having&&b.push("having=".concat(encodeURIComponent(g.having))),g.sortBy&&b.push(Array.isArray(g.sortBy)?"sortBy=".concat(y(g.sortBy)):"sortBy=".concat(encodeURIComponent(g.sortBy))),g.groupBy&&b.push(Array.isArray(g.groupBy)?"groupBy=".concat(y(g.groupBy)):"groupBy=".concat(encodeURIComponent(g.groupBy))),Array.isArray(g.relations)&&b.push(g.relations.length?"loadRelations=".concat(y(g.relations)):"loadRelations=*"),g.relationsDepth>0&&b.push("relationsDepth=".concat(g.relationsDepth)),g.relationsPageSize>0&&b.push("relationsPageSize=".concat(g.relationsPageSize)),g.distinct&&b.push("distinct=".concat(g.distinct)),g.fileReferencePrefix&&b.push("fileReferencePrefix=".concat(encodeURIComponent(g.fileReferencePrefix))),b.join("&")}}}]),w}();t.default=u;function y(w){return w.map(function(v){return encodeURIComponent(v)}).join(",")}}(dataQueryBuilder)),dataQueryBuilder}var hasRequiredRoles;function requireRoles(){return hasRequiredRoles||(hasRequiredRoles=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(require_typeof()),i=e(requireAsyncToGenerator()),s=e(requireClassCallCheck()),f=e(requireCreateClass()),a=e(requireDataQueryBuilder()),o=function(){function u(y){(0,s.default)(this,u),this.users=y,this.app=y.app}return(0,f.default)(u,[{key:"findByRole",value:function(){var y=(0,i.default)(r.default.mark(function v(g,b,l){var _=this,h;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!g||typeof g!="string")){c.next=2;break}throw new Error("Role Name must be a string and can not be empty");case 2:if(!(b!=null&&typeof b!="boolean")){c.next=4;break}throw new Error('The second argument "loadRoles" can be a boolean only');case 4:if(!(l!=null&&(Array.isArray(l)||(0,n.default)(l)!=="object"))){c.next=6;break}throw new Error('The third argument "query" can be an instance of DataQueryBuilder or a plain object only');case 6:return h=[],typeof b=="boolean"&&h.push("loadRoles=".concat(b)),l&&h.push(a.default.toQueryString(l)),c.abrupt("return",this.app.request.get({url:this.app.urls.usersRole(g),queryString:h.join("&")}).then(function(p){return _.users.dataStore.parseResponse(p)}));case 10:case"end":return c.stop()}},v,this)}));function w(v,g,b){return y.apply(this,arguments)}return w}()},{key:"getUserRoles",value:function(){var y=(0,i.default)(r.default.mark(function v(g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",this.app.request.get({url:this.app.urls.userRoles(g)}));case 1:case"end":return l.stop()}},v,this)}));function w(v){return y.apply(this,arguments)}return w}()},{key:"assignRole",value:function(){var y=(0,i.default)(r.default.mark(function v(g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",this.changeRole(g,b,"assignRole"));case 1:case"end":return _.stop()}},v,this)}));function w(v,g){return y.apply(this,arguments)}return w}()},{key:"unassignRole",value:function(){var y=(0,i.default)(r.default.mark(function v(g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",this.changeRole(g,b,"unassignRole"));case 1:case"end":return _.stop()}},v,this)}));function w(v,g){return y.apply(this,arguments)}return w}()},{key:"changeRole",value:function(){var y=(0,i.default)(r.default.mark(function v(g,b,l){return r.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!g||!(typeof g=="string"||typeof g=="number"))){h.next=2;break}throw new Error("User identity must be a string or number and can not be empty.");case 2:if(!(!b||typeof b!="string")){h.next=4;break}throw new Error("Role Name must be a string and can not be empty.");case 4:return h.abrupt("return",this.app.request.post({url:this.app.urls.userRoleOperation(l),data:{user:g,roleName:b}}));case 5:case"end":return h.stop()}},v,this)}));function w(v,g,b){return y.apply(this,arguments)}return w}()}]),u}();t.default=o}(roles)),roles}var social={},container={},hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1;var t=requireInteropRequireDefault();Object.defineProperty(container,"__esModule",{value:!0}),container.SocialContainer=void 0;var e=t(requireClassCallCheck()),r=t(requireCreateClass()),n=function(){function i(s,f){(0,e.default)(this,i),this.socialType=s,this.container=f,f?this.processContainer():this.createContainer()}return(0,r.default)(i,[{key:"processContainer",value:function(){var f=this,a,o=this.container[0]||this.container,u=document.createElement("div");u.innerHTML="Loading...",o.appendChild(u),o.style.cursor="wait",this.closeContainer=function(){o.style.cursor="default",o.removeChild(a)},this.removeLoading=function(){o.removeChild(u)},this.doAuthorizationActivity=function(y){f.removeLoading(),a=document.createElement("iframe"),a.frameBorder=0,a.width=o.style.width,a.height=o.style.height,a.id="SocialAuthFrame",a.setAttribute("src",y+"&amp;output=embed"),o.appendChild(a),a.onload=function(){o.style.cursor="default"}}}},{key:"createContainer",value:function(){var f=window.open("",this.socialType+" authorization","resizable=yes, scrollbars=yes, titlebar=yes, top=10, left=10"),a=f.document.getElementsByTagName("body")[0];a.innerHTML="Loading...",f.document.getElementsByTagName("html")[0].style.cursor="wait",this.closeContainer=function(){f.close()},this.doAuthorizationActivity=function(o){f.location.href=o,f.onload=function(){f.document.getElementsByTagName("html")[0].style.cursor="default"}}}}]),i}();return container.SocialContainer=n,container}var hasRequiredSocial;function requireSocial(){return hasRequiredSocial||(hasRequiredSocial=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=e(requireUser()),a=requireContainer(),o=function(){function w(v){(0,i.default)(this,w),this.users=v,this.app=v.app}return(0,s.default)(w,[{key:"loginWithFacebook",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h){return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this.loginWithContainer("facebook",l,_,null,h));case 1:case"end":return c.stop()}},b,this)}));function g(b,l,_){return v.apply(this,arguments)}return g}()},{key:"loginWithGooglePlus",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h,d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.loginWithContainer("googleplus",l,_,h,d));case 1:case"end":return p.stop()}},b,this)}));function g(b,l,_,h){return v.apply(this,arguments)}return g}()},{key:"loginWithTwitter",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_){return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",this.loginWithContainer("twitter",l,null,null,_));case 1:case"end":return d.stop()}},b,this)}));function g(b,l){return v.apply(this,arguments)}return g}()},{key:"loginWithFacebookSdk",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h){return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this.sendWithAccessToken("facebook",l,_,h));case 1:case"end":return c.stop()}},b,this)}));function g(b,l,_){return v.apply(this,arguments)}return g}()},{key:"loginWithGooglePlusSdk",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h){return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this.sendWithAccessToken("googleplus",l,_,h));case 1:case"end":return c.stop()}},b,this)}));function g(b,l,_){return v.apply(this,arguments)}return g}()},{key:"sendWithAccessToken",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h,d){var c=this;return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(!_||typeof _!="string")){m.next=2;break}throw new Error('"accessToken" must be non empty string.');case 2:return typeof h=="boolean"&&(d=h,h=void 0),m.abrupt("return",this.app.request.post({url:this.app.urls.userSocialLogin(l),data:{accessToken:_,fieldsMapping:h}}).then(function(S){return c.users.setCurrentUser(S,d)}));case 4:case"end":return m.stop()}},b,this)}));function g(b,l,_,h){return v.apply(this,arguments)}return g}()},{key:"loginWithContainer",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h,d,c){var p=this,m,S;return r.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return m=new a.SocialContainer(l,d),S=function(){return new Promise(function(P,H){var O=function q(C){if(C.origin===p.app.serverURL){var j=JSON.parse(C.data);j.fault?H(new Error(j.fault)):P(j),y("message",window,q),m.closeContainer()}};u("message",window,O)})},T.abrupt("return",this.app.request.post({url:this.app.urls.userSocialOAuth(l),data:{fieldsMapping:_||{},permissions:h||[]}}).then(function(A){return m.doAuthorizationActivity(A)}).catch(function(A){throw m.closeContainer(),A}).then(S).then(function(A){return p.users.setCurrentUser(A,c)}));case 3:case"end":return T.stop()}},b,this)}));function g(b,l,_,h,d){return v.apply(this,arguments)}return g}()},{key:"loginWithOauth2",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h,d,c){var p=this;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!l||typeof l!="string")){S.next=2;break}throw new Error('"providerCode" must be non empty string.');case 2:if(!(!_||typeof _!="string")){S.next=4;break}throw new Error('"accessToken" must be non empty string.');case 4:return h&&!(h instanceof f.default)&&(c=d,d=h,h=void 0),typeof d=="boolean"&&(c=d,d=void 0),S.abrupt("return",this.app.request.post({url:this.app.urls.userOAuthLogin(l),data:{accessToken:_,fieldsMapping:d,guestUser:h}}).then(function(E){return p.users.setCurrentUser(E,c)}));case 7:case"end":return S.stop()}},b,this)}));function g(b,l,_,h,d){return v.apply(this,arguments)}return g}()},{key:"loginWithOauth1",value:function(){var v=(0,n.default)(r.default.mark(function b(l,_,h,d,c,p){var m=this;return r.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(!l||typeof l!="string")){E.next=2;break}throw new Error('"providerCode" must be non empty string.');case 2:if(!(!_||typeof _!="string")){E.next=4;break}throw new Error('"accessToken" must be non empty string.');case 4:if(!(!h||typeof h!="string")){E.next=6;break}throw new Error('"accessTokenSecret" must be non empty string.');case 6:return d&&!(d instanceof f.default)&&(p=c,c=d,d=void 0),typeof c=="boolean"&&(p=c,c=void 0),E.abrupt("return",this.app.request.post({url:this.app.urls.userOAuthLogin(l),data:{accessToken:_,accessTokenSecret:h,fieldsMapping:c,guestUser:d}}).then(function(T){return m.users.setCurrentUser(T,p)}));case 9:case"end":return E.stop()}},b,this)}));function g(b,l,_,h,d,c){return v.apply(this,arguments)}return g}()}]),w}();t.default=o;function u(w,v,g){v.addEventListener?v.addEventListener(w,g,!1):v.attachEvent?v.attachEvent("on"+w,g):v[w]=g}function y(w,v,g){v.removeEventListener?v.removeEventListener(w,g,!1):v.detachEvent&&v.detachEvent("on"+w,g),v[w]=null}}(social)),social}var hasRequiredUsers;function requireUsers(){return hasRequiredUsers||(hasRequiredUsers=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireDefineProperty()),i=e(requireAsyncToGenerator()),s=e(requireClassCallCheck()),f=e(requireCreateClass()),a=requireUtils$2(),o=e(requireUser()),u=e(requireRoles()),y=e(requireSocial());function w(b,l){var _=Object.keys(b);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(b);l&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(b,d).enumerable})),_.push.apply(_,h)}return _}function v(b){for(var l=1;l<arguments.length;l++){var _=arguments[l]!=null?arguments[l]:{};l%2?w(Object(_),!0).forEach(function(h){(0,n.default)(b,h,_[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(_)):w(Object(_)).forEach(function(h){Object.defineProperty(b,h,Object.getOwnPropertyDescriptor(_,h))})}return b}var g=function(){function b(l){(0,s.default)(this,b),this.app=l,this.roles=new u.default(this),this.social=new y.default(this),this.dataStore=this.app.Data.of(o.default)}return(0,f.default)(b,[{key:"Utils",get:function(){return a.UsersUtils}},{key:"register",value:function(){var l=(0,i.default)(r.default.mark(function h(d){var c=this,p;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return d=v({},d),d.blUserLocale||(p=this.Utils.getClientUserLocale(),p&&(d.blUserLocale=p)),S.abrupt("return",this.app.request.post({url:this.app.urls.userRegister(),data:d}).then(function(E){return c.dataStore.parseResponse(E)}));case 3:case"end":return S.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"login",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p){var m=this,S;return r.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(S={},!(typeof d!="string"&&typeof d!="number")){T.next=3;break}throw new Error("the first argument must be either a string or a number");case 3:if(d){T.next=5;break}throw new Error("the first argument cannot be an empty value");case 5:if(typeof c=="boolean"&&(p=c,c=void 0),!(typeof d=="string"&&c===void 0)){T.next=10;break}S.objectId=d,T.next=14;break;case 10:if(c){T.next=12;break}throw new Error('the "password" value cannot be an empty value');case 12:S.login=d,S.password=c;case 14:return p=p===!0,T.abrupt("return",this.app.request.post({url:this.app.urls.userLogin(),data:S}).then(function(A){return m.setCurrentUser(A,p)}));case 16:case"end":return T.stop()}},h,this)}));function _(h,d,c){return l.apply(this,arguments)}return _}()},{key:"loginAsGuest",value:function(){var l=(0,i.default)(r.default.mark(function h(d){var c=this;return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=d===!0,m.abrupt("return",this.app.request.post({url:this.app.urls.guestLogin()}).then(function(S){return c.setCurrentUser(S,d)}));case 2:case"end":return m.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"loginWithFacebook",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p){return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.social.loginWithFacebook(d,c,p));case 1:case"end":return S.stop()}},h,this)}));function _(h,d,c){return l.apply(this,arguments)}return _}()},{key:"loginWithFacebookSdk",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p,m){return r.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",this.social.loginWithFacebookSdk(d,c,p,m));case 1:case"end":return E.stop()}},h,this)}));function _(h,d,c,p){return l.apply(this,arguments)}return _}()},{key:"loginWithGooglePlus",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p,m){return r.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",this.social.loginWithGooglePlus(d,c,p,m));case 1:case"end":return E.stop()}},h,this)}));function _(h,d,c,p){return l.apply(this,arguments)}return _}()},{key:"loginWithGooglePlusSdk",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p){return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.social.loginWithGooglePlusSdk(d,c,p));case 1:case"end":return S.stop()}},h,this)}));function _(h,d,c){return l.apply(this,arguments)}return _}()},{key:"loginWithTwitter",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.social.loginWithTwitter(d,c));case 1:case"end":return m.stop()}},h,this)}));function _(h,d){return l.apply(this,arguments)}return _}()},{key:"loginWithOauth2",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p,m,S){return r.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",this.social.loginWithOauth2(d,c,p,m,S));case 1:case"end":return T.stop()}},h,this)}));function _(h,d,c,p,m){return l.apply(this,arguments)}return _}()},{key:"loginWithOauth1",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p,m,S,E){return r.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",this.social.loginWithOauth1(d,c,p,m,S,E));case 1:case"end":return A.stop()}},h,this)}));function _(h,d,c,p,m,S){return l.apply(this,arguments)}return _}()},{key:"logout",value:function(){var l=(0,i.default)(r.default.mark(function h(){var d=this;return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.app.request.get({url:this.app.urls.userLogout()}).then(function(){d.setCurrentUser(null)}).catch(function(m){throw[3023,3064,3090,3091].includes(m.code)&&d.setCurrentUser(null),m}));case 1:case"end":return p.stop()}},h,this)}));function _(){return l.apply(this,arguments)}return _}()},{key:"getCurrentUser",value:function(){var l=(0,i.default)(r.default.mark(function h(d){var c=this,p;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(this.currentUser&&!d)){S.next=2;break}return S.abrupt("return",this.currentUser);case 2:if(!this.currentUserRequest){S.next=4;break}return S.abrupt("return",this.currentUserRequest);case 4:if(p=this.getCurrentUserId(),!p){S.next=7;break}return S.abrupt("return",this.currentUserRequest=this.dataStore.findById(p).then(function(E){return c.currentUserRequest=null,E["user-token"]=c.currentUser&&c.currentUser["user-token"]||void 0,c.currentUser=E}).catch(function(E){throw c.currentUserRequest=null,E}));case 7:return S.abrupt("return",null);case 8:case"end":return S.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"setCurrentUser",value:function(_,h){return this.app.LocalCache.remove(this.app.LocalCache.Keys.USER_TOKEN),this.app.LocalCache.remove(this.app.LocalCache.Keys.CURRENT_USER_ID),this.app.LocalCache.remove(this.app.LocalCache.Keys.STAY_LOGGED_IN),this.currentUser=_||null,this.currentUser&&(this.currentUser instanceof o.default||(this.currentUser=this.dataStore.parseResponse(this.currentUser)),h&&(this.app.LocalCache.set(this.app.LocalCache.Keys.STAY_LOGGED_IN,!0),this.app.LocalCache.set(this.app.LocalCache.Keys.USER_TOKEN,this.currentUser["user-token"]),this.app.LocalCache.set(this.app.LocalCache.Keys.CURRENT_USER_ID,this.currentUser.objectId))),this.app.__RT&&this.app.RT.updateUserTokenIfNeeded(),this.currentUser}},{key:"isValidLogin",value:function(){var l=(0,i.default)(r.default.mark(function h(){var d;return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(d=this.getCurrentUserToken(),!d){p.next=3;break}return p.abrupt("return",this.app.request.get({url:this.app.urls.userTokenCheck(d)}));case 3:return p.abrupt("return",!1);case 4:case"end":return p.stop()}},h,this)}));function _(){return l.apply(this,arguments)}return _}()},{key:"verifyPassword",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!d||typeof d!="string")){p.next=2;break}throw new Error("Password has to be a non empty string");case 2:if(this.getCurrentUserToken()){p.next=4;break}throw new Error("In order to check password you have to be logged in");case 4:return p.abrupt("return",this.app.request.post({url:this.app.urls.userVerifyPassowrd(),data:{password:d}}).then(function(m){return!!(m&&m.valid)}));case 5:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"restorePassword",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!d||typeof d!="string")){p.next=2;break}throw new Error("Email Address must be provided and must be a string.");case 2:return p.abrupt("return",this.app.request.get({url:this.app.urls.userRestorePassword(d)}));case 3:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"resendEmailConfirmation",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(typeof d!="string"){p.next=5;break}if(d){p.next=3;break}throw new Error("Identity can not be an empty string.");case 3:p.next=7;break;case 5:if(typeof d=="number"){p.next=7;break}throw new Error("Identity must be a string or number.");case 7:return p.abrupt("return",this.app.request.post({url:this.app.urls.userResendConfirmation(d)}));case 8:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"createEmailConfirmationURL",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(typeof d!="string"){p.next=5;break}if(d){p.next=3;break}throw new Error("Identity can not be an empty string.");case 3:p.next=7;break;case 5:if(typeof d=="number"){p.next=7;break}throw new Error("Identity must be a string or number.");case 7:return p.abrupt("return",this.app.request.post({url:this.app.urls.userCreateConfirmationURL(d)}));case 8:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"update",value:function(){var l=(0,i.default)(r.default.mark(function h(d){var c=this;return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.app.request.put({url:this.app.urls.userObject(d.objectId),data:d}).then(function(S){return c.dataStore.parseResponse(S)}));case 1:case"end":return m.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"findByRole",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c,p){return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",this.roles.findByRole(d,c,p));case 1:case"end":return S.stop()}},h,this)}));function _(h,d,c){return l.apply(this,arguments)}return _}()},{key:"getUserRoles",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.roles.getUserRoles(d));case 1:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"assignRole",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.roles.assignRole(d,c));case 1:case"end":return m.stop()}},h,this)}));function _(h,d){return l.apply(this,arguments)}return _}()},{key:"unassignRole",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",this.roles.unassignRole(d,c));case 1:case"end":return m.stop()}},h,this)}));function _(h,d){return l.apply(this,arguments)}return _}()},{key:"describeUserClass",value:function(){var l=(0,i.default)(r.default.mark(function h(){return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",this.app.request.get({url:this.app.urls.userClassProps()}));case 1:case"end":return c.stop()}},h,this)}));function _(){return l.apply(this,arguments)}return _}()},{key:"enableUser",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.updateUserStatus(d,"ENABLED"));case 1:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"disableUser",value:function(){var l=(0,i.default)(r.default.mark(function h(d){return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",this.updateUserStatus(d,"DISABLED"));case 1:case"end":return p.stop()}},h,this)}));function _(h){return l.apply(this,arguments)}return _}()},{key:"updateUserStatus",value:function(){var l=(0,i.default)(r.default.mark(function h(d,c){return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(!d||typeof d!="string"&&typeof d!="number")){m.next=2;break}throw new Error("User objectId must be non empty string/number");case 2:if(!(!c||typeof c!="string")){m.next=4;break}throw new Error("User Status must be a valid string");case 4:return m.abrupt("return",this.app.request.put({url:this.app.urls.userStatus(d),data:{userStatus:c}}));case 5:case"end":return m.stop()}},h,this)}));function _(h,d){return l.apply(this,arguments)}return _}()},{key:"getAuthorizationUrlLink",value:function(_,h,d,c,p,m){return this.app.request.post({url:this.app.urls.userAuthorizationURL(_),data:{fieldsMapping:h,permissions:d,redirect:c,redirectAfterLoginUrl:p,callbackUrlDomain:m}})}},{key:"loggedInUser",value:function(){return this.getCurrentUserId()}},{key:"getCurrentUserToken",value:function(){return this.currentUser&&this.currentUser["user-token"]?this.currentUser["user-token"]:this.app.LocalCache.get(this.app.LocalCache.Keys.USER_TOKEN)||null}},{key:"setCurrentUserToken",value:function(_){_=_||null,this.currentUser&&(this.currentUser["user-token"]=_),this.app.LocalCache.get("user-token")&&this.app.LocalCache.set("user-token",_),this.app.__RT&&this.app.RT.updateUserTokenIfNeeded()}},{key:"getCurrentUserId",value:function(){return this.currentUser?this.currentUser.objectId:this.app.LocalCache.get(this.app.LocalCache.Keys.CURRENT_USER_ID)||null}},{key:"getLocalCurrentUser",value:function(){return this.currentUser}},{key:"setLocalCurrentUser",value:function(_,h){return this.setCurrentUser(_,h)}}]),b}();t.default=g}(users)),users}var bl={},constants$3={},hasRequiredConstants$3;function requireConstants$3(){if(hasRequiredConstants$3)return constants$3;hasRequiredConstants$3=1,Object.defineProperty(constants$3,"__esModule",{value:!0}),constants$3.isExecutionType=constants$3.ExecutionTypes=constants$3.EXECUTION_TYPE_HEADER=void 0;var t="bl-execution-type";constants$3.EXECUTION_TYPE_HEADER=t;var e={SYNC:"sync",ASYNC:"async",ASYNC_LOW_PRIORITY:"async-low-priority"};constants$3.ExecutionTypes=e;var r=Object.keys(e).map(function(i){return e[i]}),n=function(s){return r.includes(s)};return constants$3.isExecutionType=n,constants$3}var customServices={},hasRequiredCustomServices;function requireCustomServices(){return hasRequiredCustomServices||(hasRequiredCustomServices=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireDefineProperty()),i=e(requireAsyncToGenerator()),s=e(requireClassCallCheck()),f=e(requireCreateClass()),a=requireConstants$3();function o(w,v){var g=Object.keys(w);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(w);v&&(b=b.filter(function(l){return Object.getOwnPropertyDescriptor(w,l).enumerable})),g.push.apply(g,b)}return g}function u(w){for(var v=1;v<arguments.length;v++){var g=arguments[v]!=null?arguments[v]:{};v%2?o(Object(g),!0).forEach(function(b){(0,n.default)(w,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(g)):o(Object(g)).forEach(function(b){Object.defineProperty(w,b,Object.getOwnPropertyDescriptor(g,b))})}return w}var y=function(){function w(v){(0,s.default)(this,w),this.app=v}return(0,f.default)(w,[{key:"invoke",value:function(){var v=(0,i.default)(r.default.mark(function b(l,_,h,d){var c;return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(!l||typeof l!="string")){m.next=2;break}throw new Error("Service Name must be provided and must be a string.");case 2:if(!(!_||typeof _!="string")){m.next=4;break}throw new Error("Method Name must be provided and must be a string.");case 4:return typeof d=="string"&&(d={executionType:d}),typeof h=="string"&&(0,a.isExecutionType)(h)&&(d={executionType:h},h=void 0),d=d||{},c=u({},d.httpRequestHeaders),d.executionType&&(c[a.EXECUTION_TYPE_HEADER]=d.executionType),m.abrupt("return",this.app.request.post({url:this.app.urls.blServiceMethod(l,_),data:h,headers:c}));case 10:case"end":return m.stop()}},b,this)}));function g(b,l,_,h){return v.apply(this,arguments)}return g}()}]),w}();t.default=y}(customServices)),customServices}var events={},hasRequiredEvents;function requireEvents(){return hasRequiredEvents||(hasRequiredEvents=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(require_typeof()),i=e(requireAsyncToGenerator()),s=e(requireClassCallCheck()),f=e(requireCreateClass()),a=requireConstants$3(),o=function(){function u(y){(0,s.default)(this,u),this.app=y}return(0,f.default)(u,[{key:"dispatch",value:function(){var y=(0,i.default)(r.default.mark(function v(g,b,l){var _;return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!g||typeof g!="string")){d.next=2;break}throw new Error("Event Name must be provided and must be a string.");case 2:if(typeof b=="string"&&(0,a.isExecutionType)(b)&&(l=b,b=void 0),!(b&&((0,n.default)(b)!=="object"||Array.isArray(b)))){d.next=5;break}throw new Error("Event Arguments must be an object.");case 5:return _={},l&&(_[a.EXECUTION_TYPE_HEADER]=l),d.abrupt("return",this.app.request.post({url:this.app.urls.blEvent(g),data:b||{},headers:_}));case 8:case"end":return d.stop()}},v,this)}));function w(v,g,b){return y.apply(this,arguments)}return w}()}]),u}();t.default=o}(events)),events}var hasRequiredBl;function requireBl(){return hasRequiredBl||(hasRequiredBl=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireCreateClass()),n=e(requireClassCallCheck()),i=requireConstants$3(),s=e(requireCustomServices()),f=e(requireEvents()),a=(0,r.default)(function u(y){(0,n.default)(this,u),this.app=y,this.ExecutionTypes=i.ExecutionTypes,this.CustomServices=new s.default(y),this.Events=new f.default(y)}),o=a;t.default=o}(bl)),bl}var data$1={},store={},slicedToArray={exports:{}},arrayWithHoles={exports:{}},hasRequiredArrayWithHoles;function requireArrayWithHoles(){return hasRequiredArrayWithHoles||(hasRequiredArrayWithHoles=1,function(t){function e(r){if(Array.isArray(r))return r}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(arrayWithHoles)),arrayWithHoles.exports}var iterableToArrayLimit={exports:{}},hasRequiredIterableToArrayLimit;function requireIterableToArrayLimit(){return hasRequiredIterableToArrayLimit||(hasRequiredIterableToArrayLimit=1,function(t){function e(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var s,f,a,o,u=[],y=!0,w=!1;try{if(a=(i=i.call(r)).next,n===0){if(Object(i)!==i)return;y=!1}else for(;!(y=(s=a.call(i)).done)&&(u.push(s.value),u.length!==n);y=!0);}catch(v){w=!0,f=v}finally{try{if(!y&&i.return!=null&&(o=i.return(),Object(o)!==o))return}finally{if(w)throw f}}return u}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(iterableToArrayLimit)),iterableToArrayLimit.exports}var nonIterableRest={exports:{}},hasRequiredNonIterableRest;function requireNonIterableRest(){return hasRequiredNonIterableRest||(hasRequiredNonIterableRest=1,function(t){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(nonIterableRest)),nonIterableRest.exports}var hasRequiredSlicedToArray;function requireSlicedToArray(){return hasRequiredSlicedToArray||(hasRequiredSlicedToArray=1,function(t){var e=requireArrayWithHoles(),r=requireIterableToArrayLimit(),n=requireUnsupportedIterableToArray(),i=requireNonIterableRest();function s(f,a){return e(f)||r(f,a)||n(f,a)||i()}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}(slicedToArray)),slicedToArray.exports}var objectWithoutProperties={exports:{}},objectWithoutPropertiesLoose={exports:{}},hasRequiredObjectWithoutPropertiesLoose;function requireObjectWithoutPropertiesLoose(){return hasRequiredObjectWithoutPropertiesLoose||(hasRequiredObjectWithoutPropertiesLoose=1,function(t){function e(r,n){if(r==null)return{};var i={};for(var s in r)if({}.hasOwnProperty.call(r,s)){if(n.indexOf(s)!==-1)continue;i[s]=r[s]}return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(objectWithoutPropertiesLoose)),objectWithoutPropertiesLoose.exports}var hasRequiredObjectWithoutProperties;function requireObjectWithoutProperties(){return hasRequiredObjectWithoutProperties||(hasRequiredObjectWithoutProperties=1,function(t){var e=requireObjectWithoutPropertiesLoose();function r(n,i){if(n==null)return{};var s,f,a=e(n,i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(f=0;f<o.length;f++)s=o[f],i.indexOf(s)===-1&&{}.propertyIsEnumerable.call(n,s)&&(a[s]=n[s])}return a}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(objectWithoutProperties)),objectWithoutProperties.exports}var rtHandlers={},get={exports:{}},superPropBase={exports:{}},getPrototypeOf={exports:{}},hasRequiredGetPrototypeOf;function requireGetPrototypeOf(){return hasRequiredGetPrototypeOf||(hasRequiredGetPrototypeOf=1,function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(getPrototypeOf)),getPrototypeOf.exports}var hasRequiredSuperPropBase;function requireSuperPropBase(){return hasRequiredSuperPropBase||(hasRequiredSuperPropBase=1,function(t){var e=requireGetPrototypeOf();function r(n,i){for(;!{}.hasOwnProperty.call(n,i)&&(n=e(n))!==null;);return n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(superPropBase)),superPropBase.exports}var hasRequiredGet;function requireGet(){return hasRequiredGet||(hasRequiredGet=1,function(t){var e=requireSuperPropBase();function r(){return t.exports=r=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,i,s){var f=e(n,i);if(f){var a=Object.getOwnPropertyDescriptor(f,i);return a.get?a.get.call(arguments.length<3?n:s):a.value}},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(null,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(get)),get.exports}var inherits={exports:{}},setPrototypeOf={exports:{}},hasRequiredSetPrototypeOf;function requireSetPrototypeOf(){return hasRequiredSetPrototypeOf||(hasRequiredSetPrototypeOf=1,function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(setPrototypeOf)),setPrototypeOf.exports}var hasRequiredInherits;function requireInherits(){return hasRequiredInherits||(hasRequiredInherits=1,function(t){var e=requireSetPrototypeOf();function r(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&e(n,i)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(inherits)),inherits.exports}var possibleConstructorReturn={exports:{}},assertThisInitialized={exports:{}},hasRequiredAssertThisInitialized;function requireAssertThisInitialized(){return hasRequiredAssertThisInitialized||(hasRequiredAssertThisInitialized=1,function(t){function e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(assertThisInitialized)),assertThisInitialized.exports}var hasRequiredPossibleConstructorReturn;function requirePossibleConstructorReturn(){return hasRequiredPossibleConstructorReturn||(hasRequiredPossibleConstructorReturn=1,function(t){var e=require_typeof().default,r=requireAssertThisInitialized();function n(i,s){if(s&&(e(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r(i)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(possibleConstructorReturn)),possibleConstructorReturn.exports}var rt={},backendlessRtClient={exports:{}},hasRequiredBackendlessRtClient;function requireBackendlessRtClient(){return hasRequiredBackendlessRtClient||(hasRequiredBackendlessRtClient=1,function(t,e){var r={};(function(i,s){t.exports=s()})(self,()=>(()=>{var n={"./node_modules/after/index.js":a=>{a.exports=o;function o(y,w,v){var g=!1;return v=v||u,b.count=y,y===0?w():b;function b(l,_){if(b.count<=0)throw new Error("after called too many times");--b.count,l?(g=!0,w(l),w=v):b.count===0&&!g&&w(null,_)}}function u(){}},"./node_modules/arraybuffer.slice/index.js":a=>{a.exports=function(o,u,y){var w=o.byteLength;if(u=u||0,y=y||w,o.slice)return o.slice(u,y);if(u<0&&(u+=w),y<0&&(y+=w),y>w&&(y=w),u>=w||u>=y||w===0)return new ArrayBuffer(0);for(var v=new Uint8Array(o),g=new Uint8Array(y-u),b=u,l=0;b<y;b++,l++)g[l]=v[b];return g.buffer}},"./src/client.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/regenerator/index.js")),v=y(u("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),g=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),b=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),l=y(u("./node_modules/@babel/runtime/helpers/defineProperty.js")),_=u("./src/constants.js"),h=y(u("./src/config.js")),d=y(u("./src/subscriptions.js")),c=y(u("./src/methods.js")),p=y(u("./src/session.js")),m=[_.NativeSocketEvents.CONNECTING,_.NativeSocketEvents.CONNECT,_.NativeSocketEvents.CONNECT_ERROR,_.NativeSocketEvents.DISCONNECT,_.NativeSocketEvents.RECONNECT_ATTEMPT];o.default=function(){function S(E){var T=this;(0,g.default)(this,S),(0,l.default)(this,"onConnectError",function(){!T.subscriptions.hasActivity()&&!T.methods.hasActivity()&&(T.disconnect("There are no active subscriptions and methods"),T.connectible=!0)}),(0,l.default)(this,"connectOnMethod",function(P){return function(){for(var H=arguments.length,O=new Array(H),q=0;q<H;q++)O[q]=arguments[q];if(T.connectible){var C=T.provideConnection();T.connected&&C.then(function(j){return j[P].apply(j,O)})}}}),(0,l.default)(this,"on",this.connectOnMethod("on")),(0,l.default)(this,"emit",this.connectOnMethod("emit")),(0,l.default)(this,"onSessionDisconnect",function(){T.subscriptions.stop(),T.methods.stop(),delete T.session,T.provideConnection()}),(0,l.default)(this,"emitSocketEventListeners",function(P){for(var H=arguments.length,O=new Array(H>1?H-1:0),q=1;q<H;q++)O[q-1]=arguments[q];T.socketEvents[P]&&T.socketEvents[P].forEach(function(C){return C.apply(void 0,O)})}),(0,l.default)(this,"addConnectingEventListener",function(P){return T.addSocketEventListener(_.NativeSocketEvents.CONNECTING,P)}),(0,l.default)(this,"removeConnectingEventListener",function(P){return T.removeSocketEventListener(_.NativeSocketEvents.CONNECTING,P)}),(0,l.default)(this,"addConnectEventListener",function(P){return T.addSocketEventListener(_.NativeSocketEvents.CONNECT,P)}),(0,l.default)(this,"removeConnectEventListener",function(P){return T.removeSocketEventListener(_.NativeSocketEvents.CONNECT,P)}),(0,l.default)(this,"addConnectErrorEventListener",function(P){return T.addSocketEventListener(_.NativeSocketEvents.CONNECT_ERROR,P)}),(0,l.default)(this,"removeConnectErrorEventListener",function(P){return T.removeSocketEventListener(_.NativeSocketEvents.CONNECT_ERROR,P)}),(0,l.default)(this,"addDisconnectEventListener",function(P){return T.addSocketEventListener(_.NativeSocketEvents.DISCONNECT,P)}),(0,l.default)(this,"removeDisconnectEventListener",function(P){return T.removeSocketEventListener(_.NativeSocketEvents.DISCONNECT,P)}),(0,l.default)(this,"addReconnectAttemptEventListener",function(P){return T.addSocketEventListener(_.NativeSocketEvents.RECONNECT_ATTEMPT,P)}),(0,l.default)(this,"removeReconnectAttemptEventListener",function(P){return T.removeSocketEventListener(_.NativeSocketEvents.RECONNECT_ATTEMPT,P)}),(0,l.default)(this,"removeConnectionListeners",function(){m.forEach(function(P){return T.removeSocketEventListener(P)})}),this.config=new h.default(E),this.resetSocketEvents();var A={onMessage:this.on.bind(this),emitMessage:this.emit.bind(this)};this.subscriptions=new d.default(A),this.methods=new c.default(A),this.connectible=!0,this.connected=!1}return(0,b.default)(S,[{key:"resetSocketEvents",value:function(){this.socketEvents={},this.addConnectErrorEventListener(this.onConnectError)}},{key:"setConfig",value:function(T){this.config.set(T),this.session&&(this.disconnect("Re-config socket connection"),this.connect())}},{key:"provideConnection",value:function(){var T=this;return this.session||(this.session=new p.default(this.config,this.emitSocketEventListeners,this.onSessionDisconnect),this.session.getSocket().then(function(){T.connected=!0,T.methods.initialize(),T.methods.restore(),T.subscriptions.initialize(),T.subscriptions.restore()})),this.session.getSocket()}},{key:"getConnectionId",value:function(){var E=(0,v.default)(w.default.mark(function A(){return w.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this.session){H.next=4;break}return H.next=3,this.session.getConnectionId();case 3:return H.abrupt("return",H.sent);case 4:return H.abrupt("return",null);case 5:case"end":return H.stop()}},A,this)}));function T(){return E.apply(this,arguments)}return T}()},{key:"connect",value:function(){this.connectible=!0,this.provideConnection()}},{key:"disconnect",value:function(T){this.session&&(this.subscriptions.stop(),this.methods.stop(),this.session.terminate(),delete this.session,this.emitSocketEventListeners(_.NativeSocketEvents.DISCONNECT,T||"disconnected by client")),this.connectible=!1,this.connected=!1}},{key:"terminate",value:function(T){this.resetSocketEvents(),this.subscriptions.reset(),this.methods.reset(),this.disconnect(T||"Terminated by client")}},{key:"addSocketEventListener",value:function(T,A){return this.socketEvents[T]=this.socketEvents[T]||[],this.socketEvents[T].push(A),this}},{key:"removeSocketEventListener",value:function(T,A){return this.socketEvents[T]&&(this.socketEvents[T]=A?this.socketEvents[T].filter(function(P){return P!==A}):[],this.socketEvents[T].length||delete this.socketEvents[T]),this}}])}()},"./src/config.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/regenerator/index.js")),v=y(u("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),g=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),b=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),l=y(u("./node_modules/@babel/runtime/helpers/typeof.js")),_=function(m){return typeof m>"u"},h=function(m){return typeof m=="string"},d=function(m){return typeof m=="function"},c=function(m){return(0,l.default)(m)==="object"&&m!==null};o.default=function(){function p(m){(0,g.default)(this,p),this.appId=null,this.debugMode=!1,this.connectQuery={},this.socketConfigTransform=null,this.hostResolver=null,this.socketConfig=null,this.set(m)}return(0,b.default)(p,[{key:"set",value:function(S){if(S){if(_(S.hostResolver)||d(S.hostResolver)&&(this.hostResolver=S.hostResolver),!_(S.appId)){if(!h(S.appId))throw new Error('"appId" must be String.');this.appId=S.appId}if(_(S.debugMode)||(this.debugMode=!!S.debugMode),!_(S.connectQuery))if(d(S.connectQuery))this.getConnectQuery=S.connectQuery;else if(c(S.connectQuery))this.connectQuery=S.connectQuery;else throw new Error('"connectQuery" must be Function or Object.');if(!_(S.socketConfigTransform))if(d(S.socketConfigTransform))this.socketConfigTransform=S.socketConfigTransform;else throw new Error('"socketConfigTransform" must be Function.')}}},{key:"getConnectQuery",value:function(){return this.connectQuery}},{key:"getSocketConfig",value:function(){return this.socketConfig}},{key:"getHost",value:function(){var m=(0,v.default)(w.default.mark(function E(){var T;return w.default.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!(_(this.hostResolver)||!d(this.hostResolver))){P.next=2;break}throw new Error('"hostResolver" must be a function');case 2:return P.next=4,this.hostResolver();case 4:if(T=P.sent,!(!T||typeof T!="string")){P.next=7;break}throw new Error('"hostResolver" must return a valid string');case 7:return P.abrupt("return",T);case 8:case"end":return P.stop()}},E,this)}));function S(){return m.apply(this,arguments)}return S}()},{key:"prepare",value:function(){var m=(0,v.default)(w.default.mark(function E(){var T,A,P,H;return w.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return T=this.getConnectQuery(),q.next=3,this.getHost();case 3:if(A=q.sent,P=this.appId?"".concat(A,"/").concat(this.appId):A,H=this.appId?"/".concat(this.appId):void 0,this.socketConfig={host:A,url:P,options:{path:H,query:T,forceNew:!0,autoConnect:!1,reconnection:!1}},!this.socketConfigTransform){q.next=14;break}return q.next=10,this.socketConfigTransform(this.socketConfig);case 10:if(q.t0=q.sent,q.t0){q.next=13;break}q.t0=this.socketConfig;case 13:this.socketConfig=q.t0;case 14:case"end":return q.stop()}},E,this)}));function S(){return m.apply(this,arguments)}return S}()}])}()},"./src/constants.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RTSubscriptionTypes=o.RTSocketEvents=o.RTMethodTypes=o.NativeSocketEvents=void 0,o.NativeSocketEvents={CONNECTING:"connecting",CONNECT:"connect",CONNECT_ERROR:"connect_error",CONNECT_TIMEOUT:"connect_timeout",DISCONNECT:"disconnect",RECONNECT:"reconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECTING:"reconnecting",RECONNECT_ERROR:"reconnect_error",RECONNECT_FAILED:"reconnect_failed",ERROR:"error",PING:"ping",PONG:"pong"},o.RTSocketEvents={SUB_ON:"SUB_ON",SUB_OFF:"SUB_OFF",SUB_RES:"SUB_RES",SUB_READY:"SUB_READY",MET_REQ:"MET_REQ",MET_RES:"MET_RES"},o.RTSubscriptionTypes={OBJECTS_CHANGES:"OBJECTS_CHANGES",RELATIONS_CHANGES:"RELATIONS_CHANGES",PUB_SUB_CONNECT:"PUB_SUB_CONNECT",PUB_SUB_MESSAGES:"PUB_SUB_MESSAGES",PUB_SUB_COMMANDS:"PUB_SUB_COMMANDS",PUB_SUB_USERS:"PUB_SUB_USERS",RSO_CONNECT:"RSO_CONNECT",RSO_CHANGES:"RSO_CHANGES",RSO_CLEARED:"RSO_CLEARED",RSO_COMMANDS:"RSO_COMMANDS",RSO_INVOKE:"RSO_INVOKE",RSO_USERS:"RSO_USERS",LOGGING_MESSAGES:"LOGGING_MESSAGES",CONSOLE_MESSAGES:"CONSOLE_MESSAGES",DEVELOPER_MESSAGES:"DEVELOPER_MESSAGES",AUTOMATION_MESSAGES:"AUTOMATION_MESSAGES"},o.RTMethodTypes={SET_USER_TOKEN:"SET_USER_TOKEN",RSO_GET:"RSO_GET",RSO_SET:"RSO_SET",RSO_CLEAR:"RSO_CLEAR",RSO_COMMAND:"RSO_COMMAND",RSO_INVOKE:"RSO_INVOKE",PUB_SUB_COMMAND:"PUB_SUB_COMMAND"}},"./src/index.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.RTScopeConnector=o.RTListeners=void 0;var w=y(u("./node_modules/@babel/runtime/helpers/typeof.js")),v=y(u("./node_modules/backendless-request/dist/backendless-request.js")),g=y(u("./src/client.js")),b=y(u("./src/listeners.js")),l=y(u("./src/scope-connector.js")),_=(typeof self>"u"?"undefined":(0,w.default)(self))==="object"&&self.self===self&&self||(typeof u.g>"u"?"undefined":(0,w.default)(u.g))==="object"&&u.g.global===u.g&&u.g;g.default.Request=v.default,g.default.Listeners=b.default,g.default.ScopeConnector=l.default,_&&(_.BackendlessRTClient=g.default),a.exports=g.default,o.default=g.default,o.RTListeners=b.default,o.RTScopeConnector=l.default},"./src/listeners.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/helpers/defineProperty.js")),v=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),g=y(u("./node_modules/@babel/runtime/helpers/createClass.js"));function b(_,h){var d=Object.keys(_);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(_);h&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(_,p).enumerable})),d.push.apply(d,c)}return d}function l(_){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?b(Object(d),!0).forEach(function(c){(0,w.default)(_,c,d[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(d)):b(Object(d)).forEach(function(c){Object.defineProperty(_,c,Object.getOwnPropertyDescriptor(d,c))})}return _}o.default=function(){function _(){(0,v.default)(this,_),this.subscriptions={},this.simpleListeners={}}return(0,g.default)(_,[{key:"addSubscription",value:function(d,c,p){var m=this,S=p.callback,E=p.onError,T=p.onReady,A=p.parser,P=p.params;this.subscriptions[d]=this.subscriptions[d]||[];var H=c(l(l({},P),this.getSubscriptionOptions()),{parser:A,onData:S,onError:E,onReady:T,onStop:function(){m.subscriptions[d]=m.subscriptions[d].filter(function(C){return C.subscription!==H})}}),O={callback:S,params:P,subscription:H,stop:function(){return H.stop()}};return this.subscriptions[d].push(O),O}},{key:"getSubscriptionOptions",value:function(){return{}}},{key:"stopSubscription",value:function(d,c){var p=c.callback,m=c.matcher,S=this.subscriptions[d]=this.subscriptions[d]||[];m?S.forEach(function(E){m(E)&&E.subscription.stop()}):S.forEach(function(E){(!p||E.callback===p)&&E.subscription.stop()})}},{key:"addSimpleListener",value:function(d,c){var p=this.simpleListeners[d]=this.simpleListeners[d]||[];p.push(c)}},{key:"removeSimpleListener",value:function(d,c){this.simpleListeners[d]&&(this.simpleListeners[d]=c?this.simpleListeners[d].filter(function(p){return p!==c}):[])}},{key:"runSimpleListeners",value:function(d){for(var c=arguments.length,p=new Array(c>1?c-1:0),m=1;m<c;m++)p[m-1]=arguments[m];this.simpleListeners[d]&&this.simpleListeners[d].forEach(function(S){return S.apply(void 0,p)})}},{key:"removeAllListeners",value:function(){var d=this;Object.keys(this.subscriptions).forEach(function(c){d.subscriptions[c].forEach(function(p){var m=p.subscription;return m.stop()})}),this.simpleListeners={}}}])}()},"./src/methods.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),v=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),g=y(u("./node_modules/@babel/runtime/helpers/defineProperty.js")),b=u("./src/constants.js"),l=y(u("./src/utils.js")),_=function(d){return function(c){return this.send(d,c)}};o.default=function(){function h(d){var c=this,p=d.onMessage,m=d.emitMessage;(0,w.default)(this,h),(0,g.default)(this,"sendRequest",function(S){c.invocations[S]&&c.emitMessage(b.RTSocketEvents.MET_REQ,c.invocations[S].data)}),(0,g.default)(this,"onResponse",function(S){var E=S.id,T=S.error,A=S.result;if(c.invocations[E]){var P=c.invocations[E];T?P.reject(T):P.resolve(A),delete c.invocations[E]}}),(0,g.default)(this,"setUserToken",_(b.RTMethodTypes.SET_USER_TOKEN).bind(this)),(0,g.default)(this,"sendPubSubCommand",_(b.RTMethodTypes.PUB_SUB_COMMAND).bind(this)),(0,g.default)(this,"getRSO",_(b.RTMethodTypes.RSO_GET).bind(this)),(0,g.default)(this,"setRSO",_(b.RTMethodTypes.RSO_SET).bind(this)),(0,g.default)(this,"clearRSO",_(b.RTMethodTypes.RSO_CLEAR).bind(this)),(0,g.default)(this,"sendRSOCommand",_(b.RTMethodTypes.RSO_COMMAND).bind(this)),(0,g.default)(this,"invokeRSOMethod",_(b.RTMethodTypes.RSO_INVOKE).bind(this)),this.onMessage=p,this.emitMessage=m,this.invocations={}}return(0,v.default)(h,[{key:"initialize",value:function(){this.onMessage(b.RTSocketEvents.MET_RES,this.onResponse)}},{key:"restore",value:function(){var c=this;Object.keys(this.invocations).forEach(function(p){c.sendRequest(p)})}},{key:"stop",value:function(){}},{key:"reset",value:function(){this.invocations={}}},{key:"hasActivity",value:function(){return!!Object.keys(this.invocations).length}},{key:"send",value:function(c,p){var m=this,S=l.default.generateUID();return this.invocations[S]={data:{id:S,name:c,options:p}},this.sendRequest(S),new Promise(function(E,T){m.invocations[S].resolve=E,m.invocations[S].reject=T})}}])}()},"./src/scope-connector.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),v=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),g=y(u("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js")),b=y(u("./node_modules/@babel/runtime/helpers/getPrototypeOf.js")),l=y(u("./node_modules/@babel/runtime/helpers/get.js")),_=y(u("./node_modules/@babel/runtime/helpers/inherits.js")),h=y(u("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=y(u("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js")),c=y(u("./src/listeners.js")),p,m,S,E,T,A,P;function H(Y,X){var J=Object.keys(Y);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(Y);X&&(Q=Q.filter(function(W){return Object.getOwnPropertyDescriptor(Y,W).enumerable})),J.push.apply(J,Q)}return J}function O(Y){for(var X=1;X<arguments.length;X++){var J=arguments[X]!=null?arguments[X]:{};X%2?H(Object(J),!0).forEach(function(Q){(0,h.default)(Y,Q,J[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(J)):H(Object(J)).forEach(function(Q){Object.defineProperty(Y,Q,Object.getOwnPropertyDescriptor(J,Q))})}return Y}function q(Y,X,J){return X=(0,b.default)(X),(0,g.default)(Y,C()?Reflect.construct(X,[],(0,b.default)(Y).constructor):X.apply(Y,J))}function C(){try{var Y=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C=function(){return!!Y})()}function j(Y,X,J,Q){var W=(0,l.default)((0,b.default)(Y.prototype),X,J);return typeof W=="function"?function(U){return W.apply(J,U)}:W}var V={CONNECT:"CONNECT",ERROR:"ERROR",COMMAND:"COMMAND",USER_STATUS:"USER_STATUS"};o.default=(p=N(),m=N(),S=N(),E=N(),T=N(!0),A=(P=function(Y){function X(J){var Q;return(0,w.default)(this,X),Q=q(this,X),Q.options=J,Q.waitConnection=[],Q.connect(),Q}return(0,_.default)(X,Y),(0,v.default)(X,[{key:"connectSubscriber",get:function(){return null}},{key:"commandSubscriber",get:function(){return null}},{key:"usersSubscriber",get:function(){return null}},{key:"commandSender",get:function(){return null}},{key:"connect",value:function(){var Q=this;this.isConnected()||(this.connection=this.connectSubscriber(this.getScopeOptions(),{onError:function(U){return Q.onError(U)},onReady:function(){return Q.onConnect()},onStop:function(){return Q.onDisconnect()}}))}},{key:"disconnect",value:function(){this.isConnected()&&this.connection.stop()}},{key:"isConnected",value:function(){return!!this.connection&&this.connection.isReady()}},{key:"getSubscriptionOptions",value:function(){return this.getScopeOptions()}},{key:"getScopeOptions",value:function(){return this.options}},{key:"onConnect",value:function(){this.waitConnection.forEach(function(Q){return Q()}),this.waitConnection=[],this.runSimpleListeners(V.CONNECT)}},{key:"onError",value:function(Q){this.runSimpleListeners(V.ERROR,Q)}},{key:"onDisconnect",value:function(){this.connection=null}},{key:"removeAllListeners",value:function(){return this.waitConnection=[],j(X,"removeAllListeners",this)([]),this}},{key:"addConnectListener",value:function(Q,W){return this.addSimpleListener(V.CONNECT,Q),W&&this.addSimpleListener(V.ERROR,W),this}},{key:"removeConnectListeners",value:function(Q,W){return this.removeSimpleListener(V.CONNECT,Q),W&&this.removeSimpleListener(V.ERROR,W),this}},{key:"addCommandListener",value:function(Q,W){return this.addSubscription(V.COMMAND,this.commandSubscriber,{callback:Q,onError:W}),this}},{key:"removeCommandListeners",value:function(Q){return this.stopSubscription(V.COMMAND,{callback:Q}),this}},{key:"addUserStatusListener",value:function(Q,W){return this.addSubscription(V.USER_STATUS,this.usersSubscriber,{callback:Q,onError:W}),this}},{key:"removeUserStatusListeners",value:function(Q){return this.stopSubscription(V.USER_STATUS,{callback:Q}),this}},{key:"send",value:function(Q,W){return this.commandSender(O(O({},this.getScopeOptions()),{},{type:Q,data:W}))}}])}(c.default),(0,h.default)(P,"connectionRequired",N),P),(0,d.default)(A.prototype,"addCommandListener",[p],Object.getOwnPropertyDescriptor(A.prototype,"addCommandListener"),A.prototype),(0,d.default)(A.prototype,"removeCommandListeners",[m],Object.getOwnPropertyDescriptor(A.prototype,"removeCommandListeners"),A.prototype),(0,d.default)(A.prototype,"addUserStatusListener",[S],Object.getOwnPropertyDescriptor(A.prototype,"addUserStatusListener"),A.prototype),(0,d.default)(A.prototype,"removeUserStatusListeners",[E],Object.getOwnPropertyDescriptor(A.prototype,"removeUserStatusListeners"),A.prototype),(0,d.default)(A.prototype,"send",[T],Object.getOwnPropertyDescriptor(A.prototype,"send"),A.prototype),A);function N(Y){return function(X,J,Q){var W=Q.value;return Q.value=function(){var U=arguments,$=this,ee=function(){return W.apply($,U)};return this.isConnected()?ee():Y?new Promise(function(Z,L){return $.waitConnection.push(function(){return ee().then(Z,L)})}):(this.waitConnection.push(ee),this)},Q}}},"./src/session.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/regenerator/index.js")),v=y(u("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),g=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),b=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),l=u("./src/constants.js"),_=y(u("./src/socket.js")),h=10,d=200,c=60*1e3,p=function(S){return new Promise(function(E){return setTimeout(E,S)})};o.default=function(){function m(S,E,T){(0,g.default)(this,m),this.config=S,this.dispatch=E,this.onDisconnect=T,this.connectAttempt=0,this.socketPromise=this.connect()}return(0,b.default)(m,[{key:"terminate",value:function(){this.terminated||(this.terminated=!0,this.dispatch=function(){},this.socketPromise.then(function(E){E&&E.close()}))}},{key:"getSocket",value:function(){var E=this;return this.socketPromise.then(function(T){return E.terminated?new Promise(function(){}):T})}},{key:"getConnectionId",value:function(){var S=(0,v.default)(w.default.mark(function T(){var A,P;return w.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.getSocket();case 2:return P=O.sent,O.abrupt("return",(P==null||(A=P.ioSocket)===null||A===void 0||(A=A.io)===null||A===void 0||(A=A.engine)===null||A===void 0?void 0:A.id)||null);case 4:case"end":return O.stop()}},T,this)}));function E(){return S.apply(this,arguments)}return E}()},{key:"connect",value:function(){var E=this;if(!this.terminated){this.connectAttempt=this.connectAttempt+1;var T=this.getNextReconnectionTimeout();return this.onConnecting(),this.connectAttempt>1&&this.onReconnectAttempt(this.connectAttempt-1,T),_.default.connect(this.config,this.onSocketDisconnect.bind(this)).then(function(A){return E.connectAttempt=0,E.onConnect(),A}).catch(function(A){if(E.onConnectError(A),!E.terminated)return p(T).then(function(){return E.connect()})})}}},{key:"getNextReconnectionTimeout",value:function(){var E=Math.ceil(this.connectAttempt/h),T=d*Math.pow(2,E);return Math.min(T,c)}},{key:"onSocketDisconnect",value:function(E){this.dispatch(l.NativeSocketEvents.DISCONNECT,E),this.terminated||(this.terminate(),this.onDisconnect())}},{key:"onConnecting",value:function(){this.dispatch(l.NativeSocketEvents.CONNECTING)}},{key:"onConnect",value:function(){this.dispatch(l.NativeSocketEvents.CONNECT)}},{key:"onConnectError",value:function(E){this.dispatch(l.NativeSocketEvents.CONNECT_ERROR,E&&E.message||E)}},{key:"onReconnectAttempt",value:function(E,T){this.dispatch(l.NativeSocketEvents.RECONNECT_ATTEMPT,E,T)}}])}()},"./src/socket-parser.js":(a,o,u)=>{var y=u("./node_modules/component-emitter/index.js");o.protocol=4,o.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],o.CONNECT=0,o.DISCONNECT=1,o.EVENT=2,o.ACK=3,o.ERROR=4,o.BINARY_EVENT=5,o.BINARY_ACK=6,o.Encoder=w,o.Decoder=g;function w(){}w.prototype.encode=function(h,d){d([v(h)])};function v(h){var d=""+h.type;return(o.BINARY_EVENT===h.type||o.BINARY_ACK===h.type)&&(d+=h.attachments+"-"),h.nsp&&h.nsp!=="/"&&(d+=h.nsp+","),h.id!=null&&(d+=h.id),h.data!=null&&(d+=JSON.stringify(h.data)),d}function g(){}y(g.prototype),g.prototype.add=function(h){if(typeof h=="string")this.emit("decoded",b(h));else throw new Error("Unknown type: "+h)};function b(h){var d=0,c={type:Number(h.charAt(0))};if(o.types[c.type]==null)return _();if(o.BINARY_EVENT===c.type||o.BINARY_ACK===c.type){for(var p="";h.charAt(++d)!=="-"&&(p+=h.charAt(d),d!=h.length););if(p!=Number(p)||h.charAt(d)!=="-")throw new Error("Illegal attachments");c.attachments=Number(p)}if(h.charAt(d+1)==="/")for(c.nsp="";++d;){var m=h.charAt(d);if(m===","||(c.nsp+=m,d===h.length))break}else c.nsp="/";var S=h.charAt(d+1);if(S!==""&&Number(S)==S){for(c.id="";++d;){var m=h.charAt(d);if(m==null||Number(m)!=m){--d;break}if(c.id+=h.charAt(d),d===h.length)break}c.id=Number(c.id)}return h.charAt(++d)&&(c=l(c,h.substr(d))),c}function l(h,d){try{h.data=JSON.parse(d)}catch{return _()}return h}g.prototype.destroy=function(){};function _(){return{type:o.ERROR,data:"parser error"}}},"./src/socket.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),v=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),g=u("./src/constants.js");o.default=function(){function b(l,_){(0,w.default)(this,b);var h=u("./node_modules/socket.io-client/lib/index.js");this.config=l,this.events={};var d=l.getSocketConfig(),c=d.url,p=d.options;this.ioSocket=h(c,p)}return(0,v.default)(b,[{key:"connect",value:function(){this.ioSocket.connect()}},{key:"close",value:function(){this.log("log","close socket"),this.events={},this.ioSocket.off(),this.ioSocket.close()}},{key:"on",value:function(_,h){var d=this;this.events[_]||this.ioSocket.on(_,function(c){return d.onEvent(_,c)}),this.events[_]=this.events[_]||[],this.events[_].push(h)}},{key:"off",value:function(_,h){this.events[_]=h?this.events[_].filter(function(d){return d!==h}):[],this.events[_].length||delete this.events[_],this.events[_]||this.ioSocket.off(_)}},{key:"onEvent",value:function(_,h){this.logMessage("FROM SERVER",_,h),this.events[_]&&this.events[_].forEach(function(d){return d(h)})}},{key:"emit",value:function(_,h){this.logMessage("TO SERVER",_,h),this.ioSocket.emit(_,h)}},{key:"log",value:function(_){if(this.config.debugMode){for(var h,d=arguments.length,c=new Array(d>1?d-1:0),p=1;p<d;p++)c[p-1]=arguments[p];(h=console)[_].apply(h,["[RT Client]:"].concat(c))}}},{key:"logMessage",value:function(_,h,d){this.log("log","[".concat(_,"] - [event: ").concat(h,"] - arguments: ").concat(JSON.stringify(d)," "))}}],[{key:"connect",value:function(_,h){return Promise.resolve().then(function(){return _.prepare()}).then(function(){return new Promise(function(d,c){var p=new b(_);p.on(g.NativeSocketEvents.CONNECT,m),p.on(g.NativeSocketEvents.CONNECT_ERROR,S),p.on(g.NativeSocketEvents.CONNECT_TIMEOUT,S),p.on(g.NativeSocketEvents.ERROR,function(T){p.log("error","received ERROR event while connecting",T),E(T)}),p.connect();function m(){p.log("log","socket connected"),d(p)}function S(T){p.log("error","received one of [CONNECT_ERROR,CONNECT_TIMEOUT] socket event while connecting",T),E(T)}function E(T){p.log("log","close and reject socket with error:",T),p.close(),c(T)}})}).then(function(d){return d.on(g.NativeSocketEvents.DISCONNECT,h),d.on(g.NativeSocketEvents.ERROR,h),d})}}])}()},"./src/subscriptions.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var w=y(u("./node_modules/@babel/runtime/helpers/classCallCheck.js")),v=y(u("./node_modules/@babel/runtime/helpers/createClass.js")),g=y(u("./node_modules/@babel/runtime/helpers/defineProperty.js")),b=u("./src/constants.js"),l=y(u("./src/utils.js")),_=function(d){return function(c,p){return this.subscribe(d,c,p)}};o.default=function(){function h(d){var c=d.onMessage,p=d.emitMessage;(0,w.default)(this,h),(0,g.default)(this,"onObjectsChanges",_(b.RTSubscriptionTypes.OBJECTS_CHANGES).bind(this)),(0,g.default)(this,"onRelationsChanges",_(b.RTSubscriptionTypes.RELATIONS_CHANGES).bind(this)),(0,g.default)(this,"connectToPubSub",_(b.RTSubscriptionTypes.PUB_SUB_CONNECT).bind(this)),(0,g.default)(this,"onPubSubMessage",_(b.RTSubscriptionTypes.PUB_SUB_MESSAGES).bind(this)),(0,g.default)(this,"onPubSubCommand",_(b.RTSubscriptionTypes.PUB_SUB_COMMANDS).bind(this)),(0,g.default)(this,"onPubSubUserStatus",_(b.RTSubscriptionTypes.PUB_SUB_USERS).bind(this)),(0,g.default)(this,"connectToRSO",_(b.RTSubscriptionTypes.RSO_CONNECT).bind(this)),(0,g.default)(this,"onRSOChanges",_(b.RTSubscriptionTypes.RSO_CHANGES).bind(this)),(0,g.default)(this,"onRSOClear",_(b.RTSubscriptionTypes.RSO_CLEARED).bind(this)),(0,g.default)(this,"onRSOCommand",_(b.RTSubscriptionTypes.RSO_COMMANDS).bind(this)),(0,g.default)(this,"onRSOInvoke",_(b.RTSubscriptionTypes.RSO_INVOKE).bind(this)),(0,g.default)(this,"onRSOUserStatus",_(b.RTSubscriptionTypes.RSO_USERS).bind(this)),(0,g.default)(this,"onLoggingMessages",_(b.RTSubscriptionTypes.LOGGING_MESSAGES).bind(this)),(0,g.default)(this,"onConsoleMessages",_(b.RTSubscriptionTypes.CONSOLE_MESSAGES).bind(this)),(0,g.default)(this,"onDeveloperMessage",_(b.RTSubscriptionTypes.DEVELOPER_MESSAGES).bind(this)),(0,g.default)(this,"onAutomationLoggingMessages",_(b.RTSubscriptionTypes.AUTOMATION_MESSAGES).bind(this)),this.onMessage=c,this.emitMessage=p,this.subscriptions={}}return(0,v.default)(h,[{key:"initialize",value:function(){var c=this;this.onMessage(b.RTSocketEvents.SUB_READY,function(p){return c.onSubscriptionReady(p)}),this.onMessage(b.RTSocketEvents.SUB_RES,function(p){return c.onSubscriptionResponse(p)})}},{key:"stop",value:function(){var c=this;Object.keys(this.subscriptions).forEach(function(p){c.subscriptions[p].ready=!1})}},{key:"reset",value:function(){var c=this;Object.keys(this.subscriptions).forEach(function(p){return c.stopSubscription(p)})}},{key:"restore",value:function(){var c=this;Object.keys(this.subscriptions).forEach(function(p){c.startSubscription(p)})}},{key:"hasActivity",value:function(){return!!Object.keys(this.subscriptions).length}},{key:"subscribe",value:function(c,p,m){var S=this,E=m.parser,T=m.onData,A=m.onError,P=m.onStop,H=m.onReady,O=l.default.generateUID();return this.subscriptions[O]={data:{id:O,name:c,options:p},ready:!1,parser:E,onData:T,onError:A,onStop:P,onReady:H},this.startSubscription(O),{isReady:function(){return!!S.subscriptions[O]&&S.subscriptions[O].ready},stop:function(){S.subscriptions[O]&&S.offSubscription(O)}}}},{key:"startSubscription",value:function(c){var p=this.subscriptions[c];this.emitMessage(b.RTSocketEvents.SUB_ON,p.data)}},{key:"stopSubscription",value:function(c){var p=this.subscriptions[c];p&&(p.onStop&&p.onStop(),delete this.subscriptions[c])}},{key:"offSubscription",value:function(c){var p=this.subscriptions[c];p&&(this.emitMessage(b.RTSocketEvents.SUB_OFF,{id:c}),this.stopSubscription(c))}},{key:"onSubscriptionReady",value:function(c){var p=c.id,m=this.subscriptions[p];m&&!m.ready&&(m.ready=!0,m.onReady&&m.onReady())}},{key:"onSubscriptionResponse",value:function(c){var p=c.id,m=c.data,S=c.error,E=this.subscriptions[p];E&&(S?(E.onError&&E.onError(S),this.stopSubscription(p)):(E.ready||(E.ready=!0,E.onReady&&E.onReady()),E.onData&&(typeof E.parser=="function"&&(m=E.parser(m)),E.onData(m))))}}])}()},"./src/utils.js":(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",y={generateUID:function(){for(var v="",g=0;g<8;g++)v+=u.charAt(Math.floor(Math.random()*u.length));return v+Date.now()}};o.default=y},"./node_modules/backendless-request/dist/backendless-request.js":function(a,o){(function(y,w){typeof o=="object"&&typeof a=="object"?a.exports=w():typeof o=="object"?o.BackendlessRequest=w():y.BackendlessRequest=w()})(typeof self<"u"?self:this,function(){return function(u){var y={};function w(v){if(y[v])return y[v].exports;var g=y[v]={i:v,l:!1,exports:{}};return u[v].call(g.exports,g,g.exports,w),g.l=!0,g.exports}return w.m=u,w.c=y,w.d=function(v,g,b){w.o(v,g)||Object.defineProperty(v,g,{configurable:!1,enumerable:!0,get:b})},w.n=function(v){var g=v&&v.__esModule?function(){return v.default}:function(){return v};return w.d(g,"a",g),g},w.o=function(v,g){return Object.prototype.hasOwnProperty.call(v,g)},w.p="",w(w.s=3)}([function(u,y,w){(function(v){Object.defineProperty(y,"__esModule",{value:!0}),y.castArray=void 0,y.ensureEncoding=S,y.getFormData=_,y.isStream=y.isObject=y.isNodeJS=y.isFormData=y.isBrowser=void 0,y.setFormData=h;function g(E){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},g(E)}y.castArray=function(T){return Array.isArray(T)?T:[T]},y.isObject=function(T){return T!=null&&g(T)==="object"},y.isFormData=function(T){if(!T)return!1;var A=_();return T instanceof A?!0:T&&T.constructor&&T.constructor.toString().trim().indexOf("function FormData")===0},y.isStream=function(T){var A=w(6);return T instanceof A.Stream};var b=y.isNodeJS=function(){return typeof v<"u"&&v.versions!=null&&v.versions.node!=null};y.isBrowser=function(){return typeof window<"u"&&typeof window.document<"u"};var l=null;function _(){return l||(b()||typeof FormData>"u"?w(7):FormData)}function h(E){l=E}var d=["%40","%3A","%2F"];function c(E,T){var A=T[0];if(A){var P=E.split(A).map(function(H){return c(H,T.slice(1))});return P.join(A)}return encodeURI(E)}function p(E){return E===decodeURI(E)?c(E,d):E}function m(E){return E.endsWith("/")&&(E=E.slice(0,-1)),E.split("/").map(p).join("/")}function S(E){try{var T=new URL(E);return T.origin+m(T.pathname)+T.search}catch{return m(E)}}}).call(y,w(5))},function(u,y){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(u,y,w){function v(L){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},v(L)}Object.defineProperty(y,"__esModule",{value:!0}),y.Request=void 0;var g=w(12),b=p(w(13)),l=c(w(14)),_=w(0),h=w(15);function d(L){if(typeof WeakMap!="function")return null;var I=new WeakMap,k=new WeakMap;return(d=function(F){return F?k:I})(L)}function c(L,I){if(L&&L.__esModule)return L;if(L===null||v(L)!=="object"&&typeof L!="function")return{default:L};var k=d(I);if(k&&k.has(L))return k.get(L);var B={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in L)if(K!=="default"&&Object.prototype.hasOwnProperty.call(L,K)){var te=F?Object.getOwnPropertyDescriptor(L,K):null;te&&(te.get||te.set)?Object.defineProperty(B,K,te):B[K]=L[K]}return B.default=L,k&&k.set(L,B),B}function p(L){return L&&L.__esModule?L:{default:L}}function m(L,I){var k=Object.keys(L);if(Object.getOwnPropertySymbols){var B=Object.getOwnPropertySymbols(L);I&&(B=B.filter(function(F){return Object.getOwnPropertyDescriptor(L,F).enumerable})),k.push.apply(k,B)}return k}function S(L){for(var I=1;I<arguments.length;I++){var k=arguments[I]!=null?arguments[I]:{};I%2?m(Object(k),!0).forEach(function(B){E(L,B,k[B])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(k)):m(Object(k)).forEach(function(B){Object.defineProperty(L,B,Object.getOwnPropertyDescriptor(k,B))})}return L}function E(L,I,k){return I=H(I),I in L?Object.defineProperty(L,I,{value:k,enumerable:!0,configurable:!0,writable:!0}):L[I]=k,L}function T(L,I){if(!(L instanceof I))throw new TypeError("Cannot call a class as a function")}function A(L,I){for(var k=0;k<I.length;k++){var B=I[k];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(L,H(B.key),B)}}function P(L,I,k){return I&&A(L.prototype,I),Object.defineProperty(L,"prototype",{writable:!1}),L}function H(L){var I=O(L,"string");return v(I)==="symbol"?I:String(I)}function O(L,I){if(v(L)!=="object"||L===null)return L;var k=L[Symbol.toPrimitive];if(k!==void 0){var B=k.call(L,I);if(v(B)!=="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(L)}function q(L,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(I&&I.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),Object.defineProperty(L,"prototype",{writable:!1}),I&&C(L,I)}function C(L,I){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,F){return B.__proto__=F,B},C(L,I)}function j(L){var I=Y();return function(){var B=X(L),F;if(I){var K=X(this).constructor;F=Reflect.construct(B,arguments,K)}else F=B.apply(this,arguments);return V(this,F)}}function V(L,I){if(I&&(v(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(L)}function N(L){if(L===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X(L){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},X(L)}var J="Content-Type",Q="request",W="response",U="error",$="done";y.Request=function(L){q(k,L);var I=j(k);function k(B,F,K){var te;return T(this,k),te=I.call(this),te.method=F,te.path=(0,_.ensureEncoding)(B),te.body=K,te.tags=void 0,te.unwrap=!0,te.cacheTTL=0,te.headers={},te.queryParams={},te.encoding="utf8",te.timeout=0,te.withCredentials=null,te}return P(k,[{key:"set",value:function(F,K){if((0,_.isObject)(F))for(var te in F)this.set(te,F[te]);else typeof K<"u"&&(this.headers[F]=K);return this}},{key:"cacheTags",value:function(){for(var F=arguments.length,K=new Array(F),te=0;te<F;te++)K[te]=arguments[te];return this.tags=K,this}},{key:"query",value:function(F){return Object.assign(this.queryParams,F),this}},{key:"form",value:function(F){if(F){var K=k.FormData;if(F instanceof K)this.body=F;else{var te=new K,M=function(x){x&&(0,_.castArray)(F[x]).forEach(function(R){R&&R.hasOwnProperty("value")&&R.hasOwnProperty("options")?te.append(x,R.value,R.options):te.append(x,R)})};for(var ne in F)M(ne);this.body=te}}return this}},{key:"useCache",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15e3;return this.cacheTTL=F,this}},{key:"resetCache",value:function(F){return F&&this.tags&&g.cache.deleteByTags(this.tags),this}},{key:"type",value:function(F){return this.set(J,F),this}},{key:"unwrapBody",value:function(F){return this.unwrap=F,this}},{key:"setEncoding",value:function(F){return this.encoding=F,this}},{key:"setWithCredentials",value:function(F){return this.withCredentials=F,this}},{key:"setTimeout",value:function(F){return this.timeout=F,this}},{key:"send",value:function(F){var K=this;this.emit(Q,this);var te=this.path,M=l.stringify(this.queryParams);if(M&&(te+="?"+M),this.cacheTTL){var ne=g.cache.get(te);if(ne!==void 0)return Promise.resolve(ne)}var D=this.headers[J];if(!D&&(0,_.isObject)(F)&&!(0,_.isFormData)(F)&&this.type("application/json"),F){var x=this.headers[J]==="application/json";F=x&&typeof F!="string"?JSON.stringify(F):F}var R=function(le){return K.unwrap?le.body:le},G=function(le){return K.cacheTTL&&g.cache.set(te,le,K.tags,K.cacheTTL),le},ie=function(le){return K.tags&&K.method!=="get"&&g.cache.deleteByTags(K.tags),le};k.verbose&&console.log(this.method.toUpperCase(),decodeURIComponent(te),F,this.headers);var ae=typeof this.withCredentials=="boolean"?this.withCredentials:k.withCredentials,se=k.send(te,this.method.toUpperCase(),this.headers,F,this.encoding,this.timeout,ae).then(ee).then(Z).then(R).then(G).then(ie);return se.then(function(ue){K.emit(W,ue),K.emit($,null,ue)}).catch(function(ue){K.emit(U,ue),K.emit($,ue)}),se}},{key:"then",value:function(F,K){return this.promise=this.promise||this.send(this.body),this.promise.then(F,K)}},{key:"catch",value:function(F){return this.promise=this.promise||this.send(this.body),this.promise.catch(F)}}]),k}(b.default);function ee(L){try{return S(S({},L),{},{body:JSON.parse(L.body)})}catch{return L}}function Z(L){if(L.status>=200&&L.status<300)return L;throw new h.ResponseError(L)}},function(u,y,w){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var v=w(4),g=w(11),b=w(2),l=w(0);Object.defineProperty(b.Request,"FormData",{get:function(){return(0,l.getFormData)()},set:function(h){(0,l.setFormData)(h)}}),b.Request.XMLHttpRequest=typeof XMLHttpRequest<"u"?XMLHttpRequest:void 0,b.Request.send=function(_,h,d,c,p,m,S){var E=typeof b.Request.XMLHttpRequest<"u"?g.sendXmlHttpRequest:v.sendNodeAPIRequest;return E(_,h,d,c,p,m,S)},b.Request.verbose=!1,b.Request.withCredentials=!1,b.Request.methods=["get","post","put","patch","delete"],b.Request.methods.forEach(function(_){b.Request[_]=function(h,d){return new b.Request(h,_,d)}}),y=u.exports=b.Request,y.default=b.Request},function(u,y,w){Object.defineProperty(y,"__esModule",{value:!0}),y.sendNodeAPIRequest=g;var v=w(0);function g(b,l,_,h,d,c,p){return new Promise(function(m,S){var E=w(8).parse(b),T=(0,v.isFormData)(h)&&h,A=E.pathname.endsWith("/")?E.pathname.slice(0,-1):E.pathname,P=E.protocol==="https:",H={host:E.hostname,port:E.port||(P?443:80),path:A+(E.search||""),method:l,headers:_,timeout:c};typeof p=="boolean"&&(H.withCredentials=p);var O=function(){var j=w(1).Buffer,V=w(P?9:10),N=V.request(H,function(Y){var X=[],J=[],Q=0,W="",U=Y.statusCode,$=Y.statusMessage,ee=Y.headers;Y.on("data",function(Z){j.isBuffer(Z)?Z.length&&(Q+=Z.length,J.push(Z)):X.push(Z)}),Y.on("end",function(){Q?(W=j.concat(J,Q),d!=null&&(W=W.toString(d))):X.length&&(W=X.join()),m({status:U,statusText:$,headers:ee,body:W})}),Y.on("error",S)});if(N.on("error",S),N.on("timeout",function(){N.destroy(new Error("Connection aborted due to timeout"))}),h){if((0,v.isStream)(h)){h.pipe(N);return}N.write(h)}N.end()};if(T)Object.assign(H.headers,T.getHeaders()),T.getLength(function(C,j){!C&&!isNaN(j)&&(H.headers["content-length"]=j),O()});else{if(h&&!H.headers["content-length"]){var q=w(1).Buffer;H.headers["content-length"]=q.byteLength(h)}O()}})}},function(u,y){var w=u.exports={},v,g;function b(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?v=setTimeout:v=b}catch{v=b}try{typeof clearTimeout=="function"?g=clearTimeout:g=l}catch{g=l}})();function _(P){if(v===setTimeout)return setTimeout(P,0);if((v===b||!v)&&setTimeout)return v=setTimeout,setTimeout(P,0);try{return v(P,0)}catch{try{return v.call(null,P,0)}catch{return v.call(this,P,0)}}}function h(P){if(g===clearTimeout)return clearTimeout(P);if((g===l||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(P);try{return g(P)}catch{try{return g.call(null,P)}catch{return g.call(this,P)}}}var d=[],c=!1,p,m=-1;function S(){!c||!p||(c=!1,p.length?d=p.concat(d):m=-1,d.length&&E())}function E(){if(!c){var P=_(S);c=!0;for(var H=d.length;H;){for(p=d,d=[];++m<H;)p&&p[m].run();m=-1,H=d.length}p=null,c=!1,h(P)}}w.nextTick=function(P){var H=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)H[O-1]=arguments[O];d.push(new T(P,H)),d.length===1&&!c&&_(E)};function T(P,H){this.fun=P,this.array=H}T.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function A(){}w.on=A,w.addListener=A,w.once=A,w.off=A,w.removeListener=A,w.removeAllListeners=A,w.emit=A,w.prependListener=A,w.prependOnceListener=A,w.listeners=function(P){return[]},w.binding=function(P){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(P){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(u,y){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(u,y){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(u,y){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(u,y){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(u,y){throw new Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(u,y,w){Object.defineProperty(y,"__esModule",{value:!0}),y.sendXmlHttpRequest=g;var v=w(2);function g(l,_,h,d,c,p,m){return new Promise(function(E,T){var A=new v.Request.XMLHttpRequest;A.timeout=p,c||(A.responseType="arraybuffer"),A.open(_.toUpperCase(),l,!0),typeof m=="boolean"&&(A.withCredentials=m),A.onload=function(){var H=b(A.getAllResponseHeaders()),O=A,q=O.status,C=O.statusText,j={status:q,statusText:C,headers:H};c==="utf8"?j.body=A.response||A.responseText:A.response&&(j.body=new Uint8Array(A.response)),E(j),A=null},A.onerror=function(){T(new Error("Network Error")),A=null},A.ontimeout=function(){T(new Error("Connection aborted due to timeout")),A=null},Object.keys(h).forEach(function(P){A.setRequestHeader(P,h[P])}),A.send(d)})}function b(l){var _={};return l&&l.split(`
`).forEach(function(h){var d=h.indexOf(":"),c=h.substr(0,d).trim(),p=h.substr(d+1).trim();c&&(_[c]=_[c]?_[c]+", "+p:p)}),_}},function(u,y,w){Object.defineProperty(y,"__esModule",{value:!0}),y.cache=void 0;function v(j){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},v(j)}function g(j,V){return _(j)||l(j,V)||d(j,V)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(j,V){var N=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(N!=null){var Y,X,J,Q,W=[],U=!0,$=!1;try{if(J=(N=N.call(j)).next,V===0){if(Object(N)!==N)return;U=!1}else for(;!(U=(Y=J.call(N)).done)&&(W.push(Y.value),W.length!==V);U=!0);}catch(ee){$=!0,X=ee}finally{try{if(!U&&N.return!=null&&(Q=N.return(),Object(Q)!==Q))return}finally{if($)throw X}}return W}}function _(j){if(Array.isArray(j))return j}function h(j,V){var N=typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(!N){if(Array.isArray(j)||(N=d(j))||V){N&&(j=N);var Y=0,X=function(){};return{s:X,n:function(){return Y>=j.length?{done:!0}:{done:!1,value:j[Y++]}},e:function($){throw $},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var J=!0,Q=!1,W;return{s:function(){N=N.call(j)},n:function(){var $=N.next();return J=$.done,$},e:function($){Q=!0,W=$},f:function(){try{!J&&N.return!=null&&N.return()}finally{if(Q)throw W}}}}function d(j,V){if(j){if(typeof j=="string")return c(j,V);var N=Object.prototype.toString.call(j).slice(8,-1);if(N==="Object"&&j.constructor&&(N=j.constructor.name),N==="Map"||N==="Set")return Array.from(j);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return c(j,V)}}function c(j,V){(V==null||V>j.length)&&(V=j.length);for(var N=0,Y=new Array(V);N<V;N++)Y[N]=j[N];return Y}function p(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}function m(j,V){for(var N=0;N<V.length;N++){var Y=V[N];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(j,E(Y.key),Y)}}function S(j,V,N){return V&&m(j.prototype,V),Object.defineProperty(j,"prototype",{writable:!1}),j}function E(j){var V=T(j,"string");return v(V)==="symbol"?V:String(V)}function T(j,V){if(v(j)!=="object"||j===null)return j;var N=j[Symbol.toPrimitive];if(N!==void 0){var Y=N.call(j,V);if(v(Y)!=="object")return Y;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)}var A=function(V,N,Y){return{value:V,tags:N,ttl:Y}},P=function(){return new Date().getTime()},H=function(V,N){var Y=V==N;return!Y&&V instanceof RegExp&&(Y=V.test(N)),!Y&&N instanceof RegExp&&(Y=N.test(V)),Y},O=function(V,N){return!!V.find(function(Y){return N.find(function(X){return H(Y,X)})})},q=function(){function j(V){p(this,j),this.setFlushInterval(V),this.map=new Map}return S(j,[{key:"setFlushInterval",value:function(N){this.flushInterval=N,this.flushTimer&&(clearInterval(this.flushTimer),delete this.flushTimer)}},{key:"get",value:function(N){var Y=this.map.get(N);if(Y){if(Y.ttl>P())return Y.value;this.map.delete(N)}}},{key:"set",value:function(N,Y,X,J){this.map.set(N,A(Y,X,P()+J)),this.flushInterval&&!this.flushTimer&&(this.flushTimer=setInterval(this.flush.bind(this),this.flushInterval),this.flushTimer.unref&&this.flushTimer.unref())}},{key:"delete",value:function(N){this.map.delete(N)}},{key:"deleteAll",value:function(){var N=h(this.map),Y;try{for(N.s();!(Y=N.n()).done;){var X=g(Y.value,1),J=X[0];this.delete(J)}}catch(Q){N.e(Q)}finally{N.f()}}},{key:"deleteByTags",value:function(N){var Y=h(this.map),X;try{for(Y.s();!(X=Y.n()).done;){var J=g(X.value,2),Q=J[0],W=J[1];W.tags&&O(N,W.tags)&&this.delete(Q)}}catch(U){Y.e(U)}finally{Y.f()}}},{key:"flush",value:function(){var N=P(),Y=h(this.map),X;try{for(Y.s();!(X=Y.n()).done;){var J=g(X.value,2),Q=J[0],W=J[1];W.ttl<N&&this.delete(Q)}}catch(U){Y.e(U)}finally{Y.f()}}}]),j}(),C=6e4;y.cache=new q(C)},function(u,y,w){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;function v(d){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},v(d)}function g(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function b(d,c){for(var p=0;p<c.length;p++){var m=c[p];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,_(m.key),m)}}function l(d,c,p){return c&&b(d.prototype,c),Object.defineProperty(d,"prototype",{writable:!1}),d}function _(d){var c=h(d,"string");return v(c)==="symbol"?c:String(c)}function h(d,c){if(v(d)!=="object"||d===null)return d;var p=d[Symbol.toPrimitive];if(p!==void 0){var m=p.call(d,c);if(v(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(d)}y.default=function(){function d(){g(this,d),this.events={}}return l(d,[{key:"on",value:function(p,m){return this.events[p]=this.events[p]||[],this.events[p].push(m),this}},{key:"off",value:function(p,m){return p?this.events[p]&&(m?this.events[p]=this.events[p].filter(function(S){return S!==m}):delete this.events[p]):this.events={},this}},{key:"emit",value:function(p){for(var m=arguments.length,S=new Array(m>1?m-1:0),E=1;E<m;E++)S[E-1]=arguments[E];this.events[p]&&this.events[p].forEach(function(T){return T.apply(void 0,S)})}}]),d}()},function(u,y,w){Object.defineProperty(y,"__esModule",{value:!0}),y.stringify=void 0;var v=w(0);y.stringify=function(b){var l=[];return Object.keys(b).forEach(function(_){var h=b[_];h!==void 0&&(0,v.castArray)(h).forEach(function(d){l.push("".concat(encodeURIComponent(_),"=").concat(encodeURIComponent(d)))})}),l.join("&")}},function(u,y,w){function v(P){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},v(P)}Object.defineProperty(y,"__esModule",{value:!0}),y.ResponseError=void 0;function g(P,H,O){return Object.defineProperty(P,"prototype",{writable:!1}),P}function b(P,H){if(!(P instanceof H))throw new TypeError("Cannot call a class as a function")}function l(P,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(H&&H.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),H&&E(P,H)}function _(P){var H=m();return function(){var q=T(P),C;if(H){var j=T(this).constructor;C=Reflect.construct(q,arguments,j)}else C=q.apply(this,arguments);return h(this,C)}}function h(P,H){if(H&&(v(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(P)}function d(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function c(P){var H=typeof Map=="function"?new Map:void 0;return c=function(q){if(q===null||!S(q))return q;if(typeof q!="function")throw new TypeError("Super expression must either be null or a function");if(typeof H<"u"){if(H.has(q))return H.get(q);H.set(q,C)}function C(){return p(q,arguments,T(this).constructor)}return C.prototype=Object.create(q.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E(C,q)},c(P)}function p(P,H,O){return m()?p=Reflect.construct.bind():p=function(C,j,V){var N=[null];N.push.apply(N,j);var Y=Function.bind.apply(C,N),X=new Y;return V&&E(X,V.prototype),X},p.apply(null,arguments)}function m(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(P){return Function.toString.call(P).indexOf("[native code]")!==-1}function E(P,H){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,C){return q.__proto__=C,q},E(P,H)}function T(P){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},T(P)}y.ResponseError=function(P){l(O,P);var H=_(O);function O(q){var C;b(this,O),C=H.call(this);var j=A(q);return C.message=j.message||j,C.code=j.code,C.status=q.status,C.headers=q.headers,C.body=q.body,C}return g(O)}(c(Error));function A(P){return P.status===502?"No connection with server":P.body||"Status Code ".concat(P.status," (").concat(P.statusText,")")}}])})},"./node_modules/backo2/index.js":a=>{a.exports=o;function o(u){u=u||{},this.ms=u.min||100,this.max=u.max||1e4,this.factor=u.factor||2,this.jitter=u.jitter>0&&u.jitter<=1?u.jitter:0,this.attempts=0}o.prototype.duration=function(){var u=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var y=Math.random(),w=Math.floor(y*this.jitter*u);u=(Math.floor(y*10)&1)==0?u-w:u+w}return Math.min(u,this.max)|0},o.prototype.reset=function(){this.attempts=0},o.prototype.setMin=function(u){this.ms=u},o.prototype.setMax=function(u){this.max=u},o.prototype.setJitter=function(u){this.jitter=u}},"./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js":(a,o)=>{(function(u){o.encode=function(y){var w=new Uint8Array(y),v,g=w.length,b="";for(v=0;v<g;v+=3)b+=u[w[v]>>2],b+=u[(w[v]&3)<<4|w[v+1]>>4],b+=u[(w[v+1]&15)<<2|w[v+2]>>6],b+=u[w[v+2]&63];return g%3===2?b=b.substring(0,b.length-1)+"=":g%3===1&&(b=b.substring(0,b.length-2)+"=="),b},o.decode=function(y){var w=y.length*.75,v=y.length,g,b=0,l,_,h,d;y[y.length-1]==="="&&(w--,y[y.length-2]==="="&&w--);var c=new ArrayBuffer(w),p=new Uint8Array(c);for(g=0;g<v;g+=4)l=u.indexOf(y[g]),_=u.indexOf(y[g+1]),h=u.indexOf(y[g+2]),d=u.indexOf(y[g+3]),p[b++]=l<<2|_>>4,p[b++]=(_&15)<<4|h>>2,p[b++]=(h&3)<<6|d&63;return c}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},"./node_modules/blob/index.js":a=>{var o=typeof o<"u"?o:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,u=function(){try{var l=new Blob(["hi"]);return l.size===2}catch{return!1}}(),y=u&&function(){try{var l=new Blob([new Uint8Array([1,2])]);return l.size===2}catch{return!1}}(),w=o&&o.prototype.append&&o.prototype.getBlob;function v(l){return l.map(function(_){if(_.buffer instanceof ArrayBuffer){var h=_.buffer;if(_.byteLength!==h.byteLength){var d=new Uint8Array(_.byteLength);d.set(new Uint8Array(h,_.byteOffset,_.byteLength)),h=d.buffer}return h}return _})}function g(l,_){_=_||{};var h=new o;return v(l).forEach(function(d){h.append(d)}),_.type?h.getBlob(_.type):h.getBlob()}function b(l,_){return new Blob(v(l),_||{})}typeof Blob<"u"&&(g.prototype=Blob.prototype,b.prototype=Blob.prototype),a.exports=function(){return u?y?Blob:b:w?g:void 0}()},"./node_modules/component-bind/index.js":a=>{var o=[].slice;a.exports=function(u,y){if(typeof y=="string"&&(y=u[y]),typeof y!="function")throw new Error("bind() requires a function");var w=o.call(arguments,2);return function(){return y.apply(u,w.concat(o.call(arguments)))}}},"./node_modules/component-emitter/index.js":a=>{a.exports=o;function o(y){if(y)return u(y)}function u(y){for(var w in o.prototype)y[w]=o.prototype[w];return y}o.prototype.on=o.prototype.addEventListener=function(y,w){return this._callbacks=this._callbacks||{},(this._callbacks["$"+y]=this._callbacks["$"+y]||[]).push(w),this},o.prototype.once=function(y,w){function v(){this.off(y,v),w.apply(this,arguments)}return v.fn=w,this.on(y,v),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(y,w){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var v=this._callbacks["$"+y];if(!v)return this;if(arguments.length==1)return delete this._callbacks["$"+y],this;for(var g,b=0;b<v.length;b++)if(g=v[b],g===w||g.fn===w){v.splice(b,1);break}return v.length===0&&delete this._callbacks["$"+y],this},o.prototype.emit=function(y){this._callbacks=this._callbacks||{};for(var w=new Array(arguments.length-1),v=this._callbacks["$"+y],g=1;g<arguments.length;g++)w[g-1]=arguments[g];if(v){v=v.slice(0);for(var g=0,b=v.length;g<b;++g)v[g].apply(this,w)}return this},o.prototype.listeners=function(y){return this._callbacks=this._callbacks||{},this._callbacks["$"+y]||[]},o.prototype.hasListeners=function(y){return!!this.listeners(y).length}},"./node_modules/component-inherit/index.js":a=>{a.exports=function(o,u){var y=function(){};y.prototype=u.prototype,o.prototype=new y,o.prototype.constructor=o}},"./node_modules/debug/src/browser.js":(a,o,u)=>{o=a.exports=u("./node_modules/debug/src/debug.js"),o.log=v,o.formatArgs=w,o.save=g,o.load=b,o.useColors=y,o.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:l(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function y(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}o.formatters.j=function(_){try{return JSON.stringify(_)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}};function w(_){var h=this.useColors;if(_[0]=(h?"%c":"")+this.namespace+(h?" %c":" ")+_[0]+(h?"%c ":" ")+"+"+o.humanize(this.diff),!!h){var d="color: "+this.color;_.splice(1,0,d,"color: inherit");var c=0,p=0;_[0].replace(/%[a-zA-Z%]/g,function(m){m!=="%%"&&(c++,m==="%c"&&(p=c))}),_.splice(p,0,d)}}function v(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(_){try{_==null?o.storage.removeItem("debug"):o.storage.debug=_}catch{}}function b(){var _;try{_=o.storage.debug}catch{}return!_&&typeof process<"u"&&"env"in process&&(_=r.DEBUG),_}o.enable(b());function l(){try{return window.localStorage}catch{}}},"./node_modules/debug/src/debug.js":(a,o,u)=>{o=a.exports=w.debug=w.default=w,o.coerce=_,o.disable=b,o.enable=g,o.enabled=l,o.humanize=u("./node_modules/ms/index.js"),o.instances=[],o.names=[],o.skips=[],o.formatters={};function y(h){var d=0,c;for(c in h)d=(d<<5)-d+h.charCodeAt(c),d|=0;return o.colors[Math.abs(d)%o.colors.length]}function w(h){var d;function c(){if(c.enabled){var p=c,m=+new Date,S=m-(d||m);p.diff=S,p.prev=d,p.curr=m,d=m;for(var E=new Array(arguments.length),T=0;T<E.length;T++)E[T]=arguments[T];E[0]=o.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");var A=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,function(H,O){if(H==="%%")return H;A++;var q=o.formatters[O];if(typeof q=="function"){var C=E[A];H=q.call(p,C),E.splice(A,1),A--}return H}),o.formatArgs.call(p,E);var P=c.log||o.log||console.log.bind(console);P.apply(p,E)}}return c.namespace=h,c.enabled=o.enabled(h),c.useColors=o.useColors(),c.color=y(h),c.destroy=v,typeof o.init=="function"&&o.init(c),o.instances.push(c),c}function v(){var h=o.instances.indexOf(this);return h!==-1?(o.instances.splice(h,1),!0):!1}function g(h){o.save(h),o.names=[],o.skips=[];var d,c=(typeof h=="string"?h:"").split(/[\s,]+/),p=c.length;for(d=0;d<p;d++)c[d]&&(h=c[d].replace(/\*/g,".*?"),h[0]==="-"?o.skips.push(new RegExp("^"+h.substr(1)+"$")):o.names.push(new RegExp("^"+h+"$")));for(d=0;d<o.instances.length;d++){var m=o.instances[d];m.enabled=o.enabled(m.namespace)}}function b(){o.enable("")}function l(h){if(h[h.length-1]==="*")return!0;var d,c;for(d=0,c=o.skips.length;d<c;d++)if(o.skips[d].test(h))return!1;for(d=0,c=o.names.length;d<c;d++)if(o.names[d].test(h))return!0;return!1}function _(h){return h instanceof Error?h.stack||h.message:h}},"./node_modules/engine.io-client/lib/globalThis.browser.js":a=>{a.exports=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}()},"./node_modules/engine.io-client/lib/index.js":(a,o,u)=>{a.exports=u("./node_modules/engine.io-client/lib/socket.js"),a.exports.parser=u("./node_modules/engine.io-parser/lib/browser.js")},"./node_modules/engine.io-client/lib/socket.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/transports/index.js"),w=u("./node_modules/component-emitter/index.js"),v=u("./node_modules/debug/src/browser.js")("engine.io-client:socket"),g=u("./node_modules/indexof/index.js"),b=u("./node_modules/engine.io-parser/lib/browser.js"),l=u("./node_modules/parseuri/index.js"),_=u("./node_modules/parseqs/index.js");a.exports=h;function h(c,p){if(!(this instanceof h))return new h(c,p);p=p||{},c&&typeof c=="object"&&(p=c,c=null),c?(c=l(c),p.hostname=c.host,p.secure=c.protocol==="https"||c.protocol==="wss",p.port=c.port,c.query&&(p.query=c.query)):p.host&&(p.hostname=l(p.host).host),this.secure=p.secure!=null?p.secure:typeof location<"u"&&location.protocol==="https:",p.hostname&&!p.port&&(p.port=this.secure?"443":"80"),this.agent=p.agent||!1,this.hostname=p.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=p.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=p.query||{},typeof this.query=="string"&&(this.query=_.decode(this.query)),this.upgrade=p.upgrade!==!1,this.path=(p.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!p.forceJSONP,this.jsonp=p.jsonp!==!1,this.forceBase64=!!p.forceBase64,this.enablesXDR=!!p.enablesXDR,this.withCredentials=p.withCredentials!==!1,this.timestampParam=p.timestampParam||"t",this.timestampRequests=p.timestampRequests,this.transports=p.transports||["polling","websocket"],this.transportOptions=p.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=p.policyPort||843,this.rememberUpgrade=p.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=p.onlyBinaryUpgrades,this.perMessageDeflate=p.perMessageDeflate!==!1?p.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=p.pfx||void 0,this.key=p.key||void 0,this.passphrase=p.passphrase||void 0,this.cert=p.cert||void 0,this.ca=p.ca||void 0,this.ciphers=p.ciphers||void 0,this.rejectUnauthorized=p.rejectUnauthorized===void 0?!0:p.rejectUnauthorized,this.forceNode=!!p.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(p.extraHeaders&&Object.keys(p.extraHeaders).length>0&&(this.extraHeaders=p.extraHeaders),p.localAddress&&(this.localAddress=p.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}h.priorWebsocketSuccess=!1,w(h.prototype),h.protocol=b.protocol,h.Socket=h,h.Transport=u("./node_modules/engine.io-client/lib/transport.js"),h.transports=u("./node_modules/engine.io-client/lib/transports/index.js"),h.parser=u("./node_modules/engine.io-parser/lib/browser.js"),h.prototype.createTransport=function(c){v('creating transport "%s"',c);var p=d(this.query);p.EIO=b.protocol,p.transport=c;var m=this.transportOptions[c]||{};this.id&&(p.sid=this.id);var S=new y[c]({query:p,socket:this,agent:m.agent||this.agent,hostname:m.hostname||this.hostname,port:m.port||this.port,secure:m.secure||this.secure,path:m.path||this.path,forceJSONP:m.forceJSONP||this.forceJSONP,jsonp:m.jsonp||this.jsonp,forceBase64:m.forceBase64||this.forceBase64,enablesXDR:m.enablesXDR||this.enablesXDR,withCredentials:m.withCredentials||this.withCredentials,timestampRequests:m.timestampRequests||this.timestampRequests,timestampParam:m.timestampParam||this.timestampParam,policyPort:m.policyPort||this.policyPort,pfx:m.pfx||this.pfx,key:m.key||this.key,passphrase:m.passphrase||this.passphrase,cert:m.cert||this.cert,ca:m.ca||this.ca,ciphers:m.ciphers||this.ciphers,rejectUnauthorized:m.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:m.perMessageDeflate||this.perMessageDeflate,extraHeaders:m.extraHeaders||this.extraHeaders,forceNode:m.forceNode||this.forceNode,localAddress:m.localAddress||this.localAddress,requestTimeout:m.requestTimeout||this.requestTimeout,protocols:m.protocols||void 0,isReactNative:this.isReactNative});return S};function d(c){var p={};for(var m in c)c.hasOwnProperty(m)&&(p[m]=c[m]);return p}h.prototype.open=function(){var c;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)c="websocket";else if(this.transports.length===0){var p=this;setTimeout(function(){p.emit("error","No transports available")},0);return}else c=this.transports[0];this.readyState="opening";try{c=this.createTransport(c)}catch{this.transports.shift(),this.open();return}c.open(),this.setTransport(c)},h.prototype.setTransport=function(c){v("setting transport %s",c.name);var p=this;this.transport&&(v("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=c,c.on("drain",function(){p.onDrain()}).on("packet",function(m){p.onPacket(m)}).on("error",function(m){p.onError(m)}).on("close",function(){p.onClose("transport close")})},h.prototype.probe=function(c){v('probing transport "%s"',c);var p=this.createTransport(c,{probe:1}),m=!1,S=this;h.priorWebsocketSuccess=!1;function E(){if(S.onlyBinaryUpgrades){var C=!this.supportsBinary&&S.transport.supportsBinary;m=m||C}m||(v('probe transport "%s" opened',c),p.send([{type:"ping",data:"probe"}]),p.once("packet",function(j){if(!m)if(j.type==="pong"&&j.data==="probe"){if(v('probe transport "%s" pong',c),S.upgrading=!0,S.emit("upgrading",p),!p)return;h.priorWebsocketSuccess=p.name==="websocket",v('pausing current transport "%s"',S.transport.name),S.transport.pause(function(){m||S.readyState!=="closed"&&(v("changing transport and sending upgrade packet"),q(),S.setTransport(p),p.send([{type:"upgrade"}]),S.emit("upgrade",p),p=null,S.upgrading=!1,S.flush())})}else{v('probe transport "%s" failed',c);var V=new Error("probe error");V.transport=p.name,S.emit("upgradeError",V)}}))}function T(){m||(m=!0,q(),p.close(),p=null)}function A(C){var j=new Error("probe error: "+C);j.transport=p.name,T(),v('probe transport "%s" failed because of error: %s',c,C),S.emit("upgradeError",j)}function P(){A("transport closed")}function H(){A("socket closed")}function O(C){p&&C.name!==p.name&&(v('"%s" works - aborting "%s"',C.name,p.name),T())}function q(){p.removeListener("open",E),p.removeListener("error",A),p.removeListener("close",P),S.removeListener("close",H),S.removeListener("upgrading",O)}p.once("open",E),p.once("error",A),p.once("close",P),this.once("close",H),this.once("upgrading",O),p.open()},h.prototype.onOpen=function(){if(v("socket open"),this.readyState="open",h.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){v("starting upgrade probes");for(var c=0,p=this.upgrades.length;c<p;c++)this.probe(this.upgrades[c])}},h.prototype.onPacket=function(c){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(v('socket receive: type "%s", data "%s"',c.type,c.data),this.emit("packet",c),this.emit("heartbeat"),c.type){case"open":this.onHandshake(JSON.parse(c.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var p=new Error("server error");p.code=c.data,this.onError(p);break;case"message":this.emit("data",c.data),this.emit("message",c.data);break}else v('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(c){this.emit("handshake",c),this.id=c.sid,this.transport.query.sid=c.sid,this.upgrades=this.filterUpgrades(c.upgrades),this.pingInterval=c.pingInterval,this.pingTimeout=c.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(c){clearTimeout(this.pingTimeoutTimer);var p=this;p.pingTimeoutTimer=setTimeout(function(){p.readyState!=="closed"&&p.onClose("ping timeout")},c||p.pingInterval+p.pingTimeout)},h.prototype.setPing=function(){var c=this;clearTimeout(c.pingIntervalTimer),c.pingIntervalTimer=setTimeout(function(){v("writing ping packet - expecting pong within %sms",c.pingTimeout),c.ping(),c.onHeartbeat(c.pingTimeout)},c.pingInterval)},h.prototype.ping=function(){var c=this;this.sendPacket("ping",function(){c.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},h.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(v("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(c,p,m){return this.sendPacket("message",c,p,m),this},h.prototype.sendPacket=function(c,p,m,S){if(typeof p=="function"&&(S=p,p=void 0),typeof m=="function"&&(S=m,m=null),!(this.readyState==="closing"||this.readyState==="closed")){m=m||{},m.compress=m.compress!==!1;var E={type:c,data:p,options:m};this.emit("packetCreate",E),this.writeBuffer.push(E),S&&this.once("flush",S),this.flush()}},h.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var c=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?S():p()}):this.upgrading?S():p()}function p(){c.onClose("forced close"),v("socket closing - telling transport to close"),c.transport.close()}function m(){c.removeListener("upgrade",m),c.removeListener("upgradeError",m),p()}function S(){c.once("upgrade",m),c.once("upgradeError",m)}return this},h.prototype.onError=function(c){v("socket error %j",c),h.priorWebsocketSuccess=!1,this.emit("error",c),this.onClose("transport error",c)},h.prototype.onClose=function(c,p){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){v('socket close with reason: "%s"',c);var m=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",c,p),m.writeBuffer=[],m.prevBufferLen=0}},h.prototype.filterUpgrades=function(c){for(var p=[],m=0,S=c.length;m<S;m++)~g(this.transports,c[m])&&p.push(c[m]);return p}},"./node_modules/engine.io-client/lib/transport.js":(a,o,u)=>{var y=u("./node_modules/engine.io-parser/lib/browser.js"),w=u("./node_modules/component-emitter/index.js");a.exports=v;function v(g){this.path=g.path,this.hostname=g.hostname,this.port=g.port,this.secure=g.secure,this.query=g.query,this.timestampParam=g.timestampParam,this.timestampRequests=g.timestampRequests,this.readyState="",this.agent=g.agent||!1,this.socket=g.socket,this.enablesXDR=g.enablesXDR,this.withCredentials=g.withCredentials,this.pfx=g.pfx,this.key=g.key,this.passphrase=g.passphrase,this.cert=g.cert,this.ca=g.ca,this.ciphers=g.ciphers,this.rejectUnauthorized=g.rejectUnauthorized,this.forceNode=g.forceNode,this.isReactNative=g.isReactNative,this.extraHeaders=g.extraHeaders,this.localAddress=g.localAddress}w(v.prototype),v.prototype.onError=function(g,b){var l=new Error(g);return l.type="TransportError",l.description=b,this.emit("error",l),this},v.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},v.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},v.prototype.send=function(g){if(this.readyState==="open")this.write(g);else throw new Error("Transport not open")},v.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},v.prototype.onData=function(g){var b=y.decodePacket(g,this.socket.binaryType);this.onPacket(b)},v.prototype.onPacket=function(g){this.emit("packet",g)},v.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},"./node_modules/engine.io-client/lib/transports/index.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js"),w=u("./node_modules/engine.io-client/lib/transports/polling-xhr.js"),v=u("./node_modules/engine.io-client/lib/transports/polling-jsonp.js"),g=u("./node_modules/engine.io-client/lib/transports/websocket.js");o.polling=b,o.websocket=g;function b(l){var _,h=!1,d=!1,c=l.jsonp!==!1;if(typeof location<"u"){var p=location.protocol==="https:",m=location.port;m||(m=p?443:80),h=l.hostname!==location.hostname||m!==l.port,d=l.secure!==p}if(l.xdomain=h,l.xscheme=d,_=new y(l),"open"in _&&!l.forceJSONP)return new w(l);if(!c)throw new Error("JSONP disabled");return new v(l)}},"./node_modules/engine.io-client/lib/transports/polling-jsonp.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/transports/polling.js"),w=u("./node_modules/component-inherit/index.js"),v=u("./node_modules/engine.io-client/lib/globalThis.browser.js");a.exports=h;var g=/\n/g,b=/\\n/g,l;function _(){}function h(d){y.call(this,d),this.query=this.query||{},l||(l=v.___eio=v.___eio||[]),this.index=l.length;var c=this;l.push(function(p){c.onData(p)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){c.script&&(c.script.onerror=_)},!1)}w(h,y),h.prototype.supportsBinary=!1,h.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),y.prototype.doClose.call(this)},h.prototype.doPoll=function(){var d=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),c.async=!0,c.src=this.uri(),c.onerror=function(S){d.onError("jsonp poll error",S)};var p=document.getElementsByTagName("script")[0];p?p.parentNode.insertBefore(c,p):(document.head||document.body).appendChild(c),this.script=c;var m=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);m&&setTimeout(function(){var S=document.createElement("iframe");document.body.appendChild(S),document.body.removeChild(S)},100)},h.prototype.doWrite=function(d,c){var p=this;if(!this.form){var m=document.createElement("form"),S=document.createElement("textarea"),E=this.iframeId="eio_iframe_"+this.index,T;m.className="socketio",m.style.position="absolute",m.style.top="-1000px",m.style.left="-1000px",m.target=E,m.method="POST",m.setAttribute("accept-charset","utf-8"),S.name="d",m.appendChild(S),document.body.appendChild(m),this.form=m,this.area=S}this.form.action=this.uri();function A(){P(),c()}function P(){if(p.iframe)try{p.form.removeChild(p.iframe)}catch(O){p.onError("jsonp polling iframe removal error",O)}try{var H='<iframe src="javascript:0" name="'+p.iframeId+'">';T=document.createElement(H)}catch{T=document.createElement("iframe"),T.name=p.iframeId,T.src="javascript:0"}T.id=p.iframeId,p.form.appendChild(T),p.iframe=T}P(),d=d.replace(b,`\\
`),this.area.value=d.replace(g,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){p.iframe.readyState==="complete"&&A()}:this.iframe.onload=A}},"./node_modules/engine.io-client/lib/transports/polling-xhr.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js"),w=u("./node_modules/engine.io-client/lib/transports/polling.js"),v=u("./node_modules/component-emitter/index.js"),g=u("./node_modules/component-inherit/index.js"),b=u("./node_modules/debug/src/browser.js")("engine.io-client:polling-xhr"),l=u("./node_modules/engine.io-client/lib/globalThis.browser.js");a.exports=h,a.exports.Request=d;function _(){}function h(m){if(w.call(this,m),this.requestTimeout=m.requestTimeout,this.extraHeaders=m.extraHeaders,typeof location<"u"){var S=location.protocol==="https:",E=location.port;E||(E=S?443:80),this.xd=typeof location<"u"&&m.hostname!==location.hostname||E!==m.port,this.xs=m.secure!==S}}g(h,w),h.prototype.supportsBinary=!0,h.prototype.request=function(m){return m=m||{},m.uri=this.uri(),m.xd=this.xd,m.xs=this.xs,m.agent=this.agent||!1,m.supportsBinary=this.supportsBinary,m.enablesXDR=this.enablesXDR,m.withCredentials=this.withCredentials,m.pfx=this.pfx,m.key=this.key,m.passphrase=this.passphrase,m.cert=this.cert,m.ca=this.ca,m.ciphers=this.ciphers,m.rejectUnauthorized=this.rejectUnauthorized,m.requestTimeout=this.requestTimeout,m.extraHeaders=this.extraHeaders,new d(m)},h.prototype.doWrite=function(m,S){var E=typeof m!="string"&&m!==void 0,T=this.request({method:"POST",data:m,isBinary:E}),A=this;T.on("success",S),T.on("error",function(P){A.onError("xhr post error",P)}),this.sendXhr=T},h.prototype.doPoll=function(){b("xhr poll");var m=this.request(),S=this;m.on("data",function(E){S.onData(E)}),m.on("error",function(E){S.onError("xhr poll error",E)}),this.pollXhr=m};function d(m){this.method=m.method||"GET",this.uri=m.uri,this.xd=!!m.xd,this.xs=!!m.xs,this.async=m.async!==!1,this.data=m.data!==void 0?m.data:null,this.agent=m.agent,this.isBinary=m.isBinary,this.supportsBinary=m.supportsBinary,this.enablesXDR=m.enablesXDR,this.withCredentials=m.withCredentials,this.requestTimeout=m.requestTimeout,this.pfx=m.pfx,this.key=m.key,this.passphrase=m.passphrase,this.cert=m.cert,this.ca=m.ca,this.ciphers=m.ciphers,this.rejectUnauthorized=m.rejectUnauthorized,this.extraHeaders=m.extraHeaders,this.create()}if(v(d.prototype),d.prototype.create=function(){var m={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};m.pfx=this.pfx,m.key=this.key,m.passphrase=this.passphrase,m.cert=this.cert,m.ca=this.ca,m.ciphers=this.ciphers,m.rejectUnauthorized=this.rejectUnauthorized;var S=this.xhr=new y(m),E=this;try{b("xhr open %s: %s",this.method,this.uri),S.open(this.method,this.uri,this.async);try{if(this.extraHeaders){S.setDisableHeaderCheck&&S.setDisableHeaderCheck(!0);for(var T in this.extraHeaders)this.extraHeaders.hasOwnProperty(T)&&S.setRequestHeader(T,this.extraHeaders[T])}}catch{}if(this.method==="POST")try{this.isBinary?S.setRequestHeader("Content-type","application/octet-stream"):S.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{S.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in S&&(S.withCredentials=this.withCredentials),this.requestTimeout&&(S.timeout=this.requestTimeout),this.hasXDR()?(S.onload=function(){E.onLoad()},S.onerror=function(){E.onError(S.responseText)}):S.onreadystatechange=function(){if(S.readyState===2)try{var A=S.getResponseHeader("Content-Type");(E.supportsBinary&&A==="application/octet-stream"||A==="application/octet-stream; charset=UTF-8")&&(S.responseType="arraybuffer")}catch{}S.readyState===4&&(S.status===200||S.status===1223?E.onLoad():setTimeout(function(){E.onError(typeof S.status=="number"?S.status:0)},0))},b("xhr data %s",this.data),S.send(this.data)}catch(A){setTimeout(function(){E.onError(A)},0);return}typeof document<"u"&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(m){this.emit("data",m),this.onSuccess()},d.prototype.onError=function(m){this.emit("error",m),this.cleanup(!0)},d.prototype.cleanup=function(m){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=_:this.xhr.onreadystatechange=_,m)try{this.xhr.abort()}catch{}typeof document<"u"&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var m;try{var S;try{S=this.xhr.getResponseHeader("Content-Type")}catch{}S==="application/octet-stream"||S==="application/octet-stream; charset=UTF-8"?m=this.xhr.response||this.xhr.responseText:m=this.xhr.responseText}catch(E){this.onError(E)}m!=null&&this.onData(m)},d.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",p);else if(typeof addEventListener=="function"){var c="onpagehide"in l?"pagehide":"unload";addEventListener(c,p,!1)}}function p(){for(var m in d.requests)d.requests.hasOwnProperty(m)&&d.requests[m].abort()}},"./node_modules/engine.io-client/lib/transports/polling.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/transport.js"),w=u("./node_modules/parseqs/index.js"),v=u("./node_modules/engine.io-parser/lib/browser.js"),g=u("./node_modules/component-inherit/index.js"),b=u("./node_modules/yeast/index.js"),l=u("./node_modules/debug/src/browser.js")("engine.io-client:polling");a.exports=h;var _=function(){var d=u("./node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js"),c=new d({xdomain:!1});return c.responseType!=null}();function h(d){var c=d&&d.forceBase64;(!_||c)&&(this.supportsBinary=!1),y.call(this,d)}g(h,y),h.prototype.name="polling",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(d){var c=this;this.readyState="pausing";function p(){l("paused"),c.readyState="paused",d()}if(this.polling||!this.writable){var m=0;this.polling&&(l("we are currently polling - waiting to pause"),m++,this.once("pollComplete",function(){l("pre-pause polling complete"),--m||p()})),this.writable||(l("we are currently writing - waiting to pause"),m++,this.once("drain",function(){l("pre-pause writing complete"),--m||p()}))}else p()},h.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},h.prototype.onData=function(d){var c=this;l("polling got data %s",d);var p=function(m,S,E){if(c.readyState==="opening"&&m.type==="open"&&c.onOpen(),m.type==="close")return c.onClose(),!1;c.onPacket(m)};v.decodePayload(d,this.socket.binaryType,p),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},h.prototype.doClose=function(){var d=this;function c(){l("writing close packet"),d.write([{type:"close"}])}this.readyState==="open"?(l("transport open - closing"),c()):(l("transport not open - deferring close"),this.once("open",c))},h.prototype.write=function(d){var c=this;this.writable=!1;var p=function(){c.writable=!0,c.emit("drain")};v.encodePayload(d,this.supportsBinary,function(m){c.doWrite(m,p)})},h.prototype.uri=function(){var d=this.query||{},c=this.secure?"https":"http",p="";this.timestampRequests!==!1&&(d[this.timestampParam]=b()),!this.supportsBinary&&!d.sid&&(d.b64=1),d=w.encode(d),this.port&&(c==="https"&&Number(this.port)!==443||c==="http"&&Number(this.port)!==80)&&(p=":"+this.port),d.length&&(d="?"+d);var m=this.hostname.indexOf(":")!==-1;return c+"://"+(m?"["+this.hostname+"]":this.hostname)+p+this.path+d}},"./node_modules/engine.io-client/lib/transports/websocket.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/transport.js"),w=u("./node_modules/engine.io-parser/lib/browser.js"),v=u("./node_modules/parseqs/index.js"),g=u("./node_modules/component-inherit/index.js"),b=u("./node_modules/yeast/index.js"),l=u("./node_modules/debug/src/browser.js")("engine.io-client:websocket"),_,h;if(typeof WebSocket<"u"?_=WebSocket:typeof self<"u"&&(_=self.WebSocket||self.MozWebSocket),typeof window>"u")try{h=u("?1bcf")}catch{}var d=_||h;a.exports=c;function c(p){var m=p&&p.forceBase64;m&&(this.supportsBinary=!1),this.perMessageDeflate=p.perMessageDeflate,this.usingBrowserWebSocket=_&&!p.forceNode,this.protocols=p.protocols,this.usingBrowserWebSocket||(d=h),y.call(this,p)}g(c,y),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen=function(){if(this.check()){var p=this.uri(),m=this.protocols,S={};this.isReactNative||(S.agent=this.agent,S.perMessageDeflate=this.perMessageDeflate,S.pfx=this.pfx,S.key=this.key,S.passphrase=this.passphrase,S.cert=this.cert,S.ca=this.ca,S.ciphers=this.ciphers,S.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(S.headers=this.extraHeaders),this.localAddress&&(S.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?m?new d(p,m):new d(p):new d(p,m,S)}catch(E){return this.emit("error",E)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},c.prototype.addEventListeners=function(){var p=this;this.ws.onopen=function(){p.onOpen()},this.ws.onclose=function(){p.onClose()},this.ws.onmessage=function(m){p.onData(m.data)},this.ws.onerror=function(m){p.onError("websocket error",m)}},c.prototype.write=function(p){var m=this;this.writable=!1;for(var S=p.length,E=0,T=S;E<T;E++)(function(P){w.encodePacket(P,m.supportsBinary,function(H){if(!m.usingBrowserWebSocket){var O={};if(P.options&&(O.compress=P.options.compress),m.perMessageDeflate){var q=typeof H=="string"?Buffer.byteLength(H):H.length;q<m.perMessageDeflate.threshold&&(O.compress=!1)}}try{m.usingBrowserWebSocket?m.ws.send(H):m.ws.send(H,O)}catch{l("websocket closed before onclose event")}--S||A()})})(p[E]);function A(){m.emit("flush"),setTimeout(function(){m.writable=!0,m.emit("drain")},0)}},c.prototype.onClose=function(){y.prototype.onClose.call(this)},c.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()},c.prototype.uri=function(){var p=this.query||{},m=this.secure?"wss":"ws",S="";this.port&&(m==="wss"&&Number(this.port)!==443||m==="ws"&&Number(this.port)!==80)&&(S=":"+this.port),this.timestampRequests&&(p[this.timestampParam]=b()),this.supportsBinary||(p.b64=1),p=v.encode(p),p.length&&(p="?"+p);var E=this.hostname.indexOf(":")!==-1;return m+"://"+(E?"["+this.hostname+"]":this.hostname)+S+this.path+p},c.prototype.check=function(){return!!d&&!("__initialize"in d&&this.name===c.prototype.name)}},"./node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js":(a,o,u)=>{var y=u("./node_modules/has-cors/index.js"),w=u("./node_modules/engine.io-client/lib/globalThis.browser.js");a.exports=function(v){var g=v.xdomain,b=v.xscheme,l=v.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!g||y))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!b&&l)return new XDomainRequest}catch{}if(!g)try{return new w[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}},"./node_modules/engine.io-parser/lib/browser.js":(a,o,u)=>{var y=u("./node_modules/engine.io-parser/lib/keys.js"),w=u("./node_modules/has-binary2/index.js"),v=u("./node_modules/arraybuffer.slice/index.js"),g=u("./node_modules/after/index.js"),b=u("./node_modules/engine.io-parser/lib/utf8.js"),l;typeof ArrayBuffer<"u"&&(l=u("./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js"));var _=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),h=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),d=_||h;o.protocol=3;var c=o.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=y(c),m={type:"error",data:"parser error"},S=u("./node_modules/blob/index.js");o.encodePacket=function(q,C,j,V){typeof C=="function"&&(V=C,C=!1),typeof j=="function"&&(V=j,j=null);var N=q.data===void 0?void 0:q.data.buffer||q.data;if(typeof ArrayBuffer<"u"&&N instanceof ArrayBuffer)return T(q,C,V);if(typeof S<"u"&&N instanceof S)return P(q,C,V);if(N&&N.base64)return E(q,V);var Y=c[q.type];return q.data!==void 0&&(Y+=j?b.encode(String(q.data),{strict:!1}):String(q.data)),V(""+Y)};function E(q,C){var j="b"+o.packets[q.type]+q.data.data;return C(j)}function T(q,C,j){if(!C)return o.encodeBase64Packet(q,j);var V=q.data,N=new Uint8Array(V),Y=new Uint8Array(1+V.byteLength);Y[0]=c[q.type];for(var X=0;X<N.length;X++)Y[X+1]=N[X];return j(Y.buffer)}function A(q,C,j){if(!C)return o.encodeBase64Packet(q,j);var V=new FileReader;return V.onload=function(){o.encodePacket({type:q.type,data:V.result},C,!0,j)},V.readAsArrayBuffer(q.data)}function P(q,C,j){if(!C)return o.encodeBase64Packet(q,j);if(d)return A(q,C,j);var V=new Uint8Array(1);V[0]=c[q.type];var N=new S([V.buffer,q.data]);return j(N)}o.encodeBase64Packet=function(q,C){var j="b"+o.packets[q.type];if(typeof S<"u"&&q.data instanceof S){var V=new FileReader;return V.onload=function(){var Q=V.result.split(",")[1];C(j+Q)},V.readAsDataURL(q.data)}var N;try{N=String.fromCharCode.apply(null,new Uint8Array(q.data))}catch{for(var Y=new Uint8Array(q.data),X=new Array(Y.length),J=0;J<Y.length;J++)X[J]=Y[J];N=String.fromCharCode.apply(null,X)}return j+=btoa(N),C(j)},o.decodePacket=function(q,C,j){if(q===void 0)return m;if(typeof q=="string"){if(q.charAt(0)==="b")return o.decodeBase64Packet(q.substr(1),C);if(j&&(q=H(q),q===!1))return m;var N=q.charAt(0);return Number(N)!=N||!p[N]?m:q.length>1?{type:p[N],data:q.substring(1)}:{type:p[N]}}var V=new Uint8Array(q),N=V[0],Y=v(q,1);return S&&C==="blob"&&(Y=new S([Y])),{type:p[N],data:Y}};function H(q){try{q=b.decode(q,{strict:!1})}catch{return!1}return q}o.decodeBase64Packet=function(q,C){var j=p[q.charAt(0)];if(!l)return{type:j,data:{base64:!0,data:q.substr(1)}};var V=l.decode(q.substr(1));return C==="blob"&&S&&(V=new S([V])),{type:j,data:V}},o.encodePayload=function(q,C,j){typeof C=="function"&&(j=C,C=null);var V=w(q);if(C&&V)return S&&!d?o.encodePayloadAsBlob(q,j):o.encodePayloadAsArrayBuffer(q,j);if(!q.length)return j("0:");function N(X){return X.length+":"+X}function Y(X,J){o.encodePacket(X,V?C:!1,!1,function(Q){J(null,N(Q))})}O(q,Y,function(X,J){return j(J.join(""))})};function O(q,C,j){for(var V=new Array(q.length),N=g(q.length,j),Y=function(J,Q,W){C(Q,function(U,$){V[J]=$,W(U,V)})},X=0;X<q.length;X++)Y(X,q[X],N)}o.decodePayload=function(q,C,j){if(typeof q!="string")return o.decodePayloadAsBinary(q,C,j);typeof C=="function"&&(j=C,C=null);var V;if(q==="")return j(m,0,1);for(var N="",Y,X,J=0,Q=q.length;J<Q;J++){var W=q.charAt(J);if(W!==":"){N+=W;continue}if(N===""||N!=(Y=Number(N))||(X=q.substr(J+1,Y),N!=X.length))return j(m,0,1);if(X.length){if(V=o.decodePacket(X,C,!1),m.type===V.type&&m.data===V.data)return j(m,0,1);var U=j(V,J+Y,Q);if(U===!1)return}J+=Y,N=""}if(N!=="")return j(m,0,1)},o.encodePayloadAsArrayBuffer=function(q,C){if(!q.length)return C(new ArrayBuffer(0));function j(V,N){o.encodePacket(V,!0,!0,function(Y){return N(null,Y)})}O(q,j,function(V,N){var Y=N.reduce(function(Q,W){var U;return typeof W=="string"?U=W.length:U=W.byteLength,Q+U.toString().length+U+2},0),X=new Uint8Array(Y),J=0;return N.forEach(function(Q){var W=typeof Q=="string",U=Q;if(W){for(var Z=new Uint8Array(Q.length),$=0;$<Q.length;$++)Z[$]=Q.charCodeAt($);U=Z.buffer}W?X[J++]=0:X[J++]=1;for(var ee=U.byteLength.toString(),$=0;$<ee.length;$++)X[J++]=parseInt(ee[$]);X[J++]=255;for(var Z=new Uint8Array(U),$=0;$<Z.length;$++)X[J++]=Z[$]}),C(X.buffer)})},o.encodePayloadAsBlob=function(q,C){function j(V,N){o.encodePacket(V,!0,!0,function(Y){var X=new Uint8Array(1);if(X[0]=1,typeof Y=="string"){for(var J=new Uint8Array(Y.length),Q=0;Q<Y.length;Q++)J[Q]=Y.charCodeAt(Q);Y=J.buffer,X[0]=0}for(var W=Y instanceof ArrayBuffer?Y.byteLength:Y.size,U=W.toString(),$=new Uint8Array(U.length+1),Q=0;Q<U.length;Q++)$[Q]=parseInt(U[Q]);if($[U.length]=255,S){var ee=new S([X.buffer,$.buffer,Y]);N(null,ee)}})}O(q,j,function(V,N){return C(new S(N))})},o.decodePayloadAsBinary=function(q,C,j){typeof C=="function"&&(j=C,C=null);for(var V=q,N=[];V.byteLength>0;){for(var Y=new Uint8Array(V),X=Y[0]===0,J="",Q=1;Y[Q]!==255;Q++){if(J.length>310)return j(m,0,1);J+=Y[Q]}V=v(V,2+J.length),J=parseInt(J);var W=v(V,0,J);if(X)try{W=String.fromCharCode.apply(null,new Uint8Array(W))}catch{var U=new Uint8Array(W);W="";for(var Q=0;Q<U.length;Q++)W+=String.fromCharCode(U[Q])}N.push(W),V=v(V,J)}var $=N.length;N.forEach(function(ee,Z){j(o.decodePacket(ee,C,!0),Z,$)})}},"./node_modules/engine.io-parser/lib/keys.js":a=>{a.exports=Object.keys||function(u){var y=[],w=Object.prototype.hasOwnProperty;for(var v in u)w.call(u,v)&&y.push(v);return y}},"./node_modules/engine.io-parser/lib/utf8.js":a=>{/*! https://mths.be/utf8js v2.1.2 by @mathias */var o=String.fromCharCode;function u(m){for(var S=[],E=0,T=m.length,A,P;E<T;)A=m.charCodeAt(E++),A>=55296&&A<=56319&&E<T?(P=m.charCodeAt(E++),(P&64512)==56320?S.push(((A&1023)<<10)+(P&1023)+65536):(S.push(A),E--)):S.push(A);return S}function y(m){for(var S=m.length,E=-1,T,A="";++E<S;)T=m[E],T>65535&&(T-=65536,A+=o(T>>>10&1023|55296),T=56320|T&1023),A+=o(T);return A}function w(m,S){if(m>=55296&&m<=57343){if(S)throw Error("Lone surrogate U+"+m.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function v(m,S){return o(m>>S&63|128)}function g(m,S){if((m&4294967168)==0)return o(m);var E="";return(m&4294965248)==0?E=o(m>>6&31|192):(m&4294901760)==0?(w(m,S)||(m=65533),E=o(m>>12&15|224),E+=v(m,6)):(m&4292870144)==0&&(E=o(m>>18&7|240),E+=v(m,12),E+=v(m,6)),E+=o(m&63|128),E}function b(m,S){S=S||{};for(var E=S.strict!==!1,T=u(m),A=T.length,P=-1,H,O="";++P<A;)H=T[P],O+=g(H,E);return O}function l(){if(c>=d)throw Error("Invalid byte index");var m=h[c]&255;if(c++,(m&192)==128)return m&63;throw Error("Invalid continuation byte")}function _(m){var S,E,T,A,P;if(c>d)throw Error("Invalid byte index");if(c==d)return!1;if(S=h[c]&255,c++,(S&128)==0)return S;if((S&224)==192){if(E=l(),P=(S&31)<<6|E,P>=128)return P;throw Error("Invalid continuation byte")}if((S&240)==224){if(E=l(),T=l(),P=(S&15)<<12|E<<6|T,P>=2048)return w(P,m)?P:65533;throw Error("Invalid continuation byte")}if((S&248)==240&&(E=l(),T=l(),A=l(),P=(S&7)<<18|E<<12|T<<6|A,P>=65536&&P<=1114111))return P;throw Error("Invalid UTF-8 detected")}var h,d,c;function p(m,S){S=S||{};var E=S.strict!==!1;h=u(m),d=h.length,c=0;for(var T=[],A;(A=_(E))!==!1;)T.push(A);return y(T)}a.exports={version:"2.1.2",encode:b,decode:p}},"./node_modules/has-binary2/index.js":(a,o,u)=>{var y=u("./node_modules/isarray/index.js"),w=Object.prototype.toString,v=typeof Blob=="function"||typeof Blob<"u"&&w.call(Blob)==="[object BlobConstructor]",g=typeof File=="function"||typeof File<"u"&&w.call(File)==="[object FileConstructor]";a.exports=b;function b(l){if(!l||typeof l!="object")return!1;if(y(l)){for(var _=0,h=l.length;_<h;_++)if(b(l[_]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(l)||typeof ArrayBuffer=="function"&&l instanceof ArrayBuffer||v&&l instanceof Blob||g&&l instanceof File)return!0;if(l.toJSON&&typeof l.toJSON=="function"&&arguments.length===1)return b(l.toJSON(),!0);for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)&&b(l[d]))return!0;return!1}},"./node_modules/has-cors/index.js":a=>{try{a.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{a.exports=!1}},"./node_modules/indexof/index.js":a=>{var o=[].indexOf;a.exports=function(u,y){if(o)return u.indexOf(y);for(var w=0;w<u.length;++w)if(u[w]===y)return w;return-1}},"./node_modules/isarray/index.js":a=>{var o={}.toString;a.exports=Array.isArray||function(u){return o.call(u)=="[object Array]"}},"./node_modules/ms/index.js":a=>{var o=1e3,u=o*60,y=u*60,w=y*24,v=w*365.25;a.exports=function(h,d){d=d||{};var c=typeof h;if(c==="string"&&h.length>0)return g(h);if(c==="number"&&isNaN(h)===!1)return d.long?l(h):b(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function g(h){if(h=String(h),!(h.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(h);if(d){var c=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return c*v;case"days":case"day":case"d":return c*w;case"hours":case"hour":case"hrs":case"hr":case"h":return c*y;case"minutes":case"minute":case"mins":case"min":case"m":return c*u;case"seconds":case"second":case"secs":case"sec":case"s":return c*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function b(h){return h>=w?Math.round(h/w)+"d":h>=y?Math.round(h/y)+"h":h>=u?Math.round(h/u)+"m":h>=o?Math.round(h/o)+"s":h+"ms"}function l(h){return _(h,w,"day")||_(h,y,"hour")||_(h,u,"minute")||_(h,o,"second")||h+" ms"}function _(h,d,c){if(!(h<d))return h<d*1.5?Math.floor(h/d)+" "+c:Math.ceil(h/d)+" "+c+"s"}},"./node_modules/parseqs/index.js":(a,o)=>{o.encode=function(u){var y="";for(var w in u)u.hasOwnProperty(w)&&(y.length&&(y+="&"),y+=encodeURIComponent(w)+"="+encodeURIComponent(u[w]));return y},o.decode=function(u){for(var y={},w=u.split("&"),v=0,g=w.length;v<g;v++){var b=w[v].split("=");y[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}return y}},"./node_modules/parseuri/index.js":a=>{var o=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];a.exports=function(g){var b=g,l=g.indexOf("["),_=g.indexOf("]");l!=-1&&_!=-1&&(g=g.substring(0,l)+g.substring(l,_).replace(/:/g,";")+g.substring(_,g.length));for(var h=o.exec(g||""),d={},c=14;c--;)d[u[c]]=h[c]||"";return l!=-1&&_!=-1&&(d.source=b,d.host=d.host.substring(1,d.host.length-1).replace(/;/g,":"),d.authority=d.authority.replace("[","").replace("]","").replace(/;/g,":"),d.ipv6uri=!0),d.pathNames=y(d,d.path),d.queryKey=w(d,d.query),d};function y(v,g){var b=/\/{2,9}/g,l=g.replace(b,"/").split("/");return(g.substr(0,1)=="/"||g.length===0)&&l.splice(0,1),g.substr(g.length-1,1)=="/"&&l.splice(l.length-1,1),l}function w(v,g){var b={};return g.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(l,_,h){_&&(b[_]=h)}),b}},"./node_modules/socket.io-client/lib/index.js":(a,o,u)=>{var y=u("./node_modules/socket.io-client/lib/url.js"),w=u("./src/socket-parser.js"),v=u("./node_modules/socket.io-client/lib/manager.js"),g=u("./node_modules/debug/src/browser.js")("socket.io-client");a.exports=o=l;var b=o.managers={};function l(_,h){typeof _=="object"&&(h=_,_=void 0),h=h||{};var d=y(_),c=d.source,p=d.id,m=d.path,S=b[p]&&m in b[p].nsps,E=h.forceNew||h["force new connection"]||h.multiplex===!1||S,T;return E?(g("ignoring socket cache for %s",c),T=v(c,h)):(b[p]||(g("new io instance for %s",c),b[p]=v(c,h)),T=b[p]),d.query&&!h.query&&(h.query=d.query),T.socket(d.path,h)}o.protocol=w.protocol,o.connect=l,o.Manager=u("./node_modules/socket.io-client/lib/manager.js"),o.Socket=u("./node_modules/socket.io-client/lib/socket.js")},"./node_modules/socket.io-client/lib/manager.js":(a,o,u)=>{var y=u("./node_modules/engine.io-client/lib/index.js"),w=u("./node_modules/socket.io-client/lib/socket.js"),v=u("./node_modules/component-emitter/index.js"),g=u("./src/socket-parser.js"),b=u("./node_modules/socket.io-client/lib/on.js"),l=u("./node_modules/component-bind/index.js"),_=u("./node_modules/debug/src/browser.js")("socket.io-client:manager"),h=u("./node_modules/indexof/index.js"),d=u("./node_modules/backo2/index.js"),c=Object.prototype.hasOwnProperty;a.exports=p;function p(m,S){if(!(this instanceof p))return new p(m,S);m&&typeof m=="object"&&(S=m,m=void 0),S=S||{},S.path=S.path||"/socket.io",this.nsps={},this.subs=[],this.opts=S,this.reconnection(S.reconnection!==!1),this.reconnectionAttempts(S.reconnectionAttempts||1/0),this.reconnectionDelay(S.reconnectionDelay||1e3),this.reconnectionDelayMax(S.reconnectionDelayMax||5e3),this.randomizationFactor(S.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(S.timeout==null?2e4:S.timeout),this.readyState="closed",this.uri=m,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var E=S.parser||g;this.encoder=new E.Encoder,this.decoder=new E.Decoder,this.autoConnect=S.autoConnect!==!1,this.autoConnect&&this.open()}p.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var m in this.nsps)c.call(this.nsps,m)&&this.nsps[m].emit.apply(this.nsps[m],arguments)},p.prototype.updateSocketIds=function(){for(var m in this.nsps)c.call(this.nsps,m)&&(this.nsps[m].id=this.generateId(m))},p.prototype.generateId=function(m){return(m==="/"?"":m+"#")+this.engine.id},v(p.prototype),p.prototype.reconnection=function(m){return arguments.length?(this._reconnection=!!m,this):this._reconnection},p.prototype.reconnectionAttempts=function(m){return arguments.length?(this._reconnectionAttempts=m,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(m){return arguments.length?(this._reconnectionDelay=m,this.backoff&&this.backoff.setMin(m),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(m){return arguments.length?(this._randomizationFactor=m,this.backoff&&this.backoff.setJitter(m),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(m){return arguments.length?(this._reconnectionDelayMax=m,this.backoff&&this.backoff.setMax(m),this):this._reconnectionDelayMax},p.prototype.timeout=function(m){return arguments.length?(this._timeout=m,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},p.prototype.open=p.prototype.connect=function(m,S){if(_("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;_("opening %s",this.uri),this.engine=y(this.uri,this.opts);var E=this.engine,T=this;this.readyState="opening",this.skipReconnect=!1;var A=b(E,"open",function(){T.onopen(),m&&m()}),P=b(E,"error",function(q){if(_("connect_error"),T.cleanup(),T.readyState="closed",T.emitAll("connect_error",q),m){var C=new Error("Connection error");C.data=q,m(C)}else T.maybeReconnectOnOpen()});if(this._timeout!==!1){var H=this._timeout;_("connect attempt will timeout after %d",H),H===0&&A.destroy();var O=setTimeout(function(){_("connect attempt timed out after %d",H),A.destroy(),E.close(),E.emit("error","timeout"),T.emitAll("connect_timeout",H)},H);this.subs.push({destroy:function(){clearTimeout(O)}})}return this.subs.push(A),this.subs.push(P),this},p.prototype.onopen=function(){_("open"),this.cleanup(),this.readyState="open",this.emit("open");var m=this.engine;this.subs.push(b(m,"data",l(this,"ondata"))),this.subs.push(b(m,"ping",l(this,"onping"))),this.subs.push(b(m,"pong",l(this,"onpong"))),this.subs.push(b(m,"error",l(this,"onerror"))),this.subs.push(b(m,"close",l(this,"onclose"))),this.subs.push(b(this.decoder,"decoded",l(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(m){this.decoder.add(m)},p.prototype.ondecoded=function(m){this.emit("packet",m)},p.prototype.onerror=function(m){_("error",m),this.emitAll("error",m)},p.prototype.socket=function(m,S){var E=this.nsps[m];if(!E){E=new w(this,m,S),this.nsps[m]=E;var T=this;E.on("connecting",A),E.on("connect",function(){E.id=T.generateId(m)}),this.autoConnect&&A()}function A(){~h(T.connecting,E)||T.connecting.push(E)}return E},p.prototype.destroy=function(m){var S=h(this.connecting,m);~S&&this.connecting.splice(S,1),!this.connecting.length&&this.close()},p.prototype.packet=function(m){_("writing packet %j",m);var S=this;m.query&&m.type===0&&(m.nsp+="?"+m.query),S.encoding?S.packetBuffer.push(m):(S.encoding=!0,this.encoder.encode(m,function(E){for(var T=0;T<E.length;T++)S.engine.write(E[T],m.options);S.encoding=!1,S.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var m=this.packetBuffer.shift();this.packet(m)}},p.prototype.cleanup=function(){_("cleanup");for(var m=this.subs.length,S=0;S<m;S++){var E=this.subs.shift();E.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){_("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(m){_("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",m),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var m=this;if(this.backoff.attempts>=this._reconnectionAttempts)_("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var S=this.backoff.duration();_("will wait %dms before reconnect attempt",S),this.reconnecting=!0;var E=setTimeout(function(){m.skipReconnect||(_("attempting reconnect"),m.emitAll("reconnect_attempt",m.backoff.attempts),m.emitAll("reconnecting",m.backoff.attempts),!m.skipReconnect&&m.open(function(T){T?(_("reconnect attempt error"),m.reconnecting=!1,m.reconnect(),m.emitAll("reconnect_error",T.data)):(_("reconnect success"),m.onreconnect())}))},S);this.subs.push({destroy:function(){clearTimeout(E)}})}},p.prototype.onreconnect=function(){var m=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",m)}},"./node_modules/socket.io-client/lib/on.js":a=>{a.exports=o;function o(u,y,w){return u.on(y,w),{destroy:function(){u.removeListener(y,w)}}}},"./node_modules/socket.io-client/lib/socket.js":(a,o,u)=>{var y=u("./src/socket-parser.js"),w=u("./node_modules/component-emitter/index.js"),v=u("./node_modules/to-array/index.js"),g=u("./node_modules/socket.io-client/lib/on.js"),b=u("./node_modules/component-bind/index.js"),l=u("./node_modules/debug/src/browser.js")("socket.io-client:socket"),_=u("./node_modules/parseqs/index.js"),h=u("./node_modules/has-binary2/index.js");a.exports=p;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},c=w.prototype.emit;function p(m,S,E){this.io=m,this.nsp=S,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},E&&E.query&&(this.query=E.query),this.io.autoConnect&&this.open()}w(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var m=this.io;this.subs=[g(m,"open",b(this,"onopen")),g(m,"packet",b(this,"onpacket")),g(m,"close",b(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var m=v(arguments);return m.unshift("message"),this.emit.apply(this,m),this},p.prototype.emit=function(m){if(d.hasOwnProperty(m))return c.apply(this,arguments),this;var S=v(arguments),E={type:(this.flags.binary!==void 0?this.flags.binary:h(S))?y.BINARY_EVENT:y.EVENT,data:S};return E.options={},E.options.compress=!this.flags||this.flags.compress!==!1,typeof S[S.length-1]=="function"&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=S.pop(),E.id=this.ids++),this.connected?this.packet(E):this.sendBuffer.push(E),this.flags={},this},p.prototype.packet=function(m){m.nsp=this.nsp,this.io.packet(m)},p.prototype.onopen=function(){if(l("transport is open - connecting"),this.nsp!=="/")if(this.query){var m=typeof this.query=="object"?_.encode(this.query):this.query;l("sending connect packet with query %s",m),this.packet({type:y.CONNECT,query:m})}else this.packet({type:y.CONNECT})},p.prototype.onclose=function(m){l("close (%s)",m),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",m)},p.prototype.onpacket=function(m){var S=m.nsp===this.nsp,E=m.type===y.ERROR&&m.nsp==="/";if(!(!S&&!E))switch(m.type){case y.CONNECT:this.onconnect();break;case y.EVENT:this.onevent(m);break;case y.BINARY_EVENT:this.onevent(m);break;case y.ACK:this.onack(m);break;case y.BINARY_ACK:this.onack(m);break;case y.DISCONNECT:this.ondisconnect();break;case y.ERROR:this.emit("error",m.data);break}},p.prototype.onevent=function(m){var S=m.data||[];l("emitting event %j",S),m.id!=null&&(l("attaching ack callback to event"),S.push(this.ack(m.id))),this.connected?c.apply(this,S):this.receiveBuffer.push(S)},p.prototype.ack=function(m){var S=this,E=!1;return function(){if(!E){E=!0;var T=v(arguments);l("sending ack %j",T),S.packet({type:h(T)?y.BINARY_ACK:y.ACK,id:m,data:T})}}},p.prototype.onack=function(m){var S=this.acks[m.id];typeof S=="function"?(l("calling ack %s with %j",m.id,m.data),S.apply(this,m.data),delete this.acks[m.id]):l("bad ack %s",m.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},p.prototype.emitBuffered=function(){var m;for(m=0;m<this.receiveBuffer.length;m++)c.apply(this,this.receiveBuffer[m]);for(this.receiveBuffer=[],m=0;m<this.sendBuffer.length;m++)this.packet(this.sendBuffer[m]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var m=0;m<this.subs.length;m++)this.subs[m].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:y.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(m){return this.flags.compress=m,this},p.prototype.binary=function(m){return this.flags.binary=m,this}},"./node_modules/socket.io-client/lib/url.js":(a,o,u)=>{var y=u("./node_modules/parseuri/index.js"),w=u("./node_modules/debug/src/browser.js")("socket.io-client:url");a.exports=v;function v(g,b){var l=g;b=b||typeof location<"u"&&location,g==null&&(g=b.protocol+"//"+b.host),typeof g=="string"&&(g.charAt(0)==="/"&&(g.charAt(1)==="/"?g=b.protocol+g:g=b.host+g),/^(https?|wss?):\/\//.test(g)||(w("protocol-less url %s",g),typeof b<"u"?g=b.protocol+"//"+g:g="https://"+g),w("parse %s",g),l=y(g)),l.port||(/^(http|ws)$/.test(l.protocol)?l.port="80":/^(http|ws)s$/.test(l.protocol)&&(l.port="443")),l.path=l.path||"/";var _=l.host.indexOf(":")!==-1,h=_?"["+l.host+"]":l.host;return l.id=l.protocol+"://"+h+":"+l.port,l.href=l.protocol+"://"+h+(b&&b.port===l.port?"":":"+l.port),l}},"./node_modules/to-array/index.js":a=>{a.exports=o;function o(u,y){var w=[];y=y||0;for(var v=y||0;v<u.length;v++)w[v-y]=u[v];return w}},"./node_modules/yeast/index.js":a=>{var o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),u=64,y={},w=0,v=0,g;function b(h){var d="";do d=o[h%u]+d,h=Math.floor(h/u);while(h>0);return d}function l(h){var d=0;for(v=0;v<h.length;v++)d=d*u+y[h.charAt(v)];return d}function _(){var h=b(+new Date);return h!==g?(w=0,g=h):h+"."+b(w++)}for(;v<u;v++)y[o[v]]=v;_.encode=b,_.decode=l,a.exports=_},"?1bcf":()=>{},"./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js":a=>{function o(u,y,w,v,g){var b={};return Object.keys(v).forEach(function(l){b[l]=v[l]}),b.enumerable=!!b.enumerable,b.configurable=!!b.configurable,("value"in b||b.initializer)&&(b.writable=!0),b=w.slice().reverse().reduce(function(l,_){return _(u,y,l)||l},b),g&&b.initializer!==void 0&&(b.value=b.initializer?b.initializer.call(g):void 0,b.initializer=void 0),b.initializer===void 0?(Object.defineProperty(u,y,b),null):b}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":a=>{function o(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/asyncToGenerator.js":a=>{function o(y,w,v,g,b,l,_){try{var h=y[l](_),d=h.value}catch(c){return void v(c)}h.done?w(d):Promise.resolve(d).then(g,b)}function u(y){return function(){var w=this,v=arguments;return new Promise(function(g,b){var l=y.apply(w,v);function _(d){o(l,g,b,_,h,"next",d)}function h(d){o(l,g,b,_,h,"throw",d)}_(void 0)})}}a.exports=u,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/classCallCheck.js":a=>{function o(u,y){if(!(u instanceof y))throw new TypeError("Cannot call a class as a function")}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/createClass.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function w(g,b){for(var l=0;l<b.length;l++){var _=b[l];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,y(_.key),_)}}function v(g,b,l){return b&&w(g.prototype,b),l&&w(g,l),Object.defineProperty(g,"prototype",{writable:!1}),g}a.exports=v,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function w(v,g,b){return(g=y(g))in v?Object.defineProperty(v,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):v[g]=b,v}a.exports=w,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/get.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/superPropBase.js");function w(){return a.exports=w=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(v,g,b){var l=y(v,g);if(l){var _=Object.getOwnPropertyDescriptor(l,g);return _.get?_.get.call(arguments.length<3?v:b):_.value}},a.exports.__esModule=!0,a.exports.default=a.exports,w.apply(null,arguments)}a.exports=w,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/getPrototypeOf.js":a=>{function o(u){return a.exports=o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},a.exports.__esModule=!0,a.exports.default=a.exports,o(u)}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/inherits.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function w(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),g&&y(v,g)}a.exports=w,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":a=>{function o(u){return u&&u.__esModule?u:{default:u}}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/typeof.js").default,w=u("./node_modules/@babel/runtime/helpers/assertThisInitialized.js");function v(g,b){if(b&&(y(b)=="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(g)}a.exports=v,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/regeneratorRuntime.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/typeof.js").default;function w(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a.exports=w=function(){return g},a.exports.__esModule=!0,a.exports.default=a.exports;var v,g={},b=Object.prototype,l=b.hasOwnProperty,_=Object.defineProperty||function(I,k,B){I[k]=B.value},h=typeof Symbol=="function"?Symbol:{},d=h.iterator||"@@iterator",c=h.asyncIterator||"@@asyncIterator",p=h.toStringTag||"@@toStringTag";function m(I,k,B){return Object.defineProperty(I,k,{value:B,enumerable:!0,configurable:!0,writable:!0}),I[k]}try{m({},"")}catch{m=function(B,F,K){return B[F]=K}}function S(I,k,B,F){var K=k&&k.prototype instanceof q?k:q,te=Object.create(K.prototype),M=new Z(F||[]);return _(te,"_invoke",{value:W(I,B,M)}),te}function E(I,k,B){try{return{type:"normal",arg:I.call(k,B)}}catch(F){return{type:"throw",arg:F}}}g.wrap=S;var T="suspendedStart",A="suspendedYield",P="executing",H="completed",O={};function q(){}function C(){}function j(){}var V={};m(V,d,function(){return this});var N=Object.getPrototypeOf,Y=N&&N(N(L([])));Y&&Y!==b&&l.call(Y,d)&&(V=Y);var X=j.prototype=q.prototype=Object.create(V);function J(I){["next","throw","return"].forEach(function(k){m(I,k,function(B){return this._invoke(k,B)})})}function Q(I,k){function B(K,te,M,ne){var D=E(I[K],I,te);if(D.type!=="throw"){var x=D.arg,R=x.value;return R&&y(R)=="object"&&l.call(R,"__await")?k.resolve(R.__await).then(function(G){B("next",G,M,ne)},function(G){B("throw",G,M,ne)}):k.resolve(R).then(function(G){x.value=G,M(x)},function(G){return B("throw",G,M,ne)})}ne(D.arg)}var F;_(this,"_invoke",{value:function(te,M){function ne(){return new k(function(D,x){B(te,M,D,x)})}return F=F?F.then(ne,ne):ne()}})}function W(I,k,B){var F=T;return function(K,te){if(F===P)throw Error("Generator is already running");if(F===H){if(K==="throw")throw te;return{value:v,done:!0}}for(B.method=K,B.arg=te;;){var M=B.delegate;if(M){var ne=U(M,B);if(ne){if(ne===O)continue;return ne}}if(B.method==="next")B.sent=B._sent=B.arg;else if(B.method==="throw"){if(F===T)throw F=H,B.arg;B.dispatchException(B.arg)}else B.method==="return"&&B.abrupt("return",B.arg);F=P;var D=E(I,k,B);if(D.type==="normal"){if(F=B.done?H:A,D.arg===O)continue;return{value:D.arg,done:B.done}}D.type==="throw"&&(F=H,B.method="throw",B.arg=D.arg)}}}function U(I,k){var B=k.method,F=I.iterator[B];if(F===v)return k.delegate=null,B==="throw"&&I.iterator.return&&(k.method="return",k.arg=v,U(I,k),k.method==="throw")||B!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+B+"' method")),O;var K=E(F,I.iterator,k.arg);if(K.type==="throw")return k.method="throw",k.arg=K.arg,k.delegate=null,O;var te=K.arg;return te?te.done?(k[I.resultName]=te.value,k.next=I.nextLoc,k.method!=="return"&&(k.method="next",k.arg=v),k.delegate=null,O):te:(k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,O)}function $(I){var k={tryLoc:I[0]};1 in I&&(k.catchLoc=I[1]),2 in I&&(k.finallyLoc=I[2],k.afterLoc=I[3]),this.tryEntries.push(k)}function ee(I){var k=I.completion||{};k.type="normal",delete k.arg,I.completion=k}function Z(I){this.tryEntries=[{tryLoc:"root"}],I.forEach($,this),this.reset(!0)}function L(I){if(I||I===""){var k=I[d];if(k)return k.call(I);if(typeof I.next=="function")return I;if(!isNaN(I.length)){var B=-1,F=function K(){for(;++B<I.length;)if(l.call(I,B))return K.value=I[B],K.done=!1,K;return K.value=v,K.done=!0,K};return F.next=F}}throw new TypeError(y(I)+" is not iterable")}return C.prototype=j,_(X,"constructor",{value:j,configurable:!0}),_(j,"constructor",{value:C,configurable:!0}),C.displayName=m(j,p,"GeneratorFunction"),g.isGeneratorFunction=function(I){var k=typeof I=="function"&&I.constructor;return!!k&&(k===C||(k.displayName||k.name)==="GeneratorFunction")},g.mark=function(I){return Object.setPrototypeOf?Object.setPrototypeOf(I,j):(I.__proto__=j,m(I,p,"GeneratorFunction")),I.prototype=Object.create(X),I},g.awrap=function(I){return{__await:I}},J(Q.prototype),m(Q.prototype,c,function(){return this}),g.AsyncIterator=Q,g.async=function(I,k,B,F,K){K===void 0&&(K=Promise);var te=new Q(S(I,k,B,F),K);return g.isGeneratorFunction(k)?te:te.next().then(function(M){return M.done?M.value:te.next()})},J(X),m(X,p,"Generator"),m(X,d,function(){return this}),m(X,"toString",function(){return"[object Generator]"}),g.keys=function(I){var k=Object(I),B=[];for(var F in k)B.push(F);return B.reverse(),function K(){for(;B.length;){var te=B.pop();if(te in k)return K.value=te,K.done=!1,K}return K.done=!0,K}},g.values=L,Z.prototype={constructor:Z,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(ee),!k)for(var B in this)B.charAt(0)==="t"&&l.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=v)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var B=this;function F(x,R){return M.type="throw",M.arg=k,B.next=x,R&&(B.method="next",B.arg=v),!!R}for(var K=this.tryEntries.length-1;K>=0;--K){var te=this.tryEntries[K],M=te.completion;if(te.tryLoc==="root")return F("end");if(te.tryLoc<=this.prev){var ne=l.call(te,"catchLoc"),D=l.call(te,"finallyLoc");if(ne&&D){if(this.prev<te.catchLoc)return F(te.catchLoc,!0);if(this.prev<te.finallyLoc)return F(te.finallyLoc)}else if(ne){if(this.prev<te.catchLoc)return F(te.catchLoc,!0)}else{if(!D)throw Error("try statement without catch or finally");if(this.prev<te.finallyLoc)return F(te.finallyLoc)}}}},abrupt:function(k,B){for(var F=this.tryEntries.length-1;F>=0;--F){var K=this.tryEntries[F];if(K.tryLoc<=this.prev&&l.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var te=K;break}}te&&(k==="break"||k==="continue")&&te.tryLoc<=B&&B<=te.finallyLoc&&(te=null);var M=te?te.completion:{};return M.type=k,M.arg=B,te?(this.method="next",this.next=te.finallyLoc,O):this.complete(M)},complete:function(k,B){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&B&&(this.next=B),O},finish:function(k){for(var B=this.tryEntries.length-1;B>=0;--B){var F=this.tryEntries[B];if(F.finallyLoc===k)return this.complete(F.completion,F.afterLoc),ee(F),O}},catch:function(k){for(var B=this.tryEntries.length-1;B>=0;--B){var F=this.tryEntries[B];if(F.tryLoc===k){var K=F.completion;if(K.type==="throw"){var te=K.arg;ee(F)}return te}}throw Error("illegal catch attempt")},delegateYield:function(k,B,F){return this.delegate={iterator:L(k),resultName:B,nextLoc:F},this.method==="next"&&(this.arg=v),O}},g}a.exports=w,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":a=>{function o(u,y){return a.exports=o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,v){return w.__proto__=v,w},a.exports.__esModule=!0,a.exports.default=a.exports,o(u,y)}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/superPropBase.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/getPrototypeOf.js");function w(v,g){for(;!{}.hasOwnProperty.call(v,g)&&(v=y(v))!==null;);return v}a.exports=w,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/typeof.js").default;function w(v,g){if(y(v)!="object"||!v)return v;var b=v[Symbol.toPrimitive];if(b!==void 0){var l=b.call(v,g||"default");if(y(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(v)}a.exports=w,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/typeof.js").default,w=u("./node_modules/@babel/runtime/helpers/toPrimitive.js");function v(g){var b=w(g,"string");return y(b)=="symbol"?b:b+""}a.exports=v,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/helpers/typeof.js":a=>{function o(u){"@babel/helpers - typeof";return a.exports=o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},a.exports.__esModule=!0,a.exports.default=a.exports,o(u)}a.exports=o,a.exports.__esModule=!0,a.exports.default=a.exports},"./node_modules/@babel/runtime/regenerator/index.js":(a,o,u)=>{var y=u("./node_modules/@babel/runtime/helpers/regeneratorRuntime.js")();a.exports=y;try{regeneratorRuntime=y}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=y:Function("r","regeneratorRuntime = r")(y)}}},i={};function s(a){var o=i[a];if(o!==void 0)return o.exports;var u=i[a]={exports:{}};return n[a].call(u.exports,u,u.exports,s),u.exports}s.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var f=s("./src/index.js");return f})())}(backendlessRtClient)),backendlessRtClient.exports}var hasRequiredRt;function requireRt(){return hasRequiredRt||(hasRequiredRt=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RTScopeConnector=t.RTListeners=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=e(requireInherits()),a=e(requirePossibleConstructorReturn()),o=e(requireGetPrototypeOf()),u=e(requireBackendlessRtClient()),y=e(requireUtils$3());function w(_){var h=v();return function(){var c=(0,o.default)(_),p;if(h){var m=(0,o.default)(this).constructor;p=Reflect.construct(c,arguments,m)}else p=c.apply(this,arguments);return(0,a.default)(this,p)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=u.default.Listeners;t.RTListeners=g;var b=u.default.ScopeConnector;t.RTScopeConnector=b;var l=function(_){(0,f.default)(d,_);var h=w(d);function d(c){var p;(0,i.default)(this,d);var m=c.appId,S=c.apiKey,E=c.debugMode,T=y.default.uuid();return p=h.call(this,{appId:m||void 0,debugMode:E,connectQuery:function(){var P=c.getCurrentUserToken();return{apiKey:S||void 0,clientId:T,userToken:P}},hostResolver:function(){return c.appInfoPromise().then(function(P){var H=P.rtURL;return H})},socketConfigTransform:function(){var A=(0,n.default)(r.default.mark(function H(O){var q;return r.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(m){j.next=7;break}return j.next=3,c.appInfoPromise();case 3:q=j.sent,O.url="".concat(O.host,"/").concat(q.appId),O.options.path="/".concat(q.appId),O.options.query.apiKey=q.apiKey;case 7:return j.abrupt("return",O);case 8:case"end":return j.stop()}},H)}));function P(H){return A.apply(this,arguments)}return P}()}),p.app=c,p}return(0,s.default)(d,[{key:"updateUserTokenIfNeeded",value:function(){if(this.session){var p=this.app.getCurrentUserToken();this.methods.setUserToken({userToken:p})}}},{key:"setDebugMode",value:function(p){this.setConfig({debugMode:p})}}]),d}(u.default);t.default=l}(rt)),rt}var hasRequiredRtHandlers;function requireRtHandlers(){return hasRequiredRtHandlers||(hasRequiredRtHandlers=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireGet()),s=e(requireInherits()),f=e(requirePossibleConstructorReturn()),a=e(requireGetPrototypeOf()),o=requireRt();function u(l){var _=y();return function(){var d=(0,a.default)(l),c;if(_){var p=(0,a.default)(this).constructor;c=Reflect.construct(d,arguments,p)}else c=d.apply(this,arguments);return(0,f.default)(this,c)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w={CREATED:"created",UPDATED:"updated",DELETED:"deleted",UPSERTED:"upserted",BULK_CREATED:"bulk-created",BULK_UPDATED:"bulk-updated",BULK_DELETED:"bulk-deleted",BULK_UPSERTED:"bulk-upserted"},v={ADD:"add",SET:"set",DELETE:"delete"},g=[w.CREATED,w.UPDATED,w.DELETED,w.UPSERTED],b=function(l){(0,s.default)(h,l);var _=u(h);function h(d){var c;return(0,r.default)(this,h),c=_.call(this),c.dataStore=d,c.app=d.app,c}return(0,n.default)(h,[{key:"getSubscriptionOptions",value:function(){return{tableName:this.dataStore.className}}},{key:"addCreateListener",value:function(c,p,m){this.addChangesListener(w.CREATED,c,p,m)}},{key:"removeCreateListeners",value:function(c,p){this.removeChangesListeners(w.CREATED,c,p)}},{key:"removeCreateListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeCreateListeners(void 0,c)}},{key:"addUpsertListener",value:function(c,p,m){this.addChangesListener(w.UPSERTED,c,p,m)}},{key:"removeUpsertListeners",value:function(c,p){this.removeChangesListeners(w.UPSERTED,c,p)}},{key:"removeUpsertListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeUpsertListeners(void 0,c)}},{key:"addUpdateListener",value:function(c,p,m){this.addChangesListener(w.UPDATED,c,p,m)}},{key:"removeUpdateListeners",value:function(c,p){this.removeChangesListeners(w.UPDATED,c,p)}},{key:"removeUpdateListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeUpdateListeners(void 0,c)}},{key:"addDeleteListener",value:function(c,p,m){this.addChangesListener(w.DELETED,c,p,m)}},{key:"removeDeleteListeners",value:function(c,p){this.removeChangesListeners(w.DELETED,c,p)}},{key:"removeDeleteListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeDeleteListeners(void 0,c)}},{key:"addBulkCreateListener",value:function(c,p,m){this.addChangesListener(w.BULK_CREATED,c,p,m)}},{key:"removeBulkCreateListeners",value:function(){this.removeChangesListeners(w.BULK_CREATED)}},{key:"removeBulkCreateListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeChangesListeners(w.BULK_CREATED,void 0,c)}},{key:"addBulkUpdateListener",value:function(c,p,m){this.addChangesListener(w.BULK_UPDATED,c,p,m)}},{key:"removeBulkUpdateListeners",value:function(c,p){this.removeChangesListeners(w.BULK_UPDATED,c,p)}},{key:"removeBulkUpdateListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeBulkUpdateListeners(void 0,c)}},{key:"addBulkDeleteListener",value:function(c,p,m){this.addChangesListener(w.BULK_DELETED,c,p,m)}},{key:"removeBulkDeleteListeners",value:function(c,p){this.removeChangesListeners(w.BULK_DELETED,c,p)}},{key:"removeBulkDeleteListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeBulkDeleteListeners(void 0,c)}},{key:"addBulkUpsertListener",value:function(c,p,m){this.addChangesListener(w.BULK_UPSERTED,c,p,m)}},{key:"removeBulkUpsertListeners",value:function(){this.removeChangesListeners(w.BULK_UPSERTED)}},{key:"removeBulkUpsertListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeChangesListeners(w.BULK_UPSERTED,void 0,c)}},{key:"addSetRelationListener",value:function(c,p,m,S){this.addRelationsChangesListener(v.SET,c,p,m,S)}},{key:"removeSetRelationListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeRelationsChangesListeners(v.SET,void 0,c)}},{key:"removeSetRelationListeners",value:function(c,p){this.removeRelationsChangesListeners(v.SET,c,p)}},{key:"addAddRelationListener",value:function(c,p,m,S){this.addRelationsChangesListener(v.ADD,c,p,m,S)}},{key:"removeAddRelationListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeRelationsChangesListeners(v.ADD,void 0,c)}},{key:"removeAddRelationListeners",value:function(c,p){this.removeRelationsChangesListeners(v.ADD,c,p)}},{key:"addDeleteRelationListener",value:function(c,p,m,S){this.addRelationsChangesListener(v.DELETE,c,p,m,S)}},{key:"removeDeleteRelationListener",value:function(c){if(!c||typeof c!="function")throw new Error("Listener Function must be passed.");this.removeRelationsChangesListeners(v.DELETE,void 0,c)}},{key:"removeDeleteRelationListeners",value:function(c,p){this.removeRelationsChangesListeners(v.DELETE,c,p)}},{key:"addChangesListener",value:function(c,p,m,S){if(typeof p=="function"&&(S=m,m=p,p=void 0),typeof m!="function")throw new Error("Listener Function must be passed.");this.addSubscription(c,this.app.RT.subscriptions.onObjectsChanges,{callback:m,onError:S,parser:g.includes(c)?this.parseObjectToInstance.bind(this):void 0,params:{event:c,whereClause:p}})}},{key:"removeChangesListeners",value:function(c,p,m){typeof p=="function"&&(m=p,p=void 0);var S=function(T){var A=T.params;return p?A.whereClause===p:m?T.callback===m:!0};this.stopSubscription(c,{matcher:S})}},{key:"addRelationsChangesListener",value:function(c,p,m,S,E){if(!p||typeof p!="string")throw new Error("Relation Column Name must be a string.");if(typeof m=="function"&&(E=S,S=m,m=void 0),typeof S!="function")throw new Error("Listener Function must be passed.");if(m){if(!Array.isArray(m))throw new Error("Parent Objects must be an array");m=m.map(function(T){return T.objectId||T})}this.addSubscription(c,this.app.RT.subscriptions.onRelationsChanges,{callback:S,onError:E,params:{event:c,relationColumnName:p,parentObjects:m}})}},{key:"removeRelationsChangesListeners",value:function(c,p,m){typeof p=="function"&&(m=p,p=void 0);var S=function(T){var A=T.params;return p?A.relationColumnName===p:m?T.callback===m:!0};this.stopSubscription(c,{matcher:S})}},{key:"removeAllListeners",value:function(){(0,i.default)((0,a.default)(h.prototype),"removeAllListeners",this).call(this)}},{key:"parseObjectToInstance",value:function(c){return this.dataStore.parseResponse(c)}}]),h}(o.RTListeners);t.default=b}(rtHandlers)),rtHandlers}var loadRelationsQueryBuilder={},hasRequiredLoadRelationsQueryBuilder;function requireLoadRelationsQueryBuilder(){return hasRequiredLoadRelationsQueryBuilder||(hasRequiredLoadRelationsQueryBuilder=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireGet()),s=e(requireInherits()),f=e(requirePossibleConstructorReturn()),a=e(requireGetPrototypeOf()),o=e(requireDataQueryBuilder());function u(v){var g=y();return function(){var l=(0,a.default)(v),_;if(g){var h=(0,a.default)(this).constructor;_=Reflect.construct(l,arguments,h)}else _=l.apply(this,arguments);return(0,f.default)(this,_)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(v){(0,s.default)(b,v);var g=u(b);function b(l){var _;return(0,r.default)(this,b),_=g.call(this),_.relationModel=l,_.relationName=null,_}return(0,n.default)(b,[{key:"setRelationName",value:function(_){return this.relationName=_,this}},{key:"getRelationName",value:function(){return this.relationName}},{key:"setRelationModel",value:function(_){return this.relationModel=_,this}},{key:"getRelationModel",value:function(){return this.relationModel}},{key:"toJSON",value:function(){var _=(0,i.default)((0,a.default)(b.prototype),"toJSON",this).call(this);return _.relationName=this.getRelationName(),_.relationModel=this.getRelationModel(),_}}],[{key:"of",value:function(_){return new this(_)}}]),b}(o.default);t.default=w}(loadRelationsQueryBuilder)),loadRelationsQueryBuilder}var jsonUpdateBuilder={},hasRequiredJsonUpdateBuilder;function requireJsonUpdateBuilder(){return hasRequiredJsonUpdateBuilder||(hasRequiredJsonUpdateBuilder=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireInherits()),n=e(requirePossibleConstructorReturn()),i=e(requireGetPrototypeOf()),s=e(requireClassCallCheck()),f=e(requireCreateClass());function a(v){var g=o();return function(){var l=(0,i.default)(v),_;if(g){var h=(0,i.default)(this).constructor;_=Reflect.construct(l,arguments,h)}else _=l.apply(this,arguments);return(0,n.default)(this,_)}}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var u={SET:"JSON_SET",INSERT:"JSON_INSERT",REPLACE:"JSON_REPLACE",REMOVE:"JSON_REMOVE",ARRAY_APPEND:"JSON_ARRAY_APPEND",ARRAY_INSERT:"JSON_ARRAY_INSERT"},y=function(){function v(g){(0,s.default)(this,v),this.operationName=g,this.args={}}return(0,f.default)(v,[{key:"addArgument",value:function(b,l){if(l===void 0)throw new Error("You have to specify function's second argument");return this.args[b]=l,this}},{key:"toJSON",value:function(){return this.validate(),{___operation:this.operationName,args:this.args}}},{key:"create",value:function(){return this.toJSON()}},{key:"validate",value:function(){if(!Object.keys(this.args).length)throw new Error("You have to add at least one argument")}}],[{key:"SET",value:function(){return new v(u.SET)}},{key:"INSERT",value:function(){return new v(u.INSERT)}},{key:"REPLACE",value:function(){return new v(u.REPLACE)}},{key:"REMOVE",value:function(){return new w}},{key:"ARRAY_APPEND",value:function(){return new v(u.ARRAY_APPEND)}},{key:"ARRAY_INSERT",value:function(){return new v(u.ARRAY_INSERT)}}]),v}();t.default=y;var w=function(v){(0,r.default)(b,v);var g=a(b);function b(){var l;return(0,s.default)(this,b),l=g.call(this,u.REMOVE),l.args=[],l}return(0,f.default)(b,[{key:"addArgument",value:function(_){return this.args.push(_),this}},{key:"validate",value:function(){if(!this.args.length)throw new Error("You have to add at least one argument")}}]),b}(y)}(jsonUpdateBuilder)),jsonUpdateBuilder}var geoConstructor={},toArray={exports:{}},hasRequiredToArray;function requireToArray(){return hasRequiredToArray||(hasRequiredToArray=1,function(t){var e=requireArrayWithHoles(),r=requireIterableToArray(),n=requireUnsupportedIterableToArray(),i=requireNonIterableRest();function s(f){return e(f)||r(f)||n(f)||i()}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}(toArray)),toArray.exports}var point={},geometry={},spatialReferenceSystem={},hasRequiredSpatialReferenceSystem;function requireSpatialReferenceSystem(){return hasRequiredSpatialReferenceSystem||(hasRequiredSpatialReferenceSystem=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function v(g){var b=g.srsId,l=g.name;(0,r.default)(this,v),this.srsId=b,this.name=l}return(0,n.default)(v,[{key:"getSRSId",value:function(){return this.srsId}},{key:"getName",value:function(){return this.name}},{key:"toString",value:function(){return this.getName()+"("+this.getSRSId()+")"}}]),v}(),s=new i({srsId:0,name:"Cartesian"}),f=new i({srsId:4200,name:"Pulkovo 1995"}),a=new i({srsId:4326,name:"WGS 84"}),o=new i({srsId:3857,name:"WGS 84 / Pseudo-Mercator"}),u=new i({srsId:3395,name:"WGS 84 / World Mercator"}),y={CARTESIAN:s,PULKOVO_1995:f,WGS84:a,WGS84_PSEUDO_MERCATOR:o,WGS84_WORLD_MERCATOR:u,DEFAULT:a,SRS_MAP:{},valueBySRSId:function(g){return y.SRS_MAP[g]}};Object.keys(y).forEach(function(v){if(y[v]instanceof i){var g=y[v];y.SRS_MAP[g.getSRSId()]=g}});var w=y;t.default=w}(spatialReferenceSystem)),spatialReferenceSystem}var geoJsonParser={},hasRequiredGeoJsonParser;function requireGeoJsonParser(){return hasRequiredGeoJsonParser||(hasRequiredGeoJsonParser=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireGeoConstructor()),s=function(){function f(a){(0,r.default)(this,f),this.srs=a}return(0,n.default)(f,[{key:"read",value:function(o){return(0,i.default)(o,this.srs)}}]),f}();t.default=s}(geoJsonParser)),geoJsonParser}var wktParser={},wktToGeojson={},constants$2={},hasRequiredConstants$2;function requireConstants$2(){if(hasRequiredConstants$2)return constants$2;hasRequiredConstants$2=1,Object.defineProperty(constants$2,"__esModule",{value:!0}),constants$2.GeoTypes=void 0;var t={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon"};return constants$2.GeoTypes=t,constants$2}var hasRequiredWktToGeojson;function requireWktToGeojson(){return hasRequiredWktToGeojson||(hasRequiredWktToGeojson=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireToConsumableArray()),n=requireConstants$2(),i=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,s=new RegExp("^"+i.source+"(\\s"+i.source+"){1,}"),f=function(u){var y=0,w=function(c){var p=u.substring(y).match(c);return p?(y+=p[0].length,p[0]):null},v=function(){return w(/^\s*/)},g=function(){v();for(var c=0,p=[],m=[p],S=p,E;E=w(/^(\()/)||w(/^(\))/)||w(/^(,)/)||w(s);){if(E==="(")m.push(S),S=[],m[m.length-1].push(S),c++;else if(E===")"){if(S.length===0||(S=m.pop(),!S))return null;if(c--,c===0)break}else if(E===",")S=[],m[m.length-1].push(S);else if(!E.split(/\s/g).some(isNaN))Array.prototype.push.apply(S,E.split(/\s/g).map(parseFloat));else return null;v()}return c!==0?null:p},b=function(){for(var c=[],p,m;m=w(s)||w(/^(,)/);)m===","?(c.push(p),p=[]):m.split(/\s/g).some(isNaN)||(p||(p=[]),p=[].concat((0,r.default)(p),(0,r.default)(m.split(/\s/g).map(parseFloat)))),v();if(p)c.push(p);else return null;return c.length?c:null},l=function(){if(!w(/^(point(\sz)?)/i)||(v(),!w(/^(\()/)))return null;v();var c=b();return!c||!w(/^(\))/)?null:{type:n.GeoTypes.POINT,coordinates:c[0]}},_=function(){if(!w(/^(linestring(\sz)?)/i)||(v(),!w(/^(\()/)))return null;var c=b();return!c||!w(/^(\))/)?null:{type:n.GeoTypes.LINE_STRING,coordinates:c}},h=function(){if(!w(/^(polygon(\sz)?)/i))return null;v();var c=g();return c?{type:n.GeoTypes.POLYGON,coordinates:c}:null};return l()||_()||h()},a=f;t.default=a}(wktToGeojson)),wktToGeojson}var hasRequiredWktParser;function requireWktParser(){return hasRequiredWktParser||(hasRequiredWktParser=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireWktToGeojson()),s=e(requireGeoConstructor()),f=function(){function a(o){(0,r.default)(this,a),this.srs=o}return(0,n.default)(a,[{key:"read",value:function(u){var y=(0,i.default)(u);if(!y)throw new Error("WKT string is invalid");return(0,s.default)(y,this.srs)}}]),a}();t.default=f}(wktParser)),wktParser}var hasRequiredGeometry;function requireGeometry(){return hasRequiredGeometry||(hasRequiredGeometry=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireSpatialReferenceSystem()),s=e(requireGeoJsonParser()),f=e(requireWktParser()),a=function(){function u(y){(0,r.default)(this,u),this.srs=y||i.default.DEFAULT}return(0,n.default)(u,[{key:"getSRS",value:function(){return this.srs}},{key:"getGeojsonType",value:function(){}},{key:"getWktType",value:function(){}},{key:"wktCoordinatePairs",value:function(){}},{key:"jsonCoordinatePairs",value:function(){}},{key:"asGeoJSON",value:function(){return{type:this.getGeojsonType(),coordinates:this.jsonCoordinatePairs()}}},{key:"asWKT",value:function(){return this.getWktType()+"("+this.wktCoordinatePairs()+")"}},{key:"toJSON",value:function(){return this.asGeoJSON()}},{key:"toString",value:function(){return"'"+this.asWKT()+"'"}}],[{key:"fromWKT",value:function(w,v){return new f.default(v).read(w)}},{key:"fromGeoJSON",value:function(w,v){return new s.default(v).read(w)}}]),u}(),o=a;t.default=o}(geometry)),geometry}var hasRequiredPoint;function requirePoint(){return hasRequiredPoint||(hasRequiredPoint=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireInherits()),s=e(requirePossibleConstructorReturn()),f=e(requireGetPrototypeOf()),a=e(requireGeometry()),o=requireConstants$2();function u(l){var _=y();return function(){var d=(0,f.default)(l),c;if(_){var p=(0,f.default)(this).constructor;c=Reflect.construct(d,arguments,p)}else c=d.apply(this,arguments);return(0,s.default)(this,c)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=o.GeoTypes.POINT,v=w.toUpperCase(),g=1e-9,b=function(l){(0,i.default)(h,l);var _=u(h);function h(d){return(0,r.default)(this,h),_.call(this,d)}return(0,n.default)(h,[{key:"lng",get:function(){return this.getLongitude()},set:function(c){this.setLongitude(c)}},{key:"lat",get:function(){return this.getLatitude()},set:function(c){this.setLatitude(c)}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"getLongitude",value:function(){return this.x}},{key:"getLatitude",value:function(){return this.y}},{key:"setX",value:function(c){return this.x=c,this}},{key:"setY",value:function(c){return this.y=c,this}},{key:"setLongitude",value:function(c){return this.setX(c)}},{key:"setLatitude",value:function(c){return this.setY(c)}},{key:"getGeojsonType",value:function(){return w}},{key:"getWktType",value:function(){return v}},{key:"wktCoordinatePairs",value:function(){return"".concat(this.x," ").concat(this.y)}},{key:"jsonCoordinatePairs",value:function(){return[this.x,this.y]}},{key:"equals",value:function(c){return this===c?!0:c instanceof h?Math.abs(c.x-this.x)<g&&Math.abs(c.y-this.y)<g&&this.srs===c.srs:!1}}]),h}(a.default);t.default=b}(point)),point}var linestring={},hasRequiredLinestring;function requireLinestring(){return hasRequiredLinestring||(hasRequiredLinestring=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireInherits()),s=e(requirePossibleConstructorReturn()),f=e(requireGetPrototypeOf()),a=e(requireGeometry()),o=requireConstants$2();function u(l){var _=y();return function(){var d=(0,f.default)(l),c;if(_){var p=(0,f.default)(this).constructor;c=Reflect.construct(d,arguments,p)}else c=d.apply(this,arguments);return(0,s.default)(this,c)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=o.GeoTypes.LINE_STRING,v=w.toUpperCase(),g=function(l){(0,i.default)(h,l);var _=u(h);function h(d,c){var p;return(0,r.default)(this,h),p=_.call(this,c),p.points=d||[],p}return(0,n.default)(h,[{key:"getPoints",value:function(){return this.points}},{key:"setPoints",value:function(c){return this.points=c,this}},{key:"getGeojsonType",value:function(){return w}},{key:"getWktType",value:function(){return v}},{key:"jsonCoordinatePairs",value:function(){var c=[];return this.getPoints().forEach(function(p){c.push([p.getX(),p.getY()])}),c}},{key:"wktCoordinatePairs",value:function(){return this.getPoints().map(function(c){return"".concat(c.getX()," ").concat(c.getY())}).join(",")}}]),h}(a.default),b=g;t.default=b}(linestring)),linestring}var polygon={},hasRequiredPolygon;function requirePolygon(){return hasRequiredPolygon||(hasRequiredPolygon=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireToConsumableArray()),n=e(requireClassCallCheck()),i=e(requireCreateClass()),s=e(requireInherits()),f=e(requirePossibleConstructorReturn()),a=e(requireGetPrototypeOf()),o=e(requireGeometry()),u=e(requireLinestring()),y=requireConstants$2();function w(h){var d=v();return function(){var p=(0,a.default)(h),m;if(d){var S=(0,a.default)(this).constructor;m=Reflect.construct(p,arguments,S)}else m=p.apply(this,arguments);return(0,f.default)(this,m)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=y.GeoTypes.POLYGON,b=g.toUpperCase(),l=function(h){(0,s.default)(c,h);var d=w(c);function c(p,m,S){var E;return(0,n.default)(this,c),E=d.call(this,S),E.setBoundary(p),E.setHoles(m),E}return(0,i.default)(c,[{key:"getBoundary",value:function(){return this.boundary}},{key:"setBoundary",value:function(m){if(!m)throw new Error("The 'boundary' argument is required.");return m instanceof u.default||(m=new u.default(m,this.srs)),this.boundary=m,this}},{key:"getHoles",value:function(){return this.holes}},{key:"setHoles",value:function(m){return this.holes=m||[],this}},{key:"getGeojsonType",value:function(){return g}},{key:"getWktType",value:function(){return b}},{key:"jsonCoordinatePairs",value:function(){var m=[];this.getBoundary().getPoints().forEach(function(E){m.push([E.getX(),E.getY()])});var S=this.holes.map(function(E){return E.getPoints().map(function(T){return[T.getX(),T.getY()]})});return[m].concat((0,r.default)(S))}},{key:"wktCoordinatePairs",value:function(){var m=[this.getBoundary().wktCoordinatePairs()];this.holes.forEach(function(E){return m.push(E.wktCoordinatePairs())});var S=function(T){return"("+T+")"};return m.map(S).join(",")}}]),c}(o.default),_=l;t.default=_}(polygon)),polygon}var hasRequiredGeoConstructor;function requireGeoConstructor(){return hasRequiredGeoConstructor||(hasRequiredGeoConstructor=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.GEO_CLASSES=void 0,t.default=_;var r=e(requireDefineProperty()),n=e(requireToArray()),i=e(requireSlicedToArray()),s=e(requirePoint()),f=e(requireLinestring()),a=e(requirePolygon()),o=requireConstants$2(),u=e(requireSpatialReferenceSystem()),y,w=["com.backendless.persistence.Polygon","com.backendless.persistence.LineString","com.backendless.persistence.Point","com.backendless.persistence.Geometry"];t.GEO_CLASSES=w;var v=function(d,c){var p=(0,i.default)(d,2),m=p[0],S=p[1];return new s.default(c).setX(m).setY(S)},g=function(d,c){var p=d.map(function(m){return v(m,c)});return new f.default(p,c)},b=function(d,c){var p=d.map(function(T){return g(T,c)}),m=(0,n.default)(p),S=m[0],E=m.slice(1);return new a.default(S,E,c)},l=(y={},(0,r.default)(y,o.GeoTypes.POINT,v),(0,r.default)(y,o.GeoTypes.LINE_STRING,g),(0,r.default)(y,o.GeoTypes.POLYGON,b),y);function _(h,d){var c=l[h.type];if(d=d||u.default.valueBySRSId(h.srsId),c)return c(h.coordinates,d);throw new Error("There is no constructor for ".concat(h.type))}}(geoConstructor)),geoConstructor}var hasRequiredStore;function requireStore(){return hasRequiredStore||(hasRequiredStore=1,function(t){var e=requireInteropRequireDefault(),r=require_typeof();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e(requireSlicedToArray()),i=e(requireObjectWithoutProperties()),s=e(requireRegenerator()),f=e(require_typeof()),a=e(requireAsyncToGenerator()),o=e(requireClassCallCheck()),u=e(requireCreateClass()),y=e(requireDefineProperty()),w=e(requireUtils$3()),v=e(requireExpression()),g=e(requireRtHandlers()),b=e(requireDataQueryBuilder()),l=e(requireLoadRelationsQueryBuilder()),_=e(requireJsonUpdateBuilder()),h=m(requireGeoConstructor()),d=e(requireGeometry()),c=["relationName","relationModel"];function p(O){if(typeof WeakMap!="function")return null;var q=new WeakMap,C=new WeakMap;return(p=function(V){return V?C:q})(O)}function m(O,q){if(O&&O.__esModule)return O;if(O===null||r(O)!=="object"&&typeof O!="function")return{default:O};var C=p(q);if(C&&C.has(O))return C.get(O);var j={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var N in O)if(N!=="default"&&Object.prototype.hasOwnProperty.call(O,N)){var Y=V?Object.getOwnPropertyDescriptor(O,N):null;Y&&(Y.get||Y.set)?Object.defineProperty(j,N,Y):j[N]=O[N]}return j.default=O,C&&C.set(O,j),j}function S(O,q){var C=Object.keys(O);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(O);q&&(j=j.filter(function(V){return Object.getOwnPropertyDescriptor(O,V).enumerable})),C.push.apply(C,j)}return C}function E(O){for(var q=1;q<arguments.length;q++){var C=arguments[q]!=null?arguments[q]:{};q%2?S(Object(C),!0).forEach(function(j){(0,y.default)(O,j,C[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(C)):S(Object(C)).forEach(function(j){Object.defineProperty(O,j,Object.getOwnPropertyDescriptor(C,j))})}return O}function T(O,q){var C=O instanceof b.default?O.toJSON():O?E({},O):{};C.pageSize=1,C.offset=0;var j=C.sortBy;return j||(C.sortBy=["created ".concat(q)]),b.default.toRequestBody(C)}var A=function(){function O(q,C){if((0,o.default)(this,O),this.app=C.app,this.classToTableMap=C.classToTableMap,typeof q=="string"?(this.className=q,this.model=this.classToTableMap[this.className]):(this.className=w.default.getClassName(q),this.model=this.classToTableMap[this.className]||q),!this.className)throw new Error("Class name should be specified")}return(0,u.default)(O,[{key:"rt",value:function(){return this.rtHandlers=this.rtHandlers||new g.default(this)}},{key:"save",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N){var Y=this,X;return s.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return X=N?this.app.urls.dataTableUpsert(this.className):this.app.urls.dataTable(this.className),Q.abrupt("return",this.app.request.put({url:X,data:P(V)}).then(function(W){return Y.parseResponse(W)}));case 2:case"end":return Q.stop()}},j,this)}));function C(j,V){return q.apply(this,arguments)}return C}()},{key:"deepSave",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N=this;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",this.app.request.put({url:this.app.urls.dataTableDeepSave(this.className),data:P(V)}).then(function(J){return N.parseResponse(J)}));case 1:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"remove",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(N=V&&V.objectId||V,!(!N||typeof N!="string"&&typeof N!="number")){X.next=3;break}throw new Error("Object Id must be provided and must be a string or number.");case 3:return X.abrupt("return",this.app.request.delete({url:this.app.urls.dataTableObject(this.className,N)}));case 4:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"find",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N=this;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",this.app.request.post({url:this.app.urls.dataTableFind(this.className),data:b.default.toRequestBody(V)}).then(function(J){return N.parseResponse(J)}));case 1:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"group",value:function(){var q=(0,a.default)(s.default.mark(function j(V){return s.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",this.app.request.post({url:this.app.urls.dataGrouping(this.className),data:b.default.toRequestBody(V)}));case 1:case"end":return Y.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"countInGroup",value:function(){var q=(0,a.default)(s.default.mark(function j(V){return s.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!(!V.groupPath||(0,f.default)(V.groupPath)!=="object")){Y.next=2;break}throw new Error("Group Path must be provided and must be an object.");case 2:return Y.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.dataGrouping(this.className),"/count"),data:b.default.toRequestBody(V)}));case 3:case"end":return Y.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"findById",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N){var Y;return s.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!(V&&(0,f.default)(V)==="object"&&!Array.isArray(V))){J.next=8;break}if(Object.keys(V).length){J.next=3;break}throw new Error("Provided object must have at least 1 primary keys.");case 3:return J.next=5,this.app.request.get({url:this.app.urls.dataTablePrimaryKey(this.className),query:V});case 5:Y=J.sent,J.next=14;break;case 8:if(!(!V||typeof V!="string"&&typeof V!="number")){J.next=10;break}throw new Error("Object Id must be provided and must be a string or number or an object of primary keys.");case 10:return N&&(N.pageSize=null,N.offset=null),J.next=13,this.app.request.get({url:this.app.urls.dataTableObject(this.className,V),queryString:b.default.toQueryString(N)});case 13:Y=J.sent;case 14:return J.abrupt("return",this.parseResponse(Y));case 15:case"end":return J.stop()}},j,this)}));function C(j,V){return q.apply(this,arguments)}return C}()},{key:"findFirst",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N=this;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",this.app.request.post({url:this.app.urls.dataTableFind(this.className),data:T(V,"asc")}).then(function(J){return N.parseResponse(J[0])}));case 1:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"findLast",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N=this;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",this.app.request.post({url:this.app.urls.dataTableFind(this.className),data:T(V,"desc")}).then(function(J){return N.parseResponse(J[0])}));case 1:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"getObjectCount",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N,Y;return s.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(N=void 0,Y=void 0,!V){J.next=11;break}if(!(V instanceof b.default)){J.next=9;break}N=V.getDistinct()||void 0,Y=V.getGroupBy()||void 0,V=V.getWhereClause()||void 0,J.next=11;break;case 9:if(typeof V=="string"){J.next=11;break}throw new Error("Condition must be a string or an instance of DataQueryBuilder.");case 11:return J.abrupt("return",this.app.request.post({url:this.app.urls.dataTableCount(this.className),data:{where:V,distinct:N,groupBy:Y}}));case 12:case"end":return J.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"loadRelations",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N){var Y=this,X,J,Q,W,U;return s.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(X=V&&V.objectId||V,!(!X||typeof X!="string"&&typeof X!="number")){ee.next=3;break}throw new Error("Parent Object Id must be provided and must be a string or number.");case 3:if(J=N instanceof l.default?N.toJSON():N,Q=J.relationName,W=J.relationModel,U=(0,i.default)(J,c),!(!Q||typeof Q!="string")){ee.next=6;break}throw new Error("Relation Name must be provided and must be a string.");case 6:return ee.abrupt("return",this.app.request.get({url:this.app.urls.dataTableObjectRelation(this.className,X,Q),queryString:l.default.toQueryString(U)}).then(function(Z){return Y.parseRelationsResponse(Z,W)}));case 7:case"end":return ee.stop()}},j,this)}));function C(j,V){return q.apply(this,arguments)}return C}()},{key:"setRelation",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N,Y){return s.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",this.changeRelation(this.app.request.Methods.POST,V,N,Y));case 1:case"end":return J.stop()}},j,this)}));function C(j,V,N){return q.apply(this,arguments)}return C}()},{key:"addRelation",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N,Y){return s.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",this.changeRelation(this.app.request.Methods.PUT,V,N,Y));case 1:case"end":return J.stop()}},j,this)}));function C(j,V,N){return q.apply(this,arguments)}return C}()},{key:"deleteRelation",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N,Y){return s.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",this.changeRelation(this.app.request.Methods.DELETE,V,N,Y));case 1:case"end":return J.stop()}},j,this)}));function C(j,V,N){return q.apply(this,arguments)}return C}()},{key:"bulkCreate",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(N="Objects must be provided and must be an array of objects.",!(!V||!Array.isArray(V))){X.next=3;break}throw new Error(N);case 3:return V=V.map(function(J){if(!J||(0,f.default)(J)!=="object"||Array.isArray(J))throw new Error(N);return J}),X.abrupt("return",this.app.request.post({url:this.app.urls.dataBulkTable(this.className),data:V}));case 5:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"bulkUpsert",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N;return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(N="Objects must be provided and must be an array of objects.",!(!V||!Array.isArray(V)||!V.length)){X.next=3;break}throw new Error(N);case 3:return V=V.map(function(J){if(!J||(0,f.default)(J)!=="object"||Array.isArray(J))throw new Error(N);return J}),X.abrupt("return",this.app.request.put({url:this.app.urls.dataBulkTableUpsert(this.className),data:V}));case 5:case"end":return X.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"bulkUpdate",value:function(){var q=(0,a.default)(s.default.mark(function j(V,N){return s.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!(!V||typeof V!="string")){X.next=2;break}throw new Error("Condition must be provided and must be a string.");case 2:if(!(!N||(0,f.default)(N)!=="object"||Array.isArray(N))){X.next=4;break}throw new Error("Changes must be provided and must be an object.");case 4:return X.abrupt("return",this.app.request.put({url:this.app.urls.dataBulkTable(this.className),query:{where:V},data:N}));case 5:case"end":return X.stop()}},j,this)}));function C(j,V){return q.apply(this,arguments)}return C}()},{key:"bulkDelete",value:function(){var q=(0,a.default)(s.default.mark(function j(V){var N,Y;return s.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!(!V||typeof V!="string"&&!Array.isArray(V))){J.next=2;break}throw new Error("Condition must be provided and must be a string or a list of objects.");case 2:return N={},typeof V=="string"?N.where=V:(Y=V.map(function(Q){var W=Q&&Q.objectId||Q;if(!W||typeof W!="string"&&typeof W!="number")throw new Error('Can not transform "objects" to "whereClause". Item must be a string or number or an object with property "objectId" as string.');return"'".concat(W,"'")}),N.where="objectId in (".concat(Y.join(","),")")),J.abrupt("return",this.app.request.post({url:this.app.urls.dataBulkTableDelete(this.className),data:N}));case 5:case"end":return J.stop()}},j,this)}));function C(j){return q.apply(this,arguments)}return C}()},{key:"parseRelationsResponse",value:function(C,j){return H(C,j,this)}},{key:"parseResponse",value:function(C){return H(C,this.model,this)}},{key:"changeRelation",value:function(C,j,V,N){var Y=j&&j.objectId||j;if(!Y||typeof Y!="string"&&typeof Y!="number")throw new Error("Relation Parent must be provided and must be a string or number or an object with objectId property.");if(!V||typeof V!="string")throw new Error("Relation Column Name must be provided and must be a string.");if(!N||typeof N!="string"&&!Array.isArray(N))throw new Error("Relation Children must be provided and must be a string or a list of objects.");var X={};typeof N=="string"?X.whereClause=N:X.childrenIds=N.map(function(Q){var W=Q&&Q.objectId||Q;if(!W||typeof W!="string"&&typeof W!="number")throw new Error("Child Id must be provided and must be a string or number.");return W});var J={};return X.whereClause&&(J.whereClause=X.whereClause),this.app.request.send({method:C,url:this.app.urls.dataTableObjectRelation(this.className,Y,V),query:J,data:X.childrenIds})}}]),O}();t.default=A;var P=function(){return function(q){var C={instancesMap:new WeakMap};return O(C,q,{})};function O(q,C,j){for(var V in C)if(Array.isArray(C[V]))O(q,C[V],j[V]=[]);else if(C[V]&&(0,f.default)(C[V])==="object"&&!(C[V]instanceof d.default)&&!(C[V]instanceof _.default)&&!(C[V]instanceof v.default))if(C[V]instanceof Date)j[V]=C[V].getTime();else if(q.instancesMap.has(C[V])){var N=q.instancesMap.get(C[V]);N.__subID||(N.__subID=w.default.uuid()),j[V]={__originSubID:N.__subID}}else{var Y=j[V]={};q.instancesMap.set(C[V],Y),O(q,C[V],Y)}else j[V]=C[V];return j}}(),H=function(){return function(N,Y,X){if(!N)return N;var J={RootModel:Y,app:X.app,classToTableMap:X.classToTableMap,subIds:{},postAssign:[]},Q=Array.isArray(N)?N.map(function(W){return j(J,W)}):j(J,N);return V(J),Q};function O(N,Y,X,J){var Q=Y[J].__subID;if(Q&&N.subIds[Q])X[J]=N.subIds[Q],delete Y[J].__subID;else{var W=N.classToTableMap[Y[J].___class];X[J]=W?new W:{},Q&&!N.subIds[Q]&&(N.subIds[Q]=X[J],delete Y[J].__subID),C(N,Y[J],X[J])}}function q(N,Y,X,J){Array.isArray(Y[J])?C(N,Y[J],X[J]=[]):Y[J]&&(0,f.default)(Y[J])==="object"?h.GEO_CLASSES.includes(Y[J].___class)?X[J]=(0,h.default)(Y[J]):Y[J].__originSubID?N.postAssign.push([X,J,Y[J].__originSubID]):O(N,Y,X,J):X[J]=Y[J]}function C(N,Y,X){for(var J in Y)q(N,Y,X,J)}function j(N,Y){var X=N.RootModel||N.classToTableMap[Y.___class],J=X?new X:{};if(Y.__subID){if(N.subIds[Y.__subID])return N.subIds[Y.__subID];N.subIds[Y.__subID]=J,delete Y.__subID}return C(N,Y,J),J}function V(N){N.postAssign.forEach(function(Y){var X=(0,n.default)(Y,3),J=X[0],Q=X[1],W=X[2];J[Q]=N.subIds[W]})}}()}(store)),store}var groupQueryBuilder={},hasRequiredGroupQueryBuilder;function requireGroupQueryBuilder(){return hasRequiredGroupQueryBuilder||(hasRequiredGroupQueryBuilder=1,function(t){var e=requireInteropRequireDefault(),r=require_typeof();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e(requireClassCallCheck()),i=e(requireCreateClass()),s=e(requireGet()),f=e(requireInherits()),a=e(requirePossibleConstructorReturn()),o=e(requireGetPrototypeOf()),u=e(requireUtils$3()),y=v(requireDataQueryBuilder());function w(_){if(typeof WeakMap!="function")return null;var h=new WeakMap,d=new WeakMap;return(w=function(p){return p?d:h})(_)}function v(_,h){if(_&&_.__esModule)return _;if(_===null||r(_)!=="object"&&typeof _!="function")return{default:_};var d=w(h);if(d&&d.has(_))return d.get(_);var c={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in _)if(m!=="default"&&Object.prototype.hasOwnProperty.call(_,m)){var S=p?Object.getOwnPropertyDescriptor(_,m):null;S&&(S.get||S.set)?Object.defineProperty(c,m,S):c[m]=_[m]}return c.default=_,d&&d.set(_,c),c}function g(_){var h=b();return function(){var c=(0,o.default)(_),p;if(h){var m=(0,o.default)(this).constructor;p=Reflect.construct(c,arguments,m)}else p=c.apply(this,arguments);return(0,a.default)(this,p)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var l=function(_){(0,f.default)(d,_);var h=g(d);function d(){var c;return(0,n.default)(this,d),c=h.call(this),c.groupPageSize=y.PAGING_DEFAULTS.pageSize,c.recordsPageSize=y.PAGING_DEFAULTS.pageSize,c.groupDepth=null,c.groupPath=null,c}return(0,i.default)(d,[{key:"setGroupPageSize",value:function(p){if(p<=0)throw new Error("Group page size must be a positive value.");return this.groupPageSize=p,this}},{key:"getGroupPageSize",value:function(){return this.groupPageSize}},{key:"setRecordsPageSize",value:function(p){if(p<=0)throw new Error("Records page size must be a positive value.");return this.recordsPageSize=p,this}},{key:"getRecordsPageSize",value:function(){return this.recordsPageSize}},{key:"setGroupDepth",value:function(p){if(p<0)throw new Error("Group depth cannot have a negative value.");return this.groupDepth=p,this}},{key:"getGroupDepth",value:function(){return this.groupDepth}},{key:"getGroupPath",value:function(){return this.groupPath}},{key:"addGroupPath",value:function(p){return this.groupPath=(this.groupPath||[]).concat(p),this}},{key:"setGroupPath",value:function(p){return this.groupPath=u.default.castArray(p),this}},{key:"toJSON",value:function(){var p=(0,s.default)((0,o.default)(d.prototype),"toJSON",this).call(this);return p.groupDepth=this.getGroupDepth(),p.groupPath=this.getGroupPath(),p.groupPageSize=this.getGroupPageSize(),p.recordsPageSize=this.getRecordsPageSize(),p}}]),d}(y.default);t.default=l}(groupQueryBuilder)),groupQueryBuilder}var persmission$2={},persmission$1={},hasRequiredPersmission$2;function requirePersmission$2(){return hasRequiredPersmission$2||(hasRequiredPersmission$2=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireDefineProperty()),s={GRANT:"GRANT",DENY:"DENY"},f=function(){function a(o,u){(0,r.default)(this,a),this.permission=o,this.app=u,this.grantUser=this.backwardCompatibility("grantForUser","grantUser"),this.denyUser=this.backwardCompatibility("denyForUser","denyUser"),this.grantRole=this.backwardCompatibility("grantForRole","grantRole"),this.denyRole=this.backwardCompatibility("denyForRole","denyRole"),this.grant=this.backwardCompatibility("grantForAllUsers","grant"),this.deny=this.backwardCompatibility("denyForAllUsers","deny")}return(0,n.default)(a,[{key:"backwardCompatibility",value:function(u,y){var w=this,v=this.constructor.BACKWARD_COMPATIBILITY_LABEL;return function(){var g='"'.concat(v,".").concat(y,'" is deprecated and will be removed in the nearest release.'),b='Please use "'.concat(v,".").concat(u,'" instead of.');return console.warn("".concat(g,`
`).concat(b)),w[u].apply(w,arguments)}}},{key:"grantForUser",value:function(u,y){return this.sendRequest(s.GRANT,y,{userId:u})}},{key:"denyForUser",value:function(u,y){return this.sendRequest(s.DENY,y,{userId:u})}},{key:"grantForRole",value:function(u,y){return this.sendRequest(s.GRANT,y,{roleName:u})}},{key:"denyForRole",value:function(u,y){return this.sendRequest(s.DENY,y,{roleName:u})}},{key:"grantForAllUsers",value:function(u){return this.sendRequest(s.GRANT,u,{userId:"*"})}},{key:"denyForAllUsers",value:function(u){return this.sendRequest(s.DENY,u,{userId:"*"})}},{key:"grantForAllRoles",value:function(u){return this.sendRequest(s.GRANT,u,{roleName:"*"})}},{key:"denyForAllRoles",value:function(u){return this.sendRequest(s.DENY,u,{roleName:"*"})}},{key:"sendRequest",value:function(u,y,w){var v=w.userId,g=w.roleName,b={permission:this.permission};return v?b.user=v:g&&(b.role=g),this.app.request.put({url:this.getRequestURL(u,y),data:b})}},{key:"getRequestURL",value:function(){}}]),a}();t.default=f,(0,i.default)(f,"BACKWARD_COMPATIBILITY_LABEL",null)}(persmission$1)),persmission$1}var hasRequiredPersmission$1;function requirePersmission$1(){return hasRequiredPersmission$1||(hasRequiredPersmission$1=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireInherits()),s=e(requirePossibleConstructorReturn()),f=e(requireGetPrototypeOf()),a=e(requireDefineProperty()),o=e(requirePersmission$2());function u(v){var g=y();return function(){var l=(0,f.default)(v),_;if(g){var h=(0,f.default)(this).constructor;_=Reflect.construct(l,arguments,h)}else _=l.apply(this,arguments);return(0,s.default)(this,_)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(v){(0,i.default)(b,v);var g=u(b);function b(){return(0,r.default)(this,b),g.apply(this,arguments)}return(0,n.default)(b,[{key:"getRequestURL",value:function(_,h){if(!h.___class||!h.objectId)throw new Error('"dataObject.___class" and "dataObject.objectId" need to be specified');return this.app.urls.dataObjectPermission(h.___class,_,h.objectId)}}]),b}(o.default);t.default=w,(0,a.default)(w,"BACKWARD_COMPATIBILITY_LABEL","Backendless.Data.Permissions.{FIND|REMOVE|UPDATE}")}(persmission$2)),persmission$2}var hasRequiredData$1;function requireData$1(){return hasRequiredData$1||(hasRequiredData$1=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireDefineProperty()),s=e(requireClassCallCheck()),f=e(requireCreateClass()),a=e(requireUtils$3()),o=e(requireUser()),u=e(requireStore()),y=e(requireDataQueryBuilder()),w=e(requireGroupQueryBuilder()),v=e(requireLoadRelationsQueryBuilder()),g=e(requireJsonUpdateBuilder()),b=e(requirePoint()),l=e(requireLinestring()),_=e(requirePolygon()),h=e(requireGeometry()),d=e(requireSpatialReferenceSystem()),c=e(requireWktParser()),p=e(requireGeoJsonParser()),m=e(requirePersmission$1()),S=function(){function E(T){(0,s.default)(this,E),this.app=T,this.classToTableMap=(0,i.default)({},o.default.className,o.default),this.Permissions={FIND:new m.default("FIND",T),REMOVE:new m.default("REMOVE",T),UPDATE:new m.default("UPDATE",T)},this.QueryBuilder=y.default,this.GroupQueryBuilder=w.default,this.LoadRelationsQueryBuilder=v.default,this.JSONUpdateBuilder=g.default,this.Point=b.default,this.LineString=l.default,this.Polygon=_.default,this.Geometry=h.default,this.GeoJSONParser=p.default,this.WKTParser=c.default,this.SpatialReferenceSystem=d.default}return(0,f.default)(E,[{key:"of",value:function(A){return new u.default(A,this)}},{key:"describe",value:function(){var T=(0,n.default)(r.default.mark(function P(H){return r.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return H=typeof H=="string"?H:a.default.getClassName(H),q.abrupt("return",this.app.request.get({url:this.app.urls.dataTableProps(H)}));case 2:case"end":return q.stop()}},P,this)}));function A(P){return T.apply(this,arguments)}return A}()},{key:"getTableNameById",value:function(){var T=(0,n.default)(r.default.mark(function P(H){return r.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.abrupt("return",this.app.request.get({url:this.app.urls.dataTableNameById(H)}));case 1:case"end":return q.stop()}},P,this)}));function A(P){return T.apply(this,arguments)}return A}()},{key:"mapTableToClass",value:function(A,P){if(typeof A=="function"&&(P=A,A=a.default.getClassName(P)),!A||typeof A!="string")throw new Error("Table Name must be provided and must be a string.");if(!P||typeof P!="function")throw new Error("Class must be provided and must be a constructor function.");this.classToTableMap[A]=P}}]),E}();t.default=S}(data$1)),data$1}var hive={},stores={},keyValue={},constants$1={},hasRequiredConstants$1;function requireConstants$1(){if(hasRequiredConstants$1)return constants$1;hasRequiredConstants$1=1,Object.defineProperty(constants$1,"__esModule",{value:!0}),constants$1.HiveTypes=void 0;var t={KEY_VALUE:"key-value",LIST:"list",MAP:"map",SET:"set",SORTED_SET:"sorted-set"};return constants$1.HiveTypes=t,constants$1}var baseStore={},hasRequiredBaseStore;function requireBaseStore(){if(hasRequiredBaseStore)return baseStore;hasRequiredBaseStore=1;var t=requireInteropRequireDefault();Object.defineProperty(baseStore,"__esModule",{value:!0}),baseStore.HiveStore=void 0;var e=t(requireRegenerator()),r=t(requireAsyncToGenerator()),n=t(requireClassCallCheck()),i=t(requireCreateClass()),s=t(requireDefineProperty()),f=t(requireUtils$3());function a(y,w){var v=Object.keys(y);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(y);w&&(g=g.filter(function(b){return Object.getOwnPropertyDescriptor(y,b).enumerable})),v.push.apply(v,g)}return v}function o(y){for(var w=1;w<arguments.length;w++){var v=arguments[w]!=null?arguments[w]:{};w%2?a(Object(v),!0).forEach(function(g){(0,s.default)(y,g,v[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(v)):a(Object(v)).forEach(function(g){Object.defineProperty(y,g,Object.getOwnPropertyDescriptor(v,g))})}return y}var u=function(){function y(w,v){if((0,n.default)(this,y),this.TYPE=this.constructor.TYPE,!v||typeof v!="string")throw new Error("Store key must be a string.");this.app=w.app,this.hiveName=w.hiveName,this.storeKey=v}return(0,i.default)(y,[{key:"getBaseURL",value:function(){return"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/").concat(this.storeKey)}},{key:"delete",value:function(){return this.constructor.delete.call(o(o({},this),this.constructor),[this.storeKey])}},{key:"exist",value:function(){var w=(0,r.default)(e.default.mark(function g(){var b;return e.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,this.constructor.exist.call(o(o({},this),this.constructor),[this.storeKey]);case 2:return b=_.sent,_.abrupt("return",!!b);case 4:case"end":return _.stop()}},g,this)}));function v(){return w.apply(this,arguments)}return v}()},{key:"rename",value:function(v,g){if(!v||typeof v!="string")throw new Error("New key name must be provided and must be a string.");if(g!==void 0&&typeof g!="boolean")throw new Error("Overwrite must be a boolean.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/rename"),query:{newKey:v,overwrite:g}})}},{key:"getExpiration",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-expiration-ttl")})}},{key:"clearExpiration",value:function(){return this.app.request.put({url:"".concat(this.getBaseURL(),"/clear-expiration")})}},{key:"expireAfter",value:function(v){if(isNaN(v)||typeof v!="number")throw new Error("TTL must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/expire"),query:{ttl:v}})}},{key:"expireAt",value:function(v){if(isNaN(v)||typeof v!="number")throw new Error("Expiration time must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/expire-at"),query:{unixTime:v}})}},{key:"touch",value:function(){return this.constructor.touch.call(o(o({},this),this.constructor),[this.storeKey])}},{key:"secondsSinceLastOperation",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/seconds-since-last-operation")})}}],[{key:"registerType",value:function(v){var g=this,b=o(o({},this),{},{app:v.app,hiveName:v.hiveName}),l=function(h){return new g(b,h)};return this.STATIC_METHODS.forEach(function(_){l[_]=function(){for(var h=arguments.length,d=new Array(h),c=0;c<h;c++)d[c]=arguments[c];return g[_].apply(b,d)}}),l}},{key:"keys",value:function(v){if(v!==void 0){if(!f.default.isObject(v))throw new Error("Options must be an object.");var g=v.cursor,b=v.pageSize,l=v.filterPattern;if(g!==void 0&&(typeof g!="number"||isNaN(g)))throw new Error("Cursor must be a number.");if(b!==void 0&&(typeof b!="number"||isNaN(b)))throw new Error("Page size must be a number.");if(l!==void 0&&(typeof l!="string"||!l))throw new Error("Filter pattern must be a string.")}return this.app.request.get({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/keys"),query:v})}},{key:"delete",value:function(v){if(!Array.isArray(v))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.delete({url:this.app.urls.hiveStore(this.hiveName,this.TYPE),data:v})}},{key:"exist",value:function(v){if(!Array.isArray(v))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/exist"),data:v})}},{key:"touch",value:function(v){if(!Array.isArray(v))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.put({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/touch"),data:v})}}]),y}();return baseStore.HiveStore=u,(0,s.default)(u,"STATIC_METHODS",["keys","delete","exist","touch"]),baseStore}var utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1.isHiveValueValid=t;function t(e){if(e==null)return!1;try{var r=JSON.stringify(e);return!!r}catch{return!1}}return utils$1}var hasRequiredKeyValue;function requireKeyValue(){if(hasRequiredKeyValue)return keyValue;hasRequiredKeyValue=1;var t=requireInteropRequireDefault();Object.defineProperty(keyValue,"__esModule",{value:!0}),keyValue.KeyValueStore=void 0;var e=t(requireToConsumableArray()),r=t(requireClassCallCheck()),n=t(requireCreateClass()),i=t(requireInherits()),s=t(requirePossibleConstructorReturn()),f=t(requireGetPrototypeOf()),a=t(requireDefineProperty()),o=requireConstants$1(),u=requireBaseStore(),y=t(requireUtils$3()),w=requireUtils$1();function v(h,d){var c=Object.keys(h);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(h);d&&(p=p.filter(function(m){return Object.getOwnPropertyDescriptor(h,m).enumerable})),c.push.apply(c,p)}return c}function g(h){for(var d=1;d<arguments.length;d++){var c=arguments[d]!=null?arguments[d]:{};d%2?v(Object(c),!0).forEach(function(p){(0,a.default)(h,p,c[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(c)):v(Object(c)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(c,p))})}return h}function b(h){var d=l();return function(){var p=(0,f.default)(h),m;if(d){var S=(0,f.default)(this).constructor;m=Reflect.construct(p,arguments,S)}else m=p.apply(this,arguments);return(0,s.default)(this,m)}}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(h){(0,i.default)(c,h);var d=b(c);function c(){return(0,r.default)(this,c),d.apply(this,arguments)}return(0,n.default)(c,[{key:"get",value:function(){return this.app.request.get({url:this.getBaseURL()})}},{key:"set",value:function(m,S){return this.constructor.set.apply(g(g({},this),this.constructor),[this.storeKey,m,S])}},{key:"increment",value:function(m){if(isNaN(m)||typeof m!="number")throw new Error("Value must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/increment"),query:{value:m}})}},{key:"decrement",value:function(m){if(isNaN(m)||typeof m!="number")throw new Error("Value must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/decrement"),query:{value:m}})}}],[{key:"get",value:function(m){if(!Array.isArray(m))throw new Error("Keys must be provided and must be a list of strings.");return this.app.request.post({url:this.app.urls.hiveStore(this.hiveName,this.TYPE),data:m})}},{key:"set",value:function(m,S,E){if(y.default.isObject(m)){if(!Object.keys(m).length)throw new Error("Provided object must have at least 1 key.");return this.app.request.put({url:this.app.urls.hiveStore(this.hiveName,this.TYPE),data:m})}if(!m||typeof m!="string")throw new Error("Key must be provided and must be a string.");if(E!==void 0){if(!y.default.isObject(E))throw new Error("Options must be an object.");var T=E.ttl,A=E.expireAt,P=E.condition;if(T!==void 0&&(isNaN(T)||typeof T!="number"))throw new Error("TTL in seconds must be a number.");if(A!==void 0&&(isNaN(A)||typeof A!="number"))throw new Error("ExpireAt timestamp must be a number.");if(P!==void 0&&!["IfExists","IfNotExists","Always"].includes(P))throw new Error("Condition must be one of this values: [IfExists, IfNotExists, Always].")}if(!(0,w.isHiveValueValid)(S))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/").concat(m),data:g({value:S},E)})}}]),c}(u.HiveStore);return keyValue.KeyValueStore=_,(0,a.default)(_,"TYPE",o.HiveTypes.KEY_VALUE),(0,a.default)(_,"STATIC_METHODS",[].concat((0,e.default)(u.HiveStore.STATIC_METHODS),["get","set"])),keyValue}var list={},hasRequiredList;function requireList(){if(hasRequiredList)return list;hasRequiredList=1;var t=requireInteropRequireDefault();Object.defineProperty(list,"__esModule",{value:!0}),list.ListStore=void 0;var e=t(requireClassCallCheck()),r=t(requireCreateClass()),n=t(requireInherits()),i=t(requirePossibleConstructorReturn()),s=t(requireGetPrototypeOf()),f=t(requireDefineProperty()),a=requireConstants$1(),o=requireBaseStore(),u=requireUtils$1();function y(g){var b=w();return function(){var _=(0,s.default)(g),h;if(b){var d=(0,s.default)(this).constructor;h=Reflect.construct(_,arguments,d)}else h=_.apply(this,arguments);return(0,i.default)(this,h)}}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var v=function(g){(0,n.default)(l,g);var b=y(l);function l(){return(0,e.default)(this,l),b.apply(this,arguments)}return(0,r.default)(l,[{key:"get",value:function(h,d){if(d!==void 0){if(isNaN(d)||typeof d!="number")throw new Error("Index To must be a number.");if(isNaN(h)||typeof h!="number")throw new Error("Index From must be a number.");return this.app.request.get({url:this.getBaseURL(),query:{from:h,to:d}})}if(h!==void 0){if(isNaN(h)||typeof h!="number")throw new Error("Index must be a number.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/").concat(h)})}return this.app.request.get({url:this.getBaseURL()})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}},{key:"insertBefore",value:function(h,d){return this.insert(h,d,!0)}},{key:"insertAfter",value:function(h,d){return this.insert(h,d,!1)}},{key:"insert",value:function(h,d,c){if(!(0,u.isHiveValueValid)(h))throw new Error("ValueToInsert must be provided and must be one of types: string, number, boolean, object, array.");if(!(0,u.isHiveValueValid)(d))throw new Error("AnchorValue must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/insert-").concat(c?"before":"after"),data:{valueToInsert:h,anchorValue:d}})}},{key:"deleteValue",value:function(h,d){if(!(0,u.isHiveValueValid)(h))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(d!==void 0&&(isNaN(d)||typeof d!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/delete-value"),data:{value:h,count:d}})}},{key:"addFirstValue",value:function(h){if(!(0,u.isHiveValueValid)(h))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-first"),data:[h]})}},{key:"addFirstValues",value:function(h){if(!h||!Array.isArray(h)||!h.length||!(0,u.isHiveValueValid)(h))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-first"),data:h})}},{key:"addLastValue",value:function(h){if(!(0,u.isHiveValueValid)(h))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-last"),data:[h]})}},{key:"addLastValues",value:function(h){if(!h||!Array.isArray(h)||!h.length||!(0,u.isHiveValueValid)(h))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add-last"),data:h})}},{key:"deleteFirst",value:function(h){if(h!==void 0&&(isNaN(h)||typeof h!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-first-and-delete"),query:{count:h}})}},{key:"deleteLast",value:function(h){if(h!==void 0&&(isNaN(h)||typeof h!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-last-and-delete"),query:{count:h}})}}]),l}(o.HiveStore);return list.ListStore=v,(0,f.default)(v,"TYPE",a.HiveTypes.LIST),list}var map={},hasRequiredMap;function requireMap(){if(hasRequiredMap)return map;hasRequiredMap=1;var t=requireInteropRequireDefault();Object.defineProperty(map,"__esModule",{value:!0}),map.MapStore=void 0;var e=t(requireClassCallCheck()),r=t(requireCreateClass()),n=t(requireInherits()),i=t(requirePossibleConstructorReturn()),s=t(requireGetPrototypeOf()),f=t(requireDefineProperty()),a=requireConstants$1(),o=requireBaseStore(),u=t(requireUtils$3()),y=requireUtils$1();function w(b){var l=v();return function(){var h=(0,s.default)(b),d;if(l){var c=(0,s.default)(this).constructor;d=Reflect.construct(h,arguments,c)}else d=h.apply(this,arguments);return(0,i.default)(this,d)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=function(b){(0,n.default)(_,b);var l=w(_);function _(){return(0,e.default)(this,_),l.apply(this,arguments)}return(0,r.default)(_,[{key:"get",value:function(d){if(d!==void 0&&!(typeof d=="string"||Array.isArray(d)))throw new Error("Key(s) must be a string or list of strings.");return this.app.request.post({url:this.getBaseURL(),data:u.default.castArray(d)})}},{key:"getValue",value:function(d){if(!d||typeof d!="string")throw new Error("Key must be provided and must be a string.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/get/").concat(d)})}},{key:"keyExists",value:function(d){if(!d||typeof d!="string")throw new Error("Key must be provided and must be a string.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/exists/").concat(d)})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}},{key:"keys",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/keys")})}},{key:"values",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/values")})}},{key:"set",value:function(d,c){if(!d)throw new Error("First argument must be provided and must be a string or an object.");if(u.default.isObject(d)){if(!Object.keys(d).length)throw new Error("Provided object must have at least 1 key.");return this.app.request.put({url:this.getBaseURL(),data:d})}if(typeof d!="string")throw new Error("Key must be a string.");if(!(0,y.isHiveValueValid)(c))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/set/").concat(d),data:{value:c}})}},{key:"setWithOverwrite",value:function(d,c,p){if(!d||typeof d!="string")throw new Error("Key must be provided and must be a string.");if(!(0,y.isHiveValueValid)(c))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(p!==void 0&&typeof p!="boolean")throw new Error("Overwrite must be a boolean.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/set-with-overwrite/").concat(d),data:{value:c,overwrite:p}})}},{key:"increment",value:function(d,c){if(!d||typeof d!="string")throw new Error("Key must be provided and must be a string.");if(c!==void 0&&(isNaN(c)||typeof c!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/increment/").concat(d),query:{count:c}})}},{key:"decrement",value:function(d,c){if(!d||typeof d!="string")throw new Error("Key must be provided and must be a string.");if(c!==void 0&&(isNaN(c)||typeof c!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/decrement/").concat(d),query:{count:c}})}},{key:"deleteKeys",value:function(d){if(!d||!(typeof d=="string"||Array.isArray(d)))throw new Error("Key(s) must be provided and must be a string or list of strings.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/by-obj-keys"),data:u.default.castArray(d)})}}]),_}(o.HiveStore);return map.MapStore=g,(0,f.default)(g,"TYPE",a.HiveTypes.MAP),map}var set={},hasRequiredSet;function requireSet(){if(hasRequiredSet)return set;hasRequiredSet=1;var t=requireInteropRequireDefault();Object.defineProperty(set,"__esModule",{value:!0}),set.SetStore=void 0;var e=t(requireToConsumableArray()),r=t(requireClassCallCheck()),n=t(requireCreateClass()),i=t(requireInherits()),s=t(requirePossibleConstructorReturn()),f=t(requireGetPrototypeOf()),a=t(requireDefineProperty()),o=requireBaseStore(),u=requireConstants$1(),y=requireUtils$1();function w(b){var l=v();return function(){var h=(0,f.default)(b),d;if(l){var c=(0,f.default)(this).constructor;d=Reflect.construct(h,arguments,c)}else d=h.apply(this,arguments);return(0,s.default)(this,d)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var g=function(b){(0,i.default)(_,b);var l=w(_);function _(){return(0,r.default)(this,_),l.apply(this,arguments)}return(0,n.default)(_,[{key:"get",value:function(){return this.app.request.get({url:this.getBaseURL()})}},{key:"getRandom",value:function(d){if(d!==void 0&&(isNaN(d)||typeof d!="number"))throw new Error("Count must be a number.");return this.app.request.get({url:"".concat(this.getBaseURL(),"/random"),query:{count:d}})}},{key:"getRandomAndDelete",value:function(d){if(d!==void 0&&(isNaN(d)||typeof d!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/random"),query:{count:d}})}},{key:"addValue",value:function(d){if(!(0,y.isHiveValueValid)(d))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add"),data:[d]})}},{key:"addValues",value:function(d){if(!d||!Array.isArray(d)||!d.length||!(0,y.isHiveValueValid)(d))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/add"),data:d})}},{key:"deleteValue",value:function(d){if(!(0,y.isHiveValueValid)(d))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:[d]})}},{key:"deleteValues",value:function(d){if(!d||!Array.isArray(d)||!d.length||!(0,y.isHiveValueValid)(d))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:d})}},{key:"isValueMember",value:function(d){if(!(0,y.isHiveValueValid)(d))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/contains"),data:[d]})}},{key:"isValuesMembers",value:function(d){if(!d||!Array.isArray(d)||!d.length||!(0,y.isHiveValueValid)(d))throw new Error("Value must be provided and must be a list of valid JSON items.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/contains"),data:d})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}}],[{key:"difference",value:function(d){if(!Array.isArray(d))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/difference"),data:d})}},{key:"intersection",value:function(d){if(!Array.isArray(d))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/intersection"),data:d})}},{key:"union",value:function(d){if(!Array.isArray(d))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/union"),data:d})}}]),_}(o.HiveStore);return set.SetStore=g,(0,a.default)(g,"TYPE",u.HiveTypes.SET),(0,a.default)(g,"STATIC_METHODS",[].concat((0,e.default)(o.HiveStore.STATIC_METHODS),["difference","intersection","union"])),set}var sortedSet={},hasRequiredSortedSet;function requireSortedSet(){if(hasRequiredSortedSet)return sortedSet;hasRequiredSortedSet=1;var t=requireInteropRequireDefault();Object.defineProperty(sortedSet,"__esModule",{value:!0}),sortedSet.SortedSetStore=void 0;var e=t(requireToConsumableArray()),r=t(requireClassCallCheck()),n=t(requireCreateClass()),i=t(requireInherits()),s=t(requirePossibleConstructorReturn()),f=t(requireGetPrototypeOf()),a=t(requireDefineProperty()),o=requireBaseStore(),u=requireConstants$1(),y=t(requireUtils$3()),w=requireSet(),v=requireUtils$1();function g(d,c){var p=Object.keys(d);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);c&&(m=m.filter(function(S){return Object.getOwnPropertyDescriptor(d,S).enumerable})),p.push.apply(p,m)}return p}function b(d){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?g(Object(p),!0).forEach(function(m){(0,a.default)(d,m,p[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(p)):g(Object(p)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(p,m))})}return d}function l(d){var c=_();return function(){var m=(0,f.default)(d),S;if(c){var E=(0,f.default)(this).constructor;S=Reflect.construct(m,arguments,E)}else S=m.apply(this,arguments);return(0,s.default)(this,S)}}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var h=function(d){(0,i.default)(p,d);var c=l(p);function p(){return(0,r.default)(this,p),c.apply(this,arguments)}return(0,n.default)(p,[{key:"add",value:function(S,E){if(!S||!Array.isArray(S))throw new Error("Items must be provided and must be an array.");if(E!==void 0){if(!y.default.isObject(E))throw new Error("Options must be an object.");var T=E.duplicateBehaviour,A=E.scoreUpdateMode,P=E.resultType;if(T!==void 0&&!["OnlyUpdate","AlwaysAdd"].includes(T))throw new Error("Duplicate Behaviour argument must be one of this values: OnlyUpdate, AlwaysAdd.");if(A!==void 0&&!["Greater","Less"].includes(A))throw new Error("Score Update Mode argument must be one of this values: Greater, Less.");if(P!==void 0&&!["NewAdded","TotalChanged"].includes(P))throw new Error("Result Type must be one of this values: NewAdded, TotalChanged.")}return this.app.request.put({url:"".concat(this.getBaseURL(),"/add"),data:b({items:S},E)})}},{key:"incrementScore",value:function(S,E){if(!(0,v.isHiveValueValid)(S))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(isNaN(E)||typeof E!="number")throw new Error("ScoreValue must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/increment"),data:{scoreValue:E,value:S}})}},{key:"decrementScore",value:function(S,E){if(!(0,v.isHiveValueValid)(S))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(isNaN(E)||typeof E!="number")throw new Error("ScoreValue must be provided and must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/decrement"),data:{scoreValue:E,value:S}})}},{key:"getAndDeleteMaxScore",value:function(S){if(S!==void 0&&(isNaN(S)||typeof S!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-with-max-score-and-delete"),query:{count:S}})}},{key:"getAndDeleteMinScore",value:function(S){if(S!==void 0&&(isNaN(S)||typeof S!="number"))throw new Error("Count must be a number.");return this.app.request.put({url:"".concat(this.getBaseURL(),"/get-with-min-score-and-delete"),query:{count:S}})}},{key:"getRandom",value:function(S){if(S!==void 0){if(!y.default.isObject(S))throw new Error("Options must be an object.");var E=S.count,T=S.withScores;if(E!==void 0&&(isNaN(E)||typeof E!="number"))throw new Error("Count must be a number.");if(T!==void 0&&typeof T!="boolean")throw new Error("With Scores argument must be a boolean.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-random"),query:b({},S)})}},{key:"getScore",value:function(S){if(!(0,v.isHiveValueValid)(S))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/get-score"),data:{value:S}})}},{key:"getRank",value:function(S,E){if(!(0,v.isHiveValueValid)(S))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");if(E!==void 0&&typeof E!="boolean")throw new Error("Reverse argument must be a boolean.");return this.app.request.post({url:"".concat(this.getBaseURL(),"/get-rank"),data:{value:S,reverse:E}})}},{key:"getRangeByRank",value:function(S,E,T){if(isNaN(S)||typeof S!="number")throw new Error("Start Rank must be provided and must be a number.");if(isNaN(E)||typeof E!="number")throw new Error("Stop Rank must be provided and must be a number.");if(T!==void 0){if(!y.default.isObject(T))throw new Error("Options must be an object.");var A=T.withScores,P=T.reverse;if(A!==void 0&&typeof A!="boolean")throw new Error("With Scores argument must be a boolean.");if(P!==void 0&&typeof P!="boolean")throw new Error("Reverse argument must be a boolean.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-range-by-rank"),query:b({startRank:S,stopRank:E},T)})}},{key:"getRangeByScore",value:function(S){if(S!==void 0){if(!y.default.isObject(S))throw new Error("Options must be an object.");var E=S.minScore,T=S.maxScore,A=S.minBound,P=S.maxBound,H=S.offset,O=S.pageSize,q=S.withScores,C=S.reverse;if(E!==void 0&&(isNaN(E)||typeof E!="number"))throw new Error("Minimal Score must be a number.");if(T!==void 0&&(isNaN(T)||typeof T!="number"))throw new Error("Maximal Score must be a number.");if(A!==void 0&&!["Include","Exclude","Infinity"].includes(A))throw new Error("Minimal bound must be one of this values: Include, Exclude, Infinity.");if(P!==void 0&&!["Include","Exclude","Infinity"].includes(P))throw new Error("Maximal bound must be one of this values: Include, Exclude, Infinity.");if(H!==void 0&&(typeof H!="number"||isNaN(H)))throw new Error("Offset must be a number.");if(O!==void 0&&(typeof O!="number"||isNaN(O)))throw new Error("Page Size must be a number.");if(q!==void 0&&typeof q!="boolean")throw new Error("With Scores argument must be a boolean.");if(C!==void 0&&typeof C!="boolean")throw new Error("Reverse argument must be a boolean.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/get-range-by-score"),query:b({},S)})}},{key:"deleteValue",value:function(S){if(!(0,v.isHiveValueValid)(S))throw new Error("Value must be provided and must be one of types: string, number, boolean, object, array.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:[S]})}},{key:"deleteValues",value:function(S){if(!S||!Array.isArray(S)||!S.length||!(0,v.isHiveValueValid)(S))throw new Error("Value must be provided and must be a list of JSON items.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/values"),data:S})}},{key:"deleteValuesByRank",value:function(S,E){if(isNaN(S)||typeof S!="number")throw new Error("Start Rank must be provided and must be a number.");if(isNaN(E)||typeof E!="number")throw new Error("Stop Rank must be provided and must be a number.");return this.app.request.delete({url:"".concat(this.getBaseURL(),"/delete-by-rank"),query:{startRank:S,stopRank:E}})}},{key:"deleteValuesByScore",value:function(S){if(S!==void 0){if(!y.default.isObject(S))throw new Error("Options must be an object.");var E=S.minScore,T=S.maxScore,A=S.minBound,P=S.maxBound;if(E!==void 0&&(isNaN(E)||typeof E!="number"))throw new Error("Minimal Score must be a number.");if(T!==void 0&&(isNaN(T)||typeof T!="number"))throw new Error("Maximal Score must be a number.");if(A!==void 0&&!["Include","Exclude","Infinity"].includes(A))throw new Error("Minimal bound must be one of this values: Include, Exclude, Infinity.");if(P!==void 0&&!["Include","Exclude","Infinity"].includes(P))throw new Error("Maximal bound must be one of this values: Include, Exclude, Infinity.")}return this.app.request.delete({url:"".concat(this.getBaseURL(),"/delete-by-score"),query:b({},S)})}},{key:"length",value:function(){return this.app.request.get({url:"".concat(this.getBaseURL(),"/length")})}},{key:"countBetweenScores",value:function(S){if(S!==void 0){if(!y.default.isObject(S))throw new Error("Options must be an object.");var E=S.minScore,T=S.maxScore,A=S.minBound,P=S.maxBound;if(E!==void 0&&(isNaN(E)||typeof E!="number"))throw new Error("Minimal Score must be a number.");if(T!==void 0&&(isNaN(T)||typeof T!="number"))throw new Error("Maximal Score must be a number.");if(A!==void 0&&!["Include","Exclude","Infinity"].includes(A))throw new Error("Minimal bound must be one of this values: Include, Exclude, Infinity.");if(P!==void 0&&!["Include","Exclude","Infinity"].includes(P))throw new Error("Maximal bound must be one of this values: Include, Exclude, Infinity.")}return this.app.request.get({url:"".concat(this.getBaseURL(),"/count"),query:b({},S)})}}],[{key:"intersection",value:function(S){if(!Array.isArray(S))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/intersection"),data:S})}},{key:"union",value:function(S){if(!Array.isArray(S))throw new Error("Store keys must be provided and must be an array.");return this.app.request.post({url:"".concat(this.app.urls.hiveStore(this.hiveName,this.TYPE),"/action/union"),data:S})}}]),p}(o.HiveStore);return sortedSet.SortedSetStore=h,(0,a.default)(h,"TYPE",u.HiveTypes.SORTED_SET),(0,a.default)(h,"STATIC_METHODS",[].concat((0,e.default)(o.HiveStore.STATIC_METHODS),["difference","intersection","union"])),(0,a.default)(h,"difference",w.SetStore.difference),sortedSet}var hasRequiredStores;function requireStores(){return hasRequiredStores||(hasRequiredStores=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=requireKeyValue();Object.keys(e).forEach(function(f){f==="default"||f==="__esModule"||f in t&&t[f]===e[f]||Object.defineProperty(t,f,{enumerable:!0,get:function(){return e[f]}})});var r=requireList();Object.keys(r).forEach(function(f){f==="default"||f==="__esModule"||f in t&&t[f]===r[f]||Object.defineProperty(t,f,{enumerable:!0,get:function(){return r[f]}})});var n=requireMap();Object.keys(n).forEach(function(f){f==="default"||f==="__esModule"||f in t&&t[f]===n[f]||Object.defineProperty(t,f,{enumerable:!0,get:function(){return n[f]}})});var i=requireSet();Object.keys(i).forEach(function(f){f==="default"||f==="__esModule"||f in t&&t[f]===i[f]||Object.defineProperty(t,f,{enumerable:!0,get:function(){return i[f]}})});var s=requireSortedSet();Object.keys(s).forEach(function(f){f==="default"||f==="__esModule"||f in t&&t[f]===s[f]||Object.defineProperty(t,f,{enumerable:!0,get:function(){return s[f]}})})}(stores)),stores}var hasRequiredHive;function requireHive(){return hasRequiredHive||(hasRequiredHive=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.DataHive=void 0,t.default=s;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=requireStores();function s(a){function o(u){if(!u||typeof u!="string")throw new Error("Hive name must be provided and must be a string.");return new f(u,{app:a})}return o.getNames=function(){return a.request.get({url:a.urls.dataHives()})},o}var f=function(){function a(o,u){(0,r.default)(this,a),this.hiveName=o,this.app=u.app,this.KeyValueStore=i.KeyValueStore.registerType(this),this.ListStore=i.ListStore.registerType(this),this.MapStore=i.MapStore.registerType(this),this.SetStore=i.SetStore.registerType(this),this.SortedSetStore=i.SortedSetStore.registerType(this)}return(0,n.default)(a,[{key:"create",value:function(){return this.app.request.post({url:this.app.urls.dataHive(this.hiveName)})}},{key:"delete",value:function(){return this.app.request.delete({url:this.app.urls.dataHive(this.hiveName)})}},{key:"rename",value:function(u){if(!u||typeof u!="string")throw new Error("New Hive name must be provided and must be a string.");return this.app.request.put({url:this.app.urls.dataHive(this.hiveName),query:{newName:u}})}}]),a}();t.DataHive=f}(hive)),hive}var messaging={},channel={},applyDecoratedDescriptor={exports:{}},hasRequiredApplyDecoratedDescriptor;function requireApplyDecoratedDescriptor(){return hasRequiredApplyDecoratedDescriptor||(hasRequiredApplyDecoratedDescriptor=1,function(t){function e(r,n,i,s,f){var a={};return Object.keys(s).forEach(function(o){a[o]=s[o]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(o,u){return u(r,n,o)||o},a),f&&a.initializer!==void 0&&(a.value=a.initializer?a.initializer.call(f):void 0,a.initializer=void 0),a.initializer===void 0?(Object.defineProperty(r,n,a),null):a}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(applyDecoratedDescriptor)),applyDecoratedDescriptor.exports}var hasRequiredChannel;function requireChannel(){return hasRequiredChannel||(hasRequiredChannel=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireGet()),s=e(requireInherits()),f=e(requirePossibleConstructorReturn()),a=e(requireGetPrototypeOf()),o=e(requireApplyDecoratedDescriptor()),u=requireRt(),y,w;function v(_){var h=g();return function(){var c=(0,a.default)(_),p;if(h){var m=(0,a.default)(this).constructor;p=Reflect.construct(c,arguments,m)}else p=c.apply(this,arguments);return(0,f.default)(this,p)}}function g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b={MESSAGE:"MESSAGE"},l=(y=u.RTScopeConnector.connectionRequired(),w=function(_){(0,s.default)(d,_);var h=v(d);function d(c,p){var m;return(0,r.default)(this,d),m=h.call(this,c),m.app=p,m.connect(),m}return(0,n.default)(d,[{key:"connectSubscriber",get:function(){return this.app.RT.subscriptions.connectToPubSub}},{key:"usersSubscriber",get:function(){return this.app.RT.subscriptions.onPubSubUserStatus}},{key:"commandSubscriber",get:function(){return this.app.RT.subscriptions.onPubSubCommand}},{key:"commandSender",get:function(){return this.app.RT.methods.sendPubSubCommand}},{key:"getScopeOptions",value:function(){var p=this.options.name;return{channel:p}}},{key:"connect",value:function(){if(this.app)return(0,i.default)((0,a.default)(d.prototype),"connect",this).call(this)}},{key:"publish",value:function(p,m,S){return this.app.Messaging.publish(this.options.name,p,m,S)}},{key:"addMessageListener",value:function(p,m,S){typeof p=="function"&&(S=m,m=p,p=void 0),this.addSubscription(b.MESSAGE,this.app.RT.subscriptions.onPubSubMessage,{callback:m,onError:S,params:{selector:p}})}},{key:"removeMessageListener",value:function(p,m){if(typeof p=="function"&&(m=p,p=void 0),p&&typeof p!="string")throw new Error("Selector must be a string.");if(typeof m!="function")throw new Error("Callback must be a function.");var S=function(T){return p?T.params.selector===p&&T.callback===m:T.callback===m};this.stopSubscription(b.MESSAGE,{matcher:S})}},{key:"removeMessageListeners",value:function(p){if(typeof p!="string")throw new Error("Selector must be a string.");var m=function(E){return E.params.selector===p};this.stopSubscription(b.MESSAGE,{matcher:m})}},{key:"removeAllMessageListeners",value:function(){this.stopSubscription(b.MESSAGE,{})}},{key:"addCommandListener",value:function(p,m){return(0,i.default)((0,a.default)(d.prototype),"addCommandListener",this).call(this,p,m),this}},{key:"addUserStatusListener",value:function(p,m){return(0,i.default)((0,a.default)(d.prototype),"addUserStatusListener",this).call(this,p,m),this}},{key:"removeCommandListener",value:function(p){return(0,i.default)((0,a.default)(d.prototype),"removeCommandListeners",this).call(this,p),this}},{key:"removeCommandListeners",value:function(p){return(0,i.default)((0,a.default)(d.prototype),"removeCommandListeners",this).call(this,p),this}},{key:"removeUserStatusListeners",value:function(p){return(0,i.default)((0,a.default)(d.prototype),"removeUserStatusListeners",this).call(this,p),this}},{key:"addConnectListener",value:function(p,m){return(0,i.default)((0,a.default)(d.prototype),"addConnectListener",this).call(this,p,m),this}},{key:"removeConnectListeners",value:function(p,m){return(0,i.default)((0,a.default)(d.prototype),"removeConnectListeners",this).call(this,p,m),this}},{key:"removeAllListeners",value:function(){return(0,i.default)((0,a.default)(d.prototype),"removeAllListeners",this).call(this),this}},{key:"send",value:function(p,m){return(0,i.default)((0,a.default)(d.prototype),"send",this).call(this,p,m)}},{key:"join",value:function(){(0,i.default)((0,a.default)(d.prototype),"connect",this).call(this)}},{key:"leave",value:function(){(0,i.default)((0,a.default)(d.prototype),"disconnect",this).call(this)}},{key:"isJoined",value:function(){return(0,i.default)((0,a.default)(d.prototype),"isConnected",this).call(this)}}]),d}(u.RTScopeConnector),(0,o.default)(w.prototype,"addMessageListener",[y],Object.getOwnPropertyDescriptor(w.prototype,"addMessageListener"),w.prototype),w);t.default=l}(channel)),channel}var helpers={},publishOptionsHeader={},hasRequiredPublishOptionsHeader;function requirePublishOptionsHeader(){return hasRequiredPublishOptionsHeader||(hasRequiredPublishOptionsHeader=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={MESSAGE_TAG:"message",IOS_ALERT_TAG:"ios-alert",IOS_BADGE_TAG:"ios-badge",IOS_SOUND_TAG:"ios-sound",ANDROID_TICKER_TEXT_TAG:"android-ticker-text",ANDROID_CONTENT_TITLE_TAG:"android-content-title",ANDROID_CONTENT_TEXT_TAG:"android-content-text",ANDROID_ACTION_TAG:"android-action",WP_TYPE_TAG:"wp-type",WP_TITLE_TAG:"wp-title",WP_TOAST_SUBTITLE_TAG:"wp-subtitle",WP_TOAST_PARAMETER_TAG:"wp-parameter",WP_TILE_BACKGROUND_IMAGE:"wp-backgroundImage",WP_TILE_COUNT:"wp-count",WP_TILE_BACK_TITLE:"wp-backTitle",WP_TILE_BACK_BACKGROUND_IMAGE:"wp-backImage",WP_TILE_BACK_CONTENT:"wp-backContent",WP_RAW_DATA:"wp-raw"},r=e;t.default=r}(publishOptionsHeader)),publishOptionsHeader}var publishOptions={},hasRequiredPublishOptions;function requirePublishOptions(){return hasRequiredPublishOptions||(hasRequiredPublishOptions=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireCreateClass()),n=e(requireClassCallCheck()),i=(0,r.default)(function s(f){(0,n.default)(this,s),f=f||{},this.publisherId=f.publisherId||void 0,this.headers=f.headers||void 0,this.subtopic=f.subtopic||void 0});t.default=i}(publishOptions)),publishOptions}var deliveryOptions={},hasRequiredDeliveryOptions;function requireDeliveryOptions(){return hasRequiredDeliveryOptions||(hasRequiredDeliveryOptions=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireCreateClass()),n=e(requireClassCallCheck()),i=(0,r.default)(function s(f){(0,n.default)(this,s),f=f||{},this.publishPolicy=f.publishPolicy||void 0,this.pushBroadcast=f.pushBroadcast||void 0,this.pushSinglecast=f.pushSinglecast||void 0,this.publishAt=f.publishAt||void 0,this.repeatEvery=f.repeatEvery||void 0,this.repeatExpiresAt=f.repeatExpiresAt||void 0});t.default=i}(deliveryOptions)),deliveryOptions}var bodyParts={},hasRequiredBodyParts;function requireBodyParts(){return hasRequiredBodyParts||(hasRequiredBodyParts=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireCreateClass()),n=e(requireClassCallCheck()),i=(0,r.default)(function s(f){(0,n.default)(this,s),f=f||{},this.textmessage=f&&f.textmessage,this.htmlmessage=f&&f.htmlmessage});t.default=i}(bodyParts)),bodyParts}var emailEnvelope={},hasRequiredEmailEnvelope;function requireEmailEnvelope(){return hasRequiredEmailEnvelope||(hasRequiredEmailEnvelope=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireUtils$3()),s=function(){function f(a){(0,r.default)(this,f),a=a||{},this.addresses=i.default.castArray(a.addresses),this.ccAddresses=i.default.castArray(a.ccAddresses),this.bccAddresses=i.default.castArray(a.bccAddresses),this.query=a.query||null,this.uniqueEmails=a.uniqueEmails||!1}return(0,n.default)(f,[{key:"setTo",value:function(o){return this.addresses=i.default.castArray(o),this}},{key:"addTo",value:function(o){return this.addresses=this.addresses.concat(i.default.castArray(o)),this}},{key:"getTo",value:function(){return this.addresses}},{key:"setCc",value:function(o){return this.ccAddresses=i.default.castArray(o),this}},{key:"addCc",value:function(o){return this.ccAddresses=this.ccAddresses.concat(i.default.castArray(o)),this}},{key:"getCc",value:function(){return this.ccAddresses}},{key:"setBcc",value:function(o){return this.bccAddresses=i.default.castArray(o),this}},{key:"addBcc",value:function(o){return this.bccAddresses=this.bccAddresses.concat(i.default.castArray(o)),this}},{key:"getBcc",value:function(){return this.bccAddresses}},{key:"setQuery",value:function(o){return this.query=o,this}},{key:"getQuery",value:function(){return this.query}},{key:"setUniqueEmails",value:function(o){return this.uniqueEmails=o,this}},{key:"getUniqueEmails",value:function(){return this.uniqueEmails}},{key:"toJSON",value:function(){var o={};return this.addresses.length>0&&(o.addresses=this.addresses),this.ccAddresses.length>0&&(o["cc-addresses"]=this.ccAddresses),this.bccAddresses.length>0&&(o["bcc-addresses"]=this.bccAddresses),this.query&&(o.criteria=this.query),o.uniqueEmails=this.uniqueEmails,o}}],[{key:"create",value:function(o){return new f(o)}}]),f}();t.default=s}(emailEnvelope)),emailEnvelope}var hasRequiredHelpers;function requireHelpers(){return hasRequiredHelpers||(hasRequiredHelpers=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Bodyparts",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"DeliveryOptions",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"EmailEnvelope",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"PublishOptions",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"PublishOptionsHeaders",{enumerable:!0,get:function(){return r.default}});var r=e(requirePublishOptionsHeader()),n=e(requirePublishOptions()),i=e(requireDeliveryOptions()),s=e(requireBodyParts()),f=e(requireEmailEnvelope())}(helpers)),helpers}var hasRequiredMessaging;function requireMessaging(){return hasRequiredMessaging||(hasRequiredMessaging=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(require_extends()),i=e(require_typeof()),s=e(requireAsyncToGenerator()),f=e(requireClassCallCheck()),a=e(requireCreateClass()),o=e(requireChannel()),u=requireHelpers(),y=function(){function v(g){(0,f.default)(this,v),this.app=g,this.Bodyparts=u.Bodyparts,this.PublishOptions=u.PublishOptions,this.DeliveryOptions=u.DeliveryOptions,this.PublishOptionsHeaders=u.PublishOptionsHeaders,this.EmailEnvelope=u.EmailEnvelope}return(0,a.default)(v,[{key:"subscribe",value:function(b){return w(b),new o.default({name:b},this.app)}},{key:"publish",value:function(){var g=(0,s.default)(r.default.mark(function l(_,h,d,c){var p;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(w(_),p={message:h},!d){S.next=6;break}if(!(Array.isArray(d)||(0,i.default)(d)!=="object")){S.next=5;break}throw new Error('"publishOptions" argument must be an object.');case 5:(0,n.default)(p,d);case 6:if(!c){S.next=10;break}if(!(Array.isArray(c)||(0,i.default)(c)!=="object")){S.next=9;break}throw new Error('"deliveryOptions" argument must be an object.');case 9:(0,n.default)(p,c);case 10:return S.abrupt("return",this.app.request.post({url:this.app.urls.messagingChannel(_),data:p}));case 11:case"end":return S.stop()}},l,this)}));function b(l,_,h,d){return g.apply(this,arguments)}return b}()},{key:"deleteChannel",value:function(){var g=(0,s.default)(r.default.mark(function l(_){return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return w(_),d.abrupt("return",this.app.request.delete({url:this.app.urls.messagingChannelName(_)}));case 2:case"end":return d.stop()}},l,this)}));function b(l){return g.apply(this,arguments)}return b}()},{key:"pushWithTemplate",value:function(){var g=(0,s.default)(r.default.mark(function l(_,h){var d;return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!_||typeof _!="string")){p.next=2;break}throw new Error("Push Template Name must be provided and must be a string.");case 2:return d={},h&&(d.templateValues=h),p.abrupt("return",this.app.request.post({url:this.app.urls.messagingPushWithTemplate(_),data:d}));case 5:case"end":return p.stop()}},l,this)}));function b(l,_){return g.apply(this,arguments)}return b}()},{key:"sendEmail",value:function(){var g=(0,s.default)(r.default.mark(function l(_,h,d,c){var p;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!_||typeof _!="string")){S.next=2;break}throw new Error("Email Subject must be provided and must be a string.");case 2:if(!(!h||Array.isArray(h)||(0,i.default)(h)!=="object")){S.next=4;break}throw new Error("BodyParts must be an object");case 4:if(!(!h.textmessage&&!h.htmlmessage)){S.next=6;break}throw new Error("BodyParts must contain at least one property of [ textmessage | htmlmessage ]");case 6:if(!(!Array.isArray(d)||!d.length)){S.next=8;break}throw new Error("Recipients must be a non empty array.");case 8:return p={subject:_,bodyparts:h,to:d},Array.isArray(c)&&c.length&&(p.attachment=c),S.abrupt("return",this.app.request.post({url:this.app.urls.messagingEmail(),data:p}));case 11:case"end":return S.stop()}},l,this)}));function b(l,_,h,d){return g.apply(this,arguments)}return b}()},{key:"sendEmailFromTemplate",value:function(){var g=(0,s.default)(r.default.mark(function l(_,h,d,c){var p;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!_||typeof _!="string")){S.next=2;break}throw new Error("Email Template Name must be provided and must be a string.");case 2:if(h instanceof u.EmailEnvelope){S.next=4;break}throw new Error("EmailEnvelope is required and should be instance of Backendless.Messaging.EmailEnvelope");case 4:return p=h.toJSON(),p["template-name"]=_,d&&!Array.isArray(d)&&(p["template-values"]=d),Array.isArray(d)&&!c&&(c=d),c&&(p.attachment=c),S.abrupt("return",this.app.request.post({url:this.app.urls.emailTemplateSend(),data:p}));case 10:case"end":return S.stop()}},l,this)}));function b(l,_,h,d){return g.apply(this,arguments)}return b}()},{key:"cancel",value:function(){var g=(0,s.default)(r.default.mark(function l(_){return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!_||typeof _!="string")){d.next=2;break}throw new Error("Message ID must be provided and must be a string.");case 2:return d.abrupt("return",this.app.request.delete({url:this.app.urls.messagingMessage(_)}));case 3:case"end":return d.stop()}},l,this)}));function b(l){return g.apply(this,arguments)}return b}()},{key:"registerDevice",value:function(){var g=(0,s.default)(r.default.mark(function l(_,h,d){var c,p;return r.default.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=this.app.device,p={deviceToken:_,deviceId:c.uuid,os:c.platform,osVersion:c.version},Array.isArray(h)&&(p.channels=h),typeof d=="number"?p.expiration=d:d instanceof Date&&(p.expiration=d.getTime()/1e3),S.abrupt("return",this.app.request.post({url:this.app.urls.messagingRegistrations(),data:p}));case 5:case"end":return S.stop()}},l,this)}));function b(l,_,h){return g.apply(this,arguments)}return b}()},{key:"getRegistrations",value:function(){var g=(0,s.default)(r.default.mark(function l(){var _;return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return _=this.app.device,d.abrupt("return",this.app.request.get({url:this.app.urls.messagingRegistrationDevice(_.uuid)}));case 2:case"end":return d.stop()}},l,this)}));function b(){return g.apply(this,arguments)}return b}()},{key:"unregisterDevice",value:function(){var g=(0,s.default)(r.default.mark(function l(){var _;return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return _=this.app.device,d.abrupt("return",this.app.request.delete({url:this.app.urls.messagingRegistrationDevice(_.uuid)}));case 2:case"end":return d.stop()}},l,this)}));function b(){return g.apply(this,arguments)}return b}()},{key:"getMessageStatus",value:function(){var g=(0,s.default)(r.default.mark(function l(_){return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!_||typeof _!="string")){d.next=2;break}throw new Error("Message ID must be provided and must be a string.");case 2:return d.abrupt("return",this.app.request.get({url:this.app.urls.messagingMessage(_)}));case 3:case"end":return d.stop()}},l,this)}));function b(l){return g.apply(this,arguments)}return b}()},{key:"getPushTemplates",value:function(){var g=(0,s.default)(r.default.mark(function l(_){return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!_||typeof _!="string")){d.next=2;break}throw new Error("Device Type must be provided and must be a string.");case 2:return d.abrupt("return",this.app.request.get({url:this.app.urls.messagingPushTemplates(_)}));case 3:case"end":return d.stop()}},l,this)}));function b(l){return g.apply(this,arguments)}return b}()}]),v}();t.default=y;function w(v){if(!v||typeof v!="string")throw new Error("Channel Name must be provided and must be a string.");if(v.indexOf("/")>=0)throw new Error("Channel Name can not contain slash chars")}}(messaging)),messaging}var files={},utils={},hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i={isBytesArray:function(a){return typeof Buffer<"u"&&a instanceof Buffer||typeof ArrayBuffer<"u"&&a instanceof ArrayBuffer?!0:Array.isArray(a)},ensureSlashInPath:function(a){return a.startsWith("/")?a:"/".concat(a)},trimSlashesInPath:function(a){return a&&(a.startsWith("/")&&(a=a.slice(1)),a.endsWith("/")&&(a=a.slice(0,a.length-1))),a},parseFilePath:function(a){var o={filePath:a,fileName:null};if(a){var u=a.split("/");u[u.length-1].includes(".")&&(o.fileName=u.pop(),o.filePath=u.join("/"))}return o},sanitizeFileName:function(a){return encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22")},getFileName:function(a){if(a.name)return a.name;if(a.path){var o=a.path.split("/");return o[o.length-1]}},toBase64:function(a){return(0,n.default)(r.default.mark(function o(){return r.default.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(typeof Blob<"u"&&typeof FileReader<"u")){y.next=3;break}return a instanceof Blob||(a=new Blob([a],{type:""})),y.abrupt("return",new Promise(function(w,v){var g=new FileReader;g.onerror=function(b){return v(b)},g.onload=function(b){return w(b.target.result.split(";base64,")[1])},g.readAsDataURL(a)}));case 3:if(!(typeof Buffer<"u")){y.next=5;break}return y.abrupt("return",Buffer.from(a).toString("base64"));case 5:return y.abrupt("return",a);case 6:case"end":return y.stop()}},o)}))()}},s=i;t.default=s}(utils)),utils}var persmission={},hasRequiredPersmission;function requirePersmission(){return hasRequiredPersmission||(hasRequiredPersmission=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireInherits()),s=e(requirePossibleConstructorReturn()),f=e(requireGetPrototypeOf()),a=e(requireDefineProperty()),o=e(requirePersmission$2());function u(v){var g=y();return function(){var l=(0,f.default)(v),_;if(g){var h=(0,f.default)(this).constructor;_=Reflect.construct(l,arguments,h)}else _=l.apply(this,arguments);return(0,s.default)(this,_)}}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(v){(0,i.default)(b,v);var g=u(b);function b(){return(0,r.default)(this,b),g.apply(this,arguments)}return(0,n.default)(b,[{key:"getRequestURL",value:function(_,h){return this.app.urls.filePermission(_,h)}}]),b}(o.default);t.default=w,(0,a.default)(w,"BACKWARD_COMPATIBILITY_LABEL","Backendless.Files.Permissions.{READ|DELETE|WRITE}")}(persmission)),persmission}var hasRequiredFiles;function requireFiles(){return hasRequiredFiles||(hasRequiredFiles=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=e(requireUtils()),a=e(requirePersmission()),o=function(){function u(y){(0,i.default)(this,u),this.app=y,this.Permissions={READ:new a.default("READ",y),DELETE:new a.default("DELETE",y),WRITE:new a.default("WRITE",y)}}return(0,s.default)(u,[{key:"saveFile",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b,l,_){var h;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!g||typeof g!="string")){c.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:if(!(!b||typeof b!="string")){c.next=4;break}throw new Error("File Name must be provided and must be a string.");case 4:return c.next=6,f.default.toBase64(l);case 6:return l=c.sent,h={},typeof _=="boolean"&&(h.overwrite=_),g=f.default.trimSlashesInPath(g),b=f.default.sanitizeFileName(b),c.abrupt("return",this.app.request.put({url:"".concat(this.app.urls.fileBinaryPath(g),"/").concat(b),headers:{"Content-Type":"text/plain"},query:h,data:l}));case 12:case"end":return c.stop()}},v,this)}));function w(v,g,b,l){return y.apply(this,arguments)}return w}()},{key:"upload",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b,l){var _,h,d,c;return r.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(_={},typeof l=="boolean"&&(_.overwrite=l),b=f.default.trimSlashesInPath(b),h=f.default.parseFilePath(b),h.fileName&&(b=h.filePath,d=h.fileName),typeof g!="string"){m.next=8;break}return d||(c=f.default.parseFilePath(g),d=c.fileName),m.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.filePath(b),"/").concat(d),query:_,data:{url:g}}));case 8:if(d||(d=f.default.getFileName(g)),d){m.next=11;break}throw new Error("Wrong type of the file source object. Can not get file name");case 11:return d=f.default.sanitizeFileName(d),m.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.filePath(b),"/").concat(d),query:_,form:{file:g}}));case 13:case"end":return m.stop()}},v,this)}));function w(v,g,b){return y.apply(this,arguments)}return w}()},{key:"append",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b,l){var _,h=arguments;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!g||typeof g!="string")){c.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:if(g=f.default.trimSlashesInPath(g),h.length===2&&(l=b,b=void 0,_=f.default.parseFilePath(g),_.fileName&&(g=_.filePath,b=_.fileName)),b){c.next=6;break}throw new Error("Can not resolve target file name");case 6:if(b=f.default.sanitizeFileName(b),typeof l!="string"){c.next=9;break}return c.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.fileAppendPath(g),"/").concat(b),data:{url:l}}));case 9:if(!f.default.isBytesArray(l)){c.next=14;break}return c.next=12,f.default.toBase64(l);case 12:return l=c.sent,c.abrupt("return",this.app.request.put({url:"".concat(this.app.urls.fileAppendBinaryPath(g),"/").concat(b),headers:{"Content-Type":"text/plain"},data:l}));case 14:return c.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.fileAppendPath(g),"/").concat(b),form:{file:l}}));case 15:case"end":return c.stop()}},v,this)}));function w(v,g,b){return y.apply(this,arguments)}return w}()},{key:"appendText",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b,l){var _,h=arguments;return r.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!g||typeof g!="string")){c.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:if(g=f.default.trimSlashesInPath(g),h.length===2&&(l=b,b=void 0,_=f.default.parseFilePath(g),_.fileName&&(g=_.filePath,b=_.fileName)),b){c.next=6;break}throw new Error("Can not resolve target file name");case 6:if(typeof l=="string"){c.next=8;break}throw new Error('"textContent" must be a string');case 8:return b=f.default.sanitizeFileName(b),c.abrupt("return",this.app.request.put({url:"".concat(this.app.urls.fileAppendPath(g),"/").concat(b),headers:{"Content-Type":"text/plain"},data:l}));case 10:case"end":return c.stop()}},v,this)}));function w(v,g,b){return y.apply(this,arguments)}return w}()},{key:"listing",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b,l,_,h){var d;return r.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(d={},!(!g||typeof g!="string")){p.next=3;break}throw new Error('"filePath" must be provided and must be a string.');case 3:return g=f.default.trimSlashesInPath(g),b&&typeof b=="string"&&(d.pattern=b),typeof l=="boolean"&&(d.sub=l),typeof _=="number"&&_>=0&&(d.pagesize=_),typeof h=="number"&&h>=0&&(d.offset=h),p.abrupt("return",this.app.request.get({url:this.app.urls.filePath(g),query:d}));case 9:case"end":return p.stop()}},v,this)}));function w(v,g,b,l,_){return y.apply(this,arguments)}return w}()},{key:"renameFile",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(!g||typeof g!="string")){_.next=2;break}throw new Error('"oldPathName" must be provided and must be a string.');case 2:if(!(!b||typeof b!="string")){_.next=4;break}throw new Error("New File Name must be provided and must be a string.");case 4:return _.abrupt("return",this.app.request.put({url:this.app.urls.fileRename(),data:{oldPathName:f.default.ensureSlashInPath(g),newName:b}}));case 5:case"end":return _.stop()}},v,this)}));function w(v,g){return y.apply(this,arguments)}return w}()},{key:"moveFile",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",this.app.request.put({url:this.app.urls.fileMove(),data:{sourcePath:f.default.ensureSlashInPath(g),targetPath:f.default.ensureSlashInPath(b)}}));case 1:case"end":return _.stop()}},v,this)}));function w(v,g){return y.apply(this,arguments)}return w}()},{key:"copyFile",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",this.app.request.put({url:this.app.urls.fileCopy(),data:{sourcePath:f.default.ensureSlashInPath(g),targetPath:f.default.ensureSlashInPath(b)}}));case 1:case"end":return _.stop()}},v,this)}));function w(v,g){return y.apply(this,arguments)}return w}()},{key:"remove",value:function(){var y=(0,n.default)(r.default.mark(function v(g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!g||typeof g!="string")){l.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:return!g.startsWith("http://")&&!g.startsWith("https://")&&(g=this.app.urls.filePath(g)),l.abrupt("return",this.app.request.delete({url:g}));case 4:case"end":return l.stop()}},v,this)}));function w(v){return y.apply(this,arguments)}return w}()},{key:"exists",value:function(){var y=(0,n.default)(r.default.mark(function v(g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!g||typeof g!="string")){l.next=2;break}throw new Error('"filePath" must be provided and must be a string.');case 2:return g=f.default.trimSlashesInPath(g),l.abrupt("return",this.app.request.get({url:this.app.urls.filePath(g),query:{action:"exists"}}));case 4:case"end":return l.stop()}},v,this)}));function w(v){return y.apply(this,arguments)}return w}()},{key:"getFileCount",value:function(){var y=(0,n.default)(r.default.mark(function v(g,b,l,_){return r.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!g||typeof g!="string")){d.next=2;break}throw new Error('"filesPath" must be provided and must be a string.');case 2:if(!(b&&typeof b!="string")){d.next=4;break}throw new Error("Files Pattern must be provided and must be a string.");case 4:return g=f.default.trimSlashesInPath(g),d.abrupt("return",this.app.request.get({url:this.app.urls.filePath(g),query:{action:"count",pattern:b||"*",sub:!!l,countDirectories:!!_}}));case 6:case"end":return d.stop()}},v,this)}));function w(v,g,b,l){return y.apply(this,arguments)}return w}()},{key:"createDirectory",value:function(){var y=(0,n.default)(r.default.mark(function v(g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!g||typeof g!="string")){l.next=2;break}throw new Error('Directory "path" must be provided and must be a string.');case 2:return g=f.default.trimSlashesInPath(g),l.abrupt("return",this.app.request.post({url:this.app.urls.directoryPath(g)}));case 4:case"end":return l.stop()}},v,this)}));function w(v){return y.apply(this,arguments)}return w}()},{key:"removeDirectory",value:function(){var y=(0,n.default)(r.default.mark(function v(g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!g||typeof g!="string")){l.next=2;break}throw new Error('Directory "path" must be provided and must be a string.');case 2:return g=f.default.trimSlashesInPath(g),l.abrupt("return",this.app.request.delete({url:this.app.urls.filePath(g)}));case 4:case"end":return l.stop()}},v,this)}));function w(v){return y.apply(this,arguments)}return w}()}]),u}();t.default=o}(files)),files}var rso={},connection={},hasRequiredConnection;function requireConnection(){return hasRequiredConnection||(hasRequiredConnection=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireToConsumableArray()),n=e(requireClassCallCheck()),i=e(requireCreateClass()),s=e(requireAssertThisInitialized()),f=e(requireGet()),a=e(requireInherits()),o=e(requirePossibleConstructorReturn()),u=e(requireGetPrototypeOf()),y=e(requireDefineProperty()),w=e(requireApplyDecoratedDescriptor()),v=requireRt(),g,b,l,_,h,d,c,p,m,S;function E(C,j){var V=Object.keys(C);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(C);j&&(N=N.filter(function(Y){return Object.getOwnPropertyDescriptor(C,Y).enumerable})),V.push.apply(V,N)}return V}function T(C){for(var j=1;j<arguments.length;j++){var V=arguments[j]!=null?arguments[j]:{};j%2?E(Object(V),!0).forEach(function(N){(0,y.default)(C,N,V[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(V)):E(Object(V)).forEach(function(N){Object.defineProperty(C,N,Object.getOwnPropertyDescriptor(V,N))})}return C}function A(C){var j=P();return function(){var N=(0,u.default)(C),Y;if(j){var X=(0,u.default)(this).constructor;Y=Reflect.construct(N,arguments,X)}else Y=N.apply(this,arguments);return(0,o.default)(this,Y)}}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H={CHANGES:"CHANGES",CLEARED:"CLEARED",INVOKE:"INVOKE"},O=(g=v.RTScopeConnector.connectionRequired(),b=v.RTScopeConnector.connectionRequired(),l=v.RTScopeConnector.connectionRequired(),_=v.RTScopeConnector.connectionRequired(),h=v.RTScopeConnector.connectionRequired(!0),d=v.RTScopeConnector.connectionRequired(!0),c=v.RTScopeConnector.connectionRequired(!0),p=v.RTScopeConnector.connectionRequired(!0),m=v.RTScopeConnector.connectionRequired(!0),S=function(C){(0,a.default)(V,C);var j=A(V);function V(N,Y){var X;return(0,n.default)(this,V),X=j.call(this,N),(0,y.default)((0,s.default)(X),"onInvoke",function(J){var Q,W=J.method,U=J.args;q(X.invocationTarget,W),(Q=X.invocationTarget)[W].apply(Q,(0,r.default)(U))}),X.app=Y,X.invocationTarget=null,X.connect(),X}return(0,i.default)(V,[{key:"connectSubscriber",get:function(){return this.app.RT.subscriptions.connectToRSO}},{key:"usersSubscriber",get:function(){return this.app.RT.subscriptions.onRSOUserStatus}},{key:"commandSubscriber",get:function(){return this.app.RT.subscriptions.onRSOCommand}},{key:"commandSender",get:function(){return this.app.RT.methods.sendRSOCommand}},{key:"setInvocationTarget",value:function(Y){this.invocationTarget=Y}},{key:"connect",value:function(){if(this.app)return(0,f.default)((0,u.default)(V.prototype),"connect",this).call(this)}},{key:"onConnect",value:function(){(0,f.default)((0,u.default)(V.prototype),"onConnect",this).apply(this,arguments),this.addSubscription(H.INVOKE,this.app.RT.subscriptions.onRSOInvoke,{callback:this.onInvoke})}},{key:"onDisconnect",value:function(){this.stopSubscription(H.INVOKE,{callback:this.onInvoke}),(0,f.default)((0,u.default)(V.prototype),"onDisconnect",this).apply(this,arguments)}},{key:"addChangesListener",value:function(Y,X){this.addSubscription(H.CHANGES,this.app.RT.subscriptions.onRSOChanges,{callback:Y,onError:X})}},{key:"removeChangesListeners",value:function(Y){this.stopSubscription(H.CHANGES,{callback:Y})}},{key:"addClearListener",value:function(Y,X){this.addSubscription(H.CLEARED,this.app.RT.subscriptions.onRSOClear,{callback:Y,onError:X})}},{key:"removeClearListeners",value:function(Y){this.stopSubscription(H.CLEARED,{callback:Y})}},{key:"addCommandListener",value:function(Y,X){return(0,f.default)((0,u.default)(V.prototype),"addCommandListener",this).call(this,Y,X),this}},{key:"removeCommandListener",value:function(Y){return(0,f.default)((0,u.default)(V.prototype),"removeCommandListeners",this).call(this,Y),this}},{key:"removeCommandListeners",value:function(Y){return(0,f.default)((0,u.default)(V.prototype),"removeCommandListeners",this).call(this,Y),this}},{key:"addUserStatusListener",value:function(Y,X){return(0,f.default)((0,u.default)(V.prototype),"addUserStatusListener",this).call(this,Y,X),this}},{key:"removeUserStatusListeners",value:function(Y){return(0,f.default)((0,u.default)(V.prototype),"removeUserStatusListeners",this).call(this,Y),this}},{key:"addConnectListener",value:function(Y,X){return(0,f.default)((0,u.default)(V.prototype),"addConnectListener",this).call(this,Y,X),this}},{key:"removeConnectListeners",value:function(Y,X){return(0,f.default)((0,u.default)(V.prototype),"removeConnectListeners",this).call(this,Y,X),this}},{key:"removeAllListeners",value:function(){return(0,f.default)((0,u.default)(V.prototype),"removeAllListeners",this).call(this),this}},{key:"get",value:function(Y){return this.app.RT.methods.getRSO(T(T({},this.getScopeOptions()),{},{key:Y}))}},{key:"set",value:function(Y,X){return this.app.RT.methods.setRSO(T(T({},this.getScopeOptions()),{},{key:Y,data:X}))}},{key:"clear",value:function(){return this.app.RT.methods.clearRSO(this.getScopeOptions())}},{key:"invoke",value:function(Y){for(var X=arguments.length,J=new Array(X>1?X-1:0),Q=1;Q<X;Q++)J[Q-1]=arguments[Q];return this.invokeOn.apply(this,[Y,void 0].concat(J))}},{key:"invokeOn",value:function(Y,X){for(var J=this,Q=arguments.length,W=new Array(Q>2?Q-2:0),U=2;U<Q;U++)W[U-2]=arguments[U];return Promise.resolve().then(function(){return q(J.invocationTarget,Y)}).then(function(){return J.app.RT.methods.invokeRSOMethod(T(T({},J.getScopeOptions()),{},{method:Y,targets:X,args:W}))})}}]),V}(v.RTScopeConnector),(0,w.default)(S.prototype,"addChangesListener",[g],Object.getOwnPropertyDescriptor(S.prototype,"addChangesListener"),S.prototype),(0,w.default)(S.prototype,"removeChangesListeners",[b],Object.getOwnPropertyDescriptor(S.prototype,"removeChangesListeners"),S.prototype),(0,w.default)(S.prototype,"addClearListener",[l],Object.getOwnPropertyDescriptor(S.prototype,"addClearListener"),S.prototype),(0,w.default)(S.prototype,"removeClearListeners",[_],Object.getOwnPropertyDescriptor(S.prototype,"removeClearListeners"),S.prototype),(0,w.default)(S.prototype,"get",[h],Object.getOwnPropertyDescriptor(S.prototype,"get"),S.prototype),(0,w.default)(S.prototype,"set",[d],Object.getOwnPropertyDescriptor(S.prototype,"set"),S.prototype),(0,w.default)(S.prototype,"clear",[c],Object.getOwnPropertyDescriptor(S.prototype,"clear"),S.prototype),(0,w.default)(S.prototype,"invoke",[p],Object.getOwnPropertyDescriptor(S.prototype,"invoke"),S.prototype),(0,w.default)(S.prototype,"invokeOn",[m],Object.getOwnPropertyDescriptor(S.prototype,"invokeOn"),S.prototype),S);t.default=O;function q(C,j){if(!C)throw new Error('"invocationTarget" is not specified');if(typeof C[j]!="function")throw new Error('Method "'.concat(j,'" of invocationTarget is not function'))}}(connection)),connection}var hasRequiredRso;function requireRso(){return hasRequiredRso||(hasRequiredRso=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireConnection()),s=function(){function f(a){(0,r.default)(this,f),this.app=a}return(0,n.default)(f,[{key:"connect",value:function(o){return new i.default({name:o},this.app)}}]),f}();t.default=s}(rso)),rso}var localCache={},virtualStorage={},hasRequiredVirtualStorage;function requireVirtualStorage(){return hasRequiredVirtualStorage||(hasRequiredVirtualStorage=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function s(){(0,r.default)(this,s),this.data={}}return(0,n.default)(s,[{key:"get",value:function(a){return this.data[a]}},{key:"set",value:function(a,o){this.data[a]=o}},{key:"remove",value:function(a){delete this.data[a]}}]),s}();t.default=i}(virtualStorage)),virtualStorage}var localStorage$1={},hasRequiredLocalStorage;function requireLocalStorage(){return hasRequiredLocalStorage||(hasRequiredLocalStorage=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass());function i(f,a){if(!localStorage.getItem(f.storageName)){var o=localStorage.getItem(a);o&&(localStorage.setItem(f.storageName,o),localStorage.removeItem(a))}}var s=function(){function f(a,o){(0,r.default)(this,f),this.storageName=a,i(this,o)}return(0,n.default)(f,[{key:"getStore",value:function(){try{return JSON.parse(localStorage.getItem(this.storageName))||{}}catch(o){console.warn("Could not parse data from LocalStorage",o)}return{}}},{key:"setStore",value:function(o){localStorage.setItem(this.storageName,JSON.stringify(o))}},{key:"get",value:function(o){return this.getStore()[o]}},{key:"set",value:function(o,u){var y=this.getStore();y[o]=u,this.setStore(y)}},{key:"remove",value:function(o){var u=this.getStore();delete u[o],this.setStore(u)}}]),f}();t.default=s}(localStorage$1)),localStorage$1}var hasRequiredLocalCache;function requireLocalCache(){return hasRequiredLocalCache||(hasRequiredLocalCache=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=e(requireUtils$3()),s=e(requireVirtualStorage()),f=e(requireLocalStorage()),a="Backendless",o=function(){function u(y){(0,r.default)(this,u),this.app=y,this.storageName=this.app.appId?"".concat(a,"_").concat(this.app.appId):a;var w=i.default.isLocalStorageSupported?f.default:s.default;this.setStorage(w),this.Keys={USER_TOKEN:"user-token",CURRENT_USER_ID:"current-user-id",STAY_LOGGED_IN:"stayLoggedIn"}}return(0,n.default)(u,[{key:"setStorage",value:function(w){this.storage=new w(this.storageName,a)}},{key:"set",value:function(w,v){this.storage.set(w,v)}},{key:"get",value:function(w){return this.storage.get(w)}},{key:"remove",value:function(w){this.storage.remove(w)}}]),u}();t.default=o}(localCache)),localCache}var unitOfWork={},wrapNativeSuper={exports:{}},isNativeFunction={exports:{}},hasRequiredIsNativeFunction;function requireIsNativeFunction(){return hasRequiredIsNativeFunction||(hasRequiredIsNativeFunction=1,function(t){function e(r){try{return Function.toString.call(r).indexOf("[native code]")!==-1}catch{return typeof r=="function"}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(isNativeFunction)),isNativeFunction.exports}var construct={exports:{}},isNativeReflectConstruct={exports:{}},hasRequiredIsNativeReflectConstruct;function requireIsNativeReflectConstruct(){return hasRequiredIsNativeReflectConstruct||(hasRequiredIsNativeReflectConstruct=1,function(t){function e(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t.exports=e=function(){return!!r},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(isNativeReflectConstruct)),isNativeReflectConstruct.exports}var hasRequiredConstruct;function requireConstruct(){return hasRequiredConstruct||(hasRequiredConstruct=1,function(t){var e=requireIsNativeReflectConstruct(),r=requireSetPrototypeOf();function n(i,s,f){if(e())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,s);var o=new(i.bind.apply(i,a));return f&&r(o,f.prototype),o}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(construct)),construct.exports}var hasRequiredWrapNativeSuper;function requireWrapNativeSuper(){return hasRequiredWrapNativeSuper||(hasRequiredWrapNativeSuper=1,function(t){var e=requireGetPrototypeOf(),r=requireSetPrototypeOf(),n=requireIsNativeFunction(),i=requireConstruct();function s(f){var a=typeof Map=="function"?new Map:void 0;return t.exports=s=function(u){if(u===null||!n(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(a!==void 0){if(a.has(u))return a.get(u);a.set(u,y)}function y(){return i(u,arguments,e(this).constructor)}return y.prototype=Object.create(u.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),r(y,u)},t.exports.__esModule=!0,t.exports.default=t.exports,s(f)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}(wrapNativeSuper)),wrapNativeSuper.exports}var constants={},hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1,Object.defineProperty(constants,"__esModule",{value:!0}),constants.OperationType=constants.IsolationLevelEnum=void 0;var t={CREATE:"CREATE",CREATE_BULK:"CREATE_BULK",UPDATE:"UPDATE",UPDATE_BULK:"UPDATE_BULK",DELETE:"DELETE",DELETE_BULK:"DELETE_BULK",UPSERT:"UPSERT",UPSERT_BULK:"UPSERT_BULK",FIND:"FIND",ADD_RELATION:"ADD_RELATION",SET_RELATION:"SET_RELATION",DELETE_RELATION:"DELETE_RELATION"};constants.OperationType=t;var e={READ_UNCOMMITTED:"READ_UNCOMMITTED",READ_COMMITTED:"READ_COMMITTED",REPEATABLE_READ:"REPEATABLE_READ",SERIALIZABLE:"SERIALIZABLE"};return constants.IsolationLevelEnum=e,constants}var jsonAdapter={},opResult={},opResultValueReference={},hasRequiredOpResultValueReference;function requireOpResultValueReference(){if(hasRequiredOpResultValueReference)return opResultValueReference;hasRequiredOpResultValueReference=1;var t=requireInteropRequireDefault();Object.defineProperty(opResultValueReference,"__esModule",{value:!0}),opResultValueReference.OpResultValueReference=void 0;var e=t(requireClassCallCheck()),r=t(requireCreateClass()),n=function(){function i(s,f){var a=f.resultIndex,o=f.propName;(0,e.default)(this,i),this.opResult=s,this.resultIndex=a,this.propName=o}return(0,r.default)(i,[{key:"getTableName",value:function(){return this.opResult.getTableName()}},{key:"toJSON",value:function(){var f=this.opResult.toJSON();return this.resultIndex!==void 0&&(f.resultIndex=this.resultIndex),this.propName!==void 0&&(f.propName=this.propName),!f.propName&&this.opResult.isFindRef()&&(f.propName="objectId"),f}}]),i}();return opResultValueReference.OpResultValueReference=n,opResultValueReference}var hasRequiredOpResult;function requireOpResult(){if(hasRequiredOpResult)return opResult;hasRequiredOpResult=1;var t=requireInteropRequireDefault();Object.defineProperty(opResult,"__esModule",{value:!0}),opResult.OpResult=void 0;var e=t(requireClassCallCheck()),r=t(requireCreateClass()),n=requireConstants(),i=requireOpResultValueReference(),s=function(){function f(a,o){var u=o.operationType,y=o.table,w=o.payload;(0,e.default)(this,f),this.uow=a,this.operationType=u,this.table=y,this.payload=w;var v=this.uow.getOpStackName(u,y),g=this.uow.getNextOpResultIndex(v);this.opResultId="".concat(v).concat(g),this.result=null}return(0,r.default)(f,[{key:"setResult",value:function(o){this.result=o}},{key:"getResult",value:function(){return this.result}},{key:"setError",value:function(o){this.error=o}},{key:"getError",value:function(){return this.error}},{key:"getType",value:function(){return this.operationType}},{key:"isFindRef",value:function(){return this.operationType===n.OperationType.FIND}},{key:"isCollectionRef",value:function(){return this.operationType===n.OperationType.FIND||this.operationType===n.OperationType.CREATE_BULK}},{key:"isObjectRef",value:function(){return this.operationType===n.OperationType.CREATE||this.operationType===n.OperationType.UPDATE||this.operationType===n.OperationType.UPSERT}},{key:"setOpResultId",value:function(o){return this.opResultId=o,this}},{key:"getOpResultId",value:function(){return this.opResultId}},{key:"getTableName",value:function(){return this.table}},{key:"resolveTo",value:function(o,u){return typeof o=="string"&&(u=o,o=void 0),new i.OpResultValueReference(this,{resultIndex:o,propName:u})}},{key:"toJSON",value:function(){var o={___ref:!0,opResultId:this.opResultId};return this.isObjectRef()&&(o.propName="objectId"),o}}]),f}();return opResult.OpResult=s,opResult}var hasRequiredJsonAdapter;function requireJsonAdapter(){if(hasRequiredJsonAdapter)return jsonAdapter;hasRequiredJsonAdapter=1;var t=requireInteropRequireDefault();Object.defineProperty(jsonAdapter,"__esModule",{value:!0}),jsonAdapter.OperationJSONAdapter=void 0;var e=t(require_typeof()),r=requireConstants(),n=requireOpResult();function i(o,u){if(Array.isArray(u))return u.map(function(g){return i(o,g)});if(u&&(0,e.default)(u)==="object"){if(u.___ref){var y=o.getOpResultById(u.opResultId);return u.resultIndex!==void 0?y.resolveTo(u.resultIndex,u.propName):u.propName!==void 0?y.resolveTo(u.propName):y}var w={};for(var v in u)w[v]=i(o,u[v]);return w}return u}var s={CREATE:function(u,y){var w=y.table,v=y.payload;return u.create.call(u,w,i(u,v))},DELETE:function(u,y){var w=y.table,v=y.payload;return u.delete.call(u,w,i(u,v))},UPDATE:function(u,y){var w=y.table,v=y.payload;return u.update.call(u,w,i(u,v))},UPSERT:function(u,y){var w=y.table,v=y.payload;return u.upsert.call(u,w,i(u,v))},UPDATE_BULK:function(u,y){var w=y.table,v=y.payload,g=f(u,{table:w,payload:v});return g.push(i(u,v.changes)),u.bulkUpdate.apply(u,g)},DELETE_BULK:function(u,y){var w=y.table,v=y.payload,g=f(u,{table:w,payload:v});return u.bulkDelete.apply(u,g)},CREATE_BULK:function(u,y){var w=y.table,v=y.payload;return u.bulkCreate.call(u,w,i(u,v))},UPSERT_BULK:function(u,y){var w=y.table,v=y.payload;return u.bulkUpsert.call(u,w,i(u,v))},SET_RELATION:function(u,y){var w=y.table,v=y.payload;return a(u,"setRelation",{table:w,payload:v})},DELETE_RELATION:function(u,y){var w=y.table,v=y.payload;return a(u,"deleteRelation",{table:w,payload:v})},ADD_RELATION:function(u,y){var w=y.table,v=y.payload;return a(u,"addToRelation",{table:w,payload:v})},FIND:function(u,y){var w=y.table,v=y.payload;return u.addOperations(r.OperationType.FIND,w,v)}};jsonAdapter.OperationJSONAdapter=s;function f(o,u){var y=u.table,w=u.payload,v=[];if(w.conditional)v.push(y),v.push(w.conditional);else{var g=i(o,w.unconditional);g instanceof n.OpResult||v.push(y),v.push(g)}return v}function a(o,u,y){var w=y.table,v=y.payload,g=[w];return typeof v.parentObject=="string"?g.push({objectId:v.parentObject}):g.push(i(o,v.parentObject)),g.push(v.relationColumn),g.push(v.conditional||i(o,v.unconditional)),o[u].apply(o,g)}return jsonAdapter}var hasRequiredUnitOfWork;function requireUnitOfWork(){return hasRequiredUnitOfWork||(hasRequiredUnitOfWork=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=H;var r=e(requireRegenerator()),n=e(require_typeof()),i=e(requireAsyncToGenerator()),s=e(requireObjectWithoutProperties()),f=e(requireDefineProperty()),a=e(requireClassCallCheck()),o=e(requireCreateClass()),u=e(requireInherits()),y=e(requirePossibleConstructorReturn()),w=e(requireGetPrototypeOf()),v=e(requireWrapNativeSuper()),g=e(requireUtils$3()),b=e(requireDataQueryBuilder()),l=requireConstants(),_=requireJsonAdapter(),h=requireOpResult(),d=requireOpResultValueReference(),c=["meta"];function p(O,q){var C=Object.keys(O);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(O);q&&(j=j.filter(function(V){return Object.getOwnPropertyDescriptor(O,V).enumerable})),C.push.apply(C,j)}return C}function m(O){for(var q=1;q<arguments.length;q++){var C=arguments[q]!=null?arguments[q]:{};q%2?p(Object(C),!0).forEach(function(j){(0,f.default)(O,j,C[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(C)):p(Object(C)).forEach(function(j){Object.defineProperty(O,j,Object.getOwnPropertyDescriptor(C,j))})}return O}function S(O){var q=E();return function(){var j=(0,w.default)(O),V;if(q){var N=(0,w.default)(this).constructor;V=Reflect.construct(j,arguments,N)}else V=j.apply(this,arguments);return(0,y.default)(this,V)}}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var T=function(O){(0,u.default)(C,O);var q=S(C);function C(j,V){var N;return(0,a.default)(this,C),N=q.call(this,j.message),N.code=j.code,N.operation=V,N}return(0,o.default)(C,[{key:"toJSON",value:function(){return{message:this.message,operation:this.operation}}}]),C}((0,v.default)(Error)),A=function(){function O(q){var C=q.success,j=q.error,V=q.results;(0,a.default)(this,O),this.success=C,this.error=j,this.results=V}return(0,o.default)(O,[{key:"isSuccess",value:function(){return this.success}},{key:"getError",value:function(){return this.error}},{key:"getResults",value:function(){return this.results}}]),O}(),P=function(){function O(q,C){(0,a.default)(this,O),this.app=C,this.payload={isolationLevelEnum:q,operations:[]},this.usedOpIds={}}return(0,o.default)(O,[{key:"getOpResultById",value:function(C){var j=this.payload.operations.find(function(V){return V.meta.opResult.getOpResultId()===C});return j.meta.opResult}},{key:"setIsolationLevel",value:function(C){this.payload.isolationLevelEnum=C}},{key:"getOpStackName",value:function(C,j){return"".concat(C.toLowerCase()).concat(j)}},{key:"getNextOpResultIndex",value:function(C){return this.usedOpIds[C]||(this.usedOpIds[C]=0),++this.usedOpIds[C]}},{key:"addOperations",value:function(C,j,V){Array.isArray(V)?V=V.map(function(Y){return delete Y.___jsonclass,Y}):delete V.___jsonclass;var N=new h.OpResult(this,{operationType:C,table:j,payload:V});return this.payload.operations.push({operationType:C,table:j,payload:V,meta:{opResult:N}}),N}},{key:"composePayload",value:function(){return m(m({},this.payload),{},{operations:this.payload.operations.map(function(C){var j=C.meta,V=(0,s.default)(C,c);return m(m({},V),{},{opResultId:j.opResult.getOpResultId()})})})}},{key:"execute",value:function(){var q=(0,i.default)(r.default.mark(function j(){var V;return r.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.app.request.post({url:this.app.urls.transactions(),data:this.composePayload()});case 2:return V=Y.sent,Y.abrupt("return",this.setResult(V));case 4:case"end":return Y.stop()}},j,this)}));function C(){return q.apply(this,arguments)}return C}()},{key:"setResult",value:function(C){if(C.results&&this.payload.operations.forEach(function(V){var N=V.meta.opResult.getOpResultId();C.results[N]&&V.meta.opResult.setResult(C.results[N].result)}),C.error){var j=this.payload.operations.find(function(V){return C.error.operation.opResultId===V.meta.opResult.getOpResultId()});C.error=new T(C.error,j.meta.opResult),j.meta.opResult.setError(C.error)}return new A(C)}},{key:"find",value:function(C,j){var V=j instanceof b.default?j.toJSON():j||{};if(!C||typeof C!="string")throw new Error("Invalid arguments");if((0,n.default)(V)!=="object"||Array.isArray(V))throw new Error("Invalid arguments");var N={queryOptions:{}};return V.pageSize>0&&(N.pageSize=V.pageSize),V.offset>0&&(N.offset=V.offset),V.properties&&(N.properties=V.properties),V.excludeProps&&(N.excludeProps=V.excludeProps),V.excludeProps&&(N.excludeProps=V.excludeProps),V.where&&(N.whereClause=V.where),V.having&&(N.havingClause=V.having),V.groupBy&&(N.groupBy=V.groupBy),V.sortBy&&(N.queryOptions.sortBy=V.sortBy),V.relations&&(N.queryOptions.related=V.relations),V.relationsDepth&&(N.queryOptions.relationsDepth=V.relationsDepth),V.relationsPageSize>0&&(N.queryOptions.relationsPageSize=V.relationsPageSize),this.addOperations(l.OperationType.FIND,C,N)}},{key:"upsert",value:function(){var C,j;if(arguments.length===1)C=g.default.getClassName(arguments.length<=0?void 0:arguments[0]),j=arguments.length<=0?void 0:arguments[0];else if(arguments.length===2)C=arguments.length<=0?void 0:arguments[0],j=arguments.length<=1?void 0:arguments[1];else throw new Error("Invalid arguments");if(!C||typeof C!="string")throw new Error("Invalid arguments");if(!j||(0,n.default)(j)!=="object"||Array.isArray(j))throw new Error("Invalid arguments");return this.addOperations(l.OperationType.UPSERT,C,j)}},{key:"create",value:function(){var C,j;if(arguments.length===1)C=g.default.getClassName(arguments.length<=0?void 0:arguments[0]),j=arguments.length<=0?void 0:arguments[0];else if(arguments.length===2)C=arguments.length<=0?void 0:arguments[0],j=arguments.length<=1?void 0:arguments[1];else throw new Error("Invalid arguments");if(!C||typeof C!="string")throw new Error("Invalid arguments");if(!j||(0,n.default)(j)!=="object"||Array.isArray(j))throw new Error("Invalid arguments");return this.addOperations(l.OperationType.CREATE,C,j)}},{key:"update",value:function(){for(var C,j,V=arguments.length,N=new Array(V),Y=0;Y<V;Y++)N[Y]=arguments[Y];if(N.length===1)C=g.default.getClassName(N[0]),j=N[0];else if(N.length===2&&typeof N[0]=="string")C=N[0],j=N[1];else if(N[0]instanceof h.OpResult||N[0]instanceof d.OpResultValueReference)if(C=N[0].getTableName(),j={objectId:N[0]},N.length===3&&typeof N[1]=="string")j[N[1]]=N[2];else if(N.length===2)j=m(m({},j),N[1]);else throw new Error("Invalid arguments");else throw new Error("Invalid arguments");if(!C||typeof C!="string")throw new Error("Invalid arguments");return this.addOperations(l.OperationType.UPDATE,C,j)}},{key:"delete",value:function(){for(var C,j,V=arguments.length,N=new Array(V),Y=0;Y<V;Y++)N[Y]=arguments[Y];if(N.length===1)N[0]instanceof h.OpResult||N[0]instanceof d.OpResultValueReference?(C=N[0].getTableName(),j=N[0]):N[0]&&(0,n.default)(N[0])==="object"&&!Array.isArray(N[0])&&(C=g.default.getClassName(N[0]),j=N[0].objectId);else if(N.length===2)C=N[0],j=N[1]&&N[1].objectId||N[1];else throw new Error("Invalid arguments");if(!j||Array.isArray(j)||typeof j!="string"&&(0,n.default)(j)!=="object")throw new Error("Invalid arguments");if(!C||typeof C!="string")throw new Error("Table Name must be a string.");return this.addOperations(l.OperationType.DELETE,C,j)}},{key:"bulkUpsert",value:function(C,j){if(Array.isArray(C)&&(j=C,C=g.default.getClassName(j[0])),!j||!Array.isArray(j))throw new Error("Objects must be an array of objects.");if(!C||typeof C!="string")throw new Error("Table Name must be a string.");return this.addOperations(l.OperationType.UPSERT_BULK,C,j)}},{key:"bulkCreate",value:function(C,j){if(Array.isArray(C)&&(j=C,C=g.default.getClassName(j[0])),!j||!Array.isArray(j))throw new Error("Objects must be an array of objects.");if(!C||typeof C!="string")throw new Error("Table Name must be a string.");return this.addOperations(l.OperationType.CREATE_BULK,C,j)}},{key:"bulkUpdate",value:function(){for(var C,j={},V=arguments.length,N=new Array(V),Y=0;Y<V;Y++)N[Y]=arguments[Y];if(N.length===2)j.changes=N[1],typeof N[0]=="string"?(C=g.default.getClassName(N[1]),j.conditional=N[0]):N[0]instanceof h.OpResult&&(C=N[0].getTableName(),j.unconditional=N[0]);else if(N.length===3)if(C=N[0],j.changes=N[2],typeof N[1]=="string")j.conditional=N[1];else if(Array.isArray(N[1]))j.unconditional=N[1].map(function(X){return X.objectId||X});else throw new Error("Invalid arguments");else throw new Error("Invalid arguments");if(!C||typeof C!="string")throw new Error("Table Name must be a string.");return this.addOperations(l.OperationType.UPDATE_BULK,C,j)}},{key:"bulkDelete",value:function(){for(var C={},j,V=arguments.length,N=new Array(V),Y=0;Y<V;Y++)N[Y]=arguments[Y];if(N.length===1)if(N[0]instanceof h.OpResult)j=N[0].getTableName(),C.unconditional=N[0];else if(Array.isArray(N[0]))j=g.default.getClassName(N[0][0]),C.unconditional=N[0].map(function(X){return X.objectId});else throw new Error("Invalid arguments");else if(N.length===2)if(j=N[0],typeof N[1]=="string")C.conditional=N[1];else if(Array.isArray(N[1]))C.unconditional=N[1].map(function(X){return X.objectId||X});else throw new Error("Invalid arguments");else throw new Error("Invalid arguments");if(!j||typeof j!="string")throw new Error("Table Name must be a string.");return this.addOperations(l.OperationType.DELETE_BULK,j,C)}},{key:"addToRelation",value:function(){for(var C=arguments.length,j=new Array(C),V=0;V<C;V++)j[V]=arguments[V];return this.relationsOperation(l.OperationType.ADD_RELATION,j)}},{key:"setRelation",value:function(){for(var C=arguments.length,j=new Array(C),V=0;V<C;V++)j[V]=arguments[V];return this.relationsOperation(l.OperationType.SET_RELATION,j)}},{key:"deleteRelation",value:function(){for(var C=arguments.length,j=new Array(C),V=0;V<C;V++)j[V]=arguments[V];return this.relationsOperation(l.OperationType.DELETE_RELATION,j)}},{key:"relationsOperation",value:function(C,j){var V,N,Y,X,J,Q;if(j.length===3)if(Y=j[0],N=j[1],Q=j[2],Y instanceof h.OpResult||Y instanceof d.OpResultValueReference)V=Y.getTableName();else if(Y&&(0,n.default)(Y)==="object")V=g.default.getClassName(Y);else throw new Error("Invalid the first argument, it must be an instance of [OpResult|OpResultValueReference|Object]");else if(j.length===4)if(V=j[0],N=j[2],Q=j[3],typeof j[1]=="string")Y=j[1];else if(j[1]&&(0,n.default)(j[1])==="object")Y=j[1];else throw new Error("Invalid the second argument, it must be an Object or objectId");else throw new Error("Invalid arguments");if(Y&&Y.objectId&&(Y=Y.objectId),typeof Q=="string"?X=Q:Q instanceof h.OpResult&&Q.isCollectionRef()?J=Q:(Array.isArray(Q)||(Q=[Q]),J=Q.map(function(U){if(U){if(U instanceof h.OpResult||U instanceof d.OpResultValueReference||typeof U=="string")return U;if(U.objectId)return U.objectId}throw new Error("Invalid child argument, it must be an instance of [OpResult|OpResultValueReference|Object] or objectId")})),!N||typeof N!="string")throw new Error('Invalid "relationColumn" parameter, check passed arguments');if(!J&&!X)throw new Error('Neither "unconditional" nor "conditional" parameter is specified, check passed arguments');if(!V||typeof V!="string")throw new Error("Table Name must be a string.");var W={parentObject:Y,relationColumn:N};return X?W.conditional=X:W.unconditional=J,this.addOperations(C,V,W)}}]),O}();(0,f.default)(P,"IsolationLevelEnum",l.IsolationLevelEnum),(0,f.default)(P,"OpResult",h.OpResult),(0,f.default)(P,"OpResultValueReference",d.OpResultValueReference);function H(O){return function(q){(0,u.default)(j,q);var C=S(j);function j(V){return(0,a.default)(this,j),C.call(this,V,O)}return(0,o.default)(j,null,[{key:"initFromJSON",value:function(N){var Y=new this(N.transactionIsolation);return N.operations.forEach(function(X){var J=_.OperationJSONAdapter[X.operationType](Y,X);J.setOpResultId(X.opResultId)}),Y}}]),j}(P)}}(unitOfWork)),unitOfWork}var management={},data={},hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireClassCallCheck()),n=e(requireCreateClass()),i=function(){function s(f){(0,r.default)(this,s),this.app=f}return(0,n.default)(s,[{key:"createTable",value:function(a,o){if(!a||typeof a!="string")throw new Error("Table name must be provided and must be a string.");if(!Array.isArray(o))throw new Error("Columns must be a list.");return this.app.request.post({url:this.app.urls.managementDataTable(),data:{name:a,columns:o}})}}]),s}();t.default=i}(data)),data}var hasRequiredManagement;function requireManagement(){return hasRequiredManagement||(hasRequiredManagement=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireCreateClass()),n=e(requireClassCallCheck()),i=e(requireData()),s=(0,r.default)(function f(a){(0,n.default)(this,f),this.app=a,this.Data=new i.default(a)});t.default=s}(management)),management}var automations={},hasRequiredAutomations;function requireAutomations(){return hasRequiredAutomations||(hasRequiredAutomations=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireRegenerator()),n=e(requireAsyncToGenerator()),i=e(requireClassCallCheck()),s=e(requireCreateClass()),f=e(requireUtils$3()),a=function(){function o(u){(0,i.default)(this,o),this.app=u}return(0,s.default)(o,[{key:"activateFlow",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error('The "flowName" argument must be provided and must be a string.');case 2:if(!(g!==void 0&&!f.default.isObject(g))){l.next=4;break}throw new Error('The "initialData" argument must be an object.');case 4:return l.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlow(),"/activate-by-name"),data:{name:v,initialData:g}}));case 5:case"end":return l.stop()}},w,this)}));function y(w,v){return u.apply(this,arguments)}return y}()},{key:"loadFlowExecutionContext",value:function(){var u=(0,n.default)(r.default.mark(function w(v){return r.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!v||typeof v!="string")){b.next=2;break}throw new Error('The "executionId" argument must be provided and must be a string.');case 2:return b.abrupt("return",this.app.request.get({url:this.app.urls.automationFlowExecutionContext(v)}));case 3:case"end":return b.stop()}},w,this)}));function y(w){return u.apply(this,arguments)}return y}()},{key:"activateFlowById",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g){return r.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!v||typeof v!="string")){l.next=2;break}throw new Error('The "flowId" argument must be provided and must be a string.');case 2:if(!(g!==void 0&&!f.default.isObject(g))){l.next=4;break}throw new Error('The "initialData" argument must be an object.');case 4:return l.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlow(),"/").concat(v,"/activate"),data:g||{}}));case 5:case"end":return l.stop()}},w,this)}));function y(w,v){return u.apply(this,arguments)}return y}()},{key:"activateFlowTrigger",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g,b){return r.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(!v||typeof v!="string")){_.next=2;break}throw new Error('The "flowName" argument must be provided and must be a string.');case 2:if(!(!g||typeof g!="string")){_.next=4;break}throw new Error('The "triggerName" argument must be provided and must be a string.');case 4:if(!(b!==void 0&&!f.default.isObject(b))){_.next=6;break}throw new Error('The "data" argument must be an object.');case 6:return _.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlowTrigger(),"/activate-by-name"),query:{flowName:v,triggerName:g},data:b||{}}));case 7:case"end":return _.stop()}},w,this)}));function y(w,v,g){return u.apply(this,arguments)}return y}()},{key:"activateFlowTriggerById",value:function(){var u=(0,n.default)(r.default.mark(function w(v,g,b,l){return r.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!v||typeof v!="string")){h.next=2;break}throw new Error('The "flowId" argument must be provided and must be a string.');case 2:if(!(!g||typeof g!="string")){h.next=4;break}throw new Error('The "triggerId" argument must be provided and must be a string.');case 4:if(!(b!==void 0&&!f.default.isObject(b))){h.next=6;break}throw new Error('The "data" argument must be an object.');case 6:if(!(l!==void 0&&(typeof l!="string"||!l))){h.next=8;break}throw new Error('The "execution" argument must be a non-empty string and must be one of this values: "any", "all" or Execution ID.');case 8:return h.abrupt("return",this.app.request.post({url:"".concat(this.app.urls.automationFlow(),"/").concat(v,"/trigger/").concat(g,"/activate"),data:b||{},query:{execution:l}}));case 9:case"end":return h.stop()}},w,this)}));function y(w,v,g,b){return u.apply(this,arguments)}return y}()}]),o}();t.default=a}(automations)),automations}var device={},hasRequiredDevice;function requireDevice(){return hasRequiredDevice||(hasRequiredDevice=1,function(t){var e=requireInteropRequireDefault();Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=e(requireCreateClass()),n=e(requireClassCallCheck()),i=(0,r.default)(function s(f){if((0,n.default)(this,s),!f||!f.uuid||!f.platform||!f.version)throw new Error('Device properties object must consist of fields "uuid", "platform" and "version".');this.uuid=f.uuid,this.platform=f.platform.toUpperCase(),this.version=f.version});t.default=i}(device)),device}var userAgent={},hasRequiredUserAgent;function requireUserAgent(){if(hasRequiredUserAgent)return userAgent;hasRequiredUserAgent=1;var t=requireInteropRequireDefault();Object.defineProperty(userAgent,"__esModule",{value:!0}),userAgent.getUserAgent=r;var e=t(requireUtils$3());function r(){var n="NodeJS";e.default.isBrowser&&(n=navigator.userAgent?navigator.userAgent.toLowerCase():"hybrid-app");var i=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],s={browser:i[1]||"",version:i[2]||"0"},f={};return s.browser&&(f[s.browser]=!0,f.version=s.version),f}return userAgent}var hasRequiredEs;function requireEs(){return hasRequiredEs||(hasRequiredEs=1,function(t,e){var r=requireInteropRequireDefault();Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(require_extends()),i=r(requireDefineProperty()),s=r(requireClassCallCheck()),f=r(requireCreateClass()),a=r(require_typeof()),o=r(requireBackendlessRequest()),u=r(requireRequest()),y=r(requireUrls()),w=r(requireUtils$3()),v=r(requireExpression());function g(P,H){var O=Object.keys(P);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(P);H&&(q=q.filter(function(C){return Object.getOwnPropertyDescriptor(P,C).enumerable})),O.push.apply(O,q)}return O}function b(P){for(var H=1;H<arguments.length;H++){var O=arguments[H]!=null?arguments[H]:{};H%2?g(Object(O),!0).forEach(function(q){(0,i.default)(P,q,O[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(O)):g(Object(O)).forEach(function(q){Object.defineProperty(P,q,Object.getOwnPropertyDescriptor(O,q))})}return P}var l={appId:null,apiKey:null,serverURL:"https://api.backendless.com",automationServerURL:null,domain:null,apiURI:"/api",debugMode:!1,standalone:!1,XMLHttpRequest:typeof XMLHttpRequest<"u"?XMLHttpRequest:void 0},_=["appId","apiKey","domain"],h=(typeof self>"u"?"undefined":(0,a.default)(self))==="object"&&self.self===self&&self||(typeof commonjsGlobal$1>"u"?"undefined":(0,a.default)(commonjsGlobal$1))==="object"&&commonjsGlobal$1.global===commonjsGlobal$1&&commonjsGlobal$1,d=h&&h.Backendless,c=function P(){P.isShown||(console.warn("Backendless.Persistence is deprecated namespace, use Backendless.Data instead"),P.isShown=!0)},p=function(){for(var H=arguments.length,O=new Array(H),q=0;q<H;q++)O[q]=arguments[q];var C=O[0],j=O[1];return C&&(0,a.default)(C)==="object"?C:typeof C=="string"&&!j?{domain:C}:{appId:C,apiKey:j}},m=function(H){if(H.domain&&!H.domain.startsWith("https://")&&!H.domain.startsWith("http://"))throw new Error("When initialize the SDK with a custom domain it should start with http:// or https://, for example: Backendless.initApp('https://foobar.com')")},S={Logging:function(){return requireLogging().default},Counters:function(){return requireCounters().default},Cache:function(){return requireCache().default},Commerce:function(){return requireCommerce().default},Users:function(){return requireUsers().default},BL:function(){return requireBl().default},Data:function(){return requireData$1().default},Hive:function(){return requireHive().default},Messaging:function(){return requireMessaging().default},Files:function(){return requireFiles().default},RT:function(){return requireRt().default},SharedObject:function(){return requireRso().default},LocalCache:function(){return requireLocalCache().default},UnitOfWork:function(){return requireUnitOfWork().default},Management:function(){return requireManagement().default},Automations:function(){return requireAutomations().default}},E=function(){function P(H){(0,s.default)(this,P),this.initConfig(H),this.Request=o.default,this.request=new u.default(this),this.urls=new y.default(this)}return(0,f.default)(P,[{key:"initConfig",value:function(O){O=b({},O),O.domain&&(delete O.appId,delete O.apiKey);for(var q in l)if(l.hasOwnProperty(q)){var C="__".concat(q);_.includes(q)&&delete this[C];var j=this[C]===void 0?l[q]:this[C];this[C]=O[q]===void 0?j:O[q]}}},{key:"initApp",value:function(){var O=p.apply(void 0,arguments);m(O);var q=O.standalone?new P(this):this;q.initConfig(O),q.resetRT(),q.__removeService("LocalCache"),q.appInfoPromise();var C=(0,n.default)({loadLevels:!0,globalLevel:"all",levels:{}},O.logging);return q.__hasService("Logging")&&(q.Logging.reset(),q.Logging.setConfig(C)),q.__hasService("Users")&&(q.Users.currentUser=null),delete this.__device,q.loggingConfig=C,q}},{key:"appInfoPromise",value:function(O){var q=this;return(O||!this.__appInfoPromise)&&(this.__appInfoPromise=new Promise(function(C,j){q.request.get({url:q.urls.appInfo()}).then(C).catch(j)})),this.__appInfoPromise}},{key:"__hasService",value:function(O){return!!this["__".concat(O)]}},{key:"__removeService",value:function(O){delete this["__".concat(O)]}},{key:"__getService",value:function(O){var q="__".concat(O);if(!this[q]){var C=S[O]();this[q]=new C(this)}return this[q]}},{key:"standalone",get:function(){return this.__standalone},set:function(O){throw new Error("Setting value to Backendless.standalone directly is not possible, "+"instead you must use Backendless.initApp({ appId: [APP_ID], apiKey: [API_KEY], standalone: ".concat(O," })"))}},{key:"appId",get:function(){return this.__appId},set:function(O){throw new Error("Setting '".concat(O,"' value to Backendless.appId directly is not possible, ")+"instead you must use Backendless.initApp('".concat(O,"', API_KEY)"))}},{key:"apiKey",get:function(){return this.__apiKey},set:function(O){throw new Error("Setting '".concat(O,"' value to Backendless.apiKey directly is not possible, ")+"instead you must use Backendless.initApp(APP_ID, '".concat(O,"')"))}},{key:"serverURL",get:function(){return this.__serverURL},set:function(O){this.__serverURL=O}},{key:"automationServerURL",get:function(){return this.__automationServerURL},set:function(O){this.__automationServerURL=O}},{key:"domain",get:function(){return this.__domain},set:function(O){this.__domain=O}},{key:"apiURI",get:function(){return this.__apiURI},set:function(O){this.__apiURI=O}},{key:"appPath",get:function(){return this.domain?this.domain+this.apiURI:[this.serverURL,this.appId,this.apiKey].join("/")},set:function(O){throw new Error("Setting '".concat(O,"' value to Backendless.appPath directly is not possible, ")+"instead you must use Backendless.initApp(APP_ID, API_KEY) for setup the value")}},{key:"automationPath",get:function(){return this.automationServerURL?[this.automationServerURL,this.appId,this.apiKey].join("/"):this.appPath},set:function(O){throw new Error("Setting '".concat(O,"' value to Backendless.automationPath directly is not possible"))}},{key:"debugMode",get:function(){return this.__debugMode},set:function(O){O=!!O,this.__debugMode!==O&&(this.__debugMode=O,this.__RT&&this.RT.setDebugMode(O))}},{key:"XMLHttpRequest",get:function(){return this.__XMLHttpRequest},set:function(O){this.__XMLHttpRequest=O}},{key:"device",get:function(){if(!this.__device)throw new Error("Device is not defined. Please, run the Backendless.setupDevice");return this.__device},set:function(O){throw new Error("Setting value to Backendless.device directly is not possible, instead you must use Backendless.setupDevice(deviceProperties) for setup the device")}},{key:"setupDevice",value:function(O){var q=requireDevice().default;this.__device=new q(O)}},{key:"Utils",get:function(){return w.default}},{key:"getCurrentUserToken",value:function(){return this.Users.getCurrentUserToken()}},{key:"setCurrentUserToken",value:function(O){this.Users.setCurrentUserToken(O)}},{key:"browser",get:function(){return requireUserAgent().getUserAgent()}},{key:"noConflict",value:function(){return h&&(h.Backendless=d),this}},{key:"Logging",get:function(){return this.__getService("Logging")}},{key:"Counters",get:function(){return this.__getService("Counters")}},{key:"Cache",get:function(){return this.__getService("Cache")}},{key:"Commerce",get:function(){return this.__getService("Commerce")}},{key:"Users",get:function(){return this.__getService("Users")}},{key:"User",get:function(){return requireUser().default}},{key:"UserService",get:function(){return this.Users}},{key:"BL",get:function(){return this.__getService("BL")}},{key:"CustomServices",get:function(){return this.BL.CustomServices}},{key:"APIServices",get:function(){return this.BL.CustomServices}},{key:"Events",get:function(){return this.BL.Events}},{key:"Data",get:function(){return this.__getService("Data")}},{key:"Hive",get:function(){return this.__getService("Hive")}},{key:"Messaging",get:function(){return this.__getService("Messaging")}},{key:"Files",get:function(){return this.__getService("Files")}},{key:"RT",get:function(){return this.__getService("RT")}},{key:"resetRT",value:function(){this.__RT&&(this.__RT.terminate(),delete this.__RT)}},{key:"SharedObject",get:function(){return this.__getService("SharedObject")}},{key:"LocalCache",get:function(){return this.__getService("LocalCache")}},{key:"UnitOfWork",get:function(){return this.__getService("UnitOfWork")}},{key:"Management",get:function(){return this.__getService("Management")}},{key:"Automations",get:function(){return this.__getService("Automations")}},{key:"applicationId",get:function(){return this.appId},set:function(O){console.warn("getter/setter for Backendless.applicationId is deprecated, instead use Backendless.appId"),this.appId=O}},{key:"secretKey",get:function(){return console.warn("getter/setter for Backendless.secretKey is deprecated, instead use Backendless.apiKey"),this.apiKey},set:function(O){console.warn("getter/setter for Backendless.secretKey is deprecated, instead use Backendless.apiKey"),this.apiKey=O}},{key:"Persistence",get:function(){return c(),this.Data}},{key:"DataQueryBuilder",get:function(){return this.Data.QueryBuilder}},{key:"GroupQueryBuilder",get:function(){return this.Data.GroupQueryBuilder}},{key:"JSONUpdateBuilder",get:function(){return this.Data.JSONUpdateBuilder}},{key:"LoadRelationsQueryBuilder",get:function(){return this.Data.LoadRelationsQueryBuilder}},{key:"Bodyparts",get:function(){return this.Messaging.Bodyparts}},{key:"PublishOptions",get:function(){return this.Messaging.PublishOptions}},{key:"DeliveryOptions",get:function(){return this.Messaging.DeliveryOptions}},{key:"PublishOptionsHeaders",get:function(){return this.Messaging.PublishOptionsHeaders}},{key:"EmailEnvelope",get:function(){return this.Messaging.EmailEnvelope}},{key:"Expression",get:function(){return v.default}}]),P}(),T=new E(l);h&&(h.Backendless=T),e=t.exports=T;var A=T;e.default=A}(es,es.exports)),es.exports}var esExports=requireEs();const Backendless=getDefaultExportFromCjs$2(esExports);function Keyboard(t){let{swiper:e,extendParams:r,on:n,emit:i}=t;const s=getDocument(),f=getWindow();e.keyboard={enabled:!1},r({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(y){if(!e.enabled)return;const{rtlTranslate:w}=e;let v=y;v.originalEvent&&(v=v.originalEvent);const g=v.keyCode||v.charCode,b=e.params.keyboard.pageUpDown,l=b&&g===33,_=b&&g===34,h=g===37,d=g===39,c=g===38,p=g===40;if(!e.allowSlideNext&&(e.isHorizontal()&&d||e.isVertical()&&p||_)||!e.allowSlidePrev&&(e.isHorizontal()&&h||e.isVertical()&&c||l))return!1;if(!(v.shiftKey||v.altKey||v.ctrlKey||v.metaKey)&&!(s.activeElement&&s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea"))){if(e.params.keyboard.onlyInViewport&&(l||_||h||d||c||p)){let m=!1;if(elementParents(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&elementParents(e.el,`.${e.params.slideActiveClass}`).length===0)return;const S=e.el,E=S.clientWidth,T=S.clientHeight,A=f.innerWidth,P=f.innerHeight,H=elementOffset(S);w&&(H.left-=S.scrollLeft);const O=[[H.left,H.top],[H.left+E,H.top],[H.left,H.top+T],[H.left+E,H.top+T]];for(let q=0;q<O.length;q+=1){const C=O[q];if(C[0]>=0&&C[0]<=A&&C[1]>=0&&C[1]<=P){if(C[0]===0&&C[1]===0)continue;m=!0}}if(!m)return}e.isHorizontal()?((l||_||h||d)&&(v.preventDefault?v.preventDefault():v.returnValue=!1),((_||d)&&!w||(l||h)&&w)&&e.slideNext(),((l||h)&&!w||(_||d)&&w)&&e.slidePrev()):((l||_||c||p)&&(v.preventDefault?v.preventDefault():v.returnValue=!1),(_||p)&&e.slideNext(),(l||c)&&e.slidePrev()),i("keyPress",g)}}function o(){e.keyboard.enabled||(s.addEventListener("keydown",a),e.keyboard.enabled=!0)}function u(){e.keyboard.enabled&&(s.removeEventListener("keydown",a),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&o()}),n("destroy",()=>{e.keyboard.enabled&&u()}),Object.assign(e.keyboard,{enable:o,disable:u})}function createElementIfNotDefined(t,e,r,n){return t.params.createElements&&Object.keys(n).forEach(i=>{if(!r[i]&&r.auto===!0){let s=elementChildren(t.el,`.${n[i]}`)[0];s||(s=createElement("div",n[i]),s.className=n[i],t.el.append(s)),r[i]=s,e[i]=s}}),r}function Navigation(t){let{swiper:e,extendParams:r,on:n,emit:i}=t;r({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(b){let l;return b&&typeof b=="string"&&e.isElement&&(l=e.el.querySelector(b)||e.hostEl.querySelector(b),l)?l:(b&&(typeof b=="string"&&(l=[...document.querySelectorAll(b)]),e.params.uniqueNavElements&&typeof b=="string"&&l&&l.length>1&&e.el.querySelectorAll(b).length===1?l=e.el.querySelector(b):l&&l.length===1&&(l=l[0])),b&&!l?b:l)}function f(b,l){const _=e.params.navigation;b=makeElementsArray(b),b.forEach(h=>{h&&(h.classList[l?"add":"remove"](..._.disabledClass.split(" ")),h.tagName==="BUTTON"&&(h.disabled=l),e.params.watchOverflow&&e.enabled&&h.classList[e.isLocked?"add":"remove"](_.lockClass))})}function a(){const{nextEl:b,prevEl:l}=e.navigation;if(e.params.loop){f(l,!1),f(b,!1);return}f(l,e.isBeginning&&!e.params.rewind),f(b,e.isEnd&&!e.params.rewind)}function o(b){b.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function u(b){b.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function y(){const b=e.params.navigation;if(e.params.navigation=createElementIfNotDefined(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(b.nextEl||b.prevEl))return;let l=s(b.nextEl),_=s(b.prevEl);Object.assign(e.navigation,{nextEl:l,prevEl:_}),l=makeElementsArray(l),_=makeElementsArray(_);const h=(d,c)=>{d&&d.addEventListener("click",c==="next"?u:o),!e.enabled&&d&&d.classList.add(...b.lockClass.split(" "))};l.forEach(d=>h(d,"next")),_.forEach(d=>h(d,"prev"))}function w(){let{nextEl:b,prevEl:l}=e.navigation;b=makeElementsArray(b),l=makeElementsArray(l);const _=(h,d)=>{h.removeEventListener("click",d==="next"?u:o),h.classList.remove(...e.params.navigation.disabledClass.split(" "))};b.forEach(h=>_(h,"next")),l.forEach(h=>_(h,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?g():(y(),a())}),n("toEdge fromEdge lock unlock",()=>{a()}),n("destroy",()=>{w()}),n("enable disable",()=>{let{nextEl:b,prevEl:l}=e.navigation;if(b=makeElementsArray(b),l=makeElementsArray(l),e.enabled){a();return}[...b,...l].filter(_=>!!_).forEach(_=>_.classList.add(e.params.navigation.lockClass))}),n("click",(b,l)=>{let{nextEl:_,prevEl:h}=e.navigation;_=makeElementsArray(_),h=makeElementsArray(h);const d=l.target;let c=h.includes(d)||_.includes(d);if(e.isElement&&!c){const p=l.path||l.composedPath&&l.composedPath();p&&(c=p.find(m=>_.includes(m)||h.includes(m)))}if(e.params.navigation.hideOnClick&&!c){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===d||e.pagination.el.contains(d)))return;let p;_.length?p=_[0].classList.contains(e.params.navigation.hiddenClass):h.length&&(p=h[0].classList.contains(e.params.navigation.hiddenClass)),i(p===!0?"navigationShow":"navigationHide"),[..._,...h].filter(m=>!!m).forEach(m=>m.classList.toggle(e.params.navigation.hiddenClass))}});const v=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),y(),a()},g=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),w()};Object.assign(e.navigation,{enable:v,disable:g,update:a,init:y,destroy:w})}function classesToSelector(t){return t===void 0&&(t=""),`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination(t){let{swiper:e,extendParams:r,on:n,emit:i}=t;const s="swiper-pagination";r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:d=>d,formatFractionTotal:d=>d,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let f,a=0;function o(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function u(d,c){const{bulletActiveClass:p}=e.params.pagination;d&&(d=d[`${c==="prev"?"previous":"next"}ElementSibling`],d&&(d.classList.add(`${p}-${c}`),d=d[`${c==="prev"?"previous":"next"}ElementSibling`],d&&d.classList.add(`${p}-${c}-${c}`)))}function y(d,c,p){if(d=d%p,c=c%p,c===d+1)return"next";if(c===d-1)return"previous"}function w(d){const c=d.target.closest(classesToSelector(e.params.pagination.bulletClass));if(!c)return;d.preventDefault();const p=elementIndex(c)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===p)return;const m=y(e.realIndex,p,e.slides.length);m==="next"?e.slideNext():m==="previous"?e.slidePrev():e.slideToLoop(p)}else e.slideTo(p)}function v(){const d=e.rtl,c=e.params.pagination;if(o())return;let p=e.pagination.el;p=makeElementsArray(p);let m,S;const E=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,T=e.params.loop?Math.ceil(E/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(S=e.previousRealIndex||0,m=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(m=e.snapIndex,S=e.previousSnapIndex):(S=e.previousIndex||0,m=e.activeIndex||0),c.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const A=e.pagination.bullets;let P,H,O;if(c.dynamicBullets&&(f=elementOuterSize(A[0],e.isHorizontal()?"width":"height"),p.forEach(q=>{q.style[e.isHorizontal()?"width":"height"]=`${f*(c.dynamicMainBullets+4)}px`}),c.dynamicMainBullets>1&&S!==void 0&&(a+=m-(S||0),a>c.dynamicMainBullets-1?a=c.dynamicMainBullets-1:a<0&&(a=0)),P=Math.max(m-a,0),H=P+(Math.min(A.length,c.dynamicMainBullets)-1),O=(H+P)/2),A.forEach(q=>{const C=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(j=>`${c.bulletActiveClass}${j}`)].map(j=>typeof j=="string"&&j.includes(" ")?j.split(" "):j).flat();q.classList.remove(...C)}),p.length>1)A.forEach(q=>{const C=elementIndex(q);C===m?q.classList.add(...c.bulletActiveClass.split(" ")):e.isElement&&q.setAttribute("part","bullet"),c.dynamicBullets&&(C>=P&&C<=H&&q.classList.add(...`${c.bulletActiveClass}-main`.split(" ")),C===P&&u(q,"prev"),C===H&&u(q,"next"))});else{const q=A[m];if(q&&q.classList.add(...c.bulletActiveClass.split(" ")),e.isElement&&A.forEach((C,j)=>{C.setAttribute("part",j===m?"bullet-active":"bullet")}),c.dynamicBullets){const C=A[P],j=A[H];for(let V=P;V<=H;V+=1)A[V]&&A[V].classList.add(...`${c.bulletActiveClass}-main`.split(" "));u(C,"prev"),u(j,"next")}}if(c.dynamicBullets){const q=Math.min(A.length,c.dynamicMainBullets+4),C=(f*q-f)/2-O*f,j=d?"right":"left";A.forEach(V=>{V.style[e.isHorizontal()?j:"top"]=`${C}px`})}}p.forEach((A,P)=>{if(c.type==="fraction"&&(A.querySelectorAll(classesToSelector(c.currentClass)).forEach(H=>{H.textContent=c.formatFractionCurrent(m+1)}),A.querySelectorAll(classesToSelector(c.totalClass)).forEach(H=>{H.textContent=c.formatFractionTotal(T)})),c.type==="progressbar"){let H;c.progressbarOpposite?H=e.isHorizontal()?"vertical":"horizontal":H=e.isHorizontal()?"horizontal":"vertical";const O=(m+1)/T;let q=1,C=1;H==="horizontal"?q=O:C=O,A.querySelectorAll(classesToSelector(c.progressbarFillClass)).forEach(j=>{j.style.transform=`translate3d(0,0,0) scaleX(${q}) scaleY(${C})`,j.style.transitionDuration=`${e.params.speed}ms`})}c.type==="custom"&&c.renderCustom?(A.innerHTML=c.renderCustom(e,m+1,T),P===0&&i("paginationRender",A)):(P===0&&i("paginationRender",A),i("paginationUpdate",A)),e.params.watchOverflow&&e.enabled&&A.classList[e.isLocked?"add":"remove"](c.lockClass)})}function g(){const d=e.params.pagination;if(o())return;const c=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let p=e.pagination.el;p=makeElementsArray(p);let m="";if(d.type==="bullets"){let S=e.params.loop?Math.ceil(c/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&S>c&&(S=c);for(let E=0;E<S;E+=1)d.renderBullet?m+=d.renderBullet.call(e,E,d.bulletClass):m+=`<${d.bulletElement} ${e.isElement?'part="bullet"':""} class="${d.bulletClass}"></${d.bulletElement}>`}d.type==="fraction"&&(d.renderFraction?m=d.renderFraction.call(e,d.currentClass,d.totalClass):m=`<span class="${d.currentClass}"></span> / <span class="${d.totalClass}"></span>`),d.type==="progressbar"&&(d.renderProgressbar?m=d.renderProgressbar.call(e,d.progressbarFillClass):m=`<span class="${d.progressbarFillClass}"></span>`),e.pagination.bullets=[],p.forEach(S=>{d.type!=="custom"&&(S.innerHTML=m||""),d.type==="bullets"&&e.pagination.bullets.push(...S.querySelectorAll(classesToSelector(d.bulletClass)))}),d.type!=="custom"&&i("paginationRender",p[0])}function b(){e.params.pagination=createElementIfNotDefined(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const d=e.params.pagination;if(!d.el)return;let c;typeof d.el=="string"&&e.isElement&&(c=e.el.querySelector(d.el)),!c&&typeof d.el=="string"&&(c=[...document.querySelectorAll(d.el)]),c||(c=d.el),!(!c||c.length===0)&&(e.params.uniqueNavElements&&typeof d.el=="string"&&Array.isArray(c)&&c.length>1&&(c=[...e.el.querySelectorAll(d.el)],c.length>1&&(c=c.find(p=>elementParents(p,".swiper")[0]===e.el))),Array.isArray(c)&&c.length===1&&(c=c[0]),Object.assign(e.pagination,{el:c}),c=makeElementsArray(c),c.forEach(p=>{d.type==="bullets"&&d.clickable&&p.classList.add(...(d.clickableClass||"").split(" ")),p.classList.add(d.modifierClass+d.type),p.classList.add(e.isHorizontal()?d.horizontalClass:d.verticalClass),d.type==="bullets"&&d.dynamicBullets&&(p.classList.add(`${d.modifierClass}${d.type}-dynamic`),a=0,d.dynamicMainBullets<1&&(d.dynamicMainBullets=1)),d.type==="progressbar"&&d.progressbarOpposite&&p.classList.add(d.progressbarOppositeClass),d.clickable&&p.addEventListener("click",w),e.enabled||p.classList.add(d.lockClass)}))}function l(){const d=e.params.pagination;if(o())return;let c=e.pagination.el;c&&(c=makeElementsArray(c),c.forEach(p=>{p.classList.remove(d.hiddenClass),p.classList.remove(d.modifierClass+d.type),p.classList.remove(e.isHorizontal()?d.horizontalClass:d.verticalClass),d.clickable&&(p.classList.remove(...(d.clickableClass||"").split(" ")),p.removeEventListener("click",w))})),e.pagination.bullets&&e.pagination.bullets.forEach(p=>p.classList.remove(...d.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const d=e.params.pagination;let{el:c}=e.pagination;c=makeElementsArray(c),c.forEach(p=>{p.classList.remove(d.horizontalClass,d.verticalClass),p.classList.add(e.isHorizontal()?d.horizontalClass:d.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?h():(b(),g(),v())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&v()}),n("snapIndexChange",()=>{v()}),n("snapGridLengthChange",()=>{g(),v()}),n("destroy",()=>{l()}),n("enable disable",()=>{let{el:d}=e.pagination;d&&(d=makeElementsArray(d),d.forEach(c=>c.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{v()}),n("click",(d,c)=>{const p=c.target,m=makeElementsArray(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&m&&m.length>0&&!p.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&p===e.navigation.nextEl||e.navigation.prevEl&&p===e.navigation.prevEl))return;const S=m[0].classList.contains(e.params.pagination.hiddenClass);i(S===!0?"paginationShow":"paginationHide"),m.forEach(E=>E.classList.toggle(e.params.pagination.hiddenClass))}});const _=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:d}=e.pagination;d&&(d=makeElementsArray(d),d.forEach(c=>c.classList.remove(e.params.pagination.paginationDisabledClass))),b(),g(),v()},h=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:d}=e.pagination;d&&(d=makeElementsArray(d),d.forEach(c=>c.classList.add(e.params.pagination.paginationDisabledClass))),l()};Object.assign(e.pagination,{enable:_,disable:h,render:g,update:v,init:b,destroy:l})}const WordIcon=({size:t=48})=>jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:t,height:t,children:[jsxRuntimeExports.jsx("path",{fill:"#2b579a",d:"M8 4h24l8 8v32a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4z"}),jsxRuntimeExports.jsx("path",{fill:"#ffffff",d:"M32 4v8h8"}),jsxRuntimeExports.jsx("path",{fill:"#ffffff",d:"M12 20h4l2 8 2-8h4l2 8 2-8h4l-4 12h-4l-2-6-2 6h-4l-4-12z"}),jsxRuntimeExports.jsx("path",{fill:"#2b579a",d:"M10 36h28v2H10zM10 40h28v2H10z"})]}),__vite_import_meta_env__={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADDRESS:"",VITE_BACKENDLESS_APPID:"071A053F-BE1E-4863-AE50-9A2F0A515769",VITE_BACKENDLESS_REST:"A4FCE911-8A34-43F7-BCF1-EF3EB671C513",VITE_CATEG_SECTOR:"3",VITE_CHATGPT_KEY:"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",VITE_CHATGPT_URL:"https://api.openai.com/v1/chat/completions",VITE_COMMENT_HISTORY:"0",VITE_COMPANY_NAME:"CONSTRUCTION MODEL",VITE_CSV_TABLE:"construction",VITE_EMAIL:"adrien012014@gmail.com",VITE_EMAIL_SERVICE_ID:"service_9j0grda",VITE_EMAIL_USER_ID:"E_lpno1uufimH14lK",VITE_ENABLE_BLOG:"0",VITE_ENABLE_NOTIF:"1",VITE_END_SLOT_AM:"14:00",VITE_END_SLOT_PM:"20:00",VITE_GDPR:"https://1drv.ms/b/c/2502665880f2110c/EQ0jvrzdLQJJvG1N0BVmeB8B6BzA6fCKhv410QvAZokhBA?e=Y57Xrv",VITE_GEMINI_API_KEY:"AIzaSyCDNOZfUiyps2LklRakG8-Hhk_aYlG_mVw",VITE_GEMINI_MODEL:"gemini-2.5-pro-exp-03-25",VITE_GOOGLEMAPS:"https://g.co/kgs/k6nkVw2",VITE_GRAPHQL_KEY:"b0oJ5NWT^GXk8=O+mdV=X2yzz1D5AgWX",VITE_GRAPHQL_URL:"https://irkwbvxjbynhlcascmrk.hasura.eu-central-1.nhost.run/v1/graphql",VITE_HUGGING_KEY:"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",VITE_HUGGING_MODEL:"mistralai/Mistral-Small-24B-Instruct-2501",VITE_ID_CLIENT:"3",VITE_INFOADDED_0:"The salon offers Keratin Bond Extensions, which are fused to natural hair using a keratin-based adhesive",VITE_LIMIT_LIST_ADMIN:"18",VITE_LOGO_URL:"https://www.dropbox.com/scl/fi/jwci207b5h9mxn7wu2iyc/construccion.png?rlkey=djiajtussvxir0wflc0ug6pn6&st=uyedfbqi&dl=1",VITE_MAX_HEIGHT_LOGO:"10vh",VITE_MAX_TOKENS_CHATGPT:"200",VITE_MAX_TOKENS_GEMINI:"20",VITE_MAX_TOKENS_HUGGING:"200",VITE_MAX_TOKENS_PERPLEXITY:"50",VITE_MODEL_PERPLEXITY:"sonar-reasoning",VITE_MSG_INFO_DE:"Welche allgemeinen Informationen möchten Sie über unser Unternehmen oder die Baubranche im Allgemeinen erhalten ? ( Um ein individuelles Angebot zu erhalten oder Preisinformationen anzufordern, klicken Sie auf die Schaltfläche 'Angebot' )",VITE_MSG_INFO_EN:"What type of general information would you like to receive about our company or the construction sector in general ? ( To receive a personalized quote or get information on pricing, click the 'Quote' button )",VITE_MSG_INFO_ES:"¿ Qué tipo de información general le gustaría recibir sobre nuestra empresa o sobre el sector de la construcción en general ? ( Para recibir un presupuesto personalizado o obtener información sobre tarifas, haga clic en el botón 'Presupuesto' )",VITE_MSG_INFO_FR:"Quel type d’informations générales souhaiteriez-vous recevoir sur notre société ou sur le secteur de la construction en général ? ( Pour recevoir un devis personnalisé ou obtenir des informations sur les tarifs, cliquez sur le bouton 'Devis' )",VITE_MSG_QUOTE_DE:"Welche Art von Angebot möchten Sie erhalten ? ( Um allgemeine Informationen über unser Unternehmen oder die Baubranche im Allgemeinen zu erhalten, klicken Sie auf die Schaltfläche 'Information' )",VITE_MSG_QUOTE_EN:"What type of quote would you like to receive ? ( To obtain general information about our company or the construction sector in general, click on the 'Information' button )",VITE_MSG_QUOTE_ES:"¿ Qué tipo de presupuesto le gustaría recibir ? ( Para obtener información general sobre nuestra empresa o sobre el sector de la construcción en general, haga clic en el botón 'Información' )",VITE_MSG_QUOTE_FR:"Quel type de devis aimeriez-vous recevoir ? ( Pour obtenir des informations générales sur notre société ou sur le secteur de la construction en général, cliquez sur le bouton 'Information' )",VITE_OPT_CITA:"1",VITE_OPT_PRODUCT:"0",VITE_OPT_QUOTE:"1",VITE_PERPLEXITY_API_KEY:"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",VITE_PUBLIC_HOLIDAYS_2025:"2025-01-01,2025-01-06,2025-04-18,2025-05-01,2025-05-02,2025-08-15,2025-10-12,2025-11-01,2025-12-06,2025-12-08,2025-12-25",VITE_PUBLIC_HOLIDAYS_2026:"2026-01-01,2026-01-06,2026-04-03,2026-04-02,2026-05-01,2026-05-02,2026-08-15,2026-10-12,2026-11-01,2026-12-06,2026-12-08,2026-12-25",VITE_PUBLIC_HOLIDAYS_2027:"2027-01-01,2027-01-06,2027-03-26,2027-03-25,2027-05-01,2027-05-03,2027-08-16,2027-10-12,2027-11-01,2027-12-06,2027-12-08,2027-12-25",VITE_PUBLIC_HOLIDAYS_2028:"2028-01-01,2028-01-06,2028-04-13,2028-04-14,2028-05-01,2028-05-02,2028-08-15,2028-10-12,2028-11-01,2028-12-06,2028-12-08,2028-12-25",VITE_PUBLIC_HOLIDAYS_2029:"2029-01-01,2029-01-06,2029-03-30,2029-05-01,2029-05-02,2029-08-15,2029-10-12,2029-11-01,2029-12-06,2029-12-08,2029-12-25",VITE_PUBLIC_HOLIDAYS_2030:"2030-01-01,2030-01-06,2030-04-19,2030-05-01,2030-05-02,2030-08-15,2030-10-12,2030-11-01,2030-12-06,2030-12-08,2030-12-25",VITE_PUBLIC_HOLIDAYS_2031:"2031-01-01,2031-01-06,2031-04-11,2031-05-01,2031-05-02,2031-08-15,2031-10-12,2031-11-01,2031-12-06,2031-12-08,2031-12-25",VITE_PUBLIC_HOLIDAYS_2032:"2032-01-01,2032-01-06,2032-03-26,2032-05-01,2032-05-03,2032-08-16,2032-10-12,2032-11-01,2032-12-06,2032-12-08,2032-12-25",VITE_PUBLIC_HOLIDAYS_2033:"2033-01-01,2033-01-06,2033-04-15,2033-05-01,2033-05-02,2033-08-15,2033-10-12,2033-11-01,2033-12-06,2033-12-08,2033-12-25",VITE_PUBLIC_HOLIDAYS_2034:"2034-01-01,2034-01-06,2034-04-07,2034-05-01,2034-08-15,2034-10-12,2034-11-01,2034-12-06,2034-12-08,2034-12-25",VITE_PUBLIC_HOLIDAYS_2035:"2035-01-01,2035-01-06,2035-03-23,2035-05-01,2035-05-02,2035-08-15,2035-10-12,2035-11-01,2035-12-06,2035-12-08,2035-12-25",VITE_START_SLOT_AM:"09:00",VITE_START_SLOT_PM:"17:00",VITE_TEMPLATE_CITA:"template_mnyxnuu",VITE_TEMPLATE_COMMENT:"template_veh7rsi",VITE_TYPE_AI:"2",VITE_TYPE_COMPANY:"You are a company in the construction sector",VITE_TYPE_CURRENCY:"€",VITE_URLFORM_DE:"https://tally.so/r/wA92dN",VITE_URLFORM_EN:"https://tally.so/r/wLO7PO",VITE_URLFORM_ES:"https://tally.so/r/3XQJlj",VITE_URLFORM_FR:"https://tally.so/r/n0k76A",VITE_WHATSAPP:""};Backendless.initApp("071A053F-BE1E-4863-AE50-9A2F0A515769","A4FCE911-8A34-43F7-BCF1-EF3EB671C513");const perplexity=createPerplexity({apiKey:"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"}),client=new GraphQLClient("https://irkwbvxjbynhlcascmrk.hasura.eu-central-1.nhost.run/v1/graphql",{headers:{"x-hasura-admin-secret":"b0oJ5NWT^GXk8=O+mdV=X2yzz1D5AgWX"}}),wsClient=createClient({url:"https://irkwbvxjbynhlcascmrk.hasura.eu-central-1.nhost.run/v1/graphql".replace("https","wss"),connectionParams:{headers:{"x-hasura-admin-secret":"b0oJ5NWT^GXk8=O+mdV=X2yzz1D5AgWX"}}});pdfExports.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js";const ClientView=()=>{const t=ce=>{const _e=ce.split(`
`).map(Ae=>new Paragraph({children:[new TextRun(Ae)]})),we=new File$1({sections:[{properties:{},children:_e}]});Packer.toBlob(we).then(Ae=>{FileSaver_minExports.saveAs(Ae,"exported-document.docx")})},r=`VITE_PUBLIC_HOLIDAYS_${new Date().getFullYear()}`,n=__vite_import_meta_env__[r],i="https://api.openai.com/v1/chat/completions",s="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",f="09:00",a="14:00",o="17:00",u="20:00",[y,w]=reactExports.useState(!1),[v,g]=reactExports.useState([]),[b,l]=reactExports.useState([[]]),[_,h]=reactExports.useState(""),[d,c]=reactExports.useState(!1),[p,m]=reactExports.useState(""),[S,E]=reactExports.useState(()=>localStorage.getItem("curPseudo")||""),[T,A]=reactExports.useState(3),[P,H]=reactExports.useState(!0),[O,q]=reactExports.useState(()=>localStorage.getItem("curCateg")||0),[C,j]=reactExports.useState([]),[V,N]=reactExports.useState([[]]),[Y,X]=reactExports.useState("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"),[J,Q]=reactExports.useState(""),[W,U]=reactExports.useState("none"),[$,ee]=reactExports.useState(-1),[Z,L]=reactExports.useState(navigator.language.slice(0,2)||"en"),I=ce=>Z==="de"?"Zusammenfassung meines Termins":Z==="es"?"Resumen de mi cita":Z==="en"?"Summary of my appointment":"Résumé de mon rendez-vous",k=ce=>ce===""?Z==="de"?"Datum und Uhrzeit meines Termins : ":Z==="es"?"Fecha y hora de mi cita : ":Z==="en"?"Date and time of my appointment : ":"Date et heure de mon rendez-vous : ":ce==="de"?"Datum und Uhrzeit meines Termins : ":ce==="es"?"Fecha y hora de mi cita : ":ce==="en"?"Date and time of my appointment : ":"Date et heure de mon rendez-vous : ",B=ce=>ce===""?Z==="de"?"Art der Dienstleistung : ":Z==="es"?"Tipo de servicio : ":Z==="en"?"Type of service : ":"Type de service : ":ce==="de"?"Art der Dienstleistung : ":ce==="es"?"Tipo de servicio : ":ce==="en"?"Type of service : ":"Type de service : ",F=ce=>ce===""?Z==="de"?"WhatsApp des Verantwortlichen : ":Z==="en"?"WhatsApp of the manager : ":"WhatsApp de la responsable : ":ce==="de"?"WhatsApp des Verantwortlichen : ":ce==="en"?"WhatsApp of the manager : ":"WhatsApp de la responsable : ",K=ce=>Z==="de"?"Um Ihren Termin zu stornieren, klicken Sie auf die Schaltfläche 'Abbrechen' unten links auf der Seite. Für Änderungen kontaktieren Sie bitte den Verantwortlichen über WhatsApp.":Z==="es"?"Para cancelar su cita, haga clic en el botón 'Cancelar' en la parte inferior izquierda de la página. Para cualquier modificación, por favor contacte a la responsable a través de WhatsApp.":Z==="en"?"To cancel your appointment, click on the 'Cancel' button at the bottom left of the page. For any changes, please contact the manager via WhatsApp.":"Pour annuler votre rendez-vous, cliquez sur le bouton 'Annuler' en bas à gauche de la page. Pour toute modification, veuillez contacter la responsable via WhatsApp.",te=ce=>Z==="de"?"Welche Art von Termin wünschen Sie ?":Z==="es"?"¿ Qué tipo de cita desea ?":Z==="en"?"What type of appointment do you want ?":"Quel type de rendez-vous souhaitez-vous ?",M=ce=>ce===""?Z==="de"?"Welche allgemeinen Informationen möchten Sie über unser Unternehmen oder die Baubranche im Allgemeinen erhalten ? ( Um ein individuelles Angebot zu erhalten oder Preisinformationen anzufordern, klicken Sie auf die Schaltfläche 'Angebot' )":Z==="es"?"¿ Qué tipo de información general le gustaría recibir sobre nuestra empresa o sobre el sector de la construcción en general ? ( Para recibir un presupuesto personalizado o obtener información sobre tarifas, haga clic en el botón 'Presupuesto' )":Z==="en"?"What type of general information would you like to receive about our company or the construction sector in general ? ( To receive a personalized quote or get information on pricing, click the 'Quote' button )":"Quel type d’informations générales souhaiteriez-vous recevoir sur notre société ou sur le secteur de la construction en général ? ( Pour recevoir un devis personnalisé ou obtenir des informations sur les tarifs, cliquez sur le bouton 'Devis' )":ce==="de"?"Welche allgemeinen Informationen möchten Sie über unser Unternehmen oder die Baubranche im Allgemeinen erhalten ? ( Um ein individuelles Angebot zu erhalten oder Preisinformationen anzufordern, klicken Sie auf die Schaltfläche 'Angebot' )":ce==="es"?"¿ Qué tipo de información general le gustaría recibir sobre nuestra empresa o sobre el sector de la construcción en general ? ( Para recibir un presupuesto personalizado o obtener información sobre tarifas, haga clic en el botón 'Presupuesto' )":ce==="en"?"What type of general information would you like to receive about our company or the construction sector in general ? ( To receive a personalized quote or get information on pricing, click the 'Quote' button )":"Quel type d’informations générales souhaiteriez-vous recevoir sur notre société ou sur le secteur de la construction en général ? ( Pour recevoir un devis personnalisé ou obtenir des informations sur les tarifs, cliquez sur le bouton 'Devis' )",ne=ce=>ce===""?Z==="de"?"Welche Art von Angebot möchten Sie erhalten ? ( Um allgemeine Informationen über unser Unternehmen oder die Baubranche im Allgemeinen zu erhalten, klicken Sie auf die Schaltfläche 'Information' )":Z==="es"?"¿ Qué tipo de presupuesto le gustaría recibir ? ( Para obtener información general sobre nuestra empresa o sobre el sector de la construcción en general, haga clic en el botón 'Información' )":Z==="en"?"What type of quote would you like to receive ? ( To obtain general information about our company or the construction sector in general, click on the 'Information' button )":"Quel type de devis aimeriez-vous recevoir ? ( Pour obtenir des informations générales sur notre société ou sur le secteur de la construction en général, cliquez sur le bouton 'Information' )":ce==="de"?"Welche Art von Angebot möchten Sie erhalten ? ( Um allgemeine Informationen über unser Unternehmen oder die Baubranche im Allgemeinen zu erhalten, klicken Sie auf die Schaltfläche 'Information' )":ce==="es"?"¿ Qué tipo de presupuesto le gustaría recibir ? ( Para obtener información general sobre nuestra empresa o sobre el sector de la construcción en general, haga clic en el botón 'Información' )":ce==="en"?"What type of quote would you like to receive ? ( To obtain general information about our company or the construction sector in general, click on the 'Information' button )":"Quel type de devis aimeriez-vous recevoir ? ( Pour obtenir des informations générales sur notre société ou sur le secteur de la construction en général, cliquez sur le bouton 'Information' )",D=(ce,_e)=>{navigator.clipboard.writeText(_e).then(()=>{ee(parseInt(ce.target.id)),setTimeout(()=>ee(-1),1500)}).catch(we=>console.error("Failed to copy:",we))},x=async(ce,_e,we,Ae,xe,De,Fe,Be,Le,$e,We,Qe,Oe,et)=>{let Xe="";et||(Xe=await zr(Ae));const Ge={from_name:we,to_name:ce,lbl_headerCita:xe,lbl_datehour:De,val_datehour:Fe,lbl_service:Be,val_service:Le,lbl_name:$e,val_name:We,email:ce,lbl_wap:Qe,val_wap:Oe,msg:Ae,reply_to:_e,urlIcs:et?"http://www.meria.com/r/pvKKfbZ5":Xe.replace("https://backendlessappcontent.com/","")};emailjs.send("service_9j0grda","template_mnyxnuu",Ge,"E_lpno1uufimH14lK").then(Ve=>{console.log("SUCCESS Mail !",Ve.status,Ve.text)},Ve=>{console.log("FAILED Mail ...",Ve)})},R=(ce,_e,we,Ae,xe)=>{const De={subject:_e,emailAdmin:ce,headerQuestion:we,question:Ae,headerResponse:xe,url:window.location.href.replace("#popup","")+"?a=1"};emailjs.send("service_9j0grda","template_veh7rsi",De,"E_lpno1uufimH14lK").then(Fe=>{console.log("SUCCESS Mail !",Fe.status,Fe.text)},Fe=>{console.log("FAILED Mail ...",Fe)})};reactExports.useEffect(()=>{(async()=>{try{const we=new Date().toISOString().split("T")[0];ye.dateCita&&ye.dateCita<we&&Ce({idService:0,labelService:"",dateCita:new Date,nombre:"",contact:"",stepCita:0}),M(""),A(3);const Ae=!1}catch(_e){console.error("Error fetching data:",_e)}})()},[T]);const G=`
    query GetSERVICE($cat: Int_comparison_exp!) {
      SERVICE(where: { categ: $cat }) {
        id
        en
        es
        fr
        de
        categ
      }
    }
  `,ie=async()=>{try{const ce=await client.request(G,{cat:{_eq:3}});g(ce.SERVICE)}catch(ce){console.error("Error fetching data:",ce)}};reactExports.useEffect(()=>{ie()},[]);const ae=(ce,_e,we,Ae)=>{let xe=[],De=new Date(ce),Fe=0;for(;De<=_e;){De.getDay();let Le=De.toISOString().split("T")[0];if(new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(new Date(Le))!=="Sunday"&&!we.includes(Le)&&xe.push(Le),Fe++,Fe===Ae)break;De.setDate(De.getDate()+1)}xe.sort((Le,$e)=>new Date(Le)-new Date($e));let Be=[];for(let Le=0;Le<xe.length;Le+=4)Be.push(xe.slice(Le,Le+4));return Be},se=()=>{w(!0)},[ue,le]=reactExports.useState({display:O!==1?"block":"none"}),[de,he]=reactExports.useState({display:O!==0?"block":"none"}),[ge,be]=reactExports.useState({display:O!==2?"block":"none"}),Re=Z==="de"?"Kopiert !":Z==="es"?"Copiado !":Z==="en"?"Copied !":"Copié !",Pe=ce=>ce==""?Z==="de"?"de-DE":Z==="es"?"es-ES":Z==="en"?"en-US":"fr-FR":ce==="de"?"de-DE":ce==="es"?"es-ES":ce==="en"?"en-US":"fr-FR",ke=ce=>ce==""?Z==="de"?"Ich":Z==="es"?"Yo":Z==="en"?"Me":"Moi":ce==="de"?"Ich":ce==="es"?"Yo":ce==="en"?"Me":"Moi",[ye,Ce]=reactExports.useState(()=>JSON.parse(localStorage.getItem("curCita1"))||{idService:0,labelService:"",dateCita:new Date,nombre:"",contact:"",stepCita:0}),[Ne,Ye]=reactExports.useState(O===2&&ye.stepCita<3&&ye.contact!==""),[He,nt]=reactExports.useState(ke("")),me=ce=>ce===""?Z==="de"?"Virtueller Assistent":Z==="es"?"Asistente virtual":Z==="en"?"Virtual assistant":"Assistant virtuel":ce==="de"?"Virtueller Assistent":ce==="es"?"Asistente virtual":ce==="en"?"Virtual assistant":"Assistant virtuel",fe=ce=>Z==="de"?"Kundendienst":Z==="es"?"Atención al Cliente":Z==="en"?"Customer Service":"Service Client",pe=Z==="de"?"Senden":Z==="es"?"Enviar":Z==="en"?"Send":"Envoyer",Te=Z==="de"?"Löschen":Z==="es"?"Borrar":Z==="en"?"Clear":"Effacer",Ie=Z==="de"?"Abbrechen":Z==="es"?"Cancelar":Z==="en"?"Cancel":"Annuler",Me=Z==="de"?"Information/Suche":Z==="es"?"Información/Búsqueda":Z==="en"?"Information/Search":"Information/Recherche",qe=Z==="de"?"Termin":Z==="es"?"Cita":Z==="en"?"Appointment":"Rendez-vous",it=Z==="de"?"Kostenvora../Schätzung":Z==="es"?"Presupuesto/Estimación":Z==="en"?"Quote/Estimation":"Devis/Estimation",dt=Z==="de"?"Hier tippen":Z==="es"?"Escribe aquí":Z==="en"?"Type here":"Tapez ici",lt="";async function Ke(ce,_e,we){try{const Ae="2",xe=ce+(ce===""?"":`
Based on the previous text and/or CSV report ( the column on the right is the price in € ), provide a natural and conversational response to the following question :  `)+_e+(we?"No recomendar de ponerse en contacto con empresas de limpieza locales. La expresión 'Lo siento' no puede aparecer en la respuesta.":"");if(Ae==="2"){const Fe="AIzaSyCDNOZfUiyps2LklRakG8-Hhk_aYlG_mVw";return(await new GoogleGenerativeAI(Fe).getGenerativeModel({model:"gemini-2.5-pro-exp-03-25",systemInstruction:"You are a company in the construction sector",maxOutputTokens:20}).generateContent(xe)).response.text()}}catch(Ae){console.error("Error generating content:",Ae)}return"No-API AI"}async function ft(ce,_e){try{let we="";if(O===1){const Ae=`
        query GetInfosDevis {
          ${_e}{
            title
            price
          }
        }
          `,xe=await client.request(Ae);return xe[_e].length<=1?xe[_e].length>0?we=xe[_e][0].title:we="":we=Papa.unparse(xe[_e],{header:!1,newline:`\r
`}),we=we.replace(/"/g,""),we=await Ke(we+`.
Si la información necesaria para proporcionar un presupuesto no es suficiente, dar el WhatsApp del jefe de la empresa : +`+""+" (ultima frase de la respuesta).",ce),we}else if(O===0)return await Ke("",ce)}catch(we){console.error(we)}}async function st(ce){try{let we=await ft(ce,"construction_en");for(let Ae=0;Ae<ze.length;Ae++){const xe=await Ke(ze[Ae],ce);xe.includes("doesn't provide")||xe.includes("doesn't mention")||xe.includes("doesn't include")||xe.includes("not provide")||xe.includes("not mention")||xe.includes("not include")||xe.includes("doesn't specify")||xe.includes("not specify")||xe.includes("not contain")||xe.includes("sorry")||(we=we+`
`+xe)}return we}catch(_e){return console.error("Error fetching ChatGPT response:",_e),"Sorry, I couldn't process your request."}}const ut=reactExports.useRef(null),[ze,bt]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{try{lt!=""}catch(_e){console.error("Error in fetchFiles function:",_e)}})()},[]);const _t=async ce=>{const _e=await pdfExports.getDocument({data:ce}).promise;let we="";for(let Ae=1;Ae<=_e.numPages;Ae++){const Fe=(await(await _e.getPage(Ae)).getTextContent()).items.map(Be=>Be.str).join(" ");we+=Fe+`
`}return we};reactExports.useEffect(()=>{localStorage.setItem("curCateg",O),ye.nombre!==""?localStorage.setItem("curPseudo",ye.nombre):localStorage.setItem("curPseudo",S),O===1?Ze(me(""),ne(""),""):(Ze(me(""),M(""),""),q(0),he({display:"none"}))},[S]),reactExports.useEffect(()=>{localStorage.setItem("curCita1",JSON.stringify(ye))},[ye]),reactExports.useEffect(()=>{ut.current&&(ut.current.scrollTop=ut.current.scrollHeight)},[C]);const wt=Date.now(),ht=()=>{let ce=I()+`
`+k("")+`
`,_e=new Intl.DateTimeFormat(Pe(""),{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"UTC"}).format(new Date(ye.dateCita));ce+=_e+`
`,ce+=B("")+ye.labelService+`
`,ce+=F("")+` +
`;let we=Z==="de"?"Neuer Termin":Z==="es"?"Nueva cita":Z==="en"?"New appointment":"Nouveau rendez-vous",Ae=Z==="de"?"Name : ":Z==="es"?"Nombre : ":Z==="en"?"Name : ":"Nom : ";const xe=encodeURIComponent(ce);return{subject:we,name:Ae,dathour:_e,encodedMessage:xe}},mt=async ce=>{var Le;if(ce.preventDefault(),J.length>1e3){console.log("Input is too large!");return}if(Y!=="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"){console.log("Bot detected! Submission blocked.");return}else{const $e=Date.now()-wt;if(console.log("Diff : "+$e),$e<1e3){console.log("Bot detected: Too fast!");return}else if(!y){console.log("Bot detected: No prior interaction!");return}}if(J.trim()==="")return;const we=new Date().toLocaleString(Pe(""),{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0});let Ae="",xe="";const De={sender:He,text:J,lines:J.split(`
`),whatsapp:Ae,lnkWhatsapp:xe,timestamp:we};if(ye.stepCita===3&&ye.contact===""){Ae="",xe="https://wa.me/"+Ae+"?text=TT",Ce(We=>({...We,nombre:J,stepCita:We.stepCita+1})),Ze(ke(""),J,Z);let $e=Z==="de"?"Schließlich geben Sie bitte Ihre E-Mail-Adresse ein ( klicken Sie auf 'Senden', um sie zu speichern ), um den Termin zu bestätigen.":Z==="es"?"Finalmente, por favor, ingrese su correo electrónico ( haz clic en 'Enviar' para guardarlo) para confirmar la cita.":Z==="en"?"Finally, please enter your email ( click 'Send' to save it ) to confirm the appointment.":"Enfin, veuillez, s'il vous plaît, saisir votre email ( cliquer sur 'Envoyer' pour l'enregistrer ) pour confirmer le rendez-vous.";Q(""),Ze(me(""),$e,Z);return}else if(ye.stepCita===4&&ye.contact===""){Ce(et=>({...et,contact:J,stepCita:et.stepCita+1})),j([]);const{subject:$e,name:We,dathour:Qe,encodedMessage:Oe}=ht();$r(),P&&x(J,"adrien012014@gmail.com",$e,Oe,I(),k(""),Qe,B(""),ye.labelService,We,ye.nombre,F(""),"",!1),Q("");return}j($e=>[...$e,De]);const Fe=`
      mutation InsertComment(
          $id_client: Int!, 
          $pseudo: String!, 
          $question: String!, 
          $response: String!,
          $created: timestamp,
          $isai: Boolean,
          $categ: Int!
        ) {
          insert_COMMENT_one(
            object: { 
              id_client: $id_client, 
              pseudo: $pseudo, 
              question: $question, 
              response: $response, 
              viewed: false, 
              created: $created,
              isai: $isai,
              categ: $categ
            }
          ) {
            id
            id_client
            pseudo
            question
            response
            viewed
            created
          }
        }
       `,Be=`
       query GetLastHumanComment($pseudo: String!) { 
        COMMENT(
          where: { pseudo: { _eq: $pseudo }, isai: { _eq: false } } 
          order_by: { created: desc }
          limit: 1
        ) {
          created
        }
      }
      `;if(O===0||O===1){let $e=Date.now(),We=!0;if(S==="")ye.nombre!==""?localStorage.setItem("curPseudo",ye.nombre):localStorage.setItem("curPseudo",$e.toString());else{const Ge=await client.request(Be,{pseudo:S});if(Ge.COMMENT.length>0){const Ve=new Date(Ge.COMMENT[0].created);(new Date-Ve)/(1e3*60*60)>1||(We=!1)}}let Qe=new Date(Date.now()+60*60*1e3),Oe="";if(We){const Ge=`
      query GetProducts($id_client: Int!, $ids: [Int!]!) {
        PRODUCT(
          where: { 
            id_client: { _eq: $id_client }, 
            id: { _in: $ids } 
          }
        ) {
          description
          url
          linkAd
        }
      }
       `;let Ve=J+`
`,At=await client.request(`
      query GetFilteredInforai($categ: Int!, $lang: String!) {
        INFORAI(where: { categ: { _eq: $categ }, lang: { _eq: $lang } }) {
          text
        }
      }
       `,{categ:3,lang:Z});if(((Le=At==null?void 0:At.INFORAI)==null?void 0:Le.length)>0){let pt=Papa.unparse(At.INFORAI,{header:!1,newline:`\r
`});pt=pt.replace(/"/g,""),Ve+=pt+`
`}if(O===0&&d&&(Ve+=Z==="de"?`Geben Sie an, welches(n) Produkt(e) aus der folgenden CSV-Liste geeignet wären (geben Sie zusätzlich zur Antwort auf die vorherige Frage eine JSON-Zeichenkette zurück, die eine Liste von Identifikatoren enthält, zum Beispiel: '{ "Produkte": "1,2" }', ohne Leerzeichen im Array. Erwähnen Sie keine Ausdrücke in Klammern, wie '(Produkt 2)' oder '(Produkt 3)' oder '(2)' oder '(3)' ).`:Z==="es"?`Indique qué producto(s) de la siguiente lista CSV serían adecuados ( devuelve, además de la respuesta a la pregunta anterior, una cadena JSON que contenga una lista de identificadores, por ejemplo: '{ "Productos": "1,2" }' , sin espacios en el array. No mencione expresiones entre paréntesis, como '(Producto 2)' o '(Producto 3)' o '(2)' o '(3)' ).`:Z==="en"?`Indicate which product(s) from the following CSV list would be suitable ( return, in addition to the answer to the previous question, a JSON string containing a list of identifiers, for example: '{ "Products": "1,2" }' , with no spaces in the array. Do not mention expressions in parentheses, such as '(Product 2)' or '(Product 3)' o '(2)' o '(3)' ).`:` Indiquez quel(s) produit(s) de la liste CSV suivante conviendraient ( retourner, en plus de la réponse à la précédente question, une chaîne JSON contenant une liste d'identifiants, par exemple : '{ "Produits": "1,2" }' , sans espaces dans le tableau. Ne pas mentionner les expressions entre parenthèses, telles que '(produit 2)' ou '(produit 3)' ou '(2)' ou '(3)' ).`,Ve+=p+`
`,Ve+=Z==="es"?"No escribir el análisis de la lista proporcionada. No se debe mencionar 'producto con identificador'.":Z==="de"?"Die Analyse der bereitgestellten Liste nicht schreiben. Es sollte 'Produkt mit Identifikator' nicht erwähnt werden.":Z==="en"?"Do not write the analysis of the provided list. The 'product with identifier' should not be mentioned.":"Ne pas écrire l'analyse de la liste fournie. Il ne faut pas mentionner 'produit avec identifiant'."),U("flex"),Oe=await st(Ve),O===0&&d){let pt=Oe.split(Z==="de"?'{ "Produkte": "':Z==="es"?'{ "Productos": "':Z==="en"?'{ "Products": "':'{ "Produits": "');if(pt.length>1){Oe=pt[0];let je=pt[1].split('" }')[0].trim();if(je!==""){const Wr=je.split(",").map(Tt=>parseInt(Tt,10)),Kr=(await client.request(Ge,{id_client:T,ids:Wr})).PRODUCT.map(Tt=>[Tt.description,Tt.url,Tt.linkAd]);l(Kr)}else l([[]]);h(je)}if(Oe=Oe.replace(/\*/g,""),Oe.includes("Sans plus d'informations")||Oe.includes("Once I have this information")){let je=Oe.split("Sans plus d'informations");je.length>1?Oe=je[0]:(je=Oe.split("Once I have this information"),je.length>0&&(Oe=je[0]))}else{let je=Oe.split("Here's the JSON");je.length>1?Oe=je[0]:(je=Oe.split("json"),je.length>0?Oe=je[0].slice(0,je[0].length-3):(je=Oe.split("Based on this, here's the JSON"),je.length>0?Oe=je[0]:(je=Oe.split("Voici la réponse au format JSON :"),je.length>0?Oe=je[0]:(je=Oe.split("Voici les identifiants des produits"),je.length>0&&(Oe=je[0])))))}}else Oe=Oe.replace(/\*/g,""),Oe=Oe.replace("de la lista CSV se describe","que tenemos está descrito")}await client.request(Fe,{id_client:T,pseudo:S===""?$e.toString():S,question:J,response:We?Oe:"-",created:Qe,isai:We,categ:O});const et=`
        mutation deleteOldComments {
          delete_COMMENT(where: {created: {_lt: "${new Date().toISOString().split("T")[0]}T00:00:00"}}) {
            affected_rows
          }
        }
      `;(await client.request(et)).delete_COMMENT.affected_rows>0,P&&R("adrien012014@gmail.com",Z==="de"?"Empfang einer Informationsanforderung von einem Kunden.":Z==="es"?"Recepción de una solicitud de información de un cliente.":Z==="en"?"Receipt of an information request from a client.":"Réception d'une demande d'information d'un client.",Z==="de"?"Hallo, ein Kunde hat Ihnen folgende Frage gestellt : ":Z==="es"?"Hola, un cliente le ha hecho la siguiente pregunta : ":Z==="en"?"Hello, a client has asked you the following question : ":"Un client vous a posé la question suivante : ",J,Z==="de"?"Sie können die Antwort von Ihrem virtuellen Assistenten im folgenden Administrator-Portal lesen : ":Z==="es"?"Usted puede leer la respuesta de su asistente virtual en el siguiente portal de administrador : ":Z==="en"?"You can read the response from your virtual assistant on the following administrator portal : ":"Vous pouvez lire la réponse de votre assistant virtuel sur le portail administrateur suivant : "),We&&Ze(me(""),Oe,""),U("none")}Q("")},Je=async()=>{try{if(Ce(ce=>({...ce,stepCita:0})),Ye(!0),Q(""),j([]),N([[]]),O!==2){const ce=`
       mutation DeleteCommentsByIdClientAndPseudo($id_client: Int!, $pseudo: String!) { 
        delete_COMMENT(
          where: { 
            id_client: { _eq: $id_client },
            pseudo: { _eq: $pseudo }
          }
        ) {
          affected_rows
        }
      }
      `;if(S!==""){const _e={id_client:3,pseudo:S};(await client.request(ce,_e)).delete_COMMENT.affected_rows>0}O===0&&(localStorage.clear(),Ze(me(""),M(""),"")),O===1&&(localStorage.clear(),Ze(me(""),ne(""),""))}else{const ce=`
        mutation DeleteCitaById($id: Int!) {
          delete_CITA(where: { id: { _eq: $id } }) {
            affected_rows
          }
        }
      `,_e={id:ye.idService},we=await client.request(ce,_e),{subject:Ae,name:xe,dathour:De,encodedMessage:Fe}=ht(),Be=Z==="de"?"Termin vom Kunden abgesagt":Z==="es"?"Cita cancelada por el cliente":Z==="en"?"Appointment canceled by the client":"Rendez-vous annulé par le client";x(ye.contact,"adrien012014@gmail.com",Be,Fe,I(""),k(""),De,B(""),ye.labelService,xe,ye.nombre,F(""),"",!0);let Le=new Date(ye.dateCita).toISOString().split("T");if(we.delete_CITA.affected_rows>0&&Le.length>1){const We=`
          mutation insertAvailability(
            $slot: String!, 
            $id_client: Int!, 
            $cur_date: date!
          ) {
            insert_AVAILABILITY(objects: { slot: $slot, id_client: $id_client, cur_date: $cur_date }) {
              returning {
                id
                slot
                id_client
                cur_date
              }
            }
          }
        `;let Qe={slot:Le[1].slice(0,5),id_client:3,cur_date:Le[0]};const Oe=await client.request(We,Qe),et=new Date(ye.dateCita);et.setMinutes(et.getMinutes()-15),Le=et.toISOString().split("T"),Qe={slot:Le[1].slice(0,5),id_client:3,cur_date:Le[0]};const Xe=await client.request(We,Qe),Ge=new Date(ye.dateCita);Ge.setMinutes(Ge.getMinutes()+15),Le=Ge.toISOString().split("T"),Qe={slot:Le[1].slice(0,5),id_client:3,cur_date:Le[0]};const Ve=await client.request(We,Qe)}else console.log("No cita found with that ID.");Ce({idService:0,labelService:"",dateCita:new Date,nombre:"",contact:"",stepCita:0}),localStorage.clear(),lr(!0);const $e=setTimeout(()=>{},1e3)}le({display:"block"}),he({display:"block"}),be({display:"block"})}catch(ce){console.error("Error fetching data:",ce)}},at=async(ce,_e,we)=>{let Ae="";j([]);const xe=new Date().toLocaleString(Pe(we),{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0}),De=new Date;let Fe=_e>=0?_e:ye.stepCita;switch(Fe){case 0:let Be=null;if(_e<0){let Xe=Number(ce);if(Be=v.filter(Ge=>Ge.id===Xe),ye.labelService.length===0&&De<ye.dateCita){Ae=Z==="de"?"Sie können keinen weiteren Termin buchen, da Sie bereits zwei gebucht haben.":Z==="es"?"Usted no puede reservar otra cita porque ya ha reservado dos.":Z==="en"?"You cannot book another appointment because you have already booked two.":"Vous ne pouvez pas prendre un autre rendez-vous, car vous en avez déjà pris deux.";const Ge={sender:me(""),text:Ae,lines:[],whatsapp:"",lnkWhatsapp:"",timestamp:xe};j(Ve=>[...Ve,Ge]),nt(ke(""));return}else Ce(Ge=>({...Ge,idService:Xe,labelService:Be[0][Z],stepCita:Ge.stepCita+1}));Ae=Z==="de"?"Welchen Tag möchten Sie einen Termin vereinbaren?":Z==="es"?"¿ Qué día le gustaría programar una cita ?":Z==="en"?"Which day would you like to schedule an appointment ?":"Quel jour souhaitez-vous prendre rendez-vous ?"}else Be=v.filter(Xe=>Xe.id===ye.idService),Ce(Xe=>({...Xe,labelService:Be[0][we]})),Ae=Z==="de"?"An welchem Tag möchten Sie einen Termin vereinbaren?":we==="es"?"¿ Qué día le gustaría programar una cita ?":we==="en"?"Which day would you like to schedule an appointment ?":"Quel jour souhaitez-vous prendre rendez-vous ?";const Le=new Date;Le.setDate(Le.getDate()+1);let Qe=ae(Le,new Date("2099-12-31"),n,29);N(Qe);break;case 1:Fe<0?Ae=Z==="de"?"Um wie viel Uhr?":Z==="es"?"¿ A qué hora ?":Z==="en"?"At what time ?":"À quelle heure ?":Ae=Z==="de"?"Um wie viel Uhr?":we==="es"?"¿ A qué hora ?":we==="en"?"At what time ?":"À quelle heure ?";const Oe=new Date(ce);Ce(Xe=>({...Xe,dateCita:Oe,stepCita:Xe.stepCita+1}));let et=await St(ce);N(et);break;case 2:if(ce.length===5){const Xe=Number(ce.slice(0,2)),Ge=Number(ce.slice(-2));let Ve=new Date;ye.contact===""&&(Ve=ye.dateCita,Ve.setUTCHours(Xe),Ve.setUTCMinutes(Ge),Ce(Et=>({...Et,dateCita:Ve,nombre:"",contact:"",stepCita:Et.stepCita+1})))}Fe<0?Ae=Z==="de"?"Um den Termin zu bestätigen, müssen Sie Ihren Vornamen und Ihre E-Mail-Adresse registrieren. Geben Sie zuerst Ihren Vornamen ein und klicken Sie dann auf 'Senden', um ihn zu speichern.":Z==="es"?"Para confirmar la cita, usted debe registrar su nombre y su dirección de correo electrónico. Primero, introduzca su nombre y luego haga clic en 'Enviar' para guardarlo.":Z==="en"?"To confirm the appointment, you must register your first name and your email address. First, enter your first name, then click 'Send' to save it.":"Pour confirmer le rendez-vous, vous devez enregistrer votre prénom ainsi que votre adresse e-mail. Veuillez d'abord saisir votre prénom, puis cliquez sur 'Envoyer' pour l'enregistrer.":Ae=we==="de"?"Um den Termin zu bestätigen, müssen Sie Ihren Vornamen und Ihre E-Mail-Adresse registrieren. Geben Sie zuerst Ihren Vornamen ein und klicken Sie dann auf 'Senden', um ihn zu speichern.":we==="es"?"Para confirmar la cita, usted debe registrar su nombre y su dirección de correo electrónico. Primero, introduzca su nombre y luego haga clic en 'Enviar' para guardarlo.":we==="en"?"To confirm the appointment, you must register your first name and your email address. First, enter your first name, then click 'Send' to save it.":"Pour confirmer le rendez-vous, vous devez enregistrer votre prénom ainsi que votre adresse e-mail. Veuillez d'abord saisir votre prénom, puis cliquez sur 'Envoyer' pour l'enregistrer.",N([[]]);break}return Ae},St=async ce=>{try{const _e=`
        query CheckAvailability {
          AVAILABILITY(
           where: { cur_date: { _eq: "${ce}" }, id_client: { _eq: 3 } }
           order_by: { slot: asc }
           ) {
            slot
          }
        }
      `;let Ae=(await client.request(_e)).AVAILABILITY.map(De=>De.slot),xe=[];for(let De=0;De<Ae.length;De+=4)xe.push(Ae.slice(De,De+4));return xe}catch(_e){return console.error("Error fetching data:",_e),[]}},ar=(ce,_e,we)=>{let Ae=[],xe=new Date;for(xe.setHours(ce,0,0,0);xe.getHours()<_e;){let De=xe.toTimeString().slice(0,5);xe.setMinutes(xe.getMinutes()+we),Ae.push(`${De}`)}return Ae},or=`
      subscription CitaSubscription($id_client: Int!) {
        CITA(
          where: { id_client: { _eq: $id_client } } 
          order_by: { created: desc } 
          limit: 1
        ) {
          id
          start_date
        }
      }
    `,Lr=`
    mutation DeleteAvailability($id_client: Int!, $cur_date: date!, $slot: String!) {
      delete_AVAILABILITY(
        where: { 
          id_client: { _eq: $id_client }, 
          cur_date: { _eq: $cur_date }, 
          slot: { _eq: $slot } 
        }
      ) {
        affected_rows
      }
    }
   `;reactExports.useEffect(()=>{const _e=wsClient.subscribe({query:or,variables:{id_client:3}},{next:async we=>{if(we.data&&we.data.CITA.length>0){xe.data.CITA[0].start_date.toISOString().split("T")[0];const Ae=String(date.getHours()).padStart(2,"0")+":"+String(date.getMinutes()).padStart(2,"0");let xe=await client.request(Lr,{cur_date:xe.data.CITA[0].start_date,id_client:3,slot:Ae})}},error:we=>console.error("Subscription error : CITA_SUBSCRIPTION ",we),complete:()=>console.log("Subscription complete CITA_SUBSCRIPTION ")});return()=>_e()},[wsClient,or,T]);const Mr=async ce=>{try{if(ce.preventDefault(),/^\d{4}-\d{2}-\d{2}$/.test(ce.target.value)){let Ae=new Date(ce.target.value);if((await client.request(`
        query CheckAvailability($cur_date: date!, $id_client: Int!) {
          AVAILABILITY(where: { cur_date: { _eq: $cur_date }, id_client: { _eq: $id_client } }) {
            id
          }
        }
      `,{cur_date:new Date(ce.target.value),id_client:T})).AVAILABILITY.length===0){const Fe=`
          mutation InsertAvailability($objects: [AVAILABILITY_insert_input!]!) {
            insert_AVAILABILITY(objects: $objects) {
              returning {
                id_client
                cur_date
                slot
              }
            }
          }
        `;let Be=ar(Number(f.slice(0,2)),Number(a.slice(0,2)),15),Le=T,$e=Be.map(Oe=>({cur_date:Ae,id_client:Le,slot:Oe}));Be=ar(Number(o.slice(0,2)),Number(u.slice(0,2)),15);const We=Be.map(Oe=>({cur_date:Ae,id_client:Le,slot:Oe}));$e.push(...We);const Qe=await client.request(Fe,{objects:$e})}}j([]);let we=at(ce.target.value,-1,Z);Ze(me(""),we,"")}catch(_e){console.error("Error fetching data:",_e)}},Mt=ce=>{Ye(ce===2),q(ce),N([[]]),new Date().toLocaleString(Pe(""),{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0}),ce===1&&(le({display:"none"}),be({display:"block"}),he({display:"block"})),ce===0&&(le({display:"block"}),be({display:"block"}),he({display:"none"}));let _e="";j([]),ce===2?lr(!1):(ce===0&&(_e=M("")),ce===1&&(_e=ne("")),Ze(me(""),_e,""))},lr=ce=>{let _e=te();le({display:"block"}),he({display:"block"}),be({display:ce?"block":"none"}),ye.contact===""&&(Ze(me(Z),_e,""),ur([[]],""))},ur=(ce,_e)=>{const we=[[]];let Ae=0,xe=-1;(ce[0].length===0?v:ce).forEach(Fe=>{Ae%3===0&&(we.push([]),xe++),we[xe].push(Fe.id+"-"+Fe[_e===""?Z:_e]),Ae++}),N(we)},Fr=ce=>{X(ce.target.value)},qr=`
    mutation InsertCita($id_client: Int!, $id_service: Int!, $name: String!, $date: timestamp!) {
      insert_CITA(objects: {id_client : $id_client,id_service : $id_service,name: $name,start_date: $date}) {
        returning {
          id
          id_service
          name
          start_date
        }
      }
    }
    `,jr=`
    mutation deleteOldCitas {
      delete_CITA(where: {start_date: {_lt: "${new Date().toISOString().split("T")[0]}T00:00:00"}}) {
        affected_rows
      }
    }
  `,Br=`
    mutation deleteAvailabilities($dateCita: date!, $slotBefore: String!, $slotExact: String!, $slotAfter: String!) {
      delete_AVAILABILITY(
        where: {
          _or: [
            { cur_date: { _lt: "${new Date().toISOString().split("T")[0]}" } }
            { cur_date: { _eq: $dateCita }, slot: { _in: [$slotBefore, $slotExact, $slotAfter] } }
          ]
        }
      ) {
        affected_rows
      }
    }

  `;function Ur(ce){const[_e,we]=ce.split(":").map(Number),Ae=(Fe,Be)=>`${String(Fe).padStart(2,"0")}:${String(Be).padStart(2,"0")}`,xe=Ae(_e,we-15),De=Ae(_e,we+15);return{slotBefore:xe,slotExact:ce,slotAfter:De}}const $r=async()=>{try{const ce={id_client:T,id_service:ye.idService,name:ye.nombre,date:ye.dateCita},_e=await client.request(qr,ce);if(_e.insert_CITA.returning.length>0){if(Ce(Ae=>({...Ae,idService:_e.insert_CITA.returning[0].id,stepCita:0})),(await client.request(jr)).delete_CITA.affected_rows>0,ye.dateCita.toISOString().includes("T")){let Ae=ye.dateCita.toISOString().split("T");if(Ae.length>1){const{slotBefore:xe,slotAfter:De,slotExact:Fe}=Ur(Ae[1]),Be={dateCita:new Date(Ae[0]),slotBefore:xe.slice(0,5),slotExact:Fe.slice(0,5),slotAfter:De.slice(0,5)};(await client.request(Br,Be)).delete_AVAILABILITY.affected_rows>0}}}else console.log("Failed to insert cita.")}catch(ce){console.error("Error fetching data:",ce)}},kt=ce=>{if(L(ce),j([]),O!==2){O===1&&Ze(me(ce),ne(ce),ce),O===0&&Ze(me(ce),M(ce),ce);return}let _e=ce==="de"?"Welche Art von Termin wünschen Sie ?":ce==="es"?"¿ Qué tipo de cita desea ?":ce==="en"?"What type of appointment do you want ?":"Quel type de rendez-vous souhaitez-vous ?";switch(ye.stepCita){case 0:ur([[]],ce),ye.labelService.length>0&&at(ye.labelService[ce],-1,ce);break;case 1:const we=at(ye.dateCita,0,ce);Ze(me(ce),we,ce);return;case 2:let Ae=at(ye.nombre,1,ce);Ze(me(ce),Ae,ce);return}Ze(me(ce),_e,"")},Ze=(ce,_e,we)=>{const Ae=new Date().toLocaleString(Pe(we),{month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour24:!0}),xe={sender:ce,text:_e,lines:[],whatsapp:"",lnkWhatsapp:"",timestamp:Ae};j(De=>[...De,xe]),nt(ke(we===""?Z:we))},zr=async ce=>{try{let _e=new Date(ye.dateCita);_e=new Date(_e.getTime());let we=new Date(_e.getTime()+30*60*1e3);const Ae=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//YourCompany//YourProduct//EN
BEGIN:VEVENT
UID:${Date.now()}@yourdomain.com
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}
DTSTART:${_e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}
DTEND:${we.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}
SUMMARY:${ye.labelService}
DESCRIPTION:${F()+"https://wa.me/?text="+ce}
LOCATION:https://g.co/kgs/k6nkVw2
END:VEVENT
END:VCALENDAR`,xe=new Blob([Ae],{type:"text/calendar;charset=utf-8"}),De=`/ICS/${ye.labelService}_${new Date().toISOString()}.ics`,Fe=await Backendless.Files.upload(xe,De,!0);return FileSaver_minExports.saveAs(xe,Z==="de"?"ereignis.ics":Z==="es"?"cita.ics":"event.ics"),Fe.fileURL}catch(_e){console.error("File upload failed:",_e)}},cr=`
    subscription CommentSubscription($id_client: Int!, $pseudo: String!) {
      COMMENT(
        where: { 
          id_client: { _eq: $id_client }, 
          pseudo: { _eq: $pseudo },
          isai: { _eq: false },
          response: { _neq: "-" }
        } 
        order_by: { created: desc } 
        limit: 1
      ) {
        id
        pseudo
        question
        response
        created
        viewed
        isai
      }
    }
    `;reactExports.useEffect(()=>{let ce=Date.now();S===""&&(ye.nombre!==""?localStorage.setItem("curPseudo",ye.nombre):localStorage.setItem("curPseudo",ce.toString()));const _e=wsClient.subscribe({query:cr,variables:{id_client:T,pseudo:S}},{next:async we=>{O!==2&&we.data&&we.data.COMMENT.length>0&&(C.length>1&&(C[C.length-2].text!==C[C.length-1].text||!we.data.COMMENT[0].isai)?Ze(fe(),we.data.COMMENT[0].response,""):Ze(me(""),we.data.COMMENT[0].response,""))},error:we=>console.error("Subscription error COMMENT_SUBSCRIPTION :",we),complete:()=>console.log("Subscription complete COMMENT_SUBSCRIPTION")});return()=>_e()},[wsClient,cr,T,S]);const[Rt,Ft]=reactExports.useState(!0);reactExports.useEffect(()=>{c(!1)},[C]);const Vr=ce=>ce[2]==="-"?"https://wa.me/?text="+(Z==="de"?"Hallo, ich möchte den folgenden Artikel bestellen: ":Z==="es"?"Hola, quiero pedir el siguiente articulo : ":Z==="en"?"Hello, I would like to order the following item : ":"Bonjour, je souhaite commander l'article suivant : ")+ce[0]:ce[2],Gr=ce=>ce[2]==="-"?Z==="de"?"BITTEN":Z==="es"?"PEDIR":Z==="en"?"ORDER":"COMMANDER":Z==="de"?"SIE DIE ANKÜNDIGUNG":Z==="es"?"VER EL ANUNCIO":Z==="en"?"SEE THE AD":"VOIR L'ANNONCE",[It,Hr]=reactExports.useState(!1);return reactExports.useEffect(()=>{(()=>{const _e=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);Hr(_e)})()},[]),jsxRuntimeExports.jsxs("div",{className:"app-container",children:[jsxRuntimeExports.jsxs("div",{id:"popup",className:"popup",style:{display:Rt?"none":"block"},children:[jsxRuntimeExports.jsx("a",{href:"#",class:"close",onClick:()=>Ft(!0),children:"×"}),jsxRuntimeExports.jsx(Swiper,{slidesPerView:1,spaceBetween:30,keyboard:{enabled:!0},pagination:{clickable:!0},navigation:!0,modules:[Keyboard,Pagination,Navigation],className:"swiper",children:b.map((ce,_e)=>jsxRuntimeExports.jsxs(SwiperSlide,{children:[jsxRuntimeExports.jsx("img",{src:ce[1],alt:ce[0],style:{height:"85%"}}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flex:"1",marginLeft:"7em",color:"#062a4e"},children:ce[0]}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flex:"4",float:"right",marginRight:"2em",color:"#062a4e"},children:jsxRuntimeExports.jsx("a",{href:Vr(ce),target:"_blank",children:Gr(ce)})})]}))})]}),jsxRuntimeExports.jsxs("div",{class:"header-container",children:[jsxRuntimeExports.jsx("div",{class:"header-left",children:jsxRuntimeExports.jsx("img",{style:{maxHeight:"10vh"},src:"https://www.dropbox.com/scl/fi/jwci207b5h9mxn7wu2iyc/construccion.png?rlkey=djiajtussvxir0wflc0ug6pn6&st=uyedfbqi&dl=1",alt:"Logo"})}),jsxRuntimeExports.jsxs("div",{class:"header-right",children:[jsxRuntimeExports.jsxs("div",{class:"header-top",children:[Rt&&!It&&jsxRuntimeExports.jsx("h4",{style:{marginBottom:"2em"},children:"CONSTRUCTION MODEL"}),Rt&&It&&jsxRuntimeExports.jsx("div",{style:{position:"fixed",top:"5",right:"0",marginRight:"1em",fontWeight:"bold"},children:"CONSTRUCTION MODEL"})]}),jsxRuntimeExports.jsxs("div",{class:"header-bottom",style:{display:"flex",marginTop:"-10px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"35%",textAlign:"left"},children:jsxRuntimeExports.jsx("a",{href:"https://g.co/kgs/k6nkVw2",target:"_blank",children:""})}),jsxRuntimeExports.jsxs("div",{style:{width:"65%",textAlign:"left",marginLeft:"15px"},children:[It&&jsxRuntimeExports.jsx("br",{}),Z==="de"?"Kontakt :":Z==="es"?"Contacto :":"Contact :"," ","adrien012014@gmail.com",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("a",{href:"https://1drv.ms/b/c/2502665880f2110c/EQ0jvrzdLQJJvG1N0BVmeB8B6BzA6fCKhv410QvAZokhBA?e=Y57Xrv",target:"_blank",children:Z==="de"?"DSGVO":Z==="es"?"RGPD":Z==="en"?"GDPR":"RGPD"}),jsxRuntimeExports.jsx("a",{href:Z==="de"?"https://tally.so/r/wA92dN":Z==="es"?"https://tally.so/r/3XQJlj":Z==="en"?"https://tally.so/r/wLO7PO":"https://tally.so/r/n0k76A",target:"_blank",style:{float:"right",marginRight:It?"0.2em":"2em"},children:Z==="de"?"Meinen Chatbot anpassen":Z==="es"?"Personalizar mi chatbot":Z==="en"?"Customize my chatbot":"Personnaliser mon chatbot"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"chat-container",children:[jsxRuntimeExports.jsxs("div",{className:"chat-header typing-indicator",style:{display:W},children:[jsxRuntimeExports.jsx("h2",{className:"chat-header",children:me("")+" "+(Z==="fr"?"en train d'écrire":Z==="es"?"chateando":Z==="en"?"chatting":Z==="de"?"am Schreiben":"")}),jsxRuntimeExports.jsx("span",{className:"dot"}),jsxRuntimeExports.jsx("span",{className:"dot"}),jsxRuntimeExports.jsx("span",{className:"dot"})]}),jsxRuntimeExports.jsxs("div",{ref:ut,className:"chat-messages",children:[jsxRuntimeExports.jsxs("div",{className:"message blue-bg",style:{display:O===2&&ye.contact!==""?"block":"none"},children:[jsxRuntimeExports.jsx("b",{children:I()}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),k(""),jsxRuntimeExports.jsx("b",{className:"color-cita",children:new Intl.DateTimeFormat(Pe(""),{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"UTC"}).format(new Date(ye.dateCita))}),jsxRuntimeExports.jsx("br",{}),B(""),jsxRuntimeExports.jsx("b",{className:"color-cita",children:ye.labelService}),jsxRuntimeExports.jsx("br",{}),F(""),jsxRuntimeExports.jsx("b",{className:"color-cita",children:jsxRuntimeExports.jsx("a",{href:"https://wa.me/?text="+ht().encodedMessage,children:"+"})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),K()]}),C.map((ce,_e)=>jsxRuntimeExports.jsxs("div",{className:`message ${ce.sender===ke("")?"blue-bg":"gray-bg"}`,children:[jsxRuntimeExports.jsxs("div",{className:"message-sender",children:[ce.sender,jsxRuntimeExports.jsx("button",{id:"doc"+_e,onClick:()=>t(ce.text),className:"transparent",children:jsxRuntimeExports.jsx(WordIcon,{size:24})}),jsxRuntimeExports.jsx("button",{id:_e,onClick:we=>D(we,ce.text),className:"clipboard-icon",children:"📋"}),jsxRuntimeExports.jsx("span",{className:"copied-message",style:{display:$===_e?"block":"none"},children:Re})]}),jsxRuntimeExports.jsxs("div",{className:"message-text",style:{display:"flex",flexDirection:"column",alignItems:"start"},children:[O===2&&ye.stepCita>0&&jsxRuntimeExports.jsxs("div",{children:[B(Z),jsxRuntimeExports.jsx("b",{children:ye.labelService}),jsxRuntimeExports.jsx("br",{}),k(Z),jsxRuntimeExports.jsx("b",{children:new Date(new Date(ye.dateCita).toDateString())>new Date(new Date().toDateString())?new Intl.DateTimeFormat(Pe(""),{weekday:"short",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"UTC"}).format(new Date(ye.dateCita)).replace("00:00","").replace(", 00:00",""):""}),jsxRuntimeExports.jsx("br",{})]}),jsxRuntimeExports.jsx("div",{style:{whiteSpace:"pre-line"},children:ce.lines&&ce.lines.length>0?ce.lines.map((we,Ae)=>jsxRuntimeExports.jsxs("span",{children:[we,jsxRuntimeExports.jsx("br",{})]},Ae)):ce.text}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("a",{style:{color:"#062a4e",fontWeight:"bold",textAlign:"left"},href:C.length>2&&ce&&ce.text&&typeof ce.text=="string"&&ce.text.includes("")?`https://wa.me/?text=${Z==="de"?"":Z==="es"?" Pregunta : ":" Question : "}${C.length>2&&C[_e-1]&&C[_e-1].text&&typeof C[_e-1].text=="string"?C[_e-1].text:""}${Z==="de"?"":Z==="es"?" Respuesta : ":Z==="en"?" Response : ":" Réponse : "}${C.length>2&&C[_e]&&C[_e].text&&typeof C[_e].text=="string"?C[_e].text:""}`:"",children:C.length>2&&ce&&ce.text&&typeof ce.text=="string"&&ce.text.includes("")&&jsxRuntimeExports.jsxs("span",{children:[Z==="de"?"":Z==="es"?"Contactar con ":Z==="en"?"Contact the ":"Contacter le ","+",""]})})]})]}),jsxRuntimeExports.jsx("div",{className:"message-timestamp",children:ce.timestamp}),d&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"10px",height:"20vh",width:"100%",display:ce.sender===me("")&&O===0&&ce.text!==M("")&&d&&_!==""?"flex":"none"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flex:"1"},children:jsxRuntimeExports.jsx("a",{href:"#popup",onClick:()=>Ft(!1),children:jsxRuntimeExports.jsx("img",{style:{height:"20vh"},src:b.length>0?b[0][1]:"",alt:b.length>0?b[0][0]:""})})}),jsxRuntimeExports.jsx("div",{style:{display:"flex",flex:"4",marginTop:"4em",alignItems:"right",justifyContent:"center",color:"#062a4e",marginLeft:"30px"},children:jsxRuntimeExports.jsx("a",{href:"#popup",onClick:()=>Ft(!1),children:b.length>0?b[0][0]:""})})]})]},_e)),jsxRuntimeExports.jsx("div",{class:"cita-container",style:{display:O===2&&V.length>0?"block":"none"},children:V.map((ce,_e)=>jsxRuntimeExports.jsxs("div",{className:"button-line",children:[ce.map((we,Ae)=>jsxRuntimeExports.jsx("button",{className:"cita-button button send-button",onClick:xe=>Mr(xe),value:we.split("-").length>2?we.split("-")[0]+"-"+we.split("-")[1]+"-"+we.split("-")[2]:we.split("-")[0],children:we.split("-").length>2?new Date(we).toLocaleString(Pe(""),{weekday:"short",day:"2-digit",month:"2-digit"}):we.split("-").length>1?we.split("-")[1]:new Date("2000-01-01T"+we+":00").toLocaleString(Z,{hour:"2-digit",minute:"2-digit"})},Ae)),jsxRuntimeExports.jsx("br",{})]},_e))})]}),Rt&&jsxRuntimeExports.jsxs("div",{class:"fixed-bottom",children:[jsxRuntimeExports.jsxs("form",{className:"chat-input-form",onSubmit:mt,children:[jsxRuntimeExports.jsx("textarea",{id:"message",name:"message",rows:"5",cols:"50",disabled:O===2&&ye.stepCita<3,className:"chat-input",value:J,placeholder:`${dt}, ${He}...`,onFocus:se,onChange:ce=>Q(ce.target.value)}),jsxRuntimeExports.jsx("input",{type:"text",name:"usr",value:"",onChange:Fr,onFocus:se,style:{display:"none"},tabIndex:"-1",autoComplete:"off"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:O===2&&ye.stepCita<3&&ye.contact!=="",className:"button send-button",children:pe})]}),jsxRuntimeExports.jsxs("div",{className:"displayElements1",children:[jsxRuntimeExports.jsx("button",{className:"button send-button",onClick:Je,children:O===2&&ye.contact!==""?Ie:Te}),jsxRuntimeExports.jsxs("div",{className:O===2&&(ye.stepCita>0||ye.contact!="")?"disabled":"",children:[jsxRuntimeExports.jsx("input",{type:"radio",id:"en",name:"options",checked:Z==="en",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"EN",className:"label",onClick:()=>kt("en"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${Z==="en"?"selected":""}`}),"EN"]}),jsxRuntimeExports.jsx("input",{type:"radio",id:"fr",name:"options",checked:Z==="fr",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"FR",className:"label",onClick:()=>kt("fr"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${Z==="fr"?"selected":""}`}),"FR"]}),jsxRuntimeExports.jsx("input",{type:"radio",id:"de",name:"options",checked:Z==="de",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"DE",className:"label",onClick:()=>kt("de"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${Z==="de"?"selected":""}`}),"DE"]}),jsxRuntimeExports.jsx("input",{type:"radio",id:"es",name:"options",checked:Z==="es",style:{display:"none"}}),jsxRuntimeExports.jsxs("label",{htmlFor:"ES",className:"label",onClick:()=>kt("es"),children:[jsxRuntimeExports.jsx("span",{className:`radio ${Z==="es"?"selected":""}`}),"ES"]}),!1,!1]})]}),jsxRuntimeExports.jsxs("div",{className:"displayElements2",children:[jsxRuntimeExports.jsx("button",{style:de,className:"button send-button",onClick:()=>Mt(0),children:Me}),jsxRuntimeExports.jsx("button",{style:ue,className:"button send-button",onClick:()=>Mt(1),children:it}),jsxRuntimeExports.jsx("button",{style:ge,className:"button send-button",onClick:()=>Mt(2),children:qe})]})]})]})]})};export{ClientView as default};
